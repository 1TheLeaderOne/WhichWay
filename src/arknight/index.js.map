{"version":3,"file":"index.js","sources":["../../../../../../packages/extension/WhichWay/src/arknight/index.ts"],"sourcesContent":["import { whichWayFile } from \"../file.js\";\r\nimport { onInit, onSetDev, onConfig, onContent } from \"../hooks/index.js\";\r\nimport { whichWayArknightShcema } from \"./shcema.js\";\r\nimport { whichWayUtil } from \"../utill.js\";\r\nimport { whichWayArknightRedirect } from \"./redirect.js\";\r\nimport { lib, game, ui, get, ai, _status } from \"noname\";\r\nimport { whichWayVersion } from \"../version.js\";\r\nimport { whichWayToast } from \"../toast/index.js\";\r\n\r\nclass WhichWayArknight {\r\n\t/**\r\n\t * 初始化\r\n\t */\r\n\tasync init() {\r\n\t\t//更新明日方舟数据\r\n\t\tawait this.autoUpdate();\r\n\r\n\t\t//加载明日方舟数据\r\n\t\tawait this.loadArknightData();\r\n\r\n\t\tawait this.loadShcema();\r\n\r\n\t\t//为所有扩展角色添加对应的明日方舟角色数据\r\n\t\tonInit({\r\n\t\t\tname: \"arknight_init\",\r\n\t\t\tfn: packs => {\r\n\t\t\t\tfor (let pack of packs) {\r\n\t\t\t\t\tfor (let name in pack.character) {\r\n\t\t\t\t\t\tthis.initCharArknight(pack.character[name]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tpriority: -1145141919810,\r\n\t\t});\r\n\r\n\t\tonConfig({\r\n\t\t\tname: \"whichWayNumberOfArknigtChars_add\",\r\n\t\t\tfn() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tname: \"numberOfArknigtChars\",\r\n\t\t\t\t\toptions: {\r\n\t\t\t\t\t\tname: `明日方舟干员数:${Object.keys(whichWayArknight.arknightData.charword_table.charDefaultTypeDict).length}`,\r\n\t\t\t\t\t\tclear: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tpriority: 998,\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * 加载明日方舟相关数据\r\n\t * @param {string} [path=\"json:arknight\"] json文件的路径\r\n\t */\r\n\tasync loadArknightData(path: string = \"json:arknight/\") {\r\n\t\t//@ts-ignore\r\n\t\tif (!this.arknightData) this.arknightData = {};\r\n\t\t//获取文件列表\r\n\t\tconst { files } = await whichWayFile.getFileTree(path);\r\n\r\n\t\tconst jsonNames = files.filter(file => file.name.endsWith(\".json\")).map(file => file.name);\r\n\t\tconst jsonPaths = files.filter(file => file.path.endsWith(\".json\")).map(file => file.path);\r\n\r\n\t\tfor (let i = 0; i < jsonNames.length; i++) {\r\n\t\t\tconst jsonName = jsonNames[i],\r\n\t\t\t\tjsonPath = jsonPaths[i];\r\n\t\t\tconst jsonData = await whichWayFile.readFile(jsonPath);\r\n\t\t\tthis.arknightData[jsonName.replace(\".json\", \"\")] = jsonData;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 构建映射表\r\n\t */\r\n\tasync loadShcema() {\r\n\t\tconst {\r\n\t\t\tcharacter: { whichWayUID: extUID, chineseName: cn, arknightUID: arkUID },\r\n\t\t} = this.shcema;\r\n\t\tconst characters = window.whichWaySave.allCharacters;\r\n\t\tconst arkData: Record<string, ArknightCharacter> = this.arknightData.character_table;\r\n\t\tfor (let key in arkData) {\r\n\t\t\tlet info = arkData[key];\r\n\t\t\tif (!this.isCharacter(info)) continue;\r\n\r\n\t\t\tconst trans = characters.map(i => this.redirect.transfer(get.translation(i)));\r\n\r\n\t\t\tif (trans.includes(info.name)) {\r\n\t\t\t\tconst whichWayUID: string = characters.find(i => this.redirect.transfer(get.translation(i)) === info.name)!;\r\n\t\t\t\textUID[whichWayUID] = key;\r\n\t\t\t\tarkUID[key] = whichWayUID;\r\n\t\t\t\tcn.set([key, whichWayUID], info.name);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//byd鹰角为什么就不能把升变阿米娅的数据合并到character_table???\r\n\t\tconst amiyaData = this.arknightData.char_patch_table.patchChars;\r\n\t\tfor (let key in amiyaData) {\r\n\t\t\tlet info = amiyaData[key];\r\n\t\t\tif (!this.isCharacter(info)) continue;\r\n\r\n\t\t\t//滚到character_table里去\r\n\t\t\tarkData[key] = info;\r\n\r\n\t\t\tconst amiyaName = this.redirect.transfer(key, \"amiya\");\r\n\t\t\tif (characters.map(i => get.translation(i)).includes(amiyaName)) {\r\n\t\t\t\tconst whichWayUID: string = characters.find(i => this.redirect.transfer(get.translation(i)) === amiyaName)!;\r\n\r\n\t\t\t\textUID[whichWayUID] = key;\r\n\t\t\t\tarkUID[key] = whichWayUID;\r\n\t\t\t\tcn.set([key, whichWayUID], amiyaName);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 是否是干员\r\n\t * @param { ArknightCharacter | string } info 明日方舟角色信息或明日方舟角色uid\r\n\t * @returns { boolean }\r\n\t */\r\n\tisCharacter(info: ArknightCharacter | string): boolean {\r\n\t\tif (typeof info === \"string\") info = this.arknightData.character_table[info];\r\n\t\tif (info === undefined) return false;\r\n\t\treturn !(/** @type {ArknightCharacter} */ info.subProfessionId.startsWith(\"notchar\"));\r\n\t}\r\n\r\n\t/**\r\n\t * 判断是否在明日方舟角色列表中\r\n\t * @param {string} name 角色名（驶舰之向角色）\r\n\t * @returns {boolean}\r\n\t */\r\n\tinArknightChars(name:string):boolean{\r\n\t\tconst chars = window.whichWaySave.allCharacters;\r\n\t\tif(!chars){\r\n\t\t\tconsole.warn(\"allCharacters is not initialized!\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif(!chars.includes(name)) return false;\r\n\t\treturn !!this.shcema.transfer(name, \"character\", \"whichWayUID\");\r\n\t}\r\n\r\n\t/**\r\n\t * 初始化角色的明日方舟数据\r\n\t * @param {WhichWayCharacter} char 角色数据\r\n\t */\r\n\tinitCharArknight(char: WhichWayCharacter) {\r\n\t\t//@ts-ignore 设置明日方舟uid\r\n\t\tchar.whichWay.arknight.charId = this.shcema.transfer(char.whichWay.charId, \"character\", \"whichWayUID\");\r\n\r\n\t\t//@ts-ignore 设置对应阵容\r\n\t\tchar.whichWay.arknight.camp = this.getCamp(char);\r\n\r\n\t\t//@ts-ignore 设置可用的语音语言\r\n\t\tchar.whichWay.arknight.avaiableLangs = this.getAviableLangs(char.whichWay.charId) || [];\r\n\r\n\t\t//角色tag\r\n\t\tchar.whichWay.arknight.tags = this.getTags(char.whichWay.charId) || [];\r\n\t}\r\n\r\n\t/**\r\n\t * 通过索引获取音频信息\r\n\t * @param { number } index - 索引\r\n\t * @returns { { index: string, name: string }}\r\n\t */\r\n\tgetAudioByIndex(index: number): { index: string; name: string } {\r\n\t\tif (this.shcema.audio.name.length < index) throw new Error(`索引超出范围,最大索引为${this.shcema.audio.name.length - 1}: ${index}`);\r\n\t\treturn {\r\n\t\t\tindex: this.shcema.audio.index[index],\r\n\t\t\tname: this.shcema.audio.name[index],\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * 获取所有的配音语言\r\n\t * @returns {string[]}\r\n\t * @param {boolean} lowerCase 是否返回小写\r\n\t */\r\n\tgetVoiceLangs(lowerCase: boolean = false): string[] {\r\n\t\tlet temp = Object.keys(this.arknightData.charword_table.voiceLangTypeDict);\r\n\t\ttemp.push(\"CUSTOM\");\r\n\t\treturn lowerCase ? temp.map(i => i.toLowerCase()) : temp;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取语言的中文翻译\r\n\t * @param {string} lang 语言\r\n\t * @returns {string | undefined}\r\n\t */\r\n\tgetVoiceLangTranslation(lang: string): string | undefined {\r\n\t\tif(lang === \"CUSTOM\") return \"本地\"\r\n\t\tlet langs = this.arknightData.charword_table.voiceLangTypeDict;\r\n\t\tif (!langs[lang]) return;\r\n\t\treturn langs[lang].name;\r\n\t}\r\n\r\n\t/**\r\n\t * 通过uid获取角色的标签\r\n\t * @param {string} uid 明日方舟角色uid或驶舰之向角色\r\n\t * @returns {string[] | undefined}\r\n\t */\r\n\tgetTags(uid: string): string[] | undefined {\r\n\t\tconst arkUid = this.shcema.transfer(uid, \"character\", \"whichWayUID\") || uid;\r\n\t\tif (arkUid in this.arknightData.character_table) {\r\n\t\t\treturn this.arknightData.character_table[arkUid].tagList || [];\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 获得角色可用的语音语言\r\n\t * @param {string} uid 明日方舟角色uid或驶舰之向角色\r\n\t * @returns {string[] | undefined}\r\n\t */\r\n\tgetAviableLangs(uid: string): string[] | undefined {\r\n\t\tconst { voiceLangDict } = this.arknightData.charword_table;\r\n\t\tconst arkUid = this.shcema.transfer(uid, \"character\", \"whichWayUID\") || uid;\r\n\t\tif (!voiceLangDict[arkUid]?.dict) return [\"CUSTOM\"];\r\n\t\treturn Object.keys(voiceLangDict[arkUid].dict) || undefined;\r\n\t}\r\n\r\n\t/**\r\n\t * 获得角色在明日方舟中的阵营id\r\n\t * @param {string | Player | WhichWayCharacter} uid 驶舰之向角色或驶舰之向角色的阵营\r\n\t * @returns {ArksCamps | undefined}\r\n\t */\r\n\tgetCamp(uid: string | Player | WhichWayCharacter): ArksCamps | undefined {\r\n\t\t//@ts-ignore\r\n\t\tif (get.itemtype(uid) === \"player\") uid = uid.name;\r\n\r\n\t\tif (get.is.object(uid)) {\r\n\t\t\t//@ts-ignore\r\n\t\t\tlet char: WhichWayCharacter = uid;\r\n\t\t\tif (!char.whichWay) return undefined;\r\n\t\t\t//@ts-ignore\r\n\t\t\treturn this.shcema.transfer(char.whichWay?.reallyGroup, \"group\", \"arknight\");\r\n\t\t} else if (typeof uid === \"string\") {\r\n\t\t\tif (window.whichWaySave.allCharacters.includes(uid)) {\r\n\t\t\t\tconst group = whichWayUtil.getCharExtConfig(uid)?.reallyGroup || \"\";\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\treturn this.shcema.transfer(group, \"group\", \"arknight\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 通过uid获取角色的中文名\r\n\t * @param {string} uid 明日方舟角色uid\r\n\t * @returns {string | undefined}\r\n\t */\r\n\tgetTranslation(uid: string): string | undefined {\r\n\t\treturn this.shcema.transfer(uid, \"character\", \"chineseName\");\r\n\t}\r\n\r\n\t/**\r\n\t * 自动检测更新明日方舟数据\r\n\t */\r\n\tasync autoUpdate() {\r\n\t\tconst { files } = await whichWayFile.getFileTree(\"json:arknight/\");\r\n\t\tconst fileNames = files.map(file => file.name);\r\n\r\n\t\tif (fileNames.length < 1 || !this.updateFile.every(file => fileNames.includes(file + '.json'))) {\r\n\t\t\tawait this.updateArknigtData();\r\n\t\t}\r\n\t\telse if (whichWayVersion.extVersionChanged) {\r\n\t\t\tawait this.updateArknigtData();\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/**\r\n\t * 更新明日方舟数据\r\n\t */\r\n\tasync updateArknigtData() {\r\n\t\tconst { updateFile, updateUrl } = this;\r\n\t\twhichWayToast.showToast(`[驶舰之向] 正在更新明日方舟数据...`, 3000, \"topRight\",\"whichWayArknightUpdateTitle\");\r\n\t\tfor (const file of updateFile) {\r\n\t\t\tconst url = `${updateUrl}${file}.json`;\r\n\t\t\tawait whichWayFile.download(url, `json:arknight/`, `${file}.json`, ({ percent, total, loaded }) => {\r\n\t\t\t\tif (percent !== null) {\r\n\t\t\t\t\tif (whichWayUtil.isDeveloperMode()) console.log(`正在下载文件${file}: ${percent}%`);\r\n\t\t\t\t\twhichWayToast.showToast(`正在下载文件${file}: ${percent}%`, 3000, \"topRight\", \"whichWayArknightUpdate\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (whichWayUtil.isDeveloperMode()) {\r\n\t\t\t\t\t\tconsole.log(`正在下载文件 ${file}: ${loaded} bytes`);\r\n\t\t\t\t\t}\r\n\t\t\t\t\twhichWayToast.showToast(`正在下载文件 ${file}: ${Math.floor(loaded / 1024)} KB`, 3000, \"topRight\", `whichWayArknightUpdate`);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\twhichWayToast.showToast(`文件 ${file} 下载完成!`, 3000, \"topRight\");\r\n\t\t\twhichWayToast.removeToastById(\"whichWayArknightUpdate\");\r\n\t\t\twhichWayToast.removeToastById(\"whichWayArknightUpdateTitle\");\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/**\r\n\t * TODO添加新的JSON后需要自行补充TS声明\r\n\t * 加载的JSON的原始数据\r\n\t */\r\n\tarknightData: {\r\n\t\tcharacter_table: Record<string, ArknightCharacter>;\r\n\t\tcharword_table: ArknightVoice;\r\n\t\thandbook_team_table: ArknightTeams;\r\n\t\tchar_patch_table: ArknightCharacterPatch;\r\n\t};\r\n\r\n\t/**\r\n\t * 需要更新的JSON文件名\r\n\t */\r\n\tupdateFile: Array<string> = [\"character_table\", \"charword_table\", \"handbook_team_table\", \"char_patch_table\"];\r\n\r\n\t/**\r\n\t * 更新的JSON文件地址\r\n\t */\r\n\tupdateUrl: string = \"https://torappu.prts.wiki/gamedata/latest/excel/\";\r\n\r\n\tshcema = whichWayArknightShcema;\r\n\r\n\tredirect = whichWayArknightRedirect;\r\n}\r\n\r\nexport const whichWayArknight = new WhichWayArknight();\r\n\r\nawait whichWayArknight.init();\r\n\r\nonSetDev({\r\n\tname: \"whichWayArknight\",\r\n\tfn: () => {\r\n\t\t//@ts-ignore\r\n\t\twindow.whichWayArknight = whichWayArknight;\r\n\t},\r\n});\r\n\r\nwindow.whichWay.register(\"arknight\", whichWayArknight);\r\n"],"names":[],"mappings":"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"}