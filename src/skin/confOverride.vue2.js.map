{"version":3,"file":"confOverride.vue2.js","sources":["../../../../../../packages/extension/WhichWay/src/skin/confOverride.vue"],"sourcesContent":["<template>\r\n\t<div class=\"conf-override\">\r\n\t\t<div class=\"config-container\">\r\n\t\t\t<div class=\"title-container\">\r\n\t\t\t\t<img :src=\"IMG_SKIN\" />\r\n\t\t\t\t<div class=\"title\">皮肤配置冲突</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"confilct-card-container\">\r\n\t\t\t\t<div v-for=\"(items, cardTitle) in confictedSkin\" :key=\"cardTitle\" class=\"confilct-card\">\r\n\t\t\t\t\t<div class=\"card-title\">{{ translate(cardTitle) }}</div>\r\n\t\t\t\t\t<div class=\"card-content\" v-horizontal-scroll>\r\n\t\t\t\t\t\t<div \r\n\t\t\t\t\t\t\tv-for=\"(item, index) in items\" \r\n\t\t\t\t\t\t\t:key=\"`${cardTitle}-${index}`\" \r\n\t\t\t\t\t\t\tclass=\"item-content\"\r\n\t\t\t\t\t\t\t:class=\"{ 'selected': isSelected(cardTitle, item.skin) }\"\r\n\t\t\t\t\t\t\t@click=\"selectSkin(cardTitle, item.skin)\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<div class=\"skin-container\">\r\n\t\t\t\t\t\t\t\t<img :src=\"whichWaySkin.getCharacterSkin(cardTitle, item.skin)?.path\">\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"intro-container\">\r\n\t\t\t\t\t\t\t\t<span class=\"skin-item\">{{ whichWayFile.removeExt(item.skin) }}</span>\r\n\t\t\t\t\t\t\t\t<span class=\"from-item\">{{ translate(item.from) }}</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"quick-container\">\r\n\t\t\t<button class=\"apply-btn\" @click=\"applySelections\">应用选择</button>\r\n\t\t\t<button class=\"reset-btn\" @click=\"resetSelections\">重置</button>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { lib, game, ui, get, ai, _status } from \"noname\";\r\nimport { whichWayFile } from \"../file.js\";\r\nimport { whichWaySkin } from \"./index.ts\";\r\nimport { ref, reactive } from 'vue';\r\n\r\nconst IMG_SKIN = whichWayFile.compilePath(\"ui:skin.png\");\r\nconst confictedSkin = whichWaySkin.confictedSkins.data;\r\n\r\nconst selectedSkins = reactive<Record<string, string>>({});\r\n\r\nfunction initSelections() {\r\n\tObject.keys(confictedSkin).forEach(cardTitle => {\r\n\t\tif (confictedSkin[cardTitle].length > 0) {\r\n\t\t\tselectedSkins[cardTitle] = whichWaySkin.confictedSkins.selected[cardTitle] || confictedSkin[cardTitle][0].skin;\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction isSelected(cardTitle: string, skin: string): boolean {\r\n\treturn selectedSkins[cardTitle] === skin;\r\n}\r\n\r\nfunction selectSkin(cardTitle: string, skin: string) {\r\n\tselectedSkins[cardTitle] = skin;\r\n\tconsole.log(`已选择 ${cardTitle} 的皮肤: ${skin}`);\r\n}\r\n\r\nfunction applySelections() {\r\n\twhichWaySkin.confictedSkins.selected = selectedSkins;\r\n\tconst overlay = document.querySelector(\".conflictedSkinOverlay-whichWaySkin.whichWayOverlay\");\r\n\toverlay && overlay.remove();\r\n\tif(whichWaySkin.pendingReslove[\"showConflictedSkin\"]){\r\n\t\twhichWaySkin.pendingReslove[\"showConflictedSkin\"](true);\r\n\t\twhichWaySkin.pendingReslove[\"showConflictedSkin\"] = null;\r\n\t}\r\n}\r\n\r\nfunction resetSelections() {\r\n\tinitSelections();\r\n}\r\n\r\ninitSelections();\r\n\r\nconst fromTranslate = {\r\n\tnoname: \"无名杀\",\r\n\twhichWay: \"驶舰之向\",\r\n\tqhly: \"千幻聆音\",\r\n};\r\n\r\nfunction translate(name: string) {\r\n\tif (fromTranslate[name]) return fromTranslate[name];\r\n\tif (lib.translate[name]) return lib.translate[name];\r\n\treturn name;\r\n}\r\n\r\n// 横向滚动指令\r\nconst vHorizontalScroll = {\r\n\tmounted(el: HTMLElement) {\r\n\t\tconst handleWheel = (e: WheelEvent) => {\r\n\t\t\te.preventDefault();\r\n\t\t\tel.scrollLeft += e.deltaY;\r\n\t\t};\r\n\t\t\r\n\t\tel.addEventListener('wheel', handleWheel as EventListener, { passive: false });\r\n\t\t(el as any)._handleWheel = handleWheel;\r\n\t},\r\n\tunmounted(el: HTMLElement) {\r\n\t\tconst handler = (el as any)._handleWheel;\r\n\t\tif (handler) {\r\n\t\t\tel.removeEventListener('wheel', handler);\r\n\t\t\t(el as any)._handleWheel = null;\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.conf-override {\r\n\twidth: 80%;\r\n\theight: 90%;\r\n\tposition: absolute;\r\n}\r\n\r\n.config-container {\r\n\tposition: relative;\r\n\twidth: 90%;\r\n\theight: 100%;\r\n\tbackground: rgba(23, 129, 181, 0.8);\r\n\tborder-radius: 12px;\r\n\tbox-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);\r\n}\r\n\r\n.config-container .title-container {\r\n\tposition: relative;\r\n\twidth: calc(100% - 30px);\r\n\tpadding: 15px;\r\n\theight: 30px;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n}\r\n\r\n.config-container .title-container::before {\r\n\tcontent: \"\";\r\n\tborder-bottom: 1px solid #4b5563;\r\n\twidth: 80%;\r\n\theight: calc(100% - 15px);\r\n\tz-index: 114514;\r\n\tposition: absolute;\r\n}\r\n\r\n.config-container .title {\r\n\tfont-size: 20px;\r\n\tfont-weight: bold;\r\n\tposition: relative;\r\n\tmargin-left: 10px;\r\n\tcolor: #f1f5f9;\r\n}\r\n\r\n.config-container .title-container img {\r\n\twidth: 20px;\r\n\theight: 20px;\r\n}\r\n\r\n.confilct-card-container {\r\n\tposition: relative;\r\n\twidth: calc(100% - 20px);\r\n\theight: calc(100% - 80px);\r\n\toverflow: auto;\r\n\tpadding: 10px;\r\n}\r\n\r\n.confilct-card {\r\n\tposition: relative;\r\n\twidth: 22%;\r\n\theight: 250px;\r\n\tpadding: 1%;\r\n\tmargin: 1%;\r\n\tbackground: #66a9c9;\r\n\tborder-radius: 12px;\r\n}\r\n\r\n.confilct-card .card-title {\r\n\twidth: calc(100% - 10px);\r\n\theight: 30px;\r\n\tfont-size: 20px;\r\n\tfont-weight: bold;\r\n\ttext-align: center;\r\n\tpadding: 5px;\r\n\tposition: relative;\r\n\tcolor: #f8fafc;\r\n}\r\n\r\n.confilct-card .card-content {\r\n\twidth: calc(100% - 10px);\r\n\theight: calc(100% - 40px);\r\n\tpadding: 5px;\r\n\toverflow-x: auto;\r\n\toverflow-y: hidden;\r\n\tposition: relative;\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\tflex-wrap: nowrap;\r\n\tgap:10px;\r\n}\r\n\r\n.confilct-card .card-content .item-content {\r\n\theight: calc(100% - 20px);\r\n\twidth: 100px;\r\n\tpadding: 5px;\r\n\tposition: relative;\r\n\tbackground: rgba(30, 41, 59, 0.7);\r\n\tborder-radius: 5px;\r\n\tmargin: 2px;\r\n\tflex-shrink: 0;\r\n\tcursor: pointer;\r\n\ttransition: all 0.3s ease;\r\n}\r\n\r\n/* 选中状态高亮 */\r\n.confilct-card .card-content .item-content.selected {\r\n\tbackground: linear-gradient(145deg, #1e3a8a, #3b82f6);\r\n\tborder: 2px solid #60a5fa;\r\n\tbox-shadow: 0 0 15px rgba(96, 165, 250, 0.5);\r\n\ttransform: scale(1.05);\r\n}\r\n\r\n.confilct-card .card-content .item-content:hover {\r\n\tbackground: rgba(56, 178, 172, 0.5);\r\n\ttransform: scale(1.02);\r\n}\r\n\r\n.confilct-card .card-content .item-content .skin-container {\r\n\twidth: 100%;\r\n\theight: 60%;\r\n\tposition: relative;\r\n}\r\n\r\n.confilct-card .card-content .item-content .skin-container img {\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tobject-fit: contain;\r\n}\r\n\r\n.confilct-card .card-content .item-content .intro-container {\r\n\twidth: 100%;\r\n\theight: 40%;\r\n\tposition: relative;\r\n\tborder-top: 1px solid #64748b;\r\n\tdisplay: flex;\r\n\tflex-wrap: wrap;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n}\r\n\r\n.from-item,\r\n.skin-item {\r\n\twidth: 100%;\r\n\tpadding: 5px;\r\n\tposition: relative;\r\n\ttext-align: center;\r\n\tbackground: rgba(56, 178, 172, 0.3);\r\n\tborder-radius: 5px;\r\n\tfont-size: 12px;\r\n\twhite-space: nowrap;\r\n\toverflow: hidden;\r\n\ttext-overflow: ellipsis;\r\n}\r\n\r\n/* 选中标记 */\r\n.selected::after {\r\n\tcontent: \"✓\";\r\n\tposition: absolute;\r\n\ttop: 5px;\r\n\tright: 5px;\r\n\twidth: 20px;\r\n\theight: 20px;\r\n\tbackground: #10b981;\r\n\tcolor: white;\r\n\tborder-radius: 50%;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tfont-size: 14px;\r\n\tfont-weight: bold;\r\n\tbox-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.quick-container {\r\n\tposition: absolute;\r\n\ttop:0;\r\n\tright: 0;\r\n\twidth: calc(10% - 10px);\r\n\theight: 100%;\r\n\tmargin-left: 10px;\r\n\tbackground: linear-gradient(145deg, #0ea5e9, #38bdf8);\r\n\tborder-radius: 12px;\r\n\tbox-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\r\n\tgap:10px;\r\n\tdisplay: flex;\r\n    flex-wrap: wrap;\r\n    justify-content: center;\r\n    align-content: flex-start;\r\n}\r\n\r\n.apply-btn,\r\n.reset-btn {\r\n\twidth: 80%;\r\n\tpadding: 12px;\r\n\tborder: none;\r\n\tborder-radius: 8px;\r\n\tfont-size: 12px;\r\n\tfont-weight: bold;\r\n\tcursor: pointer;\r\n\ttransition: all 0.3s ease;\r\n\tbox-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\r\n\tposition: relative;\r\n\tmargin-top: 10px;\r\n}\r\n\r\n.apply-btn {\r\n\tbackground: linear-gradient(145deg, #10b981, #34d399);\r\n\tcolor: white;\r\n}\r\n\r\n.apply-btn:hover {\r\n\tbackground: linear-gradient(145deg, #059669, #10b981);\r\n\ttransform: translateY(-2px);\r\n\tbox-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.apply-btn:active {\r\n\ttransform: translateY(0);\r\n}\r\n\r\n.reset-btn {\r\n\tbackground: linear-gradient(145deg, #ef4444, #f87171);\r\n\tcolor: white;\r\n}\r\n\r\n.reset-btn:hover {\r\n\tbackground: linear-gradient(145deg, #dc2626, #ef4444);\r\n\ttransform: translateY(-2px);\r\n\tbox-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.reset-btn:active {\r\n\ttransform: translateY(0);\r\n}\r\n</style>"],"names":["_openBlock","_createElementBlock","_createElementVNode","_unref","_Fragment","_renderList","_toDisplayString","_withDirectives","_normalizeClass"],"mappings":"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"}