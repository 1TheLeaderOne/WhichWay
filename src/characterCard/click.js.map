{"version":3,"file":"click.js","sources":["../../../../../../packages/extension/WhichWay/src/characterCard/click.ts"],"sourcesContent":["import { whichWayCharacterCard } from \"./index.ts\";\r\nimport { lib, game, ui, get, ai, _status } from \"noname\";\r\nimport { whichWaySkin } from \"../skin/index.ts\";\r\nimport { whichWayAudio } from \"../audio/index.ts\";\r\nimport { spineWorker } from \"../skin/spineWork.js\";\r\nimport { whichWayCharacterModules } from \"../modules/index.js\";\r\n\r\nclass WhichWayCharacterCardClick {\r\n\tget charImage() {\r\n\t\treturn document.body.querySelector(\".charImage\");\r\n\t}\r\n\tget tool() {\r\n\t\treturn whichWayCharacterCard;\r\n\t}\r\n\tfindButton(name: string) {\r\n\t\tconst btns = document.body.querySelectorAll(\".btn-background\");\r\n\t\tfor (let btn of btns) {\r\n\t\t\t// @ts-ignore\r\n\t\t\tif (btn.dataset && btn.dataset.btnName === name) return btn;\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n\tgetCharName() {\r\n\t\t// @ts-ignore\r\n\t\treturn document.body.querySelector(\".container-CC-SJZX\").dataset.charName;\r\n\t}\r\n\tquit() {\r\n\t\tconst target = this.findButton(\"quit\");\r\n\t\tconst displayArenaSJZX = document.querySelector(\".displayArenaSJZX\");\r\n\t\tconst btnSelected = document.querySelector(\".btn-selected-SJZX\");\r\n\t\tif (btnSelected) btnSelected.classList.remove(\"btn-selected-SJZX\");\r\n\t\t// @ts-ignore\r\n\t\ttarget.classList.add(\"btn-selected-SJZX\");\r\n\t\tthis.showResumeChar(displayArenaSJZX!, this.getCharName());\r\n\t}\r\n\tskill() {\r\n\t\tconst target = this.findButton(\"skill\");\r\n\t\tconst displayArenaSJZX = document.querySelector(\".displayArenaSJZX\");\r\n\t\tconst btnSelected = document.querySelector(\".btn-selected-SJZX\");\r\n\t\tif (btnSelected) btnSelected.classList.remove(\"btn-selected-SJZX\");\r\n\t\t// @ts-ignore\r\n\t\ttarget.classList.add(\"btn-selected-SJZX\");\r\n\t\tthis.showCharSkill(displayArenaSJZX!, this.getCharName());\r\n\t}\r\n\tasync skin() {\r\n\t\tconst target = this.findButton(\"skin\");\r\n\t\tconst displayArenaSJZX = document.querySelector(\".displayArenaSJZX\");\r\n\t\tconst btnSelected = document.querySelector(\".btn-selected-SJZX\");\r\n\t\tif (btnSelected) btnSelected.classList.remove(\"btn-selected-SJZX\");\r\n\t\t// @ts-ignore\r\n\t\ttarget.classList.add(\"btn-selected-SJZX\");\r\n\t\tawait this.showSkinChar(displayArenaSJZX!, this.getCharName());\r\n\t}\r\n\tmode() {\r\n\t\tconst target = this.findButton(\"mode\");\r\n\t\tconst displayArenaSJZX = document.querySelector(\".displayArenaSJZX\");\r\n\t\tconst btnSelected = document.querySelector(\".btn-selected-SJZX\");\r\n\t\tif (btnSelected) btnSelected.classList.remove(\"btn-selected-SJZX\");\r\n\t\t// @ts-ignore\r\n\t\ttarget.classList.add(\"btn-selected-SJZX\");\r\n\t\tthis.showCharModules(displayArenaSJZX!, this.getCharName());\r\n\t}\r\n\tasync toggleSkin(e: Event) {\r\n\t\tlet name = this.getCharName();\r\n\t\tlet skin = whichWaySkin.getCurentSkin(name);\r\n\t\tawait spineWorker.toggleDycSkin(name, skin);\r\n\t\t//@ts-ignore\r\n\t\tlet target: Element = e.currentTarget!;\r\n\t\tlet buttonText = target.querySelector(\".buttonText\");\r\n\t\ttarget.classList.toggle(\"buttonWrapper-enableSkinBG\");\r\n\t\tif (buttonText) buttonText.innerHTML = spineWorker.isEnabledSkin(name, skin) ? \"关闭动皮\" : \"开启动皮\";\r\n\t\tawait spineWorker.updateDyc(name, this.charImage);\r\n\t\tfor (let player of game.players) {\r\n\t\t\tif (get.name(player) === name) await spineWorker.updateDyc(name, player);\r\n\t\t}\r\n\t}\r\n\r\n\tasync showCharSkill(container: Element, name: string) {\r\n\t\tcontainer.replaceChildren();\r\n\t\tlet skills = get.character(name).skills;\r\n\t\tlet derivation = {};\r\n\t\tskills.forEach(skill => {\r\n\t\t\tlet info = get.info(skill);\r\n\t\t\tif (info.derivation) derivation[skill] = Array.isArray(info.derivation) ? info.derivation : [info.derivation];\r\n\t\t});\r\n\r\n\t\tfor (let skill of skills) {\r\n\t\t\tconst skillWrapper = ui.create.div(\".skillWrapper\", container);\r\n\t\t\tconst headWrapper = ui.create.div(\".headWrapper\", skillWrapper);\r\n\t\t\tconst dragHandle = ui.create.div(\".dragHandle\", headWrapper);\r\n\t\t\tdragHandle.innerHTML = \"≡\";\r\n\t\t\tconst skillname = ui.create.div(\".skillname\", headWrapper);\r\n\t\t\tskillname.innerHTML = get.translation(skill);\r\n\t\t\tconst audioBtn = ui.create.div(\".audioBtn\", headWrapper);\r\n\t\t\taudioBtn.addEventListener(\"click\", async e => {\r\n\t\t\t\twhichWayAudio.playSkillAudio(skill, name);\r\n\t\t\t});\r\n\t\t\tlet info = get.info(skill);\r\n\t\t\tif (typeof info.frequent === \"boolean\") {\r\n\t\t\t\tconst autoSkill = ui.create.div(\".autoSkill\", headWrapper);\r\n\t\t\t\tautoSkill.innerHTML = `自动发动`;\r\n\t\t\t\tlet isAuto = lib.config.autoskilllist.includes(skill) ? false : info.frequent;\r\n\t\t\t\tautoSkill.classList.add(isAuto ? \"autoSkillOpened\" : \"autoSkillClosed\");\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tautoSkill.dataset.auto = isAuto;\r\n\t\t\t\tautoSkill.addEventListener(\"click\", async function (e) {\r\n\t\t\t\t\tlet target = e.currentTarget;\r\n\t\t\t\t\tif (target === null) return;\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (target.dataset.auto === \"true\") {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttarget.dataset.auto = \"false\";\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttarget.classList.remove(\"autoSkillOpened\");\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttarget.classList.add(\"autoSkillClosed\");\r\n\t\t\t\t\t\tlib.config.autoskilllist.add(skill);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttarget.dataset.auto = \"true\";\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttarget.classList.remove(\"autoSkillClosed\");\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttarget.classList.add(\"autoSkillOpened\");\r\n\t\t\t\t\t\tif (lib.config.autoskilllist.includes(skill)) lib.config.autoskilllist.remove(skill);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgame.saveConfig(\"autoskilllist\", lib.config.autoskilllist);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tconst skillInfo = ui.create.div(\".skillInfo\", skillWrapper);\r\n\t\t\tlet str = get.skillInfoTranslation(skill, void 0, false);\r\n\t\t\tif (lib.translate[`${skill}_append`]) str += `<br>${get.translation(`${skill}_append`)}`;\r\n\t\t\tskillInfo.innerHTML = str;\r\n\t\t\tif (derivation[skill])\r\n\t\t\t\tderivation[skill].forEach(dskill => {\r\n\t\t\t\t\tconst dskillWrapper = ui.create.div(\".skillWrapper\", container);\r\n\t\t\t\t\tconst dheadWrapper = ui.create.div(\".headWrapper\", dskillWrapper);\r\n\t\t\t\t\tconst ddragHandle = ui.create.div(\".dragHandle\", dheadWrapper);\r\n\t\t\t\t\tddragHandle.innerHTML = \"≡\";\r\n\t\t\t\t\tconst dskillname = ui.create.div(\".dskillname\", dheadWrapper);\r\n\t\t\t\t\tdskillname.innerHTML = get.translation(dskill);\r\n\t\t\t\t\tconst daudioBtn = ui.create.div(\".audioBtn\", dheadWrapper);\r\n\t\t\t\t\tdaudioBtn.addEventListener(\"click\", async () => {\r\n\t\t\t\t\t\twhichWayAudio.playSkillAudio(skill, name);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlet dinfo = get.info(dskill);\r\n\t\t\t\t\tif (typeof dinfo.frequent === \"boolean\") {\r\n\t\t\t\t\t\tconst dautoSkill = ui.create.div(\".autoSkill\", dheadWrapper);\r\n\t\t\t\t\t\tdautoSkill.innerHTML = `自动发动`;\r\n\t\t\t\t\t\tlet isAuto = lib.config.autoskilllist.includes(dskill) ? false : dinfo.frequent;\r\n\t\t\t\t\t\tdautoSkill.classList.add(isAuto ? \"autoSkillOpened\" : \"autoSkillClosed\");\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tdautoSkill.dataset.auto = isAuto;\r\n\t\t\t\t\t\tdautoSkill.addEventListener(\"click\", async function (e) {\r\n\t\t\t\t\t\t\tlet target = e.currentTarget;\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tif (target.dataset.auto === \"true\") {\r\n\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\ttarget.dataset.auto = \"false\";\r\n\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\ttarget.classList.remove(\"autoSkillOpened\");\r\n\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\ttarget.classList.add(\"autoSkillClosed\");\r\n\t\t\t\t\t\t\t\tlib.config.autoskilllist.add(dskill);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\ttarget.dataset.auto = \"true\";\r\n\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\ttarget.classList.remove(\"autoSkillClosed\");\r\n\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\ttarget.classList.add(\"autoSkillOpened\");\r\n\t\t\t\t\t\t\t\tif (lib.config.autoskilllist.includes(dskill)) lib.config.autoskilllist.remove(dskill);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tgame.saveConfig(\"autoskilllist\", lib.config.autoskilllist);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst dskillInfo = ui.create.div(\".skillInfo\", dskillWrapper);\r\n\t\t\t\t\tlet str = get.skillInfoTranslation(dskill, void 0, false);\r\n\t\t\t\t\tif (lib.translate[`${dskill}_append`]) str += `<br>${get.translation(`${dskill}_append`)}`;\r\n\t\t\t\t\tdskillInfo.innerHTML = str;\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tasync showResumeChar(container: Element, name: string) {\r\n\t\tcontainer.replaceChildren();\r\n\t\tconst charInfoText = get.characterIntro(name);\r\n\t\tconst charInfoWrapper = ui.create.div(\".charInfoWrapper\", container);\r\n\t\tconst charTitle = ui.create.div(\".charTitle\", charInfoWrapper);\r\n\t\tcharTitle.innerHTML = \"干员档案\";\r\n\t\tconst charInfo = ui.create.div(\".charInfo\", charInfoWrapper);\r\n\t\tcharInfo.innerHTML = charInfoText;\r\n\t\tconst gloryTitle = ui.create.div(\".charTitle\", charInfoWrapper);\r\n\t\tgloryTitle.innerHTML = \"光荣之路\";\r\n\t\tconst gloryWrapper = ui.create.div(\".charInfo\", charInfoWrapper, {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexWrap: \"wrap\",\r\n\t\t\tjustifyContent: \"center\",\r\n\t\t});\r\n\t\t//TODO: 光荣之路\r\n\t\t// const gloryData = whitherHelm.getAch(name, true);\r\n\t\t// for (let info of gloryData) {\r\n\t\t// \tlet infoCopy = { ...info };\r\n\t\t// \tinfoCopy.unlocked = Object.keys(lib.config.AchList_mrfz).includes(info.name2) && lib.config.AchList_mrfz[info.name2];\r\n\t\t// \tconsole.log(infoCopy);\r\n\t\t// \tconst achBox = await configUI.createAch(infoCopy, gloryWrapper);\r\n\t\t// \t// @ts-ignore\r\n\t\t// \tachBox.style.width = \"90%\";\r\n\t\t// \t// @ts-ignore\r\n\t\t// \tachBox.style.marginLeft = \"0px\";\r\n\t\t// }\r\n\t}\r\n\r\n\tasync showCharModules(container: Element, name: string) {\r\n\t\tcontainer.replaceChildren();\r\n\t\tconst modules = whichWayCharacterModules.getCharModules(name, false);\r\n\t\tfor (let key in modules) {\r\n\t\t\tlet info = modules[key];\r\n\t\t\tconst charModulesWrapper = ui.create.div(\".charModulesWrapper\", container);\r\n\t\t\tcharModulesWrapper.dataset.moduleId = key;\r\n\t\t\tconst modulesTitle = ui.create.div(\".modulesTitle\", charModulesWrapper);\r\n\t\t\tmodulesTitle.innerHTML = info.name;\r\n\t\t\tconst modulesInfoWrapper = ui.create.div(\".modulesInfoWrapper\", charModulesWrapper);\r\n\t\t\tconst modulesImage = ui.create.div(\".modulesImage\", modulesInfoWrapper);\r\n\t\t\tmodulesImage.style.backgroundImage = \"url(\" + info.url + \")\";\r\n\t\t\tconst modulesInfo = ui.create.div(\".modulesInfo\", modulesInfoWrapper);\r\n\t\t\tlet intro = Array.isArray(info.intro) ? info.intro : [info.intro];\r\n\t\t\tmodulesInfo.style.height = getComputedStyle(modulesInfoWrapper).height;\r\n\t\t\tfor (let text of intro) {\r\n\t\t\t\tui.create.div(\".infoText\", modulesInfo).innerHTML = text;\r\n\t\t\t}\r\n\t\t\tif (info.effect) {\r\n\t\t\t\tconst modulesEffectTitle = ui.create.div(\".modulesEffectTitle\", charModulesWrapper);\r\n\t\t\t\tmodulesEffectTitle.innerHTML = `模组效果`;\r\n\t\t\t\tconst modulesEffectInfo = ui.create.div(\".modulesEffectInfo\", charModulesWrapper);\r\n\t\t\t\tmodulesEffectInfo.innerHTML = await initIntro(info.effect.intro);\r\n\t\t\t}\r\n\r\n\t\t\tlet current = whichWayCharacterModules.getCharModules(name);\r\n\t\t\tif (current.id === key) {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tconst selected = ui.create.div(\".modulesSelectedSJZX\", charModulesWrapper);\r\n\t\t\t\tcharModulesWrapper.classList.add(\"modulesSelectedWrapper\");\r\n\t\t\t}\r\n\t\t\tcharModulesWrapper.addEventListener(\"click\", async e => {\r\n\t\t\t\tlet target = e.currentTarget;\r\n\t\t\t\tlet selected = document.querySelector(\".modulesSelectedWrapper\");\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tif (target.classList.contains(\"modulesSelectedWrapper\")) return;\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tselected.classList.remove(\"modulesSelectedWrapper\");\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tselected.removeChild(selected.querySelector(\".modulesSelectedSJZX\"));\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\ttarget.classList.add(\"modulesSelectedWrapper\");\r\n\t\t\t\tui.create.div(\".modulesSelectedSJZX\", target);\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\twhichWayCharacterModules.setCharModules(name, target.dataset.moduleId);\r\n\t\t\t\tif (!lib.config.noMentionModulesChange && lib.config.extension_whitherHelm_sjzxAutoReloadByChooseModule) {\r\n\t\t\t\t\tlet c = confirm(\"更换模组后部分效果需要重启才能生效，即将自动重启（如果不希望自动重启请去设置里关闭“更换模组自动重启游戏”）！选择“确定”则不再弹出此提示\");\r\n\t\t\t\t\tif (c) lib.config.noMentionModulesChange = true;\r\n\t\t\t\t\tgame.saveConfig(\"noMentionModulesChange\", lib.config.noMentionModulesChange);\r\n\t\t\t\t}\r\n\t\t\t\tif (lib.config.extension_whitherHelm_sjzxAutoReloadByChooseModule) game.reload();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tasync function initIntro(intro) {\r\n\t\t\tif (!intro) {\r\n\t\t\t\tconsole.warn(\"intro 不存在\");\r\n\t\t\t\treturn \"\";\r\n\t\t\t}\r\n\t\t\tintro = Array.isArray(intro) ? intro : [intro];\r\n\t\t\tfor (let i = 0; i < intro.length; i++) {\r\n\t\t\t\tlet content = intro[i];\r\n\t\t\t\tif (typeof content === \"function\") intro[i] = content();\r\n\t\t\t}\r\n\t\t\treturn intro.join(\"<br>\");\r\n\t\t}\r\n\t}\r\n\r\n\tasync showSkinChar(container: Element, name: string) {\r\n\t\tcontainer.replaceChildren();\r\n\t\tconst skinList = whichWaySkin.getCharacterSkin(name);\r\n\t\tfor (const skinname in skinList) {\r\n\t\t\tconst path = skinList[skinname];\r\n\t\t\tconst skinListWrapper = ui.create.div(\".skinListWrapper\", container);\r\n\t\t\tconst skinAvatorWrapper = ui.create.div(\".skinAvatorWrapper\", skinListWrapper);\r\n\t\t\tconst imageSkin = ui.create.div(\".imageSkin\", skinAvatorWrapper);\r\n\t\t\timageSkin.style.backgroundImage = \"url(\" + path + \")\";\r\n\r\n\t\t\tconst skinTextWrapper = ui.create.div(\".skinTextWrapper\", skinListWrapper);\r\n\t\t\tconst skinText = ui.create.div(\".skinText\", skinTextWrapper);\r\n\t\t\tskinText.innerHTML = `${skinname}`;\r\n\r\n\t\t\tskinListWrapper.dataset.skinUrl = path;\r\n\t\t\tskinListWrapper.dataset.skinName = skinname;\r\n\t\t\tskinListWrapper.dataset.charName = name;\r\n\r\n\t\t\tskinListWrapper.addEventListener(\"click\", async e => {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tlet target: HTMLElement = e.currentTarget;\r\n\t\t\t\tlet selected = document.querySelector(\".skinListSelectedWrapper\");\r\n\r\n\t\t\t\tlet skinUrl = target.dataset.skinUrl;\r\n\t\t\t\tlet skinName = target.dataset.skinName;\r\n\t\t\t\tlet charName = target.dataset.charName;\r\n\t\t\t\tif (target.classList.contains(\"skinListSelectedWrapper\")) return;\r\n\t\t\t\tif (selected) {\r\n\t\t\t\t\tselected.classList.remove(\"skinListSelectedWrapper\");\r\n\t\t\t\t\tselected.removeChild(selected.querySelector(\".skinSelectedSJZX\")!);\r\n\t\t\t\t}\r\n\t\t\t\ttarget.classList.add(\"skinListSelectedWrapper\");\r\n\t\t\t\tui.create.div(\".skinSelectedSJZX\", target);\r\n\t\t\t\twhichWaySkin.setCharacterSkin(charName!, skinName!);\r\n\t\t\t\tthis.tool.updateSkinImage(skinName!, skinUrl!, name);\r\n\t\t\t\twhichWaySkin.refreshSkin();\r\n\t\t\t});\r\n\r\n\t\t\tif (whichWaySkin.getCurentSkin(name) === skinname) {\r\n\t\t\t\tconst skinSelectedSJZX = ui.create.div(\".skinSelectedSJZX\", skinListWrapper);\r\n\t\t\t\tskinListWrapper.classList.add(\"skinListSelectedWrapper\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const whichWayCharacterCardClick = new WhichWayCharacterCardClick();\r\n"],"names":["str"],"mappings":"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"}