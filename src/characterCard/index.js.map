{"version":3,"file":"index.js","sources":["../../../../../../packages/extension/WhichWay/src/characterCard/index.ts"],"sourcesContent":["import { lib, game, ui, get, ai, _status } from \"noname\";\r\nimport { whichWayFile } from \"../file.js\";\r\nimport { whichWayCharacterCardClick as click } from \"./click.ts\";\r\nimport { whichWayUtil } from \"../utill.js\";\r\nimport { whichWaySkin } from \"../skin/index.ts\";\r\nimport { getDesigner, getCamp } from \"./../character/index.js\";\r\nimport { whichWayAudio } from \"../audio/index.ts\";\r\nimport { whichWayToast } from \"../toast/index.ts\";\r\nimport Sortable from \"./../../lib/Sortable/Sortable.js\";\r\nimport { onConfig, onContent, onSetDev } from \"../hooks/index.js\";\r\nimport { whichWayArknight } from \"../arknight/index.ts\";\r\nimport { whichWayAPIOverride } from \"../override/index.js\";\r\nimport { spineWorker } from \"../skin/spineWork.js\";\r\nimport { whichWayCharacterModules } from \"../modules/index.js\";\r\n\r\nclass WhichWayCharacterCard {\r\n\tconstructor() {\r\n\t\t//劫持ui.click.charactercard\r\n\t\tonContent({\r\n\t\t\tname: \"whichWayCharacterCardStyleOverride_add\",\r\n\t\t\tfn() {\r\n\t\t\t\t//避免被千幻劫持，直接覆盖一波\r\n\t\t\t\tObject.defineProperty(ui.click, \"charactercard\", {\r\n\t\t\t\t\tvalue: ui.click.charactercard,\r\n\t\t\t\t\twritable: true,\r\n\t\t\t\t\tconfigurable: true,\r\n\t\t\t\t\tenumerable: true,\r\n\t\t\t\t});\r\n\t\t\t\twhichWayAPIOverride.appendHook(\"ui.click.charactercard\", {\r\n\t\t\t\t\tbefore: async function (name, sourcenode, noedit, resume, avatar, audioName) {\r\n\t\t\t\t\t\tif (whichWayUtil.config(\"enableWhichWayCharacterCardStyle\")) {\r\n\t\t\t\t\t\t\tawait whichWayCharacterCard.create(name, sourcenode, noedit, resume, avatar, audioName);\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\tonConfig({\r\n\t\t\tname: \"whichWayCharacterCardStyleConfig_add\",\r\n\t\t\tpriority: 770,\r\n\t\t\tobj: {\r\n\t\t\t\tname: \"enableWhichWayCharacterCardStyle\",\r\n\t\t\t\toptions: {\r\n\t\t\t\t\tname: \"启用驶舰之向武将卡样式\",\r\n\t\t\t\t\tintro: \"开启后启用驶舰之向武将卡样式\",\r\n\t\t\t\t\tinit: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\r\n\tasync create(name: string, sourcenode: any, noedit: any, resume: any, avatar: any, audioName: any) {\r\n\t\tconst container = this.createBackground();\r\n\t\tcontainer.dataset.charName = name;\r\n\r\n\t\tconst topMenu = await this.createTopMenu(container, name);\r\n\r\n\t\tconst audioSkinName = await this.createAudioSkinName(container, name);\r\n\r\n\t\tconst charName = await this.createCharName(container, name);\r\n\r\n\t\tconst charImage = await this.createCharImageWrapper(container, name);\r\n\r\n\t\tconst charCamp = await this.createCampLogo(container, name);\r\n\r\n\t\tconst displayArena = await this.createDisplayArena(container, name);\r\n\r\n\t\tclick.skill();\r\n\t}\r\n\r\n\t/**\r\n\t * 角色卡牌初始化\r\n\t */\r\n\tasync init() {}\r\n\r\n\t/**\r\n\t * 获取默认皮肤\r\n\t */\r\n\tgetDefaultSkin(sex: \"male\" | \"female\"): string {\r\n\t\treturn `${whichWayFile.extDir}image/character/default_${sex}.png`;\r\n\t}\r\n\r\n\tgetUrl(url: string, folder?: string | \"background\", ext: string = \"png\") {\r\n\t\tif (!url.endsWith(`.${ext}`) && typeof ext === \"string\" && ext.length > 0) url += `.${ext}`;\r\n\t\tif (folder) return whichWayFile.compilePath(`ui:${folder}/${url}`);\r\n\t\treturn whichWayFile.compilePath(`ui:${url}`);\r\n\t}\r\n\r\n\t/**\r\n\t * 创建势力logo\r\n\t * @param { HTMLElement } container\r\n\t * @param { string } name\r\n\t */\r\n\tasync createCampLogo(container: HTMLElement, name: string) {\r\n\t\tconst campWrapper = ui.create.div(\".camplogo-wrapper\", container);\r\n\t\tconst imgDef = ui.create.div(\".img-def\", campWrapper);\r\n\t\tlet camp = getCamp(name);\r\n\t\tif (camp) {\r\n\t\t\tconst isNoname = !whichWayArknight.shcema.group.arknight.includes(camp);\r\n\t\t\tif (!isNoname) imgDef.classList.add(\"arknightCamp\");\r\n\t\t\tlet url = whichWayFile.extDir + \"/image/camplogo/\" + (isNoname ? \"noname\" : \"arknight\") + \"/\" + (isNoname ? \"name_\" : \"\" ) + getCamp(name) + \".png\";\r\n\t\t\timgDef.style.backgroundImage = \"url(\" + url + \")\";\r\n\t\t} else {\r\n\t\t\tif (lib.translate[get.character(name).group]) {\r\n\t\t\t\tconst groupText = ui.create.div(\".group-text\", imgDef);\r\n\t\t\t\tgroupText.innerHTML = lib.translate[get.character(name).group];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn campWrapper;\r\n\t}\r\n\r\n\tcreateBackground() {\r\n\t\tconst bg = ui.create.div(\".container-CC-SJZX\", document.body);\r\n\t\tbg.style.backgroundImage = \"url(\" + this.getUrl(\"default\", \"background\") + \")\";\r\n\r\n\t\treturn bg;\r\n\t}\r\n\r\n\tasync createTopMenu(container: HTMLElement, name: string) {\r\n\t\tconst wrapper = ui.create.div(\".topMenu-wrapper\", container);\r\n\t\tconst btnBack = ui.create.div(\".btn-back\", wrapper);\r\n\t\tbtnBack.addEventListener(\"click\", () => {\r\n\t\t\tdocument.body.removeChild(container);\r\n\t\t\twhichWaySkin.refreshSkin();\r\n\t\t\tgame.resume2();\r\n\t\t});\r\n\t\tconst btnBackImageBox = ui.create.div(\".imageBox\", btnBack);\r\n\t\tconst imageBack = new Image();\r\n\t\timageBack.src = this.getUrl(\"back\");\r\n\t\tbtnBackImageBox.appendChild(imageBack);\r\n\r\n\t\tawait this.createTopMenuButton(\r\n\t\t\twrapper,\r\n\t\t\t\"QUIT\",\r\n\t\t\t\"简介\",\r\n\t\t\t\"resume\",\r\n\t\t\te => {\r\n\t\t\t\tclick.quit();\r\n\t\t\t},\r\n\t\t\t\"quit\"\r\n\t\t);\r\n\r\n\t\tthis.createTopMenuButton(\r\n\t\t\twrapper,\r\n\t\t\t\"SKILL\",\r\n\t\t\t\"技能\",\r\n\t\t\t\"skill\",\r\n\t\t\te => {\r\n\t\t\t\tclick.skill();\r\n\t\t\t},\r\n\t\t\t\"skill\"\r\n\t\t);\r\n\r\n\t\tthis.createTopMenuButton(\r\n\t\t\twrapper,\r\n\t\t\t\"SKIN\",\r\n\t\t\t\"皮肤\",\r\n\t\t\t\"skin\",\r\n\t\t\tasync e => {\r\n\t\t\t\tawait click.skin();\r\n\t\t\t},\r\n\t\t\t\"skin\"\r\n\t\t);\r\n\r\n\t\tif (whichWayCharacterModules.getCharModules(name, false))\r\n\t\t\tthis.createTopMenuButton(\r\n\t\t\t\twrapper,\r\n\t\t\t\t\"MODE\",\r\n\t\t\t\t\"模组\",\r\n\t\t\t\t\"mode\",\r\n\t\t\t\tasync e => {\r\n\t\t\t\t\tawait click.mode();\r\n\t\t\t\t},\r\n\t\t\t\t\"mode\"\r\n\t\t\t);\r\n\r\n\t\treturn wrapper;\r\n\t}\r\n\r\n\tasync createTopMenuButton(container: HTMLElement, en: string, cn: string, image: string, onclick: (e: Event) => void, btnName?: string) {\r\n\t\tconst skinWrapper = ui.create.div(\".btn-background\", container);\r\n\t\tconst outfitEnSJZX = ui.create.div(\".btn-enSJZX\", skinWrapper);\r\n\t\toutfitEnSJZX.innerHTML = en;\r\n\t\tconst outfitCnSJZX = ui.create.div(\".btn-cnSJZX\", skinWrapper);\r\n\t\toutfitCnSJZX.innerHTML = cn;\r\n\t\tconst btnImageWrapper = ui.create.div(\".btnImage-wrapper\", skinWrapper);\r\n\t\tconst btnImage = new Image();\r\n\t\tbtnImage.classList.add(\".btn-image\");\r\n\t\tbtnImage.src = this.getUrl(image);\r\n\t\tbtnImageWrapper.appendChild(btnImage);\r\n\t\tif (typeof onclick === \"function\") skinWrapper.addEventListener(\"click\", onclick);\r\n\t\tif (btnName) skinWrapper.dataset.btnName = btnName;\r\n\r\n\t\treturn skinWrapper;\r\n\t}\r\n\r\n\tasync createAudioSkinName(container, name) {\r\n\t\tconst wrapper = ui.create.div(\".skinnameAudio-wrapper\", container);\r\n\r\n\t\tconst skinnameWrapper = ui.create.div(\".skinnameWrapper\", wrapper);\r\n\t\tconst titleWrapper = ui.create.div(\".titleWrapper\", skinnameWrapper);\r\n\t\tconst titleImageWrapper = ui.create.div(\".imageWrapper\", titleWrapper);\r\n\t\tconst titleImage = new Image();\r\n\t\ttitleImage.src = this.getUrl(\"painter\");\r\n\t\ttitleImageWrapper.appendChild(titleImage);\r\n\t\tconst titleTextWrapper = ui.create.div(\".textWrapper\", titleWrapper);\r\n\t\ttitleTextWrapper.innerHTML = whichWaySkin.getCurentSkin(name);\r\n\r\n\t\tconst designerWrapper = ui.create.div(\".designerWrapper\", wrapper);\r\n\t\tconst designerTitleWrapper = ui.create.div(\".titleWrapper\", designerWrapper);\r\n\t\tconst designerTitleImageWrapper = ui.create.div(\".imageWrapper\", designerTitleWrapper);\r\n\t\tconst designerTitleImage = new Image();\r\n\t\tdesignerTitleImage.classList.add(\"imageLimit\");\r\n\t\tdesignerTitleImage.src = this.getUrl(\"designer\");\r\n\t\tdesignerTitleImageWrapper.appendChild(designerTitleImage);\r\n\t\tconst designerTextWrapper = ui.create.div(\".textWrapper\", designerTitleWrapper);\r\n\t\tdesignerTextWrapper.innerHTML = getDesigner(name).join(\"、\");\r\n\r\n\t\tconst audioWrapper = ui.create.div(\".audioWrapper\", wrapper);\r\n\t\tconst audioTitleWrapper = ui.create.div(\".audioTitleWrapper\", audioWrapper);\r\n\t\tconst audioImageWrapper = ui.create.div(\".imageWrapper\", audioTitleWrapper);\r\n\t\tconst audioImage = new Image();\r\n\t\taudioImage.src = this.getUrl(\"cv\");\r\n\t\taudioImageWrapper.appendChild(audioImage);\r\n\t\tconst audioTextWrapper = ui.create.div(\".textWrapper\", audioTitleWrapper);\r\n\t\taudioTextWrapper.innerHTML = whichWayAudio.getCharacterLang(name, true);\r\n\t\tconst audioCollapseWrapper = ui.create.div(\".collapseWrapper\", audioTitleWrapper);\r\n\t\taudioCollapseWrapper.dataset.collapse = \"false\";\r\n\t\tconst audioCollapseImage = new Image();\r\n\t\taudioCollapseImage.src = this.getUrl(\"plus\");\r\n\t\taudioCollapseImage.style.height = \"50%\";\r\n\t\taudioCollapseWrapper.appendChild(audioCollapseImage);\r\n\t\t// @ts-ignore\r\n\t\taudioCollapseWrapper.addEventListener(\"click\", async e => {\r\n\t\t\t//不是本扩展的武将无法更改配音\r\n\t\t\tif (!window.whichWaySave.allCharacters.includes(name)) {\r\n\t\t\t\twhichWayToast.showToast(\"[驶舰之向] 请勿修改非驶舰之向的武将配音！\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (audioCollapseWrapper.dataset.collapse === \"false\") {\r\n\t\t\t\taudioCollapseWrapper.dataset.collapse = \"true\";\r\n\t\t\t\taudioCollapseImage.dataset.originalHeight = audioWrapper.style.height;\r\n\t\t\t\taudioWrapper.style.height = `${(1 + whichWayAudio.getCharacterAvailableLang(name).length) * 50}px`;\r\n\t\t\t\taudioCollapseImage.src = this.getUrl(\"sub\");\r\n\t\t\t} else {\r\n\t\t\t\taudioCollapseWrapper.dataset.collapse = \"false\";\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\taudioWrapper.style.height = audioCollapseImage.dataset.originalHeight;\r\n\t\t\t\taudioCollapseImage.src = this.getUrl(\"plus\");\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst audioContent = ui.create.div(\".content\", audioWrapper);\r\n\t\tlet charSetAudio = whichWayAudio.getCharacterLang(name);\r\n\t\tfor (let language of whichWayAudio.getCharacterAvailableLang(name)) {\r\n\t\t\tconst selectWrapper = ui.create.div(\".selectWrapper\", audioContent);\r\n\t\t\tselectWrapper.dataset.choiceSJZX = language;\r\n\t\t\tif (language === charSetAudio) {\r\n\t\t\t\tconst choice = ui.create.div(\".choice\", selectWrapper);\r\n\t\t\t\tconst choiceContentTextWrapper = ui.create.div(\".choice-contentTextWrapper\", selectWrapper);\r\n\t\t\t\tconst selectText = ui.create.div(\".selectTextSJZX\", choiceContentTextWrapper);\r\n\t\t\t\tselectText.innerHTML = whichWayArknight.getVoiceLangTranslation(language)!;\r\n\t\t\t} else {\r\n\t\t\t\tconst nochoice = ui.create.div(\".nochoice\", selectWrapper);\r\n\t\t\t\tconst nochoiceContentTextWrapper = ui.create.div(\".nochoice-contentTextWrapper\", selectWrapper);\r\n\t\t\t\tconst selectText = ui.create.div(\".selectTextSJZX\", nochoiceContentTextWrapper);\r\n\t\t\t\tselectText.innerHTML = whichWayArknight.getVoiceLangTranslation(language)!;\r\n\t\t\t}\r\n\r\n\t\t\tselectWrapper.addEventListener(\"click\", async event => {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tlet target: HTMLElement = event.currentTarget;\r\n\t\t\t\tlet curLaunguage = target.dataset.choiceSJZX;\r\n\t\t\t\tif (target.dataset.choiceSJZX !== whichWayAudio.getCharacterLang(name)) {\r\n\t\t\t\t\tconst choice = document.querySelector(\".selectWrapper .choice\")!;\r\n\t\t\t\t\tconst choiceContent = document.querySelector(\".selectWrapper .choice-contentTextWrapper\")!;\r\n\t\t\t\t\twhichWayUtil.toggleClass([choice, target.querySelector(\".selectWrapper .nochoice\")!], \"choice\", \"nochoice\");\r\n\t\t\t\t\twhichWayUtil.toggleClass([choiceContent, target.querySelector(\".selectWrapper .nochoice-contentTextWrapper\")!], \"choice-contentTextWrapper\", \"nochoice-contentTextWrapper\");\r\n\t\t\t\t\tawait whichWayAudio.setCustomAudio(name, curLaunguage!).then(async () => {\r\n\t\t\t\t\t\taudioTextWrapper.innerHTML = whichWayAudio.getCharacterLang(name, true);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn wrapper;\r\n\t}\r\n\r\n\tasync createCharName(container, name) {\r\n\t\tconst wrapper = ui.create.div(\".charName-wrapper\", container);\r\n\t\tconst charNameTitleWrapper = ui.create.div(\".charNameTitleWrapper\", wrapper);\r\n\t\tconst charNameTitle = ui.create.div(\".charNameTitle\", charNameTitleWrapper);\r\n\t\tcharNameTitle.innerHTML = lib.characterTitle[name] ? lib.characterTitle[name] : \"\";\r\n\r\n\t\tconst charNameTextWrapper = ui.create.div(\".charNameTextWrapper\", wrapper);\r\n\t\tconst charNameText = ui.create.div(\".charNameText\", charNameTextWrapper);\r\n\t\tcharNameText.innerHTML = get.translation(name);\r\n\r\n\t\tconst hpWrapper = ui.create.div(\".hpWrapper\", wrapper);\r\n\t\tlet charInfo = get.character(name);\r\n\t\tlet { maxHp, hp, hujia } = charInfo;\r\n\r\n\t\tif (maxHp + hujia > 6) {\r\n\t\t\tconst hpNumWrapper = ui.create.div(\".hpNumWrapper\", hpWrapper);\r\n\t\t\tconst actualHpSJZX = ui.create.div(\".actualHpSJZX\", hpNumWrapper);\r\n\t\t\tconst hpNumText = ui.create.div(\".hpNumText\", hpNumWrapper);\r\n\t\t\thpNumText.innerHTML = `${hp}/${maxHp}`;\r\n\r\n\t\t\tif (hujia > 0) {\r\n\t\t\t\tconst hpNumWrapper2 = ui.create.div(\".hpNumWrapper\", hpWrapper);\r\n\t\t\t\tconst shield = ui.create.div(\".shieldSJZX\", hpNumWrapper2);\r\n\t\t\t\tconst hpNumText2 = ui.create.div(\".hpNumText\", hpNumWrapper2);\r\n\t\t\t\thpNumText2.innerHTML = `${hujia}`;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor (let i = 0; i < maxHp; i++) {\r\n\t\t\t\tlet num = i + 1;\r\n\t\t\t\tif (num <= hp) {\r\n\t\t\t\t\tui.create.div(\".actualHpSJZX\", hpWrapper);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tui.create.div(\".emptyHpSJZX\", hpWrapper);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (let i = 0; i < hujia; i++) {\r\n\t\t\t\tui.create.div(\".shieldSJZX\", hpWrapper);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn wrapper;\r\n\t}\r\n\r\n\tasync createCharImageWrapper(container, name) {\r\n\t\tconst charImageWrapper = ui.create.div(\".charImageWrapper\", container);\r\n\t\tlet url = whichWaySkin.getCurrentSkinPath(name);\r\n\t\tconst charImage = ui.create.div(\".charImage\", charImageWrapper);\r\n\t\tcharImage.style.backgroundImage = url.startsWith(\"url\") ? url : \"url(\" + url + \")\";\r\n\r\n\t\tawait spineWorker.updateDyc(name, charImage);\r\n\r\n\t\t//添加关闭动皮的按钮\r\n\t\tawait this.createToggleSkin(name);\r\n\r\n\t\treturn charImageWrapper;\r\n\t}\r\n\r\n\t/**\r\n\t * 创建关闭动皮的按钮\r\n\t * @param {String} name\r\n\t * @param {HTMLElement} [container]\r\n\t * @returns {Promise<HTMLElement>}\r\n\t */\r\n\tasync createToggleSkin(name, container = document.querySelector(\".charImageWrapper\")!) {\r\n\t\tconst skin = whichWaySkin.getCurentSkin(name);\r\n\t\tconst bottomUI = container.querySelector(\".charSkinBottomUIWrapper\");\r\n\r\n\t\t//TODO: 动皮\r\n\t\tif (!spineWorker.getSkinData(name, skin)) {\r\n\t\t\tif (bottomUI) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tbottomUI.style.display = \"none\";\r\n\t\t\t\tupdateButton();\r\n\t\t\t}\r\n\t\t\treturn bottomUI;\r\n\t\t}\r\n\r\n\t\tif (bottomUI) {\r\n\t\t\t//@ts-ignore\r\n\t\t\tbottomUI.style.display = \"\";\r\n\t\t\tupdateButton();\r\n\t\t\treturn bottomUI;\r\n\t\t}\r\n\r\n\t\tconst charSkinBottomUIWrapper = ui.create.div(\".charSkinBottomUIWrapper\", container);\r\n\t\tconst buttonWrapper = ui.create.div(\".buttonWrapper\", charSkinBottomUIWrapper);\r\n\t\tconst buttonText = ui.create.div(\".buttonText\", buttonWrapper);\r\n\r\n\t\tbuttonWrapper.addEventListener(\"click\", async e => {\r\n\t\t\tawait click.toggleSkin(e);\r\n\t\t});\r\n\r\n\t\tupdateButton();\r\n\r\n\t\treturn charSkinBottomUIWrapper;\r\n\r\n\t\tfunction updateButton() {\r\n\t\t\tlet wrapper = document.querySelector(\".charSkinBottomUIWrapper .buttonWrapper\");\r\n\t\t\tlet text = document.querySelector(\".charSkinBottomUIWrapper .buttonText\");\r\n\t\t\tif (!wrapper || !text) return;\r\n\t\t\tif (spineWorker.isEnabledSkin(name, skin)) wrapper.classList.add(\"buttonWrapper-enableSkinBG\");\r\n\t\t\telse wrapper.classList.remove(\"buttonWrapper-enableSkinBG\");\r\n\t\t\ttext.innerHTML = spineWorker.isEnabledSkin(name, skin) ? \"关闭动皮\" : \"开启动皮\";\r\n\t\t}\r\n\t}\r\n\r\n\tasync createDisplayArena(container, name) {\r\n\t\tconst displayArenaSJZX = ui.create.div(\".displayArenaSJZX\", container);\r\n\t\tnew Sortable(displayArenaSJZX, {\r\n\t\t\tdraggable: \".skillWrapper\",\r\n\t\t\tanimation: 150,\r\n\t\t\thandle: \".dragHandle\",\r\n\t\t});\r\n\t\treturn displayArenaSJZX;\r\n\t}\r\n\r\n\tasync updateSkinImage(name, path, playerName) {\r\n\t\tconst charImage = document.querySelector(\".charImageWrapper .charImage\");\r\n\t\tconst skinName = document.querySelector(\".skinnameWrapper .titleWrapper .textWrapper\");\r\n\t\tif (charImage) {\r\n\t\t\t// @ts-ignore\r\n\t\t\tcharImage.style.backgroundImage = \"url(\" + path + \")\";\r\n\t\t\tawait spineWorker.updateDyc(playerName, charImage);\r\n\t\t}\r\n\t\tif (skinName) skinName.innerHTML = name;\r\n\r\n\t\tawait this.createToggleSkin(playerName);\r\n\t}\r\n}\r\n\r\nexport const whichWayCharacterCard = new WhichWayCharacterCard();\r\n\r\nonSetDev({\r\n\tname: \"whichwayCharacterCard_dev\",\r\n\tfn: () => {\r\n\t\t//@ts-ignore\r\n\t\twindow.whichWayCharacterCard = whichWayCharacterCard;\r\n\t},\r\n});\r\n\r\nwindow.whichWay.register(\"characterCard\", whichWayCharacterCard);\r\n"],"names":["click"],"mappings":"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"}