{"version":3,"file":"index.js","sources":["../../../../../../packages/extension/WhichWay/src/config/index.js"],"sourcesContent":["import { lib, game, ui, get, ai, _status } from \"noname\";\r\nimport { onConfig, onSetDev } from \"../hooks/index.js\";\r\nimport { whichWayToast } from \"../toast/index.ts\";\r\nimport { whichWayConfigData } from \"./data.js\";\r\nimport extIntrol from \"./extIntro.vue\";\r\nimport { createApp } from \"vue\";\r\n\r\n/**\r\n * @type {Record<string, whichWayConfig>}\r\n */\r\nconst whichWayOriginConfig = {\r\n\t//分界线\r\n\tintrotip: {\r\n\t\tname: '<a style=\"cursor: pointer;font-weight: bold;\"><font color=#ffa10a><—欢迎游玩驶舰之向扩展—></font></a>',\r\n\t\tclear: true,\r\n        whichWayConfig:{\r\n            priority: 1000,\r\n        },\r\n\t},\r\n\r\n\t//扩展介绍\r\n\tintromrfz: {\r\n\t\tname: '<div class=\"whichWayExtIntro\">▶扩展信息（点击后展开）</div>',\r\n\t\tclear: true,\r\n\t\tonclick: function () {\r\n\t\t\t// @ts-ignore\r\n\t\t\tif (this.whichWayExtIntro_more === undefined) {\r\n\t\t\t\tvar more = ui.create.div(\".whichWayExtIntro\");\r\n\t\t\t\tcreateApp(extIntrol).mount(more);\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tthis.parentNode.insertBefore(more, this.nextSibling);\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tthis.whichWayExtIntro_more = more;\r\n\t\t\t\tthis.innerHTML = '<div class=\"hth_menu\">▼扩展信息（点击后折叠）</div>';\r\n\t\t\t} else {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tthis.parentNode.removeChild(this.whichWayExtIntro_more);\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tdelete this.whichWayExtIntro_more;\r\n\t\t\t\tthis.innerHTML = '<div class=\"hth_menu\">▶扩展信息（点击后展开）</div>';\r\n\t\t\t}\r\n\t\t},\r\n\t\twhichWayConfig:{\r\n            priority: 999,\r\n        },\r\n\t},\r\n\r\n\tsettip_utill: {\r\n\t\tname: \"<font color=#ed7e78><————功能————></font></a>\",\r\n\t\tclear: true,\r\n        whichWayConfig:{\r\n            priority: 900,\r\n        },\r\n\t},\r\n\r\n\tgetMoreSkin: {\r\n\t\tname:\"<button type=`button`>获取更多皮肤</button>\",\r\n\t\tclear:true,\r\n\t\tonclick(){\r\n\t\t\talert(\"[驶舰之向]本皮肤包是由群友 @零羽白瑠 提供!\\n需要您自行移动到扩展目录下的皮肤文件夹下下\\n扩展皮肤文件夹路径: extension/WhichWay/skin\");\r\n\t\t\twindow.open(\"https://pan.baidu.com/s/1PJx78ZTdUVEZm3sgW0y11w?pwd=4e04\");\r\n\t\t\twhichWayToast.showToast(\"[驶舰之向] 已打开链接，请自行下载皮肤包<br>如果没有弹出页面,请注意是否被拦截了!\", 5000, \"topLeft\", \"configTips_getMoreSkin\");\r\n\t\t},\r\n\t\twhichWayConfig:{\r\n            priority: 888,\r\n        },\r\n\t},\r\n\r\n\tsettip: {\r\n\t\tname: \"<font color=#ed7e78><————设置————></font></a>\",\r\n\t\tclear: true,\r\n        whichWayConfig:{\r\n            priority: 800,\r\n        },\r\n\t},\r\n\r\n\tdevMode:{\r\n\t\tname:\"开发者模式\",\r\n\t\tintro:\"开启后会将所有组件暴露在全局,方便调试,在开发服务器无论是否开启都会强制进入开发者模式\",\r\n\t\tinit:false,\r\n        whichWayConfig:{\r\n            priority: 799,\r\n        },\r\n\t},\r\n\r\n\tdesignerThanksTitle:{\r\n\t\tname: \"<font color=#ed7e78><———干员设计———></font></a>\",\r\n\t\tclear: true,\r\n\t\twhichWayConfig:{\r\n            priority: 400,\r\n        },\r\n\t},\r\n\r\n\tdesignerThanks:{\r\n\t\tname: `<font color = \"blue\">以下排名不分先后</font>${whichWayConfigData.thanks.designer.map(name => `<br>${name}`).join(\"\")}`,\r\n\t\tclear:true,\r\n\t\twhichWayConfig:{\r\n            priority: 399,\r\n        },\r\n\t},\r\n\r\n\tSpecialAcknowledgmentTip: {\r\n\t\tname: \"<font color=#ed7e78><————致谢————></font></a>\",\r\n\t\tclear: true,\r\n\t\twhichWayConfig:{\r\n            priority: 300,\r\n        },\r\n\t},\r\n\tSpecialAcknowledgment:{\r\n\t\tname:`<font color = \"blue\">以下排名不分先后</font>${whichWayConfigData.thanks.special.map(name => `<br>${name}`).join(\"\")}`,\r\n\t\tclear:true,\r\n\t\twhichWayConfig:{\r\n\t\t\tpriority: 299,\r\n        },\r\n\t},\r\n};\r\n\r\nclass WhichWayConfig {\r\n\tconstructor() {\r\n\t\tthis.initConfig(whichWayOriginConfig);\r\n\r\n\t\tfor (let configName in this.initializedConfig) {\r\n\t\t\tonConfig(this.initializedConfig[configName]);\r\n\t\t}\r\n\t}\r\n\r\n\t/**已初始化完毕的配置选项 */\r\n\tinitializedConfig = {};\r\n\r\n\t/** 已注册的配置选项 */\r\n\tget config(){\r\n\t\treturn window.whichWay.hooks._hooks.config;\r\n\t}\r\n\r\n\tdata = whichWayConfigData;\r\n\r\n\t/**\r\n\t * 初始化配置\r\n\t * @param {Object} configs 配置选项\r\n\t */\r\n\tinitConfig(configs) {\r\n\t\tfor (let configName in configs) {\r\n\t\t\tif (configName in this.initializedConfig) {\r\n\t\t\t\tconsole.warn(`[WhichWayConfig] 配置项 ${configName} 已存在`);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tlet config = {\r\n\t\t\t\tname: configName,\r\n\t\t\t\tpriority: 0,\r\n\t\t\t};\r\n\t\t\tlet info = configs[configName];\r\n\t\t\tif (info.whichWayConfig) {\r\n\t\t\t\tlet setting = info.whichWayConfig;\r\n\t\t\t\tif (typeof setting.priority === \"number\") config.priority = setting.priority;\r\n\r\n\t\t\t\tif (typeof setting.fn === \"function\") config.fn = setting.fn;\r\n\t\t\t\telse if (typeof setting.obj === \"object\") config.obj = setting.obj;\r\n\t\t\t}\r\n\t\t\tif (!config.fn && !config.obj){\r\n                config.obj ??= {\r\n                    name: configName,\r\n                    options: info,\r\n                }\r\n            }\r\n\t\t\tthis.initializedConfig[configName] = config;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 获取驶舰之向背景数据\r\n\t * @param {Object} [data] - 背景数据对象\r\n\t * @param {boolean} [enumerable=false] - 是否包含可枚举的属性\r\n\t * @param {boolean} [all=false] - 是否返回所有数据\r\n\t * @returns {Object} - 返回包含背景名称、翻译和内容的对象\r\n\t */\r\n\tgetBackgroundData(data, enumerable = false, all) {\r\n\t\tif (!get.is.object(data)) data = this.data.background;\r\n\t\tlet result = {\r\n\t\t\tname: [],\r\n\t\t\ttranslate: [],\r\n\t\t\tobj: {},\r\n\t\t};\r\n\r\n\t\tObject.keys(data).forEach(key => {\r\n\t\t\tconst value = data[key];\r\n\t\t\tif (value && typeof value === \"object\" && \"enumerable\" in value) {\r\n\t\t\t\tif (value.enumerable || enumerable) {\r\n\t\t\t\t\t/**@ts-ignore */\r\n\t\t\t\t\tresult[\"name\"].push(key);\r\n\t\t\t\t\t/**@ts-ignore */\r\n\t\t\t\t\tresult[\"translate\"].push(value);\r\n\t\t\t\t\tresult.obj[key] = value.content;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t/**@ts-ignore */\r\n\t\t\t\tresult[\"name\"].push(key);\r\n\t\t\t\t/**@ts-ignore */\r\n\t\t\t\tresult[\"translate\"].push(value);\r\n\t\t\t\tresult.obj[key] = value;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn all === true ? result : result.obj;\r\n\t}\r\n}\r\n\r\nexport const whichWayConfig = new WhichWayConfig();\r\n\r\nonSetDev({\r\n\tname: \"whichWayConfig_dev\",\r\n\tfn: function () {\r\n\t\t//@ts-ignore\r\n\t\twindow.whichWayConfig = whichWayConfig;\r\n\t},\r\n});\r\n\r\nwindow.whichWay.register(\"config\", whichWayConfig);\r\n\r\nexport {};\r\n"],"names":["extIntrol"],"mappings":"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"}