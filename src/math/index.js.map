{"version":3,"file":"index.js","sources":["../../../../../../packages/extension/WhichWay/src/math/index.ts"],"sourcesContent":["import { onSetDev } from \"../hooks/index.js\";\r\n\r\nclass MathUtils {\r\n\t/**\r\n\t * 计算数值数组的算术平均数\r\n\t * @param values - 数值数组，不能为空且所有元素必须为有限数字\r\n\t * @returns 平均数\r\n\t * @throws {Error} 当输入为空数组或包含非数字/非有限值时抛出错误\r\n\t */\r\n\tmean(values: number[]): number {\r\n\t\tif (values.length === 0) {\r\n\t\t\tthrow new Error(\"Cannot compute mean of an empty array\");\r\n\t\t}\r\n\r\n\t\tfor (const val of values) {\r\n\t\t\tif (typeof val !== \"number\" || !isFinite(val)) {\r\n\t\t\t\tthrow new Error(`Invalid number in array: ${val}`);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst sum = values.reduce((acc, val) => acc + val, 0);\r\n\t\treturn sum / values.length;\r\n\t}\r\n\r\n\t/**\r\n\t * 计算数值数组的标准差（样本标准差，分母为 n-1）\r\n\t * @param values - 数值数组，长度必须 ≥ 2\r\n\t * @param isPopulation - 是否计算总体标准差（默认 false，即样本标准差）\r\n\t * @returns 标准差\r\n\t * @throws {Error} 当数组长度不足或包含无效数值时抛出错误\r\n\t */\r\n\tstd(values: number[], isPopulation: boolean = false): number {\r\n\t\tif (values.length === 0) {\r\n\t\t\tthrow new Error(\"Cannot compute standard deviation of an empty array\");\r\n\t\t}\r\n\r\n\t\tif (!isPopulation && values.length < 2) {\r\n\t\t\tthrow new Error(\"Sample standard deviation requires at least 2 values\");\r\n\t\t}\r\n\r\n\t\tfor (const val of values) {\r\n\t\t\tif (typeof val !== \"number\" || !isFinite(val)) {\r\n\t\t\t\tthrow new Error(`Invalid number in array: ${val}`);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst mean = this.mean(values);\r\n\t\tconst squaredDiffs = values.map(x => (x - mean) ** 2);\r\n\t\tconst variance = squaredDiffs.reduce((acc, val) => acc + val, 0) / (isPopulation ? values.length : values.length - 1);\r\n\r\n\t\treturn Math.sqrt(variance);\r\n\t}\r\n}\r\n\r\nexport const whichWayMath = new MathUtils();\r\n\r\nonSetDev({\r\n    name:\"whichWayMath_dev\",\r\n    //@ts-ignore\r\n    fn:()=>window.whichWayMath = whichWayMath\r\n})\r\n\r\nwindow.whichWay.register(\"math\", whichWayMath);"],"names":[],"mappings":";AAEA,MAAM,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOf,KAAK,QAA0B;AAC9B,QAAI,OAAO,WAAW,GAAG;AACxB,YAAM,IAAI,MAAM,uCAAuC;AAAA,IACxD;AAEA,eAAW,OAAO,QAAQ;AACzB,UAAI,OAAO,QAAQ,YAAY,CAAC,SAAS,GAAG,GAAG;AAC9C,cAAM,IAAI,MAAM,4BAA4B,GAAG,EAAE;AAAA,MAClD;AAAA,IACD;AAEA,UAAM,MAAM,OAAO,OAAO,CAAC,KAAK,QAAQ,MAAM,KAAK,CAAC;AACpD,WAAO,MAAM,OAAO;AAAA,EACrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASA,IAAI,QAAkB,eAAwB,OAAe;AAC5D,QAAI,OAAO,WAAW,GAAG;AACxB,YAAM,IAAI,MAAM,qDAAqD;AAAA,IACtE;AAEA,QAAI,CAAC,gBAAgB,OAAO,SAAS,GAAG;AACvC,YAAM,IAAI,MAAM,sDAAsD;AAAA,IACvE;AAEA,eAAW,OAAO,QAAQ;AACzB,UAAI,OAAO,QAAQ,YAAY,CAAC,SAAS,GAAG,GAAG;AAC9C,cAAM,IAAI,MAAM,4BAA4B,GAAG,EAAE;AAAA,MAClD;AAAA,IACD;AAEA,UAAM,OAAO,KAAK,KAAK,MAAM;AAC7B,UAAM,eAAe,OAAO,IAAI,CAAA,OAAM,IAAI,SAAS,CAAC;AACpD,UAAM,WAAW,aAAa,OAAO,CAAC,KAAK,QAAQ,MAAM,KAAK,CAAC,KAAK,eAAe,OAAO,SAAS,OAAO,SAAS;AAEnH,WAAO,KAAK,KAAK,QAAQ;AAAA,EAC1B;AACD;AAEO,MAAM,eAAe,IAAI,UAAA;AAEhC,SAAS;AAAA,EACL,MAAK;AAAA;AAAA,EAEL,IAAG,MAAI,OAAO,eAAe;AACjC,CAAC;AAED,OAAO,SAAS,SAAS,QAAQ,YAAY;"}