{"version":3,"file":"updateCurrent.vue.js","sources":["../../../../../../../packages/extension/WhichWay/src/configUI/component/updateCurrent.vue"],"sourcesContent":["<template>\r\n\t<div class=\"updateCurrent\">\r\n\t\t<!-- 版本标题 -->\r\n\t\t<div class=\"UpdateCurrentTitle\">驶舰之向 v{{ version }}更新内容</div>\r\n\r\n\t\t<div class = \"UpdateCurrentOverVersion\">最低适配版本: {{ over }}</div>\r\n\r\n\t\t<!-- 更新介绍 -->\r\n\t\t<div class=\"UpdateCurrentContent\">\r\n\t\t\t<p v-for=\"(str, index) in updateData.intro\" :key=\"`intro-${index}`\" v-html=\"str\"></p>\r\n\t\t</div>\r\n\r\n\t\t<!-- 新增角色展示 -->\r\n\t\t<div v-if=\"updateData.player && updateData.player.length > 0\" class=\"UpdateCurrentOther\">\r\n\t\t\t<div class=\"section-title\">新增干员</div>\r\n\t\t\t<div ref=\"playerContainerRef\" class=\"character-container\"></div>\r\n\t\t</div>\r\n\r\n\t\t<!-- 新增卡片展示 -->\r\n\t\t<div v-if=\"updateData.cards && updateData.cards.length > 0\" class=\"UpdateCurrentOther\">\r\n\t\t\t<div class=\"section-title\">新增卡牌</div>\r\n\t\t\t<div ref=\"cardContainerRef\" class=\"card-container\"></div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, onUnmounted } from \"vue\";\r\nimport { lib, ui } from \"noname\";\r\nimport { whichWayVersion } from \"../../version.js\";\r\nimport { whichWayUpdateLog } from \"../../updateLog/index.js\";\r\nimport { whichWayCharacterCard } from \"../../characterCard/index.ts\";\r\n\r\nconst version = ref(whichWayVersion.ext);\r\nconst over = ref(whichWayVersion.noname.over);\r\n\r\nconst updateData = whichWayUpdateLog.currentLog;\r\n\r\nconst playerContainerRef = ref(null);\r\nconst cardContainerRef = ref(null);\r\n\r\nconst createdElements = ref([]);\r\n\r\nconst createCharacterButtons = () => {\r\n\tif (!playerContainerRef.value || !ui?.create?.buttonPresets?.character) return;\r\n\r\n\t//@ts-ignore\r\n\tplayerContainerRef.value.innerHTML = \"\";\r\n\r\n\t// 创建角色按钮\r\n\tupdateData.player.forEach(name => {\r\n\t\ttry {\r\n\t\t\tconst character = ui.create.buttonPresets.character(name, \"player\");\r\n\r\n\t\t\t// 添加双击事件\r\n\t\t\tcharacter.addEventListener(\"dblclick\", e => {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\twhichWayCharacterCard.create(name);\r\n\t\t\t});\r\n\r\n\t\t\t//@ts-ignore\r\n\t\t\tplayerContainerRef.value.appendChild(character);\r\n\t\t\t//@ts-ignore\r\n\t\t\tcreatedElements.value.push(character);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(`创建角色 ${name} 失败:`, error);\r\n\t\t}\r\n\t});\r\n};\r\n\r\n// 创建卡片按钮\r\nconst createCardButtons = () => {\r\n\tif (!cardContainerRef.value || !ui?.create?.buttonPresets?.vcard) return;\r\n\r\n\t//@ts-ignore\r\n\tcardContainerRef.value.innerHTML = \"\";\r\n\r\n\t// 创建卡片按钮\r\n\tupdateData.cards.forEach(name => {\r\n\t\ttry {\r\n\t\t\tconst card = ui.create.buttonPresets.vcard(name, \"card\");\r\n\r\n\t\t\t//@ts-ignore\r\n\t\t\tcardContainerRef.value.appendChild(card);\r\n\t\t\t//@ts-ignore\r\n\t\t\tcreatedElements.value.push(card);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(`创建卡片 ${name} 失败:`, error);\r\n\t\t}\r\n\t});\r\n};\r\n\r\n// 清理创建的元素\r\nconst cleanupElements = () => {\r\n\tcreatedElements.value.forEach(el => {\r\n\t\t//@ts-ignore\r\n\t\tif (el.parentNode) {\r\n\t\t\t//@ts-ignore\r\n\t\t\tel.parentNode.removeChild(el);\r\n\t\t}\r\n\t});\r\n\tcreatedElements.value = [];\r\n};\r\n\r\n// 组件挂载\r\nonMounted(() => {\r\n\t// 创建角色和卡片\r\n\tcreateCharacterButtons();\r\n\tcreateCardButtons();\r\n});\r\n\r\n// 组件卸载时清理\r\nonUnmounted(() => {\r\n\tcleanupElements();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.updateCurrent {\r\n\tpadding: 20px;\r\n\tcolor: #fff;\r\n\twidth: calc(100% - 40px);\r\n\theight: calc(100% - 40px);\r\n\toverflow: auto;\r\n}\r\n\r\n.UpdateCurrentTitle {\r\n\twidth: 100%;\r\n\tposition: relative;\r\n\tfont-size: 24px;\r\n\tfont-weight: bold;\r\n\tcolor: #a3bbc3;\r\n\tmargin-bottom: 20px;\r\n\ttext-align: center;\r\n\ttext-shadow: 0 0 10px rgba(74, 144, 226, 0.5);\r\n}\r\n\r\n.UpdateCurrentOverVersion {\r\n\twidth: calc(100% - 30px);\r\n\tposition: relative;\r\n\tmargin-bottom: 30px;\r\n\tpadding: 15px;\r\n\tbackground: rgba(0, 0, 0, 0.3);\r\n\tborder-radius: 8px;\r\n\tborder-left: 4px solid #f14a13;\r\n}\r\n\r\n.UpdateCurrentContent {\r\n\twidth: calc(100% - 30px);\r\n\tposition: relative;\r\n\tmargin-bottom: 30px;\r\n\tpadding: 15px;\r\n\tbackground: rgba(0, 0, 0, 0.3);\r\n\tborder-radius: 8px;\r\n\tborder-left: 4px solid #4a90e2;\r\n}\r\n\r\n.UpdateCurrentContent p {\r\n\tmargin: 10px 0;\r\n\tline-height: 1.8;\r\n\tfont-size: 14px;\r\n}\r\n\r\n.UpdateCurrentOther {\r\n\twidth: 100%;\r\n\tposition: relative;\r\n\tmargin-bottom: 30px;\r\n}\r\n\r\n.section-title {\r\n\tposition: relative;\r\n\tfont-size: 18px;\r\n\tfont-weight: bold;\r\n\tcolor: #ffd700;\r\n\tmargin-bottom: 15px;\r\n\tpadding-left: 10px;\r\n\tborder-left: 3px solid #ffd700;\r\n}\r\n\r\n.character-container,\r\n.card-container {\r\n\tposition: relative;\r\n\tdisplay: flex;\r\n\tflex-wrap: wrap;\r\n\tgap: 15px;\r\n\tjustify-content: flex-start;\r\n\tpadding: 10px;\r\n\tmin-height: 100px;\r\n}\r\n\r\n/* 角色和卡片的通用样式 */\r\n:deep(.character),\r\n:deep(.vcard) {\r\n\ttransition: all 0.3s ease;\r\n\tcursor: pointer;\r\n\tposition: relative;\r\n}\r\n\r\n:deep(.character):hover,\r\n:deep(.vcard):hover {\r\n\ttransform: scale(1.1);\r\n\tbox-shadow: 0 0 15px rgba(255, 255, 255, 0.5);\r\n\tz-index: 10;\r\n}\r\n\r\n:deep(.character) {\r\n\twidth: 80px;\r\n\theight: 100px;\r\n}\r\n\r\n:deep(.vcard) {\r\n\twidth: 100px;\r\n\theight: 140px;\r\n}\r\n\r\n/* 滚动条样式 */\r\n.updateCurrent::-webkit-scrollbar {\r\n\twidth: 8px;\r\n}\r\n\r\n.updateCurrent::-webkit-scrollbar-track {\r\n\tbackground: rgba(0, 0, 0, 0.2);\r\n\tborder-radius: 4px;\r\n}\r\n\r\n.updateCurrent::-webkit-scrollbar-thumb {\r\n\tbackground: #4a90e2;\r\n\tborder-radius: 4px;\r\n}\r\n\r\n.updateCurrent::-webkit-scrollbar-thumb:hover {\r\n\tbackground: #3a7bc8;\r\n}\r\n</style>\r\n"],"names":["_openBlock","_createElementBlock","_createElementVNode","_toDisplayString","_Fragment","_unref"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAiCA,UAAM,UAAU,IAAI,gBAAgB,GAAG;AACvC,UAAM,OAAO,IAAI,gBAAgB,OAAO,IAAI;AAE5C,UAAM,aAAa,kBAAkB;AAErC,UAAM,qBAAqB,IAAI,IAAI;AACnC,UAAM,mBAAmB,IAAI,IAAI;AAEjC,UAAM,kBAAkB,IAAI,CAAA,CAAE;AAE9B,UAAM,yBAAyB,MAAM;AACpC,UAAI,CAAC,mBAAmB,SAAS,CAAC,IAAI,QAAQ,eAAe,UAAW;AAGxE,yBAAmB,MAAM,YAAY;AAGrC,iBAAW,OAAO,QAAQ,UAAQ;AACjC,YAAI;AACH,gBAAM,YAAY,GAAG,OAAO,cAAc,UAAU,MAAM,QAAQ;AAGlE,oBAAU,iBAAiB,YAAY,OAAK;AAC3C,cAAE,gBAAe;AAEjB,kCAAsB,OAAO,IAAI;AAAA,UAClC,CAAC;AAGD,6BAAmB,MAAM,YAAY,SAAS;AAE9C,0BAAgB,MAAM,KAAK,SAAS;AAAA,QACrC,SAAS,OAAO;AACf,kBAAQ,MAAM,QAAQ,IAAI,QAAQ,KAAK;AAAA,QACxC;AAAA,MACD,CAAC;AAAA,IACF;AAGA,UAAM,oBAAoB,MAAM;AAC/B,UAAI,CAAC,iBAAiB,SAAS,CAAC,IAAI,QAAQ,eAAe,MAAO;AAGlE,uBAAiB,MAAM,YAAY;AAGnC,iBAAW,MAAM,QAAQ,UAAQ;AAChC,YAAI;AACH,gBAAM,OAAO,GAAG,OAAO,cAAc,MAAM,MAAM,MAAM;AAGvD,2BAAiB,MAAM,YAAY,IAAI;AAEvC,0BAAgB,MAAM,KAAK,IAAI;AAAA,QAChC,SAAS,OAAO;AACf,kBAAQ,MAAM,QAAQ,IAAI,QAAQ,KAAK;AAAA,QACxC;AAAA,MACD,CAAC;AAAA,IACF;AAGA,UAAM,kBAAkB,MAAM;AAC7B,sBAAgB,MAAM,QAAQ,QAAM;AAEnC,YAAI,GAAG,YAAY;AAElB,aAAG,WAAW,YAAY,EAAE;AAAA,QAC7B;AAAA,MACD,CAAC;AACD,sBAAgB,QAAQ;IACzB;AAGA,cAAU,MAAM;AAEf;AACA;IACD,CAAC;AAGD,gBAAY,MAAM;AACjB;IACD,CAAC;;AAlHA,aAAAA,UAAA,GAAAC,mBAsBM,OAtBN,YAsBM;AAAA,QApBLC,mBAA6D,OAA7D,YAAgC,WAAMC,gBAAG,QAAA,KAAO,IAAG,QAAI,CAAA;AAAA,QAEvDD,mBAAgE,OAAhE,YAAwC,6BAAW,KAAA,KAAI,GAAA,CAAA;AAAA,QAGvDA,mBAEM,OAFN,YAEM;AAAA,WADLF,UAAA,IAAA,GAAAC,mBAAqFG,2BAA3DC,MAAA,UAAA,EAAW,OAAK,CAA/B,KAAK,UAAK;gCAArBJ,mBAAqF,KAAA;AAAA,cAAxC,cAAc,KAAK;AAAA,cAAI,WAAQ;AAAA;;;QAIlEI,MAAA,UAAA,EAAW,UAAUA,kBAAW,OAAO,SAAM,KAAxDL,aAAAC,mBAGM,OAHN,YAGM;AAAA,UAFL,OAAA,CAAA,MAAA,OAAA,CAAA,IAAAC,mBAAqC,OAAA,EAAhC,OAAM,gBAAe,GAAC,QAAI,EAAA;AAAA,UAC/BA,mBAAgE,OAAA;AAAA,qBAAvD;AAAA,YAAJ,KAAI;AAAA,YAAqB,OAAM;AAAA;;QAI1BG,MAAA,UAAA,EAAW,SAASA,kBAAW,MAAM,SAAM,KAAtDL,aAAAC,mBAGM,OAHN,YAGM;AAAA,UAFL,OAAA,CAAA,MAAA,OAAA,CAAA,IAAAC,mBAAqC,OAAA,EAAhC,OAAM,gBAAe,GAAC,QAAI,EAAA;AAAA,UAC/BA,mBAAyD,OAAA;AAAA,qBAAhD;AAAA,YAAJ,KAAI;AAAA,YAAmB,OAAM;AAAA;;;;;;;"}