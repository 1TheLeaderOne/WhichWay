{"version":3,"file":"index.js","sources":["../../../../../../packages/extension/WhichWay/src/character/index.js"],"sourcesContent":["import { lib, game, ui, get, ai, _status } from \"noname\";\r\nimport { groupData } from \"./groups.js\";\r\nimport { whichWayUtil } from \"../utill.js\";\r\nimport { whichWayTranslate } from \"./translate/index.js\";\r\nimport { whichWayFile } from \"../file.js\";\r\nimport { onConfig, onSetDev, whichWayHooksApi, registerHookContextAt, onAfterInit } from \"../hooks/index.js\";\r\nimport { initCharConfig } from \"./extCharConfig.ts\";\r\nimport { charDes } from \"./characterDesigner.js\";\r\n\r\nconst whichWaySave = window.whichWaySave;\r\n\r\nclass WhichWayCharacterPack {\r\n\t/**\r\n\t * 武将包模块\r\n\t * @type {Array}\r\n\t */\r\n\tmoduleList = [];\r\n\r\n\t/**\r\n\t * 设计者\r\n\t * @type {Record<string, string[]>}\r\n\t */\r\n\tdesigner = charDes;\r\n\r\n\t/**\r\n\t * 初始化武将包\r\n\t */\r\n\tasync init() {\r\n\t\tawait this.initModuleList();\r\n\r\n\t\tthis.initTranslate();\r\n\r\n\t\tconst packs = [];\r\n\t\tfor (let module of this.moduleList) {\r\n\t\t\tlet m = await this.createImportModule(module[0], module[1], true);\r\n\t\t\tpacks.push(m);\r\n\t\t}\r\n\r\n\t\tregisterHookContextAt(\"init\", 0, packs);\r\n\r\n\t\tonConfig({\r\n\t\t\tpriority: 401,\r\n\t\t\tname: \"unityGroup_add\",\r\n\t\t\tobj: {\r\n\t\t\t\tname: \"unityGroup\",\r\n\t\t\t\toptions: {\r\n\t\t\t\t\tname: \"统一势力\",\r\n\t\t\t\t\tintro: \"开启后本扩展所有武将将统一势力。\",\r\n\t\t\t\t\tinit: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t});\r\n\t\tonConfig({\r\n\t\t\tpriority: 997,\r\n\t\t\tname: \"whichWayNumberOfExtChars_add\",\r\n\t\t\tobj: {\r\n\t\t\t\tname: \"numberOfExtChars\",\r\n\t\t\t\toptions: {\r\n\t\t\t\t\tname: `已实装干员数:${window.whichWaySave.allCharacters.length}`,\r\n\t\t\t\t\tclear:true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * 初始化武将包模块\r\n\t */\r\n\tasync initModuleList() {\r\n\t\tconst { folders } = await whichWayFile.getFileTree(\"pack:\");\r\n\t\tfor (let folder of folders) {\r\n\t\t\tif (folder.files.length < 0) continue;\r\n\t\t\tlet module = [`${folder.name}SJZX`, []];\r\n\t\t\tfor (let file of folder.files) {\r\n\t\t\t\tif (file.name.endsWith(\".js\")) {\r\n\t\t\t\t\t//@ts-ignore ${file.path}\r\n\t\t\t\t\tmodule[1].push(await import(`./packs/${folder.name}/${whichWayFile.removeExt(file.name)}.js`).then(res => res.default));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (module[1].length > 0) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tthis.moduleList.push(module);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 初始化武将包翻译\r\n\t */\r\n\tinitTranslate() {\r\n\t\t//导入所有翻译\r\n\t\tconst { translates, otherTranslates } = whichWayTranslate;\r\n\r\n\t\tfor (let key in translates) {\r\n\t\t\tlib.translate[key] = translates[key];\r\n\t\t}\r\n\r\n\t\tfor (let key in otherTranslates) {\r\n\t\t\tlib[key] = otherTranslates[key];\r\n\t\t}\r\n\r\n\t\t//分包翻译\r\n\t\tfor (let key in groupData) {\r\n\t\t\tlib.translate[key + \"_group\"] = groupData[key].sort;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 创建导入模块\r\n\t * @param {string} moduleName - 武将包名称\r\n\t * @param {Object} moduleInfo - 武将包具体内容\r\n\t * @param {boolean} autoImport - 是否自动导入\r\n\t *\r\n\t * @return {Promise<Object>} - 编译后的武将包\r\n\t */\r\n\tasync createImportModule(moduleName, moduleInfo, autoImport) {\r\n\t\tlet compile = {\r\n\t\t\tname: moduleName,\r\n\t\t\tconnect: true,\r\n\t\t\tcharacterSort: {},\r\n\t\t\tcharacterTitle: {},\r\n\t\t\tdynamicTranslate: {},\r\n\t\t\tcharacter: {},\r\n\t\t\tcharacterIntro: {},\r\n\t\t\tskill: {},\r\n\t\t\ttranslate: {},\r\n\t\t};\r\n\r\n\t\tlet keys = Object.keys(compile).filter(key => get.is.object(compile[key]));\r\n\t\tif (!Array.isArray(moduleInfo)) moduleInfo = [moduleInfo];\r\n\t\tmoduleInfo.forEach(module => {\r\n\t\t\tfor (let key of keys) {\r\n\t\t\t\tif (get.is.object(module[key])) compile[key] = Object.assign(compile[key], module[key]);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t//——————内容设置——————//\r\n\t\tawait this.setImportModule(compile);\r\n\r\n\t\t//——————武将分包——————//\r\n\t\tlet characterSort = {};\r\n\t\tlet groups = (function () {\r\n\t\t\tlet list = [];\r\n\t\t\tfor (let i in compile.character) {\r\n\t\t\t\tlist.push(compile.character[i].originalGroup);\r\n\t\t\t}\r\n\t\t\treturn list;\r\n\t\t})();\r\n\t\tfor (let name in groupData) {\r\n\t\t\tlet sortName = name + \"_group\";\r\n\t\t\tif (!groups.includes(name)) continue;\r\n\t\t\tif (!characterSort[sortName]) characterSort[sortName] = [];\r\n\t\t\tfor (let key in compile.character) {\r\n\t\t\t\tlet info = compile.character[key];\r\n\t\t\t\tif (info.originalGroup === name) characterSort[sortName].add(key);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcompile.characterSort[moduleName] = characterSort;\r\n\r\n\t\t//————武将图片路径设置————//\r\n\t\tif (lib.device || lib.node || whichWayUtil.isViteDevServer()) {\r\n\t\t\tfor (let i in compile.character) {\r\n\t\t\t\tcompile.character[i][4].push(\"ext:WhichWay/image/character/\" + i + \".jpg\");\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor (let i in compile.character) {\r\n\t\t\t\tcompile.character[i][4].push(\"db:extension-WhichWay/image/character/:\" + i + \".jpg\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction findTranslation(str, index) {\r\n\t\t\tlet translateMap = {\r\n\t\t\t\tlegendSJZX: [\"6星\", \"SJZXStar6\"],\r\n\t\t\t\tepicSJZX: [\"5星\", \"SJZXStar5\"],\r\n\t\t\t\trareSJZX: [\"4星\", \"SJZXStar4\"],\r\n\t\t\t\tnormalSJZX: [\"3星\", \"SJZXStar3\"],\r\n\t\t\t\tespecialSJZX: [\"2星\", \"SJZXStar2\"],\r\n\t\t\t\tmediocreSJZX: [\"1星\", \"SJZXStar1\"],\r\n\t\t\t\tplotSJZX: [\"剧情\", \"SJZXPlot\"],\r\n\t\t\t\tspecialSJZX: [\"特殊\", \"SJZXSpecial\"],\r\n\t\t\t};\r\n\t\t\treturn translateMap[str][index ? index : 0];\r\n\t\t}\r\n\r\n\t\tif (!lib.config.characters.includes(moduleName)) lib.config.characters.push(moduleName);\r\n\t\tlet translate = lib.config.extension_WhichWay_compatibleMode === true ? `驶舰:${findTranslation(moduleName)}` : \"<img style='width:90px;height:25px;' src=\" + lib.assetURL + `extension/WhichWay/image/decoration/${findTranslation(moduleName, 1)}.png>`;\r\n\t\tlib.translate[`${moduleName}_character_config`] = translate;\r\n\r\n\t\tif (autoImport) {\r\n\t\t\tawait game.import(\"character\", () => compile);\r\n\t\t}\r\n\r\n\t\treturn compile;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Object} packname 扩展包\r\n\t * 对武将扩展包进行初始化设置\r\n\t */\r\n\tasync setImportModule(packname) {\r\n\t\t//————统计扩展武将————//\r\n\t\tvar names = Object.keys(packname.character).filter(\r\n\t\t\tkey =>\r\n\t\t\t\tkey.endsWith(\"mrfz\") &&\r\n\t\t\t\t/** @ts-ignore */\r\n\t\t\t\t!whichWaySave.allCharacters.includes(key)\r\n\t\t);\r\n\t\twhichWaySave.allCharacters.push(...names);\r\n\r\n\t\twhichWaySave.allSkills.push(...Object.keys(packname.skill));\r\n\r\n\t\t//————将角色对象化————//\r\n\t\tpackname.character = this.characterObjectification(packname, true);\r\n\r\n\t\tfor (let key in packname.character) {\r\n\t\t\t/**\r\n\t\t\t * @type {WhichWayCharacter}\r\n\t\t\t */\r\n\t\t\tlet info = packname.character[key];\r\n\t\t\t//————初始化WhichWay配置————//\r\n\t\t\tinitCharConfig(info);\r\n\r\n\t\t\t//————势力设置————//\r\n\t\t\tinfo.whichWay.reallyGroup = info.group;\r\n\r\n\t\t\t//————添加WhichWay配置————//\r\n\t\t\tinfo.whichWay.charId = key;\r\n\r\n\t\t\tonAfterInit({\r\n\t\t\t\tname: `whichWayCharacterWhichWayExtraConfig_${key}`,\r\n\t\t\t\tfn: () => {\r\n\t\t\t\t\tinfo.whichWay.supportingEquipment = info.whichWay.arknight.tags.includes(\"支援机器\");\r\n\t\t\t\t\tinfo.whichWay.linkage = info.whichWay.arknight.avaiableLangs.includes(\"LINKAGE\");\r\n\t\t\t\t},\r\n\t\t\t});\r\n\r\n\t\t\t//@ts-ignore\r\n\t\t\tif (info.designer) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tinfo.whichWay.designer = Array.isArray(info.designer) ? info.designer : [info.designer];\r\n\t\t\t\tthis.designer[key] ??= [];\r\n\t\t\t\tthis.designer[key].push(...info.whichWay.designer.filter(designer => !this.designer[key].includes(designer)));\r\n\t\t\t} else {\r\n\t\t\t\tinfo.whichWay.designer = this.getDesigner(info, false, true);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!whichWayUtil.config(\"unityGroup\")) {\r\n\t\t\tlet data = groupData;\r\n\t\t\tfor (let key in data) {\r\n\t\t\t\tlib.group.push(key);\r\n\t\t\t\tlib.groupnature[key] = key;\r\n\t\t\t\tlib.translate[key] = data[key].group;\r\n\t\t\t\tlib.translate[key + \"2\"] = data[key].group;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar keys = Object.keys(packname.character);\r\n\t\t\tvar result = keys.filter(key => key.endsWith(\"mrfz\"));\r\n\t\t\tresult.forEach(key => {\r\n\t\t\t\tpackname.character[key].group = \"sjzx_group\";\r\n\t\t\t});\r\n\t\t\tif (!lib.translate[\"sjzx_group\"]) lib.translate[\"sjzx_group\"] = \"泰拉\";\r\n\t\t}\r\n\r\n\t\t//————卖钩————//\r\n\t\tawait whichWayHooksApi.character(packname);\r\n\t}\r\n\r\n\t/**\r\n\t * 将角色数据对象中的每个角色信息转换为标准的角色对象格式。\r\n\t *\r\n\t * @param {Object} characters - 包含角色信息的对象。该对象的每个属性代表一个角色。\r\n\t * @param {boolean} [isPack=false] - 如果为 true，则表示传入的是一个完整的扩展包对象\r\n\t * @returns {Object} 返回经过转换后的角色对象，其中每个角色值都已通过 `get.convertedCharacter` 处理。\r\n\t */\r\n\tcharacterObjectification(characters, isPack = false) {\r\n\t\tif (!get.is.object(characters)) throw new Error(`${characters} 不是一个对象`);\r\n\t\tif (isPack) characters = characters.character;\r\n\t\tfor (let key in characters) {\r\n\t\t\tlet info = characters[key];\r\n\t\t\tcharacters[key] = get.convertedCharacter(info);\r\n\t\t}\r\n\t\treturn characters;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取角色设计者\r\n\t * @param {string | WhichWayCharacter } char - 角色名\r\n\t * @param {boolean} [igDefault=false] - 是否忽略默认设计者\r\n\t * @param {boolean} [fromStorage=false] - 是否从charDes中获取\r\n\t * @returns {string[]} 角色设计者\r\n\t */\r\n\tgetDesigner(char, igDefault = false, fromStorage = false) {\r\n\t\t//@ts-ignore 不是本扩展的角色直接返回佚名\r\n\t\tif ((get.is.object(char) && !char?.whichWay) || (typeof char === \"string\" && !window.whichWaySave.allCharacters.includes(char))) {\r\n\t\t\treturn [\"佚名\"];\r\n\t\t}\r\n\r\n\t\tif (typeof char === \"string\") {\r\n\t\t\tif (Object.keys(whichWayCharacterPack.designer).includes(char)) return whichWayCharacterPack.designer[char];\r\n\t\t} else if (get.is.object(char)) {\r\n\t\t\tif (char.whichWay.designer && char.whichWay.designer.length > 0 && !fromStorage) return char.whichWay.designer;\r\n\t\t\tif (Object.keys(whichWayCharacterPack.designer).includes(char.whichWay.charId)) return whichWayCharacterPack.designer[char.whichWay.charId];\r\n\t\t}\r\n\t\treturn igDefault ? [\"佚名\"] : [\"林登万\"];\r\n\t}\r\n\r\n\t/**\r\n\t * 获取角色阵营\r\n\t * @param {string} name - 角色名\r\n\t * @returns {string | undefined} 角色阵营\r\n\t */\r\n\tgetCamp(name) {\r\n\t\tlet char = get.character(name);\r\n\t\treturn char.whichWay?.arknight.camp || char.group;\r\n\t}\r\n}\r\n\r\nconst whichWayCharacterPack = new WhichWayCharacterPack();\r\n\r\nexport const { getDesigner, getCamp } = whichWayCharacterPack;\r\n\r\nawait whichWayCharacterPack.init();\r\n\r\nonSetDev({\r\n\tname: \"whichWayCharacterPack_dev\",\r\n\tfn: () => {\r\n\t\t//@ts-ignore\r\n\t\twindow.whichWayCharacterPack = whichWayCharacterPack;\r\n\t},\r\n});\r\n\r\nwindow.whichWay.register(\"characterPack\", whichWayCharacterPack);\r\n"],"names":[],"mappings":"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"}