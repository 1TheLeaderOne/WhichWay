{"version":3,"file":"legend4SJZX.js","sources":["../../../../../../../../packages/extension/WhichWay/src/character/packs/legend/legend4SJZX.js"],"sourcesContent":["import { lib, game, ui, get, ai, _status } from \"noname\";\r\nimport { skillCustomFunc } from \"../../../nonameEx/custom/skill.ts\";\r\nimport { whichWayTips } from \"../../../tips/index.ts\";\r\nimport { whichWayUtil } from \"../../../utill.js\";\r\n\r\n/**\r\n * @type { WhichWayCharacterPack }\r\n */\r\nexport default {\r\n\tcharacter: {\r\n\t\tmaizhelunmrfz: [\"female\", \"lymrfz\", 3, [\"kanchamrfz\", \"longtengmrfz\"], []],\r\n\t\tpalasimrfz: [\"female\", \"mimrfz\", 4, [\"yingzhumrfz\", \"yingdanmrfz\", \"yingfenmrfz\"], []],\r\n\t\txiaguangmrfz: [\"female\", \"kamrfz\", 4, [\"rencimrfz\", \"huiguangmrfz\", \"jiandunmrfz\"], []],\r\n\t\tzaolumrfz: [\"female\", \"wumrfz\", 4, [\"zhongxiemrfz\", \"rusuimrfz\"], []],\r\n\t\tspshihuaiyamrfz: [\"female\", \"longmrfz\", 3, [\"mianzaimrfz\", \"zhijinmrfz\"], []],\r\n\t\tspsongzangrenmrfz: [\"male\", \"lamrfz\", 3, [\"chongdanmrfz\", \"tianxuanmrfz\", \"shengcaimrfz\"], []],\r\n\t\tspjiexikamrfz: [\"female\", \"gemrfz\", 4, [\"yijiemrfz\", \"fuhuangmrfz\"], []],\r\n\t\tweiweiannamrfz: [\"female\", \"laimrfz\", 4, [\"zhanjumrfz\", \"zhuhuomrfz\", \"yunjiaomrfz\"], []],\r\n\t\tspxiaoyangmrfz: [\"female\", \"laimrfz\", 3, [\"lvmengmrfz\", \"rechenmrfz\"], []],\r\n\t\tsuxinmrfz: [\"female\", \"lamrfz\", 3, [\"qinmingmrfz\", \"kongwomrfz\"], []],\r\n\t\thedeleimrfz: [\"male\", \"luomrfz\", \"4/6\", [\"zhengrongmrfz\", \"siyanmrfz\"], []],\r\n\t\tzhisongmrfz: [\"male\", \"laimrfz\", 4, [\"kuxiumrfz\", \"lirenmrfz\"], []],\r\n\t\tjianmrfz: [\"female\", \"xiemrfz\", 4, [\"weiyamrfz\", \"zhiwumrfz\"], []],\r\n\t\tlaiyimrfz: [\"female\", \"leimrfz\", 3, [\"shaobanmrfz\", \"tankuangmrfz\"], []],\r\n\t\tshumrfz: [\"female\", \"suimrfz\", 3, [\"kenyemrfz\", \"heyingmrfz\", \"rancuimrfz\"], []],\r\n\t\tzuolemrfz: [\"male\", \"yanmrfz\", \"4/5\", [\"qikumrfz\", \"bingzhumrfz\"], []],\r\n\t\telamrfz: [\"female\", \"othermrfz\", 3, [\"leimingmrfz\", \"zuzhimrfz\"], []],\r\n\t\tasikalunmrfz: [\"female\", \"luomrfz\", 3, [\"dunyingmrfz\", \"niximrfz\"], []],\r\n\t\tluogesimrfz: [\"male\", \"luomrfz\", 3, [\"baidumrfz\", \"yuhuimrfz\"], []],\r\n\t\tweishidaiermrfz: [\"female\", \"bamrfz\", 3, [\"yuximrfz\", \"haolimrfz\", \"shezumrfz\"], []],\r\n\t\tmowangmrfz: [\"female\", \"luomrfz\", 3, [\"duanzhangmrfz\", \"chenaimrfz\", \"canxiangmrfz\"], []],\r\n\t\twuerbianmrfz: [\"male\", \"a_groupmrfz\", 4, [\"guqianmrfz\", \"piweimrfz\", \"tongmaimrfz\"], [\"clan:深海猎人\"]],\r\n\t\tnifumrfz: [\"female\", \"luomrfz\", 3, [\"xunxinmrfz\", \"chixinmrfz\", \"kuixinmrfz\"], []],\r\n\t\tnarentuyamrfz: [\"female\", \"samrfz\", \"4/6\", [\"eyanmrfz\", \"shafeimrfz\"], []],\r\n\t\tpeipeimrfz: [\"female\", \"samrfz\", 3, [\"boqingmrfz\", \"kuisuimrfz\", \"lianwenmrfz\"], []],\r\n\t},\r\n\tskill: {\r\n\t\t//麦哲伦\r\n\t\tkanchamrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tfilterCard: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"已发动#次【勘查】\",\r\n\t\t\t},\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\tif (\r\n\t\t\t\t\tplayer.hasCard(function (card) {\r\n\t\t\t\t\t\treturn get.type(card) == \"equip\";\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t\treturn get.type(card) == \"equip\";\r\n\t\t\t\tif (\r\n\t\t\t\t\tplayer.hasCard(function (card) {\r\n\t\t\t\t\t\treturn get.type(card) == \"trick\";\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t\treturn get.type(card) == \"trick\";\r\n\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { cards } = event;\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tevent.cards2 = cards[0];\r\n\t\t\t\tresult = await player\r\n\t\t\t\t\t.chooseControl(\"顶部\", \"底部\")\r\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"kanchamrfz\"))\r\n\t\t\t\t\t.set(\"prompt2\", \"【勘查】:请选择展示牌堆顶还是牌堆底\" + (player.countMark(\"kanchamrfz\") + 3) + \"张牌\")\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\treturn [0, 1].randomGet();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tconst num = player.countMark(\"kanchamrfz\") + 3;\r\n\t\t\t\tif (result.index === 0) {\r\n\t\t\t\t\tconst cards = game.cardsGotoOrdering(get.cards(num)).cards;\r\n\t\t\t\t\tevent.cards = cards;\r\n\t\t\t\t} else if (result.index === 1) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tevent.cards = get.bottomCards(num);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 2\r\n\t\t\t\tconst list = [];\r\n\t\t\t\tplayer.showCards(event.cards, get.translation(player) + \"发动了【勘查】\");\r\n\t\t\t\tfor (let i = 0; i < event.cards.length; i++) {\r\n\t\t\t\t\tif (get.type(event.cards2, \"trick\") !== get.type(event.cards[i], \"trick\")) {\r\n\t\t\t\t\t\tlist.push(event.cards[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (list.length) {\r\n\t\t\t\t\tawait player.gain(list, \"gain2\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 3\r\n\t\t\t\tif (player.countMark(\"kanchamrfz\") < 3) {\r\n\t\t\t\t\tplayer.addMark(\"kanchamrfz\", 1, false);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\tthreaten: 1.1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tlongtengmrfz: {\r\n\t\t\tmarkimage: \"extension/WhichWay/image/skill/mrfz_LTF.png\",\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"expansion\",\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t},\r\n\t\t\tonremove: function (player, skill) {\r\n\t\t\t\tvar cards = player.getExpansions(skill);\r\n\t\t\t\tif (cards.length) player.loseToDiscardpile(cards);\r\n\t\t\t},\r\n\t\t\taudio: 8,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"loseAfter\",\r\n\t\t\t\tglobal: \"loseAsyncAfter\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.isPhase(\"phaseDiscard\", false)) return false;\r\n\t\t\t\tif (event.type != \"discard\" || event.getlx === false) return;\r\n\t\t\t\tvar evt = event.getl(player);\r\n\t\t\t\tfor (var i = 0; i < evt.cards2.length; i++) {\r\n\t\t\t\t\tif (get.position(evt.cards2[i], evt.hs.includes(evt.cards2[i]) ? evt.player : false) == \"d\") {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tevent.cards2 = cards[0];\r\n\t\t\t\tconst cards = [];\r\n\t\t\t\tconst evt = trigger.getl(player);\r\n\t\t\t\tfor (let i = 0; i < evt.cards2.length; i++) {\r\n\t\t\t\t\tif (get.position(evt.cards2[i]) === \"d\") {\r\n\t\t\t\t\t\tcards.push(evt.cards2[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!cards.length) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (cards.length > 1) {\r\n\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t.chooseButton([\"【龙腾】:请选择一张牌\", cards])\r\n\t\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\t\t\t\treturn get.attitude(aiPlayer, current) > 2;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn get.type(button.link) === \"equip\" || get.type(button.link, \"trick\") === \"trick\";\r\n\t\t\t\t\t\t\treturn get.type(button.link) === \"basic\";\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t// step 1\r\n\t\t\t\t\tif (result.links && result.links.length) {\r\n\t\t\t\t\t\tevent.cards = result.links;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tevent.cards = cards;\r\n\t\t\t\t\t// goto 2: skip step 1 assignment, proceed to step 2\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 2\r\n\t\t\t\tresult = await player\r\n\t\t\t\t\t.chooseTarget(\r\n\t\t\t\t\t\t\"【龙腾】:请选择一名角色，并将\" +\r\n\t\t\t\t\t\t\tget.translation(event.cards) +\r\n\t\t\t\t\t\t\t\"(\" +\r\n\t\t\t\t\t\t\tget.translation(get.type(event.cards[0], \"trick\")) +\r\n\t\t\t\t\t\t\t\"牌) 置于该角色武将牌上\",\r\n\t\t\t\t\t\t(card, player, target) => {\r\n\t\t\t\t\t\t\treturn target.getExpansions(\"longtengmrfz\").length === 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\tconst type = get.type2(event.cards[0]);\r\n\t\t\t\t\t\tif (type === \"basic\") return -get.attitude(aiPlayer, target);\r\n\t\t\t\t\t\telse return get.attitude(aiPlayer, target) > 2;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t// step 3\r\n\t\t\t\tif (result.targets) {\r\n\t\t\t\t\tconst target = result.targets[0];\r\n\t\t\t\t\tconst next = target.addToExpansion(event.cards, target, \"give\");\r\n\t\t\t\t\tnext.gaintag.add(\"longtengmrfz\");\r\n\t\t\t\t\tawait next;\r\n\t\t\t\t\ttarget.addSkill(\"longtengmrfz_changeI\");\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"longtengmrfz\", target);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"longtengmrfz_clear\",\r\n\t\t\tglobal: [\"longtengmrfz_basic_1\", \"longtengmrfz_basic_2\", \"longtengmrfz_trick\", \"longtengmrfz_equip\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tchangeI: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"longtengmrfzAfter\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeSkill(\"longtengmrfz_changeI\");\r\n\t\t\t\t\t\tif (player.isTypeExpansions(\"longtengmrfz\", \"basic\")) player.changeMarkImage(\"longtengmrfz\", \"mrfz_LTF\");\r\n\t\t\t\t\t\tif (player.isTypeExpansions(\"longtengmrfz\", \"trick\")) player.changeMarkImage(\"longtengmrfz\", \"mrfz_LTL\");\r\n\t\t\t\t\t\tif (player.isTypeExpansions(\"longtengmrfz\", \"equip\")) player.changeMarkImage(\"longtengmrfz\", \"mrfz_LTA\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tbasic_1: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDrawBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.isTypeExpansions(\"longtengmrfz\", \"basic\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num--;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"longtengmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tbasic_2: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseUseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.isTypeExpansions(\"longtengmrfz\", \"basic\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"longtengmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttrick: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard2\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (get.type(event.card, \"trick\") != \"trick\") return false;\r\n\t\t\t\t\t\tif (player.hasSkill(\"longtengmrfz_trick2\")) return false;\r\n\t\t\t\t\t\tif (player.isTypeExpansions(\"longtengmrfz\", \"trick\") == false) return false;\r\n\t\t\t\t\t\tvar info = get.info(event.card);\r\n\t\t\t\t\t\tif (info.allowMultiple == false) return false;\r\n\t\t\t\t\t\tif (event.targets && !info.multitarget) {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\t\treturn lib.filter.targetEnabled2(event.card, player, current) && !event.targets.includes(current);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet result;\r\n\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t.chooseTarget(\r\n\t\t\t\t\t\t\t\t\"【龙腾】:你可以为此牌 (\" + get.translation(trigger.card) + \") 额外指定一个目标\",\r\n\t\t\t\t\t\t\t\t(card, player, target) => {\r\n\t\t\t\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\t\t\t\tif (_status.event.targets.includes(target)) return false;\r\n\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\tif (aiPlayer.canUse(trigger.card, target, true) === false) return false;\r\n\t\t\t\t\t\t\t\t\treturn lib.filter.targetEnabled2(_status.event.card, aiPlayer, target);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\t\tconst aiTrigger = _status.event.getTrigger();\r\n\t\t\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\t\t\treturn get.effect(target, aiTrigger.card, aiPlayer, aiPlayer);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"targets\", trigger.targets)\r\n\t\t\t\t\t\t\t.set(\"card\", trigger.card)\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t// step 1\r\n\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\tif (!event.isMine() && !event.isOnline()) {\r\n\t\t\t\t\t\t\t\tawait game.delayx();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tevent.targets = result.targets;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t//@ts-ignore step 2\r\n\t\t\t\t\t\tplayer.logSkill(\"longtengmrfz\", event.targets);\r\n\t\t\t\t\t\ttrigger.targets.addArray(event.targets);\r\n\r\n\t\t\t\t\t\t// step 3\r\n\t\t\t\t\t\tif (get.tag(trigger.card, \"damage\")) {\r\n\t\t\t\t\t\t\tresult = await player.chooseBool(\"【龙腾】:是否令此牌伤害 +1？\").forResult();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 4\r\n\t\t\t\t\t\ttrigger.baseDamage++;\r\n\t\t\t\t\t\tplayer.addTempSkill(\"longtengmrfz_trick2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttrick2: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\tequip: {\r\n\t\t\t\t\ttrigger: { player: \"useCard2\" },\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (get.type(event.card) != \"basic\") return false;\r\n\t\t\t\t\t\tif (player.isTypeExpansions(\"longtengmrfz\", \"equip\") == false) return false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet result;\r\n\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\tconst list = [\"不计入次数限制\"];\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\t\t\treturn !trigger.targets.includes(current) && !!player.canUse(trigger.card, current, false);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\tlist.add(\"增加目标\");\r\n\t\t\t\t\t\tif (trigger.card.name === \"sha\") list.add(\"伤害基数 +1\");\r\n\r\n\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t\t.set(\"prompt\", \"【龙腾】:请选择一项\")\r\n\t\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\t\t\tconst num = [];\r\n\t\t\t\t\t\t\t\tfor (let i = 0; i < list.length; i++) {\r\n\t\t\t\t\t\t\t\t\tnum.add(i);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\tget.name(_status.event.TriCard) === \"sha\" &&\r\n\t\t\t\t\t\t\t\t\taiPlayer.getCardUsable(\"sha\") === 0 &&\r\n\t\t\t\t\t\t\t\t\taiPlayer.countCards(\"h\", \"sha\") > 0\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\tget.name(_status.event.TriCard) === \"sha\" &&\r\n\t\t\t\t\t\t\t\t\t(aiPlayer.countCards(\"h\", \"sha\") === 0 || aiPlayer.getCardUsable(\"sha\") > 0)\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\treturn list.length - 1;\r\n\t\t\t\t\t\t\t\tif (get.name(_status.event.TriCard) === \"jiu\") return 0;\r\n\t\t\t\t\t\t\t\treturn num.randomGet();\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"TriCard\", trigger.card)\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t// step 1\r\n\t\t\t\t\t\tif (result && result.control) {\r\n\t\t\t\t\t\t\tgame.log(player, \"选择了\", result.control);\r\n\t\t\t\t\t\t\tplayer.popup(result.control);\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"longtengmrfz\");\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (result.control === \"不计入次数限制\") {\r\n\t\t\t\t\t\t\tif (trigger.addCount !== false && (trigger.card.name === \"sha\" || trigger.card.name === \"jiu\")) {\r\n\t\t\t\t\t\t\t\ttrigger.addCount = false;\r\n\t\t\t\t\t\t\t\tif (trigger.card.name === \"sha\") trigger.player.getStat().card.sha--;\r\n\t\t\t\t\t\t\t\telse trigger.player.getStat().card.jiu--;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t} else if (result.control === \"增加目标\") {\r\n\t\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t\t.chooseTarget(\r\n\t\t\t\t\t\t\t\t\t[1, 2],\r\n\t\t\t\t\t\t\t\t\t\"【龙腾】:你可以为此牌 (\" + get.translation(trigger.card) + \") 额外指定两个目标\",\r\n\t\t\t\t\t\t\t\t\t(card, player, target) => {\r\n\t\t\t\t\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\t\t\t\t\tif (_status.event.targets.includes(target)) return false;\r\n\t\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\t\tif (aiPlayer.canUse(trigger.card, target, true) === false) return false;\r\n\t\t\t\t\t\t\t\t\t\treturn lib.filter.targetEnabled2(_status.event.card, aiPlayer, target);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\t\t\tconst aiTrigger = _status.event.getTrigger();\r\n\t\t\t\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\t\t\t\treturn get.effect(target, aiTrigger.card, aiPlayer, aiPlayer);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"targets\", trigger.targets)\r\n\t\t\t\t\t\t\t\t.set(\"card\", trigger.card)\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t\t// step 2\r\n\t\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\t\tfor (let i = 0; i < result.targets.length; i++) {\r\n\t\t\t\t\t\t\t\t\ttrigger.targets.push(result.targets[i]);\r\n\t\t\t\t\t\t\t\t\tplayer.line(result.targets[i]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (result.control === \"伤害基数 +1\") {\r\n\t\t\t\t\t\t\tif (!trigger.baseDamage) trigger.baseDamage = 1;\r\n\t\t\t\t\t\t\ttrigger.baseDamage += 1;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { player: [\"phaseZhunbeiBegin\", \"dieBegin\"] },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tfor (const current of game.players) {\r\n\t\t\t\t\t\t\tconst cards = current.getExpansions(\"longtengmrfz\");\r\n\t\t\t\t\t\t\tif (current.getExpansions(\"longtengmrfz\").length) current.loseToDiscardpile(cards);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//嵯峨\r\n\t\tquanshanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.player.countCards(\"h\") == 0 && event.player != player;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"是否令\" + get.translation(event.player) + \"将手牌补至3张并令其获得一些负面效果？\";\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (event.player.hp < 2 && get.attitude(player, event.player) > 0) return true;\r\n\t\t\t\tif (get.attitude(player, event.player) > 2 && event.player.maxHp > 2) return Math.random() > 0.6;\r\n\t\t\t\tif (event.player.hp < 2) return false;\r\n\t\t\t\treturn get.attitude(player, event.player) < 2;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst target = trigger.player;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\ttarget.drawTo(Math.min(3, target.maxHp));\r\n\t\t\t\ttarget.addSkill(\"quanshanmrfz_eff\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"quanshanmrfz_clear\", \"quanshanmrfz_clear2\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear2: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.hasSkill(\"quanshanmrfz_eff\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst target = trigger.player;\r\n\t\t\t\t\t\ttarget.removeMark(\"quanshanmrfz_eff\", target.countMark(\"quanshanmrfz_eff\"));\r\n\t\t\t\t\t\ttarget.removeSkill(\"quanshanmrfz_eff\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"dieBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn current.hasMark(\"quanshanmrfz\") || current.hasSkill(\"quanshanmrfz_eff\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tfor (const current of game.players) {\r\n\t\t\t\t\t\t\tcurrent.removeMark(\"quanshanmrfz_eff\", current.countMark(\"quanshanmrfz_eff\"));\r\n\t\t\t\t\t\t\tcurrent.removeSkill(\"quanshanmrfz_eff\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff: {\r\n\t\t\t\t\tmarktext: \"恶\",\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tname: \"恶\",\r\n\t\t\t\t\t\tcontent: \"·当你造成伤害时，你获得一个‘恶’</br>·你共有#个‘恶’\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"quanshanmrfz\");\r\n\t\t\t\t\t\tplayer.addMark(\"quanshanmrfz_eff\");\r\n\t\t\t\t\t\tif (player.getHandcardLimit() <= 0) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tevent.getParent(\"phaseUse\").skipped = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn num - player.countMark(\"quanshanmrfz_eff\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tchuemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\treturn current != player && current.countCards(\"h\") > 0 && player.inRange(current);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn player.inRange(target) && target != player && target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tcheck: function () {\r\n\t\t\t\treturn -1;\r\n\t\t\t},\r\n\t\t\tselectTarget: [1, 2],\r\n\t\t\tmultitarget: true,\r\n\t\t\tmultiline: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\t\t\t\tconst targets = event.targets;\r\n\r\n\t\t\t\t// Main loop (original event.num iteration with goto logic)\r\n\t\t\t\twhile (event.num < targets.length) {\r\n\t\t\t\t\tconst target = targets[event.num];\r\n\t\t\t\t\tconst hs = target.getCards(\"h\");\r\n\t\t\t\t\tlet colred = false;\r\n\r\n\t\t\t\t\t// Check for red cards in hand\r\n\t\t\t\t\tfor (const card of hs) {\r\n\t\t\t\t\t\tif (get.color(card) === \"red\") {\r\n\t\t\t\t\t\t\tcolred = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tplayer.viewHandcards(target);\r\n\t\t\t\t\tgame.log(player, \"观看了\", target, \"的手牌\");\r\n\r\n\t\t\t\t\tif (colred) {\r\n\t\t\t\t\t\t// Has red cards: choose suit to discard\r\n\t\t\t\t\t\tconst list = [];\r\n\t\t\t\t\t\tfor (const card of hs) {\r\n\t\t\t\t\t\t\tif (list.length === 2) break;\r\n\t\t\t\t\t\t\tif (get.suit(card) === \"club\" && !list.includes(\"梅花\")) list.add(\"梅花\");\r\n\t\t\t\t\t\t\tif (get.suit(card) === \"spade\" && !list.includes(\"黑桃\")) list.add(\"黑桃\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlist.add(\"cancel2\");\r\n\r\n\t\t\t\t\t\tif (list.length > 1) {\r\n\t\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", \"【除恶】:请选择一个花色，然后其 (\" + get.translation(target) + \") 弃置该花色的所有牌\")\r\n\t\t\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\t\t\t\tconst handCards = target.getCards();\r\n\t\t\t\t\t\t\t\t\tlet num = 0;\r\n\t\t\t\t\t\t\t\t\tfor (const c of handCards) {\r\n\t\t\t\t\t\t\t\t\t\tif (get.suit(c) === \"club\") num++;\r\n\t\t\t\t\t\t\t\t\t\tif (get.suit(c) === \"spade\") num--;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (list.length === 1) return 0;\r\n\t\t\t\t\t\t\t\t\tif (num > 0) return 0;\r\n\t\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t\t// Step 2 logic: discard cards of chosen suit\r\n\t\t\t\t\t\t\tif (result.control !== \"cancel2\") {\r\n\t\t\t\t\t\t\t\tconst dis = [];\r\n\t\t\t\t\t\t\t\tfor (const card of target.getCards()) {\r\n\t\t\t\t\t\t\t\t\tif (get.suit(card) === (result.control === \"黑桃\" ? \"spade\" : \"club\")) {\r\n\t\t\t\t\t\t\t\t\t\tdis.push(card);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tawait target.discard(dis);\r\n\t\t\t\t\t\t\t\tawait player.draw(dis.length);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// No red cards: choose to discard all handcards\r\n\t\t\t\t\t\tresult = await player.chooseBool(\"【除恶】:是否弃置其 (\" + get.translation(target) + \") 所有手牌？\").forResult();\r\n\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tconst dis = target.getCards();\r\n\t\t\t\t\t\t\tawait target.discard(dis);\r\n\r\n\t\t\t\t\t\t\tif (target.hasMark(\"quanshanmrfz_eff\")) {\r\n\t\t\t\t\t\t\t\tconst markCount = target.countMark(\"quanshanmrfz_eff\");\r\n\t\t\t\t\t\t\t\tawait target.damage(markCount);\r\n\t\t\t\t\t\t\t\ttarget.removeMark(\"quanshanmrfz_eff\", markCount);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Step 5 logic (executed after bool branch or skipped after suit branch)\r\n\t\t\t\t\tif (!colred && result?.bool && !target.hasSkill(\"quanshanmrfz_eff\")) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tawait target.drawTo(Math.min(3, target.maxHp));\r\n\t\t\t\t\t\ttarget.addSkill(\"quanshanmrfz_eff\");\r\n\t\t\t\t\t\tplayer.popup(\"劝善\");\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"quanshanmrfz\", target);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Loop control: move to next target\r\n\t\t\t\t\tevent.num++;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\ttarget: -1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//新银灰\r\n\t\txuebianmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"已造成#点伤害\",\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\taudio: 2,\r\n\t\t\tusable: 1,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.countCards(\"h\") > 0 &&\r\n\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && current.countCards(\"h\") > 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tselectTarget: [1, 2],\r\n\t\t\tcheck: function () {\r\n\t\t\t\treturn -1;\r\n\t\t\t},\r\n\t\t\tmultitarget: true,\r\n\t\t\tmultiline: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\t\t\t\tconst targets = event.targets;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tevent.cards1 = [];\r\n\t\t\t\tevent.cards2 = [];\r\n\t\t\t\tevent.cards3 = [];\r\n\t\t\t\tfor (const t of targets) {\r\n\t\t\t\t\tt.addTempSkill(\"xuebianmrfz2\", { player: \"phaseEnd\" });\r\n\t\t\t\t}\r\n\t\t\t\ttargets.push(player);\r\n\t\t\t\ttargets.sortBySeat();\r\n\r\n\t\t\t\tconst next = player\r\n\t\t\t\t\t.chooseCardOL(targets, \"请选择要展示的牌\", true, [1, 3])\r\n\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\treturn -get.value(card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"source\", player);\r\n\t\t\t\tnext.aiCard = function (target) {\r\n\t\t\t\t\tconst hs = target.getCards(\"h\");\r\n\t\t\t\t\treturn { bool: true, cards: [hs.randomGet()] };\r\n\t\t\t\t};\r\n\t\t\t\tnext._args.remove(\"glow_result\");\r\n\r\n\t\t\t\tresult = await next.forResult();\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tconst cards = [];\r\n\t\t\t\tlet num = 0;\r\n\t\t\t\tevent.videoId = lib.status.videoId++;\r\n\r\n\t\t\t\tfor (let i = 0; i < targets.length; i++) {\r\n\t\t\t\t\tfor (let j = 0; j < result[i].cards.length; j++) {\r\n\t\t\t\t\t\tcards.push(result[i].cards[j]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tevent.cards = cards;\r\n\t\t\t\tgame.log(player, \"展示了\", targets, \"的\", cards);\r\n\r\n\t\t\t\tgame.broadcastAll(\r\n\t\t\t\t\tfunction (targets, cards, id, player) {\r\n\t\t\t\t\t\tvar dialog = ui.create.dialog(get.translation(player) + \"发动了【雪变】\", cards);\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tdialog.videoId = id;\r\n\t\t\t\t\t\tvar getName = function (target) {\r\n\t\t\t\t\t\t\tif (target._tempTranslate) return target._tempTranslate;\r\n\t\t\t\t\t\t\tvar name = target.name;\r\n\t\t\t\t\t\t\tif (lib.translate[name + \"_ab\"]) return lib.translate[name + \"_ab\"];\r\n\t\t\t\t\t\t\treturn get.translation(name);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tfor (var i = 0; i < targets.length; i++) {\r\n\t\t\t\t\t\t\tif (i === 0) event.cards1 = result[i].cards;\r\n\t\t\t\t\t\t\tif (i === 1) event.cards2 = result[i].cards;\r\n\t\t\t\t\t\t\tif (i === 2) event.cards3 = result[i].cards;\r\n\t\t\t\t\t\t\tfor (var j = 0; j < result[i].cards.length; j++) {\r\n\t\t\t\t\t\t\t\tvar btnIndex = j;\r\n\t\t\t\t\t\t\t\tif (i === 1) btnIndex += result[i - 1].cards.length;\r\n\t\t\t\t\t\t\t\telse if (i === 2) btnIndex += result[i - 2].cards.length + result[i - 1].cards.length;\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tdialog.buttons[btnIndex].querySelector(\".info\").innerHTML = getName(targets[i]);\r\n\t\t\t\t\t\t\t\tif (get.color(result[i].cards[j]) === \"red\") num++;\r\n\t\t\t\t\t\t\t\telse num--;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttargets,\r\n\t\t\t\t\tcards,\r\n\t\t\t\t\tevent.videoId,\r\n\t\t\t\t\tplayer\r\n\t\t\t\t);\r\n\r\n\t\t\t\tawait game.delay(4);\r\n\r\n\t\t\t\tif (num > 0) {\r\n\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t.chooseTarget(\"【雪变】：你可以对其中一名角色造成一点伤害并令其弃置其展示的牌\", (card, player, target) => {\r\n\t\t\t\t\t\t\treturn target !== player && target.hasSkill(\"xuebianmrfz2\");\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\t\treturn get.attitude(aiPlayer, target) < 0;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t// event.targets = result;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor (let i = 0; i < targets.length; i++) {\r\n\t\t\t\t\t\ttargets[i].discard(result[i].cards);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 2\r\n\t\t\t\tconst list = [event.cards1, event.cards2, event.cards3];\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tgame.broadcastAll(\"closeDialog\", event.videoId);\r\n\r\n\t\t\t\tif (result?.targets) {\r\n\t\t\t\t\tconst selectedTarget = result.targets[0];\r\n\t\t\t\t\tawait selectedTarget.damage();\r\n\t\t\t\t\tlet cardsToDiscard = [];\r\n\t\t\t\t\tfor (let i = 0; i < targets.length; i++) {\r\n\t\t\t\t\t\tif (targets[i] === selectedTarget) {\r\n\t\t\t\t\t\t\tcardsToDiscard = list[i];\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (cardsToDiscard && cardsToDiscard.length) {\r\n\t\t\t\t\t\tselectedTarget.discard(cardsToDiscard);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"xuebianmrfz_dam\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdam: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn event.getParent().name == \"xuebianmrfz\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addMark(\"xuebianmrfz\", trigger.num, false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 12,\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\ttarget: -1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txuebianmrfz2: {\r\n\t\t\tcharlotte: true,\r\n\t\t},\r\n\t\ttonghemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tderivation: [\"xinyingshimrfz\", \"new_xinbangmrfz\"],\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationColor: \"thunder\",\r\n\t\t\tunique: true,\r\n\t\t\tjuexingji: true,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"xuebianmrfz\") >= 2 || game.roundNumber > 2;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.addMark(\"xinyingshimrfz\", player.countMark(\"xuebianmrfz\"), false);\r\n\t\t\t\tplayer.removeSkill(\"xuebianmrfz\");\r\n\t\t\t\tplayer.addSkill(\"xinyingshimrfz\");\r\n\t\t\t\tplayer.addSkill(\"new_xinbangmrfz\");\r\n\t\t\t\tplayer.loseMaxHp();\r\n\t\t\t\tplayer.recoverTo(player.maxHp);\r\n\t\t\t\tplayer.awakenSkill(\"tonghemrfz\");\r\n\t\t\t},\r\n\t\t},\r\n\t\txinyingshimrfz: {\r\n\t\t\taudio: \"yingshimrfz\",\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\treturn game.hasPlayer(current => lib.skill.xinyingshimrfz.filterTarget(null, player, current));\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { target } = event;\r\n\r\n\t\t\t\tconst num = player.countMark(\"xinyingshimrfz\") + 1;\r\n\t\t\t\tconst max = target.countCards(\"h\");\r\n\t\t\t\tif (max > num) return player.discardPlayerCard(num, target, \"h\", true, \"visible\");\r\n\t\t\t\tif (num >= max) return player.discardPlayerCard(max, target, \"h\", true, \"visible\");\r\n\t\t\t\tgame.log(player, \"观看了\", target, \"的手牌\");\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tthreaten: 1.1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\ttarget: -1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txinbangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseDrawBegin2\",\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.num > 0 && !event.numFixed;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tplayer.storage.xinbangmrfz = [];\r\n\t\t\t\tconst num = get.copy(trigger.num);\r\n\t\t\t\tresult = await player\r\n\t\t\t\t\t.chooseTarget(\r\n\t\t\t\t\t\tget.prompt(\"xinbangmrfz\"),\r\n\t\t\t\t\t\t\"选择至多\" + get.translation(num) + \"名其他角色，其选择让你定向摸牌，然后你少摸等量的牌\",\r\n\t\t\t\t\t\t[1, num],\r\n\t\t\t\t\t\t(card, player, target) => {\r\n\t\t\t\t\t\t\treturn player !== target;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\tconst att = get.attitude(_status.event.player, target);\r\n\t\t\t\t\t\treturn att > 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tif (result && result.targets) {\r\n\t\t\t\t\tevent.targets = result.targets;\r\n\t\t\t\t\ttrigger.num -= result.targets.length;\r\n\r\n\t\t\t\t\t// step 2, 3, 4 loop (original event.goto(2))\r\n\t\t\t\t\tfor (let i = 0; i < event.targets.length; i++) {\r\n\t\t\t\t\t\tconst target = event.targets[i];\r\n\t\t\t\t\t\tconst att = get.attitude(target, player);\r\n\t\t\t\t\t\ttarget.addTempSkill(\"xinbangmrfz2\", {\r\n\t\t\t\t\t\t\tplayer: \"phaseUseEnd\",\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tresult = await target\r\n\t\t\t\t\t\t\t.chooseControl(\"basic\", \"trick\", \"equip\")\r\n\t\t\t\t\t\t\t.set(\"prompt\", \"【兴邦】：请让\" + get.translation(player) + \"摸一张指定类型牌，当此牌造成伤害时，你与其各摸一张牌\")\r\n\t\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\t\tif (att > 0) return [1, 2].randomGet();\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t// step 3\r\n\t\t\t\t\t\tconst card = get.cardPile2(c => {\r\n\t\t\t\t\t\t\treturn get.type(c, \"trick\") === result.control;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (card) {\r\n\t\t\t\t\t\t\tconst next = player.gain(card, \"gain2\");\r\n\t\t\t\t\t\t\tnext.gaintag = [\"xinbangmrfz\"];\r\n\t\t\t\t\t\t\tawait next;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tplayer.chat(\"牌堆中没有\" + get.translation(result.control) + \"牌了！\");\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 4\r\n\t\t\t\t\t\tconst cards = player.getCards(\"h\", c => {\r\n\t\t\t\t\t\t\treturn c.hasGaintag(\"xinbangmrfz\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tfor (const c of cards) {\r\n\t\t\t\t\t\t\tc.storage.xinbangmrfz = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 5\r\n\t\t\t\tif (trigger.num <= 0) {\r\n\t\t\t\t\tawait game.delay();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"xinbangmrfz_draw\", \"xinbangmrfz_lose\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\taudio: \"xinbangmrfz\",\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!event.cards || event.cards.length > 1) return false;\r\n\t\t\t\t\t\treturn event.card.storage && event.card.storage.xinbangmrfz == true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst result = await player\r\n\t\t\t\t\t\t\t.chooseTarget(\"【兴邦】:请选择一名其他角色，然后你与其各摸一张牌\", true, function (card, player, target) {\r\n\t\t\t\t\t\t\t\treturn target != player && target.hasSkill(\"xinbangmrfz2\");\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\treturn get.attitude(player, target) > 0;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\tresult.targets[0].draw();\r\n\t\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tlose: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseUseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\t\treturn card.hasGaintag(\"xinbangmrfz\");\r\n\t\t\t\t\t\t\t}) > 0\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeGaintag(\"xinbangmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txinbangmrfz2: {\r\n\t\t\tcharlotte: true,\r\n\t\t\tsilent: true,\r\n\t\t\tonremove: true,\r\n\t\t},\r\n\t\tnew_xinbangmrfz: {\r\n\t\t\taudio: \"xinbangmrfz\",\r\n\t\t\tfrequent: true,\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!player.isPhaseUsing()) return false;\r\n\t\t\t\tvar list = player.getStorage(\"xinbangmrfz2\");\r\n\t\t\t\tif (!list.includes(get.type2(event.card, player))) return true;\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (!player.storage.xinbangmrfz2) {\r\n\t\t\t\t\tplayer.addTempSkill(\"xinbangmrfz2\");\r\n\t\t\t\t\tplayer.storage.xinbangmrfz2 = [];\r\n\t\t\t\t}\r\n\t\t\t\tplayer.storage.xinbangmrfz2.add(get.type2(trigger.card, player));\r\n\t\t\t\tconst result = await player.draw().forResult();\r\n\r\n\t\t\t\tif (result.cards) {\r\n\t\t\t\t\tconst card = result.cards[0],\r\n\t\t\t\t\t\tcards = player.getCards(\"h\"),\r\n\t\t\t\t\t\tlist = [];\r\n\t\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\t\tif (i == card) continue;\r\n\t\t\t\t\t\tlist.add(get.suit(i, player));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!list.includes(get.suit(card, player))) player.draw();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\t//帕拉斯\r\n\t\tyingzhumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\tdirect: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.yingzhumrfz;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst next = player.chooseControl(\"准备\", \"判定\", \"摸牌\", \"出牌\", \"弃牌\", \"结束\", \"cancel2\").set(\"prompt\", get.prompt(\"yingzhumrfz\"));\r\n\t\t\t\tnext.set(\"prompt2\", \"你可以令自己在任意阶段结束后额外执行一个该阶段\");\r\n\t\t\t\tnext.set(\"ai\", function () {\r\n\t\t\t\t\tconst player = _status.event.player;\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tplayer.countCards(\"h\", \"sha\") > player.getCardUsable(\"sha\") &&\r\n\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn current != player && player.inRange(current) && get.attitude(player, current) < 0;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t)\r\n\t\t\t\t\t\treturn 3;\r\n\t\t\t\t\treturn 2;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tconst result = await next.forResult();\r\n\r\n\t\t\t\tif (result.control != \"cancel2\" && typeof result.index == \"number\") {\r\n\t\t\t\t\tvar list = [\r\n\t\t\t\t\t\t\"yingzhumrfz_Zhunbei\",\r\n\t\t\t\t\t\t\"yingzhumrfz_judge\",\r\n\t\t\t\t\t\t\"yingzhumrfz_draw\",\r\n\t\t\t\t\t\t\"yingzhumrfz_use\",\r\n\t\t\t\t\t\t\"yingzhumrfz_discard\",\r\n\t\t\t\t\t\t\"yingzhumrfz_jieshu\",\r\n\t\t\t\t\t];\r\n\t\t\t\t\tplayer.addTempSkill(list[result.index]);\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"yingzhumrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"yingzhumrfz_phase\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tphase: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet result;\r\n\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\tplayer.storage.yingzhumrfz = false;\r\n\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t.chooseTarget(\r\n\t\t\t\t\t\t\t\tget.prompt(\"yingzhumrfz\"),\r\n\t\t\t\t\t\t\t\t\"你可以选择一名其他角色，令其于任一阶段结束后额外执行一次此阶段\",\r\n\t\t\t\t\t\t\t\t(card, player, target) => {\r\n\t\t\t\t\t\t\t\t\treturn target !== player;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\t\t\tconst att = get.attitude(aiPlayer, target);\r\n\t\t\t\t\t\t\t\treturn att > 0;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t// step 1\r\n\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\tconst att = get.attitude(player, result.targets[0]);\r\n\t\t\t\t\t\t\tconst next = player.chooseControl(\"准备\", \"判定\", \"摸牌\", \"出牌\", \"弃牌\", \"结束\");\r\n\t\t\t\t\t\t\tnext.set(\"prompt\", \"【英祝】:请选择一个阶段，\" + get.translation(result.targets[0]) + \"于此阶段结束后额外执行一次此阶段\");\r\n\t\t\t\t\t\t\tnext.set(\"ai\", () => {\r\n\t\t\t\t\t\t\t\treturn 2;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tresult = await next.forResult();\r\n\r\n\t\t\t\t\t\t\tplayer.storage.yingzhumrfz = true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 2\r\n\t\t\t\t\t\tconst list = [\r\n\t\t\t\t\t\t\t\"yingzhumrfz_Zhunbei\",\r\n\t\t\t\t\t\t\t\"yingzhumrfz_judge\",\r\n\t\t\t\t\t\t\t\"yingzhumrfz_draw\",\r\n\t\t\t\t\t\t\t\"yingzhumrfz_use\",\r\n\t\t\t\t\t\t\t\"yingzhumrfz_discard\",\r\n\t\t\t\t\t\t\t\"yingzhumrfz_jieshu\",\r\n\t\t\t\t\t\t];\r\n\t\t\t\t\t\tif (result && result.index) {\r\n\t\t\t\t\t\t\tevent.target.addSkill(list[result.index]);\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"yingzhumrfz\", event.target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\texpose: 0.1,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tZhunbei: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseZhunbeiAfter\" },\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"于准备阶段结束后额外执行一个准备阶段\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tevent.next.remove(player.phaseZhunbei());\r\n\t\t\t\t\t\ttrigger.next.push(player.phaseZhunbei());\r\n\t\t\t\t\t\tplayer.removeSkill(\"yingzhumrfz_Zhunbei\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tjudge: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"于判定阶段结束后额外执行一个判定阶段\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: { player: \"phaseJudgeAfter\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tevent.next.remove(player.phaseJudge());\r\n\t\t\t\t\t\ttrigger.next.push(player.phaseJudge());\r\n\t\t\t\t\t\tplayer.removeSkill(\"yingzhumrfz_judge\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"于摸牌阶段结束后额外执行一个摸牌阶段\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: { player: \"phaseDrawAfter\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tevent.next.remove(player.phaseDraw());\r\n\t\t\t\t\t\ttrigger.next.push(player.phaseDraw());\r\n\t\t\t\t\t\tplayer.removeSkill(\"yingzhumrfz_draw\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tuse: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"于出牌阶段结束后额外执行一个出牌阶段\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: { player: \"phaseUseAfter\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tevent.next.remove(player.phaseUse());\r\n\t\t\t\t\t\ttrigger.next.push(player.phaseUse());\r\n\t\t\t\t\t\tplayer.removeSkill(\"yingzhumrfz_use\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdiscard: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"于弃牌阶段结束后额外执行一个弃牌阶段\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: { player: \"phaseDiscardAfter\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tevent.next.remove(player.phaseDiscard());\r\n\t\t\t\t\t\ttrigger.next.push(player.phaseDiscard());\r\n\t\t\t\t\t\tplayer.removeSkill(\"yingzhumrfz_discard\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tjieshu: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"于结束阶段结束后额外执行一个结束阶段\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: { player: \"phaseJieshuAfter\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tevent.next.remove(player.phaseJieshu());\r\n\t\t\t\t\t\ttrigger.next.push(player.phaseJieshu());\r\n\t\t\t\t\t\tplayer.removeSkill(\"yingzhumrfz_jieshu\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tyingdanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tsilent: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: [\"phaseZhunbeiAfter\", \"phaseJudgeAfter\", \"phaseDrawAfter\", \"phaseUseAfter\", \"phaseDiscardAfter\", \"phaseJieshuAfter\"],\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.player.addMark(\"yingdanmrfz\", 1, false);\r\n\t\t\t},\r\n\t\t\tgroup: \"yingdanmrfz_draw\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst target = trigger.player;\r\n\t\t\t\t\t\tlet next;\r\n\t\t\t\t\t\tif (target.countMark(\"yingdanmrfz\") > 6) {\r\n\t\t\t\t\t\t\tnext = player.chooseBool(\r\n\t\t\t\t\t\t\t\t\"【英诞】:是否令\" +\r\n\t\t\t\t\t\t\t\t\t(target == player ? \"自己\" : get.translation(target)) +\r\n\t\t\t\t\t\t\t\t\t\"摸\" +\r\n\t\t\t\t\t\t\t\t\t(target.countMark(\"yingdanmrfz\") - 6) +\r\n\t\t\t\t\t\t\t\t\t\"张牌？\"\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tnext.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\tvar target = trigger.player;\r\n\t\t\t\t\t\t\t\treturn get.attitude(player, target) > 0;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (!next) return;\r\n\t\t\t\t\t\tconst result = await next.forResult();\r\n\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\ttarget.draw(target.countMark(\"yingdanmrfz\") - 6);\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"yingdanmrfz\", target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttarget.removeMark(\"yingdanmrfz\", target.countMark(\"yingdanmrfz\"), false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t},\r\n\t\t},\r\n\t\tyingfenmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.storage.yingfenmrfz) return false;\r\n\t\t\t\treturn event.card.name == \"tao\";\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseTarget(get.prompt(\"yingfenmrfz\"), \"你可以令一名其他角色恢复一点体力\", function (card, player, target) {\r\n\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\treturn get.attitude(player, target) > 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (result.targets) {\r\n\t\t\t\t\tplayer.storage.yingfenmrfz = true;\r\n\t\t\t\t\tresult.targets[0].recover();\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"yingfenmrfz\", result.targets[0]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"yingfenmrfz_clear\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.storage.yingfenmrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.yingfenmrfz = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//瑕光\r\n\t\trencimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseEnd\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.player == player || event.player.getHistory(\"skipped\").length == 0) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tlib.filter.targetEnabled({ name: \"sha\" }, player, event.player) &&\r\n\t\t\t\t\t(player.hasSha() || (_status.connectMode && player.countCards(\"h\") > 0))\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.addTempSkill(\"rencimrfz_dam\", \"useCardAfter\");\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseToUse(\r\n\t\t\t\t\t\tfunction (card, player, event) {\r\n\t\t\t\t\t\t\tif (get.name(card) != \"sha\") return false;\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\treturn lib.filter.filterCard.apply(this, arguments);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\"【仁慈】:是否对\" + get.translation(trigger.player) + \"使用一张杀？\"\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"logSkill\", \"rencimrfz\")\r\n\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\tif (target != _status.event.sourcex && !ui.selected.targets.includes(_status.event.sourcex)) return false;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn lib.filter.targetEnabled.apply(this, arguments);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"sourcex\", trigger.player);\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdam: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tsource: \"damageBegin\",\r\n\t\t\t\t\t\tplayer: \"shaMiss\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (trigger.name == \"damage\") trigger.num++;\r\n\t\t\t\t\t\tplayer.removeSkill(\"rencimrfz_dam\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thuiguangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.hasMark(\"huiguangmrfz\") && player.countMark(\"huiguangmrfz\") <= 6;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tconst num = player.countMark(\"huiguangmrfz\") - 1;\r\n\t\t\t\tconst list = [\"准备\", \"判定\", \"摸牌\", \"出牌\", \"弃牌\", \"结束\"];\r\n\t\t\t\tresult = await player\r\n\t\t\t\t\t.chooseTarget(\"【辉光】:你可以令一名其他角色跳过下个\" + list[num] + \"阶段\", (card, player, target) => {\r\n\t\t\t\t\t\treturn target !== player && !target.hasSkill(\"huiguangmrfz_skip\");\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\tconst att = get.attitude(target, aiPlayer);\r\n\t\t\t\t\t\tconst markNum = aiPlayer.countMark(\"huiguangmrfz\");\r\n\t\t\t\t\t\tif (markNum === 2 || markNum === 5) return att > 0;\r\n\t\t\t\t\t\treturn att < 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tif (result.targets) {\r\n\t\t\t\t\tconst target = result.targets[0];\r\n\t\t\t\t\tconst markNum = player.countMark(\"huiguangmrfz\") - 1;\r\n\t\t\t\t\ttarget.addSkill(\"huiguangmrfz_skip\");\r\n\t\t\t\t\ttarget.addMark(\"huiguangmrfz_skip\", markNum + 1, false);\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"huiguangmrfz\", target);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 2\r\n\t\t\t\tplayer.removeMark(\"huiguangmrfz\", player.countMark(\"huiguangmrfz\"), false);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t},\r\n\t\t\tgroup: [\"huiguangmrfz_mark\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tskip: {\r\n\t\t\t\t\tmarkimage: \"extension/WhichWay/image/skill/sleepmrfz.png\",\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tname: \"睡眠\",\r\n\t\t\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\t\t\tvar phase = [\"phaseZhunbei\", \"phaseJudge\", \"phaseDraw\", \"phaseUse\", \"phaseDiscard\", \"phaseJieshu\"];\r\n\t\t\t\t\t\t\tvar num = player.countMark(\"huiguangmrfz_skip\") - 1;\r\n\t\t\t\t\t\t\treturn \"跳过下个\" + get.tranPhase(phase[num]);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst phase = [\"phaseZhunbei\", \"phaseJudge\", \"phaseDraw\", \"phaseUse\", \"phaseDiscard\", \"phaseJieshu\"];\r\n\t\t\t\t\t\tconst num = player.countMark(\"huiguangmrfz_skip\") - 1;\r\n\t\t\t\t\t\tplayer.skip(phase[num]);\r\n\t\t\t\t\t\tgame.log(player, \"跳过了\", get.tranPhase(phase[num]));\r\n\t\t\t\t\t\tplayer.removeMark(\"huiguangmrfz_skip\", player.countMark(\"huiguangmrfz_skip\"), false);\r\n\t\t\t\t\t\tplayer.removeSkill(\"huiguangmrfz_skip\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tmark: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCardAfter\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn _status.currentPhase == player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addMark(\"huiguangmrfz\", 1, false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tjiandunmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: [\"chooseToRespond\", \"chooseToUse\"],\r\n\t\t\thiddenCard: function (player, name) {\r\n\t\t\t\tif (get.type(name) != \"basic\") return false;\r\n\t\t\t\treturn player.hasCard(function (card) {\r\n\t\t\t\t\treturn get.type2(card) == \"trick\";\r\n\t\t\t\t}, \"hs\");\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (\r\n\t\t\t\t\t!player.hasCard(function (card) {\r\n\t\t\t\t\t\treturn get.type2(card) == \"trick\";\r\n\t\t\t\t\t}, \"hs\")\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\tfor (var name of lib.inpile) {\r\n\t\t\t\t\tif (get.type(name) != \"basic\") continue;\r\n\t\t\t\t\tif (event.filterCard({ name: name }, player, event)) return true;\r\n\t\t\t\t\tif (name == \"sha\") {\r\n\t\t\t\t\t\tfor (var nature of lib.inpile_nature) {\r\n\t\t\t\t\t\t\tif (event.filterCard({ name: \"sha\", nature: nature }, player, event)) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tchooseButton: {\r\n\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\tvar list = [];\r\n\t\t\t\t\tfor (var name of lib.inpile) {\r\n\t\t\t\t\t\tif (get.type(name) != \"basic\") continue;\r\n\t\t\t\t\t\tif (event.filterCard({ name: name }, player, event)) {\r\n\t\t\t\t\t\t\tlist.push([\"基本\", \"\", name]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (name == \"sha\") {\r\n\t\t\t\t\t\t\tfor (var nature of lib.inpile_nature) {\r\n\t\t\t\t\t\t\t\tif (event.filterCard({ name: name, nature: nature }, player, event)) list.push([\"基本\", \"\", \"sha\", nature]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn ui.create.dialog(\"剑盾\", [list, \"vcard\"], \"hidden\");\r\n\t\t\t\t},\r\n\t\t\t\tcheck: function (button) {\r\n\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\tvar card = {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tname: button.link[2],\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tnature: button.link[3],\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t_status.event.getParent().type != \"phase\" ||\r\n\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn !!player.canUse(card, current) && get.effect(current, card, player, player) > 0;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tswitch (button.link[2]) {\r\n\t\t\t\t\t\t\tcase \"tao\":\r\n\t\t\t\t\t\t\tcase \"shan\":\r\n\t\t\t\t\t\t\t\treturn 5;\r\n\t\t\t\t\t\t\tcase \"jiu\": {\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\tplayer.countCards(\"hs\", {\r\n\t\t\t\t\t\t\t\t\t\ttype: \"trick\",\r\n\t\t\t\t\t\t\t\t\t}) > 2\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\treturn 3;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcase \"sha\":\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tif (button.link[3] == \"fire\") return 2.95;\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\telse if (button.link[3] == \"thunder\" || button.link[3] == \"ice\") return 2.92;\r\n\t\t\t\t\t\t\t\telse return 2.9;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t},\r\n\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\taudio: \"jiandunmrfz\",\r\n\t\t\t\t\t\tfilterCard: function (card, player, target) {\r\n\t\t\t\t\t\t\treturn get.type2(card) == \"trick\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcomplexCard: true,\r\n\t\t\t\t\t\tselectCard: 1,\r\n\t\t\t\t\t\tcheck: function (card, player, target) {\r\n\t\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tviewAs: { name: links[0][2], nature: links[0][3] },\r\n\t\t\t\t\t\tposition: \"hes\",\r\n\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\treturn \"你可以将一张锦囊牌当任意基本牌使用或打出\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 3.1,\r\n\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\tif (tag == \"fireAttack\") return true;\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t!player.hasCard(function (card) {\r\n\t\t\t\t\t\t\treturn get.type2(card) == \"trick\";\r\n\t\t\t\t\t\t}, \"hes\")\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t\trespondSha: true,\r\n\t\t\t\trespondShan: true,\r\n\t\t\t\tfireAttack: true,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//新星熊\r\n\t\txinboremrfz: {\r\n\t\t\taudio: \"banruomrfz\",\r\n\t\t\tmark: false,\r\n\t\t\tmarkimage: \"extension/WhichWay/image/skill/xinboremrfz.png\",\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (player) {\r\n\t\t\t\t\tvar playerhas = game.findPlayer(function (current) {\r\n\t\t\t\t\t\treturn current.hasSkill(\"xinboremrfz\");\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn get.translation(playerhas) + \"正在保护你\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"xinboremrfz_choose\", \"xinboremrfz_card\", \"xinboremrfz_betarget\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tbetarget: {\r\n\t\t\t\t\taudio: \"banruomrfz\",\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"useCardToPlayer\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (event.targets?.length > 1 || get.type(event.card) == \"equip\") return false;\r\n\t\t\t\t\t\treturn event.target.hasMark(\"xinboremrfz\") && player.getHandcardLimit() > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: function (event, player) {\r\n\t\t\t\t\t\treturn \"【般若】：是否令\" + get.translation(event.card) + \"的目标由\" + get.translation(event.target) + \"改为你？\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\tvar att = get.attitude(event.target, player);\r\n\t\t\t\t\t\tif ((event.card.name == \"wuzhong\" || event.card.name == \"dongzhuxianji\" || event.card.name == \"zenbing\") && att < 0)\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\treturn att > 0 && get.tag(event.card, \"damage\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst target = trigger.target;\r\n\t\t\t\t\t\ttrigger.targets.remove(target);\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttrigger.getParent().triggeredTargets1.remove(target);\r\n\t\t\t\t\t\ttrigger.untrigger();\r\n\t\t\t\t\t\tgame.delayx();\r\n\r\n\t\t\t\t\t\ttrigger.targets.push(player);\r\n\t\t\t\t\t\ttrigger.player.line(player, \"fire\");\r\n\t\t\t\t\t\tgame.log(trigger.card, \"的目标被改为\", player);\r\n\t\t\t\t\t\tplayer.addMark(\"xinboremrfz_losehdlimit\", 1, false);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\texpose: 0.1,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tchoose: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst result = await player\r\n\t\t\t\t\t\t\t.chooseTarget(true, \"【般若】：请选择一名其他角色，令其获得‘般若’标记\", function (card, player, target) {\r\n\t\t\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"ai\", target => get.attitude(player, target) > 0)\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\tconst target = result.targets[0];\r\n\t\t\t\t\t\t\ttarget.addMark(\"xinboremrfz\");\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"xinboremrfz\", target);\r\n\t\t\t\t\t\t\tplayer.disableEquip(\"equip2\");\r\n\t\t\t\t\t\t\ttarget.disableEquip(\"equip2\");\r\n\t\t\t\t\t\t\tplayer.addSkill(\"xinboremrfz_handlit\");\r\n\t\t\t\t\t\t\ttarget.addSkill(\"xinboremrfz_handlit\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tplayer.addSkill(\"xinboremrfz_losehdlimit\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"xinboremrfz_choose\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\texpose: 0.1,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tcard: {\r\n\t\t\t\t\taudio: \"xinboremrfz\",\r\n\t\t\t\t\tenable: \"chooseToUse\",\r\n\t\t\t\t\thiddenCard: function (player, name) {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tplayer.hasSkill(\"xinboremrfz_usedwuxie\") &&\r\n\t\t\t\t\t\t\tplayer.hasSkill(\"xinboremrfz_usedsha\") &&\r\n\t\t\t\t\t\t\tplayer.hasSkill(\"xinboremrfz_usedshan\")\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\tif (name == \"wuxie\" && player.hasSkill(\"xinboremrfz_usedwuxie\")) return false;\r\n\t\t\t\t\t\tif (name == \"sha\" && player.hasSkill(\"xinboremrfz_usedsha\")) return false;\r\n\t\t\t\t\t\tif (name == \"shan\" && player.hasSkill(\"xinboremrfz_usedshan\")) return false;\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t(name == \"wuxie\" || name == \"sha\" || name == \"shan\") && (player.getHandcardLimit() > 0 || player.countDisabledSlot() < 5)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tplayer.hasSkill(\"xinboremrfz_usedwuxie\") &&\r\n\t\t\t\t\t\t\tplayer.hasSkill(\"xinboremrfz_usedsha\") &&\r\n\t\t\t\t\t\t\tplayer.hasSkill(\"xinboremrfz_usedshan\")\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\treturn player.getHandcardLimit() > 0 || player.countDisabledSlot() < 5;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tchooseButton: {\r\n\t\t\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\t\t\tvar vcards = [];\r\n\t\t\t\t\t\t\tfor (var name of [\"sha\", \"shan\", \"wuxie\"]) {\r\n\t\t\t\t\t\t\t\tconst card = { name: name };\r\n\t\t\t\t\t\t\t\tif (name == \"wuxie\" && player.hasSkill(\"xinboremrfz_usedwuxie\")) continue;\r\n\t\t\t\t\t\t\t\tif (name == \"shan\" && player.hasSkill(\"xinboremrfz_usedshan\")) continue;\r\n\t\t\t\t\t\t\t\tif (name == \"sha\" && player.hasSkill(\"xinboremrfz_usedsha\")) continue;\r\n\t\t\t\t\t\t\t\tif (event.filterCard(card, player, event)) {\r\n\t\t\t\t\t\t\t\t\t//QQQ\r\n\t\t\t\t\t\t\t\t\tif (name == \"sha\") {\r\n\t\t\t\t\t\t\t\t\t\tvcards.push([\"基本\", \"\", \"sha\"]);\r\n\t\t\t\t\t\t\t\t\t\tfor (var j of lib.inpile_nature) vcards.push([\"基本\", \"\", \"sha\", j]);\r\n\t\t\t\t\t\t\t\t\t} else if (get.type(name) == \"trick\") {\r\n\t\t\t\t\t\t\t\t\t\tvcards.push([\"锦囊\", \"\", name]);\r\n\t\t\t\t\t\t\t\t\t} else if (get.type(name) == \"basic\") {\r\n\t\t\t\t\t\t\t\t\t\tvcards.push([\"基本\", \"\", name]);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar dialog = ui.create.dialog(\"般若\", [vcards, \"vcard\"], \"hidden\");\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tdialog.direct = true;\r\n\t\t\t\t\t\t\treturn dialog;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfilter: function (button, player) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\treturn _status.event.getParent().filterCard({ name: button.link[2] }, player, _status.event.getParent());\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tfilterCard: () => false,\r\n\t\t\t\t\t\t\t\tselectCard: -1,\r\n\t\t\t\t\t\t\t\tviewAs: {\r\n\t\t\t\t\t\t\t\t\tname: links[0][2],\r\n\t\t\t\t\t\t\t\t\tnature: links[0][3],\r\n\t\t\t\t\t\t\t\t\tisCard: true,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t\t\t\tasync precontent(event, trigger, player) {\r\n\t\t\t\t\t\t\t\t\tconst card = event.result?.card?.name;\r\n\t\t\t\t\t\t\t\t\tif (card == \"sha\") {\r\n\t\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\t\tevent.getParent().addCount = false;\r\n\t\t\t\t\t\t\t\t\t\tplayer.addSkill(\"xinboremrfz_usedsha\");\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (card == \"shan\") player.addSkill(\"xinboremrfz_usedshan\");\r\n\t\t\t\t\t\t\t\t\tif (card == \"wuxie\") player.addSkill(\"xinboremrfz_usedwuxie\");\r\n\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\tplayer.logSkill(\"xinboremrfz\");\r\n\r\n\t\t\t\t\t\t\t\t\tconst list = [];\r\n\t\t\t\t\t\t\t\t\tif (player.getHandcardLimit() > 0) list.push(\"手牌上限-1\");\r\n\t\t\t\t\t\t\t\t\tif (player.countDisabledSlot() < 5) list.push(\"废除一个装备栏\");\r\n\t\t\t\t\t\t\t\t\tif (list.length > 1) {\r\n\t\t\t\t\t\t\t\t\t\tconst result = await player\r\n\t\t\t\t\t\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t\t\t\t\t\t.set(\"prompt\", \"【般若】：请选择一项\")\r\n\t\t\t\t\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\t\t\t\tif (result.index == 0) player.addMark(\"xinboremrfz_losehdlimit\", 1, false);\r\n\t\t\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\t\t\tplayer.chooseToDisable().ai = function (event, player, list) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (list.includes(\"equip5\")) return \"equip5\";\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn list.randomGet();\r\n\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tif (player.getHandcardLimit() == 0)\r\n\t\t\t\t\t\t\t\t\t\t\tplayer.chooseToDisable().ai = function (event, player, list) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (list.includes(\"equip5\")) return \"equip5\";\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn list.randomGet();\r\n\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\telse player.addMark(\"xinboremrfz_losehdlimit\", 1, false);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\t\t\treturn \"【般若】：视为使用一张【\" + get.translation(links[0][2]) + \"】\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\torder: function (item, player) {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tvar event = _status.event;\r\n\t\t\t\t\t\t\tif (event.filterCard({ name: \"sha\" }, player, event)) {\r\n\t\t\t\t\t\t\t\treturn 4;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\trespondSha: true,\r\n\t\t\t\t\t\trespondShan: true,\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tplayer.hasSkill(\"xinboremrfz_usedwuxie\") &&\r\n\t\t\t\t\t\t\t\tplayer.hasSkill(\"xinboremrfz_usedsha\") &&\r\n\t\t\t\t\t\t\t\tplayer.hasSkill(\"xinboremrfz_usedshan\")\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\tif (arg != \"use\") return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tlosehdlimit: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn num - player.countMark(\"xinboremrfz_losehdlimit\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tusedshan: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseZhunbeiBegin\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeSkill(\"xinboremrfz_usedshan\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tusedwuxie: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseZhunbeiBegin\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeSkill(\"xinboremrfz_usedwuxie\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tusedsha: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseZhunbeiBegin\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeSkill(\"xinboremrfz_usedsha\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\thandlit: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn num + 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txinyizhongmrfz: {\r\n\t\t\taudio: \"yizhongmrfz\",\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.hp >= player.getHandcardLimit();\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst num = 5 - player.countDisabledSlot() - 1;\r\n\t\t\t\tplayer.addMark(\"xinyizhongmrfz\", num, false);\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\treturn num + player.countMark(\"xinyizhongmrfz\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: \"xinyizhongmrfz_lose\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tlose: {\r\n\t\t\t\t\taudio: \"yizhongmrfz\",\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.source != undefined && event.num > 0 && event.source.hasMark(\"xinboremrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeSkill(\"xinboremrfz\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"xinyizhongmrfz_lose\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//新缪尔赛思\r\n\t\tyuanliumrfz: {\r\n\t\t\taudio: \"kaiyuanmrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tlocked: false,\r\n\t\t\tmarkimage: \"extension/WhichWay/image/skill/miumiuliuxingmrfz.png\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"流形\",\r\n\t\t\t\tcontent: \"#/3\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tresult = await player\r\n\t\t\t\t\t.chooseControl()\r\n\t\t\t\t\t.set(\"choiceList\", [\"令一名角色摸两张牌\", \"获得一个‘流形’\"])\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\treturn [0, 1].randomGet();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tif (result.index === 0) {\r\n\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t.chooseTarget(true, \"【源流】：令一名角色摸两张牌\")\r\n\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\treturn get.attitude(player, target) > 2;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t// step 2\r\n\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\tconst target = result.targets[0];\r\n\t\t\t\t\t\tawait target.draw(2);\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"kaiyuanmrfz\");\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"kaiyuanmrfz\");\r\n\t\t\t\t\tplayer.addMark(\"yuanliumrfz\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\treturn num + player.countMark(\"yuanliumrfz\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: \"yuanliumrfz_get\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tget: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"phaseUseEnd\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tplayer.getHistory(\"useCard\", function (evt) {\r\n\t\t\t\t\t\t\t\treturn evt.getParent(\"phaseUse\") == event;\r\n\t\t\t\t\t\t\t}).length > 0 && player.countMark(\"yuanliumrfz\") < 3\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst list = [],\r\n\t\t\t\t\t\t\tmark = player.countMark(\"yuanliumrfz\");\r\n\t\t\t\t\t\tplayer.getHistory(\"useCard\", function (evt) {\r\n\t\t\t\t\t\t\tif (evt.getParent(\"phaseUse\") == trigger) list.add(get.type2(evt.card));\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (mark + list.length > 3) player.addMark(\"yuanliumrfz\", 3 - mark);\r\n\t\t\t\t\t\telse player.addMark(\"yuanliumrfz\", list.length);\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"yuanliumrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txinjingshuimrfz: {\r\n\t\t\taudio: \"jingshuimrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t},\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tconst evt = event.getParent(\"phaseUse\"),\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\ttype = get.type(event.card);\r\n\t\t\t\tif (type != \"basic\" && type != \"trick\") return false;\r\n\t\t\t\tif (!evt || evt.player != player) return false;\r\n\t\t\t\tif (!player.hasMark(\"yuanliumrfz\")) return false;\r\n\t\t\t\treturn event.targets && event.targets.length == 1;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"是否移除所有‘源流’并令【\" + get.translation(event.card.name) + \"】额外结算\" + player.countMark(\"yuanliumrfz\") + \"次？\";\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn !get.tag(event.card, \"norepeat\");\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar num = player.countMark(\"yuanliumrfz\");\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\ttrigger.getParent().effectCount += num;\r\n\t\t\t\tplayer.removeMark(\"yuanliumrfz\", 1145141919810, false);\r\n\t\t\t},\r\n\t\t},\r\n\t\tshuilingmrfz: {\r\n\t\t\taudio: \"liuxingmrfz\",\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"damageBegin3\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.hasSkill(\"shuilingmrfz_ban\")) return false;\r\n\t\t\t\treturn !event.nature && player.countCards(\"h\") >= player.hp;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.num--;\r\n\t\t\t\tplayer.addTempSkill(\"shuilingmrfz_ban\", \"phaseEnd\");\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"本回合已发动过【水灵】\",\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//新归溟幽灵鲨\r\n\t\txinyongwomrfz: {\r\n\t\t\taudio: \"yongwomrfz\",\r\n\t\t\tzhuanhuanji: true,\r\n\t\t\tlocked: false,\r\n\t\t\tmark: true,\r\n\t\t\tmarktext: \"☯\",\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (storage, player, skill) {\r\n\t\t\t\t\tif (player.storage.xinyongwomrfz) return \"阳：当你进入濒死状态时，你可以回复至一点体力\";\r\n\t\t\t\t\treturn \"阴：当你武将牌从正面朝上至背面朝上时，你可以摸两张牌，然后选择一项：1.弃置你攻击范围内一名其他角色区域内各一张牌；2.对你攻击范围内的一名其他角色造成一点伤害\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.xinyongwomrfz = true;\r\n\t\t\t},\r\n\t\t\ttrigger: { player: \"dying\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.storage.xinyongwomrfz;\r\n\t\t\t},\r\n\t\t\tprompt: \"【拥我】：是否将体力回复至1点\",\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.recoverTo(1);\r\n\t\t\t\tplayer.changeZhuanhuanji(\"xinyongwomrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: \"xinyongwomrfz_ying\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\t//阴\r\n\t\t\t\tying: {\r\n\t\t\t\t\taudio: \"xinyongwomrfz\",\r\n\t\t\t\t\ttrigger: { player: \"turnOverAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.isTurnedOver() && !player.storage.xinyongwomrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: \"【拥我】：你可以摸两张牌，然后选择一项：1.弃置你攻击范围内一名其他角色区域内各一张牌；2.对你攻击范围内的一名其他角色造成一点伤害。\",\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn current != player && get.attitude(player, current) < 0;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet result;\r\n\t\t\t\t\t\tlet choice = 0;\r\n\t\t\t\t\t\tlet max = 0;\r\n\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\tfor (let i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\t\t\tconst target = game.players[i];\r\n\t\t\t\t\t\t\tlet tmp1 = 0;\r\n\t\t\t\t\t\t\tif (target === player) continue;\r\n\t\t\t\t\t\t\tif (!player.inRange(target)) continue;\r\n\t\t\t\t\t\t\tif (get.attitude(player, target) > 0) continue;\r\n\t\t\t\t\t\t\tif (target.countCards(\"e\") > 0) tmp1++;\r\n\t\t\t\t\t\t\tif (target.countCards(\"h\") > 0) tmp1++;\r\n\t\t\t\t\t\t\tif (target.countCards(\"j\") > 0) tmp1--;\r\n\t\t\t\t\t\t\tif (tmp1 > max) max = tmp1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\t\t\treturn current !== player && get.attitude(player, current) < 0 && current.hp <= 1;\r\n\t\t\t\t\t\t\t}) ||\r\n\t\t\t\t\t\t\tmax < 2\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\tchoice = 1;\r\n\r\n\t\t\t\t\t\tawait player.draw(2);\r\n\r\n\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t.chooseControl()\r\n\t\t\t\t\t\t\t.set(\"choiceList\", [\"弃置你攻击范围内一名其他角色区域内各一张牌\", \"对你攻击范围内的一名其他角色造成一点伤害\"])\r\n\t\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\t\treturn choice;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t// step 1\r\n\t\t\t\t\t\tconst index = result.index;\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\t\t\treturn current !== player && player.inRange(current);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t\t.chooseTarget(\"【拥我】:请选择一名其他角色\", true, (rd, player, target) => {\r\n\t\t\t\t\t\t\t\t\treturn target !== player && player.inRange(target);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\t\t\t\tconst att = get.attitude(aiPlayer, target);\r\n\t\t\t\t\t\t\t\t\tif (choice === 0) {\r\n\t\t\t\t\t\t\t\t\t\tif (target.countCards(\"e\") > 0) return att < 0 && target.countCards(\"e\") > 0;\r\n\t\t\t\t\t\t\t\t\t\telse return att < 0;\r\n\t\t\t\t\t\t\t\t\t} else return get.damageEffect(target, aiPlayer, aiPlayer) > 0;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 2\r\n\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\tconst target = result.targets[0];\r\n\t\t\t\t\t\t\tif (index === 0) {\r\n\t\t\t\t\t\t\t\tlet num = 0;\r\n\t\t\t\t\t\t\t\tif (target.countCards(\"h\")) num++;\r\n\t\t\t\t\t\t\t\tif (target.countCards(\"e\")) num++;\r\n\t\t\t\t\t\t\t\tif (target.countCards(\"j\")) num++;\r\n\t\t\t\t\t\t\t\tif (num) {\r\n\t\t\t\t\t\t\t\t\tawait player.discardPlayerCard(target, num, \"hej\", true).set(\"filterButton\", button => {\r\n\t\t\t\t\t\t\t\t\t\tfor (let i = 0; i < ui.selected.buttons.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\t\t\tif (get.position(button.link) === get.position(ui.selected.buttons[i].link)) return false;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tawait target.damage(\"player\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"yongwomrfz\", target);\r\n\t\t\t\t\t\t\tplayer.changeZhuanhuanji(\"xinyongwomrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tdouzhengmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"【斗争】：是否失去所有体力并视为对\" + get.translation(event.player) + \"使用一张【杀】？\";\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.player != player;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (get.attitude(player, event.player) > 0) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\treturn card.name == \"tao\" || card.name == \"jiu\";\r\n\t\t\t\t\t}) > 0 || player.storage.xinyongwomrfz == true\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.loseHp(player.hp);\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.useCard({ name: \"sha\", isCard: true }, false, trigger.player);\r\n\t\t\t\tplayer.turnOver();\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t},\r\n\t\t},\r\n\t\tshensuimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"loseHpEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.num > 1 && player.hujia < 1;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.changeHujia(trigger.num);\r\n\t\t\t},\r\n\t\t\tgroup: \"shensuimrfz_change\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tchange: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn !player.storage.xinyongwomrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.changeZhuanhuanji(\"xinyongwomrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//早露\r\n\t\tzhongxiemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.card.name != \"sha\" || typeof get.number(event.card) != \"number\") return false;\r\n\t\t\t\treturn event.target.countCards(\"h\") <= Number(get.number(event.card));\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\ttrigger.getParent().directHit.add(trigger.target);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\tif (tag == \"directHit_ai\") {\r\n\t\t\t\t\t\tif (arg.card.name == \"sha\" && typeof get.number(arg.card) == \"number\")\r\n\t\t\t\t\t\t\treturn arg.card.name == \"sha\" && arg.target.countCards(\"h\") <= Number(get.number(arg.card));\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tattackRange: function (player, num) {\r\n\t\t\t\t\treturn (num += 2);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhongxiemrfz_damage\", \"zhongxiemrfz_wushi\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\taudio: \"zhongxiemrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { source: \"damageBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.hujia > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num += trigger.player.hujia;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\twushi: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event) {\r\n\t\t\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tlogTarget: \"target\",\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.target.addTempSkill(\"qinggang2\");\r\n\t\t\t\t\t\ttrigger.target.storage.qinggang2.add(trigger.card);\r\n\t\t\t\t\t\ttrigger.target.markSkill(\"qinggang2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tunequip_ai: true,\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t\t\tif (arg && arg.name == \"sha\") return true;\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\trusuimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageBegin2\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar num = 0,\r\n\t\t\t\t\ttarget = event.player;\r\n\t\t\t\tif (!event.card) return false;\r\n\t\t\t\tif (target.countCards(\"h\") >= target.hp) num++;\r\n\t\t\t\tif (target.countCards(\"e\") > 0) num++;\r\n\t\t\t\tif (target.getDamagedHp() <= target.hp) num++;\r\n\t\t\t\treturn event.player != player && event.card.name == \"sha\" && num != 0;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.player) < 0;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\tvar num = 0,\r\n\t\t\t\t\ttarget = event.player;\r\n\t\t\t\tif (target.countCards(\"h\") >= target.hp) num++;\r\n\t\t\t\tif (target.countCards(\"e\") > 0) num++;\r\n\t\t\t\tif (target.getDamagedHp() <= target.hp) num++;\r\n\t\t\t\tif (num < 3) return \"【入髓】：是否令\" + get.translation(target) + \"弃置\" + num + \"张牌\";\r\n\t\t\t\telse return \"【入髓】：是否令\" + get.translation(target) + \"弃置\" + num + \"张牌并令此杀伤害+1\";\r\n\t\t\t},\r\n\t\t\tprompt2: false,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet num = 0,\r\n\t\t\t\t\ttarget = trigger.player;\r\n\t\t\t\tif (target.countCards(\"h\") >= target.hp) num++;\r\n\t\t\t\tif (target.countCards(\"e\") > 0) num++;\r\n\t\t\t\tif (target.getDamagedHp() <= target.hp) num++;\r\n\t\t\t\ttarget.chooseToDiscard(\"he\", true, \"【入髓】：请弃置\" + num + \"张牌\", num);\r\n\t\t\t\tif (num == 3) trigger.num++;\r\n\t\t\t},\r\n\t\t},\r\n\t\t//琳琅诗怀雅\r\n\t\tzhijinmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\taiOrder: function (player, card, num) {\r\n\t\t\t\t\tif (typeof card == \"object\" && player.isPhaseUsing()) {\r\n\t\t\t\t\t\tvar evt = lib.skill.zhijinmrfz.getLastUsed(player);\r\n\t\t\t\t\t\tif (evt && evt.card && get.suit(evt.card) && get.suit(evt.card) == get.suit(card)) {\r\n\t\t\t\t\t\t\treturn num + 10;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmarktext: \"钱\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"钱\",\r\n\t\t\t\tcontent: \"共有#个钱\",\r\n\t\t\t},\r\n\t\t\taudio: 4,\r\n\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\tforced: true,\r\n\t\t\tgetLastUsed: function (player, event) {\r\n\t\t\t\tvar history = player.getAllHistory(\"useCard\");\r\n\t\t\t\tvar index;\r\n\t\t\t\tif (event) index = history.indexOf(event) - 1;\r\n\t\t\t\telse index = history.length - 1;\r\n\t\t\t\tif (index >= 0) return history[index];\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar evt = lib.skill.dcjianying.getLastUsed(player, event);\r\n\t\t\t\tif (!evt || !evt.card) return false;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\treturn lib.suit.includes(get.suit(evt.card)) && get.suit(evt.card) == get.suit(event.card);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.addMark(\"zhijinmrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhijinmrfz_round\", \"zhijinmrfz_use\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tuse: {\r\n\t\t\t\t\taudio: \"zhijinmrfz\",\r\n\t\t\t\t\tenable: [\"chooseToUse\", \"chooseToRespond\"],\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar vcards = [],\r\n\t\t\t\t\t\t\tlist = [],\r\n\t\t\t\t\t\t\tmark = player.countMark(\"zhijinmrfz\");\r\n\t\t\t\t\t\tif (mark >= 1) list.push(\"sha\");\r\n\t\t\t\t\t\tif (mark >= 2) list.push(\"juedou\");\r\n\t\t\t\t\t\tif (mark >= 3) list.push(\"wuzhong\");\r\n\t\t\t\t\t\tif (mark >= 4) list.push(\"tao\");\r\n\t\t\t\t\t\tif (mark >= 5) list.push(\"wanjian\");\r\n\t\t\t\t\t\tif (!player.isPhaseUsing() || player.countMark(\"zhijinmrfz\") == 0 || list.length == 0) return false;\r\n\t\t\t\t\t\tfor (var name of list) {\r\n\t\t\t\t\t\t\tif (event.filterCard({ name: name, isCard: false }, player, event)) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tchooseButton: {\r\n\t\t\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\t\t\tvar vcards = [],\r\n\t\t\t\t\t\t\t\tlist = [],\r\n\t\t\t\t\t\t\t\tmark = player.countMark(\"zhijinmrfz\");\r\n\t\t\t\t\t\t\tif (mark >= 1) list.push(\"sha\");\r\n\t\t\t\t\t\t\tif (mark >= 2) list.push(\"juedou\");\r\n\t\t\t\t\t\t\tif (mark >= 3) list.push(\"wuzhong\");\r\n\t\t\t\t\t\t\tif (mark >= 4) list.push(\"tao\");\r\n\t\t\t\t\t\t\tif (mark >= 5) list.push(\"wanjian\");\r\n\t\t\t\t\t\t\tfor (var name of list) {\r\n\t\t\t\t\t\t\t\tconst card = { name: name };\r\n\t\t\t\t\t\t\t\tif (event.filterCard(card, player, event)) {\r\n\t\t\t\t\t\t\t\t\tif (name == \"sha\") {\r\n\t\t\t\t\t\t\t\t\t\tfor (var j of lib.inpile_nature) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (j != \"fire\") continue;\r\n\t\t\t\t\t\t\t\t\t\t\tvcards.push([\"基本\", \"\", \"sha\", j]);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} else if (get.type(name) == \"trick\") {\r\n\t\t\t\t\t\t\t\t\t\tvcards.push([\"锦囊\", \"\", name]);\r\n\t\t\t\t\t\t\t\t\t} else if (get.type(name) == \"basic\") {\r\n\t\t\t\t\t\t\t\t\t\tvcards.push([\"基本\", \"\", name]);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar dialog = ui.create.dialog(\"掷金\", [vcards, \"vcard\"], \"hidden\");\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tdialog.direct = true;\r\n\t\t\t\t\t\t\treturn dialog;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcheck: function (button) {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tvar recover = 0,\r\n\t\t\t\t\t\t\t\tlose = 1,\r\n\t\t\t\t\t\t\t\tplayers = game.filterPlayer(),\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tchoose = button.link[2];\r\n\t\t\t\t\t\t\tvar mark = player.countMark(\"zhijinmrfz\");\r\n\t\t\t\t\t\t\tif (mark >= 5) {\r\n\t\t\t\t\t\t\t\tif (player.hp < 3) return choose == \"tao\" ? 2 : -1;\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < players.length; i++) {\r\n\t\t\t\t\t\t\t\t\tvar att = get.attitude(player, players[i]);\r\n\t\t\t\t\t\t\t\t\tif (players[i].hp == 1 && get.damageEffect(players[i], player, player) > 0 && !players[i].hasSha()) {\r\n\t\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\t\treturn button.link[2] == \"juedou\" ? 2 : -1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (att < 0) lose++;\r\n\t\t\t\t\t\t\t\t\tif (att > 0 && players[i].hp > 2) lose = lose - 0.5;\r\n\t\t\t\t\t\t\t\t\tif (att > 0 && players[i].hp < 2) lose--;\r\n\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\tif (att > 2 && players[i] == 1) lose -= 3;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (lose > 0) return choose == \"wanjian\" ? 1 : -1;\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\t\t\t\treturn (card.name = \"sha\");\r\n\t\t\t\t\t\t\t\t\t}) >= player.getCardUsable(\"sha\") ||\r\n\t\t\t\t\t\t\t\t\tplayer.getCardUsable(\"sha\") == 0\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\treturn choose == \"wuzhong\" ? 1 : -1;\r\n\t\t\t\t\t\t\t\treturn choose == \"sha\" ? 1 : -1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (mark >= 4) {\r\n\t\t\t\t\t\t\t\tif (player.hp < 3) return choose == \"tao\" ? 1 : -1;\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < players.length; i++) {\r\n\t\t\t\t\t\t\t\t\tvar att = get.attitude(player, players[i]);\r\n\t\t\t\t\t\t\t\t\tif (players[i].hp == 1 && get.damageEffect(players[i], player, player) > 0 && !players[i].hasSha()) {\r\n\t\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\t\treturn button.link[2] == \"juedou\" ? 2 : -1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\t\t\t\treturn (card.name = \"sha\");\r\n\t\t\t\t\t\t\t\t\t}) >= player.getCardUsable(\"sha\") ||\r\n\t\t\t\t\t\t\t\t\tplayer.getCardUsable(\"sha\") == 0\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\treturn choose == \"wuzhong\" ? 1 : -1;\r\n\t\t\t\t\t\t\t\treturn choose == \"sha\" ? 1 : -1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (mark >= 3) {\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < players.length; i++) {\r\n\t\t\t\t\t\t\t\t\tvar att = get.attitude(player, players[i]);\r\n\t\t\t\t\t\t\t\t\tif (players[i].hp == 1 && get.damageEffect(players[i], player, player) > 0 && !players[i].hasSha()) {\r\n\t\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\t\treturn button.link[2] == \"juedou\" ? 2 : -1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\t\t\t\treturn (card.name = \"sha\");\r\n\t\t\t\t\t\t\t\t\t}) >= player.getCardUsable(\"sha\") ||\r\n\t\t\t\t\t\t\t\t\tplayer.getCardUsable(\"sha\") == 0\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\treturn choose == \"wuzhong\" ? 1 : -1;\r\n\t\t\t\t\t\t\t\treturn choose == \"sha\" ? 1 : -1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (mark >= 2) {\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < players.length; i++) {\r\n\t\t\t\t\t\t\t\t\tvar att = get.attitude(player, players[i]);\r\n\t\t\t\t\t\t\t\t\tif (players[i].hp == 1 && get.damageEffect(players[i], player, player) > 0 && !players[i].hasSha()) {\r\n\t\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\t\treturn button.link[2] == \"juedou\" ? 2 : -1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn choose == \"sha\" ? 1 : -1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn choose == \"sha\" ? 1 : -1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tfilterCard: () => true,\r\n\t\t\t\t\t\t\t\tselectCard: 1,\r\n\t\t\t\t\t\t\t\tviewAs: {\r\n\t\t\t\t\t\t\t\t\tname: links[0][2],\r\n\t\t\t\t\t\t\t\t\tnature: links[0][3],\r\n\t\t\t\t\t\t\t\t\tisCard: false,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tposition: \"he\",\r\n\t\t\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t\t\t\tasync precontent(event, trigger, player) {\r\n\t\t\t\t\t\t\t\t\tconst card = event.result.card?.name,\r\n\t\t\t\t\t\t\t\t\t\tmark = player.countMark(\"zhijinmrfz\");\r\n\t\t\t\t\t\t\t\t\tif (card == \"sha\") {\r\n\t\t\t\t\t\t\t\t\t\tif (mark == 1) player.draw();\r\n\t\t\t\t\t\t\t\t\t\tplayer.removeMark(\"zhijinmrfz\");\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (card == \"juedou\") {\r\n\t\t\t\t\t\t\t\t\t\tif (mark == 2) player.draw();\r\n\t\t\t\t\t\t\t\t\t\tplayer.removeMark(\"zhijinmrfz\", 2);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (card == \"wuzhong\") {\r\n\t\t\t\t\t\t\t\t\t\tif (mark == 3) player.draw();\r\n\t\t\t\t\t\t\t\t\t\tplayer.removeMark(\"zhijinmrfz\", 3);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (card == \"tao\") {\r\n\t\t\t\t\t\t\t\t\t\tif (mark == 4) player.draw();\r\n\t\t\t\t\t\t\t\t\t\tplayer.removeMark(\"zhijinmrfz\", 4);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (card == \"wanjian\") {\r\n\t\t\t\t\t\t\t\t\t\tif (mark == 5) player.draw();\r\n\t\t\t\t\t\t\t\t\t\tplayer.removeMark(\"zhijinmrfz\", 5);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\t\t\treturn \"【掷金】：视为使用一张\" + (links[0][3] == undefined ? \"\" : \"火\") + \"【\" + get.translation(links[0][2]) + \"】\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\trespondSha: true,\r\n\t\t\t\t\t\tfireAttack: true,\r\n\t\t\t\t\t\torder: function (item, player) {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tvar event = _status.event;\r\n\t\t\t\t\t\t\tvar mark = player.countMark(\"zhijinmrfz\");\r\n\t\t\t\t\t\t\tif (event.filterCard({ name: \"tao\" }, player, event) && mark >= 4) {\r\n\t\t\t\t\t\t\t\treturn 10;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (event.filterCard({ name: \"wuzhong\" }, player, event) && mark >= 3) {\r\n\t\t\t\t\t\t\t\treturn 13;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (event.filterCard({ name: \"juedou\" }, player, event) && mark >= 2) {\r\n\t\t\t\t\t\t\t\treturn 4.95;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (event.filterCard({ name: \"sha\" }, player, event) && mark >= 1) {\r\n\t\t\t\t\t\t\t\treturn 2.95;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t\t\treturn player.countMark(\"zhijinmrfz\") > 0;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tround: {\r\n\t\t\t\t\taudio: \"zhijinmrfz\",\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addMark(\"zhijinmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tmianzaimrfz: {\r\n\t\t\tmarkimage: \"extension/WhichWay/image/skill/mianzaimrfz_money.png\",\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"累计点数：#\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"dying\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst cards = game.cardsGotoOrdering(get.cards(6)).cards;\r\n\t\t\t\tlet num = 0;\r\n\t\t\t\tfor (let i = 0; i < cards.length; i++) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tnum = num + cards[i].number;\r\n\t\t\t\t}\r\n\t\t\t\tplayer.showCards(cards, get.translation(player) + \"发动了【免灾】</br>点数之和为：\" + num);\r\n\t\t\t\tif (num <= player.countMark(\"mianzaimrfz\")) {\r\n\t\t\t\t\tplayer.recoverTo(3);\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.drawTo(3);\r\n\t\t\t\t\tplayer.removeMark(\"mianzaimrfz\", player.countMark(\"mianzaimrfz\"), false);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"mianzaimrfz_number\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tnumber: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.cards && event.cards.length == 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst num = trigger.card.number;\r\n\t\t\t\t\t\tplayer.addMark(\"mianzaimrfz\", num, false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//圣约送葬人\r\n\t\tchongdanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tfrequent: true,\r\n\t\t\tsubfrequent: [\"chongdanmrfz_player\"],\r\n\t\t\ttrigger: {\r\n\t\t\t\tsource: \"damageSource\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.countCards(\"h\") == 0 && player.getDamagedHp() == 0) return false;\r\n\t\t\t\treturn !player.storage.chongdanmrfz;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.storage.chongdanmrfz = true;\r\n\t\t\t\tif (player.getDamagedHp() == 0) player.draw(player.hp);\r\n\t\t\t\telse {\r\n\t\t\t\t\tconst result = await player\r\n\t\t\t\t\t\t.chooseBool(\"【铳弹】：是否摸\" + player.hp + \"张牌？\")\r\n\t\t\t\t\t\t.set(\"prompt2\", \"选择取消则为回复\" + player.countCards(\"h\") + \"点体力\")\r\n\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tvar hp = player.hp;\r\n\t\t\t\t\t\t\tif (player.countCards(\"h\") == 0) return 0;\r\n\t\t\t\t\t\t\tif (hp < 2) return 1;\r\n\t\t\t\t\t\t\tif (player.countCards(\"j\") > 0) return 1;\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tplayer.isPhaseUsing() &&\r\n\t\t\t\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\t\t\treturn card.name == \"tao\";\r\n\t\t\t\t\t\t\t\t}) >= player.getDamagedHp()\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\tplayer.draw(player.hp);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tplayer.recover(player.countCards(\"h\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tcardEnabled: function (card, player) {\r\n\t\t\t\t\tif (player.countMark(\"chongdanmrfz_lim\") >= 2 * player.maxHp) return false;\r\n\t\t\t\t},\r\n\t\t\t\tcardUsable: function (card, player) {\r\n\t\t\t\t\tif (player.countMark(\"chongdanmrfz_lim\") >= 2 * player.maxHp) return false;\r\n\t\t\t\t},\r\n\t\t\t\tcardSavable: function (card, player) {\r\n\t\t\t\t\tif (player.countMark(\"chongdanmrfz_lim\") >= 2 * player.maxHp) return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tpresha: true,\r\n\t\t\t\tpretao: true,\r\n\t\t\t},\r\n\t\t\tgroup: [\"chongdanmrfz_clear\", \"chongdanmrfz_player\", \"chongdanmrfz_lim\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tlim: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"已使用：#张牌\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCard\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.countMark(\"chongdanmrfz_lim\") < 2 * player.maxHp;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addMark(\"chongdanmrfz_lim\", 1, false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (player.storage.chongdanmrfz_player) player.storage.chongdanmrfz_player = false;\r\n\t\t\t\t\t\tif (player.storage.chongdanmrfz) player.storage.chongdanmrfz = false;\r\n\t\t\t\t\t\tif (player.countMark(\"chongdanmrfz_lim\") > 0)\r\n\t\t\t\t\t\t\tplayer.removeMark(\"chongdanmrfz_lim\", player.countMark(\"chongdanmrfz_lim\"), false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tplayer: {\r\n\t\t\t\t\taudio: \"chongdanmrfz\",\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"damageEnd\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.countCards(\"h\") == 0 && player.getDamagedHp() == 0) return false;\r\n\t\t\t\t\t\treturn !player.storage.chongdanmrfz_player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.chongdanmrfz_player = true;\r\n\t\t\t\t\t\tif (player.getDamagedHp() == 0) player.draw(player.hp);\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tconst result = await player\r\n\t\t\t\t\t\t\t\t.chooseBool(\"【铳弹】：是否摸\" + player.hp + \"张牌？\")\r\n\t\t\t\t\t\t\t\t.set(\"prompt2\", \"选择取消则为回复\" + player.countCards(\"h\") + \"点体力\")\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\t\tvar hp = player.hp;\r\n\t\t\t\t\t\t\t\t\tif (player.countCards(\"h\") == 0) return 0;\r\n\t\t\t\t\t\t\t\t\tif (hp < 3) return 1;\r\n\t\t\t\t\t\t\t\t\tif (player.countCards(\"j\") > 0) return 1;\r\n\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\tplayer.isPhaseUsing() &&\r\n\t\t\t\t\t\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\t\t\t\t\treturn card.name == \"tao\";\r\n\t\t\t\t\t\t\t\t\t\t}) >= player.getDamagedHp()\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\t\tplayer.draw(player.hp);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tplayer.recover(player.countCards(\"h\"));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\ttianxuanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\treturn \"已有的花色：\" + get.translation(player.storage.tianxuanmrfz);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCard1\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn get.tag(event.card, \"damage\") > 0 && player.isPhaseUsing();\r\n\t\t\t},\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.tianxuanmrfz = [\"heart\"];\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\tvar list = player.storage.tianxuanmrfz;\r\n\t\t\t\treturn \"【天选】：是否进行判定，若为\" + get.translation(list) + \",则\" + get.translation(event.card) + \"结算两次\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet list = player.storage.tianxuanmrfz;\r\n\t\t\t\tconst { bool } = await player\r\n\t\t\t\t\t.judge(function (card) {\r\n\t\t\t\t\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\t\t\t\t\tvar suit = get.suit(card);\r\n\t\t\t\t\t\t\tif (suit == list[i]) return -4;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"judge2\", result => (result.bool == false ? true : false))\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\tif (bool == false) {\r\n\t\t\t\t\ttrigger.effectCount++;\r\n\t\t\t\t\tplayer.storage.tianxuanmrfz = [];\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet suit = player.storage.tianxuanmrfz;\r\n\t\t\t\t\tlist = [];\r\n\t\t\t\t\tfor (let i of lib.suit) {\r\n\t\t\t\t\t\tif (suit.includes(i)) continue;\r\n\t\t\t\t\t\tlist.push(i);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst result = await player\r\n\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t.set(\"prompt\", \"【天选】：请选择为[]内增加一个花色\")\r\n\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\tif (list.includes(\"diamond\")) return \"diamond\";\r\n\t\t\t\t\t\t\treturn list.randomGet();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (result.control) {\r\n\t\t\t\t\t\tplayer.storage.tianxuanmrfz.add(result.control);\r\n\t\t\t\t\t\tplayer.storage.tianxuanmrfz.sort();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tshengcaimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCard2\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!get.tag(event.card, \"damage\") || !player.isPhaseUsing()) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.getHistory(\"useCard\", function (evt) {\r\n\t\t\t\t\t\treturn get.tag(evt.card, \"damage\") > 0;\r\n\t\t\t\t\t}).length > 1\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"【圣裁】：是否令\" + get.translation(event.card) + \"伤害基数+1？\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (!trigger.baseDamage) trigger.baseDamage = 1;\r\n\t\t\t\ttrigger.baseDamage++;\r\n\t\t\t},\r\n\t\t\tgroup: \"shengcaimrfz_damage\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tgame.countPlayer(current => {\r\n\t\t\t\t\t\t\t\treturn current != player && current.getHistory(\"damage\").length > 0;\r\n\t\t\t\t\t\t\t}) > 0\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst next = player.chooseTarget(\r\n\t\t\t\t\t\t\t[1, Infinity],\r\n\t\t\t\t\t\t\t\"【圣裁】：你可以对本回合造成过伤害的其他角色造成一点伤害\",\r\n\t\t\t\t\t\t\tfunction (card, player, target) {\r\n\t\t\t\t\t\t\t\treturn target != player && target.getHistory(\"damage\").length > 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tnext.ai = function (target) {\r\n\t\t\t\t\t\t\treturn get.attitude(player, target) < 0;\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tconst result = await next.forResult();\r\n\r\n\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"shengcaimrfz\");\r\n\t\t\t\t\t\t\tfor (let i of result.targets) {\r\n\t\t\t\t\t\t\t\ti.damage(\"player\");\r\n\t\t\t\t\t\t\t\tplayer.line(i);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//涤火杰西卡\r\n\t\tyijiemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.countCards(\"he\") == 0) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && current.countCards(\"h\") > 0;\r\n\t\t\t\t\t}) > 0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player;\r\n\t\t\t},\r\n\t\t\ttargetprompt: [\"被出杀(A)\", \"出杀(B)\", \"出杀(B)\"],\r\n\t\t\tselectTarget: [2, 3],\r\n\t\t\tmultitarget: true,\r\n\t\t\tline: false,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t// step 0\r\n\t\t\t\tevent.num = 0;\r\n\t\t\t\tconst targets = event.targets;\r\n\t\t\t\ttargets.push(player);\r\n\t\t\t\tconst frsTargets = targets[0];\r\n\t\t\t\tconst secTargets = targets.slice(1);\r\n\t\t\t\tfor (const t of secTargets) {\r\n\t\t\t\t\tt.line(frsTargets);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 1 loop (original event.redo())\r\n\t\t\t\twhile (event.num < secTargets.length) {\r\n\t\t\t\t\tconst currentTarget = secTargets[event.num];\r\n\t\t\t\t\tcurrentTarget.storage.yijiemrfz = frsTargets;\r\n\t\t\t\t\tcurrentTarget.addTempSkill(\"yijiemrfz_gain\", \"shaMiss\");\r\n\r\n\t\t\t\t\tawait currentTarget\r\n\t\t\t\t\t\t.chooseToUse(\r\n\t\t\t\t\t\t\tfunction (card, player, event) {\r\n\t\t\t\t\t\t\t\tif (get.name(card) !== \"sha\") return false;\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\treturn lib.filter.filterCard.apply(this, arguments);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\"【义劫】：是否对\" + get.translation(frsTargets) + \"使用一张杀？\"\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\t\tif (target !== _status.event.frsTargets && !ui.selected.targets.includes(_status.event.frsTargets)) return false;\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\treturn lib.filter.targetEnabled.apply(this, arguments);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"addCount\", false)\r\n\t\t\t\t\t\t.set(\"frsTargets\", frsTargets);\r\n\r\n\t\t\t\t\tevent.num++;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 4.1,\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tif (ui.selected.targets.length == 0) {\r\n\t\t\t\t\t\t\treturn -3;\r\n\t\t\t\t\t\t} else return 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t//group:'tuohuangmrfz',\r\n\t\t\tsubSkill: {\r\n\t\t\t\tgain: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tsource: \"damageEnd\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: function (player) {\r\n\t\t\t\t\t\tdelete player.storage.yijiemrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\" && event.player == player.storage.yijiemrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (trigger.player.countCards(\"he\") > 0) player.gainPlayerCard(trigger.player, true, \"he\");\r\n\t\t\t\t\t\telse trigger.player.damage(\"player\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"yijiemrfz_gain\");\r\n\t\t\t\t\t\tdelete player.storage.yijiemrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tfuhuangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tderivation: [\"tuohuangmrfz\", \"weihumrfz\"],\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationColor: \"fire\",\r\n\t\t\tunique: true,\r\n\t\t\tjuexingji: true,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"gainAfter\",\r\n\t\t\t\tglobal: \"loseAsyncAfter\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"fuhuangmrfz_mark\") >= 2;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.removeMark(\"fuhuangmrfz_mark\", player.countMark(\"fuhuangmrfz_mark\"), false);\r\n\t\t\t\tplayer.awakenSkill(\"fuhuangmrfz\");\r\n\t\t\t\tplayer.removeSkill(\"yijiemrfz\");\r\n\t\t\t\tplayer.addSkill(\"tuohuangmrfz\");\r\n\t\t\t\tplayer.addSkill(\"weihumrfz\");\r\n\t\t\t\tplayer.draw(2);\r\n\t\t\t\tplayer.changeHujia(1);\r\n\t\t\t\tplayer.loseMaxHp(1);\r\n\t\t\t},\r\n\t\t\tgroup: \"fuhuangmrfz_mark\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tmark: {\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"已获得#张牌\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"gainAfter\",\r\n\t\t\t\t\t\tglobal: \"loseAsyncAfter\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.countMark(\"fuhuangmrfz_mark\") >= 2) return false;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn event.getg(player).length && event.getParent(\"phaseDraw\").player != player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addMark(\"fuhuangmrfz_mark\", trigger.num, false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\ttuohuangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\treturn current.countCards(\"he\") > 0;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tmultitarget: true,\r\n\t\t\tmultiline: true,\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tselectTarget: [1, 3],\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\t\t\t\tconst targets = event.targets;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tconst num = 4 - targets.length;\r\n\t\t\t\tconst cards = game.cardsGotoOrdering(get.cards(num)).cards;\r\n\t\t\t\tevent.cards = cards;\r\n\t\t\t\tplayer.showCards(event.cards, get.translation(player) + \"发动了【拓荒】\");\r\n\r\n\t\t\t\t// step 1 & 2 loop (original event.goto(1))\r\n\t\t\t\tfor (let i = 0; i < targets.length; i++) {\r\n\t\t\t\t\tconst target = targets[i];\r\n\t\t\t\t\tconst suit = [];\r\n\t\t\t\t\tfor (const card of event.cards) {\r\n\t\t\t\t\t\tconst s = get.suit(card);\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (!suit.includes(s) && lib.suit.includes(s)) suit.push(s);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tresult = await target\r\n\t\t\t\t\t\t.chooseToDiscard(\"h\", \"【拓荒】：你可以弃置\" + get.translation(suit) + \"花色的手牌并摸等量 +1 张牌\", [1, Infinity], card => {\r\n\t\t\t\t\t\t\tconst suitcard = get.suit(card);\r\n\t\t\t\t\t\t\treturn suit.includes(suitcard);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t// step 2 logic\r\n\t\t\t\t\tif (result.cards) {\r\n\t\t\t\t\t\tawait target.draw(1 + result.cards.length);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tthreaten: 1.35,\r\n\t\t\t\torder: 1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\ttarget: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tweihumrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\tif (player.hujia > 0) return num + 1;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.hujia < 1;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.changeHujia();\r\n\t\t\t},\r\n\t\t\tgroup: \"weihumrfz_give\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tgive: {\r\n\t\t\t\t\ttrigger: { player: \"phaseUseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hujia > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst result = await player\r\n\t\t\t\t\t\t\t.chooseTarget(\r\n\t\t\t\t\t\t\t\t[1, player.hujia + 1],\r\n\t\t\t\t\t\t\t\t\"【卫护】：你可以失去至少一点护甲，然后令等量+1名没有护甲的其他角色获得一点护甲\",\r\n\t\t\t\t\t\t\t\tfunction (card, player, target) {\r\n\t\t\t\t\t\t\t\t\treturn target != player && target.hujia < 1;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t.set(\"ai\", target => get.attitude(player, target) > 2)\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"weihumrfz\");\r\n\t\t\t\t\t\t\tplayer.changeHujia(Math.min(-1, -result.targets.length + 1));\r\n\t\t\t\t\t\t\tfor (let i of result.targets) {\r\n\t\t\t\t\t\t\t\ti.changeHujia();\r\n\t\t\t\t\t\t\t\tplayer.line(i);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//提丰 小台风\r\n\t\truiyamrfz: {\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\treturn \"上一个成为一唯一目标的【杀】的角色：\" + (player.storage.ruiyamrfz ? get.translation(player.storage.ruiyamrfz) : \"无\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCard2\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tevent.cards &&\r\n\t\t\t\t\tevent.card.name == \"sha\" &&\r\n\t\t\t\t\tevent.targets &&\r\n\t\t\t\t\tevent.targets.length == 1 &&\r\n\t\t\t\t\tevent.targets[0] == player.storage.ruiyamrfz\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tprompt: \"【锐牙】:是否令此杀伤害+1？\",\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.targets[0]) < 2;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst target = trigger.targets[0];\r\n\t\t\t\ttarget.addTempSkill(\"ruiyamrfz_dam\");\r\n\t\t\t\ttarget.storage.ruiyamrfz_dam = {\r\n\t\t\t\t\tcard: trigger.card,\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tgroup: \"ruiyamrfz_mark\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tmark: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!event.targets || event.targets.length > 1) return false;\r\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.ruiyamrfz = trigger.target;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdam: {\r\n\t\t\t\t\tonremove: function (player) {\r\n\t\t\t\t\t\tdelete player.storage.ruiyamrfz_dam;\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"damageBegin3\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar info = player.storage.ruiyamrfz_dam;\r\n\t\t\t\t\t\treturn event.card && event.card == info.card;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshouliemrfz: {\r\n\t\t\tmarktext: \"矢\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"矢\",\r\n\t\t\t\tcontent: \"expansion\",\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t},\r\n\t\t\tonremove: function (player, skill) {\r\n\t\t\t\tvar cards = player.getExpansions(skill);\r\n\t\t\t\tif (cards.length) player.loseToDiscardpile(cards);\r\n\t\t\t},\r\n\t\t\taudio: 4,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.getExpansions(\"shouliemrfz\").length >= 3) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.countCards(\"he\", function (card) {\r\n\t\t\t\t\t\treturn get.tag(card, \"damage\") > 0;\r\n\t\t\t\t\t}) > 0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tfilterCard: function (card) {\r\n\t\t\t\treturn get.tag(card, \"damage\");\r\n\t\t\t},\r\n\t\t\tselectCard: function () {\r\n\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\treturn [1, 3 - player.getExpansions(\"shouliemrfz\").length];\r\n\t\t\t},\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\treturn 10 - get.value(card) || card.name == \"sha\";\r\n\t\t\t},\r\n\t\t\tprompt: \"【狩猎】：将任意张带有伤害标签的牌置于你的武将牌上，称之为‘矢’\",\r\n\t\t\tdiscard: false,\r\n\t\t\tlose: false,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { cards } = event;\r\n\t\t\t\tplayer.addToExpansion(cards, player, \"giveAuto\").gaintag.add(\"shouliemrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"shouliemrfz_use\", \"shouliemrfz_shasha\"],\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\tthreaten: function () {\r\n\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\treturn 1.4 + player.getExpansions(\"shouliemrfz\").length * 0.2;\r\n\t\t\t\t},\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\tuse: {\r\n\t\t\t\t\taudio: \"shouliemrfz\",\r\n\t\t\t\t\tenable: [\"chooseToRespond\", \"chooseToUse\"],\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.getExpansions(\"shouliemrfz\").length < 1 || player.hasSkill(\"shouliemrfz_ban\")) return false;\r\n\t\t\t\t\t\treturn event.filterCard({ name: \"sha\" }, player, event);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tchooseButton: {\r\n\t\t\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\t\t\treturn ui.create.dialog(\"狩猎\", player.getExpansions(\"shouliemrfz\"), \"hidden\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tviewAs: {\r\n\t\t\t\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\t\t\t\tnature: \"stab\",\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcards: links,\r\n\t\t\t\t\t\t\t\tselectCard: -1,\r\n\t\t\t\t\t\t\t\tposition: \"x\",\r\n\t\t\t\t\t\t\t\tfilterCard: card => lib.skill[\"shouliemrfz_use_backup\"].cards.includes(card),\r\n\t\t\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t\t\t\tprecontent: function () {\r\n\t\t\t\t\t\t\t\t\tplayer.addTempSkill(\"shouliemrfz_ban\", \"phaseEnd\");\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\treturn \"【狩猎】：将\" + get.translation(links.name) + \"当做一张刺【杀】使用或打出\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\torder: 2.95,\r\n\t\t\t\t\t\trespondSha: true,\r\n\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t\t\tif (player.getExpansions(\"shouliemrfz\").length < 1) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tshasha: {\r\n\t\t\t\t\tmarkimage: \"extension/WhichWay/image/skill/taifengmrfz.png\",\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\"你成为了\" +\r\n\t\t\t\t\t\t\t\tget.translation(\r\n\t\t\t\t\t\t\t\t\tgame.findPlayer(function (current) {\r\n\t\t\t\t\t\t\t\t\t\treturn current != player && current.hasSkill(\"shouliemrfz\");\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t) +\r\n\t\t\t\t\t\t\t\t\"的猎物\"\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\taudio: \"shouliemrfz\",\r\n\t\t\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (player.getHistory(\"skipped\").includes(\"phaseUse\") || player.getHistory(\"skipped\").includes(\"phaseDiscard\")) return false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tplayer.countCards(\"j\", function (card) {\r\n\t\t\t\t\t\t\t\treturn get.name(card) == \"lebu\";\r\n\t\t\t\t\t\t\t}) > 0 &&\r\n\t\t\t\t\t\t\tplayer.countCards(\"h\") + 2 > player.getHandcardLimit()\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tplayer.getExpansions(\"shouliemrfz\").length +\r\n\t\t\t\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\t\t\treturn get.name(card) == \"sha\";\r\n\t\t\t\t\t\t\t\t}) >\r\n\t\t\t\t\t\t\t2\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: \"【狩猎】：是否跳过出牌阶段和弃牌阶段，然后选择一名其他角色，直到你的下个回合开始时，每个其他角色的结束阶段，你都可以对其使用一张【杀】？\",\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.skip(\"phaseUse\");\r\n\t\t\t\t\t\tplayer.skip(\"phaseDiscard\");\r\n\t\t\t\t\t\tplayer.addSkill(\"shouliemrfz_usesha\");\r\n\t\t\t\t\t\tconst result = await player\r\n\t\t\t\t\t\t\t.chooseTarget(\r\n\t\t\t\t\t\t\t\t\"【狩猎】：请选择一名其他角色\",\r\n\t\t\t\t\t\t\t\tfunction (card, player, target) {\r\n\t\t\t\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t.set(\"ai\", target => get.attitude2(target) < 0)\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\t\t\tplayer.storage.shouliemrfz_shasha = target;\r\n\t\t\t\t\t\t\ttarget.addMark(\"shouliemrfz_shasha\", 1, false);\r\n\t\t\t\t\t\t\tplayer.line(target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\texpose: 0.1,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\trem: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tfor (const current of game.players) {\r\n\t\t\t\t\t\t\tcurrent.removeMark(\"shouliemrfz_shasha\", 1145141919810, false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tplayer.removeSkill(\"shouliemrfz_usesha\");\r\n\t\t\t\t\t\tdelete player.storage.shouliemrfz_shasha;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tusesha: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"phaseJieshuBegin\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.player == player) return false;\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.player.isIn() &&\r\n\t\t\t\t\t\t\tlib.filter.targetEnabled({ name: \"sha\" }, player, event.player) &&\r\n\t\t\t\t\t\t\t(player.hasSha() || _status.connectMode || player.getExpansions(\"shouliemrfz\").length > 0)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst target = game.findPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn current != player && player.storage.shouliemrfz_shasha == current;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.chooseToUse(\r\n\t\t\t\t\t\t\t\tfunction (card, player, event) {\r\n\t\t\t\t\t\t\t\t\tif (get.name(card) != \"sha\") return false;\r\n\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\treturn lib.filter.filterCard.apply(this, arguments);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\"【狩猎】：是否对\" + get.translation(target) + \"使用一张【杀】？\"\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t.set(\"logSkill\", \"shouliemrfz\")\r\n\t\t\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\t\t\tif (target != _status.event.sourcex && !ui.selected.targets.includes(_status.event.sourcex)) return false;\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\treturn lib.filter.targetEnabled.apply(this, arguments);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"sourcex\", target);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgroup: \"shouliemrfz_rem\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//vvan薇薇安娜\r\n\t\tzhanjumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"dying\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (!game.checkMod({ name: \"tao\", isCard: true }, player, event.player, \"unchanged\", \"cardSavable\", player)) return false;\r\n\t\t\t\treturn player.countCards(\"h\") > 0 && event.player.hp <= 0;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (get.attitude(player, event.player) < 0) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\treturn card.name == \"tao\";\r\n\t\t\t\t\t}) +\r\n\t\t\t\t\t\tevent.player.hp <\r\n\t\t\t\t\t0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"【盏菊】:你可以将所有手牌当作【桃】对\" + get.translation(event.player) + \"使用\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst cards = player.getCards(\"h\");\r\n\t\t\t\ttrigger.player.storage.zhanjumrfz = true;\r\n\t\t\t\tplayer.useCard({ name: \"tao\" }, cards, trigger.player);\r\n\t\t\t},\r\n\t\t\tgroup: \"zhanjumrfz_recast\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\trecast: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\ttrigger: { global: \"dyingAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.storage.zhanjumrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tdelete trigger.player.storage.zhanjumrfz;\r\n\t\t\t\t\t\tif (player.countCards(\"hej\") == 0) event.finish();\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tconst result = await player\r\n\t\t\t\t\t\t\t\t.chooseCard(\"【盏菊】:你可以重铸一张你区域内的牌\", \"hej\")\r\n\t\t\t\t\t\t\t\t.set(\"ai\", card => 8 - get.value(card))\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t\tif (result.cards) {\r\n\t\t\t\t\t\t\t\tplayer.recast(result.cards);\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tplayer.logSkill(\"zhanjumrfz\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhuhuomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilterCard: function (card, player) {\r\n\t\t\t\treturn player.canRecast(card);\r\n\t\t\t},\r\n\t\t\tselectCard: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tposition: \"he\",\r\n\t\t\tdiscard: false,\r\n\t\t\tlose: false,\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.recast(event.cards);\r\n\t\t\t},\r\n\t\t\tgroup: \"zhuhuomrfz_draw\",\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\treget: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: [\"phaseZhunbeiAfter\", \"phaseJudgeAfter\", \"phaseUseAfter\", \"phaseDiscardAfter\", \"phaseJieshuAfter\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addSkill(\"zhuhuomrfz\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"zhuhuomrfz_reget\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"loseAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!event.cards) return false;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn event.getParent(2).name == \"recast\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet result;\r\n\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\tlet num;\r\n\t\t\t\t\t\tif (trigger.cards.length > 1) {\r\n\t\t\t\t\t\t\tnum = 0;\r\n\t\t\t\t\t\t\tfor (const card of trigger.cards) {\r\n\t\t\t\t\t\t\t\tnum += get.cardNameLength(card);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnum = get.cardNameLength(trigger.cards[0]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tevent.num = num;\r\n\r\n\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t.chooseControl(\"发牌\", \"摸牌\", \"cancel2\")\r\n\t\t\t\t\t\t\t.set(\"prompt\", \"是否发动【烛火】？\")\r\n\t\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\t\t\tconst count = game.countPlayer(current => {\r\n\t\t\t\t\t\t\t\t\treturn current !== aiPlayer && get.attitude(current, aiPlayer) > 2;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tif (num === 1) return 0;\r\n\t\t\t\t\t\t\t\tif (count - num < 0) return 1;\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t// step 1\r\n\t\t\t\t\t\tif (result.control === \"cancel2\") {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (result.index === 1) {\r\n\t\t\t\t\t\t\t\tawait player.draw(Math.min(event.num, 5));\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tplayer.logSkill(\"zhuhuo2mrfz\");\r\n\t\t\t\t\t\t\t\tplayer.addSkill(\"zhuhuomrfz_reget\");\r\n\t\t\t\t\t\t\t\tplayer.removeSkill(\"zhuhuomrfz\");\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tconst selectNum = event.num;\r\n\t\t\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t\t\t.chooseTarget(true, \"【烛火】:你可以选择至多\" + selectNum + \"名角色，令其各摸一张牌\", [1, selectNum])\r\n\t\t\t\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\t\t\t\treturn get.attitude(target, player) > 2;\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 2\r\n\t\t\t\t\t\tif (result.targets && result.targets.length) {\r\n\t\t\t\t\t\t\tconst targets = result.targets;\r\n\t\t\t\t\t\t\tfor (const target of targets) {\r\n\t\t\t\t\t\t\t\tawait target.draw();\r\n\t\t\t\t\t\t\t\tplayer.line(target);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"zhuhuo2mrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\texpose: 0.1,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhuhuo2mrfz: {\r\n\t\t\taudio: 2,\r\n\t\t},\r\n\t\tyunjiaomrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\taiOrder: function (player, card, num) {\r\n\t\t\t\t\tif (typeof card == \"object\" && !get.tag(card, \"norepeat\")) {\r\n\t\t\t\t\t\tvar history = player.getAllHistory(\"useCard\");\r\n\t\t\t\t\t\tif (history.length > 0) {\r\n\t\t\t\t\t\t\tvar cardx = history[history.length - 1].card;\r\n\t\t\t\t\t\t\tif (get.is.yayun(get.translation(cardx.name), get.translation(card.name))) return num + 20;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar history = player.getAllHistory(\"useCard\");\r\n\t\t\t\t\tvar evt = history[history.length - 1];\r\n\t\t\t\t\tif (!evt) return \"没有使用过牌\";\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\treturn \"你上一张使用的牌是：\" + get.translation(evt.card.name) + \"(\" + get.pinyin(get.translation(evt.card.name)) + \")\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar history = player.getAllHistory(\"useCard\"),\r\n\t\t\t\t\tindex = history.indexOf(event);\r\n\t\t\t\tif (index < 1) return false;\r\n\t\t\t\tvar evt = history[index - 1];\r\n\t\t\t\treturn get.is.yayun(get.translation(event.card.name), get.translation(evt.card.name)) && player.isPhaseUsing();\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar skills = player.getStockSkills(true, true);\r\n\t\t\t\tgame.expandSkills(skills);\r\n\t\t\t\tvar resetSkills = [];\r\n\t\t\t\tvar suffixs = [\"used\", \"round\", \"block\", \"blocker\"];\r\n\t\t\t\tfor (var skill of skills) {\r\n\t\t\t\t\tvar info = get.info(skill);\r\n\t\t\t\t\tif (typeof info.usable == \"number\") {\r\n\t\t\t\t\t\tif (player.hasSkill(\"counttrigger\") && player.storage.counttrigger[skill] && player.storage.counttrigger[skill] >= 1) {\r\n\t\t\t\t\t\t\tdelete player.storage.counttrigger[skill];\r\n\t\t\t\t\t\t\tresetSkills.add(skill);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (typeof get.skillCount(skill) == \"number\" && get.skillCount(skill) >= 1) {\r\n\t\t\t\t\t\t\tdelete player.getStat(\"skill\")[skill];\r\n\t\t\t\t\t\t\tresetSkills.add(skill);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (info.round && player.storage[skill + \"_roundcount\"]) {\r\n\t\t\t\t\t\tdelete player.storage[skill + \"_roundcount\"];\r\n\t\t\t\t\t\tresetSkills.add(skill);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (player.awakenedSkills.includes(skill)) {\r\n\t\t\t\t\t\tplayer.restoreSkill(skill);\r\n\t\t\t\t\t\tresetSkills.add(skill);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (var suffix of suffixs) {\r\n\t\t\t\t\t\tif (player.hasSkill(skill + \"_\" + suffix)) {\r\n\t\t\t\t\t\t\tplayer.removeSkill(skill + \"_\" + suffix);\r\n\t\t\t\t\t\t\tresetSkills.add(skill);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (resetSkills.length) {\r\n\t\t\t\t\tvar str = \"\";\r\n\t\t\t\t\tfor (var i of resetSkills) {\r\n\t\t\t\t\t\tstr += \"【\" + get.translation(i) + \"】、\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgame.log(player, \"重置了技能\", \"#g\" + str.slice(0, -1));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//纯爱 纯烬艾雅法拉 奶羊 我老婆涅😋\r\n\t\tlvmengmrfz: {\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.lvmengmrfz = {\r\n\t\t\t\t\tbeifeng: [],\r\n\t\t\t\t\tzhongzi: [],\r\n\t\t\t\t\tpimao: [],\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar storage = player.storage.lvmengmrfz;\r\n\t\t\t\t\tvar str =\r\n\t\t\t\t\t\t\"北风：\" +\r\n\t\t\t\t\t\t(storage[\"beifeng\"].length > 0 ? get.translation(storage[\"beifeng\"]) : \"无\") +\r\n\t\t\t\t\t\t\"</br>种子：\" +\r\n\t\t\t\t\t\t(storage[\"zhongzi\"].length > 0 ? get.translation(storage[\"zhongzi\"]) : \"无\") +\r\n\t\t\t\t\t\t\"</br>皮毛：\" +\r\n\t\t\t\t\t\t(storage[\"pimao\"].length > 0 ? get.translation(storage[\"pimao\"]) : \"无\");\r\n\t\t\t\t\treturn str;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 4,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (!player.storage.lvmengmrfz)\r\n\t\t\t\t\tplayer.storage.lvmengmrfz = {\r\n\t\t\t\t\t\tbeifeng: [],\r\n\t\t\t\t\t\tzhongzi: [],\r\n\t\t\t\t\t\tpimao: [],\r\n\t\t\t\t\t};\r\n\t\t\t\tconst list = [\r\n\t\t\t\t\t[\"未分配牌的类型（对话框较长，请下滑操作）\", [[\"basic\", \"trick\", \"equip\"], \"vcard\"]],\r\n\t\t\t\t\t[\"北风（从牌堆中获得一张你手牌中没有的花色）\", []],\r\n\t\t\t\t\t[\"种子（此牌结算完毕后你可以将其交给一名其他角色）\", []],\r\n\t\t\t\t\t[\"皮毛（不可被其他角色响应）\", []],\r\n\t\t\t\t];\r\n\t\t\t\tconst next = player.chooseToMove(\"【旅梦】：请分配牌的类型\", true);\r\n\t\t\t\tnext.set(\"list\", list);\r\n\t\t\t\tnext.set(\"filterMove\", function (from, to, moved) {\r\n\t\t\t\t\tif (typeof to == \"number\") {\r\n\t\t\t\t\t\tif (to == 0) return true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t});\r\n\t\t\t\tnext.set(\"processAI\", function () {\r\n\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\tvar moved = [[], [], [], []];\r\n\t\t\t\t\tvar hasFriend = function (player) {\r\n\t\t\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\t\t\treturn get.attitude(player, current) > 2 && current != player;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (!hasFriend(player)) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tmoved[1].addArray([\"equip\"]);\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (Math.random() < 0.5) moved[1].addArray([\"trick\"]);\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\telse moved[3].addArray([\"trick\"]);\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tmoved[3].addArray([\"basic\"]);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tmoved[1].addArray([\"equip\"]);\r\n\t\t\t\t\t\tif (Math.random() < 0.5) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tmoved[2].addArray([\"trick\"]);\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tmoved[3].addArray([\"basic\"]);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tmoved[2].addArray([\"trick\", \"basic\"]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//console.log(moved);\r\n\t\t\t\t\treturn moved;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tconst result = await next.forResult();\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tgame.broadcastAll(\r\n\t\t\t\t\t\tfunction (moved, player) {\r\n\t\t\t\t\t\t\tvar transform = function (input) {\r\n\t\t\t\t\t\t\t\treturn input.map(item => {\r\n\t\t\t\t\t\t\t\t\tif (item.length === 0) {\r\n\t\t\t\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t\t\t\t} else if (typeof item[0] === \"string\") {\r\n\t\t\t\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\treturn item.map(subItem => subItem[2]);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tvar moved = moved.slice(1);\r\n\t\t\t\t\t\t\tmoved = transform(moved);\r\n\t\t\t\t\t\t\tplayer.storage.lvmengmrfz = {\r\n\t\t\t\t\t\t\t\tbeifeng: [],\r\n\t\t\t\t\t\t\t\tzhongzi: [],\r\n\t\t\t\t\t\t\t\tpimao: [],\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t//console.log(moved);\r\n\t\t\t\t\t\t\tvar keys = Object.keys(player.storage.lvmengmrfz);\r\n\t\t\t\t\t\t\tfor (var i = 0; i < moved.length; i++) {\r\n\t\t\t\t\t\t\t\tfor (var j = 0; j < moved[i].length; j++) {\r\n\t\t\t\t\t\t\t\t\tplayer.storage.lvmengmrfz[keys[i]].add(moved[i][j]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tresult.moved,\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"lvmengmrfz_beifeng\", \"lvmengmrfz_zhongzi\", \"lvmengmrfz_pimao\", \"lvmengmrfz_tag\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\t// 标签\r\n\t\t\t\ttag: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: [\"gainEnd\", \"lvmengmrfzAfter\"] },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn player.storage.lvmengmrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst storage = player.storage.lvmengmrfz,\r\n\t\t\t\t\t\t\tcards = trigger.name == \"gain\" ? trigger.cards : player.getCards(\"h\");\r\n\t\t\t\t\t\tif (trigger.name == \"lvmengmrfz\") {\r\n\t\t\t\t\t\t\tfor (var i of [\"beifeng_lvmengmrfz\", \"zhongzi_lvmengmrfz\", \"pimao_lvmengmrfz\"]) {\r\n\t\t\t\t\t\t\t\tplayer.removeGaintag(i);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (let key in storage) {\r\n\t\t\t\t\t\t\tfor (let i of cards) {\r\n\t\t\t\t\t\t\t\tif (storage[key].includes(get.type2(i))) i.addGaintag(key + \"_lvmengmrfz\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t//北风\r\n\t\t\t\tbeifeng: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tusable: 4,\r\n\t\t\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar type = player.storage.lvmengmrfz[\"beifeng\"],\r\n\t\t\t\t\t\t\ttmp_bool = false;\r\n\t\t\t\t\t\tif (!type || !event.card) return false;\r\n\t\t\t\t\t\tfor (var i = 0; i < type.length; i++) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tif (get.type(event.card, \"trick\") == type[i]) {\r\n\t\t\t\t\t\t\t\ttmp_bool = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet cards = player.getCards(\"h\"),\r\n\t\t\t\t\t\t\tlist = [];\r\n\t\t\t\t\t\tfor (let i of cards) {\r\n\t\t\t\t\t\t\tlist.add(get.suit(i, player));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn list.length < 4 && tmp_bool;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar cards = player.getCards(\"h\"),\r\n\t\t\t\t\t\t\tlist = [];\r\n\t\t\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\t\t\tlist.add(get.suit(i, player));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar result = lib.suit.filter(item => !list.includes(item));\r\n\t\t\t\t\t\tvar card = get.cardPile2(card => {\r\n\t\t\t\t\t\t\tfor (var i = 0; i < result.length; i++) {\r\n\t\t\t\t\t\t\t\treturn get.suit(card) == result[i];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (card) player.gain(card, \"gain2\");\r\n\t\t\t\t\t\tif (!trigger.audioed) {\r\n\t\t\t\t\t\t\ttrigger.audioed = true;\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"lvmengmrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t//种子\r\n\t\t\t\tzhongzi: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar type = player.storage.lvmengmrfz[\"zhongzi\"],\r\n\t\t\t\t\t\t\ttmp_bool = false;\r\n\t\t\t\t\t\tif (!type || !event.card) return false;\r\n\t\t\t\t\t\tfor (var i = 0; i < type.length; i++) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tif (get.type(event.card, \"trick\") == type[i]) {\r\n\t\t\t\t\t\t\t\ttmp_bool = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn event.cards.filterInD().length > 0 && tmp_bool;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst result = await player\r\n\t\t\t\t\t\t\t.chooseTarget(\"【旅梦】:将\" + get.translation(trigger.cards) + \"交给一名其他角色\", function (card, player, target) {\r\n\t\t\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\tif (target.hasJudge(\"lebu\")) return 0;\r\n\t\t\t\t\t\t\t\tvar att = get.attitude(_status.event.player, target);\r\n\t\t\t\t\t\t\t\tif (att < 3) return 0;\r\n\t\t\t\t\t\t\t\tif (target.hasSkillTag(\"nogain\")) att /= 10;\r\n\t\t\t\t\t\t\t\tif (target.hasSha() && _status.event.sha) {\r\n\t\t\t\t\t\t\t\t\tatt /= 5;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (event.wuxie && target.needsToDiscard(1)) {\r\n\t\t\t\t\t\t\t\t\tatt /= 5;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn att / (1 + get.distance(player, target, \"absolute\"));\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"sha\", trigger.cards[0].name == \"sha\")\r\n\t\t\t\t\t\t\t.set(\"wuxie\", trigger.cards[0].name == \"wuxie\")\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\tplayer.line(result.targets[0]);\r\n\t\t\t\t\t\t\tif (!trigger.audioed) {\r\n\t\t\t\t\t\t\t\ttrigger.audioed = true;\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tplayer.logSkill(\"lvmengmrfz\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tresult.targets[0].gain(trigger.cards.filterInD(), \"gain2\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t//皮毛\r\n\t\t\t\tpimao: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar type = player.storage.lvmengmrfz[\"pimao\"],\r\n\t\t\t\t\t\t\ttmp_bool = false;\r\n\t\t\t\t\t\tif (!type || !event.card) return false;\r\n\t\t\t\t\t\tfor (var i = 0; i < type.length; i++) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tif (get.type(event.card, \"trick\") == type[i]) {\r\n\t\t\t\t\t\t\t\ttmp_bool = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn tmp_bool;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (!trigger.audioed) {\r\n\t\t\t\t\t\t\ttrigger.audioed = true;\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"lvmengmrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current != player;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.6,\r\n\t\t\t},\r\n\t\t},\r\n\t\trechenmrfz: {\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar evt = player.getLastUsed();\r\n\t\t\t\t\tif (!player.isPhaseUsing()) return \"不是你的出牌阶段\";\r\n\t\t\t\t\tif (!evt || !evt.card) return \"本回合你未使用过牌\";\r\n\t\t\t\t\treturn \"上一张你使用的牌的花色是：\" + get.translation(get.suit(evt.card));\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\tforced: true,\r\n\t\t\tfirstDo: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar evt = player.getLastUsed(1);\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (event.getParent(\"phaseUse\").player != player) return false;\r\n\t\t\t\treturn evt && evt.card && get.suit(event.card) == get.suit(evt.card) && !event.audioed;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.audioed = true;\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\taiOrder: function (player, card, num) {\r\n\t\t\t\t\tif (typeof card == \"object\" && player.isPhaseUsing()) {\r\n\t\t\t\t\t\tvar evt = player.getLastUsed();\r\n\t\t\t\t\t\tif (evt && evt.card && get.suit(evt.card) && get.suit(evt.card) == get.suit(card)) {\r\n\t\t\t\t\t\t\treturn num + 10;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcardUsable: function (card, player) {\r\n\t\t\t\t\tvar evt = player.getLastUsed();\r\n\t\t\t\t\tif (evt && evt.card && get.suit(card) == get.suit(evt.card)) return Infinity;\r\n\t\t\t\t},\r\n\t\t\t\ttargetInRange: function (card, player, target, now) {\r\n\t\t\t\t\tvar evt = player.getLastUsed();\r\n\t\t\t\t\tif (evt && evt.card && get.suit(card) == get.suit(evt.card)) return true;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"rechenmrfz_syn\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tsyn: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"useCardEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn event.getParent(\"phaseUse\").player === player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addTip(\"rechenmrfz_tip\", `热忱 ${get.translation(get.suit(trigger.card))}`, \"phaseUseEnd\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//塑心 阿尔图罗 2226\r\n\t\tqinmingmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tusable: 1,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn current != player && current.countCards(\"h\") > 0;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tselectTarget: 1,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { target } = event;\r\n\r\n\t\t\t\tconst tmp_cards = target.getCards(\"h\");\r\n\t\t\t\tconst cards = [];\r\n\t\t\t\tfor (let i of tmp_cards) {\r\n\t\t\t\t\tif (target.canRecast(i)) cards.push(i);\r\n\t\t\t\t}\r\n\t\t\t\tawait target.recast(cards);\r\n\r\n\t\t\t\tawait target.showCards(target.getCards(\"h\"), \"【琴鸣】:\" + get.translation(target) + \"的手牌\");\r\n\r\n\t\t\t\tconst canCards = [];\r\n\t\t\t\tfor (const i of target.getCards(\"h\")) {\r\n\t\t\t\t\tif (target.hasUseTarget(i)) canCards.push(i);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (canCards.length > 0) {\r\n\t\t\t\t\twhile (true) {\r\n\t\t\t\t\t\tconst card = canCards?.shift();\r\n\t\t\t\t\t\tif (!card) break;\r\n\t\t\t\t\t\tif (target.hasCard(card.name, \"h\")) target.chooseUseTarget(true, card, false);\r\n\t\t\t\t\t\telse break;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 8,\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tvar lowAtt =\r\n\t\t\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\t\t\treturn current != player && current.inRange(target) && get.attitude(player, current) < 0;\r\n\t\t\t\t\t\t\t}) && get.attitude(player, target) < 0;\r\n\t\t\t\t\t\tvar hightAtt =\r\n\t\t\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\t\t\treturn current != player && current.inRange(target) && get.attitude(player, current) < 0;\r\n\t\t\t\t\t\t\t}) && get.attitude(player, target) > 0;\r\n\t\t\t\t\t\tif (lowAtt) return -1;\r\n\t\t\t\t\t\tif (hightAtt) return 1;\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tkongwomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"drawBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.num > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst num = trigger.num;\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t\tvar cards = [],\r\n\t\t\t\t\tbanCards = [];\r\n\t\t\t\tconst loseCards = player.getHistory(\"lose\", evt => {\r\n\t\t\t\t\treturn evt.player == player;\r\n\t\t\t\t});\r\n\t\t\t\tfor (var i of loseCards) {\r\n\t\t\t\t\tif (!i.cards) continue;\r\n\t\t\t\t\tbanCards.push(i.cards);\r\n\t\t\t\t}\r\n\t\t\t\twhile (cards.length < num) {\r\n\t\t\t\t\tvar card = get.discardPile(card => {\r\n\t\t\t\t\t\treturn !cards.includes(card) && !banCards.includes(card);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (card) cards.push(card);\r\n\t\t\t\t\telse break;\r\n\t\t\t\t}\r\n\t\t\t\tplayer.gain(cards, \"gain2\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"kongwomrfz_get\", \"kongwomrfz_clear\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseUseEnd\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (player.storage.kongwomrfz_get) delete player.storage.kongwomrfz_get;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tget: {\r\n\t\t\t\t\taudio: \"kongwomrfz\",\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"loseAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.player == player || !player.isPhaseUsing()) return false;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (event.getParent().name != \"useCard\") return false;\r\n\t\t\t\t\t\tvar cards = event.cards2.slice(0);\r\n\t\t\t\t\t\tfor (var i = 0; i < cards.length; i++) {\r\n\t\t\t\t\t\t\tvar type = get.type2(cards[i]);\r\n\t\t\t\t\t\t\tif (get.position(cards[i], true) == \"o\" && type != \"equip\") {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (trigger.delay == false) game.delay();\r\n\t\t\t\t\t\tif (!player.storage.kongwomrfz_get) player.storage.kongwomrfz_get = [];\r\n\r\n\t\t\t\t\t\tconst cards = [];\r\n\t\t\t\t\t\tfor (var i = 0; i < trigger.cards2.length; i++) {\r\n\t\t\t\t\t\t\tvar card = trigger.cards2[i];\r\n\t\t\t\t\t\t\tvar type = get.type2(card);\r\n\t\t\t\t\t\t\tvar name = player.storage.kongwomrfz_get,\r\n\t\t\t\t\t\t\t\tname2 = card.name;\r\n\t\t\t\t\t\t\tif (get.position(card, true) == \"o\" && type != \"equip\" && !name.includes(name2)) {\r\n\t\t\t\t\t\t\t\tcards.push(card);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!cards || cards.length < 1) return;\r\n\t\t\t\t\t\tconst result = await player\r\n\t\t\t\t\t\t\t.chooseButton(true, [\"【空我】:请选择你要获得的牌\", cards], [1, Infinity])\r\n\t\t\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\t\t\treturn cards;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (result.links) {\r\n\t\t\t\t\t\t\tfor (let i of result.links) {\r\n\t\t\t\t\t\t\t\tconst name = get.name(i);\r\n\t\t\t\t\t\t\t\tif (!player.storage.kongwomrfz_get.includes(name)) player.storage.kongwomrfz_get.add(name);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tplayer.gain(cards, \"gain2\");\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"kongwomrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//赫德雷\r\n\t\tzhengrongmrfz: {\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.zhengrongmrfz = {\r\n\t\t\t\t\tdiscard: false,\r\n\t\t\t\t\tlosedraw: false,\r\n\t\t\t\t\tmaxhp: false,\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"damageEnd\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar list = [],\r\n\t\t\t\t\tstorage = player.storage.zhengrongmrfz;\r\n\t\t\t\tif (player.countCards(\"h\") > 0 && storage[\"discard\"] == false) list.push(\"弃牌\");\r\n\t\t\t\tif (storage[\"losedraw\"] == false) list.push(\"摸牌阶段摸牌数-1\");\r\n\t\t\t\tif (storage[\"maxhp\"] == false) list.push(\"失去体力上限\");\r\n\t\t\t\tif (list.length == 0) return false;\r\n\t\t\t\tif (event.player === undefined) return false;\r\n\t\t\t\tif (!event.player.isAlive()) return false;\r\n\t\t\t\treturn event.player == player || get.distance(player, event.player) <= 1;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\tif (event.player == player) return \"【征戎】：是否选择一项并回复一点体力？\";\r\n\t\t\t\treturn \"【征戎】:是否选择一项并令\" + get.translation(event.player) + \"回复一点体力？\";\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (get.attitude(event.player, player) < 0) return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst list = [],\r\n\t\t\t\t\tstorage = player.storage.zhengrongmrfz;\r\n\t\t\t\tif (player.countCards(\"h\") > 0 && storage[\"discard\"] == false) list.push(\"弃牌\");\r\n\t\t\t\tif (storage[\"losedraw\"] == false) list.push(\"摸牌阶段摸牌数-1\");\r\n\t\t\t\tif (storage[\"maxhp\"] == false) list.push(\"失去体力上限\");\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"prompt\", \"【征戎】:请选择一项\")\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\tif (result.control) {\r\n\t\t\t\t\tconst control = result.control;\r\n\t\t\t\t\tgame.log(control);\r\n\t\t\t\t\tif (control == \"弃牌\") {\r\n\t\t\t\t\t\tplayer.chooseToDiscard(\"he\", true, \"【征戎】:请弃置一张牌\");\r\n\t\t\t\t\t\tplayer.storage.zhengrongmrfz[\"discard\"] = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (control == \"摸牌阶段摸牌数-1\") {\r\n\t\t\t\t\t\tplayer.addMark(\"zhengrongmrfz_losedraw\", 1, false);\r\n\t\t\t\t\t\tplayer.addTempSkill(\"zhengrongmrfz_losedraw\", {\r\n\t\t\t\t\t\t\tplayer: \"phaseDrawAfter\",\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tplayer.storage.zhengrongmrfz[\"losedraw\"] = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (control == \"失去体力上限\") {\r\n\t\t\t\t\t\tplayer.loseMaxHp();\r\n\t\t\t\t\t\tplayer.storage.zhengrongmrfz[\"maxhp\"] = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttrigger.player.recover();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhengrongmrfz_rec\", \"zhengrongmrfz_draw\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\taudio: 2,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar allGone = Object.values(player.storage.zhengrongmrfz).every(function (value) {\r\n\t\t\t\t\t\t\treturn value === true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (player.storage.zhengrongmrfz === undefined) return false;\r\n\t\t\t\t\t\treturn allGone;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.drawTo(player.maxHp);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\trec: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.zhengrongmrfz = {\r\n\t\t\t\t\t\t\tdiscard: false,\r\n\t\t\t\t\t\t\tlosedraw: false,\r\n\t\t\t\t\t\t\tmaxhp: false,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tlosedraw: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"下个摸牌阶段摸牌数-#\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.num > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num -= player.countMark(\"zhengrongmrfz_losedraw\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tthreaten: 0.8,\r\n\t\t\t},\r\n\t\t},\r\n\t\tsiyanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCard2\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.targets.length > 1) return false;\r\n\t\t\t\tif (event.targets[0] == player) return false;\r\n\t\t\t\tif (!event.card || event.card.name != \"sha\") return false;\r\n\t\t\t\tvar history = event.targets[0].getHistory(\"damage\");\r\n\t\t\t\tfor (var i = 0; i < history.length; i++) {\r\n\t\t\t\t\tif (!history[i].source) continue;\r\n\t\t\t\t\tif (history[i].source == player) return true;\r\n\t\t\t\t}\r\n\t\t\t\tvar seatNum = event.targets[0].getSeatNum();\r\n\t\t\t\t// console.log(seatNum in player.storage.siyanmrfz_tol);\r\n\t\t\t\tif (seatNum in player.storage.siyanmrfz_tol && player.storage.siyanmrfz_tol[seatNum] === true) return true;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (get.attitude(event.targets[0], player) > 0) return false;\r\n\t\t\t\treturn player.hp > 1;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"【死烟】:是否失去一点体力并令\" + get.translation(event.targets[0]) + \"选择一项？\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tplayer.addTempSkill(\"siyanmrfz_rec\", {\r\n\t\t\t\t\tplayer: \"damageAfter\",\r\n\t\t\t\t});\r\n\t\t\t\tplayer.storage.siyanmrfz_rec = {\r\n\t\t\t\t\tcard: trigger.card,\r\n\t\t\t\t};\r\n\t\t\t\tconst target = trigger.targets[0];\r\n\t\t\t\tconst list = [\"无法响应\" + get.translation(player) + \"使用的【杀】\"];\r\n\t\t\t\tif (target.countCards(\"h\") > 1) list.push(\"弃置两张手牌\");\r\n\r\n\t\t\t\ttarget.loseHp();\r\n\t\t\t\tplayer.loseHp();\r\n\r\n\t\t\t\tif (list.length < 2 && target.isAlive()) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\t\tgame.filterPlayer(current => {\r\n\t\t\t\t\t\t\treturn current === target;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t);\r\n\t\t\t\t\tgame.log(target, \"选择了无法响应\", player, \"使用的【杀】\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else if (target.isAlive()) {\r\n\t\t\t\t\tresult = await target\r\n\t\t\t\t\t\t.chooseControl()\r\n\t\t\t\t\t\t.set(\"choiceList\", list)\r\n\t\t\t\t\t\t.set(\"prompt\", \"【死烟】:请选择一项\")\r\n\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\t\tif (aiPlayer.countCards(\"h\") < 3) return 0;\r\n\t\t\t\t\t\t\tif (!aiPlayer.hasShan()) return 0;\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\taiPlayer.hp === 1 &&\r\n\t\t\t\t\t\t\t\taiPlayer.countCards(\"h\", c => {\r\n\t\t\t\t\t\t\t\t\treturn get.name(c) === \"tao\" || get.name(c) === \"jiu\";\r\n\t\t\t\t\t\t\t\t}) > 0 &&\r\n\t\t\t\t\t\t\t\taiPlayer.countCards(\"h\") < 3\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tif (result?.control) {\r\n\t\t\t\t\tconst target = trigger.targets[0];\r\n\t\t\t\t\tif (result.index === 1) {\r\n\t\t\t\t\t\tgame.log(get.translation(target), \"选择了弃置两张手牌\");\r\n\t\t\t\t\t\tawait target.chooseToDiscard(\"h\", true, 2);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\t\t\tgame.filterPlayer(current => {\r\n\t\t\t\t\t\t\t\treturn current === target;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tgame.log(target, \"选择了无法响应\", player, \"使用的【杀】\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"siyanmrfz_tol\", \"siyanmrfz_clear\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\trec: {\r\n\t\t\t\t\tonremove: function (player) {\r\n\t\t\t\t\t\tdelete player.storage.siyanmrfz_rec;\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tsource: \"damageEnd\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar info = player.storage.siyanmrfz_rec;\r\n\t\t\t\t\t\treturn event.card && event.card == info.card;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (get.suit(trigger.card) == \"diamond\") player.recover();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player != player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst seatNum = trigger.player.getSeatNum();\r\n\t\t\t\t\t\tplayer.storage.siyanmrfz_tol[seatNum] = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttol: {\r\n\t\t\t\t\tinit: function (player) {\r\n\t\t\t\t\t\tplayer.storage.siyanmrfz_tol = {};\r\n\t\t\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\t\t\tif (game.players[i] == player) continue;\r\n\t\t\t\t\t\t\tplayer.storage.siyanmrfz_tol[i + 1] = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.source != undefined && player.isAlive();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst seatNum = trigger.source.getSeatNum();\r\n\t\t\t\t\t\tif (seatNum in player.storage.siyanmrfz_tol && player.storage.siyanmrfz_tol[seatNum] === false) {\r\n\t\t\t\t\t\t\tplayer.storage.siyanmrfz_tol[seatNum] = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\tconst seatNum = arg.target.getSeatNum(arg.target);\r\n\t\t\t\t\tif (seatNum in player.storage.siyanmrfz_tol || player.storage.siyanmrfz_tol[seatNum] === false) return false;\r\n\t\t\t\t\tif (arg.card.name != \"sha\" || arg.target.countCards(\"h\", \"shan\") > 1) return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//止颂\r\n\t\tkuxiumrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tif (card.name == \"sha\") return (num += player.getCards(\"j\").length);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar cards = [];\r\n\t\t\t\tif (player.countCards(\"he\") < 1) return false;\r\n\t\t\t\tfor (var i of lib.inpile) {\r\n\t\t\t\t\tif (get.type(i) == \"delay\") cards.push(i);\r\n\t\t\t\t}\r\n\t\t\t\tfor (var name of cards) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (player.canAddJudge({ name: name }, player)) return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tchooseButton: {\r\n\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\tvar cards = [];\r\n\t\t\t\t\tfor (var i of lib.inpile) {\r\n\t\t\t\t\t\tif (get.type(i) == \"delay\") cards.push(i);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar vcards = [];\r\n\t\t\t\t\tfor (var name of cards) {\r\n\t\t\t\t\t\tvar card = { name: name };\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (player.canAddJudge({ name: name }, player)) vcards.push([\"延时锦囊\", \"\", name]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar dialog = ui.create.dialog(\"苦修\", [vcards, \"vcard\"], \"hidden\");\r\n\t\t\t\t\treturn dialog;\r\n\t\t\t\t},\r\n\t\t\t\tcheck: function (button) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tvar name = button.link[2];\r\n\t\t\t\t\tswitch (name) {\r\n\t\t\t\t\t\tcase \"lebu\":\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\tcase \"bingliang\":\r\n\t\t\t\t\t\t\treturn 2;\r\n\t\t\t\t\t\tcase \"shandian\":\r\n\t\t\t\t\t\t\treturn 3;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\treturn 1.5;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\taudio: \"kuxiumrfz\",\r\n\t\t\t\t\t\tfilterCard: function (card, player, event) {\r\n\t\t\t\t\t\t\treturn player.canAddJudge({\r\n\t\t\t\t\t\t\t\tname: links[0][2],\r\n\t\t\t\t\t\t\t\tcards: [card],\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tselectTarget: -1,\r\n\t\t\t\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\t\t\t\treturn player == target;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcheck(card) {\r\n\t\t\t\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tviewAs: {\r\n\t\t\t\t\t\t\tname: links[0][2],\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tposition: \"he\",\r\n\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t\tonuse: function (links, player) {\r\n\t\t\t\t\t\t\tif (!links.cards) return;\r\n\t\t\t\t\t\t\tvar next = game.createEvent(\"kuxiumrfz_draw\", false, _status.event.getParent());\r\n\t\t\t\t\t\t\tnext.cards = links.cards;\r\n\t\t\t\t\t\t\tnext.player = player;\r\n\t\t\t\t\t\t\tnext.setContent(function () {\r\n\t\t\t\t\t\t\t\tlet num = player.getCards(\"j\").length;\r\n\t\t\t\t\t\t\t\tif (num > 0) player.draw(num);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tai: {\r\n\t\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\treturn \"【苦修】：请选择一张牌将其当做一张【\" + get.translation(links[0][2]) + \"】对自己使用\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 8,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tlirenmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"j\") > 0;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tconst cards = player.getCards(\"j\");\r\n\t\t\t\tif (cards.length == 1 && cards[0].name == \"shandian\") return false;\r\n\t\t\t\treturn player.hp > 1;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst num = player.getCards(\"j\").length;\r\n\t\t\t\tplayer.discardPlayerCard(player, num, \"j\", true);\r\n\t\t\t\tplayer.loseHp();\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//锏\r\n\t\t/** @type { Skill } */\r\n\t\tweiyamrfz: {\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tmod: {\r\n\t\t\t\ttargetInRange(card, player, target) {\r\n\t\t\t\t\tif (player.getStorage(\"weiyamrfz\").includes(target)) return true;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.player != player && !event.player.hasSkill(\"weiyamrfz_ban\") && event.player.isAlive();\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"【威压】:是否令\" + get.translation(event.player) + \"下个出牌阶段不能使用带有伤害类标签的牌？\";\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(event.player, player) < 0;\r\n\t\t\t},\r\n\t\t\tcontent: async function (event, trigger, player) {\r\n\t\t\t\ttrigger.player.addTempSkill(\"weiyamrfz_ban\", {\r\n\t\t\t\t\tplayer: \"phaseUseEnd\",\r\n\t\t\t\t});\r\n\t\t\t\tplayer.storage.weiyamrfz ??= [];\r\n\t\t\t\tplayer.storage.weiyamrfz.add(trigger.player);\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tmarktext: \"战栗\",\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"出牌阶段不能使用带有伤害类标签的牌\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardEnabled: function (card, player) {\r\n\t\t\t\t\t\t\tif (get.tag(card, \"damage\") > 0 && player.isPhaseUsing()) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.2,\r\n\t\t\t\tthreaten: 1.1,\r\n\t\t\t\tunequip: true,\r\n\t\t\t\tskillTagFilter(player, tag, arg) {\r\n\t\t\t\t\treturn player.getStorage(\"weiyamrfz\").includes(arg.target);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t/** @type { Skill } */\r\n\t\tzhiwumrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tcardname: function (card, player) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (card.cardnameCheck) return card.name;\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tcard.cardnameCheck = true;\r\n\t\t\t\t\tlet result;\r\n\t\t\t\t\tif (get.type(card) == \"trick\") result = \"sha\";\r\n\t\t\t\t\telse result = card.name;\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tdelete card.cardnameCheck;\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"useCardToTargeted\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.targets.length == 0) return false;\r\n\t\t\t\treturn event.card.name == \"sha\" && get.color(event.card) != undefined;\r\n\t\t\t},\r\n\t\t\tcontent: async function (event, trigger, player) {\r\n\t\t\t\tvar targets = trigger.targets;\r\n\t\t\t\tfor (var i = 0; i < targets.length; i++) {\r\n\t\t\t\t\tif (targets[i].hasSkill(\"zhiwumrfz_ban\")) continue;\r\n\t\t\t\t\ttargets[i].addTempSkill(\"zhiwumrfz_ban\");\r\n\t\t\t\t\ttargets[i].storage.zhiwumrfz_ban = {\r\n\t\t\t\t\t\tplayer: player,\r\n\t\t\t\t\t\tcolor: get.color(trigger.card),\r\n\t\t\t\t\t};\r\n\t\t\t\t\tplayer.line(targets[i]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhiwumrfz_count\", \"zhiwumrfz_draw\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\taudio: \"zhiwumrfz\",\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn player.getRoundHistory(\"sourceDamage\", evt => evt.player === event.player).length === 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tcount: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard1\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!player.isPhaseUsing()) return false;\r\n\t\t\t\t\t\tif (!event.card || event.card.name != \"sha\") return false;\r\n\t\t\t\t\t\tif (event.addCount === false) return false;\r\n\t\t\t\t\t\treturn event.card.cards.length > 1 || (event.card.cards.length == 1 && event.cards[0].name != event.card.name);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: async function (event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.addCount = false;\r\n\t\t\t\t\t\tif (player.stat[player.stat.length - 1].card.sha > 0) {\r\n\t\t\t\t\t\t\tplayer.stat[player.stat.length - 1].card.sha--;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tban: {\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardEnabled: function (card, player) {\r\n\t\t\t\t\t\t\tif (get.color(card) == player.storage.zhiwumrfz_ban[\"color\"]) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"useCardAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card.name == \"sha\" && event.player == player.storage.zhiwumrfz_ban[\"player\"];\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tdelete player.storage.zhiwumrfz_ban;\r\n\t\t\t\t\t\tplayer.removeSkill(\"zhiwumrfz_ban\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//莱伊\r\n\t\tshaobanmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tinRange: function (from, to) {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tto.hasCard(card => {\r\n\t\t\t\t\t\t\treturn card.name == \"shadishoumrfz\";\r\n\t\t\t\t\t\t}, \"e\")\r\n\t\t\t\t\t)\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tderivation: [\"shadishoumrfz\"],\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.countCards(\"he\") > 0 &&\r\n\t\t\t\t\t!game.hasPlayer(current => {\r\n\t\t\t\t\t\treturn current.hasCard(card => {\r\n\t\t\t\t\t\t\treturn card.name == \"shadishoumrfz\";\r\n\t\t\t\t\t\t}, \"e\");\r\n\t\t\t\t\t}) &&\r\n\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\treturn current != player && !current.isDisabled(2);\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tfilterCard: true,\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && !target.isDisabled(2);\r\n\t\t\t},\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { target } = event;\r\n\t\t\t\tconst card = game.createCard(\"shadishoumrfz\", \"heart\", 13);\r\n\t\t\t\ttarget.$gain2(card);\r\n\t\t\t\tgame.delayx();\r\n\t\t\t\ttarget.equip(card);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 5,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: -1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: \"shaobanmrfz_dam\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\tdam: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { source: \"damageBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.hasSkill(\"shaobanmrfz_ban\")) return false;\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.player != player &&\r\n\t\t\t\t\t\t\tevent.player.hasCard(card => {\r\n\t\t\t\t\t\t\t\treturn card.name == \"shadishoumrfz\";\r\n\t\t\t\t\t\t\t}, \"e\")\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"shaobanmrfz\", trigger.player);\r\n\t\t\t\t\t\tplayer.addTempSkill(\"shaobanmrfz_ban\", {\r\n\t\t\t\t\t\t\tglobal: \"phaseEnd\",\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\ttankuangmrfz: {\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"剩余#次\",\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tgetCountInRanger(player) {\r\n\t\t\t\tvar num = 0,\r\n\t\t\t\t\tplayers = game.filterPlayer();\r\n\t\t\t\tfor (var i = 0; i < players.length; i++) {\r\n\t\t\t\t\tif (player.inRange(players[i])) {\r\n\t\t\t\t\t\tnum++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn num;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"tankuangmrfz\") > 0;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (player.hp < 2) return Math.random() > 0.4;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst card = game.cardsGotoOrdering(get.cards(1)).cards[0];\r\n\t\t\t\tlet num = 0;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.showCards(card, get.translation(player) + \"展示了牌堆顶一张牌\");\r\n\t\t\t\tif (get.color(card) == get.color(trigger.card)) num++;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (get.type(card, \"trick\") == get.type(trigger.card, \"trick\")) num++;\r\n\t\t\t\tif (Number(get.number(card)) >= Number(get.number(trigger.card))) num++;\r\n\t\t\t\tif (num > 0) {\r\n\t\t\t\t\tplayer.draw(num);\r\n\t\t\t\t\tif (num == 3) player.recoverTo(player.maxHp);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.loseHp();\r\n\t\t\t\t\tplayer.removeSkill(\"tankuangmrfz\");\r\n\t\t\t\t\tplayer.addTempSkill(\"tankuangmrfz_re3\", {\r\n\t\t\t\t\t\tglobal: \"phaseBegin\",\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tplayer.removeMark(\"tankuangmrfz\", 1, false);\r\n\t\t\t},\r\n\t\t\tgroup: [\"tankuangmrfz_re\", \"tankuangmrfz_re2\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tre: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseBegin\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar num = Math.max(2, lib.skill.tankuangmrfz.getCountInRanger(player));\r\n\t\t\t\t\t\tplayer.removeMark(\"tankuangmrfz\", player.countMark(\"tankuangmrfz\"), false);\r\n\t\t\t\t\t\tplayer.addMark(\"tankuangmrfz\", num, false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tre2: {\r\n\t\t\t\t\tinit: function (player) {\r\n\t\t\t\t\t\tplayer.storage.tankuangmrfz_re2 = lib.skill.tankuangmrfz.getCountInRanger(player);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"loseAfter\", \"changeHp\", \"gainMaxHpAfter\", \"loseMaxHpAfter\"],\r\n\t\t\t\t\t\tglobal: [\"equipAfter\", \"addJudgeAfter\", \"gainAfter\", \"loseAsyncAfter\", \"addToExpansionAfter\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.storage.tankuangmrfz_re2 - Math.max(2, lib.skill.tankuangmrfz.getCountInRanger(player)) != 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (!player.storage.tankuangmrfz_re2) player.storage.tankuangmrfz_re2 = 0;\r\n\t\t\t\t\t\tvar now = Math.max(2, lib.skill.tankuangmrfz.getCountInRanger(player));\r\n\t\t\t\t\t\tvar last = player.storage.tankuangmrfz_re2;\r\n\t\t\t\t\t\tvar num = now - last;\r\n\t\t\t\t\t\tif (num > 0) {\r\n\t\t\t\t\t\t\tplayer.addMark(\"tankuangmrfz\", num, false);\r\n\t\t\t\t\t\t} else player.removeMark(\"tankuangmrfz\", Math.abs(num), false);\r\n\t\t\t\t\t\tplayer.storage.tankuangmrfz_re2 = now;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tre3: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addSkill(\"tankuangmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//新斥罪\r\n\t\tnewzhidianmrfz: {\r\n\t\t\tgetSkillsList: function (event, player) {\r\n\t\t\t\tvar list = [];\r\n\t\t\t\tvar listm = [];\r\n\t\t\t\tvar listv = [];\r\n\t\t\t\tif (player.name1 != undefined) listm = lib.character[player.name1][3];\r\n\t\t\t\telse listm = lib.character[player.name][3];\r\n\t\t\t\tif (player.name2 != undefined) listv = lib.character[player.name2][3];\r\n\t\t\t\tlistm = listm.concat(listv);\r\n\t\t\t\tvar func = function (skill) {\r\n\t\t\t\t\tvar info = get.info(skill);\r\n\t\t\t\t\tif (!info || info.charlotte) return false;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t};\r\n\t\t\t\tfor (var i = 0; i < listm.length; i++) {\r\n\t\t\t\t\tif (func(listm[i])) list.add(listm[i]);\r\n\t\t\t\t}\r\n\t\t\t\tif (player.disabledSkills) {\r\n\t\t\t\t\tfor (var key in player.disabledSkills) {\r\n\t\t\t\t\t\tlist.remove(key);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn list;\r\n\t\t\t},\r\n\t\t\tinit: (player, skill) => {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\taudio: \"zhidianmrfz\",\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 114514,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && !player.storage.newzhidianmrfz.includes(target);\r\n\t\t\t},\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\treturn 7 - get.value(card);\r\n\t\t\t},\r\n\t\t\tposition: \"he\",\r\n\t\t\tfilterCard: true,\r\n\t\t\tdelay: false,\r\n\t\t\tlose: false,\r\n\t\t\tdiscard: false,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet card = event.cards,\r\n\t\t\t\t\ttarget = event.target;\r\n\t\t\t\tplayer.give(card, target);\r\n\t\t\t\tlet list = [],\r\n\t\t\t\t\tlist2 = [];\r\n\t\t\t\tif (target.countCards(\"he\") > 1) {\r\n\t\t\t\t\tlist.add(`弃置三张牌，${get.translation(player)}获得其中一张牌`);\r\n\t\t\t\t\tlist2.add(\"选项一\");\r\n\t\t\t\t} else list.add(`<span style=\"opacity:0.5\">弃置三张牌，${get.translation(player)}获得其中一张牌（不可选:牌数少于2）</span>`);\r\n\t\t\t\tlist.add(`受到一点伤害且令${get.translation(player)}选择让你一个技能失效`);\r\n\t\t\t\tlist2.add(\"选项二\");\r\n\t\t\t\tif (!target.isLinked()) {\r\n\t\t\t\t\tlist.add(`横置武将牌，${get.translation(player)}本回合不能再对你使用此技能`);\r\n\t\t\t\t\tlist2.add(\"选项三\");\r\n\t\t\t\t} else\r\n\t\t\t\t\tlist.add(`<span style=\"opacity:0.5\">横置武将牌，${get.translation(player)}本回合不能再对你使用此技能（不可选:已被横置）</span>`);\r\n\t\t\t\tvar { control } = await target\r\n\t\t\t\t\t.chooseControl(list2)\r\n\t\t\t\t\t.set(\"choiceList\", list)\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\tvar player = _status.event.target,\r\n\t\t\t\t\t\t\tlist = _status.event.list,\r\n\t\t\t\t\t\t\ths = player.getCards(\"he\", card => {\r\n\t\t\t\t\t\t\t\treturn get.value(card) < 8;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (player.hp < 2) list.remove(\"选项二\");\r\n\t\t\t\t\t\tif (player.countCards(\"he\") < 4 || hs.length < 3) list.remove(\"选项一\");\r\n\t\t\t\t\t\tif (list.length == 0) list.push(\"选项二\");\r\n\t\t\t\t\t\treturn list[0];\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"target\", event.target)\r\n\t\t\t\t\t.set(\"list\", list2)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!control) return;\r\n\t\t\t\tswitch (control) {\r\n\t\t\t\t\tcase \"选项一\": {\r\n\t\t\t\t\t\tconst { cards } = await target.chooseToDiscard(true, \"he\", 3, \"请弃置三张牌\").forResult();\r\n\t\t\t\t\t\tif (!cards) return;\r\n\t\t\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\t\t\tif (get.position(i) != \"d\") cards.remove(i);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (cards.length == 0) return;\r\n\t\t\t\t\t\tconst { links } =\r\n\t\t\t\t\t\t\tcards.length == 1\r\n\t\t\t\t\t\t\t\t? { links: cards }\r\n\t\t\t\t\t\t\t\t: await player.chooseCardButton(cards, \"【执典】:请选择获得一张牌\", true, 1).forResult();\r\n\t\t\t\t\t\tplayer.gain(links[0], \"gain2\");\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcase \"选项二\": {\r\n\t\t\t\t\t\tlet skillList = lib.skill.newzhidianmrfz.getSkillsList(event, target);\r\n\t\t\t\t\t\tif (skillList.length > 0) {\r\n\t\t\t\t\t\t\tvar { control } = await player\r\n\t\t\t\t\t\t\t\t.chooseControl(skillList)\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", `选择${get.translation(target)}武将牌上的一个技能并令其失效`)\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\ttarget.disableSkill(\"newzhidianmrfz_disable\", control);\r\n\t\t\t\t\t\t\ttarget.addTempSkill(\"newzhidianmrfz_disable\", {\r\n\t\t\t\t\t\t\t\tplayer: \"phaseAfter\",\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tgame.log(player, \"选择了\", target, \"的技能\", \"#g【\" + get.translation(control) + \"】\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttarget.damage();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcase \"选项三\":\r\n\t\t\t\t\t\ttarget.link(true);\r\n\t\t\t\t\t\tif (!player.storage.newzhidianmrfz) player.storage.newzhidianmrfz = [];\r\n\t\t\t\t\t\tplayer.storage.newzhidianmrfz.add(target);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"newzhidianmrfz_count\", \"newzhidianmrfz_clear\"],\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.2,\r\n\t\t\t\torder: 8,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tvar att = get.attitude(player, target);\r\n\t\t\t\t\t\tif (att < 0) {\r\n\t\t\t\t\t\t\treturn -(1 + target.countCards(\"he\") * 0.1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseAfter\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.newzhidianmrfz = [];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tcount: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\t\t\tplayer: [\"changeHp\", \"enterGame\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlib.skill.newzhidianmrfz.usable = player.hp;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdisable: {\r\n\t\t\t\t\tonremove(player, skill) {\r\n\t\t\t\t\t\tplayer.enableSkill(skill);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlocked: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent(storage, player, skill) {\r\n\t\t\t\t\t\t\tlet list = [];\r\n\t\t\t\t\t\t\tfor (let i in player.disabledSkills) {\r\n\t\t\t\t\t\t\t\tif (player.disabledSkills[i].includes(skill)) list.push(i);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (list.length) {\r\n\t\t\t\t\t\t\t\tlet str = \"失效技能：\";\r\n\t\t\t\t\t\t\t\tfor (let i = 0; i < list.length; i++) {\r\n\t\t\t\t\t\t\t\t\tif (lib.translate[list[i] + \"_info\"]) str += get.translation(list[i]) + \"、\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn str.slice(0, str.length - 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tnewpijimrfz: {\r\n\t\t\taudio: \"pijimrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCard\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tlocked: false,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn current != player && current.isLinked();\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\tgame.filterPlayer(current => {\r\n\t\t\t\t\t\treturn current != player && current.isLinked();\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\treturn arg.target.isLinked();\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: \"newpijimrfz_damage\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn event.player.isLinked() && event.getParent().name != \"newpijimrfz_damage\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"newpijimrfz\");\r\n\t\t\t\t\t\tfor (const i of game.players) {\r\n\t\t\t\t\t\t\tif (player == i || !i.isLinked()) continue;\r\n\t\t\t\t\t\t\tplayer.line(i);\r\n\t\t\t\t\t\t\ti.damage();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//新塞雷娅\r\n\t\tnewgaihuamrfz: {\r\n\t\t\taudio: \"gaihuamrfz\",\r\n\t\t\tenable: [\"chooseToUse\", \"chooseToRespond\"],\r\n\t\t\thiddenCard: function (player, name) {\r\n\t\t\t\tif (lib.inpile.includes(name) && !player.hasSkill(\"newgaihuamrfz_ban\") && get.type(name) == \"basic\") return true;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.responded || event.newgaihuamrfz || player.hasSkill(\"newgaihuamrfz_ban\")) return false;\r\n\t\t\t\tfor (var i of lib.inpile) {\r\n\t\t\t\t\tif (get.type(i) == \"basic\" && event.filterCard({ name: i }, player, event)) return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet evt = event.getParent(2),\r\n\t\t\t\t\tstorage = player.storage.newgaihuamrfz_clear;\r\n\t\t\t\tif (!evt) return;\r\n\t\t\t\tevt.set(\"newgaihuamrfz\", true);\r\n\t\t\t\tlet list = [\"牌堆顶三张牌\"],\r\n\t\t\t\t\tlist2 = [\"选项一\"],\r\n\t\t\t\t\thd = [];\r\n\t\t\t\tif (ui.discardPile.childNodes.length > 2) {\r\n\t\t\t\t\tlist.add(\"弃牌堆顶三张牌\");\r\n\t\t\t\t\tlist2.add(\"选项二\");\r\n\t\t\t\t} else list.add('<span style=\"opacity:0.5\">弃牌堆顶三张牌(不可选:弃牌堆牌数小于3）</span>');\r\n\t\t\t\tfor (var i of game.players) {\r\n\t\t\t\t\tif (get.distance(player, i) > 1) continue;\r\n\t\t\t\t\tif (i.countCards(\"h\") < 1) continue;\r\n\t\t\t\t\tif (i == player) continue;\r\n\t\t\t\t\thd = hd.concat(i.getCards(\"h\"));\r\n\t\t\t\t}\r\n\t\t\t\tif (hd.length > 0) {\r\n\t\t\t\t\tlist.add(\"与你距离不大于1的其他角色的手牌\");\r\n\t\t\t\t\tlist2.add(\"选项三\");\r\n\t\t\t\t} else list.add('<span style=\"opacity:0.5\">与你距离不大于1的其他角色的手牌(不可选:你距离不大于1的其他角色没有手牌）</span>');\r\n\t\t\t\tconst { control } = await player\r\n\t\t\t\t\t.chooseControl(list2, \"cancel2\")\r\n\t\t\t\t\t.set(\"choiceList\", list)\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\tvar list = _status.event.list,\r\n\t\t\t\t\t\t\tplayer = _status.event.player,\r\n\t\t\t\t\t\t\thd = _status.event.hd;\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tgame.countPlayer(current => {\r\n\t\t\t\t\t\t\t\treturn player != current && get.distance(player, current) <= 1 && get.distance(player, current) < 0;\r\n\t\t\t\t\t\t\t}) < 1 ||\r\n\t\t\t\t\t\t\thd.length < 3\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\tlist.remove(\"选项三\");\r\n\t\t\t\t\t\tif (list.length == 0) return \"cancel2\";\r\n\t\t\t\t\t\treturn list.randomGet();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"list\", list2)\r\n\t\t\t\t\t.set(\"hd\", hd)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!control || control == \"cancel2\") {\r\n\t\t\t\t\tevt.goto(0);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar cards = [];\r\n\t\t\t\tswitch (control) {\r\n\t\t\t\t\tcase \"选项一\":\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tcards = get.cards(3, true);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"选项二\":\r\n\t\t\t\t\t\tvar num = 3;\r\n\t\t\t\t\t\twhile (num--) {\r\n\t\t\t\t\t\t\tif (ui.discardPile.hasChildNodes() == false) {\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tvar cardx = ui.discardPile.removeChild(ui.discardPile.firstChild);\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tcardx.original = \"d\";\r\n\t\t\t\t\t\t\tcards.push(cardx);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (let i = cards.length - 1; i >= 0; i--) {\r\n\t\t\t\t\t\t\tui.discardPile.insertBefore(cards[i], ui.discardPile.firstChild);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"选项三\":\r\n\t\t\t\t\t\tcards = hd;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tconst { links } = await player\r\n\t\t\t\t\t.chooseButton([\"【钙化】:选择要\" + (evt.name == \"chooseToUse\" ? \"使用\" : \"打出\") + \"的牌\", cards])\r\n\t\t\t\t\t.set(\"filterButton\", function (button) {\r\n\t\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\t\tevent = _status.event;\r\n\t\t\t\t\t\treturn _status.event.cards.includes(button.link);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\r\n\t\t\t\t\t\t\"cards\",\r\n\t\t\t\t\t\tcards.filter(function (card) {\r\n\t\t\t\t\t\t\tif (get.type(card) != \"basic\") return false;\r\n\t\t\t\t\t\t\treturn evt.filterCard(card, evt.player, evt);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"ai\", function (button) {\r\n\t\t\t\t\t\tvar evt = _status.event.getParent(3);\r\n\t\t\t\t\t\tif (evt && evt.ai) {\r\n\t\t\t\t\t\t\tvar tmp = _status.event;\r\n\t\t\t\t\t\t\t_status.event = evt;\r\n\t\t\t\t\t\t\tvar result = (evt.ai || event.ai1)(button.link, _status.event.player, evt);\r\n\t\t\t\t\t\t\t_status.event = tmp;\r\n\t\t\t\t\t\t\treturn result;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!links) {\r\n\t\t\t\t\tevt.goto(0);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar card = links[0],\r\n\t\t\t\t\tname = links[0].name;\r\n\t\t\t\tif (_status.currentPhase == player)\r\n\t\t\t\t\tplayer.addTempSkill(\"newgaihuamrfz_ban\", {\r\n\t\t\t\t\t\tglobal: \"phaseBeginStart\",\r\n\t\t\t\t\t});\r\n\t\t\t\tif (evt.name == \"chooseToUse\") {\r\n\t\t\t\t\tgame.broadcastAll(\r\n\t\t\t\t\t\tfunction (result, name) {\r\n\t\t\t\t\t\t\tlib.skill.newgaihuamrfz_backup.viewAs = {\r\n\t\t\t\t\t\t\t\tname: name,\r\n\t\t\t\t\t\t\t\tcards: [result],\r\n\t\t\t\t\t\t\t\tisCard: true,\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcard,\r\n\t\t\t\t\t\tname\r\n\t\t\t\t\t);\r\n\t\t\t\t\tlet evtx = event.getParent(2);\r\n\t\t\t\t\tif (!evtx) return;\r\n\t\t\t\t\tevtx.set(\"_backupevent\", \"newgaihuamrfz_backup\");\r\n\t\t\t\t\tevtx.set(\"openskilldialog\", \"请选择\" + get.translation(card) + \"的目标\");\r\n\t\t\t\t\tevtx.backup(\"newgaihuamrfz_backup\");\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"gaihuamrfz\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdelete evt.result.skill;\r\n\t\t\t\t\tdelete evt.result.used;\r\n\t\t\t\t\tevt.result.card = get.autoViewAs(card);\r\n\t\t\t\t\tevt.result.cards = [card];\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"gaihuamrfz\");\r\n\t\t\t\t\tevt.redo();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tevt.goto(0);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget: function (card, player, target, effect) {\r\n\t\t\t\t\t\tif (get.tag(card, \"respondShan\")) return 0.7;\r\n\t\t\t\t\t\tif (get.tag(card, \"respondSha\")) return 0.7;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\torder: 11,\r\n\t\t\t\trespondShan: true,\r\n\t\t\t\trespondSha: true,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: function (player) {\r\n\t\t\t\t\t\tif (_status.event.dying) return get.attitude(player, _status.event.dying);\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tnewgaihuamrfz_backup: {\r\n\t\t\tsourceSkill: \"newgaihuamrfz\",\r\n\t\t\tasync precontent(event, trigger, player) {\r\n\t\t\t\tdelete event.result.skill;\r\n\t\t\t\tvar name = event.result.card?.name,\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tcards = event.result.card?.cards.slice(0);\r\n\t\t\t\tevent.result.cards = cards;\r\n\t\t\t\tvar rcard = cards[0],\r\n\t\t\t\t\tcard;\r\n\t\t\t\tif (rcard.name == name) card = get.autoViewAs(rcard);\r\n\t\t\t\telse card = get.autoViewAs({ name, isCard: true });\r\n\t\t\t\tevent.result.card = card;\r\n\t\t\t},\r\n\t\t\tfilterCard: function () {\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tselectCard: -1,\r\n\t\t},\r\n\t\tpanshimrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\ttargetEnabled: function (card, player, target) {\r\n\t\t\t\t\tfor (var i of game.players) {\r\n\t\t\t\t\t\tif (i.getHistory(\"useCard\").length > 0) return;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.getHistory(\"useCard\").length > 1) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tevent.card &&\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t(get.type2(event.card) == \"trick\" || (get.type(event.card) == \"basic\" && ![\"shan\", \"tao\", \"jiu\", \"du\"].includes(event.card.name)))\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//新玛恩纳\r\n\t\tlianmangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\ttarget: \"useCardToTargeted\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0 && event.card && event.player != player && !player.hasSkill(\"zhanmangmrfz_ban\");\r\n\t\t\t},\r\n\t\t\tbanHs: function (event, trigger, player) {\r\n\t\t\t\tplayer.addTempSkill(\"lianmangmrfz_ban\");\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\t_status.tmpCard = trigger.card;\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.when({\r\n\t\t\t\t\t\tglobal: \"useCardAfter\",\r\n\t\t\t\t\t\tplayer: \"dying\",\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.filter((event, player) => {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn event.card == _status.tmpCard || event.name == \"dying\";\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tplayer.removeSkill(\"lianmangmrfz_ban\");\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tdelete _status.tmpCard;\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tlet num = get.cardNameLength(trigger.card);\r\n\t\t\t\tconst { cards } = await player\r\n\t\t\t\t\t.chooseCard(`【敛芒】:请重铸至多${get.cnNumber(num)}张牌`, [0, num], true)\r\n\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\tif (get.tag(card, \"damage\")) return 10 - get.value(card);\r\n\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"filterCard\", card => player.canRecast(card))\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards || cards.length == 0) {\r\n\t\t\t\t\tlib.skill.lianmangmrfz.banHs(event, trigger, player);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet hs = player.getCards(\"h\");\r\n\t\t\t\tawait player.recast(cards, undefined, undefined);\r\n\t\t\t\tif (cards.filter(i => get.tag(i, \"damage\")).length > 0) player.draw();\r\n\t\t\t\tif (hs.isSubset(cards)) trigger.player.damage();\r\n\t\t\t\tlib.skill.lianmangmrfz.banHs(event, trigger, player);\r\n\t\t\t},\r\n\t\t\tgroup: [\"lianmangmrfz_cancel\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardEnabled2: function (card, player) {\r\n\t\t\t\t\t\t\tif (get.position(card) == \"h\") return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tcancel: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\taudio: \"lianmangmrfz\",\r\n\t\t\t\t\ttrigger: { source: \"damageBefore\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn !player.hasSkill(\"zhanmangmrfz_ban\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet num = trigger.num;\r\n\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t\tlet list = [\"选项一\"];\r\n\t\t\t\t\t\tlet chooseList = [`摸${get.cnNumber(num)}张牌`, `回复${get.cnNumber(num)}点体力`];\r\n\t\t\t\t\t\tif (player.getDamagedHp() > 0) {\r\n\t\t\t\t\t\t\tlist.push(\"选项二\");\r\n\t\t\t\t\t\t} else chooseList[1] = '<span style=\"opacity:0.5\">' + chooseList[2] + \"（不可选：已损失体力值为零）</span>\";\r\n\t\t\t\t\t\tconst { control } =\r\n\t\t\t\t\t\t\tlist.length == 1\r\n\t\t\t\t\t\t\t\t? player.draw(num)\r\n\t\t\t\t\t\t\t\t: await player\r\n\t\t\t\t\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t\t\t\t\t.set(\"choiceList\", chooseList)\r\n\t\t\t\t\t\t\t\t\t\t.set(\"prompt\", \"【敛芒】:请选择一项\")\r\n\t\t\t\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\tvar list = _status.event.list;\r\n\t\t\t\t\t\t\t\t\t\t\tif (list.includes(\"选项二\")) return \"选项二\";\r\n\t\t\t\t\t\t\t\t\t\t\treturn \"选项一\";\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.set(\"list\", list)\r\n\t\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (!control) return;\r\n\t\t\t\t\t\tswitch (control) {\r\n\t\t\t\t\t\t\tcase \"选项一\":\r\n\t\t\t\t\t\t\t\tplayer.draw(num);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase \"选项二\":\r\n\t\t\t\t\t\t\t\tplayer.recover(num);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 0.8,\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget: function (card, player, target) {\r\n\t\t\t\t\t\tif (get.tag(card, \"damage\")) return [0, -999999];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhanmangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > player.getHandcardLimit();\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\tvar num = Math.min(player.maxHp, player.countCards(\"h\") - player.getHandcardLimit());\r\n\t\t\t\treturn `【展芒】:你可以摸${get.cnNumber(num)}张牌、本回合使用【杀】的次数+${num}，且本回合【敛芒】失效`;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst num = Math.min(player.maxHp, player.countCards(\"h\") - player.getHandcardLimit());\r\n\t\t\t\tplayer.draw(num);\r\n\t\t\t\tplayer.addMark(\"zhanmangmrfz_add\", num, false);\r\n\t\t\t\tplayer.addTempSkill(\"zhanmangmrfz_add\", {\r\n\t\t\t\t\tplayer: \"phaseEnd\",\r\n\t\t\t\t});\r\n\t\t\t\tplayer.addTempSkill(\"zhanmangmrfz_ban\", {\r\n\t\t\t\t\tplayer: \"phaseEnd\",\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\t\t\treturn `·【敛芒】失效<br>·本回合使用【杀】的次数+${player.countMark(\"zhanmangmrfz_add\")}`;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tadd: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tvar count = player.countMark(\"zhanmangmrfz_add\");\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num + count;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: function () {\r\n\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\tnum = player.countCards(\"h\") - player.getHandcardLimit();\r\n\t\t\t\t\treturn 1 + Math.max(0.2, num * 0.2);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txingyimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"phaseJieshuBegin\" },\r\n\t\t\tgetDamagedTarget: function (event, player) {\r\n\t\t\t\tlet list = [];\r\n\t\t\t\tfor (var i of game.players) {\r\n\t\t\t\t\tif (player == i) continue;\r\n\t\t\t\t\tlet history = i.getHistory(\"damage\");\r\n\t\t\t\t\tfor (var j = 0; j < history.length; j++) {\r\n\t\t\t\t\t\tlet damaged = history[j].player;\r\n\t\t\t\t\t\tlist.push(damaged);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn list;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar list = lib.skill.xingyimrfz.getDamagedTarget(event, player);\r\n\t\t\t\treturn list.length > 0 && _status.currentPhase != player;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet list = lib.skill.xingyimrfz.getDamagedTarget(event, player);\r\n\t\t\t\tconst { targets } = await player\r\n\t\t\t\t\t.chooseTarget(\"【行义】:你可以受到一点伤害并令一名本回合受到过伤害的其他角色回复一点体力\")\r\n\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\tvar list = _status.event.list;\r\n\t\t\t\t\t\treturn list.includes(target);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\tif (player.hp < 2 && player.countCards(\"h\", \"tao\") + player.countCards(\"h\", \"jiu\") < 1) return 0;\r\n\t\t\t\t\t\treturn get.attitude(target, player) > 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"list\", list)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!targets) return;\r\n\t\t\t\ttargets[0].recover();\r\n\t\t\t\tplayer.damage(\"nosource\");\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.logSkill(\"xingyimrfz\", targets[0]);\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//左乐\r\n\t\tqikumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"gainBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\treturn player.countCards(\"h\") == 0 && event.getParent(2).name != \"qikumrfz\";\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar num = player.maxHp - trigger.cards.length;\r\n\t\t\t\tplayer.draw(num);\r\n\t\t\t},\r\n\t\t},\r\n\t\t/** @type { Skill } */\r\n\t\tbingzhumrfz: {\r\n\t\t\tmarktext: \"司\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"司\",\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t\tcontent: \"expansion\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar suit = [];\r\n\t\t\t\tfor (var i of player.getCards(\"h\")) {\r\n\t\t\t\t\tif (suit.includes(get.suit(i))) continue;\r\n\t\t\t\t\tsuit.push(get.suit(i));\r\n\t\t\t\t}\r\n\t\t\t\tif (suit.length == 0) return;\r\n\t\t\t\tconst { control } = await player\r\n\t\t\t\t\t.chooseControl(suit, \"cancel2\")\r\n\t\t\t\t\t.set(\"prompt\", \"【秉烛】:请选择一种花色\")\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\tvar suit = _status.event.suit;\r\n\t\t\t\t\t\treturn suit.randomGet();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"suit\", suit)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!control || control == \"cancel2\") {\r\n\t\t\t\t\tif (control == \"cancel2\") {\r\n\t\t\t\t\t\tplayer.setSkillCount(\"bingzhumrfz\", -1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar hs = player.getCards(\"h\", card => {\r\n\t\t\t\t\treturn get.suit(card) == control;\r\n\t\t\t\t});\r\n\t\t\t\tif (hs.length == 0) return;\r\n\t\t\t\tlet list = [];\r\n\t\t\t\twhile (hs.length) {\r\n\t\t\t\t\tconst { cards } = await player\r\n\t\t\t\t\t\t.chooseCard(true, `【秉烛】:请分配第${get.cnNumber(list.length + 1)}组手牌`)\r\n\t\t\t\t\t\t.set(\"selectCard\", function () {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tvar num = game.countPlayer(current => current != player) - (list.length + 1) > 0 ? 1 : hs.length;\r\n\t\t\t\t\t\t\treturn [num, Infinity];\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\tif (!ui.selected.cards) return 1;\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tgame.countPlayer(current => {\r\n\t\t\t\t\t\t\t\t\treturn current != player && get.attitude(current, player) < 0;\r\n\t\t\t\t\t\t\t\t}) < 2\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\tfor (var i of ui.selected.cards) {\r\n\t\t\t\t\t\t\t\tif (get.suit(i) == get.suit(card)) return [-1, -1, 1, 1].randomGet();\r\n\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"filterCard\", card => {\r\n\t\t\t\t\t\t\tvar hs = _status.event.hs;\r\n\t\t\t\t\t\t\treturn hs.includes(card);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"hs\", hs)\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (!cards) continue;\r\n\t\t\t\t\tlist.push([cards]);\r\n\t\t\t\t\ths.removeArray(cards);\r\n\t\t\t\t}\r\n\t\t\t\tlet count = list.length,\r\n\t\t\t\t\tlist2 = [];\r\n\t\t\t\twhile (count) {\r\n\t\t\t\t\tconst { targets } = await player\r\n\t\t\t\t\t\t.chooseTarget(true, `【秉烛】:请将${get.translation(list[list2.length])}置于一名其他角色的武将牌上`)\r\n\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\treturn get.attitude(player, target) < 0;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"filterTarget\", lib.filter.notMe)\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tcount--;\r\n\t\t\t\t\tif (!targets) continue;\r\n\t\t\t\t\tlist2.push(targets[0]);\r\n\t\t\t\t}\r\n\t\t\t\tfor (let i = 0; i < list2.length; i++) {\r\n\t\t\t\t\tlist2[i].addToExpansion(list[i][0], list2[i], \"giveAuto\").gaintag.add(\"bingzhumrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"bingzhumrfz_clear\", \"bingzhumrfz_eff\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"useCardToTargeted\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar cards = event.player.getExpansions(\"bingzhumrfz\");\r\n\t\t\t\t\t\tif (!cards.length || !event.card) return false;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (get.type2(event.card) != \"trick\" && get.type(event.card) != \"basic\") return false;\r\n\t\t\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\t\t\tif (get.name(i) == get.name(event.card) || get.suit(i) == get.suit(event.card)) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar cards = trigger.player\r\n\t\t\t\t\t\t\t.getExpansions(\"bingzhumrfz\")\r\n\t\t\t\t\t\t\t.filter(i => get.name(i) == get.name(trigger.card) || get.suit(i) == get.suit(trigger.card));\r\n\t\t\t\t\t\tconst {\r\n\t\t\t\t\t\t\tresult: { bool, links },\r\n\t\t\t\t\t\t} = await player.chooseCardButton(\"【秉烛】:你可以弃置其一张‘司’并令此牌对一名目标角色无效\", cards).set(\"ai\", () => {\r\n\t\t\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\t\t\tevent = _status.event.getTrigger(),\r\n\t\t\t\t\t\t\t\tfriend = game.filterPlayer(current => current == player || get.attitude(current, player) > 0);\r\n\t\t\t\t\t\t\tfor (var i of event.targets) {\r\n\t\t\t\t\t\t\t\tif (friend.includes(i)) return 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (!bool) return;\r\n\t\t\t\t\t\tconst { targets } = await player\r\n\t\t\t\t\t\t\t.chooseTarget(\"【秉烛】:请选择一名目标角色，然后此牌对该角色无效\", true)\r\n\t\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\treturn get.attitude(target, player) > 0;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\r\n\t\t\t\t\t\t\t\tvar targets = _status.event.targets;\r\n\t\t\t\t\t\t\t\treturn targets.includes(target);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"targets\", trigger.targets)\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (!targets) return;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttrigger.getParent().excluded.add(targets[0]);\r\n\t\t\t\t\t\ttrigger.player.loseToDiscardpile(links);\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"bingzhumrfz\", targets[0]);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"dieAfter\" },\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\tfor (var i of game.players) {\r\n\t\t\t\t\t\t\tvar cards = i.getExpansions(\"bingzhumrfz\");\r\n\t\t\t\t\t\t\tif (cards.length) i.loseToDiscardpile(cards);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//新山\r\n\t\tzhefumrfz: {\r\n\t\t\taudio: \"zhuangtimrfz\",\r\n\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"h\", card => get.tag(card, \"damage\")) > 0;\r\n\t\t\t},\r\n\t\t\tprompt(event, player) {\r\n\t\t\t\treturn `【蛰伏】:是否将手牌中所有带有伤害类标签的牌置入弃牌堆或牌堆顶并摸等量的牌？`;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet cards = player.getCards(\"h\", card => get.tag(card, \"damage\"));\r\n\t\t\t\tif (!cards.length) return;\r\n\t\t\t\tconst { moved } = await player\r\n\t\t\t\t\t.chooseToMove()\r\n\t\t\t\t\t.set(\"list\", [[\"牌堆底\", cards], [\"弃牌堆\"]])\r\n\t\t\t\t\t.set(\"processAI\", list => {\r\n\t\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\t\tcards = list[0][1],\r\n\t\t\t\t\t\t\tcanUse = cards.filter(i => player.hasUseTarget(i)),\r\n\t\t\t\t\t\t\tbottom = [],\r\n\t\t\t\t\t\t\tdisPile = [];\r\n\t\t\t\t\t\tvar red = 0,\r\n\t\t\t\t\t\t\tblack = 0;\r\n\t\t\t\t\t\tfor (var i of canUse) {\r\n\t\t\t\t\t\t\tvar color = get.color(i);\r\n\t\t\t\t\t\t\tif (!color) continue;\r\n\t\t\t\t\t\t\telse if (color == \"red\") red += get.value(i);\r\n\t\t\t\t\t\t\telse black += get.value(i);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (red > black) bottom = canUse.slice().filter(i => get.color(i) == \"red\");\r\n\t\t\t\t\t\telse bottom = canUse.slice().filter(i => get.color(i) == \"black\");\r\n\t\t\t\t\t\tbottom.sort(function (a, b) {\r\n\t\t\t\t\t\t\treturn get.value(b, player) - get.value(a, player);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tdisPile = cards.slice().filter(i => !bottom.includes(i));\r\n\t\t\t\t\t\treturn [bottom, disPile];\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!moved) return;\r\n\t\t\t\tvar bottom = moved[0],\r\n\t\t\t\t\tdisPile = moved[1];\r\n\t\t\t\tconsole.log(moved);\r\n\t\t\t\tif (disPile.length) player.loseToDiscardpile(disPile);\r\n\t\t\t\tif (bottom.length) {\r\n\t\t\t\t\tgame.log(player, \"将\", get.cnNumber(bottom.length), \"置入了牌堆底\");\r\n\t\t\t\t\tfor (var i of bottom) ui.cardPile.appendChild(i);\r\n\t\t\t\t\tplayer.$throw(bottom.length, 1000);\r\n\t\t\t\t}\r\n\t\t\t\tawait player.draw(cards.length);\r\n\t\t\t},\r\n\t\t},\r\n\t\tyubianmrfz: {\r\n\t\t\taudio: \"julimrfz\",\r\n\t\t\ttrigger: { player: \"phaseJieshuBegin\" },\r\n\t\t\tprompt(event, player) {\r\n\t\t\t\treturn `【狱变】:你可以使用牌堆顶的牌（目标必须合法），若你因此使用的牌颜色均相同，你重复这个流程`;\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn current != player && !!player.canUse(\"sha\", current) && get.attitude(player, current) < 0;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet cardx = [],\r\n\t\t\t\t\tcolor;\r\n\t\t\t\twhile (true) {\r\n\t\t\t\t\tvar card = get.bottomCards()[0];\r\n\t\t\t\t\tplayer.$throw(card, null);\r\n\t\t\t\t\tif (!player.hasUseTarget(card)) return;\r\n\t\t\t\t\tconst result = await player.chooseUseTarget(card, `【狱变】:请选择${get.translation(card)}的目标`).forResult();\r\n\t\t\t\t\tif (!result || !result.cards) return;\r\n\t\t\t\t\tvar cards = result.cards;\r\n\t\t\t\t\tfor (var i of cards) cardx.push(i);\r\n\t\t\t\t\tcolor = get.color(cards[0]);\r\n\t\t\t\t\tfor (var i of cardx) {\r\n\t\t\t\t\t\tif (get.color(i) != color) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcolor = get.color(i);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//新空弦\r\n\t\tsanyimrfz: {\r\n\t\t\taudio: \"lieshimrfz\",\r\n\t\t\ttrigger: { player: \"useCard2\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (!event.card) return false;\r\n\t\t\t\tif (get.name(event.card) != \"sha\" || get.number(event.card) == null) return false;\r\n\t\t\t\treturn event.targets && event.targets.length == 1;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { targets } = await player\r\n\t\t\t\t\t.chooseTarget()\r\n\t\t\t\t\t.set(\"forced\", true)\r\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\r\n\t\t\t\t\t\tif (target == player || _status.event.targets.includes(target) || !player.canUse(_status.event.cardx, target, false))\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\tvar selected = ui.selected.targets,\r\n\t\t\t\t\t\t\tbase = _status.event.targetx.hp;\r\n\t\t\t\t\t\tvar total = Object.values(selected).reduce((accumulator, currentValue) => {\r\n\t\t\t\t\t\t\tif (currentValue[\"hp\"]) {\r\n\t\t\t\t\t\t\t\treturn accumulator + currentValue.hp;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn accumulator;\r\n\t\t\t\t\t\t}, 0);\r\n\t\t\t\t\t\treturn target.hp + total + base <= _status.event.cardx.number;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"prompt\", `【散逸】:你可以额外指定任意名体力值之和不超过${trigger.card.number - trigger.targets[0].hp}的角色`)\r\n\t\t\t\t\t.set(\"selectTarget\", [0, Infinity])\r\n\t\t\t\t\t.set(\"complexTarget\", true)\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\treturn get.effect(target, _status.event.cardx, _status.event.player, _status.event.player) > 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"targets\", trigger.targets)\r\n\t\t\t\t\t.set(\"targetx\", trigger.targets[0])\r\n\t\t\t\t\t.set(\"cardx\", trigger.card)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!targets) return false;\r\n\t\t\t\tfor (var i of targets) {\r\n\t\t\t\t\ttrigger.targets.push(i);\r\n\t\t\t\t\tplayer.line(i);\r\n\t\t\t\t}\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.logSkill(\"sanyimrfz\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tbaofengmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.card && get.name(event.card) == \"sha\" && get.color(event.card) != \"none\";\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { bool } = await player\r\n\t\t\t\t\t.chooseUseTarget(\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\t\tsuit: \"none\",\r\n\t\t\t\t\t\t\tnumber: trigger.card.number,\r\n\t\t\t\t\t\t\tnature: trigger.card.nature,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfalse,\r\n\t\t\t\t\t\tfalse\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"prompt\", `【追矢】:你可以视为使用一张无色且点数为${trigger.card.number}的${get.translation(trigger.card.nature)}【杀】`)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!bool) return;\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//ela 艾拉\r\n\t\tzuzhimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tevent.card &&\r\n\t\t\t\t\tget.color(event.card) != \"none\" &&\r\n\t\t\t\t\tevent.player &&\r\n\t\t\t\t\tevent.player.isIn() &&\r\n\t\t\t\t\t(!event.player.storage.zuzhimrfz || !event.player.storage.zuzhimrfz.includes(get.color(event.card)))\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tprompt(event, player) {\r\n\t\t\t\treturn `【阻滞】:是否令${event.player == player ? \"你\" : get.translation(event.player)}本回合无法使用或打出${get.translation(get.color(event.card))}的牌？`;\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\treturn get.attitude(event.player, player) < 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar target = trigger.player;\r\n\t\t\t\tif (!target.storage.zuzhimrfz_ban) target.storage.zuzhimrfz_ban = [];\r\n\t\t\t\ttarget.storage.zuzhimrfz_ban.add(get.color(trigger.card));\r\n\t\t\t\ttarget.addTempSkill(\"zuzhimrfz_ban\", {\r\n\t\t\t\t\tglobal: \"phaseEnd\",\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\t\t\treturn `本回合不能使用或打出${get.translation(player.storage.zuzhimrfz_ban)}的牌`;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardEnabled: function (card, player) {\r\n\t\t\t\t\t\t\tif (player.getStorage(\"zuzhimrfz_ban\").includes(get.color(card))) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcardRespondable: function (card, player) {\r\n\t\t\t\t\t\t\tif (player.getStorage(\"zuzhimrfz_ban\").includes(get.color(card))) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcardSavable: function (card, player) {\r\n\t\t\t\t\t\t\tif (player.getStorage(\"zuzhimrfz_ban\").includes(get.color(card))) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tleimingmrfz: {\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\tif (game.me == player) {\r\n\t\t\t\t\t\treturn `记录的内容：${get.translation(player.storage.leimingmrfz)}`;\r\n\t\t\t\t\t} else return `有${player.storage.leimingmrfz.length}个记录的内容`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.storage.leimingmrfz = [];\r\n\t\t\t\tvar list1 = [],\r\n\t\t\t\t\tlist2 = [],\r\n\t\t\t\t\tlist3 = [],\r\n\t\t\t\t\tlist4 = [];\r\n\t\t\t\tfor (var i = 0; i < lib.inpile.length; i++) {\r\n\t\t\t\t\tvar type = get.type(lib.inpile[i]);\r\n\t\t\t\t\tif (type == \"basic\") {\r\n\t\t\t\t\t\tlist1.push([\"基本\", \"\", lib.inpile[i]]);\r\n\t\t\t\t\t} else if (type == \"trick\") {\r\n\t\t\t\t\t\tlist2.push([\"锦囊\", \"\", lib.inpile[i]]);\r\n\t\t\t\t\t} else if (type == \"delay\") {\r\n\t\t\t\t\t\tlist3.push([\"锦囊\", \"\", lib.inpile[i]]);\r\n\t\t\t\t\t} else if (type == \"equip\") {\r\n\t\t\t\t\t\tlist3.push([\"装备\", \"\", lib.inpile[i]]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconst { links } = await player\r\n\t\t\t\t\t.chooseButton([get.prompt(\"leimingmrfz\"), [list1.concat(list2).concat(list3).concat(list4), \"vcard\"]])\r\n\t\t\t\t\t.set(\"filterButton\", function (button) {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\tif (player.storage.leimingmrfz.includes(button.link[2])) return false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", function (button) {\r\n\t\t\t\t\t\tvar rand = _status.event.rand;\r\n\t\t\t\t\t\tswitch (button.link[2]) {\r\n\t\t\t\t\t\t\tcase \"sha\":\r\n\t\t\t\t\t\t\t\treturn 5 + rand[1];\r\n\t\t\t\t\t\t\tcase \"tao\":\r\n\t\t\t\t\t\t\t\treturn 4 + rand[2];\r\n\t\t\t\t\t\t\tcase \"lebu\":\r\n\t\t\t\t\t\t\t\treturn 3 + rand[3];\r\n\t\t\t\t\t\t\tcase \"shan\":\r\n\t\t\t\t\t\t\t\treturn 4.5 + rand[4];\r\n\t\t\t\t\t\t\tcase \"wuzhong\":\r\n\t\t\t\t\t\t\t\treturn 4 + rand[5];\r\n\t\t\t\t\t\t\tcase \"shunshou\":\r\n\t\t\t\t\t\t\t\treturn 3 + rand[6];\r\n\t\t\t\t\t\t\tcase \"nanman\":\r\n\t\t\t\t\t\t\t\treturn 2 + rand[7];\r\n\t\t\t\t\t\t\tcase \"wanjian\":\r\n\t\t\t\t\t\t\t\treturn 2 + rand[8];\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\treturn rand[0];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"rand\", [\r\n\t\t\t\t\t\tMath.random(),\r\n\t\t\t\t\t\tMath.random(),\r\n\t\t\t\t\t\tMath.random(),\r\n\t\t\t\t\t\tMath.random(),\r\n\t\t\t\t\t\tMath.random(),\r\n\t\t\t\t\t\tMath.random(),\r\n\t\t\t\t\t\tMath.random(),\r\n\t\t\t\t\t\tMath.random(),\r\n\t\t\t\t\t\tMath.random(),\r\n\t\t\t\t\t])\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!links) return;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.logSkill(\"leimingmrfz\");\r\n\t\t\t\tplayer.storage.leimingmrfz.add(links[0][2]);\r\n\t\t\t\tvar { control } = await player\r\n\t\t\t\t\t.chooseControl(lib.suit)\r\n\t\t\t\t\t.set(\"prompt\", \"【雷鸣】:请选择一种花色\")\r\n\t\t\t\t\t.set(\"ai\", () => lib.suit.randomGet())\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!control) return;\r\n\t\t\t\tplayer.storage.leimingmrfz.add(control);\r\n\t\t\t\tvar { control } = await player\r\n\t\t\t\t\t.chooseControl(\"basic\", \"trick\", \"equip\")\r\n\t\t\t\t\t.set(\"prompt\", \"【雷鸣】:请选择一种类型\")\r\n\t\t\t\t\t.set(\"ai\", () => [\"basic\", \"basic\", \"basic\", \"trick\", \"trick\", \"equip\"].randomGet())\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!control) return;\r\n\t\t\t\tplayer.storage.leimingmrfz.add(control);\r\n\t\t\t},\r\n\t\t\tgroup: \"leimingmrfz_eff\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\taudio: \"leimingmrfz\",\r\n\t\t\t\t\ttrigger: { global: \"useCard\" },\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tvar storage = player.storage.leimingmrfz,\r\n\t\t\t\t\t\t\tcard = event.card;\r\n\t\t\t\t\t\tif (player.storage.leimingmrfz_eff) return false;\r\n\t\t\t\t\t\tif (!storage || storage.length == 0) return false;\r\n\t\t\t\t\t\tif (player == event.player) return false;\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tstorage.includes(get.suit(card, event.player)) ||\r\n\t\t\t\t\t\t\tstorage.includes(get.name(card, event.player)) ||\r\n\t\t\t\t\t\t\tstorage.includes(get.type2(card, event.player))\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt(event, player) {\r\n\t\t\t\t\t\treturn `【雷鸣】:是否视为对${get.translation(event.player)}使用一张任意颜色的雷【杀】？`;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck(event, player) {\r\n\t\t\t\t\t\tif (get.attitude(event.player, player) > 0) return false;\r\n\t\t\t\t\t\treturn get.effect(event.player, { name: \"sha\", nature: \"thunder\" }, player, player) > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.leimingmrfz_eff = true;\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.when({\r\n\t\t\t\t\t\t\t\tplayer: \"leimingmrfz_effAfter\",\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.then(async (event, trigger, player) => {\r\n\t\t\t\t\t\t\t\tdelete player.storage.leimingmrfz_eff;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// .emb({ firstDo: true });\r\n\t\t\t\t\t\tvar target = trigger.player;\r\n\t\t\t\t\t\t// if (target.countDiscardableCards(player, 'he')) player.discardPlayerCard('he', true, target)\r\n\t\t\t\t\t\t//     .set('target', target)\r\n\t\t\t\t\t\t//     .set('ai', lib.card.guohe.ai.button);\r\n\t\t\t\t\t\tif (player.canUse({ name: \"sha\", nature: \"thunder\" }, target, false)) {\r\n\t\t\t\t\t\t\tvar { control } = await player\r\n\t\t\t\t\t\t\t\t.chooseControl(\"red\", \"black\")\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", `【雷鸣】:请选择使用雷【杀】的颜色`)\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\t\t\t\t\ttarget = _status.event.target;\r\n\t\t\t\t\t\t\t\t\tvar red = get.effect(\r\n\t\t\t\t\t\t\t\t\t\t\ttarget,\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tnature: \"thunder\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor: \"red\",\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\tplayer,\r\n\t\t\t\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\tblack = get.effect(\r\n\t\t\t\t\t\t\t\t\t\t\ttarget,\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tnature: \"thunder\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor: \"black\",\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\tplayer,\r\n\t\t\t\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\tif (red > black) return 0;\r\n\t\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"target\", target)\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\tif (!control) return;\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tplayer.canUse(\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\t\t\t\t\tnature: \"thunder\",\r\n\t\t\t\t\t\t\t\t\t\tcolor: control,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\ttarget,\r\n\t\t\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tplayer.useCard(\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\t\t\t\t\tnature: \"thunder\",\r\n\t\t\t\t\t\t\t\t\t\tcolor: control,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\ttarget,\r\n\t\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar list = [],\r\n\t\t\t\t\t\t\tstorage = player.storage.leimingmrfz,\r\n\t\t\t\t\t\t\tcard = trigger.card;\r\n\t\t\t\t\t\tif (storage.includes(get.name(card, target))) list.push(get.name(card, target));\r\n\t\t\t\t\t\tif (storage.includes(get.suit(card, target))) list.push(get.suit(card, target));\r\n\t\t\t\t\t\tif (storage.includes(get.type2(card, target))) list.push(get.type2(card, target));\r\n\t\t\t\t\t\tvar { control } =\r\n\t\t\t\t\t\t\tlist.length == 1\r\n\t\t\t\t\t\t\t\t? { control: list[0] }\r\n\t\t\t\t\t\t\t\t: await player\r\n\t\t\t\t\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t\t\t\t\t.set(\"prompt\", `【雷鸣】:请选择清除一个记录`)\r\n\t\t\t\t\t\t\t\t\t\t.set(\"list\", list)\r\n\t\t\t\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\tvar list = _status.event.list;\r\n\t\t\t\t\t\t\t\t\t\t\treturn list.randomGet();\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (!control) return;\r\n\t\t\t\t\t\tplayer.storage.leimingmrfz.remove(control);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//阿斯卡纶\r\n\t\tdunyingmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tglobalTo(from, to, distance) {\r\n\t\t\t\t\tvar cards = to.getCards(\"s\", function (card) {\r\n\t\t\t\t\t\treturn card.hasGaintag(\"dunyingmrfz\");\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (cards.length) return distance + 1;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmarktext: \"影\",\r\n\t\t\tintro: {\r\n\t\t\t\tmark: function (dialog, storage, player) {\r\n\t\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\t\treturn card.hasGaintag(\"dunyingmrfz\");\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (game.me == player) dialog.addAuto(cards);\r\n\t\t\t\t\telse return `共有${cards.length}张牌`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tonremove: function (player, skill) {\r\n\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\treturn card.hasGaintag(\"dunyingmrfz\");\r\n\t\t\t\t});\r\n\t\t\t\tif (cards.length) {\r\n\t\t\t\t\tplayer.lose(cards, ui.discardPile);\r\n\t\t\t\t\tplayer.$throw(cards, 1000);\r\n\t\t\t\t\tgame.log(cards, \"进入了弃牌堆\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseJieshuBegin\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\treturn card.hasGaintag(\"dunyingmrfz\");\r\n\t\t\t\t});\r\n\t\t\t\tif (\r\n\t\t\t\t\tplayer.countCards(\"h\", card => {\r\n\t\t\t\t\t\treturn !card.hasGaintag(\"dunyingmrfz\");\r\n\t\t\t\t\t}) < 1\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\treturn cards.length < player.maxHp;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar num = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\treturn card.hasGaintag(\"dunyingmrfz\");\r\n\t\t\t\t}).length;\r\n\t\t\t\tconst { cards } =\r\n\t\t\t\t\tplayer.countCards(\"h\", card => {\r\n\t\t\t\t\t\treturn !card.hasGaintag(\"dunyingmrfz\");\r\n\t\t\t\t\t}) +\r\n\t\t\t\t\t\tnum <=\r\n\t\t\t\t\tplayer.maxHp\r\n\t\t\t\t\t\t? { cards: player.getCards(\"h\") }\r\n\t\t\t\t\t\t: await player\r\n\t\t\t\t\t\t\t\t.chooseCard(\"h\", get.prompt(\"dunyingmrfz\"), \"将所有手牌置于武将牌上，称之为“影”\", true)\r\n\t\t\t\t\t\t\t\t.set(\"selectCard\", () => {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\t\tvar num = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\t\t\t\t\t\treturn card.hasGaintag(\"dunyingmrfz\");\r\n\t\t\t\t\t\t\t\t\t}).length;\r\n\t\t\t\t\t\t\t\t\treturn player.maxHp - num;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"filterCard\", card => {\r\n\t\t\t\t\t\t\t\t\treturn !card.hasGaintag(\"dunyingmrfz\");\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\t\tif (player.hasUseTarget(card) && !player.hasValueTarget(card)) return 0;\r\n\t\t\t\t\t\t\t\t\tif ([\"sha\", \"shan\", \"wuxie\", \"caochuan\"].includes(card.name)) return 2 + Math.random();\r\n\t\t\t\t\t\t\t\t\treturn 1 + Math.random();\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\tgame.log(player, \"将\", cards.length, \"张牌置于在武将牌上\");\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.loseToSpecial(cards, \"dunyingmrfz\");\r\n\t\t\t\tplayer.markSkill(\"dunyingmrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"dunyingmrfz_gain\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tgain: {\r\n\t\t\t\t\taudio: \"dunyingmrfz\",\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tusable: 1,\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\t\t\treturn card.hasGaintag(\"dunyingmrfz\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (!event.cards.length) return cards.length < player.maxHp;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tvar position = event.card.cards.map(i => i.original);\r\n\t\t\t\t\t\treturn position.every(item => item != \"h\") && cards.length < player.maxHp;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: \"【遁影】:你可以将牌堆顶的一张牌置于你的武将牌上，称之为“影”\",\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar cards = get.cards();\r\n\t\t\t\t\t\tgame.log(player, \"将一张牌置于在武将牌上\");\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.loseToSpecial(cards, \"dunyingmrfz\");\r\n\t\t\t\t\t\tplayer.markSkill(\"dunyingmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tniximrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"phaseJieshuBegin\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.player.isIn() && event.player != player && player.canUse(\"sha\", event.player, false);\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { cards } = await player\r\n\t\t\t\t\t.chooseToUse(\r\n\t\t\t\t\t\tfunction (card, player, event) {\r\n\t\t\t\t\t\t\tif (get.name(card) != \"sha\") return false;\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\treturn lib.filter.filterCard.apply(this, arguments);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\"【匿袭】是否对\" + get.translation(trigger.player) + \"使用一张杀？\"\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"logSkill\", \"niximrfz\")\r\n\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\tif (target != _status.event.sourcex && !ui.selected.targets.includes(_status.event.sourcex)) return false;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn lib.filter.targetEnabled.apply(this, arguments);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"sourcex\", trigger.player)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\tvar isDamaged = player.hasHistory(\"useCard\", evt => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\tevt.getParent(2) == event &&\r\n\t\t\t\t\t\tevt.card &&\r\n\t\t\t\t\t\tevt.card.cardid &&\r\n\t\t\t\t\t\tplayer.hasHistory(\"sourceDamage\", evtx => {\r\n\t\t\t\t\t\t\treturn evtx.card && evt.card.cardid == evtx.card.cardid;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\t\t\t\tif (!isDamaged && player.isIn() && trigger.player.isIn()) {\r\n\t\t\t\t\tvar target = trigger.player,\r\n\t\t\t\t\t\ttargetx = trigger.player,\r\n\t\t\t\t\t\tlist = [];\r\n\t\t\t\t\tif (target.getNext() == player) return;\r\n\t\t\t\t\tconst { bool } = await player.chooseBool(`【匿袭】:是否将座位移到${get.translation(trigger.player)}下家？`).forResult();\r\n\t\t\t\t\tif (!bool) return;\r\n\t\t\t\t\twhile (targetx.getNext() != player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttargetx = targetx.getNext();\r\n\t\t\t\t\t\tlist.push(targetx);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (list.length == 0) return;\r\n\t\t\t\t\tlist.reverse();\r\n\t\t\t\t\tfor (var i of list) {\r\n\t\t\t\t\t\tawait game.broadcastAll(\r\n\t\t\t\t\t\t\tfunction (target1, target2) {\r\n\t\t\t\t\t\t\t\tgame.swapSeat(target1, target2);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\ti,\r\n\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// logos 逻格斯 李狗剩\r\n\t\tbaidumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"damageEnd\",\r\n\t\t\t},\r\n\t\t\tusable: 1,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (!event.card) return false;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tvar num = get.cardNameLength(event.card);\r\n\t\t\t\tif (typeof num !== \"number\" || num < 1) return false;\r\n\t\t\t\treturn player.countCards(\"he\") > 0 && event.player.isIn();\r\n\t\t\t},\r\n\t\t\t// direct: true,\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tlet sourceCards = trigger.cards || undefined;\r\n\t\t\t\tconst { result } = await player\r\n\t\t\t\t\t.chooseToDiscard(\"he\")\r\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"baidumrfz\"))\r\n\t\t\t\t\t.set(\r\n\t\t\t\t\t\t\"prompt2\",\r\n\t\t\t\t\t\t`你可以弃置一张牌，${sourceCards === undefined ? \"(\" + get.translation(trigger.card) + \"无对应的实体牌)\" : \"你获得\" + get.translation(trigger.card) + \"(\" + get.translation(sourceCards) + \"),\"}然后${get.translation(trigger.player)}摸你弃置的牌与对其造成伤害的牌的字数之差的绝对值张牌。`\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\t\ttarget = _status.event.targetx,\r\n\t\t\t\t\t\t\tcardx = trigger.card,\r\n\t\t\t\t\t\t\tatt = get.attitude(player, target);\r\n\t\t\t\t\t\tif (att > 0) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\treturn Math.abs(get.cardNameLength(cardx) - get.cardNameLength(card)) - Math.floor(get.value(card) / 10);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tif (Math.abs(get.cardNameLength(cardx) - get.cardNameLength(card)) > cardx.cards.length) return 0;\r\n\t\t\t\t\t\t\treturn get.value(cardx.cards) - get.value(card);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"targetx\", trigger.player)\r\n\t\t\t\t\t.set(\"cardx\", trigger.card);\r\n\t\t\t\tevent.result = result;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet sourceCards = trigger.cards || undefined;\r\n\t\t\t\tlet cards = event.cards;\r\n\t\t\t\tvar gaincard = [];\r\n\t\t\t\tfor (var i of sourceCards) {\r\n\t\t\t\t\tif (get.position(i, true) == \"o\") gaincard.push(i);\r\n\t\t\t\t}\r\n\t\t\t\tif (gaincard.length > 0) player.gain(gaincard, \"gain2\");\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tvar num = Math.abs(get.cardNameLength(trigger.card) - get.cardNameLength(cards[0]));\r\n\t\t\t\tif (num > 0) trigger.player.draw(num);\r\n\t\t\t\tplayer.line(trigger.player);\r\n\t\t\t},\r\n\t\t},\r\n\t\tyuhuimrfz: {\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = {\r\n\t\t\t\t\tdel: false,\r\n\t\t\t\t\tnames: [],\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tmark(dialog, content, player) {\r\n\t\t\t\t\tvar names = player.storage.yuhuimrfz[\"names\"];\r\n\t\t\t\t\tdialog.addText(`本回合【语汇】使用过的牌:<br>${get.translation(names)}`);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"chooseToUse\",\r\n\t\t\thiddenCard: function (player, name) {\r\n\t\t\t\treturn player.countCards(\"hes\") > 0 && !player.storage.yuhuimrfz[\"names\"].includes(name);\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.countCards(\"hes\") < 1) return false;\r\n\t\t\t\tfor (var name of lib.inpile) {\r\n\t\t\t\t\tif (player.storage.yuhuimrfz[\"names\"].includes(name)) continue;\r\n\t\t\t\t\tif (event.filterCard({ name: name, isCard: true }, player, event)) return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tchooseButton: {\r\n\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\tvar list = [];\r\n\t\t\t\t\tfor (var name of lib.inpile) {\r\n\t\t\t\t\t\tif (player.storage.yuhuimrfz.names.includes(name)) {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (event.filterCard({ name: name }, player, event)) {\r\n\t\t\t\t\t\t\tif (name == \"sha\") {\r\n\t\t\t\t\t\t\t\tlist.push([\"基本\", \"\", \"sha\"]);\r\n\t\t\t\t\t\t\t\tfor (var j of lib.inpile_nature) {\r\n\t\t\t\t\t\t\t\t\tlist.push([\"基本\", \"\", \"sha\", j]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if (get.type(name) == \"trick\") {\r\n\t\t\t\t\t\t\t\tlist.push([\"锦囊\", \"\", name]);\r\n\t\t\t\t\t\t\t} else if (get.type(name) == \"basic\") {\r\n\t\t\t\t\t\t\t\tlist.push([\"基本\", \"\", name]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn ui.create.dialog(\"语汇\", [list, \"vcard\"]);\r\n\t\t\t\t},\r\n\t\t\t\tfilter: function (button, player) {\r\n\t\t\t\t\tvar cards = player.getCards(\"hes\"),\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tname = button.link[2],\r\n\t\t\t\t\t\tcardsx = [];\r\n\t\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\t\tif (get.cardNameLength(i) >= get.cardNameLength(name)) cardsx.push(name);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\treturn _status.event.getParent().filterCard({ name: name }, player, _status.event.getParent()) && cardsx.includes(name);\r\n\t\t\t\t},\r\n\t\t\t\tcheck: function (button) {\r\n\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (player.countCards(\"hs\", button.link[2]) > 0) return 0;\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (button.link[2] == \"wugu\") return;\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tvar effect = player.getUseValue(button.link[2]);\r\n\t\t\t\t\tif (effect > 0) return effect;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t},\r\n\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tfilterCard(card) {\r\n\t\t\t\t\t\t\tvar needNumber = get.cardNameLength(links[0][2]);\r\n\t\t\t\t\t\t\treturn get.cardNameLength(card) >= needNumber;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\taudio: \"yuhuimrfz\",\r\n\t\t\t\t\t\tselectCard: 1,\r\n\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t\tcheck: function (card) {\r\n\t\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tposition: \"hes\",\r\n\t\t\t\t\t\tviewAs: { name: links[0][2], nature: links[0][3] },\r\n\t\t\t\t\t\tasync precontent(event, trigger, player) {\r\n\t\t\t\t\t\t\tif (!player.storage.yuhuimrfz)\r\n\t\t\t\t\t\t\t\tplayer.storage.yuhuimrfz = {\r\n\t\t\t\t\t\t\t\t\tdel: false,\r\n\t\t\t\t\t\t\t\t\tnames: [],\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.storage.yuhuimrfz[\"names\"].add(lib.skill.yuhuimrfz_backup.viewAs.name);\r\n\t\t\t\t\t\t\tif (player.storage.yuhuimrfz[\"del\"] != true) {\r\n\t\t\t\t\t\t\t\tplayer.storage.yuhuimrfz[\"del\"] = true;\r\n\t\t\t\t\t\t\t\tplayer.when({ global: \"phaseEnd\" }).then(async (event, trigger, player) => {\r\n\t\t\t\t\t\t\t\t\tplayer.storage.yuhuimrfz = {\r\n\t\t\t\t\t\t\t\t\t\tdel: false,\r\n\t\t\t\t\t\t\t\t\t\tnames: [],\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\treturn \"将一张牌当做\" + (get.translation(links[0][3]) || \"\") + get.translation(links[0][2]) + \"使用\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tsave: true,\r\n\t\t\t\trespondSha: true,\r\n\t\t\t\trespondShan: true,\r\n\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\tif (!player.countCards(\"hes\")) return false;\r\n\t\t\t\t\tif (tag == \"respondSha\" || tag == \"respondShan\") {\r\n\t\t\t\t\t\tif (arg == \"respond\") return false;\r\n\t\t\t\t\t\treturn !player.storage.yuhuimrfz[\"names\"].includes(tag == \"respondSha\" ? \"sha\" : \"shan\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\torder: 4,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t\tthreaten: 2.8,\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 维什戴尔 异格w 益达\r\n\t\tyuximrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tglobalTo(from, to, distance) {\r\n\t\t\t\t\tvar cards = to.getCards(\"s\", function (card) {\r\n\t\t\t\t\t\treturn card.hasGaintag(\"yuximrfzx\");\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (cards.length) return distance + 2;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmarktext: \"死魂灵\",\r\n\t\t\tintro: {\r\n\t\t\t\tmark: function (dialog, storage, player) {\r\n\t\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\t\treturn card.hasGaintag(\"yuximrfzx\");\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (cards && cards.length > 0) dialog.addAuto(\"其他角色计算与你的距离+2\");\r\n\t\t\t\t\telse return `没有‘死魂灵’`;\r\n\t\t\t\t\tif (game.me == player) dialog.addAuto(cards);\r\n\t\t\t\t\telse dialog.addAuto(`共有${cards.length}张牌`);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tonremove: function (player, skill) {\r\n\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\treturn card.hasGaintag(\"yuximrfzx\");\r\n\t\t\t\t});\r\n\t\t\t\tif (cards.length) {\r\n\t\t\t\t\tgame.cardsGotoSpecial(cards);\r\n\t\t\t\t\tplayer.$throw(cards, 1000);\r\n\t\t\t\t\tgame.log(cards, \"被销毁\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tlib.skill.yuximrfz.onremove(player, \"yuximrfz\");\r\n\t\t\t\tvar cards = [],\r\n\t\t\t\t\tnature = [\"fire\", \"thunder\"];\r\n\t\t\t\tfor (var i = 0; i < player.maxHp; i++) {\r\n\t\t\t\t\tvar name = lib.inpile\r\n\t\t\t\t\t\t.filter(name => {\r\n\t\t\t\t\t\t\treturn get.type(name) == \"trick\" || get.type(name) == \"basic\";\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.randomGet();\r\n\t\t\t\t\tcards.push(\r\n\t\t\t\t\t\tgame.createCard(\r\n\t\t\t\t\t\t\tname,\r\n\t\t\t\t\t\t\tlib.suit.randomGet(),\r\n\t\t\t\t\t\t\tMath.floor(Math.random() * 13) + 1,\r\n\t\t\t\t\t\t\tname == \"sha\" ? nature.randomGet() : undefined\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\tcards.map(card => {\r\n\t\t\t\t\tcard.storage.yuximrfzx = true;\r\n\t\t\t\t});\r\n\t\t\t\tgame.log(player, \"将\", cards.length, \"张牌置于在武将牌上\");\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.loseToSpecial(cards, \"yuximrfzx\");\r\n\t\t\t\tplayer.markSkill(\"yuximrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"yuximrfz_destroy\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdestroy: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"loseEnd\", \"equipEnd\", \"addJudgeEnd\", \"gainEnd\", \"loseAsyncEnd\", \"addToExpansionEnd\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar evt = event.getl(player);\r\n\t\t\t\t\t\tif (!evt || !evt.cards) return false;\r\n\t\t\t\t\t\tfor (var i of evt.cards) {\r\n\t\t\t\t\t\t\tif (i.storage.yuximrfzx == true) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar cards = [];\r\n\t\t\t\t\t\tvar evt = trigger.getl(player);\r\n\t\t\t\t\t\tif (evt && evt.cards) {\r\n\t\t\t\t\t\t\tfor (let i of evt.cards) {\r\n\t\t\t\t\t\t\t\tif (i.storage.yuximrfzx == true) cards.push(i);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgame.cardsGotoSpecial(cards);\r\n\t\t\t\t\t\tgame.log(cards, \"被销毁了\");\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (Math.random() > 0.5) player.logSkill(\"yuximrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thaolimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tcompare(card1, card2) {\r\n\t\t\t\tif (get.suit(card1) == get.suit(card2)) return true;\r\n\t\t\t\tif (get.number(card1) == get.number(card2)) return true;\r\n\t\t\t\tif (get.name(card1) == get.name(card2)) return true;\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\treturn card.hasGaintag(\"yuximrfzx\");\r\n\t\t\t\t});\r\n\t\t\t\tif (cards.length < 1) return false;\r\n\t\t\t\tif (!player.isPhaseUsing()) return false;\r\n\t\t\t\tif (event.card.storage.yuximrfzx == true) return false;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (get.type(event.card) == \"equip\" || get.type(event.card) == \"delay\") return false;\r\n\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\tif (lib.skill.haolimrfz.compare(i, event.card)) return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { cards } = await player\r\n\t\t\t\t\t.chooseCard(\"s\")\r\n\t\t\t\t\t.set(\"filterCard\", card => lib.skill.haolimrfz.compare(card, trigger.card))\r\n\t\t\t\t\t.set(\"prompt\", `【好礼】:你可以弃置一张‘死魂灵’，视为使用一张${get.translation(get.name(trigger.card))}`)\r\n\t\t\t\t\t.set(\"ai\", card => get.value(trigger.card) - get.value(card))\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\tplayer.discard(cards);\r\n\t\t\t\tplayer.chooseUseTarget({ name: get.name(trigger.card), isCard: true }, true, false);\r\n\t\t\t},\r\n\t\t},\r\n\t\tshezumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\treturn card.hasGaintag(\"yuximrfzx\");\r\n\t\t\t\t});\r\n\t\t\t\treturn (\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tevent.getParent().name != \"shezumrfz\" &&\r\n\t\t\t\t\tevent.player.isIn() &&\r\n\t\t\t\t\tcards &&\r\n\t\t\t\t\tcards.length > 0 &&\r\n\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\treturn current != player && current != event.player && get.distance(event.player, current) <= 3;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tresult: { cards, targets },\r\n\t\t\t\t} = await player\r\n\t\t\t\t\t.chooseCardTarget({\r\n\t\t\t\t\t\tprompt: `【射祖】:你可以弃置一张‘死魂灵’并对一名距离${get.translation(trigger.player)}不大于3的角色（不能是你或${get.translation(trigger.player)}）造成一点火焰伤害`,\r\n\t\t\t\t\t\tfilterCard(card) {\r\n\t\t\t\t\t\t\treturn card.hasGaintag(\"yuximrfzx\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tposition: \"s\",\r\n\t\t\t\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\t\t\t\tvar damaged = _status.event.targetx;\r\n\t\t\t\t\t\t\treturn target != player && target != damaged && get.distance(damaged, target) <= 3;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tai1: card => 8 - get.value(card),\r\n\t\t\t\t\t\tai2: target => get.damageEffect(target, player, player, \"fire\") > 0,\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"targetx\", trigger.player)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards || !targets) return;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.logSkill(\"shezumrfz\", targets[0]);\r\n\t\t\t\tplayer.discard(cards);\r\n\t\t\t\ttargets[0].damage(player, \"fire\");\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 魔王 小特同学 特蕾西娅\r\n\t\tduanzhangmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tmark: function (dialog, storage, player) {\r\n\t\t\t\t\tvar players = player.storage.duanzhangmrfz.slice().filter(target => target != player);\r\n\t\t\t\t\tif (players && players.length > 0) {\r\n\t\t\t\t\t\tdialog.addAuto(\"这一次我不会离开了...\");\r\n\t\t\t\t\t\tplayers = players.map(i => i.name);\r\n\t\t\t\t\t\tdialog.addSmall([players, \"character\"]);\r\n\t\t\t\t\t} else return \"没有【断章】角色\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tonremove: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => current != player) && (event.name != \"phase\" || game.phaseNumber == 0);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { targets } = await player\r\n\t\t\t\t\t.chooseTarget(true)\r\n\t\t\t\t\t.set(\"prompt\", `【断章】:请选择【断章】目标`)\r\n\t\t\t\t\t.set(\"filterTarget\", lib.filter.notMe)\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\tvar att = get.attitude(_status.event.player, target);\r\n\t\t\t\t\t\tif (att > 0) return att + 1;\r\n\t\t\t\t\t\tif (att == 0) return Math.random();\r\n\t\t\t\t\t\treturn att;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!targets) return;\r\n\t\t\t\tvar target = targets[0];\r\n\t\t\t\tif (!player.storage.duanzhangmrfz) player.storage.duanzhangmrfz = [];\r\n\t\t\t\tif (!target.storage.duanzhangmrfz) target.storage.duanzhangmrfz = [];\r\n\t\t\t\tplayer.storage.duanzhangmrfz.addArray([target, player]);\r\n\t\t\t\ttarget.storage.duanzhangmrfz.addArray([target, player]);\r\n\t\t\t\tplayer.markSkill(\"duanzhangmrfz\");\r\n\t\t\t\tplayer.line(target);\r\n\t\t\t\tfor (var i of player.storage.duanzhangmrfz) {\r\n\t\t\t\t\tif (i != player) i.addSkill(\"canxiangmrfz_nodelay\");\r\n\t\t\t\t\ti.addSkill(\"duanzhangmrfz_eff1\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"duanzhangmrfz_clear\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"dieAfter\" },\r\n\t\t\t\t\tforceDie: true,\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn event.player.hasSkill(\"duanzhangmrfz_eff1\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\tfor (var i of game.players) {\r\n\t\t\t\t\t\t\tif (!i.storage.duanzhangmrfz) continue;\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tif (i.storage.duanzhangmrfz.includes(trigger.player)) i.storage.duanzhangmrfz.remove(trigger.player);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff1: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: [\"loseEnd\", \"equipEnd\", \"addJudgeEnd\", \"gainEnd\", \"loseAsyncEnd\", \"addToExpansionEnd\", \"duanzhangmrfzAfter\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t(player.storage.duanzhangmrfz && player.storage.duanzhangmrfz.length > 1) ^ Number(player.hasSkill(\"duanzhangmrfz_group\"))\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (player.storage.duanzhangmrfz && player.storage.duanzhangmrfz.length > 1) {\r\n\t\t\t\t\t\t\tvar cards = [],\r\n\t\t\t\t\t\t\t\ttarget = game.findPlayer(current => {\r\n\t\t\t\t\t\t\t\t\treturn player.storage.duanzhangmrfz.includes(current);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif (!target) return;\r\n\t\t\t\t\t\t\tfor (var i of target.storage.duanzhangmrfz) {\r\n\t\t\t\t\t\t\t\tif (i.countCards(\"h\") == 0) continue;\r\n\t\t\t\t\t\t\t\tif (i == player) continue;\r\n\t\t\t\t\t\t\t\tfor (var j of i.getCards(\"h\")) cards.push(j);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar cardsx = cards.map(card => {\r\n\t\t\t\t\t\t\t\tvar cardx = ui.create.card();\r\n\t\t\t\t\t\t\t\tcardx.init(get.cardInfo(card));\r\n\t\t\t\t\t\t\t\tcardx._cardid = card.cardid;\r\n\t\t\t\t\t\t\t\treturn cardx;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif (cardsx.length < 1) return;\r\n\t\t\t\t\t\t\tplayer.directgains(cardsx, null, \"duanzhangmrfz\");\r\n\t\t\t\t\t\t\tplayer.addSkill(\"duanzhangmrfz_group\");\r\n\t\t\t\t\t\t} else player.removeSkill(\"duanzhangmrfz_group\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tgroup: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tgroup: [\"duanzhangmrfz_eff_use\", \"duanzhangmrfz_eff_lose\"],\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: [\"addJudgeAfter\", \"gainAfter\", \"loseAfter\", \"loseAsyncAfter\", \"cardsDiscardAfter\", \"equipAfter\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.name == \"gain\") return event.cards.length;\r\n\t\t\t\t\t\tvar cards = event.getd();\r\n\t\t\t\t\t\treturn cards.length;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: function (player) {\r\n\t\t\t\t\t\tvar cards2 = player.getCards(\"s\", card => {\r\n\t\t\t\t\t\t\treturn card.hasGaintag(\"duanzhangmrfz\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (player.isOnline2()) {\r\n\t\t\t\t\t\t\tplayer.send(\r\n\t\t\t\t\t\t\t\tfunction (cards, player) {\r\n\t\t\t\t\t\t\t\t\tcards.forEach(i => i.delete());\r\n\t\t\t\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcards2,\r\n\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcards2.forEach(i => i.delete());\r\n\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar cards = [];\r\n\t\t\t\t\t\tvar idList = player.getCards(\"s\", card => card.hasGaintag(\"duanzhangmrfz\")).map(i => i._cardid);\r\n\t\t\t\t\t\tvar target = game.findPlayer(current => {\r\n\t\t\t\t\t\t\treturn player.storage.duanzhangmrfz.includes(current);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tfor (var i of target.storage.duanzhangmrfz) {\r\n\t\t\t\t\t\t\tif (i.countCards(\"h\") == 0) continue;\r\n\t\t\t\t\t\t\tif (i == player) continue;\r\n\t\t\t\t\t\t\tfor (var j of i.getCards(\"h\")) {\r\n\t\t\t\t\t\t\t\tif (idList.includes(j.cardid)) continue;\r\n\t\t\t\t\t\t\t\tcards.push(j);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar cards2 = cards.map(card => {\r\n\t\t\t\t\t\t\tvar cardx = ui.create.card();\r\n\t\t\t\t\t\t\tcardx.init(get.cardInfo(card));\r\n\t\t\t\t\t\t\tcardx._cardid = card.cardid;\r\n\t\t\t\t\t\t\treturn cardx;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tplayer.directgains(cards2, null, \"duanzhangmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff_use: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"useCardBefore\", \"respondBefore\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar cards = player.getCards(\"s\", card => card.hasGaintag(\"duanzhangmrfz\") && card._cardid);\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.cards &&\r\n\t\t\t\t\t\t\tevent.cards.some(card => {\r\n\t\t\t\t\t\t\t\treturn cards.includes(card);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar idList = player.getCards(\"s\", card => card.hasGaintag(\"duanzhangmrfz\")).map(i => i._cardid);\r\n\t\t\t\t\t\tvar cards = [];\r\n\t\t\t\t\t\tvar target = game.findPlayer(current => {\r\n\t\t\t\t\t\t\treturn player.storage.duanzhangmrfz.includes(current);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tfor (var i of target.storage.duanzhangmrfz) {\r\n\t\t\t\t\t\t\tif (i.countCards(\"h\") == 0) continue;\r\n\t\t\t\t\t\t\tif (i == player) continue;\r\n\t\t\t\t\t\t\tfor (var j of i.getCards(\"h\")) {\r\n\t\t\t\t\t\t\t\tif (!idList.includes(j.cardid)) continue;\r\n\t\t\t\t\t\t\t\tcards.push(j);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar cards2 = [];\r\n\t\t\t\t\t\tfor (var card of trigger.cards) {\r\n\t\t\t\t\t\t\tvar cardx = cards.find(cardx => cardx.cardid == card._cardid);\r\n\t\t\t\t\t\t\tif (cardx) cards2.push(cardx);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar cards3 = trigger.cards.slice();\r\n\t\t\t\t\t\ttrigger.cards = cards2;\r\n\t\t\t\t\t\ttrigger.card.cards = cards2;\r\n\t\t\t\t\t\tif (player.isOnline2()) {\r\n\t\t\t\t\t\t\tplayer.send(\r\n\t\t\t\t\t\t\t\tfunction (cards, player) {\r\n\t\t\t\t\t\t\t\t\tcards.forEach(i => i.delete());\r\n\t\t\t\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcards3,\r\n\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcards3.forEach(i => i.delete());\r\n\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff_lose: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: [\"loseEnd\", \"equipEnd\", \"addJudgeEnd\", \"gainEnd\", \"loseAsyncEnd\", \"addToExpansionEnd\", \"cardsGotoOrderingBegin\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar idList = player.getCards(\"s\", card => card.hasGaintag(\"duanzhangmrfz\")).map(i => i._cardid);\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.cards &&\r\n\t\t\t\t\t\t\tevent.cards.some(card => {\r\n\t\t\t\t\t\t\t\treturn idList.includes(card.cardid);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar cards2;\r\n\t\t\t\t\t\tvar idList = [];\r\n\t\t\t\t\t\tvar target = game.findPlayer(current => {\r\n\t\t\t\t\t\t\treturn player.storage.duanzhangmrfz.includes(current);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tfor (var i of target.storage.duanzhangmrfz) {\r\n\t\t\t\t\t\t\tif (i.countCards(\"h\") == 0) continue;\r\n\t\t\t\t\t\t\tif (i == player) continue;\r\n\t\t\t\t\t\t\tfor (var j of i.getCards(\"h\")) {\r\n\t\t\t\t\t\t\t\tidList.add(j.cardid);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcards2 = player.getCards(\"s\", card => {\r\n\t\t\t\t\t\t\treturn card.hasGaintag(\"duanzhangmrfz\") && !idList.includes(card._cardid);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (player.isOnline2()) {\r\n\t\t\t\t\t\t\tplayer.send(\r\n\t\t\t\t\t\t\t\tfunction (cards, player) {\r\n\t\t\t\t\t\t\t\t\tcards.forEach(i => i.delete());\r\n\t\t\t\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcards2,\r\n\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcards2.forEach(i => i.delete());\r\n\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tchenaimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"useCardAfter\", \"respondAfter\"],\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (_status.currentPhase != player) return false;\r\n\t\t\t\tif (\r\n\t\t\t\t\tplayer.getHistory(\"custom\", function (evt) {\r\n\t\t\t\t\t\treturn evt.chenaimrfz_type == get.type2(event.card);\r\n\t\t\t\t\t}).length > 0\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\treturn event.cards.filterInD().length > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { targets } = await player\r\n\t\t\t\t\t.chooseTarget(\r\n\t\t\t\t\t\tget.prompt(\"chenaimrfz\"),\r\n\t\t\t\t\t\t\"将\" + get.translation(trigger.cards) + \"交给一名其他角色\",\r\n\t\t\t\t\t\tfunction (card, player, target) {\r\n\t\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\tif (target.hasJudge(\"lebu\")) return 0;\r\n\t\t\t\t\t\tlet att = get.attitude(_status.event.player, target),\r\n\t\t\t\t\t\t\tname = _status.event.cards[0].name;\r\n\t\t\t\t\t\tif (att < 3) return 0;\r\n\t\t\t\t\t\tif (_status.event.player.storage.duanzhangmrfz && _status.event.player.storage.duanzhangmrfz.includes(target) && att > 0)\r\n\t\t\t\t\t\t\tatt += 10;\r\n\t\t\t\t\t\tif (target.hasSkillTag(\"nogain\")) att /= 10;\r\n\t\t\t\t\t\tif (name === \"sha\" && target.hasSha()) att /= 5;\r\n\t\t\t\t\t\tif (name === \"wuxie\" && target.needsToDiscard(_status.event.cards)) att /= 5;\r\n\t\t\t\t\t\treturn att / (1 + get.distance(player, target, \"absolute\"));\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"cards\", trigger.cards)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!targets) return;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.logSkill(\"chenaimrfz\", targets[0]);\r\n\t\t\t\ttargets[0].gain(trigger.cards.filterInD(), \"gain2\");\r\n\t\t\t\tplayer.getHistory(\"custom\").push({ chenaimrfz_type: get.type2(trigger.card) });\r\n\t\t\t\tif (player.storage.duanzhangmrfz && player.storage.duanzhangmrfz.includes(targets[0])) targets[0].draw();\r\n\t\t\t},\r\n\t\t},\r\n\t\t/** @type { Skill } */\r\n\t\tcanxiangmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\ttargetEnabled: function (card, player, target) {\r\n\t\t\t\t\tif (get.type(card) == \"delay\") {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { global: \"damageBegin4\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tvar storage = player.storage.duanzhangmrfz;\r\n\t\t\t\tif (event.player != player && (!storage || !storage.includes(event.player))) return false;\r\n\t\t\t\treturn event.hasNature();\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t},\r\n\t\t\tgroup: \"canxiangmrfz_die\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdie: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"dieAfter\" },\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tforceDie: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar storage = player.storage.duanzhangmrfz;\r\n\t\t\t\t\t\tfor (var i of storage) {\r\n\t\t\t\t\t\t\tif (!i.storage.duanzhangmrfz) continue;\r\n\t\t\t\t\t\t\tif (i.storage.duanzhangmrfz.length <= 2) i.removeSkill(\"canxiangmrfz_nodelay\");\r\n\t\t\t\t\t\t\telse i.storage.duanzhangmrfz.remove(player);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tnodelay: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"属性伤害无效；无法成为延时锦囊牌的目标\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\ttargetEnabled: function (card, player, target) {\r\n\t\t\t\t\t\t\tif (get.type(card) == \"delay\") {\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tnofire: true,\r\n\t\t\t\t\t\tnothunder: true,\r\n\t\t\t\t\t\teffect: {\r\n\t\t\t\t\t\t\ttarget(card, player, target, current) {\r\n\t\t\t\t\t\t\t\tif (get.tag(card, \"natureDamage\")) {\r\n\t\t\t\t\t\t\t\t\treturn \"zeroplayertarget\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (get.type(card) == \"trick\" && get.tag(card, \"damage\")) {\r\n\t\t\t\t\t\t\t\t\treturn \"zeroplayertarget\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tnofire: true,\r\n\t\t\t\tnothunder: true,\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget(card, player, target, current) {\r\n\t\t\t\t\t\tif (get.tag(card, \"natureDamage\")) {\r\n\t\t\t\t\t\t\treturn \"zeroplayertarget\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (get.type(card) == \"trick\" && get.tag(card, \"damage\")) {\r\n\t\t\t\t\t\t\treturn \"zeroplayertarget\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 新多萝西\r\n\t\tnewgongzhenmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\taiOrder: function (player, card, num) {\r\n\t\t\t\t\tif (typeof card == \"object\" && player.isPhaseUsing()) {\r\n\t\t\t\t\t\tvar history = player.getAllHistory(\"useCard\");\r\n\t\t\t\t\t\tif (history.length < 1) return num;\r\n\t\t\t\t\t\tvar cardx = history[history.length - 1].card;\r\n\t\t\t\t\t\tif (cardx && get.type2(cardx) == get.type2(card)) {\r\n\t\t\t\t\t\t\treturn num + 10;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: \"gongzhenmrfz\",\r\n\t\t\ttrigger: { player: [\"useCardEnd\", \"respondEnd\"] },\r\n\t\t\tforced: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\treturn player.getAllHistory(event.name).length > 1;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tvar history = player.getAllHistory(trigger.name);\r\n\t\t\t\tvar cardx = history[history.length - 2].card;\r\n\t\t\t\tif (!cardx) return;\r\n\t\t\t\tif (get.type2(cardx) == get.type2(trigger.card)) {\r\n\t\t\t\t\tvar cards = get.cards(2);\r\n\t\t\t\t\tgame.cardsGotoOrdering(cards);\r\n\t\t\t\t\tconst { links } = await player\r\n\t\t\t\t\t\t.chooseCardButton(`【共振】:请选择获得一张牌`, true, cards)\r\n\t\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\t\treturn get.value(button);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (!links) return;\r\n\t\t\t\t\tplayer.gain(links, \"gain2\");\r\n\t\t\t\t} else\r\n\t\t\t\t\tplayer.chooseToDiscard(true, `【共振】:请弃置区域内的一张牌`, \"hej\").set(\"ai\", card => {\r\n\t\t\t\t\t\tif (get.position(card) == \"j\") return 10;\r\n\t\t\t\t\t\treturn -get.value(card);\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t},\r\n\t\tnewmengxiangmrfz: {\r\n\t\t\tgetLastDiscard(event, player) {\r\n\t\t\t\tvar history = player.getAllHistory(\"lose\", evt => evt.type && evt.type == \"discard\");\r\n\t\t\t\tif (history.length < 1) return false;\r\n\t\t\t\tvar cards = history[history.length - 1].cards;\r\n\t\t\t\tif (!cards) return false;\r\n\t\t\t\treturn cards[cards.length - 1];\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player) {\r\n\t\t\t\t\tvar cardx = lib.skill.newmengxiangmrfz.getLastDiscard(_status.event, player);\r\n\t\t\t\t\tif (cardx && get.type2(cardx) == get.type2(card)) return Infinity;\r\n\t\t\t\t},\r\n\t\t\t\ttargetInRange: function (card, player) {\r\n\t\t\t\t\tvar cardx = lib.skill.newmengxiangmrfz.getLastDiscard(_status.event, player);\r\n\t\t\t\t\tif (cardx && get.type2(cardx) == get.type2(card)) return true;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: \"mengxiangmrfz\",\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"useCardBefore\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tvar cardx = lib.skill.newmengxiangmrfz.getLastDiscard(_status.event, player);\r\n\t\t\t\tif (!cardx) return false;\r\n\t\t\t\treturn !event.audioed && get.type2(cardx) == get.type2(event.card);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.audioed = true;\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 新黑键\r\n\t\tnewhuangxiangmrfz: {\r\n\t\t\taudio: \"huangxiangmrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseDrawAfter\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tconst { result } = await player.chooseCard([1, 2], \"【荒响】:你可以选择两张手牌将其标记为‘残影’\").set(\"ai\", card => {\r\n\t\t\t\t\tvar num = get.value(card);\r\n\t\t\t\t\tif (get.name(card) == \"shan\" || get.name(card) == \"wuxie\") num += 10;\r\n\t\t\t\t\tif (get.type2(card) == \"equip\") num -= 2;\r\n\t\t\t\t\treturn num;\r\n\t\t\t\t});\r\n\t\t\t\tevent.result = result;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar cards = event.cards;\r\n\t\t\t\tawait player.removeGaintag(\"newhuangxiangmrfzx\");\r\n\t\t\t\tfor (var i of cards) i.addGaintag(\"newhuangxiangmrfzx\");\r\n\t\t\t},\r\n\t\t\tgroup: \"newhuangxiangmrfz_lose\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tlose: {\r\n\t\t\t\t\taudio: \"huangxiangmrfz\",\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"loseAfter\",\r\n\t\t\t\t\t\tglobal: [\"equipAfter\", \"addJudgeAfter\", \"gainAfter\", \"loseAsyncAfter\", \"addToExpansionAfter\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tif (_status.currentPhase == player) return false;\r\n\t\t\t\t\t\tvar evt = event.getl(player);\r\n\t\t\t\t\t\tif (!evt || !evt.hs || !evt.hs.length) return false;\r\n\t\t\t\t\t\tif (event.name == \"lose\") {\r\n\t\t\t\t\t\t\tfor (var i in event.gaintag_map) {\r\n\t\t\t\t\t\t\t\tif (event.gaintag_map[i].includes(\"newhuangxiangmrfzx\")) return true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn player.hasHistory(\"lose\", function (evt) {\r\n\t\t\t\t\t\t\tif (event != evt.getParent()) return false;\r\n\t\t\t\t\t\t\tfor (var i in evt.gaintag_map) {\r\n\t\t\t\t\t\t\t\tif (evt.gaintag_map[i].includes(\"newhuangxiangmrfzx\")) return true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\t\t\tvar list = [\"选项一\", \"选项二\", \"cancel2\"],\r\n\t\t\t\t\t\t\tchoicelist = [\"令一名你攻击范围内的角色选择弃置一张黑桃牌或受到一点伤害\", \"你摸一张牌且将此牌标记为‘残影’\"];\r\n\t\t\t\t\t\tif (!game.hasPlayer(current => current != player && player.inRange(current))) {\r\n\t\t\t\t\t\t\tlist.remove(\"选项一\");\r\n\t\t\t\t\t\t\tchoicelist[0] = '<span style=\"opacity:0.5; \">' + choicelist[0] + \"(没有满足条件的角色)</span>\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst { control } = await player\r\n\t\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t\t.set(\"choiceList\", choicelist)\r\n\t\t\t\t\t\t\t.set(\"prompt\", \"【荒响】:你可以选择一项\")\r\n\t\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\tif (!game.hasPlayer(current => current != player && player.inRange(current) && get.attitude(player, current) < 0))\r\n\t\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t\treturn [0, 1];\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tvar result = {};\r\n\t\t\t\t\t\tresult.bool = true;\r\n\t\t\t\t\t\tresult.cost_data = control;\r\n\t\t\t\t\t\tif (control == \"cancel2\") result.bool = false;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tevent.result = result;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar control = event.cost_data;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (control == \"选项一\") {\r\n\t\t\t\t\t\t\tconst { targets } = await player\r\n\t\t\t\t\t\t\t\t.chooseTarget()\r\n\t\t\t\t\t\t\t\t.set(\"forced\", true)\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", \"【荒响】:请选择一名攻击范围内的角色\")\r\n\t\t\t\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\r\n\t\t\t\t\t\t\t\t\treturn player != target && player.inRange(target);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\tif (!targets) return;\r\n\t\t\t\t\t\t\tconst { bool } = await targets[0]\r\n\t\t\t\t\t\t\t\t.chooseToDiscard(\"【荒响】:请弃置一张黑桃牌，否则受到一点伤害\", \"he\")\r\n\t\t\t\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\tplayer.hp < 2 &&\r\n\t\t\t\t\t\t\t\t\t\tplayer.countCards(\"hes\", card => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn get.name(card) == \"tao\" || get.name(card) == \"jiu\";\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\treturn 12 - get.value(card);\r\n\t\t\t\t\t\t\t\t\treturn 7 - get.value(card);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"filterCard\", card => get.suit(card) == \"spade\")\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\tif (bool) return;\r\n\t\t\t\t\t\t\ttargets[0].damage();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconst result = await player.draw().forResult();\r\n\t\t\t\t\t\t\tresult.cards[0].addGaintag(\"newhuangxiangmrfzx\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tnewjiyinmrfz: {\r\n\t\t\taudio: \"jiyinmrfz\",\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCard2\",\r\n\t\t\t},\r\n\t\t\tgetMeetCondition(event, player, target) {\r\n\t\t\t\tlet num = 0;\r\n\t\t\t\tif (target.isMaxHandcard()) num++;\r\n\t\t\t\tif (target.isMaxHp()) num++;\r\n\t\t\t\tif (target.isMaxEquip()) num++;\r\n\t\t\t\treturn num;\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (event.card.name != \"sha\") return false;\r\n\t\t\t\tfor (var target of event.targets) {\r\n\t\t\t\t\tlet num = lib.skill.newjiyinmrfz.getMeetCondition(event, player, target);\r\n\t\t\t\t\tif (typeof num === \"number\") return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet targets = trigger.targets;\r\n\t\t\t\tfor (var target of targets) {\r\n\t\t\t\t\tlet num = lib.skill.newjiyinmrfz.getMeetCondition(event, player, target);\r\n\t\t\t\t\tif (typeof num !== \"number\") continue;\r\n\t\t\t\t\tplayer.line(target);\r\n\t\t\t\t\t// 加伤\r\n\t\t\t\t\tif (!target.storage.newjiyinmrfz_tmp) target.storage.newjiyinmrfz_tmp = [];\r\n\t\t\t\t\ttarget.storage.newjiyinmrfz_tmp.push(trigger.card);\r\n\t\t\t\t\ttarget\r\n\t\t\t\t\t\t.when({\r\n\t\t\t\t\t\t\tplayer: \"damageBegin3\",\r\n\t\t\t\t\t\t\tglobal: \"useCardAfter\",\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.filter((event, player) => {\r\n\t\t\t\t\t\t\tif (event.name == \"useCard\" && player.storage.newjiyinmrfz_tmp.filter(card => card == event.card).length > 0) return true;\r\n\t\t\t\t\t\t\tif (!player.storage.newjiyinmrfz_tmp) return false;\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\tevent.card &&\r\n\t\t\t\t\t\t\t\tevent.card.name == \"sha\" &&\r\n\t\t\t\t\t\t\t\tplayer.storage.newjiyinmrfz_tmp.filter(card => card == event.card).length > 0\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(async (event, trigger, player) => {\r\n\t\t\t\t\t\t\tif (trigger.name == \"damage\") {\r\n\t\t\t\t\t\t\t\ttrigger.num += number;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tplayer.storage.newjiyinmrfz_tmp.remove(trigger.card);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.vars({ number: num });\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"newjiyinmrfz_sha\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tsha: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (event.card.name != \"sha\" || event.getParent().directHit.includes(event.target)) return false;\r\n\t\t\t\t\t\treturn lib.skill.newjiyinmrfz.getMeetCondition(event, player, event.target) > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlogTarget: \"target\",\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar id = trigger.target.playerid;\r\n\t\t\t\t\t\tvar map = trigger.getParent()?.customArgs;\r\n\t\t\t\t\t\tif (!map || !id) return;\r\n\t\t\t\t\t\tif (!map[id]) map[id] = {};\r\n\t\t\t\t\t\tif (typeof map[id].shanRequired == \"number\") {\r\n\t\t\t\t\t\t\tmap[id].shanRequired++;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmap[id].shanRequired = 1 + lib.skill.newjiyinmrfz.getMeetCondition(event, player, trigger.target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\tskillTagFilter(player, tag, arg) {\r\n\t\t\t\t\tlet num = lib.skill.newjiyinmrfz.getMeetCondition(_status.event, player, arg.target);\r\n\t\t\t\t\tif (arg.card.name != \"sha\" || arg.target.countCards(\"h\", \"shan\") > num) return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 乌尔比安\r\n\t\tpiweimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"turnOverAfter\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0 && player.hasUseTarget(\"chuqibuyi\");\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseControl(\"club\", \"spade\", \"diamond\", \"heart\", \"cancel2\")\r\n\t\t\t\t\t.set(\r\n\t\t\t\t\t\t\"prompt\",\r\n\t\t\t\t\t\t\"你可以将一种颜色的所有手牌当做任意花色且伤害基数为2的【出其不意】使用，若此牌造成伤害，受到伤害的角色依次弃置装备区和手牌区的一张牌。\"\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\tvar player = get.event().player;\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t!game.hasPlayer(current => {\r\n\t\t\t\t\t\t\t\treturn current != player && !!player.canUse(\"chuqibuyi\", current) && get.attitude(current, player) < 0;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\treturn \"cancel2\";\r\n\t\t\t\t\t\treturn lib.suit.randomGet();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tevent.result = {};\r\n\t\t\t\tif (result.control === \"cancel2\") event.result.bool = false;\r\n\t\t\t\telse event.result.bool = true;\r\n\t\t\t\tevent.result.cost_data = result;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet suit = event.cost_data.control;\r\n\t\t\t\tlet color = new Set(player.getCards(\"h\").map(i => get.color(i)));\r\n\t\t\t\tconst { control } =\r\n\t\t\t\t\tcolor.size === 1\r\n\t\t\t\t\t\t? { control: player.getCards(\"h\") }\r\n\t\t\t\t\t\t: await player\r\n\t\t\t\t\t\t\t\t.chooseControl(\"red\", \"black\")\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", \"请选择一种颜色\")\r\n\t\t\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\t\t\tvar player = get.event().player,\r\n\t\t\t\t\t\t\t\t\t\tred = 0,\r\n\t\t\t\t\t\t\t\t\t\tblack = 0;\r\n\t\t\t\t\t\t\t\t\tfor (var i of player.getCards(\"h\", {\r\n\t\t\t\t\t\t\t\t\t\tcolor: \"red\",\r\n\t\t\t\t\t\t\t\t\t})) {\r\n\t\t\t\t\t\t\t\t\t\tred += get.value(i);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tfor (var i of player.getCards(\"h\", {\r\n\t\t\t\t\t\t\t\t\t\tcolor: \"black\",\r\n\t\t\t\t\t\t\t\t\t})) {\r\n\t\t\t\t\t\t\t\t\t\tblack += get.value(i);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn red > black ? \"black\" : \"red\";\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\tplayer.chooseUseTarget(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"chuqibuyi\",\r\n\t\t\t\t\t\tsuit: suit,\r\n\t\t\t\t\t\tpiweimrfz_chuqi: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttypeof control === \"string\" ? player.getCards(\"h\", { color: control }) : control\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tgroup: [\"piweimrfz_damage\", \"piweimrfz_discard\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdiscard: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn event.player && event.player.isIn() && event.card && event.card.piweimrfz_chuqi == true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet target = trigger.player;\r\n\t\t\t\t\t\ttarget\r\n\t\t\t\t\t\t\t.chooseToDiscard(true)\r\n\t\t\t\t\t\t\t.set(\"position\", \"he\")\r\n\t\t\t\t\t\t\t.set(\"prompt\", `【辟纬】:请选择弃置手牌区和装备区的各一张牌`)\r\n\t\t\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\t\t\tvar player = get.event().player;\r\n\t\t\t\t\t\t\t\treturn 7 - get.value(card);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"filterCard\", card => {\r\n\t\t\t\t\t\t\t\tvar player = get.event().player,\r\n\t\t\t\t\t\t\t\t\tcards = ui.selected.cards;\r\n\t\t\t\t\t\t\t\tif (cards.length == 0) return true;\r\n\t\t\t\t\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\t\t\t\t\tif (get.position(i) == get.position(card)) return false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"selectCard\", () => {\r\n\t\t\t\t\t\t\t\tvar player = get.event().player,\r\n\t\t\t\t\t\t\t\t\tpos = [];\r\n\t\t\t\t\t\t\t\tfor (var i of player.getCards(\"he\")) {\r\n\t\t\t\t\t\t\t\t\tif (get.position(i) == \"h\") pos.add(\"h\");\r\n\t\t\t\t\t\t\t\t\telse pos.add(\"e\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn [pos.length, pos.length];\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn event.card && event.card.piweimrfz_chuqi == true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.baseDamage = 2;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.2,\r\n\t\t\t},\r\n\t\t},\r\n\t\tguqianmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: [\"loseAfter\", \"loseAsyncAfter\"],\r\n\t\t\t},\r\n\t\t\tusable: 1,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (event.type != \"discard\" || event.position != ui.discardPile || event.player == player) return false;\r\n\t\t\t\tvar cards = event.getd();\r\n\t\t\t\tif (!cards.filter(card => get.position(card, true) == \"d\").length) return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\treturn `你可以摸一张牌，然后若你手牌中没有相同花色的牌，你重置此技能，反之，你将武将牌翻面。`;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tawait player.draw();\r\n\t\t\t\tlet suitCards = player.getCards(\"h\").map(card => get.suit(card));\r\n\t\t\t\tlet suitList = new Set(suitCards);\r\n\t\t\t\tif (suitCards.length != suitList.size) {\r\n\t\t\t\t\tplayer.turnOver();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tdelete player.getStat(\"skill\")[\"guqianmrfz\"];\r\n\t\t\t\tif (player.storage.counttrigger && player.storage.counttrigger[\"guqianmrfz\"]) delete player.storage.counttrigger[\"guqianmrfz\"];\r\n\t\t\t\tgame.log(player, \"重置了技能\", `#g【孤潜】`);\r\n\t\t\t},\r\n\t\t},\r\n\t\ttongmaimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\taudioname: [\"wuerbianmrfz\", \"spyoulingshamrfz\", \"sikadimrfz\", \"geleidiyamrfz\", \"anzhelamrfz\"],\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (Array.isArray(player.storage.tongmaimrfz) && player.storage.tongmaimrfz.length > 1) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\t_status.currentPhase != player &&\r\n\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn current.hasClan(\"深海猎人\");\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tlet prompt2 = `你可以令一名深海猎人的角色回复一点体力或复原武将牌`,\r\n\t\t\t\t\tstorage = player.storage.tongmaimrfz;\r\n\t\t\t\tif (storage.includes(0)) prompt2 = prompt2.replace(\"回复一点体力或\", \"\");\r\n\t\t\t\tif (storage.includes(1)) prompt2 = prompt2.replace(\"或复原武将牌\", \"\");\r\n\t\t\t\tconst { result } = await player\r\n\t\t\t\t\t.chooseTarget()\r\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"tongmaimrfz\"))\r\n\t\t\t\t\t.set(\"prompt2\", prompt2)\r\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\r\n\t\t\t\t\t\tvar storage = _status.event.storage;\r\n\t\t\t\t\t\tif (!target.hasClan(\"深海猎人\") && target != player) return false;\r\n\t\t\t\t\t\tif (storage.includes(1)) return target.getDamagedHp() > 0;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\tvar player = get.event().player;\r\n\t\t\t\t\t\treturn get.attitude(target, player) > 0 && (target.getDamagedHp() > 0 || target.isTurnedOver() || target.isLinked());\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"storage\", storage);\r\n\t\t\t\tevent.result = result;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet target = event.targets[0];\r\n\t\t\t\tif (!Array.isArray(player.storage.tongmaimrfz)) player.storage.tongmaimrfz = [];\r\n\t\t\t\tif (player.storage.tongmaimrfz.includes(0)) {\r\n\t\t\t\t\ttarget.link(false);\r\n\t\t\t\t\ttarget.turnOver(false);\r\n\t\t\t\t\tplayer.storage.tongmaimrfz.add(1);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (player.storage.tongmaimrfz.includes(1)) {\r\n\t\t\t\t\ttarget.recover();\r\n\t\t\t\t\tplayer.storage.tongmaimrfz.add(0);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (target.getDamagedHp() == 0) {\r\n\t\t\t\t\ttarget.link(false);\r\n\t\t\t\t\ttarget.turnOver(false);\r\n\t\t\t\t\tplayer.storage.tongmaimrfz.add(1);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst { index } = await player\r\n\t\t\t\t\t.chooseControl()\r\n\t\t\t\t\t.set(\"choiceList\", [`令${get.translation(target)}回复一点体力`, `令${get.translation(target)}复原武将牌`])\r\n\t\t\t\t\t.set(\"prompt\", \"请选择一项\")\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\tvar target = _status.event.targetx,\r\n\t\t\t\t\t\t\tplayer = get.event().player;\r\n\t\t\t\t\t\tif (target.isTurnedOver()) return 1;\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"targetx\", target)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (index === 0) target.recover();\r\n\t\t\t\tif (index === 1) {\r\n\t\t\t\t\ttarget.link(false);\r\n\t\t\t\t\ttarget.turnOver(false);\r\n\t\t\t\t}\r\n\t\t\t\tplayer.storage.tongmaimrfz.add(index);\r\n\t\t\t},\r\n\t\t\tgroup: \"tongmaimrfz_clear\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.tongmaimrfz = [];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 新 斯卡蒂\r\n\t\tjingliemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseZhunbeiBegin\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn current != player && current.countCards(\"h\") > 0;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tconst { result } = await player\r\n\t\t\t\t\t.chooseTarget()\r\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"shulangmrfz\"))\r\n\t\t\t\t\t.set(\r\n\t\t\t\t\t\t\"prompt2\",\r\n\t\t\t\t\t\t`你可以观看一名其他角色的手牌并选择其中一张牌，然后该角色选择一项：<br>①失去一点体力，令你获得此牌。<br>②令你视为使用此牌，然后本回合结束阶段你发动一次【鲸猎】。<br>③对你使用一张【杀】，若此杀造成伤害，你翻面，反之执行其他两项。`\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => player != target && target.countCards(\"h\") > 0)\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\tvar player = get.event().player;\r\n\t\t\t\t\t\tvar att = get.attitude(player, target),\r\n\t\t\t\t\t\t\tnum = 0;\r\n\t\t\t\t\t\tif (att >= 0) num += 2;\r\n\t\t\t\t\t\telse num += 5 + target.getDamagedHp();\r\n\t\t\t\t\t\treturn (num += target.countCards(\"h\") / 2);\r\n\t\t\t\t\t});\r\n\t\t\t\tevent.result = result;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet target = event.targets[0];\r\n\t\t\t\tif (target.countCards(\"h\") == 1) player.viewHandcards(target);\r\n\t\t\t\tconst { links } = await player\r\n\t\t\t\t\t.choosePlayerCard(target, true, \"visible\")\r\n\t\t\t\t\t.set(\"prompt\", \"【鲸猎】:请选择一张牌\")\r\n\t\t\t\t\t.set(\"position\", \"h\")\r\n\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\tvar player = get.event().player,\r\n\t\t\t\t\t\t\tnum = get.value(button);\r\n\t\t\t\t\t\tif (player.hasUseTarget(button, false)) num += 10;\r\n\t\t\t\t\t\tif (get.tag(button, \"damage\")) num += 2;\r\n\t\t\t\t\t\tif (get.type2(button) == \"equip\") num -= 10;\r\n\t\t\t\t\t\treturn num;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!links) return;\r\n\t\t\t\tlet choiceList = [\r\n\t\t\t\t\t\t`失去一点体力，令${get.translation(player)}获得${get.translation(links[0])}`,\r\n\t\t\t\t\t\t`令${get.translation(player)}视为使用${get.translation(links[0])}，若此牌不能被${get.translation(player)}使用，则改为摸一张牌，然后本回合结束阶段时${get.translation(player)}发动一次【鲸猎】`,\r\n\t\t\t\t\t\t`对${get.translation(player)}使用一张【杀】，若此杀造成伤害，${get.translation(player)}翻面，反之执行其他两项`,\r\n\t\t\t\t\t],\r\n\t\t\t\t\tlist = [\"选项一\", \"选项二\"];\r\n\t\t\t\tif (target.hasSha() && target.canUse({ name: \"sha\" }, player, false)) list.push(\"选项三\");\r\n\t\t\t\telse choiceList[2] = '<span style=\"opacity:0.5\">' + choiceList[2] + \"（没有或无法使用【杀】）\" + \"</span>\";\r\n\t\t\t\tconst { index } = await target\r\n\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t.set(\"choiceList\", choiceList)\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\tvar player = get.event().player,\r\n\t\t\t\t\t\t\ttarget = _status.event.targetx,\r\n\t\t\t\t\t\t\tlist = _status.event.list,\r\n\t\t\t\t\t\t\tcard = _status.event.cardx;\r\n\t\t\t\t\t\tif (get.attitude(player, target) > 0) return 1;\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tif (!target.hasUseTarget(card, false)) return 1;\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tlist.length > 2 &&\r\n\t\t\t\t\t\t\t\ttarget.mayHaveShan(\r\n\t\t\t\t\t\t\t\t\tplayer,\r\n\t\t\t\t\t\t\t\t\t\"use\",\r\n\t\t\t\t\t\t\t\t\ttarget.getCards(\"h\", i => {\r\n\t\t\t\t\t\t\t\t\t\treturn i.hasGaintag(\"sha_notshan\");\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t) &&\r\n\t\t\t\t\t\t\t\tMath.random() > 0.5\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tfor (var i of player.getCards(\"h\", \"sha\")) {\r\n\t\t\t\t\t\t\t\t\tif (get.effect(target, i, player, player) > 0) return 2;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (player.hp == 1) return 1;\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"targetx\", player)\r\n\t\t\t\t\t.set(\"list\", list)\r\n\t\t\t\t\t.set(\"cardx\", links[0])\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (typeof index !== \"number\") return;\r\n\t\t\t\tvar next = game.createEvent(\"jingliemrfz_after\");\r\n\t\t\t\tnext.player = player;\r\n\t\t\t\tnext.target_jingliemrfz = target;\r\n\t\t\t\tnext.card_jingliemrfz = links[0];\r\n\t\t\t\tnext.setContent(lib.skill.jingliemrfz[\"index_\" + index]);\r\n\t\t\t},\r\n\t\t\tasync index_0(event, trigger, player) {\r\n\t\t\t\tlet target = event.target_jingliemrfz,\r\n\t\t\t\t\tcard = event.card_jingliemrfz;\r\n\t\t\t\tawait player.gain(card, \"gain2\");\r\n\t\t\t\ttarget.loseHp();\r\n\t\t\t},\r\n\t\t\tasync index_1(event, trigger, player) {\r\n\t\t\t\tlet target = event.target_jingliemrfz,\r\n\t\t\t\t\tcard = event.card_jingliemrfz;\r\n\t\t\t\tif (player.hasUseTarget(card, false))\r\n\t\t\t\t\tplayer.chooseUseTarget(\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tname: card.name,\r\n\t\t\t\t\t\t\tsuit: card.suit,\r\n\t\t\t\t\t\t\tnumber: card.number,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfalse\r\n\t\t\t\t\t);\r\n\t\t\t\telse player.draw();\r\n\t\t\t\tplayer.when(\"phaseJieshuBegin\").then(async (event, trigger, player) => {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (player.hasSkill(\"jingliemrfz_ban\") || !game.hasPlayer(current => lib.skill.jingliemrfz.filter(event, player))) return;\r\n\t\t\t\t\tplayer.addTempSkill(\"jingliemrfz_ban\", \"phaseJieshuEnd\");\r\n\t\t\t\t\tconst result = await player\r\n\t\t\t\t\t\t.chooseTarget()\r\n\t\t\t\t\t\t.set(\"prompt\", get.prompt(\"jingliemrfz\"))\r\n\t\t\t\t\t\t.set(\r\n\t\t\t\t\t\t\t\"prompt2\",\r\n\t\t\t\t\t\t\t`你可以观看一名其他角色的手牌并选择其中一张牌，然后该角色选择一项：<br>①失去一点体力，令你获得此牌。<br>②令你视为使用此牌，然后本回合结束阶段你发动一次【鲸猎】。<br>③对你使用一张【杀】，若此杀造成伤害，你翻面，反之执行其他两项。`\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => player != target && target.countCards(\"h\") > 0)\r\n\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\tvar player = get.event().player;\r\n\t\t\t\t\t\t\tvar att = get.attitude(player, target),\r\n\t\t\t\t\t\t\t\tnum = 0;\r\n\t\t\t\t\t\t\tif (att >= 0) num += 2;\r\n\t\t\t\t\t\t\telse num += 5 + target.getDamagedHp();\r\n\t\t\t\t\t\t\treturn (num += target.countCards(\"h\") / 2);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\t\tplayer.logSkill(\"jingliemrfz\", target);\r\n\t\t\t\t\t\tvar next = game.createEvent(\"jingliemrfz_phaseJieshu\");\r\n\t\t\t\t\t\tnext.player = player;\r\n\t\t\t\t\t\tnext.targets = result.targets;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tnext.setContent(lib.skill.jingliemrfz.content);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync index_2(event, trigger, player) {\r\n\t\t\t\tlet target = event.target_jingliemrfz,\r\n\t\t\t\t\tcard = event.card_jingliemrfz;\r\n\t\t\t\tawait target\r\n\t\t\t\t\t.chooseToUse(\r\n\t\t\t\t\t\tfunction (card, player, event) {\r\n\t\t\t\t\t\t\tif (get.name(card) != \"sha\") return false;\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\"【鲸猎】:对\" + get.translation(player) + \"使用一张杀\"\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"forced\", true)\r\n\t\t\t\t\t.set(\"targetRequired\", true)\r\n\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\tif (target != _status.event.sourcex && !ui.selected.targets.includes(_status.event.sourcex)) return false;\r\n\t\t\t\t\t\treturn player.canUse({ name: \"sha\" }, target, false);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"sourcex\", player);\r\n\t\t\t\tif (\r\n\t\t\t\t\ttarget.hasHistory(\"useCard\", evt => {\r\n\t\t\t\t\t\treturn evt.getParent(2) == event && target.hasHistory(\"sourceDamage\", evtx => evt.card == evtx.card);\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t\tplayer.turnOver();\r\n\t\t\t\telse {\r\n\t\t\t\t\tfor (var i = 0; i < 2; i++) {\r\n\t\t\t\t\t\tvar next = game.createEvent(\"jingliemrfz_noDamage\");\r\n\t\t\t\t\t\tnext.player = player;\r\n\t\t\t\t\t\tnext.target_jingliemrfz = target;\r\n\t\t\t\t\t\tnext.card_jingliemrfz = card;\r\n\t\t\t\t\t\tnext.setContent(lib.skill.jingliemrfz[\"index_\" + i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshulangmrfz: {\r\n\t\t\taudio: \"zhangenmrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\ttarget: \"useCardToTargeted\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.card && event.card.name == \"sha\" && player.hasSha() && lib.filter.targetEnabled({ name: \"sha\" }, player, event.player);\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\tfor (var i of player.getCards(\"hes\", \"sha\")) {\r\n\t\t\t\t\tif (get.effect(event.player, i, player, player) > 0 && get.attitude(player, event.player) < 0) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} //QQQ\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\treturn \"你可以对\" + get.translation(event.player) + \"使用一张杀\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { result } = await player\r\n\t\t\t\t\t.chooseToUse(function (card, player, event) {\r\n\t\t\t\t\t\tif (get.name(card) != \"sha\") return false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}, \"请使用一张【杀】\")\r\n\t\t\t\t\t.set(\"forced\", true)\r\n\t\t\t\t\t.set(\"targetRequired\", true)\r\n\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t.set(\"shulangmrfz_card\", true)\r\n\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\tif (target != _status.event.sourcex && !ui.selected.targets.includes(_status.event.sourcex)) return false;\r\n\t\t\t\t\t\treturn player.canUse({ name: \"sha\" }, target, false);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"sourcex\", trigger.player);\r\n\t\t\t\tif (\r\n\t\t\t\t\tplayer.hasHistory(\"useCard\", evt => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevt &&\r\n\t\t\t\t\t\t\tevt.card &&\r\n\t\t\t\t\t\t\tevt.name == \"useCard\" &&\r\n\t\t\t\t\t\t\tplayer.hasHistory(\"sourceDamage\", evtx => {\r\n\t\t\t\t\t\t\t\treturn evt.card == evtx.card;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})\r\n\t\t\t\t) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\ttrigger.getParent().excluded.addArray(trigger.targets);\r\n\t\t\t\t\tif (trigger.player.countGainableCards(player, \"he\"))\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.gainPlayerCard(\"he\", trigger.player, true)\r\n\t\t\t\t\t\t\t.set(\"target\", trigger.player)\r\n\t\t\t\t\t\t\t.set(\"complexSelect\", false)\r\n\t\t\t\t\t\t\t.set(\"ai\", lib.card.shunshou.ai.button);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"shulangmrfz_need\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tneed: {\r\n\t\t\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn event.getParent(3).name == \"shulangmrfz\" && event.card && event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst id = trigger.target.playerid;\r\n\t\t\t\t\t\tconst map = trigger.getParent()?.customArgs;\r\n\t\t\t\t\t\tif (!id || !map) return;\r\n\t\t\t\t\t\tif (!map[id]) map[id] = {};\r\n\t\t\t\t\t\tif (typeof map[id].shanRequired == \"number\") {\r\n\t\t\t\t\t\t\tmap[id].shanRequired++;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmap[id].shanRequired = 2;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 新 歌蕾蒂娅\r\n\t\tquliemrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t\tmark: function (dialog, storage, player) {\r\n\t\t\t\t\tvar cards = player.getExpansions(\"quliemrfz\");\r\n\t\t\t\t\tif (player.isUnderControl(true)) dialog.addAuto(cards);\r\n\t\t\t\t\telse return \"共有\" + get.cnNumber(cards.length) + \"张牌\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tonremove(player) {\r\n\t\t\t\tgame.countPlayer(current => {\r\n\t\t\t\t\tvar cards = current.getExpansions(\"quliemrfz\");\r\n\t\t\t\t\tif (cards) current.loseToDiscardpile(cards);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\taudio: \"ronghangmrfz\",\r\n\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tget.tag(event.card, \"damage\") &&\r\n\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\treturn current != player && !current.hasMark(\"quliemrfz_eff\");\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn current != player && !current.hasMark(\"quliemrfz_eff\") && get.attitude(player, current) < 0;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tprompt2: \"当你使用带有伤害类标签的牌时，你可以令其他角色若在此牌结算完成前使用或打出牌后，其须将一半（向上取整）的牌置于武将牌上\",\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tgame.countPlayer(current => {\r\n\t\t\t\t\tif (current == player) return false;\r\n\t\t\t\t\tcurrent.addMark(\"quliemrfz_eff\", 1, false);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t\tif (!player.storage.newxunxiangmrfz) player.storage.newxunxiangmrfz = [];\r\n\t\t\t\tplayer.storage.newxunxiangmrfz.add(trigger.card);\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.when(\"useCardAfter\")\r\n\t\t\t\t\t.filter((event, player) => {\r\n\t\t\t\t\t\treturn player.storage.newxunxiangmrfz.includes(event.card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(async (event, trigger, player) => {\r\n\t\t\t\t\t\tgame.countPlayer(current => {\r\n\t\t\t\t\t\t\tcurrent.removeMark(\"quliemrfz_eff\", 1, false);\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tplayer.storage.newxunxiangmrfz.remove(trigger.card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.assign({ lastDo: true });\r\n\t\t\t},\r\n\t\t\tgroup: [\"quliemrfz_eff\", \"quliemrfz_die\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdie: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"dieAfter\" },\r\n\t\t\t\t\tforceDie: true,\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn event.player.getExpansions(\"quliemrfz\").length;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.player.loseToDiscardpile(trigger.player.getExpansions(\"quliemrfz\"));\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: [\"useCardAfter\", \"respondAfter\", \"phaseZhunbeiBegin\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tif (event.name == \"phaseZhunbei\") {\r\n\t\t\t\t\t\t\treturn event.player.getExpansions(\"quliemrfz\").length > 0;\r\n\t\t\t\t\t\t} else return event.player.countCards(\"h\") > 0 && event.player != player && event.player.hasMark(\"quliemrfz_eff\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (trigger.name == \"phaseZhunbei\") {\r\n\t\t\t\t\t\t\tvar current = trigger.player;\r\n\t\t\t\t\t\t\tvar cards = current.getExpansions(\"quliemrfz\");\r\n\t\t\t\t\t\t\tconst { links } =\r\n\t\t\t\t\t\t\t\tnew Set(cards.map(i => get.type2(i, current))).size == 1\r\n\t\t\t\t\t\t\t\t\t? { links: [] }\r\n\t\t\t\t\t\t\t\t\t: await current\r\n\t\t\t\t\t\t\t\t\t\t\t.chooseCardButton(cards)\r\n\t\t\t\t\t\t\t\t\t\t\t.set(\"prompt\", `请选择至少两张不同类型的牌`)\r\n\t\t\t\t\t\t\t\t\t\t\t.set(\"selectButton\", [2, Infinity])\r\n\t\t\t\t\t\t\t\t\t\t\t.set(\"filterButton\", button => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar player = get.event().player,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcards = ui.selected.buttons;\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn !cards.some(cardx => get.type2(cardx, player) == get.type2(button, player));\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn get.value(button.link, _status.event.player);\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t\tif (!links) return;\r\n\t\t\t\t\t\t\tif (links.length > 0) {\r\n\t\t\t\t\t\t\t\tcurrent.gain(links, \"draw\");\r\n\t\t\t\t\t\t\t\tgame.log(current, \"收回了\" + get.cnNumber(links.length) + \"因【驱猎】而置于武将牌上的张牌\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (cards.length != links.length) current.discard(cards.removeArray(links));\r\n\t\t\t\t\t\t\tcurrent.unmarkSkill(\"quliemrfz\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlet current = trigger.player;\r\n\t\t\t\t\t\t\tvar num = Math.ceil(current.countCards(\"h\") / 2);\r\n\t\t\t\t\t\t\tconst { cards } = await current\r\n\t\t\t\t\t\t\t\t.chooseCard(true)\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", `请选择${get.cnNumber(num, false)}张牌`)\r\n\t\t\t\t\t\t\t\t.set(\"selectCard\", num)\r\n\t\t\t\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\t\t\t\tvar player = get.event().player;\r\n\t\t\t\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\tcurrent.addToExpansion(cards, \"giveAuto\", current).gaintag.add(\"quliemrfz\");\r\n\t\t\t\t\t\t\tcurrent.markSkill(\"quliemrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tnewxunxiangmrfz: {\r\n\t\t\taudio: \"xunxiangmrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseJieshuBegin\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tvar cards = lib.skill.zheqimrfz_eff2.getDiscard(event);\r\n\t\t\t\treturn cards.length > 0 && player.canCompare(event.player);\r\n\t\t\t},\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\treturn `你可以与${get.translation(event.player)}进行拼点，若你赢，你获得其本回合因弃置而进入弃牌堆的不同类型的牌各一张，并将拼点牌当雷【杀】对其使用`;\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\treturn get.attitude(player, event.player) < 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { result } = await player.chooseToCompare(trigger.player).forResult();\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar discards = lib.skill.zheqimrfz_eff2.getDiscard(trigger);\r\n\t\t\t\t\tconst { links } =\r\n\t\t\t\t\t\tnew Set(discards.map(i => get.type(i))).size <= 1\r\n\t\t\t\t\t\t\t? { links: discards }\r\n\t\t\t\t\t\t\t: await player\r\n\t\t\t\t\t\t\t\t\t.chooseCardButton(discards)\r\n\t\t\t\t\t\t\t\t\t.set(\"prompt\", `请选择不同类型的牌`)\r\n\t\t\t\t\t\t\t\t\t.set(\"selectButton\", [0, Infinity])\r\n\t\t\t\t\t\t\t\t\t.set(\"filterButton\", button => {\r\n\t\t\t\t\t\t\t\t\t\tvar player = get.event().player,\r\n\t\t\t\t\t\t\t\t\t\t\tcards = ui.selected.buttons;\r\n\t\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\t\treturn !cards.some(cardx => get.type(cardx, player) == get.type(button, player));\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\t\t\t\t\treturn get.value(button.link, _status.event.player);\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (links) player.gain(links, \"gain2\");\r\n\t\t\t\t\tvar cards = [result.player, result.target];\r\n\t\t\t\t\tcards = cards.filter(i => get.position(i) == \"d\");\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tcards.length > 0 &&\r\n\t\t\t\t\t\tplayer.canUse(\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\t\t\tcards: cards,\r\n\t\t\t\t\t\t\t\tnature: \"thunder\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\ttrigger.player,\r\n\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tplayer.useCard({ name: \"sha\", nature: \"thunder\" }, cards, trigger.player);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\txueshuomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tsource: \"damageBegin3\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") >= event.player.countCards(\"h\");\r\n\t\t\t},\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\treturn `你可以令${get.translation(event.player)}额外受到1点伤害`;\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\treturn get.attitude(player, event.player) < 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.num++;\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 妮芙\r\n\t\txunxinmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn !current.hasCard(card => get.is.shownCard(card), \"h\") && current.countCards(\"h\") > 0;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\treturn !target.hasCard(card => get.is.shownCard(card), \"h\") && target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tprompt: \"【巡心】:请选择一名没有明置牌的角色\",\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst target = event.targets[0];\r\n\t\t\t\tconst { cards } = await player\r\n\t\t\t\t\t.choosePlayerCard(\"h\", target)\r\n\t\t\t\t\t.set(\"prompt\", `请选择明置${get.translation(target)}一张手牌`)\r\n\t\t\t\t\t.set(\"visible\", true)\r\n\t\t\t\t\t.set(\"filterButton\", button => {\r\n\t\t\t\t\t\treturn !get.is.shownCard(button);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\tlet target = get.event().target,\r\n\t\t\t\t\t\t\tplayer = get.player();\r\n\t\t\t\t\t\tlet value = get.value(button);\r\n\t\t\t\t\t\tif (get.attitude(player, target) < 0) {\r\n\t\t\t\t\t\t\tlet value = get.value(button);\r\n\t\t\t\t\t\t\treturn target.hasUseTarget(button) ? value - 10 : value;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"target\", target)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\tawait target.addShownCards(cards, \"visible_xunxinmrfz\");\r\n\r\n\t\t\t\tlet showncards = [];\r\n\t\t\t\tfor (let char of game.players) {\r\n\t\t\t\t\tlet shown = char.getCards(\"h\", card => get.is.shownCard(card));\r\n\t\t\t\t\tif (shown) showncards.push(...shown);\r\n\t\t\t\t}\r\n\t\t\t\tlet setShown = new Set(showncards.map(i => get.type2(i)));\r\n\t\t\t\tlet hasTarget = game.hasPlayer(current => {\r\n\t\t\t\t\treturn !current.hasCard(card => get.is.shownCard(card), \"h\") && current.countCards(\"h\") > 0;\r\n\t\t\t\t});\r\n\t\t\t\tif (setShown.size === showncards.map(i => get.type2(i)).length && hasTarget) {\r\n\t\t\t\t\tconst { targets } = await player\r\n\t\t\t\t\t\t.chooseTarget()\r\n\t\t\t\t\t\t.set(\"prompt\", `【巡心】:请选择一名没有明置牌的角色`)\r\n\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\t\treturn get.attitude(player, target) < 0;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\t\treturn !target.hasCard(card => get.is.shownCard(card), \"h\") && target.countCards(\"h\") > 0;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (!targets) return;\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"xunxinmrfz\", targets[0]);\r\n\t\t\t\t\tvar next = game.createEvent(\"xunxinmrfz_cycle\");\r\n\t\t\t\t\tnext.player = player;\r\n\t\t\t\t\tnext.target = targets[0];\r\n\t\t\t\t\tnext.targets = targets;\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tnext.setContent(lib.skill.xunxinmrfz.content);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tchixinmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tglobal: \"chixinmrfz_eff\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\taiOrder(player, card, num) {\r\n\t\t\t\t\t\t\tif (!player.hasCard(card => get.is.shownCard(card), \"h\")) return;\r\n\t\t\t\t\t\t\tif (!get.is.shownCard(card)) {\r\n\t\t\t\t\t\t\t\tlet shown = player.getCards(\"h\", card => get.is.shownCard(card));\r\n\t\t\t\t\t\t\t\tif (shown.length > 1) return num - 10;\r\n\t\t\t\t\t\t\t\treturn num + get.value({ name: card.name }) - get.value(shown[0]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (get.name(card) == \"sha\" && player.getCardUsable(\"sha\") < 2) return num + 10;\r\n\t\t\t\t\t\t\tif (get.name(card) == \"tao\" && player.getDamagedHp() == 1) return num + 10;\r\n\t\t\t\t\t\t\tif (get.name(card) == \"jiu\" && player.getCardUsable(\"jiu\") < 2 && player.isPhaseUsing()) return num + 10;\r\n\t\t\t\t\t\t\tif (get.name(card) == \"wuxie\") return num + 10;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcardname(card, player, name) {\r\n\t\t\t\t\t\t\tlet shown = player.getCards(\"h\", card => get.is.shownCard(card));\r\n\t\t\t\t\t\t\tif (shown && shown.length == 1 && lib.card[shown[0].name].type != \"equip\") {\r\n\t\t\t\t\t\t\t\treturn shown[0].name;\r\n\t\t\t\t\t\t\t} else if (shown && (shown.length > 1 || (shown.length == 1 && lib.card[shown[0].name].type == \"equip\"))) {\r\n\t\t\t\t\t\t\t\treturn \"wuxie\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tkuixinmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tsource: \"damageEnd\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.player != player && event.player.isIn() && event.player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\tlet tran = get.translation(event.player);\r\n\t\t\t\treturn `是否令${tran}所有的[明置/暗置]牌[暗置/明置]，然后${tran}弃置两张暗置的牌？`;\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\treturn get.attitude(event.player, player) < 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst target = trigger.player;\r\n\t\t\t\tfor (let card of target.getCards(\"h\")) {\r\n\t\t\t\t\tif (get.is.shownCard(card)) target.hideShownCards(card);\r\n\t\t\t\t\telse target.addShownCards(card, \"visible_xunxinmrfz\");\r\n\t\t\t\t}\r\n\t\t\t\tlet { promise, resolve } = Promise.withResolvers();\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tresolve(true);\r\n\t\t\t\t}, 10);\r\n\t\t\t\tawait promise;\r\n\t\t\t\tif (target.countCards(\"h\", card => !get.is.shownCard(card)) > 0) {\r\n\t\t\t\t\ttarget\r\n\t\t\t\t\t\t.chooseToDiscard(true, 2)\r\n\t\t\t\t\t\t.set(\"prompt\", `【溃心】:请弃置两张暗置的牌`)\r\n\t\t\t\t\t\t.set(\"filterCard\", card => !get.is.shownCard(card))\r\n\t\t\t\t\t\t.set(\"ai\", card => get.value({ name: card.name }));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 娜仁图亚\r\n\t\t/** @type { Skill } */\r\n\t\teyanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardEnd\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tlet card = event.card;\r\n\t\t\t\treturn event.cards.someInD() && get.tag(card, \"damage\") && game.hasPlayer(current => player != current && current.inRangeOf(player));\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tevent.result = await player\r\n\t\t\t\t\t.chooseTarget()\r\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"eyanmrfz\"))\r\n\t\t\t\t\t.set(\"prompt2\", \"你可以将此牌交给攻击范围内的一名其他角色\")\r\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => player.inRange(target) && player != target)\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\tconst player = get.player();\r\n\t\t\t\t\t\tlet subtraction = player.maxHp - target.maxHp;\r\n\t\t\t\t\t\tlet num = get.attitude(player, target) > 0 ? 0 : -2;\r\n\t\t\t\t\t\tif (get.attitude(player, target) < 0 && subtraction - 1 >= target.countCards(\"h\")) return 114514;\r\n\t\t\t\t\t\treturn num - get.value(get.event().cardx) * 0.5 + Math.min(subtraction, target.countCards(\"h\")) * 2;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"cardx\", trigger.card)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst target = event.targets[0];\r\n\t\t\t\tawait player.give(trigger.cards.filterInD(), target);\r\n\r\n\t\t\t\tlet num = player.maxHp - target.maxHp;\r\n\t\t\t\tif (num < 1) return;\r\n\t\t\t\tconst { cards } =\r\n\t\t\t\t\tnum >= target.countCards(\"h\", card => !get.is.shownCard(card))\r\n\t\t\t\t\t\t? { cards: target.getCards(\"h\", card => !get.is.shownCard(card)) }\r\n\t\t\t\t\t\t: await target\r\n\t\t\t\t\t\t\t\t.chooseCard()\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", `【恶魇】:请展示${num}张手牌`)\r\n\t\t\t\t\t\t\t\t.set(\"forced\", true)\r\n\t\t\t\t\t\t\t\t.set(\"ai\", card => -get.value(card))\r\n\t\t\t\t\t\t\t\t.set(\"filterCard\", card => !get.is.shownCard(card))\r\n\t\t\t\t\t\t\t\t.set(\"selectCard\", num)\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\ttarget.addShownCards(cards, \"visible_eyanmrfz\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tshafeimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"phaseZhunbeiBegin\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player != event.player && event.player.countCards(\"h\", card => get.is.shownCard(card)) > 0;\r\n\t\t\t},\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\tconst cards = event.player.getCards(\"h\", card => get.is.shownCard(card));\r\n\t\t\t\treturn `你可以获得${get.translation(event.player)}的${cards.length}张牌(${get.translation(cards)})`;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst cards = trigger.player.getCards(\"h\", card => get.is.shownCard(card));\r\n\t\t\t\tplayer.gain(cards, \"gain2\");\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 佩佩\r\n\t\tboqingmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"drawBegin\",\r\n\t\t\t\tglobal: \"judgeBegin\",\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet cards = get.cards(4);\r\n\t\t\t\tlet originalHandCards = player.getCards(\"h\");\r\n\t\t\t\tconst { moved } = await player\r\n\t\t\t\t\t.chooseToMove(\"【博青】:你可以交换牌堆顶和你的手牌并任意顺序放回牌堆顶或牌堆底\")\r\n\t\t\t\t\t.set(\"list\", [[\"牌堆顶\", cards], [\"牌堆底\"], [\"你的手牌\", player.getCards(\"h\")]])\r\n\t\t\t\t\t.set(\"processAI\", list => {\r\n\t\t\t\t\t\tlet moved = [[], [], []];\r\n\t\t\t\t\t\tlet top = list[0][1];\r\n\t\t\t\t\t\tlet originalHandCards = get.event().originalHandCards.slice();\r\n\t\t\t\t\t\tlet current = _status.currentPhase;\r\n\t\t\t\t\t\tlet evt = get.event().evt;\r\n\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\tlet all = [...top, ...list[2][1]];\r\n\t\t\t\t\t\tall.sort(function (a, b) {\r\n\t\t\t\t\t\t\treturn get.value(b, player) - get.value(a, player);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t/*\r\n                                    TODO 开摆！有缘再说！\r\n                                     */\r\n\t\t\t\t\t\t// if(evt.name=='draw'){\r\n\t\t\t\t\t\tfor (let i = 0; i < originalHandCards.length; i++) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tmoved[2].push(all.shift());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\twhile (all) {\r\n\t\t\t\t\t\t\tif (get.value(all[0], player) <= 5) break;\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tmoved[1].push(all.shift());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tmoved[0].addArray(all);\r\n\t\t\t\t\t\t// } else{\r\n\t\t\t\t\t\t// \tconst evtx = evt.getParent('judge');\r\n\t\t\t\t\t\t// \tconst attitude = get.attitude(player, evtx.player);\r\n\t\t\t\t\t\t// \tlet reverseAll = all.reverse();\r\n\t\t\t\t\t\t// \tfor(let i of reverseAll){\r\n\t\t\t\t\t\t// \t\tconst result = evtx.judge(i) - evtx.judge(evtx.player.judging[0]);\r\n\t\t\t\t\t\t// \t\tif(result==0) continue;\r\n\t\t\t\t\t\t// \t\tif(originalHandCards.includes(i)&&(result - get.value(card) / 2)>0)\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t\treturn moved;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"filterOk\", moved => {\r\n\t\t\t\t\t\tlet originalHandCards = get.event().originalHandCards;\r\n\t\t\t\t\t\treturn moved[2].length == originalHandCards.length;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"evt\", event)\r\n\t\t\t\t\t.set(\"originalHandCards\", originalHandCards)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!moved) return;\r\n\t\t\t\tconst puts = player.getCards(\"h\", i => moved[0].includes(i) || moved[1].includes(i));\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tconst gains = cards.filter(i => moved[2].includes(i));\r\n\t\t\t\tif (puts.length && gains.length) {\r\n\t\t\t\t\tplayer.$throw(puts.length, 1000);\r\n\t\t\t\t\tawait player.gain(gains, \"giveAuto\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst top = moved[0];\r\n\t\t\t\tconst bottom = moved[1];\r\n\t\t\t\ttop.reverse();\r\n\t\t\t\tfor (var i = 0; i < top.length; i++) {\r\n\t\t\t\t\tui.cardPile.insertBefore(top[i], ui.cardPile.firstChild);\r\n\t\t\t\t}\r\n\t\t\t\tfor (i = 0; i < bottom.length; i++) {\r\n\t\t\t\t\tui.cardPile.appendChild(bottom[i]);\r\n\t\t\t\t}\r\n\t\t\t\tgame.addCardKnower(top, [player]);\r\n\t\t\t\tgame.addCardKnower(bottom, [player]);\r\n\t\t\t\tplayer.popup(get.cnNumber(top.length) + \"上\" + get.cnNumber(bottom.length) + \"下\");\r\n\t\t\t\tgame.log(player, \"将\" + get.cnNumber(top.length) + \"张牌置于牌堆顶\");\r\n\t\t\t\tgame.updateRoundNumber();\r\n\t\t\t},\r\n\t\t},\r\n\t\tkuisuimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tusable: 1,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tgetLastAction(player) {\r\n\t\t\t\tconst cards = [];\r\n\t\t\t\tconst history = game.getAllGlobalHistory();\r\n\t\t\t\tif (history.length < 2) return [];\r\n\t\t\t\tconst last = history[history.length - 2];\r\n\t\t\t\tif (last[\"cardMove\"].length < 1) return [];\r\n\t\t\t\tfor (let evt of last[\"cardMove\"]) {\r\n\t\t\t\t\tif (!evt.cards) continue;\r\n\t\t\t\t\tfor (let card of evt.cards) {\r\n\t\t\t\t\t\tif (get.position(card, true) == \"d\" && get.type(card) != \"equip\" && player.hasUseTarget(card, false)) cards.push(card);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn cards;\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tconst cards = lib.skill.kuisuimrfz.getLastAction(player);\r\n\t\t\t\treturn player.countCards(\"he\") > 0 && cards.length > 0;\r\n\t\t\t},\r\n\t\t\tfilterCard: true,\r\n\t\t\tposition: \"he\",\r\n\t\t\tcheck(card) {\r\n\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t},\r\n\t\t\tdiscard: false,\r\n\t\t\tlose: false,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet card = event.cards[0];\r\n\t\t\t\tlet names = [...new Set(lib.skill.kuisuimrfz.getLastAction(player).map(i => i.name))];\r\n\t\t\t\tlet list = [];\r\n\t\t\t\tfor (var i = 0; i < names.length; i++) {\r\n\t\t\t\t\tvar name = names[i];\r\n\t\t\t\t\tif (get.type(name) == \"basic\") list.push([\"基本\", \"\", name]);\r\n\t\t\t\t\telse if (get.type(name) == \"trick\") list.push([\"锦囊\", \"\", name]);\r\n\t\t\t\t}\r\n\t\t\t\tconst { links } = await player\r\n\t\t\t\t\t.chooseButton([\"窥岁\", [list, \"vcard\"]])\r\n\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\tlet player = get.player(),\r\n\t\t\t\t\t\t\tcard = {\r\n\t\t\t\t\t\t\t\tname: button.link[2],\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\treturn player.getUseValue(card, undefined, true);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!links) return;\r\n\t\t\t\tplayer.chooseUseTarget({ name: links[0][2], isCard: true }, event.cards);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 5,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tlianwenmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"damageBegin4\" },\r\n\t\t\tusable: 1,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.num > 0;\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\tif (!event.source) return true;\r\n\t\t\t\treturn get.attitude(event.source, player) < 0 || player.hp == 1 || (event.card && get.type2(event.card) == \"trick\");\r\n\t\t\t},\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\treturn `你可以进行一次判定，若为红，此伤害-1${event.source ? `且${get.translation(event.source)}手牌上限-1直到其回合结束` : \"\"}`;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst next = player.judge(function (card) {\r\n\t\t\t\t\tconst color = get.color(card);\r\n\t\t\t\t\tif (color == \"red\") return 4;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t\tnext.judge2 = function (result) {\r\n\t\t\t\t\treturn result.bool == false;\r\n\t\t\t\t};\r\n\t\t\t\tconst { color } = await next.forResult();\r\n\t\t\t\tif (color == \"red\") {\r\n\t\t\t\t\ttrigger.num--;\r\n\t\t\t\t\ttrigger.source.addTempSkill(\"lianwenmrfz_eff\", { player: \"phaseEnd\" });\r\n\t\t\t\t\ttrigger.source.addMark(\"lianwenmrfz_eff\", 1, false);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\t\t\treturn `·手牌上限-${player.countMark(\"lianwenmrfz_eff\")}`;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn (num -= player.countMark(\"lianwenmrfz_eff\"));\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n};\r\n"],"names":["card","trigger","cards","player","targets","target","event","list","i","name","links","hd","evt","suit","hs","bottom","disPile","num","cardx","storage","current","value","moved","top","originalHandCards","color"],"mappings":"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"}