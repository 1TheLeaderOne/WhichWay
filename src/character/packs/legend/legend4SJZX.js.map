{"version":3,"file":"legend4SJZX.js","sources":["../../../../../../../../packages/extension/WhichWay/src/character/packs/legend/legend4SJZX.js"],"sourcesContent":["import { lib, game, ui, get, ai, _status } from \"noname\";\r\nimport { skillCustomFunc } from \"../../../nonameEx/custom/skill.ts\";\r\nimport { whichWayTips } from \"../../../tips/index.ts\";\r\nimport { whichWayUtil } from \"../../../utill.js\";\r\n\r\n/**\r\n * @type { WhichWayCharacterPack }\r\n */\r\nexport default {\r\n\tcharacter: {\r\n        maizhelunmrfz: [\"female\", \"lymrfz\", 3, [\"kanchamrfz\", \"longtengmrfz\"], []],\r\n\t\tpalasimrfz: [\"female\", \"mimrfz\", 4, [\"yingzhumrfz\", \"yingdanmrfz\", \"yingfenmrfz\"], []],\r\n\t\txiaguangmrfz: [\"female\", \"kamrfz\", 4, [\"rencimrfz\", \"huiguangmrfz\", \"jiandunmrfz\"], []],\r\n\t\tzaolumrfz: [\"female\", \"wumrfz\", 4, [\"zhongxiemrfz\", \"rusuimrfz\"], []],\r\n\t\tspshihuaiyamrfz: [\"female\", \"longmrfz\", 3, [\"mianzaimrfz\", \"zhijinmrfz\"], []],\r\n\t\tspsongzangrenmrfz: [\"male\", \"lamrfz\", 3, [\"chongdanmrfz\", \"tianxuanmrfz\", \"shengcaimrfz\"], []],\r\n\t\tspjiexikamrfz: [\"female\", \"gemrfz\", 4, [\"yijiemrfz\", \"fuhuangmrfz\"], []],\r\n\t\tweiweiannamrfz: [\"female\", \"laimrfz\", 4, [\"zhanjumrfz\", \"zhuhuomrfz\", \"yunjiaomrfz\"], []],\r\n\t\tspxiaoyangmrfz: [\"female\", \"laimrfz\", 3, [\"lvmengmrfz\", \"rechenmrfz\"], []],\r\n\t\tsuxinmrfz: [\"female\", \"lamrfz\", 3, [\"qinmingmrfz\", \"kongwomrfz\"], []],\r\n\t\thedeleimrfz: [\"male\", \"luomrfz\", \"4/6\", [\"zhengrongmrfz\", \"siyanmrfz\"], []],\r\n\t\tzhisongmrfz: [\"male\", \"laimrfz\", 4, [\"kuxiumrfz\", \"lirenmrfz\"], []],\r\n\t\tjianmrfz: [\"female\", \"xiemrfz\", 4, [\"weiyamrfz\", \"zhiwumrfz\"], []],\r\n\t\tlaiyimrfz: [\"female\", \"leimrfz\", 3, [\"shaobanmrfz\", \"tankuangmrfz\"], []],\r\n\t\tshumrfz: [\"female\", \"suimrfz\", 3, [\"kenyemrfz\", \"heyingmrfz\", \"rancuimrfz\"], []],\r\n\t\tzuolemrfz: [\"male\", \"yanmrfz\", \"4/5\", [\"qikumrfz\", \"bingzhumrfz\"], []],\r\n\t\telamrfz: [\"female\", \"othermrfz\", 3, [\"leimingmrfz\", \"zuzhimrfz\"], []],\r\n\t\tasikalunmrfz: [\"female\", \"luomrfz\", 3, [\"dunyingmrfz\", \"niximrfz\"], []],\r\n\t\tluogesimrfz: [\"male\", \"luomrfz\", 3, [\"baidumrfz\", \"yuhuimrfz\"], []],\r\n\t\tweishidaiermrfz: [\"female\", \"bamrfz\", 3, [\"yuximrfz\", \"haolimrfz\", \"shezumrfz\"], []],\r\n\t\tmowangmrfz: [\"female\", \"luomrfz\", 3, [\"duanzhangmrfz\", \"chenaimrfz\", \"canxiangmrfz\"], []],\r\n\t\twuerbianmrfz: [\"male\", \"a_groupmrfz\", 4, [\"guqianmrfz\", \"piweimrfz\", \"tongmaimrfz\"], [\"clan:深海猎人\"]],\r\n\t\tnifumrfz: [\"female\", \"luomrfz\", 3, [\"xunxinmrfz\", \"chixinmrfz\", \"kuixinmrfz\"], []],\r\n\t\tnarentuyamrfz: [\"female\", \"samrfz\", \"4/6\", [\"eyanmrfz\", \"shafeimrfz\"], []],\r\n\t\tpeipeimrfz: [\"female\", \"samrfz\", 3, [\"boqingmrfz\", \"kuisuimrfz\", \"lianwenmrfz\"], []],\r\n    },\r\n\tskill: {\r\n\t\t//麦哲伦\r\n\t\tkanchamrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tfilterCard: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"已发动#次【勘查】\",\r\n\t\t\t},\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\tif (\r\n\t\t\t\t\tplayer.hasCard(function (card) {\r\n\t\t\t\t\t\treturn get.type(card) == \"equip\";\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t\treturn get.type(card) == \"equip\";\r\n\t\t\t\tif (\r\n\t\t\t\t\tplayer.hasCard(function (card) {\r\n\t\t\t\t\t\treturn get.type(card) == \"trick\";\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t\treturn get.type(card) == \"trick\";\r\n\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tevent.cards2 = cards[0];\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseControl(\"顶部\", \"底部\")\r\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"kanchamrfz\"))\r\n\t\t\t\t\t.set(\"prompt2\", \"【勘查】:请选择展示牌堆顶还是牌堆底\" + (player.countMark(\"kanchamrfz\") + 3) + \"张牌\")\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\treturn [0, 1].randomGet();\r\n\t\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tvar num = player.countMark(\"kanchamrfz\") + 3;\r\n\t\t\t\tif (result.index == 0) {\r\n\t\t\t\t\tvar cards = game.cardsGotoOrdering(get.cards(num)).cards;\r\n\t\t\t\t\tevent.cards = cards;\r\n\t\t\t\t} else if (result.index == 1) event.cards = get.bottomCards(num);\r\n\t\t\t\telse event.finish();\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tvar list = [];\r\n\t\t\t\tplayer.showCards(event.cards, get.translation(player) + \"发动了【勘查】\");\r\n\t\t\t\tfor (var i = 0; i < event.cards.length; i++) {\r\n\t\t\t\t\tif (get.type(event.cards2, \"trick\") != get.type(event.cards[i], \"trick\")) list.push(event.cards[i]);\r\n\t\t\t\t}\r\n\t\t\t\tif (list.length) player.gain(list, \"gain2\");\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tif (player.countMark(\"kanchamrfz\") < 3) player.addMark(\"kanchamrfz\", false);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\tthreaten: 1.1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tlongtengmrfz: {\r\n\t\t\tmarkimage: \"extension/WhichWay/image/skill/mrfz_LTF.png\",\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"expansion\",\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t},\r\n\t\t\tonremove: function (player, skill) {\r\n\t\t\t\tvar cards = player.getExpansions(skill);\r\n\t\t\t\tif (cards.length) player.loseToDiscardpile(cards);\r\n\t\t\t},\r\n\t\t\taudio: 8,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"loseAfter\",\r\n\t\t\t\tglobal: \"loseAsyncAfter\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.isPhase(\"phaseDiscard\", false)) return false;\r\n\t\t\t\tif (event.type != \"discard\" || event.getlx === false) return;\r\n\t\t\t\tvar evt = event.getl(player);\r\n\t\t\t\tfor (var i = 0; i < evt.cards2.length; i++) {\r\n\t\t\t\t\tif (get.position(evt.cards2[i], evt.hs.includes(evt.cards2[i]) ? evt.player : false) == \"d\") {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar cards = [];\r\n\t\t\t\tvar evt = trigger.getl(player);\r\n\t\t\t\tfor (var i = 0; i < evt.cards2.length; i++) {\r\n\t\t\t\t\tif (get.position(evt.cards2[i]) == \"d\") {\r\n\t\t\t\t\t\tcards.push(evt.cards2[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!cards.length) {\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (cards.length > 1)\r\n\t\t\t\t\t\tplayer.chooseButton([\"【龙腾】:请选择一张牌\", cards]).set(\"ai\", button => {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\t\treturn get.attitude(player, current) > 2;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn get.type(button.link) == \"equip\" || get.type(button.link, \"trick\") == \"trick\";\r\n\t\t\t\t\t\t\treturn get.type(button.link) == \"basic\";\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tevent.cards = cards;\r\n\t\t\t\t\t\tevent.goto(2);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.links && result.links.length) {\r\n\t\t\t\t\tevent.cards = result.links;\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tplayer.chooseTarget(\r\n\t\t\t\t\t\"【龙腾】:请选择一名角色，并将\" +\r\n\t\t\t\t\t\tget.translation(event.cards) +\r\n\t\t\t\t\t\t\"(\" +\r\n\t\t\t\t\t\tget.translation(get.type(event.cards[0], \"trick\")) +\r\n\t\t\t\t\t\t\"牌)置于该角色武将牌上\",\r\n\t\t\t\t\tfunction (card, player, target) {\r\n\t\t\t\t\t\treturn target.getExpansions(\"longtengmrfz\").length == 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t).ai = function (target) {\r\n\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\tvar type = get.type2(event.cards[0]);\r\n\t\t\t\t\tif (type == \"basic\") return -get.attitude(player, target);\r\n\t\t\t\t\telse return get.attitude(player, target) > 2;\r\n\t\t\t\t};\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\tvar type = get.type2(event.cards[0]);\r\n\t\t\t\t\ttarget.addToExpansion(event.cards, target, \"give\").gaintag.add(\"longtengmrfz\");\r\n\t\t\t\t\ttarget.addSkill(\"longtengmrfz_changeI\");\r\n\t\t\t\t\tplayer.logSkill(\"longtengmrfz\", target);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"longtengmrfz_clear\",\r\n\t\t\tglobal: [\"longtengmrfz_basic_1\", \"longtengmrfz_basic_2\", \"longtengmrfz_trick\", \"longtengmrfz_equip\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tchangeI: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"longtengmrfzAfter\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeSkill(\"longtengmrfz_changeI\");\r\n\t\t\t\t\t\tif (player.isTypeExpansions(\"longtengmrfz\", \"basic\")) player.changeMarkImage(\"longtengmrfz\", \"mrfz_LTF\");\r\n\t\t\t\t\t\tif (player.isTypeExpansions(\"longtengmrfz\", \"trick\")) player.changeMarkImage(\"longtengmrfz\", \"mrfz_LTL\");\r\n\t\t\t\t\t\tif (player.isTypeExpansions(\"longtengmrfz\", \"equip\")) player.changeMarkImage(\"longtengmrfz\", \"mrfz_LTA\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tbasic_1: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDrawBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.isTypeExpansions(\"longtengmrfz\", \"basic\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num--;\r\n\t\t\t\t\t\tplayer.logSkill(\"longtengmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tbasic_2: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseUseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.isTypeExpansions(\"longtengmrfz\", \"basic\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\tplayer.logSkill(\"longtengmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttrick: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard2\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (get.type(event.card, \"trick\") != \"trick\") return false;\r\n\t\t\t\t\t\tif (player.hasSkill(\"longtengmrfz_trick2\")) return false;\r\n\t\t\t\t\t\tif (player.isTypeExpansions(\"longtengmrfz\", \"trick\") == false) return false;\r\n\t\t\t\t\t\tvar info = get.info(event.card);\r\n\t\t\t\t\t\tif (info.allowMultiple == false) return false;\r\n\t\t\t\t\t\tif (event.targets && !info.multitarget) {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\t\treturn lib.filter.targetEnabled2(event.card, player, current) && !event.targets.includes(current);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.chooseTarget(\r\n\t\t\t\t\t\t\t\t\"【龙腾】:你可以为此牌(\" + get.translation(trigger.card) + \")额外指定一个目标\",\r\n\t\t\t\t\t\t\t\tfunction (card, player, target) {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\t\tif (_status.event.targets.includes(target)) return false;\r\n\t\t\t\t\t\t\t\t\tif (player.canUse(trigger.card, target, true) == false) return false;\r\n\t\t\t\t\t\t\t\t\treturn lib.filter.targetEnabled2(_status.event.card, player, target);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\tvar trigger = _status.event.getTrigger();\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\treturn get.effect(target, trigger.card, player, player);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"targets\", trigger.targets)\r\n\t\t\t\t\t\t\t.set(\"card\", trigger.card);\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tif (!event.isMine() && !event.isOnline()) game.delayx();\r\n\t\t\t\t\t\t\tevent.targets = result.targets;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tplayer.logSkill(\"longtengmrfz\", event.targets);\r\n\t\t\t\t\t\ttrigger.targets.addArray(event.targets);\r\n\t\t\t\t\t\t(\"step 3\");\r\n\t\t\t\t\t\tif (get.tag(trigger.card, \"damage\")) {\r\n\t\t\t\t\t\t\tplayer.chooseBool(\"【龙腾】:是否令此牌伤害+1？\");\r\n\t\t\t\t\t\t} else event.finish();\r\n\t\t\t\t\t\t(\"step 4\");\r\n\t\t\t\t\t\ttrigger.baseDamage++;\r\n\t\t\t\t\t\tplayer.addTempSkill(\"longtengmrfz_trick2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttrick2: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\tequip: {\r\n\t\t\t\t\ttrigger: { player: \"useCard2\" },\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (get.type(event.card) != \"basic\") return false;\r\n\t\t\t\t\t\tif (player.isTypeExpansions(\"longtengmrfz\", \"equip\") == false) return false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tvar list = [\"不计入次数限制\"];\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn !trigger.targets.includes(current) && player.canUse(trigger.card, current, false);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\tlist.add(\"增加目标\");\r\n\t\t\t\t\t\tif (trigger.card.name == \"sha\") list.add(\"伤害基数+1\");\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t\t.set(\"prompt\", \"【龙腾】:请选择一项\")\r\n\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\t\t\t\tnum = [];\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\t\t\t\t\t\t\tnum.add(i);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (get.name(_status.event.TriCard) == \"sha\" && player.getCardUsable(\"sha\") == 0 && player.countCards(\"h\", \"sha\") > 0)\r\n\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\tget.name(_status.event.TriCard) == \"sha\" &&\r\n\t\t\t\t\t\t\t\t\t(player.countCards(\"h\", \"sha\") == 0 || player.getCardUsable(\"sha\") > 0)\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\treturn list.length - 1;\r\n\t\t\t\t\t\t\t\tif (get.name(_status.event.TriCard) == \"jiu\") return 0;\r\n\t\t\t\t\t\t\t\treturn num.randomGet();\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"TriCard\", trigger.card);\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tgame.log(player, \"选择了\", result.control);\r\n\t\t\t\t\t\tplayer.popup(result.control);\r\n\t\t\t\t\t\tplayer.logSkill(\"longtengmrfz\");\r\n\t\t\t\t\t\tif (result.control == \"不计入次数限制\") {\r\n\t\t\t\t\t\t\tif (trigger.addCount !== false && (trigger.card.name == \"sha\" || trigger.card.name == \"jiu\")) {\r\n\t\t\t\t\t\t\t\ttrigger.addCount = false;\r\n\t\t\t\t\t\t\t\tif (trigger.card.name == \"sha\") trigger.player.getStat().card.sha--;\r\n\t\t\t\t\t\t\t\telse trigger.player.getStat().card.jiu--;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\t} else if (result.control == \"增加目标\") {\r\n\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t.chooseTarget(\r\n\t\t\t\t\t\t\t\t\t[1, 2],\r\n\t\t\t\t\t\t\t\t\t\"【龙腾】:你可以为此牌(\" + get.translation(trigger.card) + \")额外指定两个目标\",\r\n\t\t\t\t\t\t\t\t\tfunction (card, player, target) {\r\n\t\t\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\t\t\tif (_status.event.targets.includes(target)) return false;\r\n\t\t\t\t\t\t\t\t\t\tif (player.canUse(trigger.card, target, true) == false) return false;\r\n\t\t\t\t\t\t\t\t\t\treturn lib.filter.targetEnabled2(_status.event.card, player, target);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\t\tvar trigger = _status.event.getTrigger();\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\t\treturn get.effect(target, trigger.card, player, player);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"targets\", trigger.targets)\r\n\t\t\t\t\t\t\t\t.set(\"card\", trigger.card);\r\n\t\t\t\t\t\t} else if (result.control == \"伤害基数+1\") {\r\n\t\t\t\t\t\t\tif (!trigger.baseDamage) trigger.baseDamage = 1;\r\n\t\t\t\t\t\t\ttrigger.baseDamage += 1;\r\n\t\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\t} else event.finish();\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tfor (var i = 0; i < result.targets.length; i++) {\r\n\t\t\t\t\t\t\t\ttrigger.targets.push(result.targets[i]);\r\n\t\t\t\t\t\t\t\tplayer.line(result.targets[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { player: [\"phaseZhunbeiBegin\", \"dieBegin\"] },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\t\tvar cards = current.getExpansions(\"longtengmrfz\");\r\n\t\t\t\t\t\t\tif (current.getExpansions(\"longtengmrfz\").length) current.loseToDiscardpile(cards);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//嵯峨\r\n\t\tquanshanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.player.countCards(\"h\") == 0 && event.player != player;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"是否令\" + get.translation(event.player) + \"将手牌补至3张并令其获得一些负面效果？\";\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (event.player.hp < 2 && get.attitude(player, event.player) > 0) return true;\r\n\t\t\t\tif (get.attitude(player, event.player) > 2 && event.player.maxHp > 2) return Math.random() > 0.6;\r\n\t\t\t\tif (event.player.hp < 2) return false;\r\n\t\t\t\treturn get.attitude(player, event.player) < 2;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar target = trigger.player;\r\n\t\t\t\ttarget.drawTo(Math.min(3, target.maxHp));\r\n\t\t\t\ttarget.addSkill(\"quanshanmrfz_eff\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"quanshanmrfz_clear\", \"quanshanmrfz_clear2\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear2: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.hasSkill(\"quanshanmrfz_eff\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar target = trigger.player;\r\n\t\t\t\t\t\ttarget.removeMark(\"quanshanmrfz_eff\", target.countMark(\"quanshanmrfz_eff\"));\r\n\t\t\t\t\t\ttarget.removeSkill(\"quanshanmrfz_eff\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"dieBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn current.hasMark(\"quanshanmrfz\") || current.hasSkill(\"quanshanmrfz_eff\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\t\tcurrent.removeMark(\"quanshanmrfz_eff\", current.countMark(\"quanshanmrfz_eff\"));\r\n\t\t\t\t\t\t\tcurrent.removeSkill(\"quanshanmrfz_eff\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff: {\r\n\t\t\t\t\tmarktext: \"恶\",\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tname: \"恶\",\r\n\t\t\t\t\t\tcontent: \"·当你造成伤害时，你获得一个‘恶’</br>·你共有#个‘恶’\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer.logSkill(\"quanshanmrfz\");\r\n\t\t\t\t\t\tplayer.addMark(\"quanshanmrfz_eff\");\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (player.getHandcardLimit() <= 0) {\r\n\t\t\t\t\t\t\tevent.getParent(\"phaseUse\").skipped = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn num - player.countMark(\"quanshanmrfz_eff\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tchuemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\treturn current != player && current.countCards(\"h\") > 0 && player.inRange(current);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn player.inRange(target) && target != player && target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tcheck: function () {\r\n\t\t\t\treturn -1;\r\n\t\t\t},\r\n\t\t\tselectTarget: [1, 2],\r\n\t\t\tmultitarget: true,\r\n\t\t\tmultiline: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tevent.num = 0;\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tvar target = targets[event.num];\r\n\t\t\t\tvar hs = target.getCards(\"h\");\r\n\t\t\t\tvar colred = false;\r\n\t\t\t\tfor (var i = 0; i < hs.length; i++) {\r\n\t\t\t\t\tif (get.color(hs[i]) == \"red\") {\r\n\t\t\t\t\t\tcolred = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tplayer.viewHandcards(target);\r\n\t\t\t\tgame.log(player, \"观看了\", target, \"的手牌\");\r\n\t\t\t\tif (colred) {\r\n\t\t\t\t\tvar list = [];\r\n\t\t\t\t\tfor (var i = 0; i < hs.length; i++) {\r\n\t\t\t\t\t\tif (list.length == 2) break;\r\n\t\t\t\t\t\tif (get.suit(hs[i]) == \"club\" && !list.includes(\"梅花\")) list.add(\"梅花\");\r\n\t\t\t\t\t\tif (get.suit(hs[i]) == \"spade\" && !list.includes(\"黑桃\")) list.add(\"黑桃\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlist.add(\"cancel2\");\r\n\t\t\t\t\tif (list.length > 1)\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t\t.set(\"prompt\", \"【除恶】:请选择一个花色，然后其(\" + get.translation(target) + \")弃置该花色的所有牌\")\r\n\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\t\t\t\ths = target.getCards(),\r\n\t\t\t\t\t\t\t\t\tnum = 0;\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < hs.length; i++) {\r\n\t\t\t\t\t\t\t\t\tif (get.suit(hs[i]) == \"club\") num++;\r\n\t\t\t\t\t\t\t\t\tif (get.suit(hs[i]) == \"spade\") num--;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (list.length == 1) return 0;\r\n\t\t\t\t\t\t\t\tif (num > 0) return 0;\r\n\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t} else if (!colred) {\r\n\t\t\t\t\tplayer.chooseBool(\"【除恶】:是否弃置其(\" + get.translation(target) + \")所有手牌？\");\r\n\t\t\t\t\tevent.goto(3);\r\n\t\t\t\t} else event.finish();\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tvar target = targets[event.num];\r\n\t\t\t\tif (result.control != \"cancel2\") {\r\n\t\t\t\t\tvar hs = target.getCards();\r\n\t\t\t\t\tvar dis = [];\r\n\t\t\t\t\tfor (var i = 0; i < hs.length; i++) {\r\n\t\t\t\t\t\tif (get.suit(hs[i]) == (result.control == \"黑桃\" ? \"spade\" : \"club\")) dis.push(hs[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttarget.discard(dis);\r\n\t\t\t\t\tplayer.draw(dis.length);\r\n\t\t\t\t}\r\n\t\t\t\tif (event.num < targets.length - 1) {\r\n\t\t\t\t\tevent.num++;\r\n\t\t\t\t\tevent.goto(1);\r\n\t\t\t\t} else event.finish();\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tvar target = targets[event.num];\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar dis = target.getCards();\r\n\t\t\t\t\ttarget.discard(dis);\r\n\t\t\t\t\tif (target.hasMark(\"quanshanmrfz_eff\")) {\r\n\t\t\t\t\t\ttarget.damage(target.countMark(\"quanshanmrfz_eff\"));\r\n\t\t\t\t\t\ttarget.removeMark(\"quanshanmrfz_eff\", target.countMark(\"quanshanmrfz_eff\"));\r\n\t\t\t\t\t} else event.goto(5);\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 4\");\r\n\t\t\t\tif (event.num < targets.length - 1) {\r\n\t\t\t\t\tevent.num++;\r\n\t\t\t\t\tevent.goto(1);\r\n\t\t\t\t} else event.finish();\r\n\t\t\t\t(\"step 5\");\r\n\t\t\t\tvar target = targets[event.num];\r\n\t\t\t\tif (!target.hasSkill(\"quanshanmrfz_eff\")) {\r\n\t\t\t\t\ttarget.drawTo(Math.min(3, target.maxHp));\r\n\t\t\t\t\ttarget.addSkill(\"quanshanmrfz_eff\");\r\n\t\t\t\t\tplayer.popup(\"劝善\");\r\n\t\t\t\t\tplayer.logSkill(\"quanshanmrfz\", target);\r\n\t\t\t\t}\r\n\t\t\t\tevent.goto(4);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\ttarget: -1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//新银灰\r\n\t\txuebianmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"已造成#点伤害\",\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\taudio: 2,\r\n\t\t\tusable: 1,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.countCards(\"h\") > 0 &&\r\n\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && current.countCards(\"h\") > 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tselectTarget: [1, 2],\r\n\t\t\tcheck: function () {\r\n\t\t\t\treturn -1;\r\n\t\t\t},\r\n\t\t\tmultitarget: true,\r\n\t\t\tmultiline: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tevent.cards1 = [];\r\n\t\t\t\tevent.cards2 = [];\r\n\t\t\t\tevent.cards3 = [];\r\n\t\t\t\tfor (i of targets) i.addTempSkill(\"xuebianmrfz2\", { player: \"phaseEnd\" });\r\n\t\t\t\ttargets.push(player);\r\n\t\t\t\ttargets.sortBySeat();\r\n\t\t\t\tvar next = player\r\n\t\t\t\t\t.chooseCardOL(targets, \"请选择要展示的牌\", true, [1, 3])\r\n\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\treturn -get.value(card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"source\", player);\r\n\t\t\t\tnext.aiCard = function (target) {\r\n\t\t\t\t\tvar hs = target.getCards(\"h\");\r\n\t\t\t\t\treturn { bool: true, cards: [hs.randomGet()] };\r\n\t\t\t\t};\r\n\t\t\t\tnext._args.remove(\"glow_result\");\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tvar cards = [];\r\n\t\t\t\tvar num = 0;\r\n\t\t\t\tevent.videoId = lib.status.videoId++;\r\n\t\t\t\tfor (var i = 0; i < targets.length; i++) {\r\n\t\t\t\t\tfor (var j = 0; j < result[i].cards.length; j++) {\r\n\t\t\t\t\t\tcards.push(result[i].cards[j]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tevent.cards = cards;\r\n\t\t\t\tgame.log(player, \"展示了\", targets, \"的\", cards);\r\n\t\t\t\tgame.broadcastAll(\r\n\t\t\t\t\tfunction (targets, cards, id, player) {\r\n\t\t\t\t\t\tvar dialog = ui.create.dialog(get.translation(player) + \"发动了【雪变】\", cards);\r\n\t\t\t\t\t\tdialog.videoId = id;\r\n\t\t\t\t\t\tvar getName = function (target) {\r\n\t\t\t\t\t\t\tif (target._tempTranslate) return target._tempTranslate;\r\n\t\t\t\t\t\t\tvar name = target.name;\r\n\t\t\t\t\t\t\tif (lib.translate[name + \"_ab\"]) return lib.translate[name + \"_ab\"];\r\n\t\t\t\t\t\t\treturn get.translation(name);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tfor (var i = 0; i < targets.length; i++) {\r\n\t\t\t\t\t\t\tif (i == 0) event.cards1 = result[i].cards;\r\n\t\t\t\t\t\t\tif (i == 1) event.cards2 = result[i].cards;\r\n\t\t\t\t\t\t\tif (i == 2) event.cards3 = result[i].cards;\r\n\t\t\t\t\t\t\tfor (var j = 0; j < result[i].cards.length; j++) {\r\n\t\t\t\t\t\t\t\tif (i == 0) dialog.buttons[j].querySelector(\".info\").innerHTML = getName(targets[i]);\r\n\t\t\t\t\t\t\t\telse if (i == 1)\r\n\t\t\t\t\t\t\t\t\tdialog.buttons[j + result[i - 1].cards.length].querySelector(\".info\").innerHTML = getName(targets[i]);\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\tdialog.buttons[j + result[i - 2].cards.length + result[i - 1].cards.length].querySelector(\".info\").innerHTML =\r\n\t\t\t\t\t\t\t\t\t\tgetName(targets[i]);\r\n\t\t\t\t\t\t\t\tif (get.color(result[i].cards[j]) == \"red\") num++;\r\n\t\t\t\t\t\t\t\telse num--;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttargets,\r\n\t\t\t\t\tcards,\r\n\t\t\t\t\tevent.videoId,\r\n\t\t\t\t\tplayer\r\n\t\t\t\t);\r\n\t\t\t\tgame.delay(4);\r\n\t\t\t\t//红多\r\n\t\t\t\tif (num > 0) {\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.chooseTarget(\"【雪变】：你可以对其中一名角色造成一点伤害并令其弃置其展示的牌\", function (card, player, target) {\r\n\t\t\t\t\t\t\treturn target != player && target.hasSkill(\"xuebianmrfz2\");\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\treturn get.attitude(player, target) < 0;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\tevent.targets = result;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor (var i = 0; i < targets.length; i++) {\r\n\t\t\t\t\t\ttargets[i].discard(result[i].cards);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tvar list = [event.cards1, event.cards2, event.cards3];\r\n\t\t\t\tgame.broadcastAll(\"closeDialog\", event.videoId);\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tresult.targets[0].damage();\r\n\t\t\t\t\tfor (var i = 0; i < event.targets.length; i++) {\r\n\t\t\t\t\t\tif (event.targets[i] == result.targets[0]) var cards = list[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresult.targets[0].discard(cards);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"xuebianmrfz_dam\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdam: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.getParent().name == \"xuebianmrfz\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addMark(\"xuebianmrfz\", trigger.num, false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 12,\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\ttarget: -1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txuebianmrfz2: {\r\n\t\t\tcharlotte: true,\r\n\t\t},\r\n\t\ttonghemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tderivation: [\"xinyingshimrfz\", \"new_xinbangmrfz\"],\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationColor: \"thunder\",\r\n\t\t\tunique: true,\r\n\t\t\tjuexingji: true,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"xuebianmrfz\") >= 2 || game.roundNumber > 2;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.addMark(\"xinyingshimrfz\", player.countMark(\"xuebianmrfz\"), false);\r\n\t\t\t\tplayer.removeSkill(\"xuebianmrfz\");\r\n\t\t\t\tplayer.addSkill(\"xinyingshimrfz\");\r\n\t\t\t\tplayer.addSkill(\"new_xinbangmrfz\");\r\n\t\t\t\tplayer.loseMaxHp();\r\n\t\t\t\tplayer.recoverTo(player.maxHp);\r\n\t\t\t\tplayer.awakenSkill(\"tonghemrfz\");\r\n\t\t\t},\r\n\t\t},\r\n\t\txinyingshimrfz: {\r\n\t\t\taudio: \"yingshimrfz\",\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => lib.skill.xinyingshimrfz.filterTarget(null, player, current));\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar num = player.countMark(\"xinyingshimrfz\") + 1;\r\n\t\t\t\tvar max = target.countCards(\"h\");\r\n\t\t\t\tif (max > num) return player.discardPlayerCard(num, target, \"h\", true, \"visible\");\r\n\t\t\t\tif (num >= max) return player.discardPlayerCard(max, target, \"h\", true, \"visible\");\r\n\t\t\t\tgame.log(player, \"观看了\", target, \"的手牌\");\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tthreaten: 1.1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\ttarget: -1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txinbangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseDrawBegin2\",\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.num > 0 && !event.numFixed;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.storage.xinbangmrfz = [];\r\n\t\t\t\tvar num = get.copy(trigger.num);\r\n\t\t\t\tplayer.chooseTarget(\r\n\t\t\t\t\tget.prompt(\"xinbangmrfz\"),\r\n\t\t\t\t\t\"选择至多\" + get.translation(num) + \"名其他角色，其选择让你定向摸牌，然后你少摸等量的牌\",\r\n\t\t\t\t\t[1, num],\r\n\t\t\t\t\tfunction (card, player, target) {\r\n\t\t\t\t\t\treturn player != target;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfunction (target) {\r\n\t\t\t\t\t\tvar att = get.attitude(_status.event.player, target);\r\n\t\t\t\t\t\treturn att > 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tevent.targets = result.targets;\r\n\t\t\t\t\tevent.num = 0;\r\n\t\t\t\t\ttrigger.num -= result.targets.length;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tvar target = event.targets[event.num];\r\n\t\t\t\tvar att = get.attitude(target, player);\r\n\t\t\t\ttarget.addTempSkill(\"xinbangmrfz2\", {\r\n\t\t\t\t\tplayer: \"phaseUseEnd\",\r\n\t\t\t\t});\r\n\t\t\t\ttarget\r\n\t\t\t\t\t.chooseControl(\"basic\", \"trick\", \"equip\")\r\n\t\t\t\t\t.set(\"prompt\", \"【兴邦】：请让\" + get.translation(player) + \"摸一张指定类型牌，当此牌造成伤害时，你与其各摸一张牌\")\r\n\t\t\t\t\t.set(\"ai\", function (player) {\r\n\t\t\t\t\t\tif (att > 0) return [1, 2].randomGet();\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t});\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tvar card = get.cardPile2(function (card) {\r\n\t\t\t\t\treturn get.type(card, \"trick\") == result.control;\r\n\t\t\t\t});\r\n\t\t\t\tif (card) {\r\n\t\t\t\t\tplayer.gain(card, \"gain2\").gaintag = [\"xinbangmrfz\"];\r\n\t\t\t\t} else player.chat(\"牌堆中没有\" + get.translation(result.control) + \"牌了！\");\r\n\t\t\t\t(\"step 4\");\r\n\t\t\t\tvar cards = player.getCards(\"h\", function (card) {\r\n\t\t\t\t\treturn card.hasGaintag(\"xinbangmrfz\");\r\n\t\t\t\t});\r\n\t\t\t\tfor (i of cards) {\r\n\t\t\t\t\ti.storage.xinbangmrfz = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (event.num < event.targets.length - 1) {\r\n\t\t\t\t\tevent.num++;\r\n\t\t\t\t\tevent.goto(2);\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 5\");\r\n\t\t\t\tif (trigger.num <= 0) game.delay();\r\n\t\t\t},\r\n\t\t\tgroup: [\"xinbangmrfz_draw\", \"xinbangmrfz_lose\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\taudio: \"xinbangmrfz\",\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!event.cards || event.cards.length > 1) return false;\r\n\t\t\t\t\t\treturn event.card.storage && event.card.storage.xinbangmrfz == true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.chooseTarget(\"【兴邦】:请选择一名其他角色，然后你与其各摸一张牌\", true, function (card, player, target) {\r\n\t\t\t\t\t\t\t\treturn target != player && target.hasSkill(\"xinbangmrfz2\");\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\treturn get.attitude(player, target) > 0;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tresult.targets[0].draw();\r\n\t\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tlose: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseUseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\t\treturn card.hasGaintag(\"xinbangmrfz\");\r\n\t\t\t\t\t\t\t}) > 0\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeGaintag(\"xinbangmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txinbangmrfz2: {\r\n\t\t\tcharlotte: true,\r\n\t\t\tsilent: true,\r\n\t\t\tonremove: true,\r\n\t\t},\r\n\t\tnew_xinbangmrfz: {\r\n\t\t\taudio: \"xinbangmrfz\",\r\n\t\t\tfrequent: true,\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!player.isPhaseUsing()) return false;\r\n\t\t\t\tvar list = player.getStorage(\"xinbangmrfz2\");\r\n\t\t\t\tif (!list.includes(get.type2(event.card, player))) return true;\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tif (!player.storage.xinbangmrfz2) {\r\n\t\t\t\t\tplayer.addTempSkill(\"xinbangmrfz2\");\r\n\t\t\t\t\tplayer.storage.xinbangmrfz2 = [];\r\n\t\t\t\t}\r\n\t\t\t\tplayer.storage.xinbangmrfz2.add(get.type2(trigger.card, player));\r\n\t\t\t\tplayer.draw();\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (Array.isArray(result) && result.length > 0) {\r\n\t\t\t\t\tvar card = result[0],\r\n\t\t\t\t\t\tcards = player.getCards(\"h\"),\r\n\t\t\t\t\t\tlist = [];\r\n\t\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\t\tif (i == result[0]) continue;\r\n\t\t\t\t\t\tlist.add(get.suit(i, player));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!list.includes(get.suit(card, player))) player.draw();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\t//帕拉斯\r\n\t\tyingzhumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\tdirect: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.yingzhumrfz;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar next = player.chooseControl(\"准备\", \"判定\", \"摸牌\", \"出牌\", \"弃牌\", \"结束\", \"cancel2\").set(\"prompt\", get.prompt(\"yingzhumrfz\"));\r\n\t\t\t\tnext.set(\"prompt2\", \"你可以令自己在任意阶段结束后额外执行一个该阶段\");\r\n\t\t\t\tnext.set(\"ai\", function () {\r\n\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tplayer.countCards(\"h\", \"sha\") > player.getCardUsable(\"sha\") &&\r\n\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn current != player && player.inRange(current) && get.attitude(player, current) < 0;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t)\r\n\t\t\t\t\t\treturn 3;\r\n\t\t\t\t\treturn 2;\r\n\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.control != \"cancel2\") {\r\n\t\t\t\t\tvar list = [\r\n\t\t\t\t\t\t\"yingzhumrfz_Zhunbei\",\r\n\t\t\t\t\t\t\"yingzhumrfz_judge\",\r\n\t\t\t\t\t\t\"yingzhumrfz_draw\",\r\n\t\t\t\t\t\t\"yingzhumrfz_use\",\r\n\t\t\t\t\t\t\"yingzhumrfz_discard\",\r\n\t\t\t\t\t\t\"yingzhumrfz_jieshu\",\r\n\t\t\t\t\t];\r\n\t\t\t\t\tplayer.addTempSkill(list[result.index]);\r\n\t\t\t\t\tplayer.logSkill(\"yingzhumrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"yingzhumrfz_phase\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tphase: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer.storage.yingzhumrfz = false;\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.chooseTarget(\r\n\t\t\t\t\t\t\t\tget.prompt(\"yingzhumrfz\"),\r\n\t\t\t\t\t\t\t\t\"你可以选择一名其他角色，令其于任一阶段结束后额外执行一次此阶段\",\r\n\t\t\t\t\t\t\t\tfunction (card, player, target) {\r\n\t\t\t\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\tvar att = get.attitude(player, target);\r\n\t\t\t\t\t\t\t\treturn att > 0;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tvar att = get.attitude(player, result.targets[0]);\r\n\t\t\t\t\t\t\tvar next = player.chooseControl(\"准备\", \"判定\", \"摸牌\", \"出牌\", \"弃牌\", \"结束\");\r\n\t\t\t\t\t\t\tnext.set(\"prompt\", \"【英祝】:请选择一个阶段,\" + get.translation(result.targets[0]) + \"于此阶段结束后额外执行一次此阶段\");\r\n\t\t\t\t\t\t\tnext.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\t\t\t\treturn 2;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tplayer.storage.yingzhumrfz = true;\r\n\t\t\t\t\t\t\tevent.target = result.targets[0];\r\n\t\t\t\t\t\t} else event.finish();\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tvar list = [\r\n\t\t\t\t\t\t\t\"yingzhumrfz_Zhunbei\",\r\n\t\t\t\t\t\t\t\"yingzhumrfz_judge\",\r\n\t\t\t\t\t\t\t\"yingzhumrfz_draw\",\r\n\t\t\t\t\t\t\t\"yingzhumrfz_use\",\r\n\t\t\t\t\t\t\t\"yingzhumrfz_discard\",\r\n\t\t\t\t\t\t\t\"yingzhumrfz_jieshu\",\r\n\t\t\t\t\t\t];\r\n\t\t\t\t\t\tevent.target.addSkill(list[result.index]);\r\n\t\t\t\t\t\tplayer.logSkill(\"yingzhumrfz\", event.target);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\texpose: 0.1,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tZhunbei: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseZhunbeiAfter\" },\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"于准备阶段结束后额外执行一个准备阶段\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tevent.next.remove(player.phaseZhunbei());\r\n\t\t\t\t\t\ttrigger.next.push(player.phaseZhunbei());\r\n\t\t\t\t\t\tplayer.removeSkill(\"yingzhumrfz_Zhunbei\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tjudge: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"于判定阶段结束后额外执行一个判定阶段\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: { player: \"phaseJudgeAfter\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tevent.next.remove(player.phaseJudge());\r\n\t\t\t\t\t\ttrigger.next.push(player.phaseJudge());\r\n\t\t\t\t\t\tplayer.removeSkill(\"yingzhumrfz_judge\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"于摸牌阶段结束后额外执行一个摸牌阶段\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: { player: \"phaseDrawAfter\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tevent.next.remove(player.phaseDraw());\r\n\t\t\t\t\t\ttrigger.next.push(player.phaseDraw());\r\n\t\t\t\t\t\tplayer.removeSkill(\"yingzhumrfz_draw\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tuse: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"于出牌阶段结束后额外执行一个出牌阶段\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: { player: \"phaseUseAfter\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tevent.next.remove(player.phaseUse());\r\n\t\t\t\t\t\ttrigger.next.push(player.phaseUse());\r\n\t\t\t\t\t\tplayer.removeSkill(\"yingzhumrfz_use\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdiscard: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"于弃牌阶段结束后额外执行一个弃牌阶段\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: { player: \"phaseDiscardAfter\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tevent.next.remove(player.phaseDiscard());\r\n\t\t\t\t\t\ttrigger.next.push(player.phaseDiscard());\r\n\t\t\t\t\t\tplayer.removeSkill(\"yingzhumrfz_discard\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tjieshu: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"于结束阶段结束后额外执行一个结束阶段\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: { player: \"phaseJieshuAfter\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tevent.next.remove(player.phaseJieshu());\r\n\t\t\t\t\t\ttrigger.next.push(player.phaseJieshu());\r\n\t\t\t\t\t\tplayer.removeSkill(\"yingzhumrfz_jieshu\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tyingdanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tsilent: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: [\"phaseZhunbeiAfter\", \"phaseJudgeAfter\", \"phaseDrawAfter\", \"phaseUseAfter\", \"phaseDiscardAfter\", \"phaseJieshuAfter\"],\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.player.addMark(\"yingdanmrfz\", false);\r\n\t\t\t},\r\n\t\t\tgroup: \"yingdanmrfz_draw\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tvar target = trigger.player;\r\n\t\t\t\t\t\tif (target.countMark(\"yingdanmrfz\") > 6) {\r\n\t\t\t\t\t\t\tvar next = player.chooseBool(\r\n\t\t\t\t\t\t\t\t\"【英诞】:是否令\" +\r\n\t\t\t\t\t\t\t\t\t(target == player ? \"自己\" : get.translation(target)) +\r\n\t\t\t\t\t\t\t\t\t\"摸\" +\r\n\t\t\t\t\t\t\t\t\t(target.countMark(\"yingdanmrfz\") - 6) +\r\n\t\t\t\t\t\t\t\t\t\"张牌？\"\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tnext.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\tvar target = trigger.player;\r\n\t\t\t\t\t\t\t\treturn get.attitude(player, target) > 0;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tvar target = trigger.player;\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\ttarget.draw(target.countMark(\"yingdanmrfz\") - 6);\r\n\t\t\t\t\t\t\tplayer.logSkill(\"yingdanmrfz\", target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttarget.removeMark(\"yingdanmrfz\", target.countMark(\"yingdanmrfz\"), false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t},\r\n\t\t},\r\n\t\tyingfenmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.storage.yingfenmrfz) return false;\r\n\t\t\t\treturn event.card.name == \"tao\";\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseTarget(get.prompt(\"yingfenmrfz\"), \"你可以令一名其他角色恢复一点体力\", function (card, player, target) {\r\n\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\treturn get.attitude(player, target) > 0;\r\n\t\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tplayer.storage.yingfenmrfz = true;\r\n\t\t\t\t\tresult.targets[0].recover();\r\n\t\t\t\t\tplayer.logSkill(\"yingfenmrfz\", result.targets[0]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"yingfenmrfz_clear\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.storage.yingfenmrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.yingfenmrfz = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//瑕光\r\n\t\trencimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseEnd\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.player == player || event.player.getHistory(\"skipped\").length == 0) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tlib.filter.targetEnabled({ name: \"sha\" }, player, event.player) &&\r\n\t\t\t\t\t(player.hasSha() || (_status.connectMode && player.countCards(\"h\") > 0))\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.addTempSkill(\"rencimrfz_dam\", \"useCardAfter\");\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseToUse(\r\n\t\t\t\t\t\tfunction (card, player, event) {\r\n\t\t\t\t\t\t\tif (get.name(card) != \"sha\") return false;\r\n\t\t\t\t\t\t\treturn lib.filter.filterCard.apply(this, arguments);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\"【仁慈】:是否对\" + get.translation(trigger.player) + \"使用一张杀？\"\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"logSkill\", \"rencimrfz\")\r\n\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\tif (target != _status.event.sourcex && !ui.selected.targets.includes(_status.event.sourcex)) return false;\r\n\t\t\t\t\t\treturn lib.filter.targetEnabled.apply(this, arguments);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"sourcex\", trigger.player);\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdam: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tsource: \"damageBegin\",\r\n\t\t\t\t\t\tplayer: \"shaMiss\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (trigger.name == \"damage\") trigger.num++;\r\n\t\t\t\t\t\tplayer.removeSkill(\"rencimrfz_dam\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thuiguangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.hasMark(\"huiguangmrfz\") && player.countMark(\"huiguangmrfz\") <= 6;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar num = player.countMark(\"huiguangmrfz\") - 1;\r\n\t\t\t\tvar list = [\"准备\", \"判定\", \"摸牌\", \"出牌\", \"弃牌\", \"结束\"];\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseTarget(\"【辉光】:你可以令一名其他角色跳过下个\" + list[num] + \"阶段\", function (card, player, target) {\r\n\t\t\t\t\t\treturn target != player && !target.hasSkill(\"huiguangmrfz_skip\");\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\tvar att = get.attitude(target, player),\r\n\t\t\t\t\t\t\tnum = player.countMark(\"huiguangmrfz\");\r\n\t\t\t\t\t\tif (num == 2 || num == 5) return att > 0;\r\n\t\t\t\t\t\treturn att < 0;\r\n\t\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar target = result.targets[0],\r\n\t\t\t\t\t\tnum = player.countMark(\"huiguangmrfz\") - 1;\r\n\t\t\t\t\ttarget.addSkill(\"huiguangmrfz_skip\");\r\n\t\t\t\t\ttarget.addMark(\"huiguangmrfz_skip\", num + 1, false);\r\n\t\t\t\t\tplayer.logSkill(\"huiguangmrfz\", target);\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tplayer.removeMark(\"huiguangmrfz\", player.countMark(\"huiguangmrfz\"), false);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t},\r\n\t\t\tgroup: [\"huiguangmrfz_mark\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tskip: {\r\n\t\t\t\t\tmarkimage: \"extension/WhichWay/image/skill/sleepmrfz.png\",\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tname: \"睡眠\",\r\n\t\t\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\t\t\tvar phase = [\"phaseZhunbei\", \"phaseJudge\", \"phaseDraw\", \"phaseUse\", \"phaseDiscard\", \"phaseJieshu\"];\r\n\t\t\t\t\t\t\tvar num = player.countMark(\"huiguangmrfz_skip\") - 1;\r\n\t\t\t\t\t\t\treturn \"跳过下个\" + get.tranPhase(phase[num]);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar phase = [\"phaseZhunbei\", \"phaseJudge\", \"phaseDraw\", \"phaseUse\", \"phaseDiscard\", \"phaseJieshu\"];\r\n\t\t\t\t\t\tvar num = player.countMark(\"huiguangmrfz_skip\") - 1;\r\n\t\t\t\t\t\tplayer.skip(phase[num]);\r\n\t\t\t\t\t\tgame.log(player, \"跳过了\", get.tranPhase(phase[num]));\r\n\t\t\t\t\t\tplayer.removeMark(\"huiguangmrfz_skip\", player.countMark(\"huiguangmrfz_skip\"), false);\r\n\t\t\t\t\t\tplayer.removeSkill(\"huiguangmrfz_skip\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tmark: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCardAfter\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn _status.currentPhase == player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addMark(\"huiguangmrfz\", false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tjiandunmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: [\"chooseToRespond\", \"chooseToUse\"],\r\n\t\t\thiddenCard: function (player, name) {\r\n\t\t\t\tif (get.type(name) != \"basic\") return false;\r\n\t\t\t\treturn player.hasCard(function (card) {\r\n\t\t\t\t\treturn get.type2(card) == \"trick\";\r\n\t\t\t\t}, \"hs\");\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (\r\n\t\t\t\t\t!player.hasCard(function (card) {\r\n\t\t\t\t\t\treturn get.type2(card) == \"trick\";\r\n\t\t\t\t\t}, \"hs\")\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\tfor (var name of lib.inpile) {\r\n\t\t\t\t\tif (get.type(name) != \"basic\") continue;\r\n\t\t\t\t\tif (event.filterCard({ name: name }, player, event)) return true;\r\n\t\t\t\t\tif (name == \"sha\") {\r\n\t\t\t\t\t\tfor (var nature of lib.inpile_nature) {\r\n\t\t\t\t\t\t\tif (event.filterCard({ name: \"sha\", nature: nature }, player, event)) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tchooseButton: {\r\n\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\tvar list = [];\r\n\t\t\t\t\tfor (var name of lib.inpile) {\r\n\t\t\t\t\t\tif (get.type(name) != \"basic\") continue;\r\n\t\t\t\t\t\tif (event.filterCard({ name: name }, player, event)) {\r\n\t\t\t\t\t\t\tlist.push([\"基本\", \"\", name]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (name == \"sha\") {\r\n\t\t\t\t\t\t\tfor (var nature of lib.inpile_nature) {\r\n\t\t\t\t\t\t\t\tif (event.filterCard({ name: name, nature: nature }, player, event)) list.push([\"基本\", \"\", \"sha\", nature]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn ui.create.dialog(\"剑盾\", [list, \"vcard\"], \"hidden\");\r\n\t\t\t\t},\r\n\t\t\t\tcheck: function (button) {\r\n\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\tvar card = {\r\n\t\t\t\t\t\tname: button.link[2],\r\n\t\t\t\t\t\tnature: button.link[3],\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t_status.event.getParent().type != \"phase\" ||\r\n\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn player.canUse(card, current) && get.effect(current, card, player, player) > 0;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tswitch (button.link[2]) {\r\n\t\t\t\t\t\t\tcase \"tao\":\r\n\t\t\t\t\t\t\tcase \"shan\":\r\n\t\t\t\t\t\t\t\treturn 5;\r\n\t\t\t\t\t\t\tcase \"jiu\": {\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\tplayer.countCards(\"hs\", {\r\n\t\t\t\t\t\t\t\t\t\ttype: \"trick\",\r\n\t\t\t\t\t\t\t\t\t}) > 2\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\treturn 3;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcase \"sha\":\r\n\t\t\t\t\t\t\t\tif (button.link[3] == \"fire\") return 2.95;\r\n\t\t\t\t\t\t\t\telse if (button.link[3] == \"thunder\" || button.link[3] == \"ice\") return 2.92;\r\n\t\t\t\t\t\t\t\telse return 2.9;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t},\r\n\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\taudio: \"jiandunmrfz\",\r\n\t\t\t\t\t\tfilterCard: function (card, player, target) {\r\n\t\t\t\t\t\t\treturn get.type2(card) == \"trick\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcomplexCard: true,\r\n\t\t\t\t\t\tselectCard: 1,\r\n\t\t\t\t\t\tcheck: function (card, player, target) {\r\n\t\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tviewAs: { name: links[0][2], nature: links[0][3] },\r\n\t\t\t\t\t\tposition: \"hes\",\r\n\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\treturn \"你可以将一张锦囊牌当任意基本牌使用或打出\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 3.1,\r\n\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\tif (tag == \"fireAttack\") return true;\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t!player.hasCard(function (card) {\r\n\t\t\t\t\t\t\treturn get.type2(card) == \"trick\";\r\n\t\t\t\t\t\t}, \"hes\")\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t\trespondSha: true,\r\n\t\t\t\trespondShan: true,\r\n\t\t\t\tfireAttack: true,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//新星熊\r\n\t\txinboremrfz: {\r\n\t\t\taudio: \"banruomrfz\",\r\n\t\t\tmark: false,\r\n\t\t\tmarkimage: \"extension/WhichWay/image/skill/xinboremrfz.png\",\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (player) {\r\n\t\t\t\t\tvar playerhas = game.findPlayer(function (current) {\r\n\t\t\t\t\t\treturn current.hasSkill(\"xinboremrfz\");\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn get.translation(playerhas) + \"正在保护你\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"xinboremrfz_choose\", \"xinboremrfz_card\", \"xinboremrfz_betarget\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tbetarget: {\r\n\t\t\t\t\taudio: \"banruomrfz\",\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"useCardToPlayer\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.targets > 1 || get.type(event.card) == \"equip\") return false;\r\n\t\t\t\t\t\treturn event.target.hasMark(\"xinboremrfz\") && player.getHandcardLimit() > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: function (event, player) {\r\n\t\t\t\t\t\treturn \"【般若】：是否令\" + get.translation(event.card) + \"的目标由\" + get.translation(event.target) + \"改为你？\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\tvar att = get.attitude(event.target, player);\r\n\t\t\t\t\t\tif ((event.card.name == \"wuzhong\" || event.card.name == \"dongzhuxianji\" || event.card.name == \"zenbing\") && att < 0)\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\treturn att > 0 && get.tag(event.card, \"damage\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tvar target = trigger.target;\r\n\t\t\t\t\t\ttrigger.targets.remove(target);\r\n\t\t\t\t\t\ttrigger.getParent().triggeredTargets1.remove(target);\r\n\t\t\t\t\t\ttrigger.untrigger();\r\n\t\t\t\t\t\tgame.delayx();\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\ttrigger.targets.push(player);\r\n\t\t\t\t\t\ttrigger.player.line(player, \"fire\");\r\n\t\t\t\t\t\tgame.log(trigger.card, \"的目标被改为\", player);\r\n\t\t\t\t\t\tplayer.addMark(\"xinboremrfz_losehdlimit\", false);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\texpose: 0.1,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tchoose: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer.chooseTarget(true, \"【般若】：请选择一名其他角色，令其获得‘般若’标记\", function (card, player, target) {\r\n\t\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\t\t\treturn get.attitude(player, target);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\t\t\ttarget.addMark(\"xinboremrfz\");\r\n\t\t\t\t\t\t\tplayer.logSkill(\"xinboremrfz\", target);\r\n\t\t\t\t\t\t\tplayer.disableEquip(\"equip2\");\r\n\t\t\t\t\t\t\ttarget.disableEquip(\"equip2\");\r\n\t\t\t\t\t\t\tplayer.addSkill(\"xinboremrfz_handlit\");\r\n\t\t\t\t\t\t\ttarget.addSkill(\"xinboremrfz_handlit\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tplayer.addSkill(\"xinboremrfz_losehdlimit\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"xinboremrfz_choose\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\texpose: 0.1,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tcard: {\r\n\t\t\t\t\taudio: \"xinboremrfz\",\r\n\t\t\t\t\tenable: \"chooseToUse\",\r\n\t\t\t\t\thiddenCard: function (player, name) {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tplayer.hasSkill(\"xinboremrfz_usedwuxie\") &&\r\n\t\t\t\t\t\t\tplayer.hasSkill(\"xinboremrfz_usedsha\") &&\r\n\t\t\t\t\t\t\tplayer.hasSkill(\"xinboremrfz_usedshan\")\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\tif (name == \"wuxie\" && player.hasSkill(\"xinboremrfz_usedwuxie\")) return false;\r\n\t\t\t\t\t\tif (name == \"sha\" && player.hasSkill(\"xinboremrfz_usedsha\")) return false;\r\n\t\t\t\t\t\tif (name == \"shan\" && player.hasSkill(\"xinboremrfz_usedshan\")) return false;\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t(name == \"wuxie\" || name == \"sha\" || name == \"shan\") && (player.getHandcardLimit() > 0 || player.countDisabledSlot() < 5)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tplayer.hasSkill(\"xinboremrfz_usedwuxie\") &&\r\n\t\t\t\t\t\t\tplayer.hasSkill(\"xinboremrfz_usedsha\") &&\r\n\t\t\t\t\t\t\tplayer.hasSkill(\"xinboremrfz_usedshan\")\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\treturn player.getHandcardLimit() > 0 || player.countDisabledSlot() < 5;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tchooseButton: {\r\n\t\t\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\t\t\tvar vcards = [];\r\n\t\t\t\t\t\t\tfor (var name of [\"sha\", \"shan\", \"wuxie\"]) {\r\n\t\t\t\t\t\t\t\tconst card = { name: name };\r\n\t\t\t\t\t\t\t\tif (name == \"wuxie\" && player.hasSkill(\"xinboremrfz_usedwuxie\")) continue;\r\n\t\t\t\t\t\t\t\tif (name == \"shan\" && player.hasSkill(\"xinboremrfz_usedshan\")) continue;\r\n\t\t\t\t\t\t\t\tif (name == \"sha\" && player.hasSkill(\"xinboremrfz_usedsha\")) continue;\r\n\t\t\t\t\t\t\t\tif (event.filterCard(card, player, event)) {\r\n\t\t\t\t\t\t\t\t\t//QQQ\r\n\t\t\t\t\t\t\t\t\tif (name == \"sha\") {\r\n\t\t\t\t\t\t\t\t\t\tvcards.push([\"基本\", \"\", \"sha\"]);\r\n\t\t\t\t\t\t\t\t\t\tfor (var j of lib.inpile_nature) vcards.push([\"基本\", \"\", \"sha\", j]);\r\n\t\t\t\t\t\t\t\t\t} else if (get.type(name) == \"trick\") {\r\n\t\t\t\t\t\t\t\t\t\tvcards.push([\"锦囊\", \"\", name]);\r\n\t\t\t\t\t\t\t\t\t} else if (get.type(name) == \"basic\") {\r\n\t\t\t\t\t\t\t\t\t\tvcards.push([\"基本\", \"\", name]);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar dialog = ui.create.dialog(\"般若\", [vcards, \"vcard\"], \"hidden\");\r\n\t\t\t\t\t\t\tdialog.direct = true;\r\n\t\t\t\t\t\t\treturn dialog;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfilter: function (button, player) {\r\n\t\t\t\t\t\t\treturn _status.event.getParent().filterCard({ name: button.link[2] }, player, _status.event.getParent());\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tfilterCard: () => false,\r\n\t\t\t\t\t\t\t\tselectCard: -1,\r\n\t\t\t\t\t\t\t\tviewAs: {\r\n\t\t\t\t\t\t\t\t\tname: links[0][2],\r\n\t\t\t\t\t\t\t\t\tnature: links[0][3],\r\n\t\t\t\t\t\t\t\t\tisCard: true,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t\t\t\tprecontent: function () {\r\n\t\t\t\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\t\t\t\tvar card = event.result.card.name;\r\n\t\t\t\t\t\t\t\t\tif (card == \"sha\") {\r\n\t\t\t\t\t\t\t\t\t\tevent.getParent().addCount = false;\r\n\t\t\t\t\t\t\t\t\t\tplayer.addSkill(\"xinboremrfz_usedsha\");\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (card == \"shan\") player.addSkill(\"xinboremrfz_usedshan\");\r\n\t\t\t\t\t\t\t\t\tif (card == \"wuxie\") player.addSkill(\"xinboremrfz_usedwuxie\");\r\n\t\t\t\t\t\t\t\t\tplayer.logSkill(\"xinboremrfz\");\r\n\t\t\t\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\t\t\t\tvar list = [];\r\n\t\t\t\t\t\t\t\t\tif (player.getHandcardLimit() > 0) list.push(\"手牌上限-1\");\r\n\t\t\t\t\t\t\t\t\tif (player.countDisabledSlot() < 5) list.push(\"废除一个装备栏\");\r\n\t\t\t\t\t\t\t\t\tif (list.length > 1)\r\n\t\t\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t\t\t\t\t\t.set(\"prompt\", \"【般若】：请选择一项\")\r\n\t\t\t\t\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t\tif (player.getHandcardLimit() == 0)\r\n\t\t\t\t\t\t\t\t\t\t\tplayer.chooseToDisable().ai = function (event, player, list) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (list.includes(\"equip5\")) return \"equip5\";\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn list.randomGet();\r\n\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\telse player.addMark(\"xinboremrfz_losehdlimit\", false);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\t\t\t\tif (result.index == 0) player.addMark(\"xinboremrfz_losehdlimit\", false);\r\n\t\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\t\tplayer.chooseToDisable().ai = function (event, player, list) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (list.includes(\"equip5\")) return \"equip5\";\r\n\t\t\t\t\t\t\t\t\t\t\treturn list.randomGet();\r\n\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\t\t\treturn \"【般若】：视为使用一张【\" + get.translation(links[0][2]) + \"】\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\torder: function (item, player) {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tvar event = _status.event;\r\n\t\t\t\t\t\t\tif (event.filterCard({ name: \"sha\" }, player, event)) {\r\n\t\t\t\t\t\t\t\treturn 4;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\trespondSha: true,\r\n\t\t\t\t\t\trespondShan: true,\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tplayer.hasSkill(\"xinboremrfz_usedwuxie\") &&\r\n\t\t\t\t\t\t\t\tplayer.hasSkill(\"xinboremrfz_usedsha\") &&\r\n\t\t\t\t\t\t\t\tplayer.hasSkill(\"xinboremrfz_usedshan\")\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\tif (arg != \"use\") return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tlosehdlimit: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn num - player.countMark(\"xinboremrfz_losehdlimit\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tusedshan: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseZhunbeiBegin\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeSkill(\"xinboremrfz_usedshan\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tusedwuxie: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseZhunbeiBegin\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeSkill(\"xinboremrfz_usedwuxie\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tusedsha: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseZhunbeiBegin\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeSkill(\"xinboremrfz_usedsha\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\thandlit: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn num + 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txinyizhongmrfz: {\r\n\t\t\taudio: \"yizhongmrfz\",\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.hp >= player.getHandcardLimit();\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar num = 5 - player.countDisabledSlot() - 1;\r\n\t\t\t\tplayer.addMark(\"xinyizhongmrfz\", num, false);\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\treturn num + player.countMark(\"xinyizhongmrfz\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: \"xinyizhongmrfz_lose\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tlose: {\r\n\t\t\t\t\taudio: \"yizhongmrfz\",\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.source != undefined && event.num > 0 && event.source.hasMark(\"xinboremrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeSkill(\"xinboremrfz\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"xinyizhongmrfz_lose\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//新缪尔赛思\r\n\t\tyuanliumrfz: {\r\n\t\t\taudio: \"kaiyuanmrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tlocked: false,\r\n\t\t\tmarkimage: \"extension/WhichWay/image/skill/miumiuliuxingmrfz.png\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"流形\",\r\n\t\t\t\tcontent: \"#/3\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseControl()\r\n\t\t\t\t\t.set(\"choiceList\", [\"令一名角色摸两张牌\", \"获得一个‘流形’\"])\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\treturn [0, 1].randomGet();\r\n\t\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.index == 0) {\r\n\t\t\t\t\tplayer.chooseTarget(true, \"【源流】：令一名角色摸两张牌\").ai = function (target) {\r\n\t\t\t\t\t\treturn get.attitude(player, target) > 2;\r\n\t\t\t\t\t};\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.logSkill(\"kaiyuanmrfz\");\r\n\t\t\t\t\tplayer.addMark(\"yuanliumrfz\");\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\ttarget.draw(2);\r\n\t\t\t\t\tplayer.logSkill(\"kaiyuanmrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\treturn num + player.countMark(\"yuanliumrfz\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: \"yuanliumrfz_get\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tget: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"phaseUseEnd\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tplayer.getHistory(\"useCard\", function (evt) {\r\n\t\t\t\t\t\t\t\treturn evt.getParent(\"phaseUse\") == event;\r\n\t\t\t\t\t\t\t}).length > 0 && player.countMark(\"yuanliumrfz\") < 3\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar list = [],\r\n\t\t\t\t\t\t\tmark = player.countMark(\"yuanliumrfz\");\r\n\t\t\t\t\t\tplayer.getHistory(\"useCard\", function (evt) {\r\n\t\t\t\t\t\t\tif (evt.getParent(\"phaseUse\") == trigger) list.add(get.type2(evt.card));\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (mark + list.length > 3) player.addMark(\"yuanliumrfz\", 3 - mark);\r\n\t\t\t\t\t\telse player.addMark(\"yuanliumrfz\", list.length);\r\n\t\t\t\t\t\tplayer.logSkill(\"yuanliumrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txinjingshuimrfz: {\r\n\t\t\taudio: \"jingshuimrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t},\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar evt = event.getParent(\"phaseUse\"),\r\n\t\t\t\t\ttype = get.type(event.card);\r\n\t\t\t\tif (type != \"basic\" && type != \"trick\") return false;\r\n\t\t\t\tif (!evt || evt.player != player) return false;\r\n\t\t\t\tif (!player.hasMark(\"yuanliumrfz\")) return false;\r\n\t\t\t\treturn event.targets && event.targets.length == 1;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"是否移除所有‘源流’并令【\" + get.translation(event.card.name) + \"】额外结算\" + player.countMark(\"yuanliumrfz\") + \"次？\";\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn !get.tag(event.card, \"norepeat\");\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar num = player.countMark(\"yuanliumrfz\");\r\n\t\t\t\ttrigger.getParent().effectCount += num;\r\n\t\t\t\tplayer.removeAllmark(\"yuanliumrfz\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tshuilingmrfz: {\r\n\t\t\taudio: \"liuxingmrfz\",\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"damageBegin3\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.hasSkill(\"shuilingmrfz_ban\")) return false;\r\n\t\t\t\treturn !event.nature && player.countCards(\"h\") >= player.hp;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.num--;\r\n\t\t\t\tplayer.addTempSkill(\"shuilingmrfz_ban\", \"phaseEnd\");\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"本回合已发动过【水灵】\",\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//新归溟幽灵鲨\r\n\t\txinyongwomrfz: {\r\n\t\t\taudio: \"yongwomrfz\",\r\n\t\t\tzhuanhuanji: true,\r\n\t\t\tlocked: false,\r\n\t\t\tmark: true,\r\n\t\t\tmarktext: \"☯\",\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (storage, player, skill) {\r\n\t\t\t\t\tif (player.storage.xinyongwomrfz) return \"阳：当你进入濒死状态时，你可以回复至一点体力\";\r\n\t\t\t\t\treturn \"阴：当你武将牌从正面朝上至背面朝上时，你可以摸两张牌，然后选择一项：1.弃置你攻击范围内一名其他角色区域内各一张牌；2.对你攻击范围内的一名其他角色造成一点伤害\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.xinyongwomrfz = true;\r\n\t\t\t},\r\n\t\t\ttrigger: { player: \"dying\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.storage.xinyongwomrfz;\r\n\t\t\t},\r\n\t\t\tprompt: \"【拥我】：是否将体力回复至1点\",\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.recoverTo(1);\r\n\t\t\t\tplayer.changeZhuanhuanji(\"xinyongwomrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: \"xinyongwomrfz_ying\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\t//阴\r\n\t\t\t\tying: {\r\n\t\t\t\t\taudio: \"xinyongwomrfz\",\r\n\t\t\t\t\ttrigger: { player: \"turnOverAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.isTurnedOver() && !player.storage.xinyongwomrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: \"【拥我】：你可以摸两张牌，然后选择一项：1.弃置你攻击范围内一名其他角色区域内各一张牌；2.对你攻击范围内的一名其他角色造成一点伤害。\",\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn current != player && get.attitude(player, current) < 0;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tvar choice = 0,\r\n\t\t\t\t\t\t\tmax = 0;\r\n\t\t\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\t\t\tvar target = game.players[i],\r\n\t\t\t\t\t\t\t\ttmp1 = 0;\r\n\t\t\t\t\t\t\tif (target == player) continue;\r\n\t\t\t\t\t\t\tif (!player.inRange(target)) continue;\r\n\t\t\t\t\t\t\tif (get.attitude(player, target) > 0) continue;\r\n\t\t\t\t\t\t\tif (target.countCards(\"e\") > 0) tmp1++;\r\n\t\t\t\t\t\t\tif (target.countCards(\"h\") > 0) tmp1++;\r\n\t\t\t\t\t\t\tif (target.countCards(\"j\") > 0) tmp1--;\r\n\t\t\t\t\t\t\tif (tmp1 > max) max = tmp1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current != player && get.attitude(player, current) < 0 && current.hp <= 1;\r\n\t\t\t\t\t\t\t}) ||\r\n\t\t\t\t\t\t\tmax < 2\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\tchoice = 1;\r\n\t\t\t\t\t\tplayer.draw(2);\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.chooseControl()\r\n\t\t\t\t\t\t\t.set(\"choiceList\", [\"弃置你攻击范围内一名其他角色区域内各一张牌\", \"对你攻击范围内的一名其他角色造成一点伤害\"])\r\n\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\treturn choice;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tevent.choice = choice;\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tevent.index = result.index;\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current != player && player.inRange(current);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t.chooseTarget(\"【拥我】:请选择一名其他角色\", true, function (rd, player, target) {\r\n\t\t\t\t\t\t\t\t\treturn target != player && player.inRange(target);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\t\t\t\t\tatt = get.attitude(player, target);\r\n\t\t\t\t\t\t\t\t\tif (event.choice == 0) {\r\n\t\t\t\t\t\t\t\t\t\tif (target.countCards(\"e\") > 0) return att < 0 && target.countCards(\"e\") > 0;\r\n\t\t\t\t\t\t\t\t\t\telse return att < 0;\r\n\t\t\t\t\t\t\t\t\t} else return get.damageEffect(target, player, player) > 0;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else event.finish();\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\t\t\tif (event.index == 0) {\r\n\t\t\t\t\t\t\t\tvar num = 0;\r\n\t\t\t\t\t\t\t\tif (target.countCards(\"h\")) num++;\r\n\t\t\t\t\t\t\t\tif (target.countCards(\"e\")) num++;\r\n\t\t\t\t\t\t\t\tif (target.countCards(\"j\")) num++;\r\n\t\t\t\t\t\t\t\tif (num) {\r\n\t\t\t\t\t\t\t\t\tplayer.discardPlayerCard(target, num, \"hej\", true).set(\"filterButton\", function (button) {\r\n\t\t\t\t\t\t\t\t\t\tfor (var i = 0; i < ui.selected.buttons.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (get.position(button.link) == get.position(ui.selected.buttons[i].link)) return false;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else target.damage(\"player\");\r\n\t\t\t\t\t\t\tplayer.logSkill(\"yongwomrfz\", target);\r\n\t\t\t\t\t\t\tplayer.changeZhuanhuanji(\"xinyongwomrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tdouzhengmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"【斗争】：是否失去所有体力并视为对\" + get.translation(event.player) + \"使用一张【杀】？\";\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.player != player;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (get.attitude(player, event.player) > 0) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\treturn card.name == \"tao\" || card.name == \"jiu\";\r\n\t\t\t\t\t}) > 0 || player.storage.xinyongwomrfz == true\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.loseHp(player.hp);\r\n\t\t\t\tplayer.useCard({ name: \"sha\", isCard: true }, false, trigger.player);\r\n\t\t\t\tplayer.turnOver();\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t},\r\n\t\t},\r\n\t\tshensuimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"loseHpEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.num > 1 && player.hujia < 1;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.changeHujia(trigger.num);\r\n\t\t\t},\r\n\t\t\tgroup: \"shensuimrfz_change\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tchange: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn !player.storage.xinyongwomrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.changeZhuanhuanji(\"xinyongwomrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//早露\r\n\t\tzhongxiemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.card.name != \"sha\" || typeof get.number(event.card) != \"number\") return false;\r\n\t\t\t\treturn event.target.countCards(\"h\") <= get.number(event.card);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.getParent().directHit.add(trigger.target);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\tif (tag == \"directHit_ai\") {\r\n\t\t\t\t\t\tif (arg.card.name == \"sha\" && typeof get.number(arg.card) == \"number\")\r\n\t\t\t\t\t\t\treturn arg.card.name == \"sha\" && arg.target.countCards(\"h\") <= get.number(arg.card);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tattackRange: function (player, num) {\r\n\t\t\t\t\treturn (num += 2);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhongxiemrfz_damage\", \"zhongxiemrfz_wushi\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\taudio: \"zhongxiemrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { source: \"damageBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.hujia > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num += trigger.player.hujia;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\twushi: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event) {\r\n\t\t\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tlogTarget: \"target\",\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.target.addTempSkill(\"qinggang2\");\r\n\t\t\t\t\t\ttrigger.target.storage.qinggang2.add(trigger.card);\r\n\t\t\t\t\t\ttrigger.target.markSkill(\"qinggang2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tunequip_ai: true,\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t\t\tif (arg && arg.name == \"sha\") return true;\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\trusuimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageBegin2\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar num = 0,\r\n\t\t\t\t\ttarget = event.player;\r\n\t\t\t\tif (!event.card) return false;\r\n\t\t\t\tif (target.countCards(\"h\") >= target.hp) num++;\r\n\t\t\t\tif (target.countCards(\"e\") > 0) num++;\r\n\t\t\t\tif (target.getDamagedHp() <= target.hp) num++;\r\n\t\t\t\treturn event.player != player && event.card.name == \"sha\" && num != 0;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.player) < 0;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\tvar num = 0,\r\n\t\t\t\t\ttarget = event.player;\r\n\t\t\t\tif (target.countCards(\"h\") >= target.hp) num++;\r\n\t\t\t\tif (target.countCards(\"e\") > 0) num++;\r\n\t\t\t\tif (target.getDamagedHp() <= target.hp) num++;\r\n\t\t\t\tif (num < 3) return \"【入髓】：是否令\" + get.translation(target) + \"弃置\" + num + \"张牌\";\r\n\t\t\t\telse return \"【入髓】：是否令\" + get.translation(target) + \"弃置\" + num + \"张牌并令此杀伤害+1\";\r\n\t\t\t},\r\n\t\t\tprompt2: false,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar num = 0,\r\n\t\t\t\t\ttarget = trigger.player;\r\n\t\t\t\tif (target.countCards(\"h\") >= target.hp) num++;\r\n\t\t\t\tif (target.countCards(\"e\") > 0) num++;\r\n\t\t\t\tif (target.getDamagedHp() <= target.hp) num++;\r\n\t\t\t\ttarget.chooseToDiscard(\"he\", true, \"【入髓】：请弃置\" + num + \"张牌\", num);\r\n\t\t\t\tif (num == 3) trigger.num++;\r\n\t\t\t},\r\n\t\t},\r\n\t\t//琳琅诗怀雅\r\n\t\tzhijinmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\taiOrder: function (player, card, num) {\r\n\t\t\t\t\tif (typeof card == \"object\" && player.isPhaseUsing()) {\r\n\t\t\t\t\t\tvar evt = lib.skill.zhijinmrfz.getLastUsed(player);\r\n\t\t\t\t\t\tif (evt && evt.card && get.suit(evt.card) && get.suit(evt.card) == get.suit(card)) {\r\n\t\t\t\t\t\t\treturn num + 10;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmarktext: \"钱\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"钱\",\r\n\t\t\t\tcontent: \"共有#个钱\",\r\n\t\t\t},\r\n\t\t\taudio: 4,\r\n\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\tforced: true,\r\n\t\t\tgetLastUsed: function (player, event) {\r\n\t\t\t\tvar history = player.getAllHistory(\"useCard\");\r\n\t\t\t\tvar index;\r\n\t\t\t\tif (event) index = history.indexOf(event) - 1;\r\n\t\t\t\telse index = history.length - 1;\r\n\t\t\t\tif (index >= 0) return history[index];\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar evt = lib.skill.dcjianying.getLastUsed(player, event);\r\n\t\t\t\tif (!evt || !evt.card) return false;\r\n\t\t\t\treturn lib.suit.includes(get.suit(evt.card)) && get.suit(evt.card) == get.suit(event.card);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.addMark(\"zhijinmrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhijinmrfz_round\", \"zhijinmrfz_use\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tuse: {\r\n\t\t\t\t\taudio: \"zhijinmrfz\",\r\n\t\t\t\t\tenable: [\"chooseToUse\", \"chooseToRespond\"],\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar vcards = [],\r\n\t\t\t\t\t\t\tlist = [],\r\n\t\t\t\t\t\t\tmark = player.countMark(\"zhijinmrfz\");\r\n\t\t\t\t\t\tif (mark >= 1) list.push(\"sha\");\r\n\t\t\t\t\t\tif (mark >= 2) list.push(\"juedou\");\r\n\t\t\t\t\t\tif (mark >= 3) list.push(\"wuzhong\");\r\n\t\t\t\t\t\tif (mark >= 4) list.push(\"tao\");\r\n\t\t\t\t\t\tif (mark >= 5) list.push(\"wanjian\");\r\n\t\t\t\t\t\tif (!player.isPhaseUsing() || player.countMark(\"zhijinmrfz\") == 0 || list.length == 0) return false;\r\n\t\t\t\t\t\tfor (var name of list) {\r\n\t\t\t\t\t\t\tif (event.filterCard({ name: name, isCard: false }, player, event)) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tchooseButton: {\r\n\t\t\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\t\t\tvar vcards = [],\r\n\t\t\t\t\t\t\t\tlist = [],\r\n\t\t\t\t\t\t\t\tmark = player.countMark(\"zhijinmrfz\");\r\n\t\t\t\t\t\t\tif (mark >= 1) list.push(\"sha\");\r\n\t\t\t\t\t\t\tif (mark >= 2) list.push(\"juedou\");\r\n\t\t\t\t\t\t\tif (mark >= 3) list.push(\"wuzhong\");\r\n\t\t\t\t\t\t\tif (mark >= 4) list.push(\"tao\");\r\n\t\t\t\t\t\t\tif (mark >= 5) list.push(\"wanjian\");\r\n\t\t\t\t\t\t\tfor (var name of list) {\r\n\t\t\t\t\t\t\t\tconst card = { name: name };\r\n\t\t\t\t\t\t\t\tif (event.filterCard(card, player, event)) {\r\n\t\t\t\t\t\t\t\t\tif (name == \"sha\") {\r\n\t\t\t\t\t\t\t\t\t\tfor (var j of lib.inpile_nature) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (j != \"fire\") continue;\r\n\t\t\t\t\t\t\t\t\t\t\tvcards.push([\"基本\", \"\", \"sha\", j]);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} else if (get.type(name) == \"trick\") {\r\n\t\t\t\t\t\t\t\t\t\tvcards.push([\"锦囊\", \"\", name]);\r\n\t\t\t\t\t\t\t\t\t} else if (get.type(name) == \"basic\") {\r\n\t\t\t\t\t\t\t\t\t\tvcards.push([\"基本\", \"\", name]);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar dialog = ui.create.dialog(\"掷金\", [vcards, \"vcard\"], \"hidden\");\r\n\t\t\t\t\t\t\tdialog.direct = true;\r\n\t\t\t\t\t\t\treturn dialog;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcheck: function (button) {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tvar recover = 0,\r\n\t\t\t\t\t\t\t\tlose = 1,\r\n\t\t\t\t\t\t\t\tplayers = game.filterPlayer(),\r\n\t\t\t\t\t\t\t\tchoose = button.link[2];\r\n\t\t\t\t\t\t\tvar mark = player.countMark(\"zhijinmrfz\");\r\n\t\t\t\t\t\t\tif (mark >= 5) {\r\n\t\t\t\t\t\t\t\tif (player.hp < 3) return choose == \"tao\" ? 2 : -1;\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < players.length; i++) {\r\n\t\t\t\t\t\t\t\t\tvar att = get.attitude(player, players[i]);\r\n\t\t\t\t\t\t\t\t\tif (players[i].hp == 1 && get.damageEffect(players[i], player, player) > 0 && !players[i].hasSha()) {\r\n\t\t\t\t\t\t\t\t\t\treturn button.link[2] == \"juedou\" ? 2 : -1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (att < 0) lose++;\r\n\t\t\t\t\t\t\t\t\tif (att > 0 && players[i].hp > 2) lose = lose - 0.5;\r\n\t\t\t\t\t\t\t\t\tif (att > 0 && players[i].hp < 2) lose--;\r\n\t\t\t\t\t\t\t\t\tif (att > 2 && players[i] == 1) lose -= 3;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (lose > 0) return choose == \"wanjian\" ? 1 : -1;\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\t\t\t\treturn (card.name = \"sha\");\r\n\t\t\t\t\t\t\t\t\t}) >= player.getCardUsable(\"sha\") ||\r\n\t\t\t\t\t\t\t\t\tplayer.getCardUsable(\"sha\") == 0\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\treturn choose == \"wuzhong\" ? 1 : -1;\r\n\t\t\t\t\t\t\t\treturn choose == \"sha\" ? 1 : -1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (mark >= 4) {\r\n\t\t\t\t\t\t\t\tif (player.hp < 3) return choose == \"tao\" ? 1 : -1;\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < players.length; i++) {\r\n\t\t\t\t\t\t\t\t\tvar att = get.attitude(player, players[i]);\r\n\t\t\t\t\t\t\t\t\tif (players[i].hp == 1 && get.damageEffect(players[i], player, player) > 0 && !players[i].hasSha()) {\r\n\t\t\t\t\t\t\t\t\t\treturn button.link[2] == \"juedou\" ? 2 : -1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\t\t\t\treturn (card.name = \"sha\");\r\n\t\t\t\t\t\t\t\t\t}) >= player.getCardUsable(\"sha\") ||\r\n\t\t\t\t\t\t\t\t\tplayer.getCardUsable(\"sha\") == 0\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\treturn choose == \"wuzhong\" ? 1 : -1;\r\n\t\t\t\t\t\t\t\treturn choose == \"sha\" ? 1 : -1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (mark >= 3) {\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < players.length; i++) {\r\n\t\t\t\t\t\t\t\t\tvar att = get.attitude(player, players[i]);\r\n\t\t\t\t\t\t\t\t\tif (players[i].hp == 1 && get.damageEffect(players[i], player, player) > 0 && !players[i].hasSha()) {\r\n\t\t\t\t\t\t\t\t\t\treturn button.link[2] == \"juedou\" ? 2 : -1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\t\t\t\treturn (card.name = \"sha\");\r\n\t\t\t\t\t\t\t\t\t}) >= player.getCardUsable(\"sha\") ||\r\n\t\t\t\t\t\t\t\t\tplayer.getCardUsable(\"sha\") == 0\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\treturn choose == \"wuzhong\" ? 1 : -1;\r\n\t\t\t\t\t\t\t\treturn choose == \"sha\" ? 1 : -1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (mark >= 2) {\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < players.length; i++) {\r\n\t\t\t\t\t\t\t\t\tvar att = get.attitude(player, players[i]);\r\n\t\t\t\t\t\t\t\t\tif (players[i].hp == 1 && get.damageEffect(players[i], player, player) > 0 && !players[i].hasSha()) {\r\n\t\t\t\t\t\t\t\t\t\treturn button.link[2] == \"juedou\" ? 2 : -1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn choose == \"sha\" ? 1 : -1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn choose == \"sha\" ? 1 : -1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tfilterCard: () => true,\r\n\t\t\t\t\t\t\t\tselectCard: 1,\r\n\t\t\t\t\t\t\t\tviewAs: {\r\n\t\t\t\t\t\t\t\t\tname: links[0][2],\r\n\t\t\t\t\t\t\t\t\tnature: links[0][3],\r\n\t\t\t\t\t\t\t\t\tisCard: false,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tposition: \"he\",\r\n\t\t\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t\t\t\tprecontent: function () {\r\n\t\t\t\t\t\t\t\t\tvar card = event.result.card.name,\r\n\t\t\t\t\t\t\t\t\t\tmark = player.countMark(\"zhijinmrfz\");\r\n\t\t\t\t\t\t\t\t\tif (card == \"sha\") {\r\n\t\t\t\t\t\t\t\t\t\tif (mark == 1) player.draw();\r\n\t\t\t\t\t\t\t\t\t\tplayer.removeMark(\"zhijinmrfz\");\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (card == \"juedou\") {\r\n\t\t\t\t\t\t\t\t\t\tif (mark == 2) player.draw();\r\n\t\t\t\t\t\t\t\t\t\tplayer.removeMark(\"zhijinmrfz\", 2);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (card == \"wuzhong\") {\r\n\t\t\t\t\t\t\t\t\t\tif (mark == 3) player.draw();\r\n\t\t\t\t\t\t\t\t\t\tplayer.removeMark(\"zhijinmrfz\", 3);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (card == \"tao\") {\r\n\t\t\t\t\t\t\t\t\t\tif (mark == 4) player.draw();\r\n\t\t\t\t\t\t\t\t\t\tplayer.removeMark(\"zhijinmrfz\", 4);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (card == \"wanjian\") {\r\n\t\t\t\t\t\t\t\t\t\tif (mark == 5) player.draw();\r\n\t\t\t\t\t\t\t\t\t\tplayer.removeMark(\"zhijinmrfz\", 5);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\t\t\treturn \"【掷金】：视为使用一张\" + (links[0][3] == undefined ? \"\" : \"火\") + \"【\" + get.translation(links[0][2]) + \"】\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\trespondSha: true,\r\n\t\t\t\t\t\tfireAttack: true,\r\n\t\t\t\t\t\torder: function (item, player) {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tvar event = _status.event;\r\n\t\t\t\t\t\t\tvar mark = player.countMark(\"zhijinmrfz\");\r\n\t\t\t\t\t\t\tif (event.filterCard({ name: \"tao\" }, player, event) && mark >= 4) {\r\n\t\t\t\t\t\t\t\treturn 10;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (event.filterCard({ name: \"wuzhong\" }, player, event) && mark >= 3) {\r\n\t\t\t\t\t\t\t\treturn 13;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (event.filterCard({ name: \"juedou\" }, player, event) && mark >= 2) {\r\n\t\t\t\t\t\t\t\treturn 4.95;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (event.filterCard({ name: \"sha\" }, player, event) && mark >= 1) {\r\n\t\t\t\t\t\t\t\treturn 2.95;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t\t\treturn player.countMark(\"zhijinmrfz\") > 0;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tround: {\r\n\t\t\t\t\taudio: \"zhijinmrfz\",\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addMark(\"zhijinmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tmianzaimrfz: {\r\n\t\t\tmarkimage: \"extension/WhichWay/image/skill/mianzaimrfz_money.png\",\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"累计点数：#\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"dying\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar cards = game.cardsGotoOrdering(get.cards(6)).cards,\r\n\t\t\t\t\tnum = 0;\r\n\t\t\t\tfor (var i = 0; i < cards.length; i++) {\r\n\t\t\t\t\tnum = num + cards[i].number;\r\n\t\t\t\t}\r\n\t\t\t\tplayer.showCards(cards, get.translation(player) + \"发动了【免灾】</br>点数之和为：\" + num);\r\n\t\t\t\tif (num <= player.countMark(\"mianzaimrfz\")) {\r\n\t\t\t\t\tplayer.recoverTo(3);\r\n\t\t\t\t\tplayer.drawTo(3);\r\n\t\t\t\t\tplayer.removeMark(\"mianzaimrfz\", player.countMark(\"mianzaimrfz\"), false);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"mianzaimrfz_number\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tnumber: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.cards && event.cards.length == 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar num = trigger.card.number;\r\n\t\t\t\t\t\tplayer.addMark(\"mianzaimrfz\", num, false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//圣约送葬人\r\n\t\tchongdanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tfrequent: true,\r\n\t\t\tsubfrequent: [\"chongdanmrfz_player\"],\r\n\t\t\ttrigger: {\r\n\t\t\t\tsource: \"damageSource\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.countCards(\"h\") == 0 && player.getDamagedHp() == 0) return false;\r\n\t\t\t\treturn !player.storage.chongdanmrfz;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.storage.chongdanmrfz = true;\r\n\t\t\t\tif (player.getDamagedHp() == 0) player.draw(player.hp);\r\n\t\t\t\telse {\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.chooseBool(\"【铳弹】：是否摸\" + player.hp + \"张牌？\")\r\n\t\t\t\t\t\t.set(\"prompt2\", \"选择取消则为回复\" + player.countCards(\"h\") + \"点体力\")\r\n\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tvar hp = player.hp;\r\n\t\t\t\t\t\t\tif (player.countCards(\"h\") == 0) return 0;\r\n\t\t\t\t\t\t\tif (hp < 2) return 1;\r\n\t\t\t\t\t\t\tif (player.countCards(\"j\") > 0) return 1;\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tplayer.isPhaseUsing() &&\r\n\t\t\t\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\t\t\treturn card.name == \"tao\";\r\n\t\t\t\t\t\t\t\t}) >= player.getDamagedHp()\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tplayer.draw(player.hp);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.recover(player.countCards(\"h\"));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tcardEnabled: function (card, player) {\r\n\t\t\t\t\tif (player.countMark(\"chongdanmrfz_lim\") >= 2 * player.maxHp) return false;\r\n\t\t\t\t},\r\n\t\t\t\tcardUsable: function (card, player) {\r\n\t\t\t\t\tif (player.countMark(\"chongdanmrfz_lim\") >= 2 * player.maxHp) return false;\r\n\t\t\t\t},\r\n\t\t\t\tcardSavable: function (card, player) {\r\n\t\t\t\t\tif (player.countMark(\"chongdanmrfz_lim\") >= 2 * player.maxHp) return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tpresha: true,\r\n\t\t\t\tpretao: true,\r\n\t\t\t},\r\n\t\t\tgroup: [\"chongdanmrfz_clear\", \"chongdanmrfz_player\", \"chongdanmrfz_lim\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tlim: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"已使用：#张牌\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCard\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.countMark(\"chongdanmrfz_lim\") < 2 * player.maxHp;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addMark(\"chongdanmrfz_lim\", false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (player.storage.chongdanmrfz_player) player.storage.chongdanmrfz_player = false;\r\n\t\t\t\t\t\tif (player.storage.chongdanmrfz) player.storage.chongdanmrfz = false;\r\n\t\t\t\t\t\tif (player.countMark(\"chongdanmrfz_lim\") > 0)\r\n\t\t\t\t\t\t\tplayer.removeMark(\"chongdanmrfz_lim\", player.countMark(\"chongdanmrfz_lim\"), false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tplayer: {\r\n\t\t\t\t\taudio: \"chongdanmrfz\",\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"damageEnd\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.countCards(\"h\") == 0 && player.getDamagedHp() == 0) return false;\r\n\t\t\t\t\t\treturn !player.storage.chongdanmrfz_player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer.storage.chongdanmrfz_player = true;\r\n\t\t\t\t\t\tif (player.getDamagedHp() == 0) player.draw(player.hp);\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t.chooseBool(\"【铳弹】：是否摸\" + player.hp + \"张牌？\")\r\n\t\t\t\t\t\t\t\t.set(\"prompt2\", \"选择取消则为回复\" + player.countCards(\"h\") + \"点体力\")\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\t\tvar hp = player.hp;\r\n\t\t\t\t\t\t\t\t\tif (player.countCards(\"h\") == 0) return 0;\r\n\t\t\t\t\t\t\t\t\tif (hp < 3) return 1;\r\n\t\t\t\t\t\t\t\t\tif (player.countCards(\"j\") > 0) return 1;\r\n\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\tplayer.isPhaseUsing() &&\r\n\t\t\t\t\t\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\t\t\t\t\treturn card.name == \"tao\";\r\n\t\t\t\t\t\t\t\t\t\t}) >= player.getDamagedHp()\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tplayer.draw(player.hp);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tplayer.recover(player.countCards(\"h\"));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\ttianxuanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\treturn \"已有的花色：\" + get.translation(player.storage.tianxuanmrfz);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCard1\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn get.tag(event.card, \"damage\") > 0 && player.isPhaseUsing();\r\n\t\t\t},\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.tianxuanmrfz = [\"heart\"];\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\tvar list = player.storage.tianxuanmrfz;\r\n\t\t\t\treturn \"【天选】：是否进行判定，若为\" + get.translation(list) + \",则\" + get.translation(event.card) + \"结算两次\";\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar list = player.storage.tianxuanmrfz;\r\n\t\t\t\tplayer.judge(function (card) {\r\n\t\t\t\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\t\t\t\tvar suit = get.suit(card);\r\n\t\t\t\t\t\tif (suit == list[i]) return -4;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}).judge2 = function (result) {\r\n\t\t\t\t\treturn result.bool == false ? true : false;\r\n\t\t\t\t};\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool == false) {\r\n\t\t\t\t\ttrigger.effectCount++;\r\n\t\t\t\t\tplayer.storage.tianxuanmrfz = [];\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar suit = player.storage.tianxuanmrfz,\r\n\t\t\t\t\t\tlist = [];\r\n\t\t\t\t\tfor (i of lib.suit) {\r\n\t\t\t\t\t\tif (suit.includes(i)) continue;\r\n\t\t\t\t\t\tlist.push(i);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t.set(\"prompt\", \"【天选】：请选择为[]内增加一个花色\")\r\n\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\tif (list.includes(\"diamond\")) return \"diamond\";\r\n\t\t\t\t\t\t\treturn list.randomGet();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (result.control) {\r\n\t\t\t\t\tplayer.storage.tianxuanmrfz.add(result.control);\r\n\t\t\t\t\tplayer.storage.tianxuanmrfz.sort();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tshengcaimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCard2\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!get.tag(event.card, \"damage\") || !player.isPhaseUsing()) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.getHistory(\"useCard\", function (evt) {\r\n\t\t\t\t\t\treturn get.tag(evt.card, \"damage\") > 0;\r\n\t\t\t\t\t}).length > 1\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"【圣裁】：是否令\" + get.translation(event.card) + \"伤害基数+1？\";\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tif (!trigger.baseDamage) trigger.baseDamage = 1;\r\n\t\t\t\ttrigger.baseDamage++;\r\n\t\t\t},\r\n\t\t\tgroup: \"shengcaimrfz_damage\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tgame.countPlayer(current => {\r\n\t\t\t\t\t\t\t\treturn current != player && current.getHistory(\"damage\").length > 0;\r\n\t\t\t\t\t\t\t}) > 0\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tvar next = player.chooseTarget(\r\n\t\t\t\t\t\t\t[1, Infinity],\r\n\t\t\t\t\t\t\t\"【圣裁】：你可以对本回合造成过伤害的其他角色造成一点伤害\",\r\n\t\t\t\t\t\t\tfunction (card, player, target) {\r\n\t\t\t\t\t\t\t\treturn target != player && target.getHistory(\"damage\").length > 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tnext.ai = function (target) {\r\n\t\t\t\t\t\t\treturn get.attitude(player, target) < 0;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\tplayer.logSkill(\"shengcaimrfz\");\r\n\t\t\t\t\t\t\tfor (i of result.targets) {\r\n\t\t\t\t\t\t\t\ti.damage(\"player\");\r\n\t\t\t\t\t\t\t\tplayer.line(i);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//涤火杰西卡\r\n\t\tyijiemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.countCards(\"he\") == 0) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && current.countCards(\"h\") > 0;\r\n\t\t\t\t\t}) > 0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player;\r\n\t\t\t},\r\n\t\t\ttargetprompt: [\"被出杀(A)\", \"出杀(B)\", \"出杀(B)\"],\r\n\t\t\tselectTarget: [2, 3],\r\n\t\t\tmultitarget: true,\r\n\t\t\tline: false,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tevent.num = 0;\r\n\t\t\t\ttargets.push(player);\r\n\t\t\t\tvar frsTargets = targets[0],\r\n\t\t\t\t\tsecTargets = targets.slice(1);\r\n\t\t\t\tfor (var i of secTargets) i.line(frsTargets);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tvar frsTargets = targets[0],\r\n\t\t\t\t\tsecTargets = targets.slice(1);\r\n\t\t\t\tif (event.num < secTargets.length) {\r\n\t\t\t\t\tsecTargets[event.num].storage.yijiemrfz = frsTargets;\r\n\t\t\t\t\tsecTargets[event.num].addTempSkill(\"yijiemrfz_gain\", \"shaMiss\");\r\n\t\t\t\t\tsecTargets[event.num]\r\n\t\t\t\t\t\t.chooseToUse(\r\n\t\t\t\t\t\t\tfunction (card, player, event) {\r\n\t\t\t\t\t\t\t\tif (get.name(card) != \"sha\") return false;\r\n\t\t\t\t\t\t\t\treturn lib.filter.filterCard.apply(this, arguments);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\"【义劫】：是否对\" + get.translation(frsTargets) + \"使用一张杀？\"\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\t\tif (target != _status.event.frsTargets && !ui.selected.targets.includes(_status.event.frsTargets)) return false;\r\n\t\t\t\t\t\t\treturn lib.filter.targetEnabled.apply(this, arguments);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"addCount\", false)\r\n\t\t\t\t\t\t.set(\"frsTargets\", frsTargets);\r\n\t\t\t\t\tevent.num++;\r\n\t\t\t\t\tevent.redo();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 4.1,\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tif (ui.selected.targets.length == 0) {\r\n\t\t\t\t\t\t\treturn -3;\r\n\t\t\t\t\t\t} else return 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t//group:'tuohuangmrfz',\r\n\t\t\tsubSkill: {\r\n\t\t\t\tgain: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tsource: \"damageEnd\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: function (player) {\r\n\t\t\t\t\t\tdelete player.storage.yijiemrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\" && event.player == player.storage.yijiemrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (trigger.player.countCards(\"he\") > 0) player.gainPlayerCard(trigger.player, true, \"he\");\r\n\t\t\t\t\t\telse trigger.player.damage(\"player\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"yijiemrfz_gain\");\r\n\t\t\t\t\t\tdelete player.storage.yijiemrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tfuhuangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tderivation: [\"tuohuangmrfz\", \"weihumrfz\"],\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationColor: \"fire\",\r\n\t\t\tunique: true,\r\n\t\t\tjuexingji: true,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"gainAfter\",\r\n\t\t\t\tglobal: \"loseAsyncAfter\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"fuhuangmrfz_mark\") >= 2;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.removeMark(\"fuhuangmrfz_mark\", player.countMark(\"fuhuangmrfz_mark\"), false);\r\n\t\t\t\tplayer.awakenSkill(\"fuhuangmrfz\");\r\n\t\t\t\tplayer.removeSkill(\"yijiemrfz\");\r\n\t\t\t\tplayer.addSkill(\"tuohuangmrfz\");\r\n\t\t\t\tplayer.addSkill(\"weihumrfz\");\r\n\t\t\t\tplayer.draw(2);\r\n\t\t\t\tplayer.changeHujia(1);\r\n\t\t\t\tplayer.loseMaxHp(1);\r\n\t\t\t},\r\n\t\t\tgroup: \"fuhuangmrfz_mark\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tmark: {\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"已获得#张牌\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"gainAfter\",\r\n\t\t\t\t\t\tglobal: \"loseAsyncAfter\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.countMark(\"fuhuangmrfz_mark\") >= 2) return false;\r\n\t\t\t\t\t\treturn event.getg(player).length && event.getParent(\"phaseDraw\").player != player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addMark(\"fuhuangmrfz_mark\", false, trigger.num);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\ttuohuangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\treturn current.countCards(\"he\") > 0;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tmultitarget: true,\r\n\t\t\tmultiline: true,\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tselectTarget: [1, 3],\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar num = 4 - targets.length;\r\n\t\t\t\tvar cards = game.cardsGotoOrdering(get.cards(num)).cards;\r\n\t\t\t\tevent.cards = cards;\r\n\t\t\t\tplayer.showCards(event.cards, get.translation(player) + \"发动了【拓荒】\");\r\n\t\t\t\tevent.num = 0;\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (event.num < targets.length) {\r\n\t\t\t\t\tvar suit = [];\r\n\t\t\t\t\tfor (var i of event.cards) {\r\n\t\t\t\t\t\tif (!suit.includes(get.suit(i)) && lib.suit.includes(get.suit(i))) suit.push(get.suit(i));\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttargets[event.num]\r\n\t\t\t\t\t\t.chooseToDiscard(\r\n\t\t\t\t\t\t\t\"h\",\r\n\t\t\t\t\t\t\t\"【拓荒】：你可以弃置\" + get.translation(suit) + \"花色的手牌并摸等量+1张牌\",\r\n\t\t\t\t\t\t\t[1, Infinity],\r\n\t\t\t\t\t\t\tfunction (card) {\r\n\t\t\t\t\t\t\t\tvar suitcard = get.suit(card);\r\n\t\t\t\t\t\t\t\tif (suit.includes(\"diamond\") && suitcard == \"diamond\") return true;\r\n\t\t\t\t\t\t\t\tif (suit.includes(\"heart\") && suitcard == \"heart\") return true;\r\n\t\t\t\t\t\t\t\tif (suit.includes(\"spade\") && suitcard == \"spade\") return true;\r\n\t\t\t\t\t\t\t\tif (suit.includes(\"club\") && suitcard == \"club\") return true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} else event.finish();\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (result.cards) {\r\n\t\t\t\t\ttargets[event.num].draw(1 + result.cards.length);\r\n\t\t\t\t}\r\n\t\t\t\tevent.num++;\r\n\t\t\t\tevent.goto(1);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tthreaten: 1.35,\r\n\t\t\t\torder: 1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\ttarget: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tweihumrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\tif (player.hujia > 0) return num + 1;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.hujia < 1;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.changeHujia();\r\n\t\t\t},\r\n\t\t\tgroup: \"weihumrfz_give\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tgive: {\r\n\t\t\t\t\ttrigger: { player: \"phaseUseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hujia > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer.chooseTarget(\r\n\t\t\t\t\t\t\t[1, player.hujia + 1],\r\n\t\t\t\t\t\t\t\"【卫护】：你可以失去至少一点护甲，然后令等量+1名没有护甲的其他角色获得一点护甲\",\r\n\t\t\t\t\t\t\tfunction (card, player, target) {\r\n\t\t\t\t\t\t\t\treturn target != player && target.hujia < 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t).ai = function (target) {\r\n\t\t\t\t\t\t\treturn get.attitude(player, target) > 2;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\tplayer.logSkill(\"weihumrfz\");\r\n\t\t\t\t\t\t\tplayer.changeHujia(Math.min(-1, -result.targets.length + 1));\r\n\t\t\t\t\t\t\tfor (i of result.targets) {\r\n\t\t\t\t\t\t\t\ti.changeHujia();\r\n\t\t\t\t\t\t\t\tplayer.line(i);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//提丰 小台风\r\n\t\truiyamrfz: {\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\treturn \"上一个成为一唯一目标的【杀】的角色：\" + (player.storage.ruiyamrfz ? get.translation(player.storage.ruiyamrfz) : \"无\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCard2\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tevent.cards &&\r\n\t\t\t\t\tevent.card.name == \"sha\" &&\r\n\t\t\t\t\tevent.targets &&\r\n\t\t\t\t\tevent.targets.length == 1 &&\r\n\t\t\t\t\tevent.targets[0] == player.storage.ruiyamrfz\r\n\t\t\t\t);\r\n\t\t\t}, //QQQ\r\n\t\t\tprompt: \"【锐牙】:是否令此杀伤害+1？\",\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.targets[0]) < 2;\r\n\t\t\t}, //QQQ\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar target = trigger.targets[0];\r\n\t\t\t\ttarget.addTempSkill(\"ruiyamrfz_dam\");\r\n\t\t\t\ttarget.storage.ruiyamrfz_dam = {\r\n\t\t\t\t\tcard: trigger.card,\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tgroup: \"ruiyamrfz_mark\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tmark: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!event.targets || event.targets > 1) return false;\r\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.ruiyamrfz = trigger.target;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdam: {\r\n\t\t\t\t\tonremove: function (player) {\r\n\t\t\t\t\t\tdelete player.storage.ruiyamrfz_dam;\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"damageBegin3\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar info = player.storage.ruiyamrfz_dam;\r\n\t\t\t\t\t\treturn event.card && event.card == info.card;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshouliemrfz: {\r\n\t\t\tmarktext: \"矢\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"矢\",\r\n\t\t\t\tcontent: \"expansion\",\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t},\r\n\t\t\tonremove: function (player, skill) {\r\n\t\t\t\tvar cards = player.getExpansions(skill);\r\n\t\t\t\tif (cards.length) player.loseToDiscardpile(cards);\r\n\t\t\t},\r\n\t\t\taudio: 4,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.getExpansions(\"shouliemrfz\").length >= 3) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.countCards(\"he\", function (card) {\r\n\t\t\t\t\t\treturn get.tag(card, \"damage\") > 0;\r\n\t\t\t\t\t}) > 0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tfilterCard: function (card) {\r\n\t\t\t\treturn get.tag(card, \"damage\");\r\n\t\t\t},\r\n\t\t\tselectCard: function () {\r\n\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\treturn [1, 3 - player.getExpansions(\"shouliemrfz\").length];\r\n\t\t\t},\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\treturn 10 - get.value(card) || card.name == \"sha\";\r\n\t\t\t},\r\n\t\t\tprompt: \"【狩猎】：将任意张带有伤害标签的牌置于你的武将牌上，称之为‘矢’\",\r\n\t\t\tdiscard: false,\r\n\t\t\tlose: false,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.addToExpansion(cards, player, \"giveAuto\").gaintag.add(\"shouliemrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"shouliemrfz_use\", \"shouliemrfz_shasha\"],\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\tthreaten: function () {\r\n\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\treturn 1.4 + player.getExpansions(\"shouliemrfz\").length * 0.2;\r\n\t\t\t\t},\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\tuse: {\r\n\t\t\t\t\taudio: \"shouliemrfz\",\r\n\t\t\t\t\tenable: [\"chooseToRespond\", \"chooseToUse\"],\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.getExpansions(\"shouliemrfz\").length < 1 || player.hasSkill(\"shouliemrfz_ban\")) return false;\r\n\t\t\t\t\t\treturn event.filterCard({ name: \"sha\" }, player, event);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tchooseButton: {\r\n\t\t\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\t\t\treturn ui.create.dialog(\"狩猎\", player.getExpansions(\"shouliemrfz\"), \"hidden\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tviewAs: {\r\n\t\t\t\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\t\t\t\tnature: \"stab\",\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcards: links,\r\n\t\t\t\t\t\t\t\tselectCard: -1,\r\n\t\t\t\t\t\t\t\tposition: \"x\",\r\n\t\t\t\t\t\t\t\tfilterCard: card => lib.skill[\"shouliemrfz_use_backup\"].cards.includes(card),\r\n\t\t\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t\t\t\tprecontent: function () {\r\n\t\t\t\t\t\t\t\t\tplayer.addTempSkill(\"shouliemrfz_ban\", \"phaseEnd\");\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\t\t\treturn \"【狩猎】：将\" + get.translation(links.name) + \"当做一张刺【杀】使用或打出\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\torder: 2.95,\r\n\t\t\t\t\t\trespondSha: true,\r\n\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t\t\tif (player.getExpansions(\"shouliemrfz\").length < 1) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tshasha: {\r\n\t\t\t\t\tmarkimage: \"extension/WhichWay/image/skill/taifengmrfz.png\",\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\"你成为了\" +\r\n\t\t\t\t\t\t\t\tget.translation(\r\n\t\t\t\t\t\t\t\t\tgame.findPlayer(function (current) {\r\n\t\t\t\t\t\t\t\t\t\treturn current != player && current.hasSkill(\"shouliemrfz\");\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t) +\r\n\t\t\t\t\t\t\t\t\"的猎物\"\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\taudio: \"shouliemrfz\",\r\n\t\t\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.getHistory(\"skipped\").includes(\"phaseUse\") || player.getHistory(\"skipped\").includes(\"phaseDiscard\")) return false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tplayer.countCards(\"j\", function (card) {\r\n\t\t\t\t\t\t\t\treturn get.name(card) == \"lebu\";\r\n\t\t\t\t\t\t\t}) > 0 &&\r\n\t\t\t\t\t\t\tplayer.countCards(\"h\") + 2 > player.getHandcardLimit()\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tplayer.getExpansions(\"shouliemrfz\").length +\r\n\t\t\t\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\t\t\treturn get.name(card) == \"sha\";\r\n\t\t\t\t\t\t\t\t}) >\r\n\t\t\t\t\t\t\t2\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: \"【狩猎】：是否跳过出牌阶段和弃牌阶段，然后选择一名其他角色，直到你的下个回合开始时，每个其他角色的结束阶段，你都可以对其使用一张【杀】？\",\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer.skip(\"phaseUse\");\r\n\t\t\t\t\t\tplayer.skip(\"phaseDiscard\");\r\n\t\t\t\t\t\tplayer.addSkill(\"shouliemrfz_usesha\");\r\n\t\t\t\t\t\tplayer.chooseTarget(\r\n\t\t\t\t\t\t\t\"【狩猎】：请选择一名其他角色\",\r\n\t\t\t\t\t\t\tfunction (card, player, target) {\r\n\t\t\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t).ai = function (target) {\r\n\t\t\t\t\t\t\treturn get.attitude(_status.event.player, target) < 0;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\t\t\tplayer.storage.shouliemrfz_shasha = target;\r\n\t\t\t\t\t\t\ttarget.addMark(\"shouliemrfz_shasha\", false);\r\n\t\t\t\t\t\t\tplayer.line(target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\texpose: 0.1,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\trem: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\t\tif (current.hasMark(\"shouliemrfz_shasha\")) current.removeAllmark(\"shouliemrfz_shasha\", false);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tplayer.removeSkill(\"shouliemrfz_usesha\");\r\n\t\t\t\t\t\tdelete player.storage.shouliemrfz_shasha;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tusesha: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"phaseJieshuBegin\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.player == player) return false;\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.player.isIn() &&\r\n\t\t\t\t\t\t\tlib.filter.targetEnabled({ name: \"sha\" }, player, event.player) &&\r\n\t\t\t\t\t\t\t(player.hasSha() || _status.connectMode || player.getExpansions(\"shouliemrfz\").length > 0)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar target = game.findPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn current != player && player.storage.shouliemrfz_shasha == current;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.chooseToUse(\r\n\t\t\t\t\t\t\t\tfunction (card, player, event) {\r\n\t\t\t\t\t\t\t\t\tif (get.name(card) != \"sha\") return false;\r\n\t\t\t\t\t\t\t\t\treturn lib.filter.filterCard.apply(this, arguments);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\"【狩猎】：是否对\" + get.translation(target) + \"使用一张【杀】？\"\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t.set(\"logSkill\", \"shouliemrfz\")\r\n\t\t\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\t\t\tif (target != _status.event.sourcex && !ui.selected.targets.includes(_status.event.sourcex)) return false;\r\n\t\t\t\t\t\t\t\treturn lib.filter.targetEnabled.apply(this, arguments);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"sourcex\", target);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgroup: \"shouliemrfz_rem\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//vvan薇薇安娜\r\n\t\tzhanjumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"dying\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!game.checkMod({ name: \"tao\", isCard: true }, player, event.player, \"unchanged\", \"cardSavable\", player)) return false;\r\n\t\t\t\treturn player.countCards(\"h\") > 0 && event.player.hp <= 0;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (get.attitude(player, event.player) < 0) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\treturn card.name == \"tao\";\r\n\t\t\t\t\t}) +\r\n\t\t\t\t\t\tevent.player.hp <\r\n\t\t\t\t\t0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"【盏菊】:你可以将所有手牌当作【桃】对\" + get.translation(event.player) + \"使用\";\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar cards = player.getCards(\"h\");\r\n\t\t\t\ttrigger.player.storage.zhanjumrfz = true;\r\n\t\t\t\tplayer.useCard({ name: \"tao\" }, cards, trigger.player);\r\n\t\t\t},\r\n\t\t\tgroup: \"zhanjumrfz_recast\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\trecast: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\ttrigger: { global: \"dyingAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.storage.zhanjumrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tdelete trigger.player.storage.zhanjumrfz;\r\n\t\t\t\t\t\tif (player.countCards(\"hej\") == 0) event.finish();\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tplayer.chooseCard(\"【盏菊】:你可以重铸一张你区域内的牌\", \"hej\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.cards) {\r\n\t\t\t\t\t\t\tplayer.recast(result.cards);\r\n\t\t\t\t\t\t\tplayer.logSkill(\"zhanjumrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhuhuomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilterCard: function (card, player) {\r\n\t\t\t\treturn player.canRecast(card);\r\n\t\t\t},\r\n\t\t\tselectCard: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tposition: \"he\",\r\n\t\t\tdiscard: false,\r\n\t\t\tlose: false,\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.recast(cards);\r\n\t\t\t},\r\n\t\t\tgroup: \"zhuhuomrfz_draw\",\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\treget: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: [\"phaseZhunbeiAfter\", \"phaseJudgeAfter\", \"phaseUseAfter\", \"phaseDiscardAfter\", \"phaseJieshuAfter\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addSkill(\"zhuhuomrfz\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"zhuhuomrfz_reget\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"loseAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!event.cards) return false;\r\n\t\t\t\t\t\treturn event.getParent(2).name == \"recast\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tif (trigger.cards.length > 1) {\r\n\t\t\t\t\t\t\tvar num = 0;\r\n\t\t\t\t\t\t\tfor (i of trigger.cards) {\r\n\t\t\t\t\t\t\t\tnum += get.cardNameLength(i);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else var num = get.cardNameLength(trigger.cards[0]);\r\n\t\t\t\t\t\tevent.num = num;\r\n\t\t\t\t\t\tvar next = player.chooseControl(\"发牌\", \"摸牌\", \"cancel2\");\r\n\t\t\t\t\t\tnext.set(\"prompt\", \"是否发动【烛火】？\");\r\n\t\t\t\t\t\tnext.set(\"ai\", function () {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tvar count = game.countPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current != player && get.attitude(current, player) > 2;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif (num == 1) return 0;\r\n\t\t\t\t\t\t\tif (count - num < 0) return 1;\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.control == \"cancel2\") event.finish();\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tif (result.index == 1) {\r\n\t\t\t\t\t\t\t\tplayer.draw(Math.min(event.num, 5));\r\n\t\t\t\t\t\t\t\tplayer.logSkill(\"zhuhuo2mrfz\");\r\n\t\t\t\t\t\t\t\tplayer.addSkill(\"zhuhuomrfz_reget\");\r\n\t\t\t\t\t\t\t\tplayer.removeSkill(\"zhuhuomrfz\");\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvar num = event.num;\r\n\t\t\t\t\t\t\t\tvar next = player.chooseTarget(true, \"【烛火】:你可以选择至多\" + num + \"名角色，令其各摸一张牌\", [1, num]);\r\n\t\t\t\t\t\t\t\tnext.ai = function (target) {\r\n\t\t\t\t\t\t\t\t\treturn get.attitude(target, player) > 2;\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\tvar targets = result.targets;\r\n\t\t\t\t\t\t\tfor (i of targets) {\r\n\t\t\t\t\t\t\t\ti.draw();\r\n\t\t\t\t\t\t\t\tplayer.line(i);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tplayer.logSkill(\"zhuhuo2mrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\texpose: 0.1,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhuhuo2mrfz: {\r\n\t\t\taudio: 2,\r\n\t\t},\r\n\t\tyunjiaomrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\taiOrder: function (player, card, num) {\r\n\t\t\t\t\tif (typeof card == \"object\" && !get.tag(card, \"norepeat\")) {\r\n\t\t\t\t\t\tvar history = player.getAllHistory(\"useCard\");\r\n\t\t\t\t\t\tif (history.length > 0) {\r\n\t\t\t\t\t\t\tvar cardx = history[history.length - 1].card;\r\n\t\t\t\t\t\t\tif (get.is.yayun(get.translation(cardx.name), get.translation(card.name))) return num + 20;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar history = player.getAllHistory(\"useCard\");\r\n\t\t\t\t\tvar evt = history[history.length - 1];\r\n\t\t\t\t\tif (!evt) return \"没有使用过牌\";\r\n\t\t\t\t\treturn \"你上一张使用的牌是：\" + get.translation(evt.card.name) + \"(\" + get.pinyin(get.translation(evt.card.name)) + \")\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar history = player.getAllHistory(\"useCard\"),\r\n\t\t\t\t\tindex = history.indexOf(event);\r\n\t\t\t\tif (index < 1) return false;\r\n\t\t\t\tvar evt = history[index - 1];\r\n\t\t\t\treturn get.is.yayun(get.translation(event.card.name), get.translation(evt.card.name)) && player.isPhaseUsing();\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar skills = player.getStockSkills(true, true);\r\n\t\t\t\tgame.expandSkills(skills);\r\n\t\t\t\tvar resetSkills = [];\r\n\t\t\t\tvar suffixs = [\"used\", \"round\", \"block\", \"blocker\"];\r\n\t\t\t\tfor (var skill of skills) {\r\n\t\t\t\t\tvar info = get.info(skill);\r\n\t\t\t\t\tif (typeof info.usable == \"number\") {\r\n\t\t\t\t\t\tif (player.hasSkill(\"counttrigger\") && player.storage.counttrigger[skill] && player.storage.counttrigger[skill] >= 1) {\r\n\t\t\t\t\t\t\tdelete player.storage.counttrigger[skill];\r\n\t\t\t\t\t\t\tresetSkills.add(skill);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (typeof get.skillCount(skill) == \"number\" && get.skillCount(skill) >= 1) {\r\n\t\t\t\t\t\t\tdelete player.getStat(\"skill\")[skill];\r\n\t\t\t\t\t\t\tresetSkills.add(skill);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (info.round && player.storage[skill + \"_roundcount\"]) {\r\n\t\t\t\t\t\tdelete player.storage[skill + \"_roundcount\"];\r\n\t\t\t\t\t\tresetSkills.add(skill);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (player.awakenedSkills.includes(skill)) {\r\n\t\t\t\t\t\tplayer.restoreSkill(skill);\r\n\t\t\t\t\t\tresetSkills.add(skill);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (var suffix of suffixs) {\r\n\t\t\t\t\t\tif (player.hasSkill(skill + \"_\" + suffix)) {\r\n\t\t\t\t\t\t\tplayer.removeSkill(skill + \"_\" + suffix);\r\n\t\t\t\t\t\t\tresetSkills.add(skill);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (resetSkills.length) {\r\n\t\t\t\t\tvar str = \"\";\r\n\t\t\t\t\tfor (var i of resetSkills) {\r\n\t\t\t\t\t\tstr += \"【\" + get.translation(i) + \"】、\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgame.log(player, \"重置了技能\", \"#g\" + str.slice(0, -1));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//纯爱 纯烬艾雅法拉 奶羊 我老婆涅😋\r\n\t\tlvmengmrfz: {\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.lvmengmrfz = {\r\n\t\t\t\t\tbeifeng: [],\r\n\t\t\t\t\tzhongzi: [],\r\n\t\t\t\t\tpimao: [],\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar storage = player.storage.lvmengmrfz;\r\n\t\t\t\t\tvar str =\r\n\t\t\t\t\t\t\"北风：\" +\r\n\t\t\t\t\t\t(storage[\"beifeng\"].length > 0 ? get.translation(storage[\"beifeng\"]) : \"无\") +\r\n\t\t\t\t\t\t\"</br>种子：\" +\r\n\t\t\t\t\t\t(storage[\"zhongzi\"].length > 0 ? get.translation(storage[\"zhongzi\"]) : \"无\") +\r\n\t\t\t\t\t\t\"</br>皮毛：\" +\r\n\t\t\t\t\t\t(storage[\"pimao\"].length > 0 ? get.translation(storage[\"pimao\"]) : \"无\");\r\n\t\t\t\t\treturn str;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 4,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tif (!player.storage.lvmengmrfz)\r\n\t\t\t\t\tplayer.storage.lvmengmrfz = {\r\n\t\t\t\t\t\tbeifeng: [],\r\n\t\t\t\t\t\tzhongzi: [],\r\n\t\t\t\t\t\tpimao: [],\r\n\t\t\t\t\t};\r\n\t\t\t\tvar list = [\r\n\t\t\t\t\t[\"未分配牌的类型（对话框较长，请下滑操作）\", [[\"basic\", \"trick\", \"equip\"], \"vcard\"]],\r\n\t\t\t\t\t[\"北风（从牌堆中获得一张你手牌中没有的花色）\", []],\r\n\t\t\t\t\t[\"种子（此牌结算完毕后你可以将其交给一名其他角色）\", []],\r\n\t\t\t\t\t[\"皮毛（不可被其他角色响应）\", []],\r\n\t\t\t\t];\r\n\t\t\t\tvar next = player.chooseToMove(\"【旅梦】：请分配牌的类型\", true);\r\n\t\t\t\tnext.set(\"list\", list);\r\n\t\t\t\tnext.set(\"filterMove\", function (from, to, moved) {\r\n\t\t\t\t\tif (typeof to == \"number\") {\r\n\t\t\t\t\t\tif (to == 0) return true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t});\r\n\t\t\t\tnext.set(\"processAI\", function () {\r\n\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\tvar moved = [[], [], [], []];\r\n\t\t\t\t\tvar hasFriend = function (player) {\r\n\t\t\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\t\t\treturn get.attitude(player, current) > 2 && current != player;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (!hasFriend(player)) {\r\n\t\t\t\t\t\tmoved[1].addArray([\"equip\"]);\r\n\t\t\t\t\t\tif (Math.random() < 0.5) moved[1].addArray([\"trick\"]);\r\n\t\t\t\t\t\telse moved[3].addArray([\"trick\"]);\r\n\t\t\t\t\t\tmoved[3].addArray([\"basic\"]);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmoved[1].addArray([\"equip\"]);\r\n\t\t\t\t\t\tif (Math.random() < 0.5) {\r\n\t\t\t\t\t\t\tmoved[2].addArray([\"trick\"]);\r\n\t\t\t\t\t\t\tmoved[3].addArray([\"basic\"]);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmoved[2].addArray([\"trick\", \"basic\"]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//console.log(moved);\r\n\t\t\t\t\treturn moved;\r\n\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tgame.broadcastAll(\r\n\t\t\t\t\t\tfunction (moved, player) {\r\n\t\t\t\t\t\t\tvar transform = function (input) {\r\n\t\t\t\t\t\t\t\treturn input.map(item => {\r\n\t\t\t\t\t\t\t\t\tif (item.length === 0) {\r\n\t\t\t\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t\t\t\t} else if (typeof item[0] === \"string\") {\r\n\t\t\t\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\treturn item.map(subItem => subItem[2]);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tvar moved = moved.slice(1);\r\n\t\t\t\t\t\t\tmoved = transform(moved);\r\n\t\t\t\t\t\t\tplayer.storage.lvmengmrfz = {\r\n\t\t\t\t\t\t\t\tbeifeng: [],\r\n\t\t\t\t\t\t\t\tzhongzi: [],\r\n\t\t\t\t\t\t\t\tpimao: [],\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t//console.log(moved);\r\n\t\t\t\t\t\t\tvar keys = Object.keys(player.storage.lvmengmrfz);\r\n\t\t\t\t\t\t\tfor (var i = 0; i < moved.length; i++) {\r\n\t\t\t\t\t\t\t\tfor (var j = 0; j < moved[i].length; j++) {\r\n\t\t\t\t\t\t\t\t\tplayer.storage.lvmengmrfz[keys[i]].add(moved[i][j]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tresult.moved,\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"lvmengmrfz_beifeng\", \"lvmengmrfz_zhongzi\", \"lvmengmrfz_pimao\", \"lvmengmrfz_tag\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\t// 标签\r\n\t\t\t\ttag: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: [\"gainEnd\", \"lvmengmrfzAfter\"] },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn player.storage.lvmengmrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\tvar storage = player.storage.lvmengmrfz,\r\n\t\t\t\t\t\t\tcards = trigger.name == \"gain\" ? trigger.cards : player.getCards(\"h\");\r\n\t\t\t\t\t\tif (trigger.name == \"lvmengmrfz\") {\r\n\t\t\t\t\t\t\tfor (var i of [\"beifeng_lvmengmrfz\", \"zhongzi_lvmengmrfz\", \"pimao_lvmengmrfz\"]) {\r\n\t\t\t\t\t\t\t\tplayer.removeGaintag(i);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var key in storage) {\r\n\t\t\t\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\t\t\t\tif (storage[key].includes(get.type2(i))) i.addGaintag(key + \"_lvmengmrfz\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t//北风\r\n\t\t\t\tbeifeng: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tusable: 4,\r\n\t\t\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar type = player.storage.lvmengmrfz[\"beifeng\"],\r\n\t\t\t\t\t\t\ttmp_bool = false;\r\n\t\t\t\t\t\tif (!type || !event.card) return false;\r\n\t\t\t\t\t\tfor (var i = 0; i < type.length; i++) {\r\n\t\t\t\t\t\t\tif (get.type(event.card, \"trick\") == type[i]) {\r\n\t\t\t\t\t\t\t\ttmp_bool = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar cards = player.getCards(\"h\"),\r\n\t\t\t\t\t\t\tlist = [];\r\n\t\t\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\t\t\tlist.add(get.suit(i, player));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn list.length < 4 && tmp_bool;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar cards = player.getCards(\"h\"),\r\n\t\t\t\t\t\t\tlist = [];\r\n\t\t\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\t\t\tlist.add(get.suit(i, player));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar result = lib.suit.filter(item => !list.includes(item));\r\n\t\t\t\t\t\tvar card = get.cardPile2(card => {\r\n\t\t\t\t\t\t\tfor (var i = 0; i < result.length; i++) {\r\n\t\t\t\t\t\t\t\treturn get.suit(card) == result[i];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (card) player.gain(card, \"gain2\");\r\n\t\t\t\t\t\tif (!trigger.audioed) {\r\n\t\t\t\t\t\t\ttrigger.audioed = true;\r\n\t\t\t\t\t\t\tplayer.logSkill(\"lvmengmrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t//种子\r\n\t\t\t\tzhongzi: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar type = player.storage.lvmengmrfz[\"zhongzi\"],\r\n\t\t\t\t\t\t\ttmp_bool = false;\r\n\t\t\t\t\t\tif (!type || !event.card) return false;\r\n\t\t\t\t\t\tfor (var i = 0; i < type.length; i++) {\r\n\t\t\t\t\t\t\tif (get.type(event.card, \"trick\") == type[i]) {\r\n\t\t\t\t\t\t\t\ttmp_bool = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn event.cards.filterInD().length > 0 && tmp_bool;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.chooseTarget(\"【旅梦】:将\" + get.translation(trigger.cards) + \"交给一名其他角色\", function (card, player, target) {\r\n\t\t\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\tif (target.hasJudge(\"lebu\")) return 0;\r\n\t\t\t\t\t\t\t\tvar att = get.attitude(_status.event.player, target);\r\n\t\t\t\t\t\t\t\tif (att < 3) return 0;\r\n\t\t\t\t\t\t\t\tif (target.hasSkillTag(\"nogain\")) att /= 10;\r\n\t\t\t\t\t\t\t\tif (target.hasSha() && _status.event.sha) {\r\n\t\t\t\t\t\t\t\t\tatt /= 5;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (event.wuxie && target.needsToDiscard(1)) {\r\n\t\t\t\t\t\t\t\t\tatt /= 5;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn att / (1 + get.distance(player, target, \"absolute\"));\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"sha\", trigger.cards[0].name == \"sha\")\r\n\t\t\t\t\t\t\t.set(\"wuxie\", trigger.cards[0].name == \"wuxie\");\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tplayer.line(result.targets[0]);\r\n\t\t\t\t\t\t\tif (!trigger.audioed) {\r\n\t\t\t\t\t\t\t\ttrigger.audioed = true;\r\n\t\t\t\t\t\t\t\tplayer.logSkill(\"lvmengmrfz\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tresult.targets[0].gain(trigger.cards.filterInD(), \"gain2\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t//皮毛\r\n\t\t\t\tpimao: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar type = player.storage.lvmengmrfz[\"pimao\"],\r\n\t\t\t\t\t\t\ttmp_bool = false;\r\n\t\t\t\t\t\tif (!type || !event.card) return false;\r\n\t\t\t\t\t\tfor (var i = 0; i < type.length; i++) {\r\n\t\t\t\t\t\t\tif (get.type(event.card, \"trick\") == type[i]) {\r\n\t\t\t\t\t\t\t\ttmp_bool = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn tmp_bool;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (!trigger.audioed) {\r\n\t\t\t\t\t\t\ttrigger.audioed = true;\r\n\t\t\t\t\t\t\tplayer.logSkill(\"lvmengmrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current != player;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.6,\r\n\t\t\t},\r\n\t\t},\r\n\t\trechenmrfz: {\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar evt = player.getLastUsed();\r\n\t\t\t\t\tif (!player.isPhaseUsing()) return \"不是你的出牌阶段\";\r\n\t\t\t\t\tif (!evt || !evt.card) return \"本回合你未使用过牌\";\r\n\t\t\t\t\treturn \"上一张你使用的牌的花色是：\" + get.translation(get.suit(evt.card));\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\tforced: true,\r\n\t\t\tfirstDo: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar evt = player.getLastUsed(1);\r\n\t\t\t\tif (event.getParent(\"phaseUse\").player != player) return false;\r\n\t\t\t\treturn evt && evt.card && get.suit(event.card) == get.suit(evt.card) && !event.audioed;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.audioed = true;\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\taiOrder: function (player, card, num) {\r\n\t\t\t\t\tif (typeof card == \"object\" && player.isPhaseUsing()) {\r\n\t\t\t\t\t\tvar evt = player.getLastUsed();\r\n\t\t\t\t\t\tif (evt && evt.card && get.suit(evt.card) && get.suit(evt.card) == get.suit(card)) {\r\n\t\t\t\t\t\t\treturn num + 10;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcardUsable: function (card, player) {\r\n\t\t\t\t\tvar evt = player.getLastUsed();\r\n\t\t\t\t\tif (evt && evt.card && get.suit(card) == get.suit(evt.card)) return Infinity;\r\n\t\t\t\t},\r\n\t\t\t\ttargetInRange: function (card, player, target, now) {\r\n\t\t\t\t\tvar evt = player.getLastUsed();\r\n\t\t\t\t\tif (evt && evt.card && get.suit(card) == get.suit(evt.card)) return true;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"rechenmrfz_syn\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tsyn: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"useCardEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.getParent(\"phaseUse\").player === player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addTip(\"rechenmrfz_tip\", `热忱 ${get.translation(get.suit(trigger.card))}`, \"phaseUseEnd\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//塑心 阿尔图罗 2226\r\n\t\tqinmingmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tusable: 1,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn current != player && current.countCards(\"h\") > 0;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tselectTarget: 1,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar tmp_cards = target.getCards(\"h\");\r\n\t\t\t\tvar cards = [];\r\n\t\t\t\tfor (i of tmp_cards) {\r\n\t\t\t\t\tif (target.canRecast(i)) cards.push(i);\r\n\t\t\t\t}\r\n\t\t\t\ttarget.recast(cards);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tvar cards = target.getCards(\"h\");\r\n\t\t\t\ttarget.showCards(cards, \"【琴鸣】:\" + get.translation(target) + \"的手牌\");\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tvar cards = target.getCards(\"h\");\r\n\t\t\t\tvar canCards = [];\r\n\t\t\t\tfor (i of cards) {\r\n\t\t\t\t\tif (target.canUseToAnyone(i)) canCards.push(i);\r\n\t\t\t\t}\r\n\t\t\t\tevent.cards = canCards;\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tif (event.cards.length > 0) {\r\n\t\t\t\t\tif (target.hasCard(event.cards[0].name, \"h\")) target.chooseUseTarget(true, event.cards[0], false);\r\n\t\t\t\t\tevent.goto(2);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 8,\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tvar lowAtt =\r\n\t\t\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\t\t\treturn current != player && current.inRange(target) && get.attitude(player, current) < 0;\r\n\t\t\t\t\t\t\t}) && get.attitude(player, target) < 0;\r\n\t\t\t\t\t\tvar hightAtt =\r\n\t\t\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\t\t\treturn current != player && current.inRange(target) && get.attitude(player, current) < 0;\r\n\t\t\t\t\t\t\t}) && get.attitude(player, target) > 0;\r\n\t\t\t\t\t\tif (lowAtt) return -1;\r\n\t\t\t\t\t\tif (hightAtt) return 1;\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tkongwomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"drawBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.num > 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar num = trigger.num;\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t\tvar cards = [],\r\n\t\t\t\t\tbanCards = [];\r\n\t\t\t\tvar loseCards = player.getHistory(\"lose\", evt => {\r\n\t\t\t\t\treturn evt.player == player;\r\n\t\t\t\t});\r\n\t\t\t\tfor (var i of loseCards) {\r\n\t\t\t\t\tif (!i.cards) continue;\r\n\t\t\t\t\tbanCards.push(i.cards);\r\n\t\t\t\t}\r\n\t\t\t\twhile (cards.length < num) {\r\n\t\t\t\t\tvar card = get.discardPile(card => {\r\n\t\t\t\t\t\treturn !cards.includes(card) && !banCards.includes(card);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (card) cards.push(card);\r\n\t\t\t\t\telse break;\r\n\t\t\t\t}\r\n\t\t\t\tplayer.gain(cards, \"gain2\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"kongwomrfz_get\", \"kongwomrfz_clear\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseUseEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (player.storage.kongwomrfz_get) delete player.storage.kongwomrfz_get;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tget: {\r\n\t\t\t\t\taudio: \"kongwomrfz\",\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"loseAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.player == player || !player.isPhaseUsing()) return false;\r\n\t\t\t\t\t\tif (event.getParent().name != \"useCard\") return false;\r\n\t\t\t\t\t\tvar cards = event.cards2.slice(0);\r\n\t\t\t\t\t\tfor (var i = 0; i < cards.length; i++) {\r\n\t\t\t\t\t\t\tvar type = get.type2(cards[i]);\r\n\t\t\t\t\t\t\tif (get.position(cards[i], true) == \"o\" && type != \"equip\") {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tif (trigger.delay == false) game.delay();\r\n\t\t\t\t\t\tif (!player.storage.kongwomrfz_get) player.storage.kongwomrfz_get = [];\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tvar cards = [];\r\n\t\t\t\t\t\tfor (var i = 0; i < trigger.cards2.length; i++) {\r\n\t\t\t\t\t\t\tvar card = trigger.cards2[i];\r\n\t\t\t\t\t\t\tvar type = get.type2(card);\r\n\t\t\t\t\t\t\tvar name = player.storage.kongwomrfz_get,\r\n\t\t\t\t\t\t\t\tname2 = card.name;\r\n\t\t\t\t\t\t\tif (get.position(card, true) == \"o\" && type != \"equip\" && !name.includes(name2)) {\r\n\t\t\t\t\t\t\t\tcards.push(card);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (cards.length)\r\n\t\t\t\t\t\t\tplayer.chooseButton(true, [\"【空我】:请选择你要获得的牌\", cards], [1, Infinity]).set(\"ai\", button => {\r\n\t\t\t\t\t\t\t\treturn cards;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\telse event.finish();\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tif (result.links) {\r\n\t\t\t\t\t\t\tvar cards = result.links;\r\n\t\t\t\t\t\t\tfor (i of cards) {\r\n\t\t\t\t\t\t\t\tvar name = get.name(i);\r\n\t\t\t\t\t\t\t\tif (!player.storage.kongwomrfz_get.includes(name)) player.storage.kongwomrfz_get.add(name);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tplayer.gain(cards, \"gain2\");\r\n\t\t\t\t\t\t\tplayer.logSkill(\"kongwomrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//赫德雷\r\n\t\tzhengrongmrfz: {\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.zhengrongmrfz = {\r\n\t\t\t\t\tdiscard: false,\r\n\t\t\t\t\tlosedraw: false,\r\n\t\t\t\t\tmaxhp: false,\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"damageEnd\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar list = [],\r\n\t\t\t\t\tstorage = player.storage.zhengrongmrfz;\r\n\t\t\t\tif (player.countCards(\"h\") > 0 && storage[\"discard\"] == false) list.push(\"弃牌\");\r\n\t\t\t\tif (storage[\"losedraw\"] == false) list.push(\"摸牌阶段摸牌数-1\");\r\n\t\t\t\tif (storage[\"maxhp\"] == false) list.push(\"失去体力上限\");\r\n\t\t\t\tif (list.length == 0) return false;\r\n\t\t\t\tif (event.player === undefined) return false;\r\n\t\t\t\tif (!event.player.isAlive()) return false;\r\n\t\t\t\treturn event.player == player || get.distance(player, event.player) <= 1;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\tif (event.player == player) return \"【征戎】：是否选择一项并回复一点体力？\";\r\n\t\t\t\treturn \"【征戎】:是否选择一项并令\" + get.translation(event.player) + \"回复一点体力？\";\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (get.attitude(event.player, player) < 0) return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar list = [],\r\n\t\t\t\t\tstorage = player.storage.zhengrongmrfz;\r\n\t\t\t\tif (player.countCards(\"h\") > 0 && storage[\"discard\"] == false) list.push(\"弃牌\");\r\n\t\t\t\tif (storage[\"losedraw\"] == false) list.push(\"摸牌阶段摸牌数-1\");\r\n\t\t\t\tif (storage[\"maxhp\"] == false) list.push(\"失去体力上限\");\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"prompt\", \"【征戎】:请选择一项\");\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.control) {\r\n\t\t\t\t\tvar control = result.control;\r\n\t\t\t\t\tgame.log(control);\r\n\t\t\t\t\tif (control == \"弃牌\") {\r\n\t\t\t\t\t\tplayer.chooseToDiscard(\"he\", true, \"【征戎】:请弃置一张牌\");\r\n\t\t\t\t\t\tplayer.storage.zhengrongmrfz[\"discard\"] = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (control == \"摸牌阶段摸牌数-1\") {\r\n\t\t\t\t\t\tplayer.addMark(\"zhengrongmrfz_losedraw\", false);\r\n\t\t\t\t\t\tplayer.addTempSkill(\"zhengrongmrfz_losedraw\", {\r\n\t\t\t\t\t\t\tplayer: \"phaseDrawAfter\",\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tplayer.storage.zhengrongmrfz[\"losedraw\"] = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (control == \"失去体力上限\") {\r\n\t\t\t\t\t\tplayer.loseMaxHp();\r\n\t\t\t\t\t\tplayer.storage.zhengrongmrfz[\"maxhp\"] = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttrigger.player.recover();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhengrongmrfz_rec\", \"zhengrongmrfz_draw\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\taudio: 2,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar allGone = Object.values(player.storage.zhengrongmrfz).every(function (value) {\r\n\t\t\t\t\t\t\treturn value === true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (player.storage.zhengrongmrfz === undefined) return false;\r\n\t\t\t\t\t\treturn allGone;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.drawTo(player.maxHp);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\trec: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.zhengrongmrfz = {\r\n\t\t\t\t\t\t\tdiscard: false,\r\n\t\t\t\t\t\t\tlosedraw: false,\r\n\t\t\t\t\t\t\tmaxhp: false,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tlosedraw: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"下个摸牌阶段摸牌数-#\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.num > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num -= player.countMark(\"zhengrongmrfz_losedraw\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tthreaten: 0.8,\r\n\t\t\t},\r\n\t\t},\r\n\t\tsiyanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCard2\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.targets.length > 1) return false;\r\n\t\t\t\tif (event.targets[0] == player) return false;\r\n\t\t\t\tif (!event.card || event.card.name != \"sha\") return false;\r\n\t\t\t\tvar history = event.targets[0].getHistory(\"damage\");\r\n\t\t\t\tfor (var i = 0; i < history.length; i++) {\r\n\t\t\t\t\tif (!history[i].source) continue;\r\n\t\t\t\t\tif (history[i].source == player) return true;\r\n\t\t\t\t}\r\n\t\t\t\tvar seatNum = event.targets[0].getSeatNum();\r\n\t\t\t\t// console.log(seatNum in player.storage.siyanmrfz_tol);\r\n\t\t\t\tif (seatNum in player.storage.siyanmrfz_tol && player.storage.siyanmrfz_tol[seatNum] === true) return true;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (get.attitude(event.targets[0], player) > 0) return false;\r\n\t\t\t\treturn player.hp > 1;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"【死烟】:是否失去一点体力并令\" + get.translation(event.targets[0]) + \"选择一项？\";\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.addTempSkill(\"siyanmrfz_rec\", {\r\n\t\t\t\t\tplayer: \"damageAfter\",\r\n\t\t\t\t});\r\n\t\t\t\tplayer.storage.siyanmrfz_rec = {\r\n\t\t\t\t\tcard: trigger.card,\r\n\t\t\t\t};\r\n\t\t\t\tvar target = trigger.targets[0],\r\n\t\t\t\t\tlist = [\"无法响应\" + get.translation(player) + \"使用的【杀】\"];\r\n\t\t\t\tif (target.countCards(\"h\") > 1) list.push(\"弃置两张手牌\");\r\n\t\t\t\ttarget.loseHp();\r\n\t\t\t\tplayer.loseHp();\r\n\t\t\t\tif (list.length < 2 && target.isAlive()) {\r\n\t\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn current == target;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t);\r\n\t\t\t\t\tgame.log(target, \"选择了无法响应\", player, \"使用的【杀】\");\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t} else if (target.isAlive()) {\r\n\t\t\t\t\ttarget\r\n\t\t\t\t\t\t.chooseControl()\r\n\t\t\t\t\t\t.set(\"choiceList\", list)\r\n\t\t\t\t\t\t.set(\"prompt\", \"【死烟】:请选择一项\")\r\n\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tif (player.countCards(\"h\") < 3) return 0;\r\n\t\t\t\t\t\t\tif (!player.hasShan()) return 0;\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tplayer.hp == 1 &&\r\n\t\t\t\t\t\t\t\tplayer.countCards(\"h\", card => {\r\n\t\t\t\t\t\t\t\t\treturn get.name(card) == \"tao\" || get.name(card) == \"jiu\";\r\n\t\t\t\t\t\t\t\t}) > 0 &&\r\n\t\t\t\t\t\t\t\tplayer.countCards(\"h\") < 3\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} else event.finish();\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.control) {\r\n\t\t\t\t\tvar target = trigger.targets[0];\r\n\t\t\t\t\tif (result.index == 1) {\r\n\t\t\t\t\t\tgame.log(get.translation(target), \"选择了弃置两张手牌\");\r\n\t\t\t\t\t\ttarget.chooseToDiscard(\"h\", true, 2);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current == target;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tgame.log(target, \"选择了无法响应\", player, \"使用的【杀】\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"siyanmrfz_tol\", \"siyanmrfz_clear\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\trec: {\r\n\t\t\t\t\tonremove: function (player) {\r\n\t\t\t\t\t\tdelete player.storage.siyanmrfz_rec;\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tsource: \"damageEnd\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar info = player.storage.siyanmrfz_rec;\r\n\t\t\t\t\t\treturn event.card && event.card == info.card;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (get.suit(trigger.card) == \"diamond\") player.recover();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player != player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar seatNum = trigger.player.getSeatNum();\r\n\t\t\t\t\t\tplayer.storage.siyanmrfz_tol[seatNum] = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttol: {\r\n\t\t\t\t\tinit: function (player) {\r\n\t\t\t\t\t\tplayer.storage.siyanmrfz_tol = {};\r\n\t\t\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\t\t\tif (game.players[i] == player) continue;\r\n\t\t\t\t\t\t\tplayer.storage.siyanmrfz_tol[i + 1] = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.source != undefined && player.isAlive();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar seatNum = trigger.source.getSeatNum();\r\n\t\t\t\t\t\tif (seatNum in player.storage.siyanmrfz_tol && player.storage.siyanmrfz_tol[seatNum] === false) {\r\n\t\t\t\t\t\t\tplayer.storage.siyanmrfz_tol[seatNum] = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\tvar seatNum = arg.target.getSeatNum(arg.target);\r\n\t\t\t\t\tif ((!seatNum) in player.storage.siyanmrfz_tol || player.storage.siyanmrfz_tol[seatNum] === false) return false;\r\n\t\t\t\t\tif (arg.card.name != \"sha\" || arg.target.countCards(\"h\", \"shan\") > 1) return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//止颂\r\n\t\tkuxiumrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tif (card.name == \"sha\") return (num += player.getCards(\"j\").length);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar cards = [];\r\n\t\t\t\tif (player.countCards(\"he\") < 1) return false;\r\n\t\t\t\tfor (var i of lib.inpile) {\r\n\t\t\t\t\tif (get.type(i) == \"delay\") cards.push(i);\r\n\t\t\t\t}\r\n\t\t\t\tfor (var name of cards) {\r\n\t\t\t\t\tif (player.canAddJudge({ name: name })) return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tchooseButton: {\r\n\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\tvar cards = [];\r\n\t\t\t\t\tfor (var i of lib.inpile) {\r\n\t\t\t\t\t\tif (get.type(i) == \"delay\") cards.push(i);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar vcards = [];\r\n\t\t\t\t\tfor (var name of cards) {\r\n\t\t\t\t\t\tvar card = { name: name };\r\n\t\t\t\t\t\tif (player.canAddJudge({ name: name })) vcards.push([\"延时锦囊\", \"\", name]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar dialog = ui.create.dialog(\"苦修\", [vcards, \"vcard\"], \"hidden\");\r\n\t\t\t\t\treturn dialog;\r\n\t\t\t\t},\r\n\t\t\t\tcheck: function (button) {\r\n\t\t\t\t\tvar name = button.link[2];\r\n\t\t\t\t\tswitch (name) {\r\n\t\t\t\t\t\tcase \"lebu\":\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\tcase \"bingliang\":\r\n\t\t\t\t\t\t\treturn 2;\r\n\t\t\t\t\t\tcase \"shandian\":\r\n\t\t\t\t\t\t\treturn 3;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\treturn 1.5;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\taudio: \"kuxiumrfz\",\r\n\t\t\t\t\t\tfilterCard: function (card, player, event) {\r\n\t\t\t\t\t\t\treturn player.canAddJudge({\r\n\t\t\t\t\t\t\t\tname: links[0][2],\r\n\t\t\t\t\t\t\t\tcards: [card],\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tselectTarget: -1,\r\n\t\t\t\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\t\t\t\treturn player == target;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcheck(card) {\r\n\t\t\t\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tviewAs: {\r\n\t\t\t\t\t\t\tname: links[0][2],\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tposition: \"he\",\r\n\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t\tonuse: function (links, player) {\r\n\t\t\t\t\t\t\tif (!links.cards) return;\r\n\t\t\t\t\t\t\tvar next = game.createEvent(\"kuxiumrfz_draw\", false, _status.event.getParent());\r\n\t\t\t\t\t\t\tnext.cards = links.cards;\r\n\t\t\t\t\t\t\tnext.player = player;\r\n\t\t\t\t\t\t\tnext.setContent(function () {\r\n\t\t\t\t\t\t\t\tlet num = player.getCards(\"j\").length;\r\n\t\t\t\t\t\t\t\tif (num > 0) player.draw(num);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tai: {\r\n\t\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\treturn \"【苦修】：请选择一张牌将其当做一张【\" + get.translation(links[0][2]) + \"】对自己使用\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 8,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tlirenmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"j\") > 0;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tvar cards = player.getCards(\"j\");\r\n\t\t\t\tif (cards.length == 1 && cards[0] == \"shandian\") return false;\r\n\t\t\t\treturn player.hp > 1;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar num = player.getCards(\"j\").length;\r\n\t\t\t\tplayer.discardPlayerCard(player, num, \"j\", true);\r\n\t\t\t\tplayer.loseHp();\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//锏\r\n\t\t/** @type { Skill } */\r\n\t\tweiyamrfz: {\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tmod: {\r\n\t\t\t\ttargetInRange(card, player, target) {\r\n\t\t\t\t\tif (player.getStorage(\"weiyamrfz\").includes(target)) return true;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.player != player && !event.player.hasSkill(\"weiyamrfz_ban\") && event.player.isAlive();\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"【威压】:是否令\" + get.translation(event.player) + \"下个出牌阶段不能使用带有伤害类标签的牌？\";\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(event.player, player) < 0;\r\n\t\t\t},\r\n\t\t\tcontent: async function (event, trigger, player) {\r\n\t\t\t\ttrigger.player.addTempSkill(\"weiyamrfz_ban\", {\r\n\t\t\t\t\tplayer: \"phaseUseEnd\",\r\n\t\t\t\t});\r\n\t\t\t\tplayer.storage.weiyamrfz ??= [];\r\n\t\t\t\tplayer.storage.weiyamrfz.add(trigger.player);\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tmarktext: \"战栗\",\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"出牌阶段不能使用带有伤害类标签的牌\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardEnabled: function (card, player) {\r\n\t\t\t\t\t\t\tif (get.tag(card, \"damage\") > 0 && player.isPhaseUsing()) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.2,\r\n\t\t\t\tthreaten: 1.1,\r\n\t\t\t\tunequip: true,\r\n\t\t\t\tskillTagFilter(player, tag, arg) {\r\n\t\t\t\t\treturn player.getStorage(\"weiyamrfz\").includes(arg.target);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t/** @type { Skill } */\r\n\t\tzhiwumrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tcardname: function (card, player) {\r\n\t\t\t\t\tif (card.cardnameCheck) return card.name;\r\n\t\t\t\t\tcard.cardnameCheck = true;\r\n\t\t\t\t\tlet result;\r\n\t\t\t\t\tif (get.type(card) == \"trick\") result = \"sha\";\r\n\t\t\t\t\telse result = card.name;\r\n\t\t\t\t\tdelete card.cardnameCheck;\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"useCardToTargeted\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.targets.length == 0) return false;\r\n\t\t\t\treturn event.card.name == \"sha\" && get.color(event.card) != undefined;\r\n\t\t\t},\r\n\t\t\tcontent: async function (event, trigger, player) {\r\n\t\t\t\tvar targets = trigger.targets;\r\n\t\t\t\tfor (var i = 0; i < targets.length; i++) {\r\n\t\t\t\t\tif (targets[i].hasSkill(\"zhiwumrfz_ban\")) continue;\r\n\t\t\t\t\ttargets[i].addTempSkill(\"zhiwumrfz_ban\");\r\n\t\t\t\t\ttargets[i].storage.zhiwumrfz_ban = {\r\n\t\t\t\t\t\tplayer: player,\r\n\t\t\t\t\t\tcolor: get.color(trigger.card),\r\n\t\t\t\t\t};\r\n\t\t\t\t\tplayer.line(targets[i]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhiwumrfz_count\", \"zhiwumrfz_draw\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\taudio: \"zhiwumrfz\",\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn player.getRoundHistory(\"sourceDamage\", evt => evt.player === event.player).length === 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tcount: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard1\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!player.isPhaseUsing()) return false;\r\n\t\t\t\t\t\tif (!event.card || event.card.name != \"sha\") return false;\r\n\t\t\t\t\t\tif (event.addCount === false) return false;\r\n\t\t\t\t\t\treturn event.card.cards.length > 1 || (event.card.cards.length == 1 && event.cards[0].name != event.card.name);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: async function (event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.addCount = false;\r\n\t\t\t\t\t\tif (player.stat[player.stat.length - 1].card.sha > 0) {\r\n\t\t\t\t\t\t\tplayer.stat[player.stat.length - 1].card.sha--;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tban: {\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardEnabled: function (card, player) {\r\n\t\t\t\t\t\t\tif (get.color(card) == player.storage.zhiwumrfz_ban[\"color\"]) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"useCardAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card.name == \"sha\" && event.player == player.storage.zhiwumrfz_ban[\"player\"];\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t//console.log(player.storage.zhiwumrfz_ban);\r\n\t\t\t\t\t\tdelete player.storage.zhiwumrfz_ban;\r\n\t\t\t\t\t\tplayer.removeSkill(\"zhiwumrfz_ban\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//莱伊\r\n\t\tshaobanmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tinRange: function (from, to) {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tto.hasCard(card => {\r\n\t\t\t\t\t\t\treturn card.name == \"shadishoumrfz\";\r\n\t\t\t\t\t\t}, \"e\")\r\n\t\t\t\t\t)\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tderivation: [\"shadishoumrfz\"],\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.countCards(\"he\") > 0 &&\r\n\t\t\t\t\t!game.hasPlayer(current => {\r\n\t\t\t\t\t\treturn current.hasCard(card => {\r\n\t\t\t\t\t\t\treturn card.name == \"shadishoumrfz\";\r\n\t\t\t\t\t\t}, \"e\");\r\n\t\t\t\t\t}) &&\r\n\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\treturn current != player && !current.isDisabled(2);\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tfilterCard: true,\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && !target.isDisabled(2);\r\n\t\t\t},\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar card = game.createCard(\"shadishoumrfz\", \"heart\", 13);\r\n\t\t\t\ttarget.$gain2(card);\r\n\t\t\t\tgame.delayx();\r\n\t\t\t\ttarget.equip(card);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 5,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: -1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: \"shaobanmrfz_dam\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\tdam: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { source: \"damageBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.hasSkill(\"shaobanmrfz_ban\")) return false;\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.player != player &&\r\n\t\t\t\t\t\t\tevent.player.hasCard(card => {\r\n\t\t\t\t\t\t\t\treturn card.name == \"shadishoumrfz\";\r\n\t\t\t\t\t\t\t}, \"e\")\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t\tplayer.logSkill(\"shaobanmrfz\", trigger.player);\r\n\t\t\t\t\t\tplayer.addTempSkill(\"shaobanmrfz_ban\", {\r\n\t\t\t\t\t\t\tglobal: \"phaseEnd\",\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\ttankuangmrfz: {\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"剩余#次\",\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tgetCountInRanger(player) {\r\n\t\t\t\tvar num = 0,\r\n\t\t\t\t\tplayers = game.filterPlayer();\r\n\t\t\t\tfor (var i = 0; i < players.length; i++) {\r\n\t\t\t\t\tif (player.inRange(players[i])) {\r\n\t\t\t\t\t\tnum++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn num;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"tankuangmrfz\") > 0;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (player.hp < 2) return Math.random() > 0.4;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar card = game.cardsGotoOrdering(get.cards(1)).cards[0],\r\n\t\t\t\t\tnum = 0;\r\n\t\t\t\tplayer.showCards(card, get.translation(player) + \"展示了牌堆顶一张牌\");\r\n\t\t\t\tif (get.color(card) == get.color(trigger.card)) num++;\r\n\t\t\t\tif (get.type(card, \"trick\") == get.type(trigger.card, \"trick\")) num++;\r\n\t\t\t\tif (get.number(card) >= get.number(trigger.card)) num++;\r\n\t\t\t\tif (num > 0) {\r\n\t\t\t\t\tplayer.draw(num);\r\n\t\t\t\t\tif (num == 3) player.recoverTo(player.maxHp);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.loseHp();\r\n\t\t\t\t\tplayer.removeSkill(\"tankuangmrfz\");\r\n\t\t\t\t\tplayer.addTempSkill(\"tankuangmrfz_re3\", {\r\n\t\t\t\t\t\tglobal: \"phaseBegin\",\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tplayer.removeMark(\"tankuangmrfz\", false);\r\n\t\t\t},\r\n\t\t\tgroup: [\"tankuangmrfz_re\", \"tankuangmrfz_re2\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tre: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseBegin\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar num = Math.max(2, lib.skill.tankuangmrfz.getCountInRanger(player));\r\n\t\t\t\t\t\tplayer.removeMark(\"tankuangmrfz\", player.countMark(\"tankuangmrfz\"), false);\r\n\t\t\t\t\t\tplayer.addMark(\"tankuangmrfz\", num, false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tre2: {\r\n\t\t\t\t\tinit: function (player) {\r\n\t\t\t\t\t\tplayer.storage.tankuangmrfz_re2 = lib.skill.tankuangmrfz.getCountInRanger(player);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"loseAfter\", \"changeHp\", \"gainMaxHpAfter\", \"loseMaxHpAfter\"],\r\n\t\t\t\t\t\tglobal: [\"equipAfter\", \"addJudgeAfter\", \"gainAfter\", \"loseAsyncAfter\", \"addToExpansionAfter\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.storage.tankuangmrfz_re2 - Math.max(2, lib.skill.tankuangmrfz.getCountInRanger(player)) != 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (!player.storage.tankuangmrfz_re2) player.storage.tankuangmrfz_re2 = 0;\r\n\t\t\t\t\t\tvar now = Math.max(2, lib.skill.tankuangmrfz.getCountInRanger(player));\r\n\t\t\t\t\t\tvar last = player.storage.tankuangmrfz_re2;\r\n\t\t\t\t\t\tvar num = now - last;\r\n\t\t\t\t\t\tif (num > 0) {\r\n\t\t\t\t\t\t\tplayer.addMark(\"tankuangmrfz\", num, false);\r\n\t\t\t\t\t\t} else player.removeMark(\"tankuangmrfz\", Math.abs(num), false);\r\n\t\t\t\t\t\tplayer.storage.tankuangmrfz_re2 = now;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tre3: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addSkill(\"tankuangmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//新斥罪\r\n\t\tnewzhidianmrfz: {\r\n\t\t\tgetSkillsList: function (event, player) {\r\n\t\t\t\tvar list = [];\r\n\t\t\t\tvar listm = [];\r\n\t\t\t\tvar listv = [];\r\n\t\t\t\tif (player.name1 != undefined) listm = lib.character[player.name1][3];\r\n\t\t\t\telse listm = lib.character[player.name][3];\r\n\t\t\t\tif (player.name2 != undefined) listv = lib.character[player.name2][3];\r\n\t\t\t\tlistm = listm.concat(listv);\r\n\t\t\t\tvar func = function (skill) {\r\n\t\t\t\t\tvar info = get.info(skill);\r\n\t\t\t\t\tif (!info || info.charlotte) return false;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t};\r\n\t\t\t\tfor (var i = 0; i < listm.length; i++) {\r\n\t\t\t\t\tif (func(listm[i])) list.add(listm[i]);\r\n\t\t\t\t}\r\n\t\t\t\tif (player.disabledSkills) {\r\n\t\t\t\t\tfor (var key in player.disabledSkills) {\r\n\t\t\t\t\t\tlist.remove(key);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn list;\r\n\t\t\t},\r\n\t\t\tinit: (player, skill) => {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\taudio: \"zhidianmrfz\",\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 114514,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && !player.storage.newzhidianmrfz.includes(target);\r\n\t\t\t},\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\treturn 7 - get.value(card);\r\n\t\t\t},\r\n\t\t\tposition: \"he\",\r\n\t\t\tfilterCard: true,\r\n\t\t\tdelay: false,\r\n\t\t\tlose: false,\r\n\t\t\tdiscard: false,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet card = event.cards,\r\n\t\t\t\t\ttarget = event.target;\r\n\t\t\t\tplayer.give(card, target);\r\n\t\t\t\tlet list = [],\r\n\t\t\t\t\tlist2 = [];\r\n\t\t\t\tif (target.countCards(\"he\") > 1) {\r\n\t\t\t\t\tlist.add(`弃置三张牌，${get.translation(player)}获得其中一张牌`);\r\n\t\t\t\t\tlist2.add(\"选项一\");\r\n\t\t\t\t} else list.add(`<span style=\"opacity:0.5\">弃置三张牌，${get.translation(player)}获得其中一张牌（不可选:牌数少于2）</span>`);\r\n\t\t\t\tlist.add(`受到一点伤害且令${get.translation(player)}选择让你一个技能失效`);\r\n\t\t\t\tlist2.add(\"选项二\");\r\n\t\t\t\tif (!target.isLinked()) {\r\n\t\t\t\t\tlist.add(`横置武将牌，${get.translation(player)}本回合不能再对你使用此技能`);\r\n\t\t\t\t\tlist2.add(\"选项三\");\r\n\t\t\t\t} else\r\n\t\t\t\t\tlist.add(`<span style=\"opacity:0.5\">横置武将牌，${get.translation(player)}本回合不能再对你使用此技能（不可选:已被横置）</span>`);\r\n\t\t\t\tvar { control } = await target\r\n\t\t\t\t\t.chooseControl(list2)\r\n\t\t\t\t\t.set(\"choiceList\", list)\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\tvar player = _status.event.target,\r\n\t\t\t\t\t\t\tlist = _status.event.list,\r\n\t\t\t\t\t\t\ths = player.getCards(\"he\", card => {\r\n\t\t\t\t\t\t\t\treturn get.value(card) < 8;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (player.hp < 2) list.remove(\"选项二\");\r\n\t\t\t\t\t\tif (player.countCards(\"he\") < 4 || hs.length < 3) list.remove(\"选项一\");\r\n\t\t\t\t\t\tif (list.length == 0) list.push(\"选项二\");\r\n\t\t\t\t\t\treturn list[0];\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"target\", event.target)\r\n\t\t\t\t\t.set(\"list\", list2)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!control) return;\r\n\t\t\t\tswitch (control) {\r\n\t\t\t\t\tcase \"选项一\":\r\n\t\t\t\t\t\tconst { cards } = await target.chooseToDiscard(true, \"he\", 3, \"请弃置三张牌\").forResult();\r\n\t\t\t\t\t\tif (!cards) return;\r\n\t\t\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\t\t\tif (get.position(i) != \"d\") cards.remove(i);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (cards.length == 0) return;\r\n\t\t\t\t\t\tconst { links } =\r\n\t\t\t\t\t\t\tcards.length == 1\r\n\t\t\t\t\t\t\t\t? { links: cards }\r\n\t\t\t\t\t\t\t\t: await player.chooseCardButton(cards, \"【执典】:请选择获得一张牌\", true, 1).forResult();\r\n\t\t\t\t\t\tplayer.gain(links[0], \"gain2\");\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"选项二\":\r\n\t\t\t\t\t\tlet skillList = lib.skill.newzhidianmrfz.getSkillsList(event, target);\r\n\t\t\t\t\t\tif (skillList.length > 0) {\r\n\t\t\t\t\t\t\tvar { control } = await player\r\n\t\t\t\t\t\t\t\t.chooseControl(skillList)\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", `选择${get.translation(target)}武将牌上的一个技能并令其失效`)\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\ttarget.disableSkill(\"newzhidianmrfz_disable\", control);\r\n\t\t\t\t\t\t\ttarget.addTempSkill(\"newzhidianmrfz_disable\", {\r\n\t\t\t\t\t\t\t\tplayer: \"phaseAfter\",\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tgame.log(player, \"选择了\", target, \"的技能\", \"#g【\" + get.translation(control) + \"】\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttarget.damage();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"选项三\":\r\n\t\t\t\t\t\ttarget.link(true);\r\n\t\t\t\t\t\tif (!player.storage.newzhidianmrfz) player.storage.newzhidianmrfz = [];\r\n\t\t\t\t\t\tplayer.storage.newzhidianmrfz.add(target);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"newzhidianmrfz_count\", \"newzhidianmrfz_clear\"],\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.2,\r\n\t\t\t\torder: 8,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tvar att = get.attitude(player, target);\r\n\t\t\t\t\t\tif (att < 0) {\r\n\t\t\t\t\t\t\treturn -(1 + target.countCards(\"he\") * 0.1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseAfter\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.newzhidianmrfz = [];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tcount: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\t\t\tplayer: [\"changeHp\", \"enterGame\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tlib.skill.newzhidianmrfz.usable = player.hp;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdisable: {\r\n\t\t\t\t\tonremove(player, skill) {\r\n\t\t\t\t\t\tplayer.enableSkill(skill);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlocked: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent(storage, player, skill) {\r\n\t\t\t\t\t\t\tvar list = [];\r\n\t\t\t\t\t\t\tfor (var i in player.disabledSkills) {\r\n\t\t\t\t\t\t\t\tif (player.disabledSkills[i].includes(skill)) list.push(i);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (list.length) {\r\n\t\t\t\t\t\t\t\tvar str = \"失效技能：\";\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\t\t\t\t\t\t\tif (lib.translate[list[i] + \"_info\"]) str += get.translation(list[i]) + \"、\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn str.slice(0, str.length - 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tnewpijimrfz: {\r\n\t\t\taudio: \"pijimrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCard\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tlocked: false,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn current != player && current.isLinked();\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\tgame.filterPlayer(current => {\r\n\t\t\t\t\t\treturn current != player && current.isLinked();\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\treturn arg.target.isLinked();\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: \"newpijimrfz_damage\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.isLinked() && event.getParent().name != \"newpijimrfz_damage\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.logSkill(\"newpijimrfz\");\r\n\t\t\t\t\t\tfor (var i of game.players) {\r\n\t\t\t\t\t\t\tif (player == i || !i.isLinked()) continue;\r\n\t\t\t\t\t\t\tplayer.line(i);\r\n\t\t\t\t\t\t\ti.damage();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//新塞雷娅\r\n\t\tnewgaihuamrfz: {\r\n\t\t\taudio: \"gaihuamrfz\",\r\n\t\t\tenable: [\"chooseToUse\", \"chooseToRespond\"],\r\n\t\t\thiddenCard: function (player, name) {\r\n\t\t\t\tif (lib.inpile.includes(name) && !player.hasSkill(\"newgaihuamrfz_ban\") && get.type(name) == \"basic\") return true;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.responded || event.newgaihuamrfz || player.hasSkill(\"newgaihuamrfz_ban\")) return false;\r\n\t\t\t\tfor (var i of lib.inpile) {\r\n\t\t\t\t\tif (get.type(i) == \"basic\" && event.filterCard({ name: i }, player, event)) return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar evt = event.getParent(2),\r\n\t\t\t\t\tstorage = player.storage.newgaihuamrfz_clear;\r\n\t\t\t\tevt.set(\"newgaihuamrfz\", true);\r\n\t\t\t\tlet list = [\"牌堆顶三张牌\"],\r\n\t\t\t\t\tlist2 = [\"选项一\"],\r\n\t\t\t\t\thd = [];\r\n\t\t\t\tif (ui.discardPile.childNodes.length > 2) {\r\n\t\t\t\t\tlist.add(\"弃牌堆顶三张牌\");\r\n\t\t\t\t\tlist2.add(\"选项二\");\r\n\t\t\t\t} else list.add('<span style=\"opacity:0.5\">弃牌堆顶三张牌(不可选:弃牌堆牌数小于3）</span>');\r\n\t\t\t\tfor (var i of game.players) {\r\n\t\t\t\t\tif (get.distance(player, i) > 1) continue;\r\n\t\t\t\t\tif (i.countCards(\"h\") < 1) continue;\r\n\t\t\t\t\tif (i == player) continue;\r\n\t\t\t\t\thd = hd.concat(i.getCards(\"h\"));\r\n\t\t\t\t}\r\n\t\t\t\tif (hd.length > 0) {\r\n\t\t\t\t\tlist.add(\"与你距离不大于1的其他角色的手牌\");\r\n\t\t\t\t\tlist2.add(\"选项三\");\r\n\t\t\t\t} else list.add('<span style=\"opacity:0.5\">与你距离不大于1的其他角色的手牌(不可选:你距离不大于1的其他角色没有手牌）</span>');\r\n\t\t\t\tconst { control } = await player\r\n\t\t\t\t\t.chooseControl(list2, \"cancel2\")\r\n\t\t\t\t\t.set(\"choiceList\", list)\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\tvar list = _status.event.list,\r\n\t\t\t\t\t\t\tplayer = _status.event.player,\r\n\t\t\t\t\t\t\thd = _status.event.hd;\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tgame.countPlayer(current => {\r\n\t\t\t\t\t\t\t\treturn player != current && get.distance(player, current) <= 1 && get.distance(player, current) < 0;\r\n\t\t\t\t\t\t\t}) < 1 ||\r\n\t\t\t\t\t\t\thd.length < 3\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\tlist.remove(\"选项三\");\r\n\t\t\t\t\t\tif (list.length == 0) return \"cancel2\";\r\n\t\t\t\t\t\treturn list.randomGet();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"list\", list2)\r\n\t\t\t\t\t.set(\"hd\", hd)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!control || control == \"cancel2\") {\r\n\t\t\t\t\tevt.goto(0);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar cards = [];\r\n\t\t\t\tswitch (control) {\r\n\t\t\t\t\tcase \"选项一\":\r\n\t\t\t\t\t\tcards = get.cards(3, true);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"选项二\":\r\n\t\t\t\t\t\tvar num = 3;\r\n\t\t\t\t\t\twhile (num--) {\r\n\t\t\t\t\t\t\tif (ui.discardPile.hasChildNodes() == false) {\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar cardx = ui.discardPile.removeChild(ui.discardPile.firstChild);\r\n\t\t\t\t\t\t\tcardx.original = \"d\";\r\n\t\t\t\t\t\t\tcards.push(cardx);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (let i = cards.length - 1; i >= 0; i--) {\r\n\t\t\t\t\t\t\tui.discardPile.insertBefore(cards[i], ui.discardPile.firstChild);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"选项三\":\r\n\t\t\t\t\t\tcards = hd;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tconst { links } = await player\r\n\t\t\t\t\t.chooseButton([\"【钙化】:选择要\" + (evt.name == \"chooseToUse\" ? \"使用\" : \"打出\") + \"的牌\", cards])\r\n\t\t\t\t\t.set(\"filterButton\", function (button) {\r\n\t\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\t\tevent = _status.event;\r\n\t\t\t\t\t\treturn _status.event.cards.includes(button.link);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\r\n\t\t\t\t\t\t\"cards\",\r\n\t\t\t\t\t\tcards.filter(function (card) {\r\n\t\t\t\t\t\t\tif (get.type(card) != \"basic\") return false;\r\n\t\t\t\t\t\t\treturn evt.filterCard(card, evt.player, evt);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"ai\", function (button) {\r\n\t\t\t\t\t\tvar evt = _status.event.getParent(3);\r\n\t\t\t\t\t\tif (evt && evt.ai) {\r\n\t\t\t\t\t\t\tvar tmp = _status.event;\r\n\t\t\t\t\t\t\t_status.event = evt;\r\n\t\t\t\t\t\t\tvar result = (evt.ai || event.ai1)(button.link, _status.event.player, evt);\r\n\t\t\t\t\t\t\t_status.event = tmp;\r\n\t\t\t\t\t\t\treturn result;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!links) {\r\n\t\t\t\t\tevt.goto(0);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar card = links[0],\r\n\t\t\t\t\tname = links[0].name;\r\n\t\t\t\tif (_status.currentPhase == player)\r\n\t\t\t\t\tplayer.addTempSkill(\"newgaihuamrfz_ban\", {\r\n\t\t\t\t\t\tglobal: \"phaseBeginStart\",\r\n\t\t\t\t\t});\r\n\t\t\t\tif (evt.name == \"chooseToUse\") {\r\n\t\t\t\t\tgame.broadcastAll(\r\n\t\t\t\t\t\tfunction (result, name) {\r\n\t\t\t\t\t\t\tlib.skill.newgaihuamrfz_backup.viewAs = {\r\n\t\t\t\t\t\t\t\tname: name,\r\n\t\t\t\t\t\t\t\tcards: [result],\r\n\t\t\t\t\t\t\t\tisCard: true,\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcard,\r\n\t\t\t\t\t\tname\r\n\t\t\t\t\t);\r\n\t\t\t\t\tvar evt = event.getParent(2);\r\n\t\t\t\t\tevt.set(\"_backupevent\", \"newgaihuamrfz_backup\");\r\n\t\t\t\t\tevt.set(\"openskilldialog\", \"请选择\" + get.translation(card) + \"的目标\");\r\n\t\t\t\t\tevt.backup(\"newgaihuamrfz_backup\");\r\n\t\t\t\t\tplayer.logSkill(\"gaihuamrfz\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdelete evt.result.skill;\r\n\t\t\t\t\tdelete evt.result.used;\r\n\t\t\t\t\tevt.result.card = get.autoViewAs(card);\r\n\t\t\t\t\tevt.result.cards = [card];\r\n\t\t\t\t\tplayer.logSkill(\"gaihuamrfz\");\r\n\t\t\t\t\tevt.redo();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tevt.goto(0);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget: function (card, player, target, effect) {\r\n\t\t\t\t\t\tif (get.tag(card, \"respondShan\")) return 0.7;\r\n\t\t\t\t\t\tif (get.tag(card, \"respondSha\")) return 0.7;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\torder: 11,\r\n\t\t\t\trespondShan: true,\r\n\t\t\t\trespondSha: true,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: function (player) {\r\n\t\t\t\t\t\tif (_status.event.dying) return get.attitude(player, _status.event.dying);\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tnewgaihuamrfz_backup: {\r\n\t\t\tsourceSkill: \"newgaihuamrfz\",\r\n\t\t\tprecontent: function () {\r\n\t\t\t\tdelete event.result.skill;\r\n\t\t\t\tvar name = event.result.card.name,\r\n\t\t\t\t\tcards = event.result.card.cards.slice(0);\r\n\t\t\t\tevent.result.cards = cards;\r\n\t\t\t\tvar rcard = cards[0],\r\n\t\t\t\t\tcard;\r\n\t\t\t\tif (rcard.name == name) card = get.autoViewAs(rcard);\r\n\t\t\t\telse card = get.autoViewAs({ name, isCard: true });\r\n\t\t\t\tevent.result.card = card;\r\n\t\t\t},\r\n\t\t\tfilterCard: function () {\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tselectCard: -1,\r\n\t\t},\r\n\t\tpanshimrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\ttargetEnabled: function (card, player, target) {\r\n\t\t\t\t\tfor (var i of game.players) {\r\n\t\t\t\t\t\tif (i.getHistory(\"useCard\").length > 0) return;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.getHistory(\"useCard\").length > 1) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tevent.card &&\r\n\t\t\t\t\t(get.type2(event.card) == \"trick\" || (get.type(event.card) == \"basic\" && ![\"shan\", \"tao\", \"jiu\", \"du\"].includes(event.card.name)))\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//新玛恩纳\r\n\t\tlianmangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\ttarget: \"useCardToTargeted\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0 && event.card && event.player != player && !player.hasSkill(\"zhanmangmrfz_ban\");\r\n\t\t\t},\r\n\t\t\tbanHs: function (event, trigger, player) {\r\n\t\t\t\tplayer.addTempSkill(\"lianmangmrfz_ban\");\r\n\t\t\t\t_status.tmpCard = trigger.card;\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.when({\r\n\t\t\t\t\t\tglobal: \"useCardAfter\",\r\n\t\t\t\t\t\tplayer: \"dying\",\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.filter((event, player) => {\r\n\t\t\t\t\t\treturn event.card == _status.tmpCard || event.name == \"dying\";\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tplayer.removeSkill(\"lianmangmrfz_ban\");\r\n\t\t\t\t\t\tdelete _status.tmpCard;\r\n\t\t\t\t\t});\r\n\t\t\t\t// .emb({ firstDo: true });\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet num = get.cardNameLength(trigger.card);\r\n\t\t\t\tconst { cards } = await player\r\n\t\t\t\t\t.chooseCard(`【敛芒】:请重铸至多${get.cnNumber(num)}张牌`, [0, num], true)\r\n\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\tif (get.tag(card, \"damage\")) return 10 - get.value(card);\r\n\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"filterCard\", card => player.canRecast(card))\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards || cards.length == 0) {\r\n\t\t\t\t\tlib.skill.lianmangmrfz.banHs(event, trigger, player);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet hs = player.getCards(\"h\");\r\n\t\t\t\tawait player.recast(cards, undefined, undefined);\r\n\t\t\t\tif (cards.filter(i => get.tag(i, \"damage\")).length > 0) player.draw();\r\n\t\t\t\tif (hs.isSubset(cards)) trigger.player.damage();\r\n\t\t\t\tlib.skill.lianmangmrfz.banHs(event, trigger, player);\r\n\t\t\t},\r\n\t\t\tgroup: [\"lianmangmrfz_cancel\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardEnabled2: function (card, player) {\r\n\t\t\t\t\t\t\tif (get.position(card) == \"h\") return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tcancel: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\taudio: \"lianmangmrfz\",\r\n\t\t\t\t\ttrigger: { source: \"damageBefore\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn !player.hasSkill(\"zhanmangmrfz_ban\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet num = trigger.num;\r\n\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t\tlet list = [\"选项一\"];\r\n\t\t\t\t\t\tlet chooseList = [`摸${get.cnNumber(num)}张牌`, `回复${get.cnNumber(num)}点体力`];\r\n\t\t\t\t\t\tif (player.getDamagedHp() > 0) {\r\n\t\t\t\t\t\t\tlist.push(\"选项二\");\r\n\t\t\t\t\t\t} else chooseList[1] = '<span style=\"opacity:0.5\">' + chooseList[2] + \"（不可选：已损失体力值为零）</span>\";\r\n\t\t\t\t\t\tconst { control } =\r\n\t\t\t\t\t\t\tlist.length == 1\r\n\t\t\t\t\t\t\t\t? player.draw(num)\r\n\t\t\t\t\t\t\t\t: await player\r\n\t\t\t\t\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t\t\t\t\t.set(\"choiceList\", chooseList)\r\n\t\t\t\t\t\t\t\t\t\t.set(\"prompt\", \"【敛芒】:请选择一项\")\r\n\t\t\t\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\tvar list = _status.event.list;\r\n\t\t\t\t\t\t\t\t\t\t\tif (list.includes(\"选项二\")) return \"选项二\";\r\n\t\t\t\t\t\t\t\t\t\t\treturn \"选项一\";\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.set(\"list\", list)\r\n\t\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (!control) return;\r\n\t\t\t\t\t\tswitch (control) {\r\n\t\t\t\t\t\t\tcase \"选项一\":\r\n\t\t\t\t\t\t\t\tplayer.draw(num);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase \"选项二\":\r\n\t\t\t\t\t\t\t\tplayer.recover(num);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 0.8,\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget: function (card, player, target) {\r\n\t\t\t\t\t\tif (get.tag(card, \"damage\")) return [0, -999999];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhanmangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > player.getHandcardLimit();\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\tvar num = Math.min(player.maxHp, player.countCards(\"h\") - player.getHandcardLimit());\r\n\t\t\t\treturn `【展芒】:你可以摸${get.cnNumber(num)}张牌、本回合使用【杀】的次数+${num}，且本回合【敛芒】失效`;\r\n\t\t\t},\r\n\t\t\tcontent() {\r\n\t\t\t\tvar num = Math.min(player.maxHp, player.countCards(\"h\") - player.getHandcardLimit());\r\n\t\t\t\tplayer.draw(num);\r\n\t\t\t\tplayer.addMark(\"zhanmangmrfz_add\", num, false);\r\n\t\t\t\tplayer.addTempSkill(\"zhanmangmrfz_add\", {\r\n\t\t\t\t\tplayer: \"phaseEnd\",\r\n\t\t\t\t});\r\n\t\t\t\tplayer.addTempSkill(\"zhanmangmrfz_ban\", {\r\n\t\t\t\t\tplayer: \"phaseEnd\",\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\t\t\treturn `·【敛芒】失效<br>·本回合使用【杀】的次数+${player.countMark(\"zhanmangmrfz_add\")}`;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tadd: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tvar count = player.countMark(\"zhanmangmrfz_add\");\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num + count;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: function () {\r\n\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\tnum = player.countCards(\"h\") - player.getHandcardLimit();\r\n\t\t\t\t\treturn 1 + Math.max(0.2, num * 0.2);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txingyimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"phaseJieshuBegin\" },\r\n\t\t\tgetDamagedTarget: function (event, player) {\r\n\t\t\t\tlet list = [];\r\n\t\t\t\tfor (var i of game.players) {\r\n\t\t\t\t\tif (player == i) continue;\r\n\t\t\t\t\tlet history = i.getHistory(\"damage\");\r\n\t\t\t\t\tfor (var j = 0; j < history.length; j++) {\r\n\t\t\t\t\t\tlet damaged = history[j].player;\r\n\t\t\t\t\t\tlist.push(damaged);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn list;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar list = lib.skill.xingyimrfz.getDamagedTarget(event, player);\r\n\t\t\t\treturn list.length > 0 && _status.currentPhase != player;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet list = lib.skill.xingyimrfz.getDamagedTarget(event, player);\r\n\t\t\t\tconst { targets } = await player\r\n\t\t\t\t\t.chooseTarget(\"【行义】:你可以受到一点伤害并令一名本回合受到过伤害的其他角色回复一点体力\")\r\n\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\tvar list = _status.event.list;\r\n\t\t\t\t\t\treturn list.includes(target);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\tif (player.hp < 2 && player.countCards(\"h\", \"tao\") + player.countCards(\"h\", \"jiu\") < 1) return 0;\r\n\t\t\t\t\t\treturn get.attitude(target, player) > 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"list\", list)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!targets) return;\r\n\t\t\t\ttargets[0].recover();\r\n\t\t\t\tplayer.damage(\"nosource\");\r\n\t\t\t\tplayer.logSkill(\"xingyimrfz\", targets[0]);\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//左乐\r\n\t\tqikumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"gainBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") == 0 && event.getParent(2).name != \"qikumrfz\";\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tcontent() {\r\n\t\t\t\tvar num = player.maxHp - trigger.cards.length;\r\n\t\t\t\tplayer.draw(num);\r\n\t\t\t},\r\n\t\t},\r\n\t\t/** @type { Skill } */\r\n\t\tbingzhumrfz: {\r\n\t\t\tmarktext: \"司\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"司\",\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t\tcontent: \"expansion\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar suit = [];\r\n\t\t\t\tfor (var i of player.getCards(\"h\")) {\r\n\t\t\t\t\tif (suit.includes(get.suit(i))) continue;\r\n\t\t\t\t\tsuit.push(get.suit(i));\r\n\t\t\t\t}\r\n\t\t\t\tif (suit.length == 0) return;\r\n\t\t\t\tconst { control } = await player\r\n\t\t\t\t\t.chooseControl(suit, \"cancel2\")\r\n\t\t\t\t\t.set(\"prompt\", \"【秉烛】:请选择一种花色\")\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\tvar suit = _status.event.suit;\r\n\t\t\t\t\t\treturn suit.randomGet();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"suit\", suit)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!control || control == \"cancel2\") {\r\n\t\t\t\t\tif (control == \"cancel2\") {\r\n\t\t\t\t\t\tplayer.setSkillCount(\"bingzhumrfz\", -1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar hs = player.getCards(\"h\", card => {\r\n\t\t\t\t\treturn get.suit(card) == control;\r\n\t\t\t\t});\r\n\t\t\t\tif (hs.length == 0) return;\r\n\t\t\t\tlet list = [];\r\n\t\t\t\twhile (hs.length) {\r\n\t\t\t\t\tconst { cards } = await player\r\n\t\t\t\t\t\t.chooseCard(true, `【秉烛】:请分配第${get.cnNumber(list.length + 1)}组手牌`)\r\n\t\t\t\t\t\t.set(\"selectCard\", function () {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tvar num = game.countPlayer(current => current != player) - (list.length + 1) > 0 ? 1 : hs.length;\r\n\t\t\t\t\t\t\treturn [num, Infinity];\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\tif (!ui.selected.cards) return 1;\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tgame.countPlayer(current => {\r\n\t\t\t\t\t\t\t\t\treturn current != player && get.attitude(current, player) < 0;\r\n\t\t\t\t\t\t\t\t}) < 2\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\tfor (var i of ui.selected.cards) {\r\n\t\t\t\t\t\t\t\tif (get.suit(i) == get.suit(card)) return [-1, -1, 1, 1].randomGet();\r\n\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"filterCard\", card => {\r\n\t\t\t\t\t\t\tvar hs = _status.event.hs;\r\n\t\t\t\t\t\t\treturn hs.includes(card);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"hs\", hs)\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (!cards) continue;\r\n\t\t\t\t\tlist.push([cards]);\r\n\t\t\t\t\ths.removeArray(cards);\r\n\t\t\t\t}\r\n\t\t\t\tlet count = list.length,\r\n\t\t\t\t\tlist2 = [];\r\n\t\t\t\twhile (count) {\r\n\t\t\t\t\tconst { targets } = await player\r\n\t\t\t\t\t\t.chooseTarget(true, `【秉烛】:请将${get.translation(list[list2.length])}置于一名其他角色的武将牌上`)\r\n\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\treturn get.attitude(player, target) < 0;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"filterTarget\", lib.filter.notMe)\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tcount--;\r\n\t\t\t\t\tif (!targets) continue;\r\n\t\t\t\t\tlist2.push(targets[0]);\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0; i < list2.length; i++) {\r\n\t\t\t\t\tlist2[i].addToExpansion(list[i][0], list2[i], \"giveAuto\").gaintag.add(\"bingzhumrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"bingzhumrfz_clear\", \"bingzhumrfz_eff\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"useCardToTargeted\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar cards = event.player.getExpansions(\"bingzhumrfz\");\r\n\t\t\t\t\t\tif (!cards.length || !event.card) return false;\r\n\t\t\t\t\t\tif (get.type2(event.card) != \"trick\" && get.type(event.card) != \"basic\") return false;\r\n\t\t\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\t\t\tif (get.name(i) == get.name(event.card) || get.suit(i) == get.suit(event.card)) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar cards = trigger.player\r\n\t\t\t\t\t\t\t.getExpansions(\"bingzhumrfz\")\r\n\t\t\t\t\t\t\t.filter(i => get.name(i) == get.name(trigger.card) || get.suit(i) == get.suit(trigger.card));\r\n\t\t\t\t\t\tconst {\r\n\t\t\t\t\t\t\tresult: { bool, links },\r\n\t\t\t\t\t\t} = await player.chooseCardButton(\"【秉烛】:你可以弃置其一张‘司’并令此牌对一名目标角色无效\", cards).set(\"ai\", () => {\r\n\t\t\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\t\t\tevent = _status.event.getTrigger(),\r\n\t\t\t\t\t\t\t\tfriend = game.filterPlayer(current => current == player || get.attitude(current, player) > 0);\r\n\t\t\t\t\t\t\tfor (var i of event.targets) {\r\n\t\t\t\t\t\t\t\tif (friend.includes(i)) return 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (!bool) return;\r\n\t\t\t\t\t\tconst { targets } = await player\r\n\t\t\t\t\t\t\t.chooseTarget(\"【秉烛】:请选择一名目标角色，然后此牌对该角色无效\", true)\r\n\t\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\treturn get.attitude(target, player) > 0;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\r\n\t\t\t\t\t\t\t\tvar targets = _status.event.targets;\r\n\t\t\t\t\t\t\t\treturn targets.includes(target);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"targets\", trigger.targets)\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (!targets) return;\r\n\t\t\t\t\t\ttrigger.getParent().excluded.add(targets[0]);\r\n\t\t\t\t\t\ttrigger.player.loseToDiscardpile(links);\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\tplayer.logSkill(\"bingzhumrfz\", targets[0]);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"dieAfter\" },\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\tfor (var i of game.players) {\r\n\t\t\t\t\t\t\tvar cards = i.getExpansions(\"bingzhumrfz\");\r\n\t\t\t\t\t\t\tif (cards.length) i.loseToDiscardpile(cards);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//新山\r\n\t\tzhefumrfz: {\r\n\t\t\taudio: \"zhuangtimrfz\",\r\n\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"h\", card => get.tag(card, \"damage\")) > 0;\r\n\t\t\t},\r\n\t\t\tprompt(event, player) {\r\n\t\t\t\treturn `【蛰伏】:是否将手牌中所有带有伤害类标签的牌置入弃牌堆或牌堆顶并摸等量的牌？`;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet cards = player.getCards(\"h\", card => get.tag(card, \"damage\"));\r\n\t\t\t\tif (!cards.length) return;\r\n\t\t\t\tconst { moved } = await player\r\n\t\t\t\t\t.chooseToMove()\r\n\t\t\t\t\t.set(\"list\", [[\"牌堆底\", cards], [\"弃牌堆\"]])\r\n\t\t\t\t\t.set(\"processAI\", list => {\r\n\t\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\t\tcards = list[0][1],\r\n\t\t\t\t\t\t\tcanUse = cards.filter(i => player.canUseToAnyone(i)),\r\n\t\t\t\t\t\t\tbottom = [],\r\n\t\t\t\t\t\t\tdisPile = [];\r\n\t\t\t\t\t\tvar red = 0,\r\n\t\t\t\t\t\t\tblack = 0;\r\n\t\t\t\t\t\tfor (var i of canUse) {\r\n\t\t\t\t\t\t\tvar color = get.color(i);\r\n\t\t\t\t\t\t\tif (!color) continue;\r\n\t\t\t\t\t\t\telse if (color == \"red\") red += get.value(i);\r\n\t\t\t\t\t\t\telse black += get.value(i);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (red > black) bottom = canUse.slice().filter(i => get.color(i) == \"red\");\r\n\t\t\t\t\t\telse bottom = canUse.slice().filter(i => get.color(i) == \"black\");\r\n\t\t\t\t\t\tbottom.sort(function (a, b) {\r\n\t\t\t\t\t\t\treturn get.value(b, player) - get.value(a, player);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tdisPile = cards.slice().filter(i => !bottom.includes(i));\r\n\t\t\t\t\t\treturn [bottom, disPile];\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!moved) return;\r\n\t\t\t\tvar bottom = moved[0],\r\n\t\t\t\t\tdisPile = moved[1];\r\n\t\t\t\tconsole.log(moved);\r\n\t\t\t\tif (disPile.length) player.loseToDiscardpile(disPile);\r\n\t\t\t\tif (bottom.length) {\r\n\t\t\t\t\tgame.log(player, \"将\", get.cnNumber(bottom.length), \"置入了牌堆底\");\r\n\t\t\t\t\tfor (var i of bottom) ui.cardPile.appendChild(i);\r\n\t\t\t\t\tplayer.$throw(bottom.length, 1000);\r\n\t\t\t\t}\r\n\t\t\t\tawait player.draw(cards.length);\r\n\t\t\t},\r\n\t\t},\r\n\t\tyubianmrfz: {\r\n\t\t\taudio: \"julimrfz\",\r\n\t\t\ttrigger: { player: \"phaseJieshuBegin\" },\r\n\t\t\tprompt(event, player) {\r\n\t\t\t\treturn `【狱变】:你可以使用牌堆顶的牌（目标必须合法），若你因此使用的牌颜色均相同，你重复这个流程`;\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn current != player && player.canUse(\"sha\", current) && get.attitude(player, current) < 0;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet cardx = [],\r\n\t\t\t\t\tcolor;\r\n\t\t\t\twhile (true) {\r\n\t\t\t\t\tvar card = get.bottomCards()[0];\r\n\t\t\t\t\tplayer.$throw(card, null);\r\n\t\t\t\t\tif (!player.hasUseTarget(card)) return;\r\n\t\t\t\t\tconst result = await player.chooseUseTarget(card, `【狱变】:请选择${get.translation(card)}的目标`);\r\n\t\t\t\t\tif (!result) return;\r\n\t\t\t\t\tvar cards = result.cards;\r\n\t\t\t\t\tfor (var i of cards) cardx.push(i);\r\n\t\t\t\t\tcolor = get.color(cards[0]);\r\n\t\t\t\t\tfor (var i of cardx) {\r\n\t\t\t\t\t\tif (get.color(i) != color) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcolor = get.color(i);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//新空弦\r\n\t\tsanyimrfz: {\r\n\t\t\taudio: \"lieshimrfz\",\r\n\t\t\ttrigger: { player: \"useCard2\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (!event.card) return false;\r\n\t\t\t\tif (get.name(event.card) != \"sha\" || get.number(event.card) == null) return false;\r\n\t\t\t\treturn event.targets && event.targets.length == 1;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { targets } = await player\r\n\t\t\t\t\t.chooseTarget()\r\n\t\t\t\t\t.set(\"forced\", true)\r\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\r\n\t\t\t\t\t\tif (target == player || _status.event.targets.includes(target) || !player.canUse(_status.event.cardx, target, false))\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\tvar selected = ui.selected.targets,\r\n\t\t\t\t\t\t\tbase = _status.event.targetx.hp;\r\n\t\t\t\t\t\tvar total = Object.values(selected).reduce((accumulator, currentValue) => {\r\n\t\t\t\t\t\t\tif (currentValue.hasOwnProperty(\"hp\")) {\r\n\t\t\t\t\t\t\t\treturn accumulator + currentValue.hp;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn accumulator;\r\n\t\t\t\t\t\t}, 0);\r\n\t\t\t\t\t\treturn target.hp + total + base <= _status.event.cardx.number;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"prompt\", `【散逸】:你可以额外指定任意名体力值之和不超过${trigger.card.number - trigger.targets[0].hp}的角色`)\r\n\t\t\t\t\t.set(\"selectTarget\", [0, Infinity])\r\n\t\t\t\t\t.set(\"complexTarget\", true)\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\treturn get.effect(target, _status.event.cardx, _status.event.player, _status.event.player) > 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"targets\", trigger.targets)\r\n\t\t\t\t\t.set(\"targetx\", trigger.targets[0])\r\n\t\t\t\t\t.set(\"cardx\", trigger.card)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!targets) return false;\r\n\t\t\t\tfor (var i of targets) {\r\n\t\t\t\t\ttrigger.targets.push(i);\r\n\t\t\t\t\tplayer.line(i);\r\n\t\t\t\t}\r\n\t\t\t\tplayer.logSkill(\"sanyimrfz\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tbaofengmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.card && get.name(event.card) == \"sha\" && get.color(event.card) != \"none\";\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { bool } = await player\r\n\t\t\t\t\t.chooseUseTarget(\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\t\tsuit: \"none\",\r\n\t\t\t\t\t\t\tnumber: trigger.card.number,\r\n\t\t\t\t\t\t\tnature: trigger.card.nature,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfalse,\r\n\t\t\t\t\t\tfalse\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"prompt\", `【追矢】:你可以视为使用一张无色且点数为${trigger.card.number}的${get.translation(trigger.card.nature)}【杀】`)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!bool) return;\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//ela 艾拉\r\n\t\tzuzhimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tevent.card &&\r\n\t\t\t\t\tget.color(event.card) != \"none\" &&\r\n\t\t\t\t\tevent.player &&\r\n\t\t\t\t\tevent.player.isIn() &&\r\n\t\t\t\t\t(!event.player.storage.zuzhimrfz || !event.player.storage.zuzhimrfz.includes(get.color(event.card)))\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tprompt(event, player) {\r\n\t\t\t\treturn `【阻滞】:是否令${event.player == player ? \"你\" : get.translation(event.player)}本回合无法使用或打出${get.translation(get.color(event.card))}的牌？`;\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\treturn get.attitude(event.player, player) < 0;\r\n\t\t\t},\r\n\t\t\tcontent() {\r\n\t\t\t\tvar target = trigger.player;\r\n\t\t\t\tif (!target.storage.zuzhimrfz_ban) target.storage.zuzhimrfz_ban = [];\r\n\t\t\t\ttarget.storage.zuzhimrfz_ban.add(get.color(trigger.card));\r\n\t\t\t\ttarget.addTempSkill(\"zuzhimrfz_ban\", {\r\n\t\t\t\t\tglobal: \"phaseEnd\",\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\t\t\treturn `本回合不能使用或打出${get.translation(player.storage.zuzhimrfz_ban)}的牌`;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardEnabled: function (card, player) {\r\n\t\t\t\t\t\t\tif (player.getStorage(\"zuzhimrfz_ban\").includes(get.color(card))) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcardRespondable: function (card, player) {\r\n\t\t\t\t\t\t\tif (player.getStorage(\"zuzhimrfz_ban\").includes(get.color(card))) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcardSavable: function (card, player) {\r\n\t\t\t\t\t\t\tif (player.getStorage(\"zuzhimrfz_ban\").includes(get.color(card))) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tleimingmrfz: {\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\tif (game.me == player) {\r\n\t\t\t\t\t\treturn `记录的内容：${get.translation(player.storage.leimingmrfz)}`;\r\n\t\t\t\t\t} else return `有${player.storage.leimingmrfz.length}个记录的内容`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.storage.leimingmrfz = [];\r\n\t\t\t\tvar list1 = [],\r\n\t\t\t\t\tlist2 = [],\r\n\t\t\t\t\tlist3 = [],\r\n\t\t\t\t\tlist4 = [];\r\n\t\t\t\tfor (var i = 0; i < lib.inpile.length; i++) {\r\n\t\t\t\t\tvar type = get.type(lib.inpile[i]);\r\n\t\t\t\t\tif (type == \"basic\") {\r\n\t\t\t\t\t\tlist1.push([\"基本\", \"\", lib.inpile[i]]);\r\n\t\t\t\t\t} else if (type == \"trick\") {\r\n\t\t\t\t\t\tlist2.push([\"锦囊\", \"\", lib.inpile[i]]);\r\n\t\t\t\t\t} else if (type == \"delay\") {\r\n\t\t\t\t\t\tlist3.push([\"锦囊\", \"\", lib.inpile[i]]);\r\n\t\t\t\t\t} else if (type == \"equip\") {\r\n\t\t\t\t\t\tlist3.push([\"装备\", \"\", lib.inpile[i]]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconst { links } = await player\r\n\t\t\t\t\t.chooseButton([get.prompt(\"leimingmrfz\"), [list1.concat(list2).concat(list3).concat(list4), \"vcard\"]])\r\n\t\t\t\t\t.set(\"filterButton\", function (button) {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\tif (player.storage.leimingmrfz.includes(button.link[2])) return false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", function (button) {\r\n\t\t\t\t\t\tvar rand = _status.event.rand;\r\n\t\t\t\t\t\tswitch (button.link[2]) {\r\n\t\t\t\t\t\t\tcase \"sha\":\r\n\t\t\t\t\t\t\t\treturn 5 + rand[1];\r\n\t\t\t\t\t\t\tcase \"tao\":\r\n\t\t\t\t\t\t\t\treturn 4 + rand[2];\r\n\t\t\t\t\t\t\tcase \"lebu\":\r\n\t\t\t\t\t\t\t\treturn 3 + rand[3];\r\n\t\t\t\t\t\t\tcase \"shan\":\r\n\t\t\t\t\t\t\t\treturn 4.5 + rand[4];\r\n\t\t\t\t\t\t\tcase \"wuzhong\":\r\n\t\t\t\t\t\t\t\treturn 4 + rand[5];\r\n\t\t\t\t\t\t\tcase \"shunshou\":\r\n\t\t\t\t\t\t\t\treturn 3 + rand[6];\r\n\t\t\t\t\t\t\tcase \"nanman\":\r\n\t\t\t\t\t\t\t\treturn 2 + rand[7];\r\n\t\t\t\t\t\t\tcase \"wanjian\":\r\n\t\t\t\t\t\t\t\treturn 2 + rand[8];\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\treturn rand[0];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"rand\", [\r\n\t\t\t\t\t\tMath.random(),\r\n\t\t\t\t\t\tMath.random(),\r\n\t\t\t\t\t\tMath.random(),\r\n\t\t\t\t\t\tMath.random(),\r\n\t\t\t\t\t\tMath.random(),\r\n\t\t\t\t\t\tMath.random(),\r\n\t\t\t\t\t\tMath.random(),\r\n\t\t\t\t\t\tMath.random(),\r\n\t\t\t\t\t\tMath.random(),\r\n\t\t\t\t\t])\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!links) return;\r\n\t\t\t\tplayer.logSkill(\"leimingmrfz\");\r\n\t\t\t\tplayer.storage.leimingmrfz.add(links[0][2]);\r\n\t\t\t\tvar { control } = await player\r\n\t\t\t\t\t.chooseControl(lib.suit)\r\n\t\t\t\t\t.set(\"prompt\", \"【雷鸣】:请选择一种花色\")\r\n\t\t\t\t\t.set(\"ai\", () => lib.suit.randomGet())\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!control) return;\r\n\t\t\t\tplayer.storage.leimingmrfz.add(control);\r\n\t\t\t\tvar { control } = await player\r\n\t\t\t\t\t.chooseControl(\"basic\", \"trick\", \"equip\")\r\n\t\t\t\t\t.set(\"prompt\", \"【雷鸣】:请选择一种类型\")\r\n\t\t\t\t\t.set(\"ai\", () => [\"basic\", \"basic\", \"basic\", \"trick\", \"trick\", \"equip\"].randomGet())\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!control) return;\r\n\t\t\t\tplayer.storage.leimingmrfz.add(control);\r\n\t\t\t},\r\n\t\t\tgroup: \"leimingmrfz_eff\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\taudio: \"leimingmrfz\",\r\n\t\t\t\t\ttrigger: { global: \"useCard\" },\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tvar storage = player.storage.leimingmrfz,\r\n\t\t\t\t\t\t\tcard = event.card;\r\n\t\t\t\t\t\tif (player.storage.leimingmrfz_eff) return false;\r\n\t\t\t\t\t\tif (!storage || storage.length == 0) return false;\r\n\t\t\t\t\t\tif (player == event.player) return false;\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tstorage.includes(get.suit(card, event.player)) ||\r\n\t\t\t\t\t\t\tstorage.includes(get.name(card, event.player)) ||\r\n\t\t\t\t\t\t\tstorage.includes(get.type2(card, event.player))\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt(event, player) {\r\n\t\t\t\t\t\treturn `【雷鸣】:是否视为对${get.translation(event.player)}使用一张任意颜色的雷【杀】？`;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck(event, player) {\r\n\t\t\t\t\t\tif (get.attitude(event.player, player) > 0) return false;\r\n\t\t\t\t\t\treturn get.effect(event.player, { name: \"sha\", nature: \"thunder\" }, player, player) > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.leimingmrfz_eff = true;\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.when({\r\n\t\t\t\t\t\t\t\tplayer: \"leimingmrfz_effAfter\",\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\tdelete player.storage.leimingmrfz_eff;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// .emb({ firstDo: true });\r\n\t\t\t\t\t\tvar target = trigger.player;\r\n\t\t\t\t\t\t// if (target.countDiscardableCards(player, 'he')) player.discardPlayerCard('he', true, target)\r\n\t\t\t\t\t\t//     .set('target', target)\r\n\t\t\t\t\t\t//     .set('ai', lib.card.guohe.ai.button);\r\n\t\t\t\t\t\tif (player.canUse({ name: \"sha\", nature: \"thunder\" }, target, false)) {\r\n\t\t\t\t\t\t\tvar { control } = await player\r\n\t\t\t\t\t\t\t\t.chooseControl(\"red\", \"black\")\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", `【雷鸣】:请选择使用雷【杀】的颜色`)\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\t\t\t\t\ttarget = _status.event.target;\r\n\t\t\t\t\t\t\t\t\tvar red = get.effect(\r\n\t\t\t\t\t\t\t\t\t\t\ttarget,\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tnature: \"thunder\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor: \"red\",\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\tplayer,\r\n\t\t\t\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\tblack = get.effect(\r\n\t\t\t\t\t\t\t\t\t\t\ttarget,\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tnature: \"thunder\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor: \"black\",\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\tplayer,\r\n\t\t\t\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\tif (red > black) return 0;\r\n\t\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"target\", target)\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\tif (!control) return;\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tplayer.canUse(\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\t\t\t\t\tnature: \"thunder\",\r\n\t\t\t\t\t\t\t\t\t\tcolor: control,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\ttarget,\r\n\t\t\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tplayer.useCard(\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\t\t\t\t\tnature: \"thunder\",\r\n\t\t\t\t\t\t\t\t\t\tcolor: control,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\ttarget,\r\n\t\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar list = [],\r\n\t\t\t\t\t\t\tstorage = player.storage.leimingmrfz,\r\n\t\t\t\t\t\t\tcard = trigger.card;\r\n\t\t\t\t\t\tif (storage.includes(get.name(card, target))) list.push(get.name(card, target));\r\n\t\t\t\t\t\tif (storage.includes(get.suit(card, target))) list.push(get.suit(card, target));\r\n\t\t\t\t\t\tif (storage.includes(get.type2(card, target))) list.push(get.type2(card, target));\r\n\t\t\t\t\t\tvar { control } =\r\n\t\t\t\t\t\t\tlist.length == 1\r\n\t\t\t\t\t\t\t\t? { control: list[0] }\r\n\t\t\t\t\t\t\t\t: await player\r\n\t\t\t\t\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t\t\t\t\t.set(\"prompt\", `【雷鸣】:请选择清除一个记录`)\r\n\t\t\t\t\t\t\t\t\t\t.set(\"list\", list)\r\n\t\t\t\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\tvar list = _status.event.list;\r\n\t\t\t\t\t\t\t\t\t\t\treturn list.randomGet();\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (!control) return;\r\n\t\t\t\t\t\tplayer.storage.leimingmrfz.remove(control);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//阿斯卡纶\r\n\t\tdunyingmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tglobalTo(from, to, distance) {\r\n\t\t\t\t\tvar cards = to.getCards(\"s\", function (card) {\r\n\t\t\t\t\t\treturn card.hasGaintag(\"dunyingmrfz\");\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (cards.length) return distance + 1;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmarktext: \"影\",\r\n\t\t\tintro: {\r\n\t\t\t\tmark: function (dialog, storage, player) {\r\n\t\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\t\treturn card.hasGaintag(\"dunyingmrfz\");\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (game.me == player) dialog.addAuto(cards);\r\n\t\t\t\t\telse return `共有${cards.length}张牌`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tonremove: function (player, skill) {\r\n\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\treturn card.hasGaintag(\"dunyingmrfz\");\r\n\t\t\t\t});\r\n\t\t\t\tif (cards.length) {\r\n\t\t\t\t\tplayer.lose(cards, ui.discardPile);\r\n\t\t\t\t\tplayer.$throw(cards, 1000);\r\n\t\t\t\t\tgame.log(cards, \"进入了弃牌堆\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseJieshuBegin\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\treturn card.hasGaintag(\"dunyingmrfz\");\r\n\t\t\t\t});\r\n\t\t\t\tif (\r\n\t\t\t\t\tplayer.countCards(\"h\", card => {\r\n\t\t\t\t\t\treturn !card.hasGaintag(\"dunyingmrfz\");\r\n\t\t\t\t\t}) < 1\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\treturn cards.length < player.maxHp;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar num = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\treturn card.hasGaintag(\"dunyingmrfz\");\r\n\t\t\t\t}).length;\r\n\t\t\t\tconst { cards } =\r\n\t\t\t\t\tplayer.countCards(\"h\", card => {\r\n\t\t\t\t\t\treturn !card.hasGaintag(\"dunyingmrfz\");\r\n\t\t\t\t\t}) +\r\n\t\t\t\t\t\tnum <=\r\n\t\t\t\t\tplayer.maxHp\r\n\t\t\t\t\t\t? { cards: player.getCards(\"h\") }\r\n\t\t\t\t\t\t: await player\r\n\t\t\t\t\t\t\t\t.chooseCard(\"h\", get.prompt(\"dunyingmrfz\"), \"将所有手牌置于武将牌上，称之为“影”\", true)\r\n\t\t\t\t\t\t\t\t.set(\"selectCard\", () => {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\t\tvar num = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\t\t\t\t\t\treturn card.hasGaintag(\"dunyingmrfz\");\r\n\t\t\t\t\t\t\t\t\t}).length;\r\n\t\t\t\t\t\t\t\t\treturn player.maxHp - num;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"filterCard\", card => {\r\n\t\t\t\t\t\t\t\t\treturn !card.hasGaintag(\"dunyingmrfz\");\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\t\tif (player.hasUseTarget(card) && !player.hasValueTarget(card)) return 0;\r\n\t\t\t\t\t\t\t\t\tif ([\"sha\", \"shan\", \"wuxie\", \"caochuan\"].includes(card.name)) return 2 + Math.random();\r\n\t\t\t\t\t\t\t\t\treturn 1 + Math.random();\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\tgame.log(player, \"将\", cards.length, \"张牌置于在武将牌上\");\r\n\t\t\t\tplayer.loseToSpecial(cards, \"dunyingmrfz\");\r\n\t\t\t\tplayer.markSkill(\"dunyingmrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"dunyingmrfz_gain\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tgain: {\r\n\t\t\t\t\taudio: \"dunyingmrfz\",\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tusable: 1,\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\t\t\treturn card.hasGaintag(\"dunyingmrfz\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (!event.cards.length) return cards.length < player.maxHp;\r\n\t\t\t\t\t\tvar position = event.card.cards.map(i => i.original);\r\n\t\t\t\t\t\treturn position.every(item => item != \"h\") && cards.length < player.maxHp;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: \"【遁影】:你可以将牌堆顶的一张牌置于你的武将牌上，称之为“影”\",\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\tvar cards = get.cards();\r\n\t\t\t\t\t\tgame.log(player, \"将一张牌置于在武将牌上\");\r\n\t\t\t\t\t\tplayer.loseToSpecial(cards, \"dunyingmrfz\");\r\n\t\t\t\t\t\tplayer.markSkill(\"dunyingmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tniximrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"phaseJieshuBegin\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.player.isIn() && event.player != player && player.canUse(\"sha\", event.player, false);\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { cards } = await player\r\n\t\t\t\t\t.chooseToUse(\r\n\t\t\t\t\t\tfunction (card, player, event) {\r\n\t\t\t\t\t\t\tif (get.name(card) != \"sha\") return false;\r\n\t\t\t\t\t\t\treturn lib.filter.filterCard.apply(this, arguments);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\"【匿袭】是否对\" + get.translation(trigger.player) + \"使用一张杀？\"\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"logSkill\", \"niximrfz\")\r\n\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\tif (target != _status.event.sourcex && !ui.selected.targets.includes(_status.event.sourcex)) return false;\r\n\t\t\t\t\t\treturn lib.filter.targetEnabled.apply(this, arguments);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"sourcex\", trigger.player)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\tvar isDamaged = player.hasHistory(\"useCard\", evt => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\tevt.getParent(2) == event &&\r\n\t\t\t\t\t\tevt.card &&\r\n\t\t\t\t\t\tevt.card.cardid &&\r\n\t\t\t\t\t\tplayer.hasHistory(\"sourceDamage\", evtx => {\r\n\t\t\t\t\t\t\treturn evtx.card && evt.card.cardid == evtx.card.cardid;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\t\t\t\tif (!isDamaged && player.isIn() && trigger.player.isIn()) {\r\n\t\t\t\t\tvar target = trigger.player,\r\n\t\t\t\t\t\ttargetx = trigger.player,\r\n\t\t\t\t\t\tlist = [];\r\n\t\t\t\t\tif (target.getNext() == player) return;\r\n\t\t\t\t\tconst { bool } = await player.chooseBool(`【匿袭】:是否将座位移到${get.translation(trigger.player)}下家？`).forResult();\r\n\t\t\t\t\tif (!bool) return;\r\n\t\t\t\t\twhile (targetx.getNext() != player) {\r\n\t\t\t\t\t\ttargetx = targetx.getNext();\r\n\t\t\t\t\t\tlist.push(targetx);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (list.length == 0) return;\r\n\t\t\t\t\tlist.reverse();\r\n\t\t\t\t\tfor (var i of list) {\r\n\t\t\t\t\t\tawait game.broadcastAll(\r\n\t\t\t\t\t\t\tfunction (target1, target2) {\r\n\t\t\t\t\t\t\t\tgame.swapSeat(target1, target2);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\ti,\r\n\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// logos 逻格斯 李狗剩\r\n\t\tbaidumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"damageEnd\",\r\n\t\t\t},\r\n\t\t\tusable: 1,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (!event.card) return false;\r\n\t\t\t\tvar num = get.cardNameLength(event.card);\r\n\t\t\t\tif (typeof num !== \"number\" || num < 1) return false;\r\n\t\t\t\treturn player.countCards(\"he\") > 0 && event.player.isIn();\r\n\t\t\t},\r\n\t\t\t// direct: true,\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tlet sourceCards = trigger.cards || undefined;\r\n\t\t\t\tconst { result } = await player\r\n\t\t\t\t\t.chooseToDiscard(\"he\")\r\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"baidumrfz\"))\r\n\t\t\t\t\t.set(\r\n\t\t\t\t\t\t\"prompt2\",\r\n\t\t\t\t\t\t`你可以弃置一张牌，${sourceCards === undefined ? \"(\" + get.translation(trigger.card) + \"无对应的实体牌)\" : \"你获得\" + get.translation(trigger.card) + \"(\" + get.translation(sourceCards) + \"),\"}然后${get.translation(trigger.player)}摸你弃置的牌与对其造成伤害的牌的字数之差的绝对值张牌。`\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\t\ttarget = _status.event.targetx,\r\n\t\t\t\t\t\t\tcardx = trigger.card,\r\n\t\t\t\t\t\t\tatt = get.attitude(player, target);\r\n\t\t\t\t\t\tif (att > 0) {\r\n\t\t\t\t\t\t\treturn Math.abs(get.cardNameLength(cardx) - get.cardNameLength(card)) - Math.floor(get.value(card) / 10);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (Math.abs(get.cardNameLength(cardx) - get.cardNameLength(card)) > cardx.cards.length) return 0;\r\n\t\t\t\t\t\t\treturn get.value(cardx.cards) - get.value(card);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"targetx\", trigger.player)\r\n\t\t\t\t\t.set(\"cardx\", trigger.card);\r\n\t\t\t\tevent.result = result;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet sourceCards = trigger.cards || undefined;\r\n\t\t\t\tlet cards = event.cards;\r\n\t\t\t\tvar gaincard = [];\r\n\t\t\t\tfor (var i of sourceCards) {\r\n\t\t\t\t\tif (get.position(i, true) == \"o\") gaincard.push(i);\r\n\t\t\t\t}\r\n\t\t\t\tif (gaincard.length > 0) player.gain(gaincard, \"gain2\");\r\n\t\t\t\tvar num = Math.abs(get.cardNameLength(trigger.card) - get.cardNameLength(cards[0]));\r\n\t\t\t\tif (num > 0) trigger.player.draw(num);\r\n\t\t\t\tplayer.line(trigger.player);\r\n\t\t\t},\r\n\t\t},\r\n\t\tyuhuimrfz: {\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = {\r\n\t\t\t\t\tdel: false,\r\n\t\t\t\t\tnames: [],\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tmark(dialog, content, player) {\r\n\t\t\t\t\tvar names = player.storage.yuhuimrfz[\"names\"];\r\n\t\t\t\t\tdialog.addText(`本回合【语汇】使用过的牌:<br>${get.translation(names)}`);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"chooseToUse\",\r\n\t\t\thiddenCard: function (player, name) {\r\n\t\t\t\treturn player.countCards(\"hes\") > 0 && !player.storage.yuhuimrfz[\"names\"].includes(name);\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.countCards(\"hes\") < 1) return false;\r\n\t\t\t\tfor (var name of lib.inpile) {\r\n\t\t\t\t\tif (player.storage.yuhuimrfz[\"names\"].includes(name)) continue;\r\n\t\t\t\t\tif (event.filterCard({ name: name, isCard: true }, player, event)) return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tchooseButton: {\r\n\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\tvar list = [];\r\n\t\t\t\t\tfor (var name of lib.inpile) {\r\n\t\t\t\t\t\tif (player.storage.yuhuimrfz.names.includes(name)) {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (event.filterCard({ name: name }, player, event)) {\r\n\t\t\t\t\t\t\tif (name == \"sha\") {\r\n\t\t\t\t\t\t\t\tlist.push([\"基本\", \"\", \"sha\"]);\r\n\t\t\t\t\t\t\t\tfor (var j of lib.inpile_nature) {\r\n\t\t\t\t\t\t\t\t\tlist.push([\"基本\", \"\", \"sha\", j]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if (get.type(name) == \"trick\") {\r\n\t\t\t\t\t\t\t\tlist.push([\"锦囊\", \"\", name]);\r\n\t\t\t\t\t\t\t} else if (get.type(name) == \"basic\") {\r\n\t\t\t\t\t\t\t\tlist.push([\"基本\", \"\", name]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} //QQQ\r\n\t\t\t\t\treturn ui.create.dialog(\"语汇\", [list, \"vcard\"]);\r\n\t\t\t\t},\r\n\t\t\t\tfilter: function (button, player) {\r\n\t\t\t\t\tvar cards = player.getCards(\"hes\"),\r\n\t\t\t\t\t\tname = button.link[2],\r\n\t\t\t\t\t\tcardsx = [];\r\n\t\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\t\tif (get.cardNameLength(i) >= get.cardNameLength(name)) cardsx.push(name);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn _status.event.getParent().filterCard({ name: name }, player, _status.event.getParent()) && cardsx.includes(name);\r\n\t\t\t\t},\r\n\t\t\t\tcheck: function (button) {\r\n\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\tif (player.countCards(\"hs\", button.link[2]) > 0) return 0;\r\n\t\t\t\t\tif (button.link[2] == \"wugu\") return;\r\n\t\t\t\t\tvar effect = player.getUseValue(button.link[2]);\r\n\t\t\t\t\tif (effect > 0) return effect;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t},\r\n\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tfilterCard(card) {\r\n\t\t\t\t\t\t\tvar needNumber = get.cardNameLength(links[0][2]);\r\n\t\t\t\t\t\t\treturn get.cardNameLength(card) >= needNumber;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\taudio: \"yuhuimrfz\",\r\n\t\t\t\t\t\tselectCard: 1,\r\n\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t\tcheck: function (card) {\r\n\t\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tposition: \"hes\",\r\n\t\t\t\t\t\tviewAs: { name: links[0][2], nature: links[0][3] },\r\n\t\t\t\t\t\tprecontent() {\r\n\t\t\t\t\t\t\tif (!player.storage.yuhuimrfz)\r\n\t\t\t\t\t\t\t\tplayer.storage.yuhuimrfz = {\r\n\t\t\t\t\t\t\t\t\tdel: false,\r\n\t\t\t\t\t\t\t\t\tnames: [],\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tplayer.storage.yuhuimrfz[\"names\"].add(lib.skill.yuhuimrfz_backup.viewAs.name);\r\n\t\t\t\t\t\t\tif (player.storage.yuhuimrfz[\"del\"] != true) {\r\n\t\t\t\t\t\t\t\tplayer.storage.yuhuimrfz[\"del\"] = true;\r\n\t\t\t\t\t\t\t\tplayer.when({ global: \"phaseEnd\" }).then(() => {\r\n\t\t\t\t\t\t\t\t\tplayer.storage.yuhuimrfz = {\r\n\t\t\t\t\t\t\t\t\t\tdel: false,\r\n\t\t\t\t\t\t\t\t\t\tnames: [],\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\treturn \"将一张牌当做\" + (get.translation(links[0][3]) || \"\") + get.translation(links[0][2]) + \"使用\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tsave: true,\r\n\t\t\t\trespondSha: true,\r\n\t\t\t\trespondShan: true,\r\n\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\tif (!player.countCards(\"hes\")) return false;\r\n\t\t\t\t\tif (tag == \"respondSha\" || tag == \"respondShan\") {\r\n\t\t\t\t\t\tif (arg == \"respond\") return false;\r\n\t\t\t\t\t\treturn !player.storage.yuhuimrfz[\"names\"].includes(tag == \"respondSha\" ? \"sha\" : \"shan\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\torder: 4,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t\tthreaten: 2.8,\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 维什戴尔 异格w 益达\r\n\t\tyuximrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tglobalTo(from, to, distance) {\r\n\t\t\t\t\tvar cards = to.getCards(\"s\", function (card) {\r\n\t\t\t\t\t\treturn card.hasGaintag(\"yuximrfzx\");\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (cards.length) return distance + 2;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmarktext: \"死魂灵\",\r\n\t\t\tintro: {\r\n\t\t\t\tmark: function (dialog, storage, player) {\r\n\t\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\t\treturn card.hasGaintag(\"yuximrfzx\");\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (cards && cards.length > 0) dialog.addAuto(\"其他角色计算与你的距离+2\");\r\n\t\t\t\t\telse return `没有‘死魂灵’`;\r\n\t\t\t\t\tif (game.me == player) dialog.addAuto(cards);\r\n\t\t\t\t\telse dialog.addAuto(`共有${cards.length}张牌`);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tonremove: function (player, skill) {\r\n\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\treturn card.hasGaintag(\"yuximrfzx\");\r\n\t\t\t\t});\r\n\t\t\t\tif (cards.length) {\r\n\t\t\t\t\tgame.cardsGotoSpecial(cards);\r\n\t\t\t\t\tplayer.$throw(cards, 1000);\r\n\t\t\t\t\tgame.log(cards, \"被销毁\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlib.skill.yuximrfz.onremove(player, \"yuximrfz\");\r\n\t\t\t\tvar cards = [],\r\n\t\t\t\t\tnature = [\"fire\", \"thunder\"];\r\n\t\t\t\tfor (var i = 0; i < player.maxHp; i++) {\r\n\t\t\t\t\tvar name = lib.inpile\r\n\t\t\t\t\t\t.filter(name => {\r\n\t\t\t\t\t\t\treturn get.type(name) == \"trick\" || get.type(name) == \"basic\";\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.randomGet();\r\n\t\t\t\t\tcards.push(\r\n\t\t\t\t\t\tgame.createCard(\r\n\t\t\t\t\t\t\tname,\r\n\t\t\t\t\t\t\tlib.suit.randomGet(),\r\n\t\t\t\t\t\t\tMath.floor(Math.random() * 13) + 1,\r\n\t\t\t\t\t\t\tname == \"sha\" ? nature.randomGet() : undefined\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\tcards.map(card => {\r\n\t\t\t\t\tcard.storage.yuximrfzx = true;\r\n\t\t\t\t});\r\n\t\t\t\tgame.log(player, \"将\", cards.length, \"张牌置于在武将牌上\");\r\n\t\t\t\tplayer.loseToSpecial(cards, \"yuximrfzx\");\r\n\t\t\t\tplayer.markSkill(\"yuximrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"yuximrfz_destroy\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdestroy: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"loseEnd\", \"equipEnd\", \"addJudgeEnd\", \"gainEnd\", \"loseAsyncEnd\", \"addToExpansionEnd\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar evt = event.getl(player);\r\n\t\t\t\t\t\tif (!evt || !evt.cards) return false;\r\n\t\t\t\t\t\tfor (var i of evt.cards) {\r\n\t\t\t\t\t\t\tif (i.storage.yuximrfzx == true) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar cards = [];\r\n\t\t\t\t\t\tvar evt = trigger.getl(player);\r\n\t\t\t\t\t\tif (evt && evt.cards) {\r\n\t\t\t\t\t\t\tfor (var i of evt.cards) {\r\n\t\t\t\t\t\t\t\tif (i.storage.yuximrfzx == true) cards.push(i);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgame.cardsGotoSpecial(cards);\r\n\t\t\t\t\t\tgame.log(cards, \"被销毁了\");\r\n\t\t\t\t\t\tif (Math.random() > 0.5) player.logSkill(\"yuximrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thaolimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tcompare(card1, card2) {\r\n\t\t\t\tif (get.suit(card1) == get.suit(card2)) return true;\r\n\t\t\t\tif (get.number(card1) == get.number(card2)) return true;\r\n\t\t\t\tif (get.name(card1) == get.name(card2)) return true;\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\treturn card.hasGaintag(\"yuximrfzx\");\r\n\t\t\t\t});\r\n\t\t\t\tif (cards.length < 1) return false;\r\n\t\t\t\tif (!player.isPhaseUsing()) return false;\r\n\t\t\t\tif (event.card.storage.yuximrfzx == true) return false;\r\n\t\t\t\tif (get.type(event.card) == \"equip\" || get.type(event.card) == \"delay\") return false;\r\n\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\tif (lib.skill.haolimrfz.compare(i, event.card)) return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { cards } = await player\r\n\t\t\t\t\t.chooseCard(\"s\")\r\n\t\t\t\t\t.set(\"filterCard\", card => lib.skill.haolimrfz.compare(card, trigger.card))\r\n\t\t\t\t\t.set(\"prompt\", `【好礼】:你可以弃置一张‘死魂灵’，视为使用一张${get.translation(get.name(trigger.card))}`)\r\n\t\t\t\t\t.set(\"ai\", card => get.value(trigger.card) - get.value(card))\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\tplayer.discard(cards);\r\n\t\t\t\tplayer.chooseUseTarget({ name: get.name(trigger.card), isCard: true }, true, false);\r\n\t\t\t},\r\n\t\t},\r\n\t\tshezumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\treturn card.hasGaintag(\"yuximrfzx\");\r\n\t\t\t\t});\r\n\t\t\t\treturn (\r\n\t\t\t\t\tevent.getParent().name != \"shezumrfz\" &&\r\n\t\t\t\t\tevent.player.isIn() &&\r\n\t\t\t\t\tcards &&\r\n\t\t\t\t\tcards.length > 0 &&\r\n\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\treturn current != player && current != event.player && get.distance(event.player, current) <= 3;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tresult: { cards, targets },\r\n\t\t\t\t} = await player\r\n\t\t\t\t\t.chooseCardTarget({\r\n\t\t\t\t\t\tprompt: `【射祖】:你可以弃置一张‘死魂灵’并对一名距离${get.translation(trigger.player)}不大于3的角色（不能是你或${get.translation(trigger.player)}）造成一点火焰伤害`,\r\n\t\t\t\t\t\tfilterCard(card) {\r\n\t\t\t\t\t\t\treturn card.hasGaintag(\"yuximrfzx\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tposition: \"s\",\r\n\t\t\t\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\t\t\t\tvar damaged = _status.event.targetx;\r\n\t\t\t\t\t\t\treturn target != player && target != damaged && get.distance(damaged, target) <= 3;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tai1: card => 8 - get.value(card),\r\n\t\t\t\t\t\tai2: target => get.damageEffect(target, player, player, \"fire\") > 0,\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"targetx\", trigger.player);\r\n\t\t\t\tif (!cards || !targets) return;\r\n\t\t\t\tplayer.logSkill(\"shezumrfz\", targets[0]);\r\n\t\t\t\tplayer.discard(cards);\r\n\t\t\t\ttargets[0].damage(player, \"fire\");\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 魔王 小特同学 特蕾西娅\r\n\t\tduanzhangmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tmark: function (dialog, storage, player) {\r\n\t\t\t\t\tvar players = player.storage.duanzhangmrfz.slice().filter(target => target != player);\r\n\t\t\t\t\tif (players && players.length > 0) {\r\n\t\t\t\t\t\tdialog.addAuto(\"这一次我不会离开了...\");\r\n\t\t\t\t\t\tplayers = players.map(i => i.name);\r\n\t\t\t\t\t\tdialog.addSmall([players, \"character\"]);\r\n\t\t\t\t\t} else return \"没有【断章】角色\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tonremove: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => current != player) && (event.name != \"phase\" || game.phaseNumber == 0);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { targets } = await player\r\n\t\t\t\t\t.chooseTarget(true)\r\n\t\t\t\t\t.set(\"prompt\", `【断章】:请选择【断章】目标`)\r\n\t\t\t\t\t.set(\"filterTarget\", lib.filter.notMe)\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\tvar att = get.attitude(_status.event.player, target);\r\n\t\t\t\t\t\tif (att > 0) return att + 1;\r\n\t\t\t\t\t\tif (att == 0) return Math.random();\r\n\t\t\t\t\t\treturn att;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!targets) return;\r\n\t\t\t\tvar target = targets[0];\r\n\t\t\t\tif (!player.storage.duanzhangmrfz) player.storage.duanzhangmrfz = [];\r\n\t\t\t\tif (!target.storage.duanzhangmrfz) target.storage.duanzhangmrfz = [];\r\n\t\t\t\tplayer.storage.duanzhangmrfz.addArray([target, player]);\r\n\t\t\t\ttarget.storage.duanzhangmrfz.addArray([target, player]);\r\n\t\t\t\tplayer.markSkill(\"duanzhangmrfz\");\r\n\t\t\t\tplayer.line(target);\r\n\t\t\t\tfor (var i of player.storage.duanzhangmrfz) {\r\n\t\t\t\t\tif (i != player) i.addSkill(\"canxiangmrfz_nodelay\");\r\n\t\t\t\t\ti.addSkill(\"duanzhangmrfz_eff1\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"duanzhangmrfz_clear\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"dieAfter\" },\r\n\t\t\t\t\tforceDie: true,\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn event.player.hasSkill(\"duanzhangmrfz_eff1\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\tfor (var i of game.players) {\r\n\t\t\t\t\t\t\tif (!i.storage.duanzhangmrfz) continue;\r\n\t\t\t\t\t\t\tif (i.storage.duanzhangmrfz.includes(trigger.player)) i.storage.duanzhangmrfz.remove(trigger.player);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff1: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: [\"loseEnd\", \"equipEnd\", \"addJudgeEnd\", \"gainEnd\", \"loseAsyncEnd\", \"addToExpansionEnd\", \"duanzhangmrfzAfter\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn (player.storage.duanzhangmrfz && player.storage.duanzhangmrfz.length > 1) ^ player.hasSkill(\"duanzhangmrfz_group\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (player.storage.duanzhangmrfz && player.storage.duanzhangmrfz.length > 1) {\r\n\t\t\t\t\t\t\tvar cards = [],\r\n\t\t\t\t\t\t\t\ttarget = game.findPlayer(current => {\r\n\t\t\t\t\t\t\t\t\treturn player.storage.duanzhangmrfz.includes(current);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tfor (var i of target.storage.duanzhangmrfz) {\r\n\t\t\t\t\t\t\t\tif (i.countCards(\"h\") == 0) continue;\r\n\t\t\t\t\t\t\t\tif (i == player) continue;\r\n\t\t\t\t\t\t\t\tfor (var j of i.getCards(\"h\")) cards.push(j);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar cardsx = cards.map(card => {\r\n\t\t\t\t\t\t\t\tvar cardx = ui.create.card();\r\n\t\t\t\t\t\t\t\tcardx.init(get.cardInfo(card));\r\n\t\t\t\t\t\t\t\tcardx._cardid = card.cardid;\r\n\t\t\t\t\t\t\t\treturn cardx;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif (cardsx.length < 1) return;\r\n\t\t\t\t\t\t\tplayer.directgains(cardsx, null, \"duanzhangmrfz\");\r\n\t\t\t\t\t\t\tplayer.addSkill(\"duanzhangmrfz_group\");\r\n\t\t\t\t\t\t} else player.removeSkill(\"duanzhangmrfz_group\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tgroup: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tgroup: [\"duanzhangmrfz_eff_use\", \"duanzhangmrfz_eff_lose\"],\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: [\"addJudgeAfter\", \"gainAfter\", \"loseAfter\", \"loseAsyncAfter\", \"cardsDiscardAfter\", \"equipAfter\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.name == \"gain\") return event.cards.length;\r\n\t\t\t\t\t\tvar cards = event.getd();\r\n\t\t\t\t\t\treturn cards.length;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: function (player) {\r\n\t\t\t\t\t\tvar cards2 = player.getCards(\"s\", card => {\r\n\t\t\t\t\t\t\treturn card.hasGaintag(\"duanzhangmrfz\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (player.isOnline2()) {\r\n\t\t\t\t\t\t\tplayer.send(\r\n\t\t\t\t\t\t\t\tfunction (cards, player) {\r\n\t\t\t\t\t\t\t\t\tcards.forEach(i => i.delete());\r\n\t\t\t\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcards2,\r\n\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcards2.forEach(i => i.delete());\r\n\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar cards = [];\r\n\t\t\t\t\t\tvar idList = player.getCards(\"s\", card => card.hasGaintag(\"duanzhangmrfz\")).map(i => i._cardid);\r\n\t\t\t\t\t\tvar target = game.findPlayer(current => {\r\n\t\t\t\t\t\t\treturn player.storage.duanzhangmrfz.includes(current);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tfor (var i of target.storage.duanzhangmrfz) {\r\n\t\t\t\t\t\t\tif (i.countCards(\"h\") == 0) continue;\r\n\t\t\t\t\t\t\tif (i == player) continue;\r\n\t\t\t\t\t\t\tfor (var j of i.getCards(\"h\")) {\r\n\t\t\t\t\t\t\t\tif (idList.includes(j.cardid)) continue;\r\n\t\t\t\t\t\t\t\tcards.push(j);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar cards2 = cards.map(card => {\r\n\t\t\t\t\t\t\tvar cardx = ui.create.card();\r\n\t\t\t\t\t\t\tcardx.init(get.cardInfo(card));\r\n\t\t\t\t\t\t\tcardx._cardid = card.cardid;\r\n\t\t\t\t\t\t\treturn cardx;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tplayer.directgains(cards2, null, \"duanzhangmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff_use: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"useCardBefore\", \"respondBefore\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar cards = player.getCards(\"s\", card => card.hasGaintag(\"duanzhangmrfz\") && card._cardid);\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.cards &&\r\n\t\t\t\t\t\t\tevent.cards.some(card => {\r\n\t\t\t\t\t\t\t\treturn cards.includes(card);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar idList = player.getCards(\"s\", card => card.hasGaintag(\"duanzhangmrfz\")).map(i => i._cardid);\r\n\t\t\t\t\t\tvar cards = [];\r\n\t\t\t\t\t\tvar target = game.findPlayer(current => {\r\n\t\t\t\t\t\t\treturn player.storage.duanzhangmrfz.includes(current);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tfor (var i of target.storage.duanzhangmrfz) {\r\n\t\t\t\t\t\t\tif (i.countCards(\"h\") == 0) continue;\r\n\t\t\t\t\t\t\tif (i == player) continue;\r\n\t\t\t\t\t\t\tfor (var j of i.getCards(\"h\")) {\r\n\t\t\t\t\t\t\t\tif (!idList.includes(j.cardid)) continue;\r\n\t\t\t\t\t\t\t\tcards.push(j);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar cards2 = [];\r\n\t\t\t\t\t\tfor (var card of trigger.cards) {\r\n\t\t\t\t\t\t\tvar cardx = cards.find(cardx => cardx.cardid == card._cardid);\r\n\t\t\t\t\t\t\tif (cardx) cards2.push(cardx);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar cards3 = trigger.cards.slice();\r\n\t\t\t\t\t\ttrigger.cards = cards2;\r\n\t\t\t\t\t\ttrigger.card.cards = cards2;\r\n\t\t\t\t\t\tif (player.isOnline2()) {\r\n\t\t\t\t\t\t\tplayer.send(\r\n\t\t\t\t\t\t\t\tfunction (cards, player) {\r\n\t\t\t\t\t\t\t\t\tcards.forEach(i => i.delete());\r\n\t\t\t\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcards3,\r\n\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcards3.forEach(i => i.delete());\r\n\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff_lose: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: [\"loseEnd\", \"equipEnd\", \"addJudgeEnd\", \"gainEnd\", \"loseAsyncEnd\", \"addToExpansionEnd\", \"cardsGotoOrderingBegin\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar idList = player.getCards(\"s\", card => card.hasGaintag(\"duanzhangmrfz\")).map(i => i._cardid);\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.cards &&\r\n\t\t\t\t\t\t\tevent.cards.some(card => {\r\n\t\t\t\t\t\t\t\treturn idList.includes(card.cardid);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar cards2;\r\n\t\t\t\t\t\tvar idList = [];\r\n\t\t\t\t\t\tvar target = game.findPlayer(current => {\r\n\t\t\t\t\t\t\treturn player.storage.duanzhangmrfz.includes(current);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tfor (var i of target.storage.duanzhangmrfz) {\r\n\t\t\t\t\t\t\tif (i.countCards(\"h\") == 0) continue;\r\n\t\t\t\t\t\t\tif (i == player) continue;\r\n\t\t\t\t\t\t\tfor (var j of i.getCards(\"h\")) {\r\n\t\t\t\t\t\t\t\tidList.add(j.cardid);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcards2 = player.getCards(\"s\", card => {\r\n\t\t\t\t\t\t\treturn card.hasGaintag(\"duanzhangmrfz\") && !idList.includes(card._cardid);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (player.isOnline2()) {\r\n\t\t\t\t\t\t\tplayer.send(\r\n\t\t\t\t\t\t\t\tfunction (cards, player) {\r\n\t\t\t\t\t\t\t\t\tcards.forEach(i => i.delete());\r\n\t\t\t\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcards2,\r\n\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcards2.forEach(i => i.delete());\r\n\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tchenaimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"useCardAfter\", \"respondAfter\"],\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (_status.currentPhase != player) return false;\r\n\t\t\t\tif (\r\n\t\t\t\t\tplayer.getHistory(\"custom\", function (evt) {\r\n\t\t\t\t\t\treturn evt.chenaimrfz_type == get.type2(event.card);\r\n\t\t\t\t\t}).length > 0\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\treturn event.cards.filterInD().length > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { targets } = await player\r\n\t\t\t\t\t.chooseTarget(\r\n\t\t\t\t\t\tget.prompt(\"chenaimrfz\"),\r\n\t\t\t\t\t\t\"将\" + get.translation(trigger.cards) + \"交给一名其他角色\",\r\n\t\t\t\t\t\tfunction (card, player, target) {\r\n\t\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\tif (target.hasJudge(\"lebu\")) return 0;\r\n\t\t\t\t\t\tlet att = get.attitude(_status.event.player, target),\r\n\t\t\t\t\t\t\tname = _status.event.cards[0].name;\r\n\t\t\t\t\t\tif (att < 3) return 0;\r\n\t\t\t\t\t\tif (_status.event.player.storage.duanzhangmrfz && _status.event.player.storage.duanzhangmrfz.includes(target) && att > 0)\r\n\t\t\t\t\t\t\tatt += 10;\r\n\t\t\t\t\t\tif (target.hasSkillTag(\"nogain\")) att /= 10;\r\n\t\t\t\t\t\tif (name === \"sha\" && target.hasSha()) att /= 5;\r\n\t\t\t\t\t\tif (name === \"wuxie\" && target.needsToDiscard(_status.event.cards)) att /= 5;\r\n\t\t\t\t\t\treturn att / (1 + get.distance(player, target, \"absolute\"));\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"cards\", trigger.cards)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!targets) return;\r\n\t\t\t\tplayer.logSkill(\"chenaimrfz\", targets[0]);\r\n\t\t\t\ttargets[0].gain(trigger.cards.filterInD(), \"gain2\");\r\n\t\t\t\tplayer.getHistory(\"custom\").push({ chenaimrfz_type: get.type2(trigger.card) });\r\n\t\t\t\tif (player.storage.duanzhangmrfz && player.storage.duanzhangmrfz.includes(targets[0])) targets[0].draw();\r\n\t\t\t},\r\n\t\t},\r\n\t\t/** @type { Skill } */\r\n\t\tcanxiangmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\ttargetEnabled: function (card, player, target) {\r\n\t\t\t\t\tif (get.type(card) == \"delay\") {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { global: \"damageBegin4\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tvar storage = player.storage.duanzhangmrfz;\r\n\t\t\t\tif (event.player != player && (!storage || !storage.includes(event.player))) return false;\r\n\t\t\t\treturn event.hasNature();\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t},\r\n\t\t\tgroup: \"canxiangmrfz_die\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdie: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"dieAfter\" },\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tforceDie: true,\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\tvar storage = player.storage.duanzhangmrfz;\r\n\t\t\t\t\t\tfor (var i of storage) {\r\n\t\t\t\t\t\t\tif (!i.storage.duanzhangmrfz) continue;\r\n\t\t\t\t\t\t\tif (i.storage.duanzhangmrfz.length <= 2) i.removeSkill(\"canxiangmrfz_nodelay\");\r\n\t\t\t\t\t\t\telse i.storage.duanzhangmrfz.remove(player);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tnodelay: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"属性伤害无效；无法成为延时锦囊牌的目标\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\ttargetEnabled: function (card, player, target) {\r\n\t\t\t\t\t\t\tif (get.type(card) == \"delay\") {\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tnofire: true,\r\n\t\t\t\t\t\tnothunder: true,\r\n\t\t\t\t\t\teffect: {\r\n\t\t\t\t\t\t\ttarget(card, player, target, current) {\r\n\t\t\t\t\t\t\t\tif (get.tag(card, \"natureDamage\")) {\r\n\t\t\t\t\t\t\t\t\treturn \"zeroplayertarget\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (get.type(card) == \"trick\" && get.tag(card, \"damage\")) {\r\n\t\t\t\t\t\t\t\t\treturn \"zeroplayertarget\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tnofire: true,\r\n\t\t\t\tnothunder: true,\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget(card, player, target, current) {\r\n\t\t\t\t\t\tif (get.tag(card, \"natureDamage\")) {\r\n\t\t\t\t\t\t\treturn \"zeroplayertarget\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (get.type(card) == \"trick\" && get.tag(card, \"damage\")) {\r\n\t\t\t\t\t\t\treturn \"zeroplayertarget\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 新多萝西\r\n\t\tnewgongzhenmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\taiOrder: function (player, card, num) {\r\n\t\t\t\t\tif (typeof card == \"object\" && player.isPhaseUsing()) {\r\n\t\t\t\t\t\tvar history = player.getAllHistory(\"useCard\");\r\n\t\t\t\t\t\tif (history.length < 1) return num;\r\n\t\t\t\t\t\tvar cardx = history[history.length - 1].card;\r\n\t\t\t\t\t\tif (cardx && get.type2(cardx) == get.type2(card)) {\r\n\t\t\t\t\t\t\treturn num + 10;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: \"gongzhenmrfz\",\r\n\t\t\ttrigger: { player: [\"useCardEnd\", \"respondEnd\"] },\r\n\t\t\tforced: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.getAllHistory(event.name).length > 1;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar history = player.getAllHistory(trigger.name);\r\n\t\t\t\tvar cardx = history[history.length - 2].card;\r\n\t\t\t\tif (!cardx) return;\r\n\t\t\t\tif (get.type2(cardx) == get.type2(trigger.card)) {\r\n\t\t\t\t\tvar cards = get.cards(2);\r\n\t\t\t\t\tgame.cardsGotoOrdering(cards);\r\n\t\t\t\t\tconst { links } = await player\r\n\t\t\t\t\t\t.chooseCardButton(`【共振】:请选择获得一张牌`, true, cards)\r\n\t\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\t\treturn get.value(button);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (!links) return;\r\n\t\t\t\t\tplayer.gain(links, \"gain2\");\r\n\t\t\t\t} else\r\n\t\t\t\t\tplayer.chooseToDiscard(true, `【共振】:请弃置区域内的一张牌`, \"hej\").set(\"ai\", card => {\r\n\t\t\t\t\t\tif (get.position(card) == \"j\") return 10;\r\n\t\t\t\t\t\treturn -get.value(card);\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t},\r\n\t\tnewmengxiangmrfz: {\r\n\t\t\tgetLastDiscard(event, player) {\r\n\t\t\t\tvar history = player.getAllHistory(\"lose\", evt => evt.type && evt.type == \"discard\");\r\n\t\t\t\tif (history.length < 1) return false;\r\n\t\t\t\tvar cards = history[history.length - 1].cards;\r\n\t\t\t\tif (!cards) return false;\r\n\t\t\t\treturn cards[cards.length - 1];\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player) {\r\n\t\t\t\t\tvar cardx = lib.skill.newmengxiangmrfz.getLastDiscard(_status.event, player);\r\n\t\t\t\t\tif (cardx && get.type2(cardx) == get.type2(card)) return Infinity;\r\n\t\t\t\t},\r\n\t\t\t\ttargetInRange: function (card, player) {\r\n\t\t\t\t\tvar cardx = lib.skill.newmengxiangmrfz.getLastDiscard(_status.event, player);\r\n\t\t\t\t\tif (cardx && get.type2(cardx) == get.type2(card)) return true;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: \"mengxiangmrfz\",\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"useCardBefore\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tvar cardx = lib.skill.newmengxiangmrfz.getLastDiscard(_status.event, player);\r\n\t\t\t\tif (!cardx) return false;\r\n\t\t\t\treturn !event.audioed && get.type2(cardx) == get.type2(event.card);\r\n\t\t\t},\r\n\t\t\tcontent() {\r\n\t\t\t\ttrigger.audioed = true;\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 新黑键\r\n\t\tnewhuangxiangmrfz: {\r\n\t\t\taudio: \"huangxiangmrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseDrawAfter\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tconst { result } = await player.chooseCard([1, 2], \"【荒响】:你可以选择两张手牌将其标记为‘残影’\").set(\"ai\", card => {\r\n\t\t\t\t\tvar num = get.value(card);\r\n\t\t\t\t\tif (get.name(card) == \"shan\" || get.name(card) == \"wuxie\") num += 10;\r\n\t\t\t\t\tif (get.type2(card) == \"equip\") num -= 2;\r\n\t\t\t\t\treturn num;\r\n\t\t\t\t});\r\n\t\t\t\tevent.result = result;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar cards = event.cards;\r\n\t\t\t\tawait player.removeGaintag(\"newhuangxiangmrfzx\");\r\n\t\t\t\tfor (var i of cards) i.addGaintag(\"newhuangxiangmrfzx\");\r\n\t\t\t},\r\n\t\t\tgroup: \"newhuangxiangmrfz_lose\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tlose: {\r\n\t\t\t\t\taudio: \"huangxiangmrfz\",\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"loseAfter\",\r\n\t\t\t\t\t\tglobal: [\"equipAfter\", \"addJudgeAfter\", \"gainAfter\", \"loseAsyncAfter\", \"addToExpansionAfter\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tif (_status.currentPhase == player) return false;\r\n\t\t\t\t\t\tvar evt = event.getl(player);\r\n\t\t\t\t\t\tif (!evt || !evt.hs || !evt.hs.length) return false;\r\n\t\t\t\t\t\tif (event.name == \"lose\") {\r\n\t\t\t\t\t\t\tfor (var i in event.gaintag_map) {\r\n\t\t\t\t\t\t\t\tif (event.gaintag_map[i].includes(\"newhuangxiangmrfzx\")) return true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn player.hasHistory(\"lose\", function (evt) {\r\n\t\t\t\t\t\t\tif (event != evt.getParent()) return false;\r\n\t\t\t\t\t\t\tfor (var i in evt.gaintag_map) {\r\n\t\t\t\t\t\t\t\tif (evt.gaintag_map[i].includes(\"newhuangxiangmrfzx\")) return true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\t\t\tvar list = [\"选项一\", \"选项二\", \"cancel2\"],\r\n\t\t\t\t\t\t\tchoicelist = [\"令一名你攻击范围内的角色选择弃置一张黑桃牌或受到一点伤害\", \"你摸一张牌且将此牌标记为‘残影’\"];\r\n\t\t\t\t\t\tif (!game.hasPlayer(current => current != player && player.inRange(current))) {\r\n\t\t\t\t\t\t\tlist.remove(\"选项一\");\r\n\t\t\t\t\t\t\tchoicelist[0] = '<span style=\"opacity:0.5; \">' + choicelist[0] + \"(没有满足条件的角色)</span>\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst { control } = await player\r\n\t\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t\t.set(\"choiceList\", choicelist)\r\n\t\t\t\t\t\t\t.set(\"prompt\", \"【荒响】:你可以选择一项\")\r\n\t\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\tif (!game.hasPlayer(current => current != player && player.inRange(current) && get.attitude(player, current) < 0))\r\n\t\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t\treturn [0, 1];\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tvar result = {};\r\n\t\t\t\t\t\tresult.bool = true;\r\n\t\t\t\t\t\tresult.cost_data = control;\r\n\t\t\t\t\t\tif (control == \"cancel2\") result.bool = false;\r\n\t\t\t\t\t\tevent.result = result;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar control = event.cost_data;\r\n\t\t\t\t\t\tif (control == \"选项一\") {\r\n\t\t\t\t\t\t\tconst { targets } = await player\r\n\t\t\t\t\t\t\t\t.chooseTarget()\r\n\t\t\t\t\t\t\t\t.set(\"forced\", true)\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", \"【荒响】:请选择一名攻击范围内的角色\")\r\n\t\t\t\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\r\n\t\t\t\t\t\t\t\t\treturn player != target && player.inRange(target);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\tconst { bool } = await targets[0]\r\n\t\t\t\t\t\t\t\t.chooseToDiscard(\"【荒响】:请弃置一张黑桃牌，否则受到一点伤害\", \"he\")\r\n\t\t\t\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\tplayer.hp < 2 &&\r\n\t\t\t\t\t\t\t\t\t\tplayer.countCards(\"hes\", card => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn get.name(card) == \"tao\" || get.name(card) == \"jiu\";\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\treturn 12 - get.value(card);\r\n\t\t\t\t\t\t\t\t\treturn 7 - get.value(card);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"filterCard\", card => get.suit(card) == \"spade\")\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\tif (bool) return;\r\n\t\t\t\t\t\t\ttargets[0].damage();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconst { result } = await player.draw();\r\n\t\t\t\t\t\t\tresult[0].addGaintag(\"newhuangxiangmrfzx\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tnewjiyinmrfz: {\r\n\t\t\taudio: \"jiyinmrfz\",\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCard2\",\r\n\t\t\t},\r\n\t\t\tgetMeetCondition(event, player, target) {\r\n\t\t\t\tlet num = 0;\r\n\t\t\t\tif (target.isMaxHandcard()) num++;\r\n\t\t\t\tif (target.isMaxHp()) num++;\r\n\t\t\t\tif (target.isMaxEquip()) num++;\r\n\t\t\t\treturn num;\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (event.card.name != \"sha\") return false;\r\n\t\t\t\tfor (var target of event.targets) {\r\n\t\t\t\t\tlet num = lib.skill.newjiyinmrfz.getMeetCondition(event, player, target);\r\n\t\t\t\t\tif (typeof num === \"number\") return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet targets = trigger.targets;\r\n\t\t\t\tfor (var target of targets) {\r\n\t\t\t\t\tlet num = lib.skill.newjiyinmrfz.getMeetCondition(event, player, target);\r\n\t\t\t\t\tif (typeof num !== \"number\") continue;\r\n\t\t\t\t\tplayer.line(target);\r\n\t\t\t\t\t// 加伤\r\n\t\t\t\t\tif (!target.storage.newjiyinmrfz_tmp) target.storage.newjiyinmrfz_tmp = [];\r\n\t\t\t\t\ttarget.storage.newjiyinmrfz_tmp.push(trigger.card);\r\n\t\t\t\t\ttarget\r\n\t\t\t\t\t\t.when({\r\n\t\t\t\t\t\t\tplayer: \"damageBegin3\",\r\n\t\t\t\t\t\t\tglobal: \"useCardAfter\",\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.filter((event, player) => {\r\n\t\t\t\t\t\t\tif (event.name == \"useCard\" && player.storage.newjiyinmrfz_tmp.filter(card => card == event.card).length > 0) return true;\r\n\t\t\t\t\t\t\tif (!player.storage.newjiyinmrfz_tmp) return false;\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\tevent.card &&\r\n\t\t\t\t\t\t\t\tevent.card.name == \"sha\" &&\r\n\t\t\t\t\t\t\t\tplayer.storage.newjiyinmrfz_tmp.filter(card => card == event.card).length > 0\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\tif (trigger.name == \"damage\") {\r\n\t\t\t\t\t\t\t\ttrigger.num += number;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tplayer.storage.newjiyinmrfz_tmp.remove(trigger.card);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.vars({ number: num });\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"newjiyinmrfz_sha\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tsha: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.card.name != \"sha\" || event.getParent().directHit.includes(event.target)) return false;\r\n\t\t\t\t\t\treturn lib.skill.newjiyinmrfz.getMeetCondition(event, player, event.target) > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlogTarget: \"target\",\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar id = trigger.target.playerid;\r\n\t\t\t\t\t\tvar map = trigger.getParent().customArgs;\r\n\t\t\t\t\t\tif (!map[id]) map[id] = {};\r\n\t\t\t\t\t\tif (typeof map[id].shanRequired == \"number\") {\r\n\t\t\t\t\t\t\tmap[id].shanRequired++;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmap[id].shanRequired = 1 + lib.skill.newjiyinmrfz.getMeetCondition(event, player, trigger.target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\tskillTagFilter(player, tag, arg) {\r\n\t\t\t\t\tlet num = lib.skill.newjiyinmrfz.getMeetCondition(_status.event, player, arg.target);\r\n\t\t\t\t\tif (arg.card.name != \"sha\" || arg.target.countCards(\"h\", \"shan\") > num) return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 乌尔比安\r\n\t\tpiweimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"turnOverAfter\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0 && player.hasUseTarget(\"chuqibuyi\");\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tconst { result } = await player\r\n\t\t\t\t\t.chooseControl(\"club\", \"spade\", \"diamond\", \"heart\", \"cancel2\")\r\n\t\t\t\t\t.set(\r\n\t\t\t\t\t\t\"prompt\",\r\n\t\t\t\t\t\t\"你可以将一种颜色的所有手牌当做任意花色且伤害基数为2的【出其不意】使用，若此牌造成伤害，受到伤害的角色依次弃置装备区和手牌区的一张牌。\"\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\tvar player = get.event().player;\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t!game.hasPlayer(current => {\r\n\t\t\t\t\t\t\t\treturn current != player && player.canUse(\"chuqibuyi\", current) && get.attitude(current, player) < 0;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\treturn \"cancel2\";\r\n\t\t\t\t\t\treturn lib.suit.randomGet();\r\n\t\t\t\t\t});\r\n\t\t\t\tevent.result = {};\r\n\t\t\t\tif (result.control === \"cancel2\") event.result.bool = false;\r\n\t\t\t\telse event.result.bool = true;\r\n\t\t\t\tevent.result.cost_data = result;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet suit = event.cost_data.control;\r\n\t\t\t\tlet color = new Set(player.getCards(\"h\").map(i => get.color(i)));\r\n\t\t\t\tconst { control } =\r\n\t\t\t\t\tcolor.size === 1\r\n\t\t\t\t\t\t? { control: player.getCards(\"h\") }\r\n\t\t\t\t\t\t: await player\r\n\t\t\t\t\t\t\t\t.chooseControl(\"red\", \"black\")\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", \"请选择一种颜色\")\r\n\t\t\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\t\t\tvar player = get.event().player,\r\n\t\t\t\t\t\t\t\t\t\tred = 0,\r\n\t\t\t\t\t\t\t\t\t\tblack = 0;\r\n\t\t\t\t\t\t\t\t\tfor (var i of player.getCards(\"h\", {\r\n\t\t\t\t\t\t\t\t\t\tcolor: \"red\",\r\n\t\t\t\t\t\t\t\t\t})) {\r\n\t\t\t\t\t\t\t\t\t\tred += get.value(i);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tfor (var i of player.getCards(\"h\", {\r\n\t\t\t\t\t\t\t\t\t\tcolor: \"black\",\r\n\t\t\t\t\t\t\t\t\t})) {\r\n\t\t\t\t\t\t\t\t\t\tblack += get.value(i);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn red > black ? \"black\" : \"red\";\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\tplayer.chooseUseTarget(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"chuqibuyi\",\r\n\t\t\t\t\t\tsuit: suit,\r\n\t\t\t\t\t\tpiweimrfz_chuqi: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttypeof control === \"string\" ? player.getCards(\"h\", { color: control }) : control\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tgroup: [\"piweimrfz_damage\", \"piweimrfz_discard\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdiscard: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn event.player && event.player.isIn() && event.card && event.card.piweimrfz_chuqi == true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet target = trigger.player;\r\n\t\t\t\t\t\ttarget\r\n\t\t\t\t\t\t\t.chooseToDiscard(true)\r\n\t\t\t\t\t\t\t.set(\"position\", \"he\")\r\n\t\t\t\t\t\t\t.set(\"prompt\", `【辟纬】:请选择弃置手牌区和装备区的各一张牌`)\r\n\t\t\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\t\t\tvar player = get.event().player;\r\n\t\t\t\t\t\t\t\treturn 7 - get.value(card);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"filterCard\", card => {\r\n\t\t\t\t\t\t\t\tvar player = get.event().player,\r\n\t\t\t\t\t\t\t\t\tcards = ui.selected.cards;\r\n\t\t\t\t\t\t\t\tif (cards.length == 0) return true;\r\n\t\t\t\t\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\t\t\t\t\tif (get.position(i) == get.position(card)) return false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"selectCard\", () => {\r\n\t\t\t\t\t\t\t\tvar player = get.event().player,\r\n\t\t\t\t\t\t\t\t\tpos = [];\r\n\t\t\t\t\t\t\t\tfor (var i of player.getCards(\"he\")) {\r\n\t\t\t\t\t\t\t\t\tif (get.position(i) == \"h\") pos.add(\"h\");\r\n\t\t\t\t\t\t\t\t\telse pos.add(\"e\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn [pos.length, pos.length];\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn event.card && event.card.piweimrfz_chuqi == true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\ttrigger.baseDamage = 2;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.2,\r\n\t\t\t},\r\n\t\t},\r\n\t\tguqianmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: [\"loseAfter\", \"loseAsyncAfter\"],\r\n\t\t\t},\r\n\t\t\tusable: 1,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (event.type != \"discard\" || event.position != ui.discardPile || event.player == player) return false;\r\n\t\t\t\tvar cards = event.getd();\r\n\t\t\t\tif (!cards.filter(card => get.position(card, true) == \"d\").length) return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\treturn `你可以摸一张牌，然后若你手牌中没有相同花色的牌，你重置此技能，反之，你将武将牌翻面。`;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tawait player.draw();\r\n\t\t\t\tlet suitCards = player.getCards(\"h\").map(card => get.suit(card));\r\n\t\t\t\tlet suitList = new Set(suitCards);\r\n\t\t\t\tif (suitCards.length != suitList.size) {\r\n\t\t\t\t\tplayer.turnOver();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tdelete player.getStat(\"skill\")[\"guqianmrfz\"];\r\n\t\t\t\tif (player.storage.counttrigger && player.storage.counttrigger[\"guqianmrfz\"]) delete player.storage.counttrigger[\"guqianmrfz\"];\r\n\t\t\t\tgame.log(player, \"重置了技能\", `#g【孤潜】`);\r\n\t\t\t},\r\n\t\t},\r\n\t\ttongmaimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\taudioname: [\"wuerbianmrfz\", \"spyoulingshamrfz\", \"sikadimrfz\", \"geleidiyamrfz\", \"anzhelamrfz\"],\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (Array.isArray(player.storage.tongmaimrfz) && player.storage.tongmaimrfz.length > 1) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\t_status.currentPhase != player &&\r\n\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\treturn current.hasClan(\"深海猎人\");\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tlet prompt2 = `你可以令一名深海猎人的角色回复一点体力或复原武将牌`,\r\n\t\t\t\t\tstorage = player.storage.tongmaimrfz;\r\n\t\t\t\tif (storage.includes(0)) prompt2 = prompt2.replace(\"回复一点体力或\", \"\");\r\n\t\t\t\tif (storage.includes(1)) prompt2 = prompt2.replace(\"或复原武将牌\", \"\");\r\n\t\t\t\tconst { result } = await player\r\n\t\t\t\t\t.chooseTarget()\r\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"tongmaimrfz\"))\r\n\t\t\t\t\t.set(\"prompt2\", prompt2)\r\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\r\n\t\t\t\t\t\tvar storage = _status.event.storage;\r\n\t\t\t\t\t\tif (!target.hasClan(\"深海猎人\") && target != player) return false;\r\n\t\t\t\t\t\tif (storage.includes(1)) return target.getDamagedHp() > 0;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\tvar player = get.event().player;\r\n\t\t\t\t\t\treturn get.attitude(target, player) > 0 && (target.getDamagedHp() > 0 || target.isTurnedOver() || target.isLinked());\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"storage\", storage);\r\n\t\t\t\tevent.result = result;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet target = event.targets[0];\r\n\t\t\t\tif (!Array.isArray(player.storage.tongmaimrfz)) player.storage.tongmaimrfz = [];\r\n\t\t\t\tif (player.storage.tongmaimrfz.includes(0)) {\r\n\t\t\t\t\ttarget.link(false);\r\n\t\t\t\t\ttarget.turnOver(false);\r\n\t\t\t\t\tplayer.storage.tongmaimrfz.add(1);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (player.storage.tongmaimrfz.includes(1)) {\r\n\t\t\t\t\ttarget.recover();\r\n\t\t\t\t\tplayer.storage.tongmaimrfz.add(0);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (target.getDamagedHp() == 0) {\r\n\t\t\t\t\ttarget.link(false);\r\n\t\t\t\t\ttarget.turnOver(false);\r\n\t\t\t\t\tplayer.storage.tongmaimrfz.add(1);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst { index } = await player\r\n\t\t\t\t\t.chooseControl()\r\n\t\t\t\t\t.set(\"choiceList\", [`令${get.translation(target)}回复一点体力`, `令${get.translation(target)}复原武将牌`])\r\n\t\t\t\t\t.set(\"prompt\", \"请选择一项\")\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\tvar target = _status.event.targetx,\r\n\t\t\t\t\t\t\tplayer = get.event().player;\r\n\t\t\t\t\t\tif (target.isTurnedOver()) return 1;\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"targetx\", target)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (index === 0) target.recover();\r\n\t\t\t\tif (index === 1) {\r\n\t\t\t\t\ttarget.link(false);\r\n\t\t\t\t\ttarget.turnOver(false);\r\n\t\t\t\t}\r\n\t\t\t\tplayer.storage.tongmaimrfz.add(index);\r\n\t\t\t},\r\n\t\t\tgroup: \"tongmaimrfz_clear\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\tplayer.storage.tongmaimrfz = [];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 新 斯卡蒂\r\n\t\tjingliemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseZhunbeiBegin\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn current != player && current.countCards(\"h\") > 0;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tconst { result } = await player\r\n\t\t\t\t\t.chooseTarget()\r\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"shulangmrfz\"))\r\n\t\t\t\t\t.set(\r\n\t\t\t\t\t\t\"prompt2\",\r\n\t\t\t\t\t\t`你可以观看一名其他角色的手牌并选择其中一张牌，然后该角色选择一项：<br>①失去一点体力，令你获得此牌。<br>②令你视为使用此牌，然后本回合结束阶段你发动一次【鲸猎】。<br>③对你使用一张【杀】，若此杀造成伤害，你翻面，反之执行其他两项。`\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => player != target && target.countCards(\"h\") > 0)\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\tvar player = get.event().player;\r\n\t\t\t\t\t\tvar att = get.attitude(player, target),\r\n\t\t\t\t\t\t\tnum = 0;\r\n\t\t\t\t\t\tif (att >= 0) num += 2;\r\n\t\t\t\t\t\telse num += 5 + target.getDamagedHp();\r\n\t\t\t\t\t\treturn (num += target.countCards(\"h\") / 2);\r\n\t\t\t\t\t});\r\n\t\t\t\tevent.result = result;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet target = event.targets[0];\r\n\t\t\t\tif (target.countCards(\"h\") == 1) player.viewHandcards(target);\r\n\t\t\t\tconst { links } = await player\r\n\t\t\t\t\t.choosePlayerCard(target, true, \"visible\")\r\n\t\t\t\t\t.set(\"prompt\", \"【鲸猎】:请选择一张牌\")\r\n\t\t\t\t\t.set(\"position\", \"h\")\r\n\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\tvar player = get.event().player,\r\n\t\t\t\t\t\t\tnum = get.value(button);\r\n\t\t\t\t\t\tif (player.hasUseTarget(button, false)) num += 10;\r\n\t\t\t\t\t\tif (get.tag(button, \"damage\")) num += 2;\r\n\t\t\t\t\t\tif (get.type2(button) == \"equip\") num -= 10;\r\n\t\t\t\t\t\treturn num;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!links) return;\r\n\t\t\t\tlet choiceList = [\r\n\t\t\t\t\t\t`失去一点体力，令${get.translation(player)}获得${get.translation(links[0])}`,\r\n\t\t\t\t\t\t`令${get.translation(player)}视为使用${get.translation(links[0])}，若此牌不能被${get.translation(player)}使用，则改为摸一张牌，然后本回合结束阶段时${get.translation(player)}发动一次【鲸猎】`,\r\n\t\t\t\t\t\t`对${get.translation(player)}使用一张【杀】，若此杀造成伤害，${get.translation(player)}翻面，反之执行其他两项`,\r\n\t\t\t\t\t],\r\n\t\t\t\t\tlist = [\"选项一\", \"选项二\"];\r\n\t\t\t\tif (target.hasSha() && target.canUse({ name: \"sha\" }, player, false)) list.push(\"选项三\");\r\n\t\t\t\telse choiceList[2] = '<span style=\"opacity:0.5\">' + choiceList[2] + \"（没有或无法使用【杀】）\" + \"</span>\";\r\n\t\t\t\tconst { index } = await target\r\n\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t.set(\"choiceList\", choiceList)\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\tvar player = get.event().player,\r\n\t\t\t\t\t\t\ttarget = _status.event.targetx,\r\n\t\t\t\t\t\t\tlist = _status.event.list,\r\n\t\t\t\t\t\t\tcard = _status.event.cardx;\r\n\t\t\t\t\t\tif (get.attitude(player, target) > 0) return 1;\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tif (!target.hasUseTarget(card, false)) return 1;\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tlist.length > 2 &&\r\n\t\t\t\t\t\t\t\ttarget.mayHaveShan(\r\n\t\t\t\t\t\t\t\t\tplayer,\r\n\t\t\t\t\t\t\t\t\t\"use\",\r\n\t\t\t\t\t\t\t\t\ttarget.getCards(\"h\", i => {\r\n\t\t\t\t\t\t\t\t\t\treturn i.hasGaintag(\"sha_notshan\");\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t) &&\r\n\t\t\t\t\t\t\t\tMath.random() > 0.5\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tfor (var i of player.getCards(\"h\", \"sha\")) {\r\n\t\t\t\t\t\t\t\t\tif (get.effect(target, i, player, player) > 0) return 2;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (player.hp == 1) return 1;\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"targetx\", player)\r\n\t\t\t\t\t.set(\"list\", list)\r\n\t\t\t\t\t.set(\"cardx\", links[0])\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (typeof index !== \"number\") return;\r\n\t\t\t\tvar next = game.createEvent(\"jingliemrfz_after\");\r\n\t\t\t\tnext.player = player;\r\n\t\t\t\tnext.target_jingliemrfz = target;\r\n\t\t\t\tnext.card_jingliemrfz = links[0];\r\n\t\t\t\tnext.setContent(lib.skill.jingliemrfz[\"index_\" + index]);\r\n\t\t\t},\r\n\t\t\tasync index_0(event, trigger, player) {\r\n\t\t\t\tlet target = event.target_jingliemrfz,\r\n\t\t\t\t\tcard = event.card_jingliemrfz;\r\n\t\t\t\tawait player.gain(card, \"gain2\");\r\n\t\t\t\ttarget.loseHp();\r\n\t\t\t},\r\n\t\t\tasync index_1(event, trigger, player) {\r\n\t\t\t\tlet target = event.target_jingliemrfz,\r\n\t\t\t\t\tcard = event.card_jingliemrfz;\r\n\t\t\t\tif (player.hasUseTarget(card, false))\r\n\t\t\t\t\tplayer.chooseUseTarget(\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tname: card.name,\r\n\t\t\t\t\t\t\tsuit: card.suit,\r\n\t\t\t\t\t\t\tnumber: card.number,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfalse\r\n\t\t\t\t\t);\r\n\t\t\t\telse player.draw();\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.when(\"phaseJieshuBegin\")\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tif (player.hasSkill(\"jingliemrfz_ban\") || !game.hasPlayer(current => lib.skill.jingliemrfz.filter(event, player))) return;\r\n\t\t\t\t\t\tplayer.addTempSkill(\"jingliemrfz_ban\", \"phaseJieshuEnd\");\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.chooseTarget()\r\n\t\t\t\t\t\t\t.set(\"prompt\", get.prompt(\"jingliemrfz\"))\r\n\t\t\t\t\t\t\t.set(\r\n\t\t\t\t\t\t\t\t\"prompt2\",\r\n\t\t\t\t\t\t\t\t`你可以观看一名其他角色的手牌并选择其中一张牌，然后该角色选择一项：<br>①失去一点体力，令你获得此牌。<br>②令你视为使用此牌，然后本回合结束阶段你发动一次【鲸猎】。<br>③对你使用一张【杀】，若此杀造成伤害，你翻面，反之执行其他两项。`\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => player != target && target.countCards(\"h\") > 0)\r\n\t\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\t\tvar player = get.event().player;\r\n\t\t\t\t\t\t\t\tvar att = get.attitude(player, target),\r\n\t\t\t\t\t\t\t\t\tnum = 0;\r\n\t\t\t\t\t\t\t\tif (att >= 0) num += 2;\r\n\t\t\t\t\t\t\t\telse num += 5 + target.getDamagedHp();\r\n\t\t\t\t\t\t\t\treturn (num += target.countCards(\"h\") / 2);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\t\t\tplayer.logSkill(\"jingliemrfz\", target);\r\n\t\t\t\t\t\t\tvar next = game.createEvent(\"jingliemrfz_phaseJieshu\");\r\n\t\t\t\t\t\t\tnext.player = player;\r\n\t\t\t\t\t\t\tnext.targets = result.targets;\r\n\t\t\t\t\t\t\tnext.setContent(lib.skill.jingliemrfz.content);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync index_2(event, trigger, player) {\r\n\t\t\t\tlet target = event.target_jingliemrfz,\r\n\t\t\t\t\tcard = event.card_jingliemrfz;\r\n\t\t\t\tawait target\r\n\t\t\t\t\t.chooseToUse(\r\n\t\t\t\t\t\tfunction (card, player, event) {\r\n\t\t\t\t\t\t\tif (get.name(card) != \"sha\") return false;\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\"【鲸猎】:对\" + get.translation(player) + \"使用一张杀\"\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"forced\", true)\r\n\t\t\t\t\t.set(\"targetRequired\", true)\r\n\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\tif (target != _status.event.sourcex && !ui.selected.targets.includes(_status.event.sourcex)) return false;\r\n\t\t\t\t\t\treturn player.canUse({ name: \"sha\" }, target, false);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"sourcex\", player);\r\n\t\t\t\tif (\r\n\t\t\t\t\ttarget.hasHistory(\"useCard\", evt => {\r\n\t\t\t\t\t\treturn evt.getParent(2) == event && target.hasHistory(\"sourceDamage\", evtx => evt.card == evtx.card);\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t\tplayer.turnOver();\r\n\t\t\t\telse {\r\n\t\t\t\t\tfor (var i = 0; i < 2; i++) {\r\n\t\t\t\t\t\tvar next = game.createEvent(\"jingliemrfz_noDamage\");\r\n\t\t\t\t\t\tnext.player = player;\r\n\t\t\t\t\t\tnext.target_jingliemrfz = target;\r\n\t\t\t\t\t\tnext.card_jingliemrfz = card;\r\n\t\t\t\t\t\tnext.setContent(lib.skill.jingliemrfz[\"index_\" + i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshulangmrfz: {\r\n\t\t\taudio: \"zhangenmrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\ttarget: \"useCardToTargeted\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.card && event.card.name == \"sha\" && player.hasSha() && lib.filter.targetEnabled({ name: \"sha\" }, player, event.player);\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\tfor (var i of player.getCards(\"hes\", \"sha\")) {\r\n\t\t\t\t\tif (get.effect(event.player, i, player, player) > 0 && get.attitude(player, event.player) < 0) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} //QQQ\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\treturn \"你可以对\" + get.translation(event.player) + \"使用一张杀\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { result } = await player\r\n\t\t\t\t\t.chooseToUse(function (card, player, event) {\r\n\t\t\t\t\t\tif (get.name(card) != \"sha\") return false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}, \"请使用一张【杀】\")\r\n\t\t\t\t\t.set(\"forced\", true)\r\n\t\t\t\t\t.set(\"targetRequired\", true)\r\n\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t.set(\"shulangmrfz_card\", true)\r\n\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\tif (target != _status.event.sourcex && !ui.selected.targets.includes(_status.event.sourcex)) return false;\r\n\t\t\t\t\t\treturn player.canUse({ name: \"sha\" }, target, false);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"sourcex\", trigger.player);\r\n\t\t\t\tif (\r\n\t\t\t\t\tplayer.hasHistory(\"useCard\", evt => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevt &&\r\n\t\t\t\t\t\t\tevt.card &&\r\n\t\t\t\t\t\t\tevt.name == \"useCard\" &&\r\n\t\t\t\t\t\t\tplayer.hasHistory(\"sourceDamage\", evtx => {\r\n\t\t\t\t\t\t\t\treturn evt.card == evtx.card;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})\r\n\t\t\t\t) {\r\n\t\t\t\t\ttrigger.getParent().excluded.addArray(trigger.targets);\r\n\t\t\t\t\tif (trigger.player.countGainableCards(player, \"he\"))\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.gainPlayerCard(\"he\", trigger.player, true)\r\n\t\t\t\t\t\t\t.set(\"target\", trigger.player)\r\n\t\t\t\t\t\t\t.set(\"complexSelect\", false)\r\n\t\t\t\t\t\t\t.set(\"ai\", lib.card.shunshou.ai.button);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"shulangmrfz_need\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tneed: {\r\n\t\t\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn event.getParent(3).name == \"shulangmrfz\" && event.card && event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst id = trigger.target.playerid;\r\n\t\t\t\t\t\tconst map = trigger.getParent().customArgs;\r\n\t\t\t\t\t\tif (!map[id]) map[id] = {};\r\n\t\t\t\t\t\tif (typeof map[id].shanRequired == \"number\") {\r\n\t\t\t\t\t\t\tmap[id].shanRequired++;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmap[id].shanRequired = 2;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 新 歌蕾蒂娅\r\n\t\tquliemrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t\tmark: function (dialog, storage, player) {\r\n\t\t\t\t\tvar cards = player.getExpansions(\"quliemrfz\");\r\n\t\t\t\t\tif (player.isUnderControl(true)) dialog.addAuto(cards);\r\n\t\t\t\t\telse return \"共有\" + get.cnNumber(cards.length) + \"张牌\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tonremove(player) {\r\n\t\t\t\tgame.countPlayer(current => {\r\n\t\t\t\t\tvar cards = current.getExpansions(\"quliemrfz\");\r\n\t\t\t\t\tif (cards) current.loseToDiscardpile(cards);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\taudio: \"ronghangmrfz\",\r\n\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tget.tag(event.card, \"damage\") &&\r\n\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\treturn current != player && !current.hasMark(\"quliemrfz_eff\");\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn current != player && !current.hasMark(\"quliemrfz_eff\") && get.attitude(player, current) < 0;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tprompt2: \"当你使用带有伤害类标签的牌时，你可以令其他角色若在此牌结算完成前使用或打出牌后，其须将一半（向上取整）的牌置于武将牌上\",\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tgame.countPlayer(current => {\r\n\t\t\t\t\tif (current == player) return;\r\n\t\t\t\t\tcurrent.addMark(\"quliemrfz_eff\", 1, false);\r\n\t\t\t\t});\r\n\t\t\t\tif (!player.storage.newxunxiangmrfz) player.storage.newxunxiangmrfz = [];\r\n\t\t\t\tplayer.storage.newxunxiangmrfz.add(trigger.card);\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.when(\"useCardAfter\")\r\n\t\t\t\t\t.filter((event, player) => {\r\n\t\t\t\t\t\treturn player.storage.newxunxiangmrfz.includes(event.card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tgame.countPlayer(current => {\r\n\t\t\t\t\t\t\tcurrent.removeMark(\"quliemrfz_eff\", 1, false);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tplayer.storage.newxunxiangmrfz.remove(trigger.card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.assign({ lastDo: true });\r\n\t\t\t},\r\n\t\t\tgroup: [\"quliemrfz_eff\", \"quliemrfz_die\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdie: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"dieAfter\" },\r\n\t\t\t\t\tforceDie: true,\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn event.player.getExpansions(\"quliemrfz\").length;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\ttrigger.player.loseToDiscardpile(trigger.player.getExpansions(\"quliemrfz\"));\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: [\"useCardAfter\", \"respondAfter\", \"phaseZhunbeiBegin\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tif (event.name == \"phaseZhunbei\") {\r\n\t\t\t\t\t\t\treturn event.player.getExpansions(\"quliemrfz\").length > 0;\r\n\t\t\t\t\t\t} else return event.player.countCards(\"h\") > 0 && event.player != player && event.player.hasMark(\"quliemrfz_eff\");\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (trigger.name == \"phaseZhunbei\") {\r\n\t\t\t\t\t\t\tvar current = trigger.player;\r\n\t\t\t\t\t\t\tvar cards = current.getExpansions(\"quliemrfz\");\r\n\t\t\t\t\t\t\tconst { links } =\r\n\t\t\t\t\t\t\t\tnew Set(cards.map(i => get.type2(i, current))).size == 1\r\n\t\t\t\t\t\t\t\t\t? { links: [] }\r\n\t\t\t\t\t\t\t\t\t: await current\r\n\t\t\t\t\t\t\t\t\t\t\t.chooseCardButton(cards)\r\n\t\t\t\t\t\t\t\t\t\t\t.set(\"prompt\", `请选择至少两张不同类型的牌`)\r\n\t\t\t\t\t\t\t\t\t\t\t.set(\"selectButton\", [2, Infinity])\r\n\t\t\t\t\t\t\t\t\t\t\t.set(\"filterButton\", button => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar player = get.event().player,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcards = ui.selected.buttons;\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn !cards.some(cardx => get.type2(cardx, player) == get.type2(button, player));\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn get.value(button.link, _status.event.player);\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\tif (links.length > 0) {\r\n\t\t\t\t\t\t\t\tcurrent.gain(links, \"draw\");\r\n\t\t\t\t\t\t\t\tgame.log(current, \"收回了\" + get.cnNumber(links.length) + \"因【驱猎】而置于武将牌上的张牌\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (cards.length != links.length) current.discard(cards.removeArray(links));\r\n\t\t\t\t\t\t\tcurrent.unmarkSkill(\"quliemrfz\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlet current = trigger.player;\r\n\t\t\t\t\t\t\tvar num = Math.ceil(current.countCards(\"h\") / 2);\r\n\t\t\t\t\t\t\tconst { cards } = await current\r\n\t\t\t\t\t\t\t\t.chooseCard(true)\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", `请选择${get.cnNumber(num, false)}张牌`)\r\n\t\t\t\t\t\t\t\t.set(\"selectCard\", num)\r\n\t\t\t\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\t\t\t\tvar player = get.event().player;\r\n\t\t\t\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\tcurrent.addToExpansion(cards, \"giveAuto\", current).gaintag.add(\"quliemrfz\");\r\n\t\t\t\t\t\t\tcurrent.markSkill(\"quliemrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tnewxunxiangmrfz: {\r\n\t\t\taudio: \"xunxiangmrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseJieshuBegin\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tvar cards = lib.skill.zheqimrfz_eff2.getDiscard(event);\r\n\t\t\t\treturn cards.length > 0 && player.canCompare(event.player);\r\n\t\t\t},\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\treturn `你可以与${get.translation(event.player)}进行拼点，若你赢，你获得其本回合因弃置而进入弃牌堆的不同类型的牌各一张，并将拼点牌当雷【杀】对其使用`;\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\treturn get.attitude(player, event.player) < 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { result } = await player.chooseToCompare(trigger.player);\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar discards = lib.skill.zheqimrfz_eff2.getDiscard(trigger);\r\n\t\t\t\t\tconst { links } =\r\n\t\t\t\t\t\tnew Set(discards.map(i => get.type(i))).size <= 1\r\n\t\t\t\t\t\t\t? { links: discards }\r\n\t\t\t\t\t\t\t: await player\r\n\t\t\t\t\t\t\t\t\t.chooseCardButton(discards)\r\n\t\t\t\t\t\t\t\t\t.set(\"prompt\", `请选择不同类型的牌`)\r\n\t\t\t\t\t\t\t\t\t.set(\"selectButton\", [0, Infinity])\r\n\t\t\t\t\t\t\t\t\t.set(\"filterButton\", button => {\r\n\t\t\t\t\t\t\t\t\t\tvar player = get.event().player,\r\n\t\t\t\t\t\t\t\t\t\t\tcards = ui.selected.buttons;\r\n\t\t\t\t\t\t\t\t\t\treturn !cards.some(cardx => get.type(cardx, player) == get.type(button, player));\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\t\t\t\t\treturn get.value(button.link, _status.event.player);\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (links) player.gain(links, \"gain2\");\r\n\t\t\t\t\tvar cards = [result.player, result.target];\r\n\t\t\t\t\tcards = cards.filter(i => get.position(i) == \"d\");\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tcards.length > 0 &&\r\n\t\t\t\t\t\tplayer.canUse(\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\t\t\tcards: cards,\r\n\t\t\t\t\t\t\t\tnature: \"thunder\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\ttrigger.player,\r\n\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tplayer.useCard({ name: \"sha\", nature: \"thunder\" }, cards, trigger.player);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\txueshuomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tsource: \"damageBegin3\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") >= event.player.countCards(\"h\");\r\n\t\t\t},\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\treturn `你可以令${get.translation(event.player)}额外受到1点伤害`;\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\treturn get.attitude(player, event.player) < 0;\r\n\t\t\t},\r\n\t\t\tcontent() {\r\n\t\t\t\ttrigger.num++;\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 妮芙\r\n\t\txunxinmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn !current.hasCard(card => get.is.shownCard(card), \"h\") && current.countCards(\"h\") > 0;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\treturn !target.hasCard(card => get.is.shownCard(card), \"h\") && target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tprompt: \"【巡心】:请选择一名没有明置牌的角色\",\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst target = event.targets[0];\r\n\t\t\t\tconst { cards } = await player\r\n\t\t\t\t\t.choosePlayerCard(\"h\", target)\r\n\t\t\t\t\t.set(\"prompt\", `请选择明置${get.translation(target)}一张手牌`)\r\n\t\t\t\t\t.set(\"visible\", true)\r\n\t\t\t\t\t.set(\"filterButton\", button => {\r\n\t\t\t\t\t\treturn !get.is.shownCard(button);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\tlet target = get.event().target,\r\n\t\t\t\t\t\t\tplayer = get.player();\r\n\t\t\t\t\t\tlet value = get.value(button);\r\n\t\t\t\t\t\tif (get.attitude(player, target) < 0) {\r\n\t\t\t\t\t\t\tlet value = get.value(button);\r\n\t\t\t\t\t\t\treturn target.hasUseTarget(button) ? value - 10 : value;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"target\", target)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\tawait target.addShownCards(cards, \"visible_xunxinmrfz\");\r\n\r\n\t\t\t\tlet showncards = [];\r\n\t\t\t\tfor (let char of game.players) {\r\n\t\t\t\t\tlet shown = char.getCards(\"h\", card => get.is.shownCard(card));\r\n\t\t\t\t\tif (shown) showncards.push(...shown);\r\n\t\t\t\t}\r\n\t\t\t\tlet setShown = new Set(showncards.map(i => get.type2(i)));\r\n\t\t\t\tlet hasTarget = game.hasPlayer(current => {\r\n\t\t\t\t\treturn !current.hasCard(card => get.is.shownCard(card), \"h\") && current.countCards(\"h\") > 0;\r\n\t\t\t\t});\r\n\t\t\t\tif (setShown.size === showncards.map(i => get.type2(i)).length && hasTarget) {\r\n\t\t\t\t\tconst { targets } = await player\r\n\t\t\t\t\t\t.chooseTarget()\r\n\t\t\t\t\t\t.set(\"prompt\", `【巡心】:请选择一名没有明置牌的角色`)\r\n\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\t\treturn get.attitude(player, target) < 0;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\t\treturn !target.hasCard(card => get.is.shownCard(card), \"h\") && target.countCards(\"h\") > 0;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (!targets) return;\r\n\t\t\t\t\tplayer.logSkill(\"xunxinmrfz\", targets[0]);\r\n\t\t\t\t\tvar next = game.createEvent(\"xunxinmrfz_cycle\");\r\n\t\t\t\t\tnext.player = player;\r\n\t\t\t\t\tnext.target = targets[0];\r\n\t\t\t\t\tnext.targets = targets;\r\n\t\t\t\t\tnext.setContent(lib.skill.xunxinmrfz.content);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tchixinmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tglobal: \"chixinmrfz_eff\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\taiOrder(player, card, num) {\r\n\t\t\t\t\t\t\tif (!player.hasCard(card => get.is.shownCard(card), \"h\")) return;\r\n\t\t\t\t\t\t\tif (!get.is.shownCard(card)) {\r\n\t\t\t\t\t\t\t\tlet shown = player.getCards(\"h\", card => get.is.shownCard(card));\r\n\t\t\t\t\t\t\t\tif (shown.length > 1) return num - 10;\r\n\t\t\t\t\t\t\t\treturn num + get.value({ name: card.name }) - get.value(shown[0]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (get.name(card) == \"sha\" && player.getCardUsable(\"sha\") < 2) return num + 10;\r\n\t\t\t\t\t\t\tif (get.name(card) == \"tao\" && player.getDamagedHp() == 1) return num + 10;\r\n\t\t\t\t\t\t\tif (get.name(card) == \"jiu\" && player.getCardUsable(\"jiu\") < 2 && player.isPhaseUsing()) return num + 10;\r\n\t\t\t\t\t\t\tif (get.name(card) == \"wuxie\") return num + 10;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcardname(card, player, name) {\r\n\t\t\t\t\t\t\tlet shown = player.getCards(\"h\", card => get.is.shownCard(card));\r\n\t\t\t\t\t\t\tif (shown && shown.length == 1 && lib.card[shown[0].name].type != \"equip\") {\r\n\t\t\t\t\t\t\t\treturn shown[0].name;\r\n\t\t\t\t\t\t\t} else if (shown && (shown.length > 1 || (shown.length == 1 && lib.card[shown[0].name].type == \"equip\"))) {\r\n\t\t\t\t\t\t\t\treturn \"wuxie\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tkuixinmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tsource: \"damageEnd\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.player != player && event.player.isIn() && event.player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\tlet tran = get.translation(event.player);\r\n\t\t\t\treturn `是否令${tran}所有的[明置/暗置]牌[暗置/明置]，然后${tran}弃置两张暗置的牌？`;\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\treturn get.attitude(event.player, player) < 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst target = trigger.player;\r\n\t\t\t\tfor (let card of target.getCards(\"h\")) {\r\n\t\t\t\t\tif (get.is.shownCard(card)) target.hideShownCards(card);\r\n\t\t\t\t\telse target.addShownCards(card, \"visible_xunxinmrfz\");\r\n\t\t\t\t}\r\n\t\t\t\tlet { promise, resolve } = Promise.withResolvers();\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t}, 10);\r\n\t\t\t\tawait promise;\r\n\t\t\t\tif (target.countCards(\"h\", card => !get.is.shownCard(card)) > 0) {\r\n\t\t\t\t\ttarget\r\n\t\t\t\t\t\t.chooseToDiscard(true, 2)\r\n\t\t\t\t\t\t.set(\"prompt\", `【溃心】:请弃置两张暗置的牌`)\r\n\t\t\t\t\t\t.set(\"filterCard\", card => !get.is.shownCard(card))\r\n\t\t\t\t\t\t.set(\"ai\", card => get.value({ name: card.name }));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 娜仁图亚\r\n\t\t/** @type { Skill } */\r\n\t\teyanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardEnd\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tlet card = event.card;\r\n\t\t\t\treturn event.cards.someInD() && get.tag(card, \"damage\") && game.hasPlayer(current => player != current && current.inRangeOf(player));\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tevent.result = await player\r\n\t\t\t\t\t.chooseTarget()\r\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"eyanmrfz\"))\r\n\t\t\t\t\t.set(\"prompt2\", \"你可以将此牌交给攻击范围内的一名其他角色\")\r\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => player.inRange(target) && player != target)\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\tconst player = get.player();\r\n\t\t\t\t\t\tlet subtraction = player.maxHp - target.maxHp;\r\n\t\t\t\t\t\tlet num = get.attitude(player, target) > 0 ? 0 : -2;\r\n\t\t\t\t\t\tif (get.attitude(player, target) < 0 && subtraction - 1 >= target.countCards(\"h\")) return 114514;\r\n\t\t\t\t\t\treturn num - get.value(get.event().cardx) * 0.5 + Math.min(subtraction, target.countCards(\"h\")) * 2;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"cardx\", trigger.card)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst target = event.targets[0];\r\n\t\t\t\tawait player.give(trigger.cards.filterInD(), target);\r\n\r\n\t\t\t\tlet num = player.maxHp - target.maxHp;\r\n\t\t\t\tif (num < 1) return;\r\n\t\t\t\tconst { cards } =\r\n\t\t\t\t\tnum >= target.countCards(\"h\", card => !get.is.shownCard(card))\r\n\t\t\t\t\t\t? { cards: target.getCards(\"h\", card => !get.is.shownCard(card)) }\r\n\t\t\t\t\t\t: await target\r\n\t\t\t\t\t\t\t\t.chooseCard()\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", `【恶魇】:请展示${num}张手牌`)\r\n\t\t\t\t\t\t\t\t.set(\"forced\", true)\r\n\t\t\t\t\t\t\t\t.set(\"ai\", card => -get.value(card))\r\n\t\t\t\t\t\t\t\t.set(\"filterCard\", card => !get.is.shownCard(card))\r\n\t\t\t\t\t\t\t\t.set(\"selectCard\", num)\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\ttarget.addShownCards(cards, \"visible_eyanmrfz\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tshafeimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"phaseZhunbeiBegin\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player != event.player && event.player.countCards(\"h\", card => get.is.shownCard(card)) > 0;\r\n\t\t\t},\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\tconst cards = event.player.getCards(\"h\", card => get.is.shownCard(card));\r\n\t\t\t\treturn `你可以获得${get.translation(event.player)}的${cards.length}张牌(${get.translation(cards)})`;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst cards = trigger.player.getCards(\"h\", card => get.is.shownCard(card));\r\n\t\t\t\tplayer.gain(cards, \"gain2\");\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 佩佩\r\n\t\tboqingmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"drawBegin\",\r\n\t\t\t\tglobal: \"judgeBegin\",\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet cards = get.cards(4);\r\n\t\t\t\tlet originalHandCards = player.getCards(\"h\");\r\n\t\t\t\tconst { moved } = await player\r\n\t\t\t\t\t.chooseToMove(\"【博青】:你可以交换牌堆顶和你的手牌并任意顺序放回牌堆顶或牌堆底\")\r\n\t\t\t\t\t.set(\"list\", [[\"牌堆顶\", cards], [\"牌堆底\"], [\"你的手牌\", player.getCards(\"h\")]])\r\n\t\t\t\t\t.set(\"processAI\", list => {\r\n\t\t\t\t\t\tlet moved = [[], [], []];\r\n\t\t\t\t\t\tlet top = list[0][1];\r\n\t\t\t\t\t\tlet originalHandCards = get.event().originalHandCards.slice();\r\n\t\t\t\t\t\tlet current = _status.currentPhase;\r\n\t\t\t\t\t\tlet evt = get.event().evt;\r\n\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\tlet all = [...top, ...list[2][1]];\r\n\t\t\t\t\t\tall.sort(function (a, b) {\r\n\t\t\t\t\t\t\treturn get.value(b, player) - get.value(a, player);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t/*\r\n                                    TODO 开摆！有缘再说！\r\n                                     */\r\n\t\t\t\t\t\t// if(evt.name=='draw'){\r\n\t\t\t\t\t\tfor (let i = 0; i < originalHandCards.length; i++) {\r\n\t\t\t\t\t\t\tmoved[2].push(all.shift());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\twhile (all) {\r\n\t\t\t\t\t\t\tif (get.value(all[0], player) <= 5) break;\r\n\t\t\t\t\t\t\tmoved[1].push(all.shift());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tmoved[0].addArray(all);\r\n\t\t\t\t\t\t// } else{\r\n\t\t\t\t\t\t// \tconst evtx = evt.getParent('judge');\r\n\t\t\t\t\t\t// \tconst attitude = get.attitude(player, evtx.player);\r\n\t\t\t\t\t\t// \tlet reverseAll = all.reverse();\r\n\t\t\t\t\t\t// \tfor(let i of reverseAll){\r\n\t\t\t\t\t\t// \t\tconst result = evtx.judge(i) - evtx.judge(evtx.player.judging[0]);\r\n\t\t\t\t\t\t// \t\tif(result==0) continue;\r\n\t\t\t\t\t\t// \t\tif(originalHandCards.includes(i)&&(result - get.value(card) / 2)>0)\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t\treturn moved;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"filterOk\", moved => {\r\n\t\t\t\t\t\tlet originalHandCards = get.event().originalHandCards;\r\n\t\t\t\t\t\treturn moved[2].length == originalHandCards.length;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"evt\", event)\r\n\t\t\t\t\t.set(\"originalHandCards\", originalHandCards)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!moved) return;\r\n\t\t\t\tconst puts = player.getCards(\"h\", i => moved[0].includes(i) || moved[1].includes(i));\r\n\t\t\t\tconst gains = cards.filter(i => moved[2].includes(i));\r\n\t\t\t\tif (puts.length && gains.length) {\r\n\t\t\t\t\tplayer.$throw(puts.length, 1000);\r\n\t\t\t\t\tawait player.gain(gains, \"giveAuto\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst top = moved[0];\r\n\t\t\t\tconst bottom = moved[1];\r\n\t\t\t\ttop.reverse();\r\n\t\t\t\tfor (var i = 0; i < top.length; i++) {\r\n\t\t\t\t\tui.cardPile.insertBefore(top[i], ui.cardPile.firstChild);\r\n\t\t\t\t}\r\n\t\t\t\tfor (i = 0; i < bottom.length; i++) {\r\n\t\t\t\t\tui.cardPile.appendChild(bottom[i]);\r\n\t\t\t\t}\r\n\t\t\t\tgame.addCardKnower(top, player);\r\n\t\t\t\tgame.addCardKnower(bottom, player);\r\n\t\t\t\tplayer.popup(get.cnNumber(top.length) + \"上\" + get.cnNumber(bottom.length) + \"下\");\r\n\t\t\t\tgame.log(player, \"将\" + get.cnNumber(top.length) + \"张牌置于牌堆顶\");\r\n\t\t\t\tgame.updateRoundNumber();\r\n\t\t\t},\r\n\t\t},\r\n\t\tkuisuimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tusable: 1,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tgetLastAction(player) {\r\n\t\t\t\tconst cards = [];\r\n\t\t\t\tconst history = game.getAllGlobalHistory();\r\n\t\t\t\tif (history.length < 2) return [];\r\n\t\t\t\tconst last = history[history.length - 2];\r\n\t\t\t\tif (last[\"cardMove\"].length < 1) return [];\r\n\t\t\t\tfor (let evt of last[\"cardMove\"]) {\r\n\t\t\t\t\tif (!evt.cards) continue;\r\n\t\t\t\t\tfor (let card of evt.cards) {\r\n\t\t\t\t\t\tif (get.position(card, true) == \"d\" && get.type(card) != \"equip\" && player.hasUseTarget(card, false)) cards.push(card);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn cards;\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tconst cards = lib.skill.kuisuimrfz.getLastAction(player);\r\n\t\t\t\treturn player.countCards(\"he\") > 0 && cards.length > 0;\r\n\t\t\t},\r\n\t\t\tfilterCard: true,\r\n\t\t\tposition: \"he\",\r\n\t\t\tcheck(card) {\r\n\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t},\r\n\t\t\tdiscard: false,\r\n\t\t\tlose: false,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet card = event.cards[0];\r\n\t\t\t\tlet names = [...new Set(lib.skill.kuisuimrfz.getLastAction(player).map(i => i.name))];\r\n\t\t\t\tlet list = [];\r\n\t\t\t\tfor (var i = 0; i < names.length; i++) {\r\n\t\t\t\t\tvar name = names[i];\r\n\t\t\t\t\tif (get.type(name) == \"basic\") list.push([\"基本\", \"\", name]);\r\n\t\t\t\t\telse if (get.type(name) == \"trick\") list.push([\"锦囊\", \"\", name]);\r\n\t\t\t\t}\r\n\t\t\t\tconst { links } = await player\r\n\t\t\t\t\t.chooseButton([\"窥岁\", [list, \"vcard\"]])\r\n\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\tlet player = get.player(),\r\n\t\t\t\t\t\t\tcard = {\r\n\t\t\t\t\t\t\t\tname: button.link[2],\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\treturn player.getUseValue(card, null, true);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!links) return;\r\n\t\t\t\tplayer.chooseUseTarget({ name: links[0][2], isCard: true }, event.cards);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 5,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tlianwenmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"damageBegin4\" },\r\n\t\t\tusable: 1,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.num > 0;\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\tif (!event.source) return true;\r\n\t\t\t\treturn get.attitude(event.source, player) < 0 || player.hp == 1 || (event.card && get.type2(event.card) == \"trick\");\r\n\t\t\t},\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\treturn `你可以进行一次判定，若为红，此伤害-1${event.source ? `且${get.translation(event.source)}手牌上限-1直到其回合结束` : \"\"}`;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst next = player.judge(function (card) {\r\n\t\t\t\t\tconst color = get.color(card);\r\n\t\t\t\t\tif (color == \"red\") return 4;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t\tnext.judge2 = function (result) {\r\n\t\t\t\t\treturn result.bool == false;\r\n\t\t\t\t};\r\n\t\t\t\tconst { color } = await next.forResult();\r\n\t\t\t\tif (color == \"red\") {\r\n\t\t\t\t\ttrigger.num--;\r\n\t\t\t\t\ttrigger.source.addTempSkill(\"lianwenmrfz_eff\", { player: \"phaseEnd\" });\r\n\t\t\t\t\ttrigger.source.addMark(\"lianwenmrfz_eff\", 1, false);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\t\t\treturn `·手牌上限-${player.countMark(\"lianwenmrfz_eff\")}`;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn (num -= player.countMark(\"lianwenmrfz_eff\"));\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n};\r\n"],"names":["event","player","card","cards","i","target","trigger","hs","targets","j","att","num","list","suit","result","links","hd","evt","name","bottom","disPile","target2","cards2","cardx","storage","current","value","moved","top","originalHandCards","color"],"mappings":"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"}