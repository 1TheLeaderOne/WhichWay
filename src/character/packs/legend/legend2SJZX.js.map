{"version":3,"file":"legend2SJZX.js","sources":["../../../../../../../../packages/extension/WhichWay/src/character/packs/legend/legend2SJZX.js"],"sourcesContent":["import { lib, game, ui, get, ai, _status } from \"noname\";\nimport { skillCustomFunc } from \"../../../nonameEx/custom/skill.ts\";\nimport { whichWayTips } from \"../../../tips/index.ts\";\n\n/**\n * 六星武将的第二部分\n */\nconst tmpSave = window.whichWaySave.tmpSave;\n\n/** @type {WhichWayCharacterPack} */\nexport default {\n\tcharacter: {\n\t\tyindelaiximrfz: [\"female\", \"samrfz\", 4, [\"pingyimrfz\", \"beinuomrfz\"], []],\n\t\taibulanamrfz: [\"female\", \"weimrfz\", 4, [\"yizhamrfz\", \"kumianmrfz\"], []],\n\t\tmon3trmrfz: [\"female\", \"luomrfz\", 4, [\"shulimrfz\", \"ronghuimrfz\"], []],\n\t\tspnengtianshimrfz: [\"female\", \"lamrfz\", 3, [\"youhuomrfz\", \"letianmrfz\"], []],\n\t\tleimiuanmrfz: [\"female\", \"lamrfz\", 3, [\"feiyimrfz\", \"mingzhengmrfz\", \"zhuijimrfz\"], []],\n\t\txinyangjiaobanjimrfz: [\"male\", \"lamrfz\", 4, [\"daoweimrfz\", \"chongzhoumrfz\", \"shiyimrfz\"], []],\n\t\tjiushenmrfz: [\"male\", \"weimrfz\", \"1/3\", [\"xinyunmrfz\", \"zongyinmrfz\", \"zhanwangmrfz\"], []],\n\t\tspjingzhemrfz: [\"female\", \"yanmrfz\", 4, [\"xiuyuanmrfz\", \"zhengningmrfz\"], []],\n\t\tdianhumrfz: [\"female\", \"luomrfz\", 4, [\"gandianmrfz\"], []],\n\t\tziyeyaomrfz: {\n\t\t\tsex: \"female\",\n\t\t\tgroup: \"dongmrfz\",\n\t\t\thp: 3,\n\t\t\tskills: [\"youlinmrfz\", \"miaomengmrfz\", \"fuyingmrfz\"],\n\t\t},\n\t\tspxingxiongmrfz: {\n\t\t\tsex: \"female\",\n\t\t\tgroup: \"yanmrfz\",\n\t\t\thp: 3,\n\t\t\tmaxHp: 4,\n\t\t\tskills: [\"wozhimrfz\", \"guishimrfz\", \"zhanyemrfz\"],\n\t\t},\n\t\tcuoemrfz: {\n\t\t\tsex: \"female\",\n\t\t\tgroup: \"dongmrfz\",\n\t\t\thp: 4,\n\t\t\tskills: [\"huanyoumrfz\", \"wenxinmrfz\"],\n\t\t},\n\t\tfengchuanxiangzimrfz: {\n\t\t\tsex: \"female\",\n\t\t\tgroup: \"othermrfz\",\n\t\t\thp: 3,\n\t\t\tskills: [\"songyuemrfz\", \"yuxiangmrfz\", \"wuweimrfz\"],\n\t\t\tclans: [\"AveMujica\"],\n\t\t},\n\t\tyeyingmrfz: {\n\t\t\tsex: \"female\",\n\t\t\thp: 3,\n\t\t\tgroup: \"shimrfz\",\n\t\t\tskills: [\"guqiumrfz\", \"newpolongmrfz\"],\n\t\t},\n\t\ttifengmrfz: {\n\t\t\tsex: \"female\",\n\t\t\thp: 4,\n\t\t\tgroup: \"samrfz\",\n\t\t\tskills: [\"lieqiongmrfz\", \"tifengmrfz_lieshimrfz\"],\n\t\t},\n\t},\n\tskill: {\n\t\t//新提丰\n\t\tlieqiongmrfz: {\n\t\t\taudio: \"ruiyamrfz\",\n\t\t\tderivation: [\"wangong\", \"xinliegong\"],\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"useCard\",\n\t\t\t},\n\t\t\tforced: true,\n\t\t\tfirstDo: true,\n\t\t\tfilter(event, player) {\n\t\t\t\treturn event.card && get.name(event.card) === \"sha\" && event.card.cards && event.card.cards.some(card => [\"red\", \"black\"].includes(get.color(card) || \"\"));\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet color = [\"red\", \"black\"];\n\t\t\t\t//@ts-ignore\n\t\t\t\ttrigger.card.cards.forEach(card => {\n\t\t\t\t\tlet colorx = get.color(card) || \"\";\n\t\t\t\t\tif (color.includes(colorx)) {\n\t\t\t\t\t\tcolor.remove(colorx);\n\t\t\t\t\t\tswitch (colorx) {\n\t\t\t\t\t\t\tcase \"red\":\n\t\t\t\t\t\t\t\tplayer.addSkill(\"wangong2\");\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"black\":\n\t\t\t\t\t\t\t\tplayer\n\t\t\t\t\t\t\t\t\t.when({\n\t\t\t\t\t\t\t\t\t\tplayer: \"useCardAfter\",\n\t\t\t\t\t\t\t\t\t\tglobal: \"roundStart\",\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.filter((event, player) => {\n\t\t\t\t\t\t\t\t\t\tif (event.name === \"phase\") return true;\n\t\t\t\t\t\t\t\t\t\treturn event.card.cardid === trigger.card.cardid;\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.step(async (event, trigger, player) => {\n\t\t\t\t\t\t\t\t\t\tif (trigger.name === \"phase\") return;\n\t\t\t\t\t\t\t\t\t\tplayer.removeSkill(\"lieqiongmrfz_enchanting_liegong\");\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tplayer.storage.lieqiongmrfz_enchanting_liegong = trigger.card.cardid;\n\t\t\t\t\t\t\t\tplayer.addSkill(\"lieqiongmrfz_enchanting_liegong\");\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\tenchanting_liegong: {\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"useCardToTargeted\",\n\t\t\t\t\t},\n\t\t\t\t\tonremove: true,\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\treturn event.card.cardid === player.storage.lieqiongmrfz_enchanting_liegong;\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tlib.skill.xinliegong.content(event, trigger, player);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\ttifengmrfz_lieshimrfz: {\n\t\t\taudio: \"shouliemrfz\",\n\t\t\tenable: \"phaseUse\",\n\t\t\tusable: 1,\n\t\t\tfilter(event, player) {\n\t\t\t\treturn player.countCards(\"h\") > 0 && player.hasUseTarget({ name: \"sha\", nature: \"stab\" }, false, false);\n\t\t\t},\n\t\t\tfilterTarget(card, player, target) {\n\t\t\t\tconst judge = () => player.canUse({ name: \"sha\", nature: \"stab\" }, target, false, false) && target !== player;\n\n\t\t\t\tif (judge()) whichWayTips.addPrompt(target, `摸${get.distance(player, target)}张牌`, \"tifengmrfz_lieshimrfz\", \"uncheckBegin\");\n\t\t\t\telse whichWayTips.addPrompt(target, `不是合法目标`, \"tifengmrfz_lieshimrfz\", \"uncheckBegin\");\n\t\t\t\treturn !!judge();\n\t\t\t},\n\t\t\tselectCard: () => {\n\t\t\t\tlet player = get.player();\n\t\t\t\treturn Math.max(1, Math.floor(player.countCards(\"h\") / 2));\n\t\t\t},\n\t\t\tfilterCard: () => true,\n\t\t\tprompt: \"你可以将一半的手牌（向下取整，至少为1）当作一张无距离和次数限制的刺【杀】对一名其他角色使用，然后你摸X张牌。（X=目标角色与你的距离）\",\n\t\t\tdiscard: false,\n\t\t\tlose: false,\n\t\t\tdelay: false,\n\t\t\tcheck(card) {\n\t\t\t\tlet num = 8 - get.value(card);\n\t\t\t\tif (!ui.selected.cards.map(i => get.color(i)).includes(get.color(card))) num += 2;\n\t\t\t\treturn num;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tconst { cards, targets } = event;\n\t\t\t\tawait player\n\t\t\t\t\t.chooseUseTarget({ name: \"sha\", nature: \"stab\" }, cards)\n\t\t\t\t\t.set(\"forced\", true)\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => target === get.event().targetx)\n\t\t\t\t\t.set(\"targetx\", event.target)\n\t\t\t\t\t.set(\"nodistance\", true)\n\t\t\t\t\t.set(\"addCount\", false)\n\t\t\t\t\t.forResult();\n\t\t\t\tif (!cards || !targets) return;\n\t\t\t\tlet target = targets[0];\n\t\t\t\tif (get.distance(player, target) > 0) player.draw(get.distance(player, target));\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 3,\n\t\t\t\tresult: {\n\t\t\t\t\tplayer: function (player, target) {\n\t\t\t\t\t\tif (get.attitude2(target) > 0) return -1;\n\t\t\t\t\t\treturn get.distance(player, target) + Math.min(2, target.getDamagedHp());\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\t//新夜莺\n\t\tguqiumrfz: {\n\t\t\tmod: {\n\t\t\t\tcardnumber(card, player, num) {\n\t\t\t\t\tif (card.hasGaintag(\"guqiumrfz_number\")) return (num += 3);\n\t\t\t\t},\n\t\t\t},\n\t\t\tderivation: [\"shanzhuan\"],\n\t\t\taudio: \"qiulongmrfz\",\n\t\t\ttrigger: {\n\t\t\t\tglobal: \"roundStart\",\n\t\t\t},\n\t\t\tinit() {\n\t\t\t\tlib.translate[\"guqiumrfz_number\"] = `点数+3`;\n\t\t\t},\n\t\t\tforced: true,\n\t\t\tfilter(event, player) {\n\t\t\t\treturn game.hasPlayer(char => char !== player && char.inRange(player));\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tfor (let char of game.players) {\n\t\t\t\t\tif (char === player || !char.inRange(player)) continue;\n\t\t\t\t\tlet next = game.createEvent(\"guqiumrfz_shanzhuan\");\n\t\t\t\t\tnext.player = char;\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tnext._trigger = {\n\t\t\t\t\t\tplayer: player,\n\t\t\t\t\t};\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tawait next.setContent(lib.skill.shanzhuan.content);\n\t\t\t\t}\n\t\t\t\t//@ts-ignore\n\t\t\t\tplayer.drawTo(5).set(\"gaintag\", [\"guqiumrfz_number\"]);\n\t\t\t},\n\t\t\tgroup: \"guqiumrfz_compare\",\n\t\t\tsubSkill: {\n\t\t\t\tcompare: {\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"compare\",\n\t\t\t\t\t\ttarget: \"compare\",\n\t\t\t\t\t},\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tif (event.iwhile && event.player === player) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tplayer.getHistory(\"lose\", evt => {\n\t\t\t\t\t\t\t\tlet cardid = event[event.player === player ? \"card1\" : \"card2\"].cardid;\n\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\tif (evt.gaintag_map && Object.keys(evt.gaintag_map).includes(cardid) && evt.gaintag_map[cardid].includes(\"guqiumrfz_number\")) return true;\n\t\t\t\t\t\t\t}).length > 0\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tgame.log(player, `的拼点牌点数+3`);\n\t\t\t\t\t\ttrigger[trigger.player === player ? \"num1\" : \"num2\"] += 3;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tcombo: \"newpolongmrfz\",\n\t\t\t},\n\t\t},\n\t\tnewpolongmrfz: {\n\t\t\tmod: {\n\t\t\t\tcardUsable: function (card, player, num) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tif (typeof num === \"number\" && card?.cards?.some(cardx => cardx.hasGaintag(\"newpolongmrfz\"))) return Infinity;\n\t\t\t\t},\n\t\t\t\ttargetInRange: function (card, player, target, now) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tif (card?.cards?.some(cardx => cardx.hasGaintag(\"newpolongmrfz\"))) return true;\n\t\t\t\t},\n\t\t\t},\n\t\t\taudio: \"polongmrfz\",\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\n\t\t\tfilter(event, player) {\n\t\t\t\treturn game.countPlayer(char => char.countCards(\"h\") > 0) > 1;\n\t\t\t},\n\t\t\tasync cost(event, trigger, player) {\n\t\t\t\tevent.result = await player\n\t\t\t\t\t.chooseTarget()\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"newpolongmrfz\"))\n\t\t\t\t\t.set(\"prompt2\", `你可以令一名角色A与角色B(角色B不能为你)拼点，若角色A赢，你将判定区的牌翻面，然后摸2X张牌，且你因此获得的牌本回合无距离次数限制。（X=你因此翻面的牌数）`)\n\t\t\t\t\t.set(\"targetprompt\", [\"角色A\", \"角色B\"])\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\n\t\t\t\t\t\tif (target.countCards(\"h\") < 1) return false;\n\t\t\t\t\t\tlet targets = ui.selected.targets;\n\t\t\t\t\t\treturn targets.length < 1 || (targets[0].canCompare(target) && target !== player);\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"ai\", target => {\n\t\t\t\t\t\tlet targets = ui.selected.targets;\n\t\t\t\t\t\tlet player = get.player();\n\t\t\t\t\t\tif (player.countCards(\"j\", card => get.type(card) === \"delay\") < 1) {\n\t\t\t\t\t\t\treturn get.attitude2(target) < 0;\n\t\t\t\t\t\t} else if (targets.length < 1) {\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tif (player.countCards(\"h\", card => get.number(card) > 7) > 0) return target === player ? 114514 : -1;\n\t\t\t\t\t\t\treturn get.attitude2(target) < 0 || (get.attitude2(target) > 0 && target.countCards(\"h\") > 3);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn get.attitude2(target) < 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"complexTarget\", true)\n\t\t\t\t\t.set(\"selectTarget\", 2)\n\t\t\t\t\t.forResult();\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tconst [targetA, targetB] = event.targets;\n\t\t\t\tconst result = await targetA.chooseToCompare(targetB).forResult();\n\t\t\t\tif (result.winner === targetA) {\n\t\t\t\t\tconst cards = player.getCards(\"j\").filter(card => get.type(card) === \"delay\");\n\t\t\t\t\tgame.cardsGotoOrdering(cards);\n\t\t\t\t\tconst links = cards\n\t\t\t\t\t\t.map(card => {\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\treturn card.viewAs ? card.cards : get.autoViewAs(card);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.flat();\n\t\t\t\t\tconsole.log(links);\n\t\t\t\t\tlinks.forEach(card => {\n\t\t\t\t\t\tif (get.type(card, null, false) !== \"delay\") {\n\t\t\t\t\t\t\tcard.fix();\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tplayer.addJudge({ name: \"xumou_jsrg\" }, [card]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tplayer.addJudge({ name: \"xumou_jsrg\" }, card.cards);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tplayer.draw(links.length * 2).set(\"gaintag\", [\"newpolongmrfz\"]);\n\t\t\t\t}\n\t\t\t},\n\t\t\tgroup: \"newpolongmrfz_clear\",\n\t\t\tsubSkill: {\n\t\t\t\tclear: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tplayer.removeGaintag(\"newpolongmrfz\", player.getCards(\"h\"));\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t//丰川祥子\n\t\tsongyuemrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\n\t\t\tfrequent: true,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tfor (let t of [1, 2, 3]) {\n\t\t\t\t\tconst { color } = await player.judge().forResult();\n\t\t\t\t\tif (player.countCards(\"h\") < 1) continue;\n\t\t\t\t\tconst { cards } = await player\n\t\t\t\t\t\t.chooseCard(\"h\", true)\n\t\t\t\t\t\t.set(\"prompt\", `你可以重铸一张手牌，若重铸的牌与判定牌颜色(${get.translation(color)})一致，你摸${lib.skill.wuweimrfz.getNum(player, event.name)}张牌。`)\n\t\t\t\t\t\t.set(\"ai\", card => {\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tlet { player, color, num } = get.event();\n\t\t\t\t\t\t\treturn (get.color(card) === color ? 8 : 6) - get.value(card);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.set(\"color\", color)\n\t\t\t\t\t\t.set(\"num\", lib.skill.wuweimrfz.getNum(player, event.name))\n\t\t\t\t\t\t.forResult();\n\t\t\t\t\tif (!cards) return;\n\t\t\t\t\tlet card = cards[0];\n\t\t\t\t\tplayer.recast(card);\n\t\t\t\t\tif (!card || lib.skill.wuweimrfz.getNum(player, event.name) < 1) continue;\n\t\t\t\t\tif (get.color(card) === color) player.draw(lib.skill.wuweimrfz.getNum(player, event.name));\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\n\t\tyuxiangmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tglobal: \"phaseEnd\",\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\tlet centralArea = get.discarded();\n\t\t\t\treturn (\n\t\t\t\t\tcentralArea.filter(card => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\tgame.getGlobalHistory(\"changeHp\", evt => {\n\t\t\t\t\t\t\t\tlet evtx = evt.getParent();\n\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\tif (evtx.name === \"damage\" && evtx.num > 0) return evtx.cards?.includes(card);\n\t\t\t\t\t\t\t}).length > 0\n\t\t\t\t\t\t);\n\t\t\t\t\t}).length > 0\n\t\t\t\t);\n\t\t\t},\n\t\t\tasync cost(event, trigger, player) {\n\t\t\t\tlet centralArea = get.discarded().filter(card => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\tgame.getGlobalHistory(\"changeHp\", evt => {\n\t\t\t\t\t\t\tlet evtx = evt.getParent();\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tif (evtx.name === \"damage\" && evtx.num > 0) return evtx.cards?.includes(card);\n\t\t\t\t\t\t}).length > 0\n\t\t\t\t\t);\n\t\t\t\t});\n\n\t\t\t\tconst result = await player\n\t\t\t\t\t.chooseButton()\n\t\t\t\t\t.set(\"createDialog\", [get.prompt(event.skill) + `选择你要${get.poptip(\"sjzx_byRecast\")}使用的牌`, centralArea])\n\t\t\t\t\t.set(\"ai\", button => {\n\t\t\t\t\t\tlet player = get.player();\n\t\t\t\t\t\treturn player.getUseValue(button);\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"filterButton\", button => {\n\t\t\t\t\t\tlet player = get.player();\n\t\t\t\t\t\treturn player.hasUseTarget(button);\n\t\t\t\t\t})\n\t\t\t\t\t.forResult();\n\t\t\t\tevent.result = {\n\t\t\t\t\t...result,\n\t\t\t\t\tcost_data: {\n\t\t\t\t\t\tcards: result?.links,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet [card] = event.cost_data.cards;\n\t\t\t\tplayer.recast(card);\n\t\t\t\tplayer.chooseUseTarget(card, true);\n\t\t\t},\n\t\t},\n\n\t\twuweimrfz: {\n\t\t\taudioname: [\"ruoyemumrfz\", \"youtiansiruomaimrfz\", \"sanjiaochuhuamrfz\", \"bafanhailingmrfz\"],\n\t\t\taudio: 2,\n\t\t\tinit(player, skill) {\n\t\t\t\tplayer.storage[skill] = {};\n\n\t\t\t\t//添加动态翻译\n\t\t\t\tgame.broadcastAll(skills => {\n\t\t\t\t\tskills.forEach(skill => {\n\t\t\t\t\t\tlet info = get.skillInfoTranslation(skill);\n\t\t\t\t\t\tlib.dynamicTranslate[skill] = function (player) {\n\t\t\t\t\t\t\tif (!player.storage.wuweimrfz || lib.skill.wuweimrfz.getNum(player, skill) < 1) return info;\n\t\t\t\t\t\t\treturn info + `（X=你本轮触发过的${get.poptip(\"sjzx_cardUseType\")}数）`;\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\n\t\t\t\t\tlib.dynamicTranslate[\"wuweimrfz\"] = function (player) {\n\t\t\t\t\t\tlet info = get.skillInfoTranslation(\"wuweimrfz\");\n\t\t\t\t\t\tif (!player.storage.wuweimrfz) return info;\n\t\t\t\t\t\tfor (let skill of skills) {\n\t\t\t\t\t\t\tif (lib.skill.wuweimrfz.getNum(player, skill) > 0) return info.replace(`（X=你本轮触发过的${get.poptip(\"sjzx_cardUseType\")}数）`, \"\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn info;\n\t\t\t\t\t};\n\t\t\t\t}, lib.skill.wuweimrfz.validSkills);\n\t\t\t},\n\t\t\tclanSkill: true,\n\t\t\tgetNum(receiver, skill) {\n\t\t\t\tfor (let player of game.players) {\n\t\t\t\t\tlet storage = player.storage.wuweimrfz;\n\t\t\t\t\tif (!storage) continue;\n\t\t\t\t\tfor (let id in storage) {\n\t\t\t\t\t\tlet info = storage[id];\n\t\t\t\t\t\tif (info.receiver.playerid !== receiver.playerid) continue;\n\t\t\t\t\t\tif (info.skill === skill) {\n\t\t\t\t\t\t\tlet num = 0;\n\t\t\t\t\t\t\t//重铸\n\t\t\t\t\t\t\tif (receiver.getRoundHistory(\"lose\", evt => evt.getParent(2).name === \"recast\").length > 0) num++;\n\t\t\t\t\t\t\t//使用\n\t\t\t\t\t\t\tif (receiver.getRoundHistory(\"useCard\").length > 0) num++;\n\t\t\t\t\t\t\t//打出\n\t\t\t\t\t\t\tif (receiver.getRoundHistory(\"respond\").length > 0) num++;\n\t\t\t\t\t\t\t//弃置\n\t\t\t\t\t\t\tif (receiver.getRoundHistory(\"lose\", evt => evt.type === \"discard\").length > 0) num++;\n\t\t\t\t\t\t\treturn num;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn 0;\n\t\t\t},\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"recastAfter\",\n\t\t\t},\n\t\t\tvalidSkills: [\"songyuemrfz\", \"yuxiangmrfz\", \"lingwomrfz\", \"pojianmrfz\", \"leigumrfz\", \"jiaoyingmrfz\", \"weimianmrfz\", \"weiquanmrfz\", \"chendiemrfz\", \"umiri_chenxianmrfz\"],\n\t\t\tfilter(event, player) {\n\t\t\t\treturn Object.keys(player.storage.wuweimrfz).length < 1;\n\t\t\t},\n\t\t\tasync cost(event, trigger, player) {\n\t\t\t\tconst { targets } = await player\n\t\t\t\t\t.chooseTarget()\n\t\t\t\t\t.set(\"prompt2\", `你可以将本技能句号之后的描述移至同族武将的武将牌上任意一个技能直到本轮结束`)\n\t\t\t\t\t.set(\"prompt\", `【毋畏】:请选择一名${get.poptip(\"sjzx_AveMujica\")}角色`)\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\n\t\t\t\t\t\tlet flag = false;\n\t\t\t\t\t\tlet skills = target.getOriginalSkills().filter(skill => lib.skill.wuweimrfz.validSkills.includes(skill));\n\t\t\t\t\t\tfor (let skill of skills) {\n\t\t\t\t\t\t\tif (lib.skill.wuweimrfz.getNum(target, skill) < 1) {\n\t\t\t\t\t\t\t\tflag = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn flag && target.getClans(true).includes(\"AveMujica\");\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"ai\", target => get.attitude2(target) > 0)\n\t\t\t\t\t.forResult();\n\t\t\t\tif (!targets) return;\n\t\t\t\tlet target = targets[0];\n\t\t\t\tif (!target) {\n\t\t\t\t\tevent.result = {\n\t\t\t\t\t\tbool: false,\n\t\t\t\t\t};\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet skills = target.getOriginalSkills().filter(skill => lib.skill.wuweimrfz.validSkills.includes(skill));\n\t\t\t\tif (skills.length < 1) {\n\t\t\t\t\tevent.result = {\n\t\t\t\t\t\tbool: false,\n\t\t\t\t\t};\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst result = await player\n\t\t\t\t\t.chooseControl(skills.concat(\"cancel2\"))\n\t\t\t\t\t.set(\"prompt\", `为一个技能添加下列描述直到本轮结束：“（X=你本轮触发过的${get.poptip(\"sjzx_cardUseType\")}数）”`)\n\t\t\t\t\t.set(\"ai\", () => {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\treturn get.event().skills.randomGet();\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"skills\", skills)\n\t\t\t\t\t.forResult();\n\t\t\t\tevent.result = {\n\t\t\t\t\t...result,\n\t\t\t\t\tcost_data: result,\n\t\t\t\t};\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet skill = event.cost_data.control;\n\t\t\t\tif (!player.storage.wuweimrfz) player.storage.wuweimrfz = {};\n\t\t\t\tif (player.playerid) {\n\t\t\t\t\tplayer.storage.wuweimrfz[player.playerid] = {\n\t\t\t\t\t\tskill: skill,\n\t\t\t\t\t\treceiver: player,\n\t\t\t\t\t};\n\t\t\t\t\tplayer.when({ global: \"roundStart\" }).then(() => {\n\t\t\t\t\t\tif (player.playerid) delete player.storage.wuweimrfz[player.playerid];\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\n\t\t//新嵯峨\n\t\t//默认技能组\n\t\thuanyoumrfz: {\n\t\t\taudio: \"chuemrfz\",\n\t\t\tforced: true,\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"gainAfter\",\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\treturn !player.isPhaseUsing() && event.cards.length > 0 && event.getParent().name !== \"huanyoumrfz\";\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tplayer.gain(lib.card.ying.getYing(trigger.cards.length), \"gain2\");\n\t\t\t},\n\t\t\tgroup: [\"huanyoumrfz_hideHandCards\"],\n\t\t\tsubSkill: {\n\t\t\t\thideHandCards: {\n\t\t\t\t\taudio: \"huanyoumrfz\",\n\t\t\t\t\tforced: true,\n\t\t\t\t\ttrigger: { player: \"phaseUseBegin\" },\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tlet handcard = player.node.handcards1.parentElement;\n\t\t\t\t\t\tplayer.node.washTip = ui.create.div(handcard, \".washTip\");\n\t\t\t\t\t\tplayer.node.washTip.innerHTML = \"洗牌中...\";\n\n\t\t\t\t\t\tlet hs = [];\n\t\t\t\t\t\tlet origin = player.getCards(\"h\");\n\t\t\t\t\t\tfor (let i = 0; i < player.getCards(\"h\").length; i++) {\n\t\t\t\t\t\t\tlet r = origin.randomGet();\n\t\t\t\t\t\t\ths.push(r);\n\t\t\t\t\t\t\torigin.remove(r);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.broadcastAll(\n\t\t\t\t\t\t\tfunction (hs, player) {\n\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\ths.forEach(i => i.goto(ui.special));\n\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\tplayer.directgain(hs, false);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ths,\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tplayer\n\t\t\t\t\t\t);\n\t\t\t\t\t\tplayer.addTempSkill(\"huanyoumrfz_hideHandCards_eff\", { player: \"phaseEnd\" });\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\thideHandCards_eff: {\n\t\t\t\t\tmod: {\n\t\t\t\t\t\tcardname(card, player, name) {\n\t\t\t\t\t\t\tif (card.storage.huanyoumrfz) {\n\t\t\t\t\t\t\t\treturn \"cuoe_huanyoumrfzCard\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tinit(player) {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tif (!player.node.handcards1.cardMod) {\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tplayer.node.handcards1.cardMod = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tif (!player.node.handcards2.cardMod) {\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tplayer.node.handcards2.cardMod = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar cardMod = function (card) {\n\t\t\t\t\t\t\treturn [\"幻有\", \"手牌对你不可见\"];\n\t\t\t\t\t\t};\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tplayer.node.handcards1.cardMod.huanyoumrfz = cardMod;\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tplayer.node.handcards2.cardMod.huanyoumrfz = cardMod;\n\t\t\t\t\t\tplayer.node.handcards1.classList.add(\"huanyoumrfz\");\n\t\t\t\t\t\tplayer.node.handcards2.classList.add(\"huanyoumrfz\");\n\n\t\t\t\t\t\tplayer.getCards(\"h\").forEach(i => {\n\t\t\t\t\t\t\ti.storage.huanyoumrfz = true;\n\t\t\t\t\t\t\ti.dataset.skilltag = \"huanyoumrfz\";\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tplayer.node.washTip.remove();\n\t\t\t\t\t\t\tdelete player.node.washTip;\n\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t},\n\t\t\t\t\tonremove(player) {\n\t\t\t\t\t\tplayer.node.handcards1.classList.remove(\"huanyoumrfz\");\n\t\t\t\t\t\tplayer.node.handcards2.classList.remove(\"huanyoumrfz\");\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tdelete player.node.handcards1.cardMod.huanyoumrfz;\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tdelete player.node.handcards2.cardMod.huanyoumrfz;\n\t\t\t\t\t\tplayer.getCards(\"h\").forEach(i => {\n\t\t\t\t\t\t\tif (i.storage.huanyoumrfz) {\n\t\t\t\t\t\t\t\tdelete i.storage.huanyoumrfz;\n\t\t\t\t\t\t\t\tdelete i.dataset.skilltag;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"useCardAfter\",\n\t\t\t\t\t},\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\treturn event.card.storage?.huanyoumrfz && event.cards.length === 1 && !event.card.failToUse && !event.getParent().noTriggerHuanyoumrfz;\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\ttrigger.cards.forEach(card => {\n\t\t\t\t\t\t\tif (card.storage.huanyoumrfz) player.draw();\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tneg: true,\n\t\t\t},\n\t\t},\n\t\twenxinmrfz: {\n\t\t\taudio: 3,\n\t\t\tderivation: \"zhishuimrfz\",\n\t\t\tgroup: [\"wenxinmrfz_achieve\", \"wenxinmrfz_turnOver\", \"wenxinmrfz_fail\"],\n\t\t\tsubSkill: {\n\t\t\t\tachieve: {\n\t\t\t\t\taudio: true,\n\t\t\t\t\tlogAudio() {\n\t\t\t\t\t\treturn skillCustomFunc.getSkillAudioPath(\"wenxinmrfz\", 1);\n\t\t\t\t\t},\n\t\t\t\t\tforced: true,\n\t\t\t\t\tskillAnimation: true,\n\t\t\t\t\tanimationColor: \"metal\",\n\t\t\t\t\tlastDo: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"phaseEnd\",\n\t\t\t\t\t},\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\tlet useList = player\n\t\t\t\t\t\t\t.getHistory(\"useCard\", evt => evt.card.name === \"cuoe_huanyoumrfzCard\" || !evt.card.storage.huanyoumrfz)\n\t\t\t\t\t\t\t.map(evt => {\n\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\treturn evt.card.name === \"cuoe_huanyoumrfzCard\" ? get.name(evt.card.cards[0]) : evt.card.name;\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\tlet count = 0;\n\t\t\t\t\t\tfor (let name of useList) {\n\t\t\t\t\t\t\tif (name === \"ying\") {\n\t\t\t\t\t\t\t\tcount = 0;\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t\tif (count >= 3) return true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tgame.log(player, \"成功完成使命\");\n\t\t\t\t\t\tplayer.awakenSkill(\"wenxinmrfz\");\n\t\t\t\t\t\tplayer.addSkills([\"zhishuimrfz\"]);\n\t\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tturnOver: {\n\t\t\t\t\taudio: true,\n\t\t\t\t\tlogAudio() {\n\t\t\t\t\t\treturn skillCustomFunc.getSkillAudioPath(\"wenxinmrfz\", 3);\n\t\t\t\t\t},\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"useCardAfter\",\n\t\t\t\t\t},\n\t\t\t\t\tlastDo: true,\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\treturn player.countCards(\"h\", card => card.storage.huanyoumrfz) > 0 && event.card.storage?.huanyoumrfz && event.cards.length === 1 && !event.getParent().noTriggerHuanyoumrfz;\n\t\t\t\t\t},\n\t\t\t\t\tasync cost(event, trigger, player) {\n\t\t\t\t\t\tevent.result = await player\n\t\t\t\t\t\t\t.chooseCard(\"h\")\n\t\t\t\t\t\t\t.set(\"prompt\", get.prompt(\"wenxinmrfz\"))\n\t\t\t\t\t\t\t.set(\"prompt2\", `你可以令一张背面朝上的手牌正面朝上`)\n\t\t\t\t\t\t\t.set(\"filterCard\", card => card.storage.huanyoumrfz)\n\t\t\t\t\t\t\t.set(\"ai\", () => Math.random())\n\t\t\t\t\t\t\t.forResult();\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tlet card = event.cards[0];\n\t\t\t\t\t\tdelete card.storage.huanyoumrfz;\n\t\t\t\t\t\tdelete card.dataset.skilltag;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tfail: {\n\t\t\t\t\taudio: true,\n\t\t\t\t\tlogAudio() {\n\t\t\t\t\t\treturn skillCustomFunc.getSkillAudioPath(\"wenxinmrfz\", 2);\n\t\t\t\t\t},\n\t\t\t\t\tforced: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"phaseEnd\",\n\t\t\t\t\t},\n\t\t\t\t\tfirstDo: true,\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\tlet useList = player\n\t\t\t\t\t\t\t.getHistory(\"useCard\", evt => evt.card.name === \"cuoe_huanyoumrfzCard\" || !evt.card.storage.huanyoumrfz)\n\t\t\t\t\t\t\t.map(evt => {\n\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\treturn evt.card.name === \"cuoe_huanyoumrfzCard\" ? get.name(evt.card.cards[0]) : evt.card.name;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\treturn (useList.length === 0 || (useList[0] === \"ying\" && new Set(useList).size === 1)) && !player.getHistory(\"skipped\").includes(\"phaseUse\");\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tgame.log(player, \"使命失败\");\n\t\t\t\t\t\tplayer.awakenSkill(\"wenxinmrfz\");\n\t\t\t\t\t\tplayer.addSkill([\"wenxinmrfz_fail_buff\"]);\n\t\t\t\t\t\tplayer.markSkill(\"wenxinmrfz_fail_buff\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tfail_buff: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"phaseDrawBegin\",\n\t\t\t\t\t},\n\t\t\t\t\tintro: {\n\t\t\t\t\t\tcontent: \"·每个摸牌阶段开始时获得一张【影】<br>·如真似幻，扑朔迷离。\",\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tplayer.gain(lib.card.ying.getYing(1), \"gain2\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tzhishuimrfz: {\n\t\t\taudio: 2,\n\t\t\tforced: true,\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"useCardBegin\",\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\treturn event.card.storage?.huanyoumrfz && !event.card.storage?.zhishuimrfz && event.card.cards.length === 1 && !player.hasUseTarget(event.card.cards[0].name);\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tawait player.useCard(\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"dongzhuxianji\",\n\t\t\t\t\t\tsuit: trigger.card.suit,\n\t\t\t\t\t\tnumber: trigger.card.number,\n\t\t\t\t\t\tnature: trigger.card.nature,\n\t\t\t\t\t\tstorage: {\n\t\t\t\t\t\t\t...trigger.card.storage,\n\t\t\t\t\t\t\tzhishuimrfz: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tisCard: true,\n\t\t\t\t\t},\n\t\t\t\t\ttrigger.cards,\n\t\t\t\t\tplayer\n\t\t\t\t);\n\t\t\t\ttrigger.cancel();\n\t\t\t},\n\t\t},\n\t\t//模组：何处寻驼？\n\t\tqianxianmrfz: {\n\t\t\taudio: \"chuemrfz\",\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"useCardToPlayered\",\n\t\t\t\ttarget: \"useCardToTargeted\",\n\t\t\t},\n\t\t\tforced: true,\n\t\t\tinit(player, skill) {\n\t\t\t\tplayer.storage[skill] = [];\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\tif (![\"trick\", \"basic\"].includes(get.type(event.card))) return false;\n\t\t\t\treturn player === event.target || event.getParent().triggeredTargets3.length === 1;\n\t\t\t},\n\t\t\tmark: true,\n\t\t\tintro: {\n\t\t\t\tcontent(storage) {\n\t\t\t\t\treturn `记录的牌名：${get.translation(storage)}`;\n\t\t\t\t},\n\t\t\t},\n\t\t\tonremove: true,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tif (player.storage.qianxianmrfz.includes(trigger.card.name)) {\n\t\t\t\t\tplayer.storage.qianxianmrfz.remove(trigger.card.name);\n\t\t\t\t\tplayer.draw();\n\t\t\t\t} else {\n\t\t\t\t\tplayer.storage.qianxianmrfz.push(trigger.card.name);\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\ttrigger.getParent()?.excluded.add(...trigger.targets);\n\t\t\t\t\ttrigger.player.draw(2);\n\t\t\t\t}\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tthreaten: 2,\n\t\t\t},\n\t\t},\n\t\tziwumrfz: {\n\t\t\taudio: \"wenxinmrfz\",\n\t\t\tderivation: \"dunkongmrfz\",\n\t\t\tforced: true,\n\t\t\tjuexingji: true,\n\t\t\tskillAnimation: true,\n\t\t\tanimationColor: \"thunder\",\n\t\t\tunique: true,\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\n\t\t\tfilter(event, player) {\n\t\t\t\treturn player.storage.qianxianmrfz?.length >= 5;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tplayer.awakenSkill(event.name);\n\t\t\t\tplayer.recoverTo(3);\n\t\t\t\tawait player.draw(player.storage.qianxianmrfz.length);\n\t\t\t\tplayer.storage.qianxianmrfz = [];\n\t\t\t\tplayer.addSkill(\"dunkongmrfz\");\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tcombo: \"qianxianmrfz\",\n\t\t\t},\n\t\t},\n\t\tdunkongmrfz: {\n\t\t\taudio: \"zhishuimrfz\",\n\t\t\tenable: \"phaseUse\",\n\t\t\tusable: 1,\n\t\t\tonremove(player, skill) {\n\t\t\t\tplayer.enableSkill(skill);\n\t\t\t},\n\t\t\tintro: {\n\t\t\t\tcontent(_, player) {\n\t\t\t\t\tlet num = Math.min(5, player.storage.qianxianmrfz.length);\n\t\t\t\t\treturn `·使用【杀】的次数+${num}<br>·手牌上限+${num}<br>·计算与其他角色的距离-${num}`;\n\t\t\t\t},\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet numx = Math.min(5, player.storage.qianxianmrfz.length);\n\t\t\t\tplayer.draw(numx);\n\t\t\t\tplayer.disableSkill(\"dunkongmrfz\", \"qianxianmrfz\");\n\t\t\t\tplayer.markSkill(\"dunkongmrfz\");\n\t\t\t\tplayer\n\t\t\t\t\t.when(\"phaseEnd\")\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tplayer.enableSkill(\"dunkongmrfz\");\n\t\t\t\t\t\tplayer.unmarkSkill(\"dunkongmrfz\");\n\t\t\t\t\t\tif (player.storage.qianxianmrfz?.length > 0) {\n\t\t\t\t\t\t\tplayer.storage.qianxianmrfz.remove(player.storage.qianxianmrfz.randomGet());\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.assign({\n\t\t\t\t\t\tmod: {\n\t\t\t\t\t\t\tmaxHandcard(player, num) {\n\t\t\t\t\t\t\t\treturn num + numx;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcardUsable(card, player, num) {\n\t\t\t\t\t\t\t\tif (card.name === \"sha\") return num + numx;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tglobalFrom(from, to, distance) {\n\t\t\t\t\t\t\t\treturn distance - numx;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 13,\n\t\t\t\tresult: {\n\t\t\t\t\tplayer(player) {\n\t\t\t\t\t\treturn player.storage.qianxianmrfz.length > 1;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t//斩业星熊\n\t\t/** @type { Skill } */\n\t\twozhimrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tplayer: [\"changeHp\"],\n\t\t\t},\n\t\t\tforced: true,\n\t\t\tlocked: true,\n\t\t\tmod: {\n\t\t\t\tmaxHandcardBase(player, num) {\n\t\t\t\t\treturn player.storage.zhanyemrfz ? player.maxHp : num;\n\t\t\t\t},\n\t\t\t},\n\t\t\tinit(player) {\n\t\t\t\t//@ts-ignore设置getter和setter来更新hp显示\n\t\t\t\tplayer._hp = player.hp;\n\t\t\t\t//@ts-ignore\n\t\t\t\tplayer._maxHp = player.maxHp;\n\t\t\t\tlet isUpdateHp = false;\n\t\t\t\tlet isUpdateMaxHp = false;\n\t\t\t\tskillCustomFunc.defineAccessor(\n\t\t\t\t\tplayer,\n\t\t\t\t\t[\"hp\", \"maxHp\"],\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t[() => player._hp, () => player._maxHp],\n\t\t\t\t\t[\n\t\t\t\t\t\tvalue => {\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tplayer._hp = value;\n\t\t\t\t\t\t\tif (!isUpdateHp) {\n\t\t\t\t\t\t\t\tisUpdateHp = true;\n\t\t\t\t\t\t\t\tlib.skill.wozhimrfz.updateHp(player);\n\t\t\t\t\t\t\t\tisUpdateHp = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tvalue => {\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tplayer._maxHp = value;\n\t\t\t\t\t\t\tif (!isUpdateMaxHp) {\n\t\t\t\t\t\t\t\tisUpdateMaxHp = true;\n\t\t\t\t\t\t\t\tlib.skill.wozhimrfz.updateHp(player);\n\t\t\t\t\t\t\t\tisUpdateMaxHp = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t]\n\t\t\t\t);\n\t\t\t},\n\t\t\tintro: {\n\t\t\t\tcontent(storage, player) {\n\t\t\t\t\tlet str = [];\n\t\t\t\t\tif (player.storage.zhanyemrfz) str.push(\"我执已修改\");\n\t\t\t\t\tif (typeof storage !== \"number\" || storage === 0) str.push(\"体力值目前十分健康！\");\n\t\t\t\t\telse str.push(`额外体力：${player.maxHp - storage}/${player.maxHp}`);\n\t\t\t\t\treturn str.map(s => \"·\" + s).join(\"<br>\");\n\t\t\t\t},\n\t\t\t},\n\t\t\tonremove(player, skill) {\n\t\t\t\tif (player.hp <= 0 && player.countMark(\"wozhimrfz\") > 0) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tplayer.die({});\n\t\t\t\t\tdelete player.storage[skill];\n\t\t\t\t}\n\t\t\t\tlib.skill.wozhimrfz.updateHp(player);\n\t\t\t},\n\t\t\tupdateHp(player) {\n\t\t\t\tlet num = player.countMark(\"wozhimrfz\");\n\n\t\t\t\tconst hp = player.querySelector(\".hp\");\n\t\t\t\tlet clone = player.querySelector(\".hpClone\") || tmpSave.spxingxiong_clone;\n\t\t\t\tconst cloneMaxhp = clone?.children?.length;\n\n\t\t\t\tif (cloneMaxhp !== player.maxHp && clone) {\n\t\t\t\t\tclone.remove();\n\t\t\t\t\tdelete tmpSave.spxingxiong_clone;\n\t\t\t\t\tlib.skill.wozhimrfz.updateHp(player);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (player.hp <= 0) {\n\t\t\t\t\tif (!clone) {\n\t\t\t\t\t\tconst parent = hp.parentNode;\n\t\t\t\t\t\tconst hpClone = ui.create.div(\".hp hpClone\", parent);\n\t\t\t\t\t\thpClone.style.zIndex = \"114514\";\n\t\t\t\t\t\thpClone.dataset.condition = \"low\";\n\n\t\t\t\t\t\tfor (let i = 0; i < player.maxHp; i++) {\n\t\t\t\t\t\t\tui.create.div(hpClone);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tclone = hpClone;\n\n\t\t\t\t\t\ttmpSave.spxingxiong_clone = clone;\n\t\t\t\t\t}\n\t\t\t\t\thp.style.display = \"none\";\n\t\t\t\t\tlet hps = Array.from(clone.childNodes);\n\t\t\t\t\tif (!hps) return;\n\t\t\t\t\tfor (let i = 0; i < hps.length; i++) {\n\t\t\t\t\t\tif (i < num) hps[i].classList.remove(\"lost\");\n\t\t\t\t\t\telse hps[i].classList.add(\"lost\");\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\thp.style.display = \"\";\n\t\t\t\t\tif (clone !== void 0) {\n\t\t\t\t\t\tclone.remove();\n\t\t\t\t\t\tdelete tmpSave.spxingxiong_clone;\n\t\t\t\t\t}\n\t\t\t\t\tplayer.update();\n\t\t\t\t}\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\treturn player.hp <= 0 && event.num < 0;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tconst evt = trigger;\n\t\t\t\tconst num = -evt.num - Math.max(player.hp - evt.num, 1) + 1;\n\t\t\t\tif (num > 0) player.addMark(\"wozhimrfz\", num);\n\n\t\t\t\tif (player.countMark(\"wozhimrfz\") < player.maxHp) {\n\t\t\t\t\t/** @type { GameEvent } */\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tlet evt2 = evt.getParent();\n\t\t\t\t\tlet max = 3;\n\t\t\t\t\twhile (max--) {\n\t\t\t\t\t\tif (evt2.name === \"damage\" || evt2.name === \"loseHp\") {\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tevt2.nodying = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlib.skill.wozhimrfz.updateHp(player);\n\t\t\t},\n\t\t\tgroup: [\"wozhimrfz_recover\", \"wozhimrfz_change\"],\n\t\t\tsubSkill: {\n\t\t\t\tchange: {\n\t\t\t\t\taudio: \"wozhimrfz\",\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"phaseAfter\",\n\t\t\t\t\t},\n\t\t\t\t\tforced: true,\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\treturn player.hp < 1 && player.storage.zhanyemrfz;\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\trecover: {\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"recoverAfter\",\n\t\t\t\t\t},\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\treturn player.countMark(\"wozhimrfz\") > 0 && event.num > 0;\n\t\t\t\t\t},\n\t\t\t\t\tforced: true,\n\t\t\t\t\tpopup: false,\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tawait player.removeMark(\"wozhimrfz\", trigger.num);\n\n\t\t\t\t\t\tif (player.countMark(\"wozhimrfz\") < player.maxHp) {\n\t\t\t\t\t\t\tif (player.isDying()) {\n\t\t\t\t\t\t\t\tconst histories = [event];\n\t\t\t\t\t\t\t\tlet evt = event;\n\t\t\t\t\t\t\t\twhile (true) {\n\t\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\t\tevt = event.getParent(\"dying\");\n\t\t\t\t\t\t\t\t\tif (!evt || evt.name !== \"dying\" || histories.includes(evt)) {\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\thistories.push(evt);\n\t\t\t\t\t\t\t\t\tif (evt.player === player) {\n\t\t\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\t\t\tevt.nodying = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlib.skill.wozhimrfz.updateHp(player);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tmingzhi: true,\n\t\t\t\teffect: {\n\t\t\t\t\ttarget(card, player, target) {\n\t\t\t\t\t\tif (get.tag(card, \"damage\") || get.tag(card, \"losehp\")) {\n\t\t\t\t\t\t\tlet num = target.countMark(\"wozhimrfz\") || target.getHp();\n\t\t\t\t\t\t\treturn (num + 1) / 3;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tguishimrfz: {\n\t\t\taudio: 2,\n\t\t\tlocked(skill, player) {\n\t\t\t\tif (!player || !player.storage.zhanyemrfz) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"phaseUseBegin\",\n\t\t\t},\n\t\t\tasync cost(event, trigger, player) {\n\t\t\t\tif (!player.storage.zhanyemrfz) {\n\t\t\t\t\tevent.result = {\n\t\t\t\t\t\tbool: true,\n\t\t\t\t\t};\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tevent.result = await player\n\t\t\t\t\t.chooseTarget()\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"guishimrfz\"))\n\t\t\t\t\t.set(\"prompt2\", `你可以失去一点体力，然后令一名角色摸${get.cnNumber(Math.min(player.getDamagedHp(), 5))}张牌，若该角色不为你，你可以在结束阶段再次发动【鬼势】`)\n\t\t\t\t\t.set(\"ai\", target => {\n\t\t\t\t\t\tlet player = get.player();\n\t\t\t\t\t\tlet num = Math.max(player.hp, 0);\n\t\t\t\t\t\tif (player.hasSkill(\"wozhimrfz\")) {\n\t\t\t\t\t\t\tnum += player.maxHp - player.countMark(\"wozhimrfz\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn get.attitude2(target) > 0 && num >= 2;\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"animate\", false)\n\t\t\t\t\t.forResult();\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tif (!player.storage.zhanyemrfz) {\n\t\t\t\t\tawait player.loseHp();\n\t\t\t\t\tplayer.draw(player.getDamagedHp());\n\t\t\t\t} else {\n\t\t\t\t\tlet target = event.targets[0];\n\t\t\t\t\tawait player.loseHp();\n\t\t\t\t\ttarget.draw(Math.min(5, player.getDamagedHp()));\n\t\t\t\t\tif (player !== target) {\n\t\t\t\t\t\tplayer.line(target);\n\t\t\t\t\t\tplayer\n\t\t\t\t\t\t\t.when({\n\t\t\t\t\t\t\t\tplayer: [\"phaseJieshuBegin\", \"phaseEnd\"],\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.step(async (event, trigger, player) => {\n\t\t\t\t\t\t\t\tif (trigger.name === \"phase\") return;\n\t\t\t\t\t\t\t\tconst { targets } = await player\n\t\t\t\t\t\t\t\t\t.chooseTarget()\n\t\t\t\t\t\t\t\t\t.set(\"prompt\", get.prompt(\"guishimrfz\"))\n\t\t\t\t\t\t\t\t\t.set(\"prompt2\", `你可以失去一点体力，然后令一名角色摸${get.cnNumber(Math.min(4, player.getDamagedHp()))}张牌`)\n\t\t\t\t\t\t\t\t\t.set(\"ai\", target => {\n\t\t\t\t\t\t\t\t\t\tlet player = get.player();\n\t\t\t\t\t\t\t\t\t\tlet num = Math.max(player.hp, 0);\n\t\t\t\t\t\t\t\t\t\tif (player.hasSkill(\"wozhimrfz\")) {\n\t\t\t\t\t\t\t\t\t\t\tnum += player.maxHp - player.countMark(\"wozhimrfz\");\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn get.attitude2(target) > 0 && num >= 2;\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.set(\"animate\", false)\n\t\t\t\t\t\t\t\t\t.forResult();\n\t\t\t\t\t\t\t\tif (!targets) return;\n\t\t\t\t\t\t\t\tawait player.loseHp();\n\t\t\t\t\t\t\t\ttargets[0].draw(Math.min(4, player.getDamagedHp()));\n\t\t\t\t\t\t\t\tplayer.line(targets[0]);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\tzhanyemrfz: {\n\t\t\taudio: 4,\n\t\t\tderivation: [\"wozhimrfz_rewrite\", \"guishimrfz_rewrite\"],\n\t\t\tdutySkill:true,\n\t\t\tgroup: [\"zhanyemrfz_revenge\", \"zhanyemrfz_achieve\", \"zhanyemrfz_fail\"],\n\t\t\tsubSkill: {\n\t\t\t\trevenge: {\n\t\t\t\t\taudio: true,\n\t\t\t\t\tlogAudio() {\n\t\t\t\t\t\tlet path = lib.skill.zhanyemrfz.logAudio ? lib.skill.zhanyemrfz.logAudio() : lib.skill.zhanyemrfz.audio;\n\t\t\t\t\t\tpath = path.replace(path.slice(-2), \"\");\n\t\t\t\t\t\treturn [1, 2].map(i => path + `/zhanyemrfz${i}.mp3`);\n\t\t\t\t\t},\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tglobal: \"phaseBefore\",\n\t\t\t\t\t\tplayer: \"enterGame\",\n\t\t\t\t\t},\n\t\t\t\t\tonremove: true,\n\t\t\t\t\tmod: {\n\t\t\t\t\t\ttargetInRange(card, player, target) {\n\t\t\t\t\t\t\tif (player.getStorage(\"zhanyemrfz_revenge\").includes(target)) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcardUsableTarget(card, player, target) {\n\t\t\t\t\t\t\tif (player.getStorage(\"zhanyemrfz_revenge\").includes(target)) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tintro: {\n\t\t\t\t\t\tmark(dialog, content, player) {\n\t\t\t\t\t\t\tlet targets = player.storage.zhanyemrfz_revenge;\n\t\t\t\t\t\t\tif (targets) {\n\t\t\t\t\t\t\t\ttargets.forEach(target => {\n\t\t\t\t\t\t\t\t\tdialog.addSmall([target]);\n\t\t\t\t\t\t\t\t\tdialog.addText(`<font color=\"red\">向${get.translation(target)}复仇！</font>`);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdialog.addText(\"无“业”角色\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tlocked: true,\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\treturn game.hasPlayer(current => current !== player) && (event.name !== \"phase\" || game.phaseNumber === 0);\n\t\t\t\t\t},\n\t\t\t\t\tasync cost(event, trigger, player) {\n\t\t\t\t\t\tevent.result = await player\n\t\t\t\t\t\t\t.chooseTarget()\n\t\t\t\t\t\t\t.set(\"filterTarget\", lib.filter.notMe)\n\t\t\t\t\t\t\t.set(\"prompt\", \"游戏开始时，你令一名其他角色获得“业”标记，你对有“业”标记的角色使用牌无次数和距离限制。\")\n\t\t\t\t\t\t\t.set(\"forced\", true)\n\t\t\t\t\t\t\t.set(\"ai\", function (target) {\n\t\t\t\t\t\t\t\tlet att = get.attitude(_status.event.player, target);\n\t\t\t\t\t\t\t\tif (att > 0) {\n\t\t\t\t\t\t\t\t\treturn -att - 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (att === 0) {\n\t\t\t\t\t\t\t\t\treturn Math.random();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn -att;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.set(\"animate\", false)\n\t\t\t\t\t\t\t.forResult();\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tlet targets = event.targets;\n\t\t\t\t\t\tif (!player.storage.zhanyemrfz_revenge) player.storage.zhanyemrfz_revenge = [];\n\t\t\t\t\t\tplayer.storage.zhanyemrfz_revenge.add(...targets);\n\t\t\t\t\t\tplayer.line(targets);\n\t\t\t\t\t\tplayer.markSkill(\"zhanyemrfz_revenge\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tfail: {\n\t\t\t\t\taudio: true,\n\t\t\t\t\tlogAudio() {\n\t\t\t\t\t\tlet path = lib.skill.zhanyemrfz.logAudio ? lib.skill.zhanyemrfz.logAudio() : lib.skill.zhanyemrfz.audio;\n\t\t\t\t\t\tpath = path.replace(path.slice(-2), \"\");\n\t\t\t\t\t\treturn path + `/zhanyemrfz3.mp3`;\n\t\t\t\t\t},\n\t\t\t\t\tforced: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tglobal: \"dieAfter\",\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tgame.log(player, \"使命失败\");\n\t\t\t\t\t\tplayer.awakenSkill(\"zhanyemrfz\");\n\t\t\t\t\t\tplayer.unmarkSkill(\"zhanyemrfz_revenge\");\n\n\t\t\t\t\t\tlet copy = game.players.filter(c => c !== player);\n\t\t\t\t\t\tfor (let i = 0; i < 5; i++) {\n\t\t\t\t\t\t\tlet targets = game.filterPlayer(c => isMinHp(c, copy) && c !== player);\n\t\t\t\t\t\t\tawait player\n\t\t\t\t\t\t\t\t.chooseUseTarget({ name: \"sha\", isCard: true })\n\t\t\t\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\n\t\t\t\t\t\t\t\t\treturn targets.includes(target);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.set(\"forced\", true)\n\t\t\t\t\t\t\t\t.set(\"nodistance\", true)\n\t\t\t\t\t\t\t\t.set(\"addCount\", false);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.loseMaxHp(2);\n\n\t\t\t\t\t\tfunction isMinHp(player, players, only, raw) {\n\t\t\t\t\t\t\treturn players.every(value => {\n\t\t\t\t\t\t\t\tif (value.isOut() || value == player) {\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn only ? value.getHp(raw) > player.getHp(raw) : value.getHp(raw) >= player.getHp(raw);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tachieve: {\n\t\t\t\t\taudio: true,\n\t\t\t\t\tlogAudio() {\n\t\t\t\t\t\tlet path = lib.skill.zhanyemrfz.logAudio ? lib.skill.zhanyemrfz.logAudio() : lib.skill.zhanyemrfz.audio;\n\t\t\t\t\t\tpath = path.replace(path.slice(-2), \"\");\n\t\t\t\t\t\treturn path + `/zhanyemrfz4.mp3`;\n\t\t\t\t\t},\n\t\t\t\t\tforced: true,\n\t\t\t\t\tskillAnimation: true,\n\t\t\t\t\tanimationColor: \"metal\",\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tsource: \"damageEnd\",\n\t\t\t\t\t},\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\treturn player.getStorage(\"zhanyemrfz_revenge\").includes(event.player) && event.player.isAlive() && event.player.hp === 1;\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tgame.log(player, \"成功完成使命\");\n\t\t\t\t\t\tplayer.awakenSkill(\"zhanyemrfz\");\n\t\t\t\t\t\tplayer.unmarkSkill(\"zhanyemrfz_revenge\");\n\t\t\t\t\t\tplayer.storage.zhanyemrfz = true;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t//遥 羽生萌萌香 紫野遥\n\t\tyoulinmrfz: {\n\t\t\taudio: 2,\n\t\t\tenable: \"phaseUse\",\n\t\t\tusable(skill, player) {\n\t\t\t\treturn player.hasSkill(\"youlinmrfz_addCount\") ? 2 : 1;\n\t\t\t},\n\t\t\tfilterCard: true,\n\t\t\tselectCard: [0, 3],\n\t\t\tfilterTarget: true,\n\t\t\tselectTarget: [1, 3],\n\t\t\tdiscard: false,\n\t\t\tlose: false,\n\t\t\tdelay: 0,\n\t\t\tmultitarget: true,\n\t\t\tmultiline: true,\n\t\t\tcheck(card) {\n\t\t\t\tif (ui.selected.cards.length < 1) return true;\n\t\t\t\tlet num = 0;\n\t\t\t\tfor (let i of [\"type2\", \"number\", \"suit\"]) {\n\t\t\t\t\tif (!isInclude(i)) {\n\t\t\t\t\t\tnum++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn num;\n\n\t\t\t\tfunction isInclude(method) {\n\t\t\t\t\treturn ui.selected.cards.map(cardx => get[method](cardx)).includes(get[method](card));\n\t\t\t\t}\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet { cards, targets } = event,\n\t\t\t\t\tpileCards = [],\n\t\t\t\t\tshowCards = [];\n\t\t\t\tlet duplicateRemove = (arr, method) => Array.from(new Set(arr.map(card => get[method](card))));\n\t\t\t\t//@ts-ignore\n\t\t\t\tif (cards.length < 3) pileCards.push(...get.cards(3 - cards.length));\n\t\t\t\tshowCards = [...cards, ...pileCards];\n\t\t\t\tlet execute = [];\n\t\t\t\tif (duplicateRemove(showCards, \"number\").length === 3) execute.push(\"number\");\n\t\t\t\tif (duplicateRemove(showCards, \"suit\").length === 3) execute.push(\"suit\");\n\t\t\t\tif (duplicateRemove(showCards, \"type2\").length === 3) execute.push(\"type\");\n\t\t\t\tlet num = execute.length;\n\t\t\t\tlet tips = {\n\t\t\t\t\tnumber: \"<font color='red'>点数均不同</font>\",\n\t\t\t\t\tsuit: \"<font color='yellow'>花色均不同</font>\",\n\t\t\t\t\ttype: \"<font color='green'>类型均不同</font>\",\n\t\t\t\t};\n\t\t\t\tlet str = [];\n\t\t\t\tfor (let i of execute) {\n\t\t\t\t\tstr.push(tips[i]);\n\t\t\t\t}\n\t\t\t\tawait player.showCards(showCards, `${get.translation(player)}【游鳞】展示的牌<br>${str.join(\"<br>\")}`);\n\t\t\t\tgame.delay(2);\n\t\t\t\tif (num > 0) {\n\t\t\t\t\tfor (let name of execute) {\n\t\t\t\t\t\tswitch (name) {\n\t\t\t\t\t\t\tcase \"number\":\n\t\t\t\t\t\t\t\ttargets.forEach(t => t.changeHujia());\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"suit\":\n\t\t\t\t\t\t\t\ttargets.forEach(t => t.draw(num));\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"type\":\n\t\t\t\t\t\t\t\tplayer.addTempSkill(\"youlinmrfz_addCount\", { player: [\"phaseUseEnd\", \"phaseEnd\"] });\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (num - cards.length > 0) targets.forEach(t => t.addMark(\"fuyingmrfz\", num - cards.length));\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 13,\n\t\t\t\tresult: {\n\t\t\t\t\tplayer: 1,\n\t\t\t\t\ttarget: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\taddCount: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tmiaomengmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"phaseZhunbeiBegin\",\n\t\t\t},\n\t\t\tprompt(event, player) {\n\t\t\t\t//@ts-ignore\n\t\t\t\tlet num = Math.min(5, Math.max(game.countMark(\"fuyingmrfz\"), 1));\n\t\t\t\treturn `【渺梦】:你可以观看牌堆顶${num}张牌，并可以将游戏外随机的三张不同花色、类型的牌（进入弃牌堆后销毁之）插入到这些牌之中，然后你获得等同与你插入的牌的数量的个“沫”标记。`;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\t//@ts-ignore\n\t\t\t\tconst num = Math.min(5, Math.max(game.countMark(\"fuyingmrfz\"), 1));\n\t\t\t\tlet suits = [...lib.suit],\n\t\t\t\t\ttypes = [\"basic\", \"trick\", \"equip\"];\n\t\t\t\tlet outCards = [];\n\t\t\t\tlet pileCards = get.cards(num);\n\t\t\t\tfor (let type of types) {\n\t\t\t\t\tlet name = lib.inpile.filter(n => get.type2(n) === type).randomGet();\n\t\t\t\t\tlet suit = suits.randomGet();\n\t\t\t\t\tsuits.remove(suit);\n\t\t\t\t\toutCards.push(game.createCard(name, suit, [1, 3, 5, 8, 12].randomGet()));\n\t\t\t\t}\n\t\t\t\tlet { moved } = await player\n\t\t\t\t\t.chooseToMove()\n\t\t\t\t\t.set(\"list\", [\n\t\t\t\t\t\t[\"牌堆顶\", pileCards],\n\t\t\t\t\t\t[\"游戏外的牌\", outCards],\n\t\t\t\t\t])\n\t\t\t\t\t.set(\"prompt\", `你可以将游戏外随机的三张不同花色、类型的牌（进入弃牌堆后销毁之）插入到这些牌之中`)\n\t\t\t\t\t.set(\"filterMove\", (from, to, moved) => {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tlet pile = get.event().pileCards;\n\t\t\t\t\t\tlet fakeMoved = [moved[0].slice(), moved[1].slice()];\n\t\t\t\t\t\tif (typeof to !== \"number\") {\n\t\t\t\t\t\t\tlet fromPos = findElementPosition(fakeMoved, from.link);\n\t\t\t\t\t\t\tlet toPos = findElementPosition(fakeMoved, to.link);\n\n\t\t\t\t\t\t\tif (fromPos && toPos) {\n\t\t\t\t\t\t\t\t[fakeMoved[fromPos.arrayIndex][fromPos.elementIndex], fakeMoved[toPos.arrayIndex][toPos.elementIndex]] = [fakeMoved[toPos.arrayIndex][toPos.elementIndex], fakeMoved[fromPos.arrayIndex][fromPos.elementIndex]];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (fakeMoved[0].includes(from.link)) fakeMoved[0].remove(from.link);\n\t\t\t\t\t\t\tif (fakeMoved[1].includes(from.link)) fakeMoved[1].remove(from.link);\n\t\t\t\t\t\t\tfakeMoved[to].push(from.link);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet adjusted = fakeMoved[0].filter(card => pile.includes(card));\n\t\t\t\t\t\treturn JSON.stringify(pile) === JSON.stringify(adjusted);\n\n\t\t\t\t\t\tfunction findElementPosition(arrays, element) {\n\t\t\t\t\t\t\tfor (let i = 0; i < arrays.length; i++) {\n\t\t\t\t\t\t\t\tlet index = arrays[i].indexOf(element);\n\t\t\t\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\t\t\t\treturn { arrayIndex: i, elementIndex: index };\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"filterOk\", () => {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tlet outs = get.event().outCards;\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tlet buttons = Array.from(get.event().buttonss[0].children).concat(Array.from(get.event().buttonss[1].children));\n\t\t\t\t\t\tbuttons.forEach(button => {\n\t\t\t\t\t\t\tlet link = button.link;\n\t\t\t\t\t\t\tif (!outs.includes(link)) {\n\t\t\t\t\t\t\t\tlet tag = button.querySelector(\".info\");\n\t\t\t\t\t\t\t\tif (tag) tag.innerHTML = \"不可改变顺序\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"processAI\", list => {\n\t\t\t\t\t\tconst player = get.event().player;\n\t\t\t\t\t\tlet pile = [...list[0][1]];\n\t\t\t\t\t\tlet outs = [...list[1][1]];\n\t\t\t\t\t\tfor (let card of outs) {\n\t\t\t\t\t\t\tlet insertIndex = pile.findIndex(cardx => get.value(cardx) < get.value(card));\n\t\t\t\t\t\t\tif (insertIndex === -1) {\n\t\t\t\t\t\t\t\tpile.push(card);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tpile.insert(insertIndex, card, false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet moved = [pile, outs];\n\t\t\t\t\t\treturn moved;\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"outCards\", outCards)\n\t\t\t\t\t.set(\"pileCards\", pileCards)\n\t\t\t\t\t.forResult();\n\t\t\t\tif (!moved) return;\n\t\t\t\tlet top = moved[0];\n\t\t\t\t//@ts-ignore\n\t\t\t\tlet count = top.length - pileCards.length;\n\n\t\t\t\tplayer.addMark(\"fuyingmrfz\", count);\n\n\t\t\t\ttop.reverse();\n\t\t\t\tfor (let i = 0; i < top.length; i++) {\n\t\t\t\t\tui.cardPile.insertBefore(top[i], ui.cardPile.firstChild);\n\t\t\t\t}\n\t\t\t\tgame.log(player, \"将\" + get.cnNumber(top.length) + \"张牌置于牌堆顶\");\n\t\t\t\tgame.updateRoundNumber();\n\t\t\t\tgame.delayx();\n\t\t\t},\n\t\t},\n\t\tfuyingmrfz: {\n\t\t\tforced: true,\n\t\t\taudio: 2,\n\t\t\tmark: true,\n\t\t\tmarktext: \"沫\",\n\t\t\tintro: {\n\t\t\t\tname: \"沫\",\n\t\t\t\tcontent: '有#个“沫”标记<br><span style=\"color:rgb(138,43,226);font-family:yuanli\">人生五十年，如梦亦如幻。</span>',\n\t\t\t},\n\t\t\ttrigger: {\n\t\t\t\tglobal: \"dying\",\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\treturn event.player.isAlive() && event.player.hasMark(\"fuyingmrfz\");\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tplayer.$fullscreenpop(\"泡泡破裂了...\", \"thunder\");\n\t\t\t\tfor (let target of game.players.sortBySeat(trigger.player).filter(c => c.hasMark(\"fuyingmrfz\"))) {\n\t\t\t\t\tconst { bool } =\n\t\t\t\t\t\ttarget.countMark(\"fuyingmrfz\") > target.countCards(\"he\")\n\t\t\t\t\t\t\t? { bool: false }\n\t\t\t\t\t\t\t: await target\n\t\t\t\t\t\t\t\t\t.chooseToDiscard(\"he\")\n\t\t\t\t\t\t\t\t\t.set(\"filterCard\", card => {\n\t\t\t\t\t\t\t\t\t\tlet cards = ui.selected.cards;\n\t\t\t\t\t\t\t\t\t\tif (cards.length > 1) {\n\t\t\t\t\t\t\t\t\t\t\treturn cards.every(cardx => get.suit(card) !== get.suit(cardx));\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.set(\"ai\", card => {\n\t\t\t\t\t\t\t\t\t\treturn Math.abs(get.value(card, player) - 10000);\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.set(\"complexCard\", true)\n\t\t\t\t\t\t\t\t\t.set(\"selectCard\", target.countMark(\"fuyingmrfz\"))\n\t\t\t\t\t\t\t\t\t.set(\"prompt\", `请弃置${target.countMark(\"fuyingmrfz\")}张花色不同的牌或失去${target.countMark(\"fuyingmrfz\")}点体力`)\n\t\t\t\t\t\t\t\t\t.forResult();\n\t\t\t\t\tif (bool === false) target.loseHp(target.countMark(\"fuyingmrfz\"));\n\t\t\t\t\ttarget.removeMark(\"fuyingmrfz\", target.countMark(\"fuyingmrfz\"));\n\t\t\t\t}\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tneg: true,\n\t\t\t},\n\t\t},\n\n\t\t// 电弧\n\t\tgandianmrfz: {\n\t\t\taudio: 2,\n\t\t\tforced: true,\n\t\t\ttrigger: {\n\t\t\t\tglobal: \"roundStart\",\n\t\t\t},\n\t\t\tinit(player) {\n\t\t\t\tgame.broadcastAll(() => {\n\t\t\t\t\tlib.translate[\"gandianmrfz_zhou\"] = \"小轴\";\n\t\t\t\t\tlib.translate[\"gandianmrfz_shu\"] = \"小树\";\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t_status.gandianmrfz_ig = [];\n\t\t\t\t});\n\t\t\t},\n\t\t\tmark: true,\n\t\t\tonremove(player) {\n\t\t\t\t//@ts-ignore\n\t\t\t\tdelete _status.gandianmrfz_ig;\n\t\t\t\tdelete player.storage.gandianmrfz;\n\t\t\t\tfor (let char of game.players) {\n\t\t\t\t\tchar.removeGaintag(\"gandianmrfz_zhou\");\n\t\t\t\t\tchar.removeGaintag(\"gandianmrfz_shu\");\n\t\t\t\t}\n\t\t\t},\n\t\t\tintro: {\n\t\t\t\tcontent(storage) {\n\t\t\t\t\tlet shu = Object.keys(lib.color).remove(storage);\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\treturn `·小树:${get.translation(shu)}<br>·小轴:${get.translation(storage)}<br>·不受影响的角色:${get.translation(_status.gandianmrfz_ig)}`;\n\t\t\t\t},\n\t\t\t},\n\t\t\tglobal: [\"gandianmrfz_effect\", \"gandianmrfz_effect2\"],\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tfor (let char of game.players) {\n\t\t\t\t\tchar.removeGaintag(\"gandianmrfz_zhou\");\n\t\t\t\t\tchar.removeGaintag(\"gandianmrfz_shu\");\n\t\t\t\t}\n\n\t\t\t\tconst { control } = await player\n\t\t\t\t\t.chooseControl(\"red\", \"black\")\n\t\t\t\t\t.set(\"prompt\", \"【感电】：请选择令一种颜色的牌称之为“小轴”，其余颜色的牌则称之为“小树”\")\n\t\t\t\t\t.set(\"ai\", () => {\n\t\t\t\t\t\treturn \"red\";\n\t\t\t\t\t})\n\t\t\t\t\t.forResult();\n\n\t\t\t\tif (control) player.storage.gandianmrfz = control;\n\n\t\t\t\tgame.broadcastAll(color => {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t_status.gandianmrfzColor = color;\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t_status.gandianmrfz_ig = [];\n\t\t\t\t}, player.storage.gandianmrfz);\n\n\t\t\t\tfor (let char of game.players) {\n\t\t\t\t\tchar.addGaintag(char.getCards(\"h\", { color: player.storage.gandianmrfz }), \"gandianmrfz_zhou\");\n\t\t\t\t\tchar.addGaintag(\n\t\t\t\t\t\tchar.getCards(\"h\", card => get.color(card) !== player.storage.gandianmrfz),\n\t\t\t\t\t\t\"gandianmrfz_shu\"\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tconst result = await player\n\t\t\t\t\t.chooseCardTarget({\n\t\t\t\t\t\tprompt: `【感电】:弃置N张牌并令N-1名角色不受【感电①】的影响且本轮第一个出牌阶段开始时摸X张牌（X=其手牌中“小树”的数量和“小轴”的数量中的最小值）`,\n\t\t\t\t\t\tfilterTarget(card, player, target) {\n\t\t\t\t\t\t\treturn ui.selected.targets.length - 1 < ui.selected.cards.length;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tselectTarget: [0, Infinity],\n\t\t\t\t\t\tfilterCard: true,\n\t\t\t\t\t\tselectCard: [0, Infinity],\n\t\t\t\t\t\tcomplexCard: true,\n\t\t\t\t\t\tcomplexTarget: true,\n\t\t\t\t\t\tai1(card) {\n\t\t\t\t\t\t\tlet player = get.player();\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tlet num = game.countPlayer(char => get.attitude2(char > 0));\n\t\t\t\t\t\t\tif (ui.selected.cards.length >= num) return false;\n\t\t\t\t\t\t\treturn 6 - get.value(card, player);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2(target) {\n\t\t\t\t\t\t\tlet player = get.player();\n\t\t\t\t\t\t\tif (target === player) return 114514;\n\t\t\t\t\t\t\treturn get.attitude2(target) > 2;\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t\t.forResult();\n\t\t\t\tlet { targets, cards } = result;\n\t\t\t\tgame.broadcastAll(arr => {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t_status.gandianmrfz_ig.push(...arr);\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t}, targets);\n\t\t\t\t//@ts-ignore\n\t\t\t\ttargets.forEach(target => {\n\t\t\t\t\ttarget\n\t\t\t\t\t\t.when({\n\t\t\t\t\t\t\tplayer: \"phaseUseBegin\",\n\t\t\t\t\t\t\tglobal: \"phaseBefore\",\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tif (trigger.name === \"phaseUse\") {\n\t\t\t\t\t\t\t\tlet shu = player.countCards(\"h\", card => card.hasGaintag(\"gandianmrfz_shu\"));\n\t\t\t\t\t\t\t\tlet zhou = player.countCards(\"h\", card => card.hasGaintag(\"gandianmrfz_zhou\"));\n\t\t\t\t\t\t\t\tlet num = Math.min(shu, zhou, 5);\n\t\t\t\t\t\t\t\tif (num > 0) {\n\t\t\t\t\t\t\t\t\tplayer.draw(num);\n\t\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\t\tplayer.logSkill(\"gandianmrfz\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tplayer.discard(cards);\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tviewHandcard: true,\n\t\t\t\tskillTagFilter(player, tag, arg) {\n\t\t\t\t\tif (player == arg) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\teffect: {\n\t\t\t\t\tmod: {\n\t\t\t\t\t\tcardRespondable(card, player) {\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tlet ig = _status.gandianmrfz_ig || [];\n\t\t\t\t\t\t\tlet evt = _status.event.parent;\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tlet color = _status.gandianmrfzColor;\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tlet isZhou = get.color(evt.card) === color;\n\t\t\t\t\t\t\tif ((isZhou && get.color(card) !== color) || ig.includes(player)) return true;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\ttrigger: { player: \"gainAfter\" },\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tlet color = player.storage.gandianmrfz;\n\t\t\t\t\t\tfor (let card of trigger.cards) {\n\t\t\t\t\t\t\tif (get.color(card) === color) card.addGaintag(\"gandianmrfz_zhou\");\n\t\t\t\t\t\t\telse card.addGaintag(\"gandianmrfz_shu\");\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\teffect2: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"useCardToPlayered\",\n\t\t\t\t\t},\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tlet ig = _status.gandianmrfz_ig || [];\n\t\t\t\t\t\treturn !ig.includes(event.target);\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tconst target = trigger.target;\n\t\t\t\t\t\ttarget.addTempSkill(\"gandianmrfz_block\");\n\t\t\t\t\t\ttarget.markAuto(\"gandianmrfz_block\", [trigger.card]);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tblock: {\n\t\t\t\t\tmod: {\n\t\t\t\t\t\tcardEnabled(card, player) {\n\t\t\t\t\t\t\tif (!player.storage.gandianmrfz_block) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconst storage = player.getStorage(\"gandianmrfz_block\");\n\t\t\t\t\t\t\tlet evt = get.event();\n\t\t\t\t\t\t\tif (evt.name != \"chooseToUse\") {\n\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\tevt = evt.getParent(\"chooseToUse\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tif (!evt || !evt.respondTo || !storage.some(i => i.cardid == evt.respondTo[1].cardid)) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconst color = get.color(card);\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tlet zhouColor = _status.gandianmrfzColor;\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\treturn get.color(evt.respondTo[1]) === zhouColor && color !== zhouColor;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tonremove(player) {\n\t\t\t\t\t\tdelete player.storage.gandianmrfz_block;\n\t\t\t\t\t},\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: [\"damageBefore\", \"damageCancelled\", \"damageZero\"],\n\t\t\t\t\t\ttarget: [\"shaMiss\", \"useCardToExcluded\", \"useCardToEnd\"],\n\t\t\t\t\t\tglobal: [\"useCardEnd\"],\n\t\t\t\t\t},\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\tconst evt = event.getParent(\"useCard\", true, true);\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tif (evt && evt.effectedCount < evt.effectCount) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!event.card || !player.storage.gandianmrfz_block) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn player.getStorage(\"gandianmrfz_block\").includes(event.card);\n\t\t\t\t\t},\n\t\t\t\t\tforced: true,\n\t\t\t\t\tpopup: false,\n\t\t\t\t\tfirstDo: true,\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tplayer.unmarkAuto(event.name, [trigger.card]);\n\t\t\t\t\t\tif (!player.getStorage(event.name).length) {\n\t\t\t\t\t\t\tplayer.removeSkill(event.name);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\t//司霆惊蛰 小姨\n\t\txiuyuanmrfz: {\n\t\t\taudio: 2,\n\t\t\tforced: true,\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"useCardToPlayered\",\n\t\t\t\ttarget: \"useCardToTargeted\",\n\t\t\t},\n\t\t\tinit() {\n\t\t\t\t//@ts-ignore\n\t\t\t\tgame.broadcastAll(() => {\n\t\t\t\t\tlib.translate[\"visible_xiuyuanmrfz\"] = \"明置\";\n\t\t\t\t});\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\tif (!get.tag(event.card, \"damage\") || player.countCards(\"h\", \"ying\") > player.maxHp) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn player === event.target || event.getParent().triggeredTargets3.length === 1;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tawait player.gain(lib.card.ying.getYing(1), \"gain2\");\n\t\t\t\tlet needShown = player.getCards(\"h\", card => get.name(card) === \"ying\" && !get.is.shownCard(card));\n\t\t\t\tif (needShown.length > 0) player.addShownCards(needShown, \"visible_xiuyuanmrfz\");\n\t\t\t},\n\t\t\tmod: {\n\t\t\t\tignoredHandcard: function (card, player) {\n\t\t\t\t\tif (card.hasGaintag(\"visible_xiuyuanmrfz\")) return true;\n\t\t\t\t},\n\t\t\t\tcardDiscardable: function (card, player, name) {\n\t\t\t\t\tif (name === \"phaseDiscard\" && card.hasGaintag(\"visible_xiuyuanmrfz\")) return false;\n\t\t\t\t},\n\t\t\t\tglobalTo(from, to, distance) {\n\t\t\t\t\tlet num = to.countCards(\"h\", \"ying\");\n\t\t\t\t\treturn distance + num;\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tzhengningmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { player: \"phaseJieshuBegin\" },\n\t\t\tfilter(event, player) {\n\t\t\t\treturn player.countCards(\"h\", \"ying\") > 0 || game.countPlayer(char => char.isLinked()) > 0;\n\t\t\t},\n\t\t\tasync cost(event, trigger, player) {\n\t\t\t\tlet result = {\n\t\t\t\t\tnum: 0,\n\t\t\t\t\tdiscards: [],\n\t\t\t\t\tlinks: [],\n\t\t\t\t};\n\t\t\t\tif (player.countCards(\"h\", \"ying\") > 0) {\n\t\t\t\t\tconst { cards } = await player\n\t\t\t\t\t\t.chooseCard(\"h\")\n\t\t\t\t\t\t.set(\"prompt\", get.prompt(\"zhengningmrfz\"))\n\t\t\t\t\t\t.set(\"prompt2\", \"<font color = red>选择“确定”即不弃置【影】</font><br>你可以弃置任意张【影】、横置至多等量角色并摸等量张牌，然后你展示所有手牌并令一名横置且本回合未以此法选择过的角色进行判定，若你手牌中有与判定牌花色相同的牌，你可以弃置之并对其造成一点雷属性伤害，若其受到伤害，你可以重复此流程。\")\n\t\t\t\t\t\t.set(\"filterCard\", card => get.name(card) === \"ying\")\n\t\t\t\t\t\t.set(\"selectCard\", [0, Infinity])\n\t\t\t\t\t\t.set(\"ai\", card => {\n\t\t\t\t\t\t\tlet player = get.player();\n\t\t\t\t\t\t\tlet num = game.countPlayer(char => !char.isLinked() && get.effect(char, { name: \"tiesuo\" }, player, player) > -1);\n\t\t\t\t\t\t\treturn ui.selected.cards.length < num ? 1 : -1;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.forResult();\n\t\t\t\t\tif (cards?.length) {\n\t\t\t\t\t\tresult.num = cards.length;\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tresult.discards = cards;\n\t\t\t\t\t} else return;\n\t\t\t\t}\n\t\t\t\tif (result.num > 0) {\n\t\t\t\t\tconst { targets } = await player\n\t\t\t\t\t\t.chooseTarget()\n\t\t\t\t\t\t.set(\"prompt\", get.prompt(\"zhengningmrfz\"))\n\t\t\t\t\t\t.set(\"prompt2\", `<font color = red>选择“确定”即不横置角色</font><br>你可以至多横置${get.cnNumber(result.num)}名角色`)\n\t\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => !target.isLinked())\n\t\t\t\t\t\t.set(\"selectTarget\", [0, result.num])\n\t\t\t\t\t\t.set(\"ai\", target => {\n\t\t\t\t\t\t\tlet player = get.player();\n\t\t\t\t\t\t\treturn get.effect(target, { name: \"tiesuo\" }, player, player) > -1;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.forResult();\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tif (targets && targets.length) result.links = targets;\n\t\t\t\t}\n\t\t\t\tevent.result = await player\n\t\t\t\t\t.chooseTarget()\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"zhengningmrfz\"))\n\t\t\t\t\t.set(\"prompt2\", `令一名被横置的角色进行判定，然后你可能对其造成一点雷属性伤害`)\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tlet links = get.event().links;\n\t\t\t\t\t\tfor (let char of links) {\n\t\t\t\t\t\t\tchar.showPrompt(\"即将被横置\", undefined, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn target.isLinked() || links.includes(target);\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"ai\", target => {\n\t\t\t\t\t\tlet player = get.player();\n\t\t\t\t\t\treturn get.damageEffect(target, player, player, \"thunder\") > 0;\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"links\", result.links)\n\t\t\t\t\t.forResult();\n\t\t\t\tevent.result.cost_data = result;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tconst target = event.targets[0];\n\t\t\t\tconst { discards, links, num } = event.cost_data;\n\n\t\t\t\tif (num > 0) {\n\t\t\t\t\tawait player.discard(discards);\n\t\t\t\t\tawait player.draw(num);\n\t\t\t\t\tfor (let i of links) await i.link(true);\n\t\t\t\t}\n\n\t\t\t\tif (!target.isLinked()) return;\n\n\t\t\t\tconst { suit } = await target.judge().forResult();\n\t\t\t\tif (player.countCards(\"h\", { suit: suit }) < 1) return;\n\t\t\t\tconst { bool } = await player\n\t\t\t\t\t.chooseToDiscard()\n\t\t\t\t\t.set(\"prompt\", `【震佞】:你可以弃置一张${get.translation(suit)}的牌并对${get.translation(target)}造成一点雷属性伤害`)\n\t\t\t\t\t.set(\"ai\", card => 8 - get.value(card))\n\t\t\t\t\t.set(\"filterCard\", card => get.suit(card) === suit)\n\t\t\t\t\t.forResult();\n\t\t\t\tif (bool === true) {\n\t\t\t\t\tawait target.damage(\"thunder\", player).set(\"zhengningmrfz\", true);\n\t\t\t\t\tif (\n\t\t\t\t\t\tplayer.hasHistory(\"sourceDamage\", evt => {\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\treturn (evt.zhengningmrfz = true);\n\t\t\t\t\t\t})\n\t\t\t\t\t) {\n\t\t\t\t\t\tlet next = game.createEvent(\"zhengningmrfz\");\n\t\t\t\t\t\tnext.player = player;\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tnext.event = event;\n\t\t\t\t\t\tnext.setContent(async (event, trigger, player) => {\n\t\t\t\t\t\t\tevent.result = {};\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tawait lib.skill.zhengningmrfz.cost(event, trigger, player);\n\t\t\t\t\t\t\tif (event.result.bool) {\n\t\t\t\t\t\t\t\tevent.targets = event.result.targets;\n\t\t\t\t\t\t\t\tevent.cost_data = event.result.cost_data;\n\t\t\t\t\t\t\t\tplayer.logSkill(\"zhengningmrfz\");\n\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\tawait lib.skill.zhengningmrfz.content(event, trigger, player);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\n\t\t//黍\n\t\tkenyemrfz: {\n\t\t\tinit: player => {\n\t\t\t\tplayer.storage.kenyemrfz = [];\n\t\t\t},\n\t\t\tmarktext: \"黍\",\n\t\t\tintro: {\n\t\t\t\tcontent: \"expansion\",\n\t\t\t\tmarkcount: \"expansion\",\n\t\t\t},\n\t\t\tonremove: function (player, skill) {\n\t\t\t\tvar cards = player.getExpansions(skill);\n\t\t\t\tif (cards.length) player.loseToDiscardpile(cards);\n\t\t\t},\n\t\t\taudio: 2,\n\t\t\ttrigger: { global: \"useCard\" },\n\t\t\tfilter: function (event, player) {\n\t\t\t\tvar bool = false,\n\t\t\t\t\ttype = get.type2(event.card);\n\t\t\t\tfor (var i of [\"basic\", \"trick\", \"equip\"]) {\n\t\t\t\t\tif (\n\t\t\t\t\t\ttype === i &&\n\t\t\t\t\t\tevent.player\n\t\t\t\t\t\t\t.getHistory(\"useCard\", evt => {\n\t\t\t\t\t\t\t\treturn get.type2(evt.card) === i;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.indexOf(event) === 0\n\t\t\t\t\t) {\n\t\t\t\t\t\tbool = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (event.cards.length < 1) return false;\n\t\t\t\treturn event.cards.filterInD().length > 0 && bool;\n\t\t\t},\n\t\t\tprompt: function (event, player) {\n\t\t\t\t//@ts-ignore\n\t\t\t\treturn `【垦野】:是否将${get.translation(event.cards)}置于${get.translation(event.player)}的武将牌上?`;\n\t\t\t},\n\t\t\tprompt2: function () {\n\t\t\t\treturn get.skillInfoTranslation(\"kenyemrfz\").replace(/<\\/br>[\\s\\S]*/, \"\");\n\t\t\t},\n\t\t\tcheck: function (event, player) {\n\t\t\t\tif (get.attitude2(event.player) < 0) return false;\n\t\t\t\treturn !get.tag(event.card, \"damage\");\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tvar target = trigger.player;\n\t\t\t\tif (!player.storage.kenyemrfz) player.storage.kenyemrfz = [];\n\t\t\t\tif (!player.storage.kenyemrfz.includes(target)) player.storage.kenyemrfz.add(target);\n\n\t\t\t\ttarget\n\t\t\t\t\t.when({\n\t\t\t\t\t\tglobal: [\"damageBegin\", \"phaseEnd\"],\n\t\t\t\t\t})\n\t\t\t\t\t.filter((event, player) => {\n\t\t\t\t\t\tif (event.name === \"phase\") return true;\n\t\t\t\t\t\treturn event.cards && event.cards.some(card => cardsx.includes(card));\n\t\t\t\t\t})\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tif (trigger.name === \"phase\") return;\n\t\t\t\t\t\ttrigger.num = 0;\n\t\t\t\t\t});\n\n\t\t\t\tlet cardsx = trigger.cards;\n\t\t\t\ttarget\n\t\t\t\t\t.when({\n\t\t\t\t\t\tglobal: [\"cardsDiscardAfter\", \"phaseEnd\"],\n\t\t\t\t\t})\n\t\t\t\t\t.filter((event, player) => {\n\t\t\t\t\t\tif (event.name === \"phase\") return true;\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tlet bool = event.cards && event.cards.some(card => cardsx.includes(card)) && !event.kenyemrfz_checked;\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tif (bool) event.kenyemrfz_checked = true;\n\t\t\t\t\t\treturn bool;\n\t\t\t\t\t})\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tif (trigger.name === \"phase\") return;\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tplayer.addToExpansion(trigger.cards, player, \"give\").gaintag.add(\"kenyemrfz\");\n\t\t\t\t\t})\n\t\t\t\t\t.vars({\n\t\t\t\t\t\tcardsx: cardsx,\n\t\t\t\t\t});\n\t\t\t},\n\t\t\tglobal: \"kenyemrfz_use\",\n\t\t\tsubSkill: {\n\t\t\t\tuse: {\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tdirect: true,\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\tif (player.getExpansions(\"kenyemrfz\").length < 1) return false;\n\t\t\t\t\t\treturn player.canUse(\"wuzhong\", player) || player.canUse(\"tao\", player);\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\t\"step 0\";\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tif (player.getExpansions(\"kenyemrfz\").length > 0) {\n\t\t\t\t\t\t\tvar list = [];\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tif (player.canUseToAnyone(\"tao\")) list.add(\"tao\");\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tif (player.canUseToAnyone(\"wuzhong\")) list.add(\"wuzhong\");\n\t\t\t\t\t\t\tif (list.length == 1) {\n\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\tplayer.useCard({ name: list[0] }, [player.getExpansions(\"kenyemrfz\")[0]], player);\n\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\tplayer.logSkill(\"kenyemrfz\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\tevent.list = list;\n\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\tevent.goto(2);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t} else event.finish();\n\t\t\t\t\t\t(\"step 1\");\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tif (player.getExpansions(\"kenyemrfz\").length > 0) {\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tevent.goto(0);\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t} else event.finish();\n\t\t\t\t\t\t(\"step 2\");\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tif (player.getExpansions(\"kenyemrfz\").length > 0) {\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tplayer.chooseBool(\"【垦野】:选择‘确定’使用【桃】，选择‘取消’使用【无中生有】\").set(\"ai\", function () {\n\t\t\t\t\t\t\t\tvar player = _status.event.player;\n\t\t\t\t\t\t\t\tif (player.hp < 3) return 0;\n\t\t\t\t\t\t\t\treturn [0, 1].randomGet();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t} else event.finish();\n\t\t\t\t\t\t(\"step 3\");\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tif (result.bool) {\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tplayer.useCard({ name: \"tao\" }, [player.getExpansions(\"kenyemrfz\")[0]], player);\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t} else player.useCard({ name: \"wuzhong\" }, [player.getExpansions(\"kenyemrfz\")[0]], player);\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tplayer.logSkill(\"kenyemrfz\");\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tevent.goto(0);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\theyingmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { global: \"gainAfter\" },\n\t\t\tfilter: function (event, player) {\n\t\t\t\tvar evt = event.getParent(\"phaseDraw\");\n\t\t\t\tif (evt && evt.player == event.player) return false;\n\t\t\t\tif (!event.cards || event.cards.length < 2) return false;\n\t\t\t\tif (event.getParent(1).name != \"draw\") return false;\n\t\t\t\treturn event.player.canUseToAnyone(\"wugu\");\n\t\t\t},\n\t\t\tusable: 1,\n\t\t\tdirect: true,\n\t\t\tcontent: function () {\n\t\t\t\t\"step 0\";\n\t\t\t\t//@ts-ignore\n\t\t\t\tvar target = trigger.player,\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tcards = trigger.cards,\n\t\t\t\t\ttype = [];\n\t\t\t\tfor (var i of cards) {\n\t\t\t\t\tif (type.includes(get.type2(i))) continue;\n\t\t\t\t\ttype.add(get.type2(i));\n\t\t\t\t}\n\t\t\t\t//@ts-ignore\n\t\t\t\tevent.type = type;\n\t\t\t\t//@ts-ignore\n\t\t\t\tif (target == player) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tplayer\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t.chooseTarget(`【禾盈】:你可以将${get.translation(trigger.cards)}当做至多指定${get.cnNumber(type.length)}角色且结算${get.cnNumber(type.length)}次的【五谷丰登】使用`)\n\t\t\t\t\t\t.set(\"selectTarget\", [1, type.length])\n\t\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\n\t\t\t\t\t\t\treturn player.canUse(\"wugu\", target);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.set(\"prompt2\", get.skillInfoTranslation(\"heyingmrfz\").replace(/<\\/br>[\\s\\S]*/, \"\"))\n\t\t\t\t\t\t.set(\"ai\", function (target) {\n\t\t\t\t\t\t\tvar player = _status.event.player,\n\t\t\t\t\t\t\t\tcards = _status.event.cards,\n\t\t\t\t\t\t\t\tnum = _status.event.num;\n\t\t\t\t\t\t\tif (cards.length >= num * 2) return false;\n\t\t\t\t\t\t\tif (get.value(cards) > 8) return false;\n\t\t\t\t\t\t\treturn get.effect(target, get.autoViewAs({ name: \"wugu\" }, cards), player, player);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t.set(\"cards\", trigger.cards)\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t.set(\"num\", event.type.length);\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t} else event.goto(2);\n\t\t\t\t(\"step 1\");\n\t\t\t\t//@ts-ignore\n\t\t\t\tif (result.targets) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\ttrigger.player\n\t\t\t\t\t\t.when(\"useCard\")\n\t\t\t\t\t\t.filter((event, player) => {\n\t\t\t\t\t\t\treturn event.card && get.name(event.card) == \"wugu\" && event.card.storage.heyingmrfz == true;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\ttrigger.effectCount = type.length;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t.vars({ type: event.type });\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\ttrigger.player.useCard({ name: \"wugu\", storage: { heyingmrfz: true } }, trigger.cards, result.targets);\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tplayer.logSkill(\"heyingmrfz\", result.targets);\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tevent.finish();\n\t\t\t\t} else {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tplayer.storage.counttrigger.heyingmrfz--;\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tevent.finish();\n\t\t\t\t}\n\t\t\t\t(\"step 2\");\n\t\t\t\t//@ts-ignore\n\t\t\t\tplayer\n\t\t\t\t//@ts-ignore\n\t\t\t\t\t.chooseBool(`【禾盈】:是否令${get.translation(trigger.player)}选择是否将此次摸的牌当做五谷丰登使用？`)\n\t\t\t\t\t.set(\"ai\", function () {\n\t\t\t\t\t\tvar player = _status.event.player,\n\t\t\t\t\t\t\ttarget = _status.event.target;\n\t\t\t\t\t\treturn get.attitude(target, player) > 0;\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"prompt2\", get.skillInfoTranslation(\"heyingmrfz\").replace(/<\\/br>[\\s\\S]*/, \"\"))\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t.set(\"target\", trigger.player);\n\t\t\t\t(\"step 3\");\n\t\t\t\t//@ts-ignore\n\t\t\t\tif (result.bool) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\ttrigger.player\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t.chooseTarget(`【禾盈】:你可以将${get.translation(trigger.cards)}当做至多指定${get.cnNumber(event.type.length)}角色且结算${get.cnNumber(event.type.length)}次的【五谷丰登】使用`)\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t.set(\"selectTarget\", [1, event.type.length])\n\t\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\n\t\t\t\t\t\t\treturn player.canUse(\"wugu\", target);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.set(\"prompt2\", get.skillInfoTranslation(\"heyingmrfz\").replace(/<\\/br>[\\s\\S]*/, \"\"))\n\t\t\t\t\t\t.set(\"ai\", function (target) {\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tvar player = _status.event.playerx,\n\t\t\t\t\t\t\t\tcards = _status.event.cards,\n\t\t\t\t\t\t\t\tnum = _status.event.num;\n\t\t\t\t\t\t\tif (cards.length >= num * 2) return false;\n\t\t\t\t\t\t\tif (get.value(cards) > 8) return false;\n\t\t\t\t\t\t\treturn get.effect(target, get.autoViewAs({ name: \"wugu\" }, cards), player, player);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t.set(\"cards\", trigger.cards)\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t.set(\"playerx\", trigger.player)\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t.set(\"num\", event.type.length);\n\t\t\t\t} else {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tplayer.storage.counttrigger.heyingmrfz--;\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tevent.finish();\n\t\t\t\t}\n\t\t\t\t(\"step 4\");\n\t\t\t\t//@ts-ignore\n\t\t\t\tif (result.targets) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\ttrigger.player\n\t\t\t\t\t\t.when(\"useCard\")\n\t\t\t\t\t\t.filter((event, player) => {\n\t\t\t\t\t\t\treturn event.card && get.name(event.card) == \"wugu\" && event.card.storage.heyingmrfz == true;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\ttrigger.effectCount = type.length;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t.vars({ type: event.type });\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\ttrigger.player.useCard({ name: \"wugu\", storage: { heyingmrfz: true } }, \n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\ttrigger.cards, result.targets);\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\ttrigger.player.logSkill(\"heyingmrfz\", result.targets);\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t} else player.storage.counttrigger.heyingmrfz--;\n\t\t\t},\n\t\t},\n\t\trancuimrfz: {\n\t\t\tderivation: \"liangtianmrfz\",\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"die\",\n\t\t\t},\n\t\t\tdirect: true,\n\t\t\tskillAnimation: true,\n\t\t\tanimationColor: \"wood\",\n\t\t\tforceDie: true,\n\t\t\tcontent: async function (event,trigger,player) {\n\t\t\t\tvar list = player.storage.kenyemrfz;\n\t\t\t\tfor (var i of game.players) {\n\t\t\t\t\tif (i == player || !list.includes(i)) continue;\n\t\t\t\t\ti.addSkill(\"liangtianmrfz\");\n\t\t\t\t\ti.line(\"liangtianmrfz\");\n\t\t\t\t}\n\t\t\t\t//@ts-ignore\n\t\t\t\tplayer.logSkill(\"liangtianmrfz\");\n\t\t\t},\n\t\t},\n\t\tliangtianmrfz: {\n\t\t\taudio: 2,\n\t\t\tforced: true,\n\t\t\ttrigger: { player: \"drawAfter\" },\n\t\t\tfilter: function (event, player) {\n\t\t\t\tif (player.hasSkill(\"liangtianmrfz_ban\")) return false;\n\t\t\t\treturn event.getParent(2).name != \"liangtianmrfz\";\n\t\t\t},\n\t\t\tcontent: async function (event,trigger,player) {\n\t\t\t\tvar list = [\"phaseZhunbei\", \"phaseJudge\", \"phaseDraw\", \"phaseUse\", \"phaseDiscard\", \"phaseJieshu\"],\n\t\t\t\t\tphase;\n\t\t\t\tfor (var i of list) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tvar evt = trigger.getParent(i).name;\n\t\t\t\t\tif (evt == i) {\n\t\t\t\t\t\tphase = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t//@ts-ignore\n\t\t\t\tvar phase = phase + \"After\";\n\t\t\t\tplayer.draw();\n\t\t\t\tplayer.addTempSkill(\"liangtianmrfz_ban\", { global: phase });\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\tban: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t//新煌\n\t\tnewyanxunmrfz: {\n\t\t\taudio: \"yanxunmrfz\",\n\t\t\tintro: {\n\t\t\t\tcontent: \"本回合手牌上限+#\",\n\t\t\t},\n\t\t\ttrigger: {\n\t\t\t\tplayer: lib.phaseName.map(c => `${c}Skipped`),\n\t\t\t},\n\t\t\tforced: true,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tplayer.addMark(\"newyanxunmrfz\", 1, false);\n\t\t\t\tplayer.draw();\n\t\t\t\tif (!player.storage.newyanxunmrfz_addTempSkill) {\n\t\t\t\t\tgame.broadcastAll(player => {\n\t\t\t\t\t\tplayer.storage.newyanxunmrfz_addTempSkill = true;\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t}, player);\n\t\t\t\t\tplayer\n\t\t\t\t\t\t.when({ player: \"phaseEnd\" })\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tplayer.removeMark(\"newyanxunmrfz\", player.countMark(\"newyanxunmrfz\"), false);\n\t\t\t\t\t\t\tgame.broadcastAll(player => {\n\t\t\t\t\t\t\t\tdelete player.storage.newyanxunmrfz_addTempSkill;\n\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t}, player);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.assign({\n\t\t\t\t\t\t\tmod: {\n\t\t\t\t\t\t\t\tmaxHandcard(player, num) {\n\t\t\t\t\t\t\t\t\treturn (num += player.countMark(\"newyanxunmrfz\"));\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\tnewfeixuemrfz: {\n\t\t\taudio: \"feixuemrfz\",\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"useCard2\",\n\t\t\t},\n\t\t\tmark: true,\n\t\t\tintro: {\n\t\t\t\tcontent(_, player) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\treturn _status.currentPhase === player ? `被跳过的阶段：${get.translation(player.skipList)}` : \"不是你的回合\";\n\t\t\t\t},\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\tlet next = lib.skill.newfeixuemrfz.getNextPhase(event, player);\n\t\t\t\t//@ts-ignore\n\t\t\t\treturn get.tag(event.card, \"damage\") && event.targets && next && _status.currentPhase === player;\n\t\t\t},\n\t\t\tgetNextPhase(event, player) {\n\t\t\t\tlet name;\n\t\t\t\tif (lib.phaseName.indexOf(event.name) === -1) {\n\t\t\t\t\tlet evt = event;\n\t\t\t\t\twhile (true) {\n\t\t\t\t\t\tif (lib.phaseName.includes(evt.name)) {\n\t\t\t\t\t\t\tname = evt.name;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevt = evt.parent;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tname = event.name;\n\t\t\t\t}\n\t\t\t\tlet i = lib.phaseName.indexOf(name) + 1;\n\t\t\t\twhile (true) {\n\t\t\t\t\tif (i > lib.phaseName.length) return;\n\t\t\t\t\tlet phase = lib.phaseName[i];\n\t\t\t\t\tif (player.skipList.includes(phase)) {\n\t\t\t\t\t\ti++;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\treturn phase;\n\t\t\t\t}\n\t\t\t},\n\t\t\tprompt2(event, player) {\n\t\t\t\tlet next = lib.skill.newfeixuemrfz.getNextPhase(event, player);\n\t\t\t\t//@ts-ignore\n\t\t\t\treturn `你可以跳过本回合下个没有被跳过的阶段(${get.translation(next)})，然后此牌的目标角色(${get.translation(event.targets)})需要打出一张【闪】才能响应此牌。`;\n\t\t\t},\n\t\t\tcheck(event, player) {\n\t\t\t\tlet next = lib.skill.newfeixuemrfz.getNextPhase(event, player);\n\t\t\t\tif ([\"phaseUse\", \"phaseDraw\"].includes(next)) return false;\n\t\t\t\tlet val = 0;\n\t\t\t\tevent.targets.forEach(target => {\n\t\t\t\t\tval += get.effect(target, event.card, player, player);\n\t\t\t\t});\n\t\t\t\treturn val > 0;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tplayer.skip(lib.skill.newfeixuemrfz.getNextPhase(event, player));\n\t\t\t\tplayer.draw();\n\t\t\t\tfor (let target of trigger.targets) {\n\t\t\t\t\tconst { bool } = await target\n\t\t\t\t\t\t.chooseToRespond()\n\t\t\t\t\t\t.set(\"prompt\", `请打出一张【闪】，否则${get.translation(trigger.card)}不可响应`)\n\t\t\t\t\t\t.set(\"filterCard\", function (card, player) {\n\t\t\t\t\t\t\tif (get.name(card) !== \"shan\") return false;\n\t\t\t\t\t\t\treturn lib.filter.cardRespondable(card, player);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.set(\"ai\", card => {\n\t\t\t\t\t\t\tlet evt = _status.event.getParent(4);\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tlet player = get.event().targetx;\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tlet target = get.event().targetxx;\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tlet cardx = get.event().cardx;\n\t\t\t\t\t\t\tif (player.hasSkillTag(\"freeShan\")) return 1;\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\tplayer.countCards(\"hs\", c => {\n\t\t\t\t\t\t\t\t\treturn get.canRespond(cardx, player).includes(c.name);\n\t\t\t\t\t\t\t\t}) <\n\t\t\t\t\t\t\t\t\tcardx.name ===\n\t\t\t\t\t\t\t\t\"sha\"\n\t\t\t\t\t\t\t\t\t? 2\n\t\t\t\t\t\t\t\t\t: 1\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t\tif (get.damageEffect(player, target, player) >= 0) return 0;\n\t\t\t\t\t\t\treturn get.order(card);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.set(\"targetx\", target)\n\t\t\t\t\t\t.set(\"targetxx\", player)\n\t\t\t\t\t\t.set(\"cardx\", trigger.card)\n\t\t\t\t\t\t.forResult();\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tif (bool === false) trigger.directHit.add(target);\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\n\t\t//新铃兰\n\t\tnewhualaomrfz: {\n\t\t\taudio: \"hualaomrfz\",\n\t\t\ttrigger: {\n\t\t\t\tsource: \"damageBegin\",\n\t\t\t},\n\t\t\tmarktext: \"脆弱\",\n\t\t\tintro: {\n\t\t\t\tname: \"脆弱\",\n\t\t\t\tcontent: \"下次受到的伤害翻倍#次\",\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\treturn event.player !== player;\n\t\t\t},\n\t\t\tprompt2(event, player) {\n\t\t\t\treturn `是否令${get.translation(event.player)}下次受到的伤害翻倍？`;\n\t\t\t},\n\t\t\tcheck(event, player) {\n\t\t\t\tif (get.attitude(player, event.player) > 0) return false;\n\t\t\t\tif (event.num + event.player.countMark(\"newhualaomrfz\") - event.player.hp >= 0) return false;\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tvar target = trigger.player;\n\t\t\t\ttarget.addMark(\"newhualaomrfz\", 1, false);\n\t\t\t\ttarget.addTempSkill(\"newhualaomrfz_eff\", { player: \"damageEnd\" });\n\t\t\t\ttrigger.num = 0;\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\teff: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\ttrigger: { player: \"damageBegin4\" },\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\treturn event.num > 0 && player.countMark(\"newhualaomrfz\") > 0;\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\ttrigger.num *= 2 ** player.countMark(\"newhualaomrfz\");\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tplayer.removeAllmark(\"newhualaomrfz\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tnewhemingmrfz: {\n\t\t\taudio: \"huhuomrfz\",\n\t\t\ttrigger: {\n\t\t\t\tsource: \"damageZero\",\n\t\t\t},\n\t\t\tusable: 1,\n\t\t\tasync cost(event, trigger, player) {\n\t\t\t\tlet num = Math.floor(game.players.filter(char => char !== player && char.inRangeOf(player)).length / 2);\n\t\t\t\tevent.result = await player\n\t\t\t\t\t.chooseTarget()\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"newhemingmrfz\"))\n\t\t\t\t\t.set(\"prompt2\", `你可以令至多两名角色摸${get.cnNumber(num)}张牌`)\n\t\t\t\t\t.set(\"ai\", target => get.attitude2(target) > 0)\n\t\t\t\t\t.set(\"selectTarget\", [1, 2])\n\t\t\t\t\t.forResult();\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet num = Math.floor(game.players.filter(char => char !== player && char.inRangeOf(player)).length / 2);\n\t\t\t\tgame.asyncDraw(event.targets, num);\n\t\t\t},\n\t\t},\n\n\t\t//酒神\n\t\txinyunmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { global: \"dying\" },\n\t\t\tusable: 1,\n\t\t\tfilter(event, player) {\n\t\t\t\treturn !event.player.storage.xinyunmrfz_ban;\n\t\t\t},\n\t\t\tprompt(event, player) {\n\t\t\t\t//@ts-ignore\n\t\t\t\treturn `【欣殒】:是否令${event.player === player ? \"你\" : get.translation(event.player)}摸4张牌并使用其中能使用的牌？`;\n\t\t\t},\n\t\t\tcheck(event, player) {\n\t\t\t\treturn get.attitude(player, event.player) > 2;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet target = trigger.player;\n\t\t\t\tconst result = await target.draw(4).forResult();\n\t\t\t\tif (!result) return;\n\t\t\t\tgame.broadcastAll(\n\t\t\t\t\t(target, cards) => {\n\t\t\t\t\t\ttarget.storage.xinyunmrfz = true;\n\t\t\t\t\t\ttarget.storage.xinyunmrfz_ban = true;\n\t\t\t\t\t\ttarget.storage.xinyunmrfz_cards = cards;\n\t\t\t\t\t},\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\ttarget,\n\t\t\t\t\tresult\n\t\t\t\t);\n\t\t\t\ttarget\n\t\t\t\t\t.when({\n\t\t\t\t\t\tsource: \"damageEnd\",\n\t\t\t\t\t\tplayer: \"dyingAfter\",\n\t\t\t\t\t})\n\t\t\t\t\t.filter((event, player) => {\n\t\t\t\t\t\tif (event.name !== \"damage\") return true;\n\t\t\t\t\t\treturn player.hasHistory(\"sourceDamage\", evt => {\n\t\t\t\t\t\t\tif (evt.player && evt.player === player) return false;\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\treturn evt.cards && evt.cards.some(card => result.includes(card));\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tgame.broadcastAll(player => {\n\t\t\t\t\t\t\tdelete player.storage.xinyunmrfz;\n\t\t\t\t\t\t\tdelete player.storage.xinyunmrfz_ban;\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t}, player);\n\t\t\t\t\t});\n\t\t\t\twhile (true) {\n\t\t\t\t\tlet cards = target.getCards(\"h\", card => {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tif (!result.includes(card)) return false;\n\t\t\t\t\t\treturn target.hasUseTarget(card);\n\t\t\t\t\t});\n\t\t\t\t\tif (cards.length < 1) break;\n\t\t\t\t\tawait target\n\t\t\t\t\t\t.chooseToUse()\n\t\t\t\t\t\t.set(\"filterCard\", function (card, player, event) {\n\t\t\t\t\t\t\tlet cards = player.storage.xinyunmrfz_cards;\n\t\t\t\t\t\t\tif (!cards.includes(card)) return false;\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\treturn lib.filter.filterCard.apply(this, arguments);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.set(\"prompt\", `请使用一张牌`)\n\t\t\t\t\t\t.set(\"forced\", true)\n\t\t\t\t\t\t.set(\"addCount\", false);\n\t\t\t\t}\n\t\t\t\tif (target.storage.xinyunmrfz) {\n\t\t\t\t\tawait target.loseHp();\n\t\t\t\t} else player.recoverTo(1);\n\t\t\t\tgame.broadcastAll(target => {\n\t\t\t\t\tdelete target.storage.xinyunmrfz_ban;\n\t\t\t\t\tdelete target.storage.xinyunmrfz_cards;\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t}, target);\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tthreaten: 2,\n\t\t\t\tmaixie: true,\n\t\t\t\tmaixie_hp: true,\n\t\t\t\tskillTagFilter(player, tag, arg) {\n\t\t\t\t\treturn !!(player.getStat(\"skill\").xinyunmrfz && player.getStat(\"skill\").xinyunmrfz > 0);\n\t\t\t\t},\n\t\t\t\teffect: {\n\t\t\t\t\ttarget: function (card, player, target) {\n\t\t\t\t\t\tif (player.hp < 2 && get.tag(card, \"damage\")) return [1, 0.55];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tzongyinmrfz: {\n\t\t\taudio: 2,\n\t\t\tenable: \"chooseToUse\",\n\t\t\tmark: true,\n\t\t\tintro: {\n\t\t\t\tcontent(storage) {\n\t\t\t\t\treturn `本轮已使用的花色:${get.translation(storage)}`;\n\t\t\t\t},\n\t\t\t},\n\t\t\tinit: (player, skill) => (player.storage[skill] = []),\n\t\t\tposition: \"hes\",\n\t\t\tviewAs: {\n\t\t\t\tname: \"jiu\",\n\t\t\t},\n\t\t\tviewAsFilter(player) {\n\t\t\t\treturn player.countCards(\"he\", card => !player.storage.zongyinmrfz.includes(get.suit(card))) > 0;\n\t\t\t},\n\t\t\tfilterCard(card, player, target) {\n\t\t\t\treturn !player.storage.zongyinmrfz.includes(get.suit(card));\n\t\t\t},\n\t\t\tonuse(result, player) {\n\t\t\t\tlet card = result.card;\n\t\t\t\tgame.broadcastAll(\n\t\t\t\t\tfunction (card, player) {\n\t\t\t\t\t\tplayer.storage.zongyinmrfz.add(get.suit(card));\n\t\t\t\t\t},\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tcard,\n\t\t\t\t\tplayer\n\t\t\t\t);\n\t\t\t},\n\t\t\tcheck(card) {\n\t\t\t\tif (_status.event.type === \"dying\") return 1 / Math.max(0.1, get.value(card));\n\t\t\t\treturn 4 - get.value(card);\n\t\t\t},\n\t\t\tgroup: \"zongyinmrfz_clear\",\n\t\t\tsubSkill: {\n\t\t\t\tclear: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tglobal: \"roundStart\",\n\t\t\t\t\t},\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcontent: async function (event, trigger, player) {\n\t\t\t\t\t\tplayer.storage.zongyinmrfz = [];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tthreaten: 1.5,\n\t\t\t\tbasic: {\n\t\t\t\t\tuseful: (card, i) => {\n\t\t\t\t\t\tif (_status.event.player.hp > 1) {\n\t\t\t\t\t\t\tif (i === 0) return 4;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (i === 0) return 7.3;\n\t\t\t\t\t\treturn 3;\n\t\t\t\t\t},\n\t\t\t\t\tvalue: (card, player, i) => {\n\t\t\t\t\t\tif (player.hp > 1) {\n\t\t\t\t\t\t\tif (i === 0) return 5;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (i === 0) return 7.3;\n\t\t\t\t\t\treturn 3;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\torder(item, player) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tif (_status.event.dying) return 9;\n\t\t\t\t\tlet sha = get.order({ name: \"sha\" });\n\t\t\t\t\tif (sha <= 0) return 0;\n\t\t\t\t\tlet usable = player.getCardUsable(\"sha\");\n\t\t\t\t\tif (\n\t\t\t\t\t\tusable < 2 &&\n\t\t\t\t\t\tplayer.hasCard(i => {\n\t\t\t\t\t\t\treturn get.name(i, player) == \"zhuge\";\n\t\t\t\t\t\t}, \"hs\")\n\t\t\t\t\t)\n\t\t\t\t\t\tusable = Infinity;\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tlet shas = Math.min(usable, player.mayHaveSha(player, \"use\", item, \"count\"));\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tif (shas != 1 || (lib.config.mode === \"stone\" && !player.isMin() && player.getActCount() + 1 >= player.actcount)) return 0;\n\t\t\t\t\treturn sha + 0.2;\n\t\t\t\t},\n\t\t\t\tresult: {\n\t\t\t\t\ttarget: (player, target, card) => {\n\t\t\t\t\t\tif (target && target.isDying()) return 2;\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tif (!target || target._jiu_temp || !target.isPhaseUsing()) return 0;\n\t\t\t\t\t\tlet effs = { order: 0 },\n\t\t\t\t\t\t\ttemp;\n\t\t\t\t\t\ttarget.getCards(\"hs\", i => {\n\t\t\t\t\t\t\tif (get.name(i) !== \"sha\" || ui.selected.cards.includes(i)) return false;\n\t\t\t\t\t\t\ttemp = get.order(i, target);\n\t\t\t\t\t\t\tif (temp < effs.order) return false;\n\t\t\t\t\t\t\tif (temp > effs.order) effs = { order: temp };\n\t\t\t\t\t\t\teffs[i.cardid] = {\n\t\t\t\t\t\t\t\tcard: i,\n\t\t\t\t\t\t\t\ttarget: null,\n\t\t\t\t\t\t\t\teff: 0,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t});\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tdelete effs.order;\n\t\t\t\t\t\tfor (let i in effs) {\n\t\t\t\t\t\t\tif (!lib.filter.filterCard(effs[i].card, target)) continue;\n\t\t\t\t\t\t\tgame.filterPlayer(current => {\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\tget.attitude(target, current) >= 0 ||\n\t\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\t\t!target.canUse(effs[i].card, current, null, true) ||\n\t\t\t\t\t\t\t\t\tcurrent.hasSkillTag(\"filterDamage\", null, {\n\t\t\t\t\t\t\t\t\t\tplayer: target,\n\t\t\t\t\t\t\t\t\t\tcard: effs[i].card,\n\t\t\t\t\t\t\t\t\t\tjiu: true,\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\ttemp = get.effect(current, effs[i].card, target, player);\n\t\t\t\t\t\t\t\tif (temp <= effs[i].eff) return false;\n\t\t\t\t\t\t\t\teffs[i].target = current;\n\t\t\t\t\t\t\t\teffs[i].eff = temp;\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (!effs[i].target) continue;\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\ttarget.hasSkillTag(\n\t\t\t\t\t\t\t\t\t\"directHit_ai\",\n\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttarget: effs[i].target,\n\t\t\t\t\t\t\t\t\t\tcard: i,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t\t) ||\n\t\t\t\t\t\t\t\t//(Math.min(target.getCardUsable(\"sha\"), target.mayHaveSha(player, \"use\", item, \"count\")) === 1 && (\n\t\t\t\t\t\t\t\ttarget.needsToDiscard() > Math.max(0, 3 - target.hp) ||\n\t\t\t\t\t\t\t\t!effs[i].target.mayHaveShan(\n\t\t\t\t\t\t\t\t\tplayer,\n\t\t\t\t\t\t\t\t\t\"use\",\n\t\t\t\t\t\t\t\t\teffs[i].target.getCards(i => {\n\t\t\t\t\t\t\t\t\t\treturn i.hasGaintag(\"sha_notshan\");\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t//))\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\tdelete target._jiu_temp;\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tdelete target._jiu_temp;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\ttag: {\n\t\t\t\t\tsave: 1,\n\t\t\t\t\trecover: 0.1,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tzhanwangmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { player: \"useCard2\" },\n\t\t\tfilter(event, player) {\n\t\t\t\treturn !event.targets.includes(player) && ![\"delay\", \"equip\"].includes(get.type(event.card));\n\t\t\t},\n\t\t\tforced: true,\n\t\t\tintro: {\n\t\t\t\tcontent: \"本回合手牌上限+#\",\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\ttrigger.targets.push(player);\n\t\t\t},\n\t\t\tgroup: \"zhanwangmrfz_handLimit\",\n\t\t\tsubSkill: {\n\t\t\t\thandLimit: {\n\t\t\t\t\taudio: false,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\ttarget: \"useCardToTargeted\",\n\t\t\t\t\t},\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\treturn event.card && get.tag(event.card, \"damage\") && event.targets.includes(player);\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tplayer.addMark(\"zhanwangmrfz\", 1, false);\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tplayer.getSkills().some(skill => {\n\t\t\t\t\t\t\t\tlet info = get.info(skill);\n\t\t\t\t\t\t\t\treturn info.zhanwangmrfz;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\tplayer\n\t\t\t\t\t\t\t.when({ global: \"phaseEnd\" })\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\tplayer.unmarkSkill(\"zhanwangmrfz\");\n\t\t\t\t\t\t\t\tplayer.removeMark(\"zhanwangmrfz\", player.countMark(\"zhanwangmrfz\"), false);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.assign({\n\t\t\t\t\t\t\t\tzhanwangmrfz: true,\n\t\t\t\t\t\t\t\tmod: {\n\t\t\t\t\t\t\t\t\tmaxHandcard(player, num) {\n\t\t\t\t\t\t\t\t\t\treturn num + player.getStorage(\"zhanwangmrfz\");\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\t//信仰搅拌机\n\t\tdaoweimrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { player: \"phaseDrawEnd\" },\n\t\t\tforced: true,\n\t\t\tfilter(event, player) {\n\t\t\t\tlet cards = [];\n\t\t\t\tlet histories = player.getHistory(\"gain\", evt => {\n\t\t\t\t\tlet evtx = evt.getParent(2);\n\t\t\t\t\treturn evtx.name === \"phaseDraw\" || (evtx.triggername && evtx.triggername.includes(\"phaseDraw\"));\n\t\t\t\t});\n\t\t\t\tfor (let history of histories) {\n\t\t\t\t\tif (history.cards) cards.push(...history.cards);\n\t\t\t\t}\n\t\t\t\treturn cards.length > 0;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet cards = [];\n\t\t\t\tlet histories = player.getHistory(\"gain\", evt => {\n\t\t\t\t\tlet evtx = evt.getParent(2);\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\treturn evtx.name === \"phaseDraw\" || (evtx.triggername && evtx.triggername.includes(\"phaseDraw\"));\n\t\t\t\t});\n\t\t\t\tfor (let history of histories) {\n\t\t\t\t\tif (history.cards) cards.push(...history.cards);\n\t\t\t\t}\n\t\t\t\tawait player.discard(cards);\n\t\t\t\tplayer.draw(cards.length * 2);\n\t\t\t\tplayer.storage.daoweimrfz_ban = Array.from(new Set(cards.map(card => card.name)));\n\t\t\t\tplayer.addTempSkill(\"daoweimrfz_ban\", { player: \"phaseEnd\" });\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\tban: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tonremove: true,\n\t\t\t\t\tmark: true,\n\t\t\t\t\tintro: {\n\t\t\t\t\t\tcontent(_, player) {\n\t\t\t\t\t\t\treturn `·无法使用或打出${get.translation(player.storage.daoweimrfz_ban)}`;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tmod: {\n\t\t\t\t\t\tcardEnabled2(card, player) {\n\t\t\t\t\t\t\tif (player.storage.daoweimrfz_ban.includes(card.name)) return false;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tchongzhoumrfz: {\n\t\t\taudio: 2,\n\t\t\tenable: [\"chooseToUse\", \"chooseToRespond\"],\n\t\t\tusable: 1,\n\t\t\tintro: {\n\t\t\t\tname: \"铳胄\",\n\t\t\t\tcontent: \"本回合手牌上限+2\",\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\tif (event.type == \"wuxie\") return false;\n\t\t\t\tfor (var name of [\"sha\", \"shan\"]) {\n\t\t\t\t\tif (event.filterCard({ name: name, isCard: true }, player, event)) return true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tchooseButton: {\n\t\t\t\tdialog(event, player) {\n\t\t\t\t\tvar vcards = [];\n\t\t\t\t\tfor (var name of [\"sha\", \"shan\"]) {\n\t\t\t\t\t\tvar card = { name: name, isCard: true };\n\t\t\t\t\t\tif (event.filterCard(card, player, event)) {\n\t\t\t\t\t\t\tif (name === \"sha\") {\n\t\t\t\t\t\t\t\tfor (var j of lib.inpile_nature) vcards.push([\"基本\", \"\", \"sha\", j]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvcards.push([\"基本\", \"\", name]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t/**@type {Dialog}*/\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tvar dialog = ui.create.dialog(\"铳胄\", [vcards, \"vcard\"], \"hidden\");\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tdialog.direct = true;\n\t\t\t\t\treturn dialog;\n\t\t\t\t},\n\t\t\t\tbackup(links, player) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\taudio: \"chongzhoumrfz\",\n\t\t\t\t\t\tfilterCard: () => true,\n\t\t\t\t\t\tselectCard: 1,\n\t\t\t\t\t\tviewAs: {\n\t\t\t\t\t\t\tname: links[0][2],\n\t\t\t\t\t\t\tnature: links[0][3],\n\t\t\t\t\t\t\tisCard: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tpopname: true,\n\t\t\t\t\t\tasync precontent(event, trigger, player) {\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tlet target = _status.currentPhase;\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\ttarget.getSkills().filter(skill => {\n\t\t\t\t\t\t\t\t\tlet info = get.info(skill);\n\t\t\t\t\t\t\t\t\treturn info.sourceSkill && info.sourceSkill === \"chongzhoumrfz\";\n\t\t\t\t\t\t\t\t}).length < 1\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\ttarget.markSkill(\"chongzhoumrfz\");\n\t\t\t\t\t\t\t\ttarget\n\t\t\t\t\t\t\t\t\t.when({ player: \"phaseEnd\" })\n\t\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\t\tplayer.unmarkSkill(\"chongzhoumrfz\");\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.assign({\n\t\t\t\t\t\t\t\t\t\tmod: {\n\t\t\t\t\t\t\t\t\t\t\tmaxHandcard: function (player, num) {\n\t\t\t\t\t\t\t\t\t\t\t\treturn (num += 2);\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tprompt(links, player) {\n\t\t\t\t\treturn \"铳胄：视为使用一张\" + (links[0][3] ? get.translation(links[0][3]) : \"\") + \"【\" + get.translation(links[0][2]) + \"】\";\n\t\t\t\t},\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder(item, player) {\n\t\t\t\t\tvar player = _status.event.player;\n\t\t\t\t\tvar event = _status.event;\n\t\t\t\t\tif (event.filterCard({ name: \"sha\" }, player, event)) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!player.hasShan() &&\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t!game.hasPlayer(function (current) {\n\t\t\t\t\t\t\t\treturn player.canUse(\"sha\", current) && current.hp == 1 && get.effect(current, { name: \"sha\" }, player, player) > 0;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 2.95;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar player = _status.event.player;\n\t\t\t\t\t\tif (player.hasSkill(\"qingzhong_give\")) return 2.95;\n\t\t\t\t\t\treturn 3.15;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trespondSha: true,\n\t\t\t\trespondShan: true,\n\t\t\t\tskillTagFilter(player, tag, arg) {\n\t\t\t\t\tif (arg === \"respond\") return false;\n\t\t\t\t},\n\t\t\t\tresult: {\n\t\t\t\t\tplayer: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tshiyimrfz: {\n\t\t\taudio: 2,\n\t\t\tderivation: [\"xiangle\"],\n\t\t\tinit(player, skill) {\n\t\t\t\tplayer.storage[skill] = false;\n\n\t\t\t\tlet info = get.info(\"xiangle\");\n\t\t\t\tif (!info.audioname2) info.audioname2 = {};\n\t\t\t\tinfo.audioname2[\"xinyangjiaobanjimrfz\"] = \"xiangle_xinyangjiaobanjimrfz\";\n\t\t\t},\n\t\t\ttrigger: {\n\t\t\t\tplayer: [\"dying\", \"loseAfter\"],\n\t\t\t\tglobal: [\"equipAfter\", \"addJudgeAfter\", \"gainAfter\", \"loseAsyncAfter\", \"addToExpansionAfter\"],\n\t\t\t},\n\t\t\tskillAnimation: true,\n\t\t\tanimationColor: \"wood\",\n\t\t\tjuexingji: true,\n\t\t\tunique: true,\n\t\t\tfilter: function (event, player) {\n\t\t\t\tif (event.name === \"dying\") return !player.storage.shiyimrfz;\n\t\t\t\telse {\n\t\t\t\t\tif (player.countCards(\"h\")) return false;\n\t\t\t\t\tconst evt = event.getl(player);\n\t\t\t\t\treturn evt && evt.player == player && evt.hs && evt.hs.length > 0 && !player.storage.shiyimrfz;\n\t\t\t\t}\n\t\t\t},\n\t\t\tforced: true,\n\t\t\tcontent: async function (event, trigger, player) {\n\t\t\t\tplayer.loseMaxHp();\n\t\t\t\tplayer.recover();\n\t\t\t\tplayer.addSkill(\"xiangle\");\n\t\t\t\tplayer.removeSkill(\"daoweimrfz\");\n\t\t\t\tgame.log(player, \"获得了技能\", \"#g【享乐】\");\n\t\t\t\tplayer.awakenSkill(event.name);\n\t\t\t\tplayer.storage[event.name] = true;\n\n\t\t\t\tlet num = 5 - player.getAllHistory(\"useSkill\", evt => evt.skill === \"daoweimrfz\").length;\n\t\t\t\tnum = Math.max(num, 1);\n\t\t\t\tplayer.draw(num);\n\t\t\t\tplayer.storage.shiyimrfz_eff = num;\n\t\t\t\tplayer.addSkill(\"shiyimrfz_eff\");\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\teff: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tonremove: true,\n\t\t\t\t\tmark: true,\n\t\t\t\t\tintro: {\n\t\t\t\t\t\tcontent(_, player) {\n\t\t\t\t\t\t\tlet num = player.storage.shiyimrfz_eff;\n\t\t\t\t\t\t\treturn `·手牌上限+${num}<br>·额定摸牌数+${num}`;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\treturn !event.numFixed;\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\ttrigger.num += player.storage.shiyimrfz_eff;\n\t\t\t\t\t},\n\t\t\t\t\tmod: {\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\n\t\t\t\t\t\t\treturn num + player.storage.shiyimrfz_eff;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\txiangle_xinyangjiaobanjimrfz: { audio: 2 },\n\n\t\t//蕾缪安\n\t\tfeiyimrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\n\t\t\tintro: {\n\t\t\t\tcontent(_, player) {\n\t\t\t\t\tlet index;\n\t\t\t\t\tplayer.getSkills().forEach(skill => {\n\t\t\t\t\t\tlet info = get.info(skill);\n\t\t\t\t\t\tif (typeof info.feiyimrfz === \"number\") {\n\t\t\t\t\t\t\tindex = info.feiyimrfz;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn `·回合内你的攻击距离${index === 0 ? \"+1\" : \"-1\"}<br>·其他角色计算与你的距离${index === 0 ? \"-1\" : \"+1\"}`;\n\t\t\t\t},\n\t\t\t},\n\t\t\tasync cost(event, trigger, player) {\n\t\t\t\tconst { index } = await player\n\t\t\t\t\t.chooseControl(\"选项一\", \"选项二\", \"cancel2\")\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"feiyimrfz\"))\n\t\t\t\t\t.set(\"prompt2\", `1`)\n\t\t\t\t\t.set(\"choiceList\", [\"你可以令你本回合的攻击距离+1，然后直到下个准备阶段开始时，其他角色计算与你的距离-1。\", \"你可以令你本回合的攻击距离-1，然后直到下个准备阶段开始时，其他角色计算与你的距离+1。\"])\n\t\t\t\t\t.set(\"ai\", () => 1)\n\t\t\t\t\t.forResult();\n\t\t\t\tif (typeof index === \"number\")\n\t\t\t\t\tevent.result = {\n\t\t\t\t\t\tbool: true,\n\t\t\t\t\t\tcost_data: {\n\t\t\t\t\t\t\tindex: index,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\telse event.result = { bool: false };\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tconst { index } = event.cost_data;\n\t\t\t\tplayer.markSkill(\"feiyimrfz\");\n\t\t\t\tplayer\n\t\t\t\t\t.when({ player: \"phaseBegin\" })\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tplayer.unmarkSkill(\"feiyimrfz\");\n\t\t\t\t\t})\n\t\t\t\t\t.assign({\n\t\t\t\t\t\tmod: {\n\t\t\t\t\t\t\tglobalTo(from, to, distance) {\n\t\t\t\t\t\t\t\treturn distance + (index === 0 ? -1 : 1);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tattackRange: function (player, num) {\n\t\t\t\t\t\t\t\treturn (num += index === 0 ? 1 : -1);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfeiyimrfz: index,\n\t\t\t\t\t});\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tthreaten: 0.8,\n\t\t\t\tcombo: \"mingzhengmrfz\",\n\t\t\t},\n\t\t},\n\t\tmingzhengmrfz: {\n\t\t\taudio: 2,\n\t\t\tenable: \"phaseUse\",\n\t\t\tusable: 1,\n\t\t\tfilter(event, player) {\n\t\t\t\treturn event.filterCard ? player.countCards(\"h\", card => event.filterCard(card, player, event)) > 0 : player.countCards(\"h\") > 0;\n\t\t\t},\n\t\t\tfilterCard: (card, player, event) => {\n\t\t\t\treturn !lib.filter.filterCard(card, player, event);\n\t\t\t},\n\t\t\tselectCard: () => {\n\t\t\t\tlet player = get.player();\n\t\t\t\tlet num = player.getCards(\"h\", card => lib.filter.filterCard(card, player)).length;\n\t\t\t\tnum = Math.max(num, 1);\n\t\t\t\treturn [0, num];\n\t\t\t},\n\t\t\tdiscard: false,\n\t\t\tlose: false,\n\t\t\tintro: {\n\t\t\t\tcontent: \"·使用牌无距离限制<br>·使用的牌无视防具\",\n\t\t\t},\n\t\t\tcheck(card) {\n\t\t\t\tlet player = get.player();\n\t\t\t\treturn get.value(card, player) < 6;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tawait player.recast(event.cards);\n\t\t\t\tlet canUseCount = player.getCards(\"h\", card => lib.filter.filterCard(card, player)).length;\n\t\t\t\tlet cantUseCount = player.getCards(\"h\", card => !lib.filter.filterCard(card, player)).length;\n\t\t\t\tif (canUseCount > cantUseCount) {\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\tplayer.markSkill(\"mingzhengmrfz\");\n\t\t\t\t\tplayer.addTempSkill(\"mingzhengmrfz_ig\", { player: \"phaseEnd\" });\n\t\t\t\t\tplayer\n\t\t\t\t\t\t.when({ player: \"phaseEnd\" })\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tplayer.unmarkSkill(\"mingzhengmrfz\");\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.assign({\n\t\t\t\t\t\t\tmod: {\n\t\t\t\t\t\t\t\ttargetInRange: function () {\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\tig: {\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"useCardToPlayered\",\n\t\t\t\t\t},\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tlogTarget: \"target\",\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\ttrigger.target.addTempSkill(\"qinggang2\");\n\t\t\t\t\t\ttrigger.target.storage.qinggang2.add(trigger.card);\n\t\t\t\t\t\ttrigger.target.markSkill(\"qinggang2\");\n\t\t\t\t\t},\n\t\t\t\t\tai: {\n\t\t\t\t\t\tunequip_ai: true,\n\t\t\t\t\t\tskillTagFilter(player, tag, arg) {\n\t\t\t\t\t\t\tif (arg && arg.name == \"sha\") return true;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 13,\n\t\t\t\tresult: {\n\t\t\t\t\tplayer: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tzhuijimrfz: {\n\t\t\taudio: 3,\n\t\t\ttrigger: { player: \"phaseUseBegin\" },\n\t\t\tfilter(event, player) {\n\t\t\t\t//@ts-ignore\n\t\t\t\treturn game.countPlayer(c => c.countCards(\"h\") && c !== player && !player.inRange(c)) > 0;\n\t\t\t},\n\t\t\tprompt2(event, player) {\n\t\t\t\t//@ts-ignore\n\t\t\t\tlet targets = game.filterPlayer(c => c.countCards(\"h\") && c !== player && !player.inRange(c));\n\t\t\t\treturn `你可以展示你攻击范围外所有角色（${get.translation(targets)}）的一张牌，所有因此展示了伤害类牌的角色本阶段成为你使用牌的目标时，你可以对其造成一点伤害或摸一张牌（每项每名角色每阶段限一次）。`;\n\t\t\t},\n\t\t\tintro: {\n\t\t\t\tcontent(_, player) {\n\t\t\t\t\treturn `成为通缉的目标`;\n\t\t\t\t},\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\t//@ts-ignore\n\t\t\t\tlet targets = game.filterPlayer(c => c.countCards(\"h\") && c !== player && !player.inRange(c));\n\t\t\t\tlet obj = {\n\t\t\t\t\tcards: [],\n\t\t\t\t\ttargets: [],\n\t\t\t\t};\n\t\t\t\tfor (let target of targets) {\n\t\t\t\t\tconst { cards } = await player\n\t\t\t\t\t\t.choosePlayerCard(\"h\", true, target)\n\t\t\t\t\t\t.set(\"ai\", () => get.rand(0, 1))\n\t\t\t\t\t\t.set(\"prompt\", `展示${target}一张手牌`)\n\t\t\t\t\t\t.forResult();\n\t\t\t\t\tif (!cards) return;\n\t\t\t\t\tlet card = cards[0];\n\t\t\t\t\tif (card) {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tobj.cards.push(card);\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tobj.targets.push(target);\n\t\t\t\t\t\tif (get.suit(card) !== \"spade\") {\n\t\t\t\t\t\t\ttarget.storage.zhuijimrfz = [];\n\t\t\t\t\t\t\ttarget.markSkill(\"zhuijimrfz\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (obj.cards.length > 0) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tevent.videoId = lib.status.videoId++;\n\t\t\t\t\tgame.log(player, \"展示了\", obj.targets, \"的\", obj.cards);\n\t\t\t\t\tgame.broadcastAll(\n\t\t\t\t\t\tfunction (info, id, player) {\n\t\t\t\t\t\t\tlet { targets, cards } = info;\n\t\t\t\t\t\t\tvar dialog = ui.create.dialog(`因${get.translation(player)}的【追缉】而展示的牌`, cards);\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tdialog.videoId = id;\n\t\t\t\t\t\t\tvar getName = function (target) {\n\t\t\t\t\t\t\t\tif (target._tempTranslate) return target._tempTranslate;\n\t\t\t\t\t\t\t\tvar name = target.name;\n\t\t\t\t\t\t\t\tif (lib.translate[name + \"_ab\"]) return lib.translate[name + \"_ab\"];\n\t\t\t\t\t\t\t\treturn get.translation(name);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tfor (var i = 0; i < targets.length; i++) {\n\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\tdialog.buttons[i].querySelector(\".info\").innerHTML = getName(targets[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tdialog.show();\n\t\t\t\t\t\t\t}, 1);\n\t\t\t\t\t\t},\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tobj,\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tevent.videoId,\n\t\t\t\t\t\tplayer\n\t\t\t\t\t);\n\t\t\t\t\tgame.delay(3);\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tgame.broadcastAll(\"closeDialog\", event.videoId);\n\t\t\t\t\t}, 3000);\n\t\t\t\t}\n\t\t\t},\n\t\t\tgroup: [\"zhuijimrfz_clear\", \"zhuijimrfz_eff\"],\n\t\t\tsubSkill: {\n\t\t\t\teff: {\n\t\t\t\t\tmod: {\n\t\t\t\t\t\tcardUsableTarget(card, player, target) {\n\t\t\t\t\t\t\tif (Array.isArray(target.storage.zhuijimrfz)) return true;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\taudio: \"zhuijimrfz\",\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: { player: \"useCardToTargeted\" },\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\tlet storage = event.target.storage.zhuijimrfz;\n\t\t\t\t\t\treturn storage && storage.length < 2;\n\t\t\t\t\t},\n\t\t\t\t\tasync cost(event, trigger, player) {\n\t\t\t\t\t\tlet storage = trigger.target.storage.zhuijimrfz;\n\t\t\t\t\t\tlet list = [\"摸一张牌\", `对${get.translation(trigger.target)}造成一点伤害`];\n\t\t\t\t\t\tif (storage.includes(\"damage\") || storage.includes(\"draw\")) {\n\t\t\t\t\t\t\tlet str = storage.includes(\"draw\") ? `是否对${get.translation(trigger.target)}造成一点伤害？` : `是否摸一张牌？`;\n\t\t\t\t\t\t\tlet aiBool = true;\n\t\t\t\t\t\t\tif (storage.includes(\"draw\") && get.damageEffect(trigger.target, player, player) < 0) aiBool = false;\n\t\t\t\t\t\t\tconst { bool } = await player\n\t\t\t\t\t\t\t\t.chooseBool()\n\t\t\t\t\t\t\t\t.set(\"prompt\", str)\n\t\t\t\t\t\t\t\t.set(\"ai\", () => aiBool)\n\t\t\t\t\t\t\t\t.forResult();\n\t\t\t\t\t\t\tevent.result = {\n\t\t\t\t\t\t\t\tbool: bool,\n\t\t\t\t\t\t\t\tcost_data: {\n\t\t\t\t\t\t\t\t\tindex: storage.includes(\"draw\") ? 1 : 0,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst { index } = await player\n\t\t\t\t\t\t\t\t.chooseControl(\"选项一\", \"选项二\", \"cancel2\")\n\t\t\t\t\t\t\t\t.set(\"choiceList\", list)\n\t\t\t\t\t\t\t\t.set(\"ai\", () => {\n\t\t\t\t\t\t\t\t\tlet player = get.player();\n\t\t\t\t\t\t\t\t\tlet target = get.event().target;\n\t\t\t\t\t\t\t\t\treturn get.damageEffect(target, player, player) > 0 ? 1 : 0;\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.set(\"target\", trigger.target)\n\t\t\t\t\t\t\t\t.forResult();\n\t\t\t\t\t\t\tif (typeof index === \"number\") {\n\t\t\t\t\t\t\t\tevent.result = {\n\t\t\t\t\t\t\t\t\tbool: true,\n\t\t\t\t\t\t\t\t\tcost_data: {\n\t\t\t\t\t\t\t\t\t\tindex: index,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t} else event.result = { bool: false };\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tconst { index } = event.cost_data;\n\t\t\t\t\t\tif (index === 0) {\n\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttrigger.target.damage(player);\n\t\t\t\t\t\t\tplayer.line(trigger.target);\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttrigger.target.storage.zhuijimrfz.push(index === 0 ? \"draw\" : \"damage\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tclear: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\ttrigger: { player: \"phaseUseEnd\" },\n\t\t\t\t\tcontent() {\n\t\t\t\t\t\tfor (let char of game.players) {\n\t\t\t\t\t\t\tif (Array.isArray(char.storage.zhuijimrfz)) {\n\t\t\t\t\t\t\t\tchar.unmarkSkill(\"zhuijimrfz\");\n\t\t\t\t\t\t\t\tdelete char.storage.zhuijimrfz;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t// 新约能天使\n\t\tyouhuomrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { player: \"useCard\" },\n\t\t\tfilter(event, player) {\n\t\t\t\treturn event.card.name === \"sha\" && player.countCards(\"h\", card => player.canRecast(card)) > 0;\n\t\t\t},\n\t\t\tintro: {\n\t\t\t\tcontent(_, player) {\n\t\t\t\t\tlet addCount = player.getSkills().filter(skill => {\n\t\t\t\t\t\tlet info = get.info(skill);\n\t\t\t\t\t\treturn info.youhuomrfz;\n\t\t\t\t\t}).length;\n\t\t\t\t\treturn `·本回合可额外使用${addCount}张【杀】<br>·本回合剩余可使用【杀】的数量：${player.getCardUsable(\"sha\")}`;\n\t\t\t\t},\n\t\t\t},\n\t\t\tasync cost(event, trigger, player) {\n\t\t\t\tlet num = player.getHistory(\"useSkill\", evt => evt.skill === \"youhuomrfz\").length + 1;\n\t\t\t\tevent.result = await player\n\t\t\t\t\t.chooseCard()\n\t\t\t\t\t.set(\"filterCard\", (card, player) => player.canRecast(card))\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"youhuomrfz\"))\n\t\t\t\t\t.set(\"prompt2\", `你可以重铸一张手牌，若此牌为伤害类牌，此牌(${get.translation(trigger.card)})额外结算${num}次，且若此牌造成伤害，你本回合使用【杀】的次数+1`)\n\t\t\t\t\t.set(\"ai\", card => {\n\t\t\t\t\t\tlet num = 6 - get.value(card);\n\t\t\t\t\t\tif (get.tag(card, \"damage\")) num += 2;\n\t\t\t\t\t\treturn num;\n\t\t\t\t\t})\n\t\t\t\t\t.forResult();\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet num = player.getHistory(\"useSkill\", evt => evt.skill === \"youhuomrfz\").length;\n\t\t\t\tawait player.recast(event.cards);\n\t\t\t\tif (get.tag(event.cards[0], \"damage\") > 0) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\ttrigger.effectCount += num;\n\t\t\t\t\tplayer\n\t\t\t\t\t\t.when({\n\t\t\t\t\t\t\tsource: \"damageEnd\",\n\t\t\t\t\t\t\tglobal: lib.phaseName.map(i => i + \"End\"),\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.filter(event => {\n\t\t\t\t\t\t\treturn event.name !== \"damage\" || event.card === trigger.card;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tif (trigger.name === \"damage\") {\n\t\t\t\t\t\t\t\tplayer.markSkill(\"youhuomrfz\");\n\t\t\t\t\t\t\t\tplayer\n\t\t\t\t\t\t\t\t\t.when({ player: \"phaseEnd\" })\n\t\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\t\tplayer.unmarkSkill(\"youhuomrfz\");\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.assign({\n\t\t\t\t\t\t\t\t\t\tmod: {\n\t\t\t\t\t\t\t\t\t\t\tcardUsable(card, player, num) {\n\t\t\t\t\t\t\t\t\t\t\t\tif (card.name == \"sha\") return num + 1;\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tyouhuomrfz: true,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\tletianmrfz: {\n\t\t\taudio: 2,\n\t\t\tinit() {\n\t\t\t\tlib.translate[\"letianmrfz_tips\"] = \"旧约\";\n\t\t\t},\n\t\t\tforced: true,\n\t\t\ttrigger: { global: \"phaseEnd\" },\n\t\t\tfilter(event, player) {\n\t\t\t\treturn player.countCards(\"h\", card => card.hasGaintag(\"letianmrfz_tips\")) < 1;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\t//@ts-ignore\n\t\t\t\tplayer.drawTo(4);\n\t\t\t\tplayer.removeGaintag(\"letianmrfz_tips\");\n\t\t\t},\n\t\t\tgroup: [\"letianmrfz_begin\"],\n\t\t\tsubSkill: {\n\t\t\t\tbegin: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tpriority: 114514,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tglobal: \"phaseBegin\",\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tfor (let card of player.getCards(\"h\")) {\n\t\t\t\t\t\t\tcard.addGaintag(\"letianmrfz_tips\");\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t//隐德莱希\n\t\tpingyimrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { global: \"phaseEnd\" },\n\t\t\tgetCharacter() {\n\t\t\t\tlet result = {\n\t\t\t\t\tsourceDamage: [],\n\t\t\t\t\tdamage: [],\n\t\t\t\t\tall: [],\n\t\t\t\t};\n\t\t\t\tfor (let char of game.players) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tchar.getHistory(\"sourceDamage\", evt => {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tif (evt.player) result.damage.add(evt.player);\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tif (evt.source) result.sourceDamage.add(evt.source);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tresult.all = result.sourceDamage.concat(result.damage);\n\t\t\t\treturn result;\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\tlet { sourceDamage, damage } = lib.skill.pingyimrfz.getCharacter();\n\t\t\t\treturn (sourceDamage.length > 0 || damage.length > 0) && event.player !== player;\n\t\t\t},\n\t\t\tasync cost(event, trigger, player) {\n\t\t\t\tevent.result = await player\n\t\t\t\t\t.chooseTarget()\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"pingyimrfz\"))\n\t\t\t\t\t.set(\"prompt2\", get.prompt2(\"pingyimrfz\").replace(/###([^#]+)###/g, \"\"))\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tlet { sourceDamage, damage, all } = get.event().info;\n\t\t\t\t\t\t//技能提示\n\t\t\t\t\t\tfor (let char of game.players) {\n\t\t\t\t\t\t\tlet prompt = [];\n\t\t\t\t\t\t\tif (sourceDamage.includes(char)) prompt.push(\"使用【杀】\");\n\t\t\t\t\t\t\tif (damage.includes(char)) prompt.push(\"使用【桃】\");\n\t\t\t\t\t\t\tif (prompt.length > 0) whichWayTips.addPrompt(char, prompt.length > 1 ? prompt.map(text => `<span class = \"promptTextSJZX\">${text}</span>`).join(\"<br>\") : prompt[0], \"pingyimrfz\", \"uncheckBegin\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn all.includes(target);\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"info\", lib.skill.pingyimrfz.getCharacter())\n\t\t\t\t\t.forResult();\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet { sourceDamage, damage, all } = lib.skill.pingyimrfz.getCharacter();\n\t\t\t\tlet target = event.targets[0];\n\t\t\t\tlet name = [];\n\t\t\t\tif (sourceDamage.includes(target)) name.add(\"sha\");\n\t\t\t\tif (damage.includes(target)) name.add(\"tao\");\n\t\t\t\tlet prompt = `对${get.translation(target)}使用一张`;\n\t\t\t\tif (name.length === 1) prompt = prompt + `【${get.translation(name[0])}】`;\n\t\t\t\telse prompt = prompt + `【${get.translation(name[0])}】或【${get.translation(name[1])}】`;\n\t\t\t\tawait player\n\t\t\t\t\t.chooseToUse(target)\n\t\t\t\t\t.set(\"prompt\", prompt)\n\t\t\t\t\t.set(\"filterCard\", (card, player, event) => {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\treturn get.event().namex.includes(get.name(card));\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"namex\", name);\n\t\t\t\tif (player.storage.pingyimrfz_check) {\n\t\t\t\t\tdelete player.storage.pingyimrfz_check;\n\t\t\t\t\tlet next = game.createEvent(\"pingyimrfz_repeat\");\n\t\t\t\t\tnext.player = player;\n\t\t\t\t\tnext.setContent(async function (event, trigger, player) {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tawait lib.skill.pingyimrfz.cost(event, trigger, player);\n\t\t\t\t\t\tif (event.result.bool !== true) return;\n\t\t\t\t\t\tevent.targets = event.result.targets;\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tawait lib.skill.pingyimrfz.content(event, trigger, player);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tgroup: [\"pingyimrfz_check\"],\n\t\t\tsubSkill: {\n\t\t\t\tcheck: {\n\t\t\t\t\tsilent: true,\n\t\t\t\t\taudio: false,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tglobal: \"changeHp\",\n\t\t\t\t\t},\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\treturn event.getParent(5).name === \"pingyimrfz\" || event.getParent(5).name === \"pingyimrfz_repeat\";\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tplayer.storage.pingyimrfz_check = true;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tbeinuomrfz: {\n\t\t\taudio: 2,\n\t\t\tusable: 3,\n\t\t\t/*\n\t\t\t * false为最后获得，true为最先获得\n\t\t\t */\n\t\t\tgetCard(bool, debug) {\n\t\t\t\tlet player = get.player();\n\t\t\t\tlet cards = player.getCards(\"h\")?.filter(card => card.storage && typeof card.storage.beinuomrfz === \"number\");\n\t\t\t\tif (!cards) return;\n\t\t\t\treturn debug\n\t\t\t\t\t? cards.sort((a, b) => {\n\t\t\t\t\t\t\tlet num1 = a.storage.beinuomrfz;\n\t\t\t\t\t\t\tlet num2 = b.storage.beinuomrfz;\n\t\t\t\t\t\t\treturn num1 - num2;\n\t\t\t\t\t\t})\n\t\t\t\t\t: cards.sort((a, b) => {\n\t\t\t\t\t\t\tlet num1 = a.storage.beinuomrfz;\n\t\t\t\t\t\t\tlet num2 = b.storage.beinuomrfz;\n\t\t\t\t\t\t\treturn num1 - num2;\n\t\t\t\t\t\t})[bool ? 0 : cards.length - 1];\n\t\t\t},\n\t\t\tinit() {\n\t\t\t\tlib.translate[\"beinuomrfz_last\"] = \"最后获得\";\n\t\t\t\tlib.translate[\"beinuomrfz_earliest\"] = \"最先获得\";\n\t\t\t},\n\t\t\tenable: \"chooseToUse\",\n\t\t\tfilterCard(card, player) {\n\t\t\t\treturn card === lib.skill.beinuomrfz.getCard(false);\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\tlet name = lib.skill.beinuomrfz.getCard(true)?.name;\n\t\t\t\tif (!name) return false;\n\t\t\t\tlet card = get.autoViewAs({ name: name }, [lib.skill.beinuomrfz.getCard(false)]);\n\t\t\t\treturn event.filterCard(card, player, event);\n\t\t\t},\n\t\t\tviewAs(cards, player) {\n\t\t\t\tlet name = lib.skill.beinuomrfz.getCard(true).name;\n\t\t\t\treturn { name: name };\n\t\t\t},\n\t\t\tprompt() {\n\t\t\t\treturn `你可以将最后获得的牌(${get.translation(lib.skill.beinuomrfz.getCard(false).name)})当作最先获得的牌(${get.translation(lib.skill.beinuomrfz.getCard(true).name)})使用`;\n\t\t\t},\n\t\t\tasync precontent(event, trigger, player) {\n\t\t\t\tlet last = lib.skill.beinuomrfz.getCard(false);\n\t\t\t\tlet earliest = lib.skill.beinuomrfz.getCard(true);\n\t\t\t\tlet cards = event.result.cards;\n\t\t\t\tif (get.type2(last) !== get.type2(earliest)) {\n\t\t\t\t\tplayer\n\t\t\t\t\t\t.when({ player: \"useCardAfter\" })\n\t\t\t\t\t\t.filter((event, player) => {\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\treturn event.cards && event.cards[0] === cards[0];\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t// let cards = player.getCards(\"h\")\n\t\t\t\t\t\t\t// \t.filter(card=>card.storage&&typeof card.storage.beinuomrfz === \"number\")\n\t\t\t\t\t\t\t// \t.sort((a,b)=>{\n\t\t\t\t\t\t\t// \t\treturn a.storage.beinuomrfz - b.storage.beinuomrfz;\n\t\t\t\t\t\t\t// \t});\n\t\t\t\t\t\t\t// let last = cards[cards.length-1].storage.beinuomrfz;\n\t\t\t\t\t\t\t// let earliest = cards[0].storage.beinuomrfz;\n\t\t\t\t\t\t\t// cards[0].storage.beinuomrfz = last;\n\t\t\t\t\t\t\t// cards[cards.length-1].storage.beinuomrfz = earliest;\n\t\t\t\t\t\t\tplayer\n\t\t\t\t\t\t\t\t.chooseCard(\"你可以将一张手牌视为你最先获得的牌\")\n\t\t\t\t\t\t\t\t.set(\"filterCard\", card => {\n\t\t\t\t\t\t\t\t\treturn card !== lib.skill.beinuomrfz.getCard(true);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.set(\"ai\", card => {\n\t\t\t\t\t\t\t\t\tlet earliest = lib.skill.beinuomrfz.getCard(true);\n\t\t\t\t\t\t\t\t\tlet player = get.player();\n\t\t\t\t\t\t\t\t\tif ([\"sha\", \"tao\"].includes(earliest.name)) return -1;\n\t\t\t\t\t\t\t\t\tif ([\"sha\", \"tao\"].includes(card.name)) return 10 + player.hp < 3 ? get.value(card) : 0;\n\t\t\t\t\t\t\t\t\treturn get.value(earliest) >= get.value(card) ? -1 : get.value(card);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tlet result = event._result;\n\t\t\t\t\t\t\tif (result.cards) {\n\t\t\t\t\t\t\t\tresult.cards[0].storage.beinuomrfz = lib.skill.beinuomrfz.getCard(true).storage.beinuomrfz - 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tlib.skill.beinuomrfz.subSkill.tip.content(event, trigger, player);\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tgroup: [\"beinuomrfz_tag\", \"beinuomrfz_tip\"],\n\t\t\tsubSkill: {\n\t\t\t\ttag: {\n\t\t\t\t\tsilent: true,\n\t\t\t\t\taudio: false,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"gainAfter\",\n\t\t\t\t\t\tglobal: \"gameDrawAfter\",\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tif (!player.storage.beinuomrfz_tag) player.storage.beinuomrfz_tag = 0;\n\t\t\t\t\t\tlet cards = trigger.name === \"gain\" ? trigger.cards : player.getCards(\"h\");\n\t\t\t\t\t\tfor (let card of cards) {\n\t\t\t\t\t\t\tcard.storage.beinuomrfz = player.storage.beinuomrfz_tag;\n\t\t\t\t\t\t\tplayer.storage.beinuomrfz_tag++;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\ttip: {\n\t\t\t\t\tsilent: true,\n\t\t\t\t\taudio: false,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: [\"gainAfter\", \"loseAfter\"],\n\t\t\t\t\t\tglobal: \"gameDrawAfter\",\n\t\t\t\t\t},\n\t\t\t\t\tlastDo: true,\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tfor (let card of player.getCards(\"h\").filter(card => card.storage && typeof card.storage.beinuomrfz === \"number\")) {\n\t\t\t\t\t\t\tcard.removeGaintag(\"beinuomrfz_last\");\n\t\t\t\t\t\t\tcard.removeGaintag(\"beinuomrfz_earliest\");\n\t\t\t\t\t\t\tif (card === lib.skill.beinuomrfz.getCard(false)) card.addGaintag(\"beinuomrfz_last\");\n\t\t\t\t\t\t\tif (card === lib.skill.beinuomrfz.getCard(true)) card.addGaintag(\"beinuomrfz_earliest\");\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 10,\n\t\t\t\tresult: {\n\t\t\t\t\tplayer: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t// 爱布拉娜 香蕉姐 死芒\n\t\tyizhamrfz: {\n\t\t\tinit() {\n\t\t\t\tlib.translate[\"yizhamrfz_tip1\"] = \"拼点\";\n\t\t\t\tlib.translate[\"yizhamrfz_tip2\"] = \"议事\";\n\t\t\t},\n\t\t\taudio: 2,\n\t\t\tenable: \"phaseUse\",\n\t\t\tusable: 1,\n\t\t\tfilter(event, player) {\n\t\t\t\treturn game.hasPlayer(char => char !== player && char.countCards(\"h\") > 0 && player.canCompare(char)) && player.countCards(\"h\") > 0;\n\t\t\t},\n\t\t\tfilterTarget(card, player, target) {\n\t\t\t\treturn target !== player && target.countCards(\"h\") > 0 && player.canCompare(target);\n\t\t\t},\n\t\t\tselectTarget: [1, 2],\n\t\t\tmultitarget: true,\n\t\t\tmultiline: true,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet { targets } = event;\n\t\t\t\tfunction aiChoose(char) {\n\t\t\t\t\tlet cards = char.getCards(\"h\");\n\t\t\t\t\tif (cards.length < 2) return cards;\n\t\t\t\t\tlet sortNumber = cards.sort((a, b) => {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\treturn get.number(b, char) - get.number(a, char);\n\t\t\t\t\t});\n\t\t\t\t\tlet sortValue = cards.sort((a, b) => {\n\t\t\t\t\t\treturn get.value(b, char) - get.value(a, char);\n\t\t\t\t\t});\n\t\t\t\t\tlet max = sortNumber[0];\n\t\t\t\t\tlet min = sortNumber[sortNumber.length - 1];\n\t\t\t\t\tif (player.countCards(\"h\", { color: \"red\" }) < 1) {\n\t\t\t\t\t\treturn [max, sortValue[sortValue.length - 1]];\n\t\t\t\t\t} else if (player.countCards(\"h\", { color: \"black\" }) < 1) {\n\t\t\t\t\t\treturn [min, sortValue[sortValue.length - 1]];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (Math.random() > 0.5) {\n\t\t\t\t\t\t\tlet black = cards.filter(card => get.color(card) === \"black\" && card !== max);\n\t\t\t\t\t\t\treturn [max, black.length > 0 ? black.randomGet() : cards.filter(card => card !== max).randomGet()];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlet red = cards.filter(card => get.color(card) === \"red\" && card !== min);\n\t\t\t\t\t\t\treturn [min, red.length > 0 ? red.randomGet() : cards.filter(card => card !== min).randomGet()];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet cardMaps = [];\n\t\t\t\tfor (let target of [...targets, player]) {\n\t\t\t\t\tlet cardsCompare;\n\t\t\t\t\tconst result = await target\n\t\t\t\t\t\t.chooseCard(true)\n\t\t\t\t\t\t.set(\"prompt\", \"【刈诈】：请选择一张手牌进行拼点\")\n\t\t\t\t\t\t.set(\"type\", \"compare\")\n\t\t\t\t\t\t.set(\"ai\", card => {\n\t\t\t\t\t\t\tlet player = get.player();\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tlet result = get.event().aiChooseResult;\n\t\t\t\t\t\t\treturn result[0] === card;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.set(\"aiChooseResult\", aiChoose(target))\n\t\t\t\t\t\t.forResult();\n\t\t\t\t\tif (!result || !result.cards) return;\n\t\t\t\t\tif (result.skill) {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tcardsCompare = lib.skill[result.skill].onCompare(target)[0];\n\t\t\t\t\t} else cardsCompare = result.cards[0];\n\t\t\t\t\tconst { cards } = await target\n\t\t\t\t\t\t.chooseCard(true)\n\t\t\t\t\t\t.set(\"type\", \"debate\")\n\t\t\t\t\t\t.set(\"source\", player)\n\t\t\t\t\t\t.set(\"prompt\", \"【刈诈】：请选择一张手牌进行议事\")\n\t\t\t\t\t\t.set(\"filterCard\", (card, player, event) => {\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tlet banCard = get.event().banCard;\n\t\t\t\t\t\t\treturn card !== banCard;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.set(\"complexCard\", true)\n\t\t\t\t\t\t.set(\"ai\", card => {\n\t\t\t\t\t\t\tlet player = get.player();\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tlet result = get.event().aiChooseResult;\n\t\t\t\t\t\t\treturn result[0] === card;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.set(\"aiChooseResult\", aiChoose(target))\n\t\t\t\t\t\t.set(\"banCard\", cardsCompare)\n\t\t\t\t\t\t.forResult();\n\t\t\t\t\tif(!cards) return;\n\t\t\t\t\tconst cardsDebate = cards[0];\n\n\t\t\t\t\tcardMaps.push([target, [cardsCompare, cardsDebate]]);\n\t\t\t\t}\n\t\t\t\tlet compareMaps = {};\n\t\t\t\tlet debateMaps = [];\n\t\t\t\tfor (let arr of cardMaps) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tcompareMaps[arr[0].playerid] = arr[1][0];\n\t\t\t\t\tif (arr[1] && arr[1][1]) debateMaps.push([arr[0], arr[1][1]]);\n\t\t\t\t}\n\t\t\t\t//@ts-ignore\n\t\t\t\tlet targetCompare = targets.filter(target => Object.keys(compareMaps).includes(target.playerid));\n\t\t\t\tlet targetDebate = targets.filter(target => debateMaps.map(arr => arr[0]).includes(target));\n\t\t\t\tlet  result1 = await player.chooseToCompare(targetCompare).set(\"fixedResult\", compareMaps).forResult();\n\t\t\t\tlet result2  = await player.chooseToDebate([...targetDebate, player]).set(\"fixedResult\", debateMaps).forResult();\n\t\t\t\t[...targetDebate, player].forEach(target => target.removeGaintag(\"yizhamrfz_tip2\"));\n\t\t\t\tlet compareResult = {\n\t\t\t\t\twin: [],\n\t\t\t\t\tlose: [],\n\t\t\t\t};\n\t\t\t\tfor (let i = 0; i < result1.num1.length; i++) {\n\t\t\t\t\tif (result1.num1[i] > result1.num2[i]) {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tcompareResult.lose.add(targetCompare[i]);\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tcompareResult.win.add(player);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tcompareResult.lose.add(player);\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tcompareResult.win.add(targetCompare[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (result2.opinion === \"black\") {\n\t\t\t\t\tfor (let char of compareResult.lose) {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tif (!compareResult.win.includes(char)) await char.damage(player);\n\t\t\t\t\t}\n\t\t\t\t} else if (result2.opinion === \"red\") {\n\t\t\t\t\tfor (let char of compareResult.win) {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tif (char.countDiscardableCards(player, \"he\")) await player.discardPlayerCard(char, true, 2, \"he\").set(\"ai\", lib.card.guohe.ai.button);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst {targets:targetsx} = await player\n\t\t\t\t\t\t.chooseTarget()\n\t\t\t\t\t\t.set(\"prompt\", \"【刈诈】：你可以对任意名角色造成一点伤害\")\n\t\t\t\t\t\t.set(\"selectTarget\", [1, Infinity])\n\t\t\t\t\t\t.set(\"ai\", target => {\n\t\t\t\t\t\t\tlet player = get.player();\n\t\t\t\t\t\t\treturn get.damageEffect(target, player, player) > 0;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.forResult();\n\t\t\t\t\tif (targetsx) {\n\t\t\t\t\t\tfor (let char of targetsx) {\n\t\t\t\t\t\t\tchar.damage(player);\n\t\t\t\t\t\t\tplayer.line(char);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t}\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 10,\n\t\t\t\tresult: {\n\t\t\t\t\tplayer: 1,\n\t\t\t\t\ttarget: -1,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tkumianmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { player: \"phaseJieshuEnd\" },\n\t\t\tgetNum(player) {\n\t\t\t\tlet num = 0;\n\t\t\t\tlet cards = [];\n\t\t\t\tnum += player.getStat(\"damage\") || 0;\n\t\t\t\tfor (let char of game.players) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tchar.getHistory(\"lose\", evt => {\n\t\t\t\t\t\tif (evt.type === \"discard\" && evt.cards) {\n\t\t\t\t\t\t\tlet discards = get.discarded();\n\t\t\t\t\t\t\tlet result = evt.cards.filter(card => discards.includes(card));\n\t\t\t\t\t\t\tif (result.length > 0) cards.push(...result);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (cards.length > 0) num += new Set(cards.map(i => get.type2(i))).size;\n\t\t\t\treturn num;\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\tlet num = lib.skill.kumianmrfz.getNum(player);\n\t\t\t\treturn num > 0;\n\t\t\t},\n\t\t\tinit(player) {\n\t\t\t\tgame.broadcastAll(function () {\n\t\t\t\t\tlet skills = [\"new_rejianxiong\", \"shanzhuan\", \"olzaowang\"];\n\t\t\t\t\tskills.forEach(skill => {\n\t\t\t\t\t\tlet info = get.info(skill);\n\t\t\t\t\t\tif (!info.audioname2) info.audioname2 = {};\n\t\t\t\t\t\tinfo.audioname2[player.name] = \"kumianmrfz\";\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tderivation: [\"new_rejianxiong\", \"shanzhuan\", \"olzaowang\"],\n\t\t\tforced: true,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet num = lib.skill.kumianmrfz.getNum(player);\n\t\t\t\tif (num > 0) {\n\t\t\t\t\tplayer.draw();\n\t\t\t\t}\n\t\t\t\tif (num > 1) player.addTempSkill(\"new_rejianxiong\", { player: \"phaseJieshuBegin\" });\n\t\t\t\tif (num > 2) player.addTempSkill(\"shanzhuan\", { player: \"phaseJieshuBegin\" });\n\t\t\t\tif (num > 3) player.addTempSkill(\"olzaowang\", { player: \"phaseJieshuBegin\" });\n\t\t\t},\n\t\t},\n\n\t\t// mon3tr m3\n\t\t// 想你了，牢猫\n\t\tshulimrfz: {\n\t\t\taudio: false,\n\t\t\tforced: true,\n\t\t\tsilent: true,\n\t\t\tmod: {\n\t\t\t\tcardUsable(card, player, num) {\n\t\t\t\t\tif (player.countCards(\"h\") >= game.roundNumber * 2 && [\"equip\", \"delay\"].includes(get.type(card))) return false;\n\t\t\t\t\tif (player.countCards(\"h\") >= game.roundNumber && get.type(card) === \"basic\" && typeof num === \"number\") return (num += 1);\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tronghuimrfz: {\n\t\t\taudio: 2,\n\t\t\tenable: \"phaseUse\",\n\t\t\tusable: 1,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tconst discardPlie = Array.from(ui.discardPile.childNodes);\n\t\t\t\tconst cards = player.getCards(\"h\");\n\t\t\t\tawait player.lose(cards);\n\t\t\t\tawait player.gain(discardPlie, \"gain2\");\n\n\t\t\t\tplayer.addTempSkill(\"ronghuimrfz_lose\", { player: \"phaseUseEnd\" });\n\t\t\t\tplayer\n\t\t\t\t\t.when({ player: \"phaseUseEnd\" })\n\t\t\t\t\t.then(() => {})\n\t\t\t\t\t.assign({\n\t\t\t\t\t\tmod: {\n\t\t\t\t\t\t\tcardUsable(card, player, num) {\n\t\t\t\t\t\t\t\tif (typeof num === \"number\") return num;\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\tplayer.when({ player: \"phaseDiscardBegin\" }).step(async (event, trigger, player) => {\n\t\t\t\t\tconst discardPlie = Array.from(ui.discardPile.childNodes);\n\t\t\t\t\tconst cards = player.getCards(\"h\");\n\t\t\t\t\tawait player.lose(cards);\n\t\t\t\t\tawait player.gain(discardPlie, \"gain2\");\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tplayer.logSkill(\"ronghuimrfz\");\n\t\t\t\t});\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\tlose: {\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tlastDo: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"loseAfter\",\n\t\t\t\t\t\tglobal: \"loseAsyncAfter\",\n\t\t\t\t\t},\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\tif (event.type !== \"use\") return false;\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tlet evt = event.getl(player);\n\t\t\t\t\t\treturn evt.cards2 && evt.cards2.some(card => get.position(card) === \"d\" && ![\"equip\", \"delay\"].includes(get.type(card)));\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tlet cards2 = trigger.getl(player).cards2;\n\t\t\t\t\t\tcards2 = cards2.filter(card => get.position(card) === \"d\" && ![\"equip\", \"delay\"].includes(get.type(card)));\n\t\t\t\t\t\tfor (let card of cards2) {\n\t\t\t\t\t\t\tcard.fix();\n\t\t\t\t\t\t\tui.cardPile.appendChild(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.log(player, `将`, `#y${get.translation(cards2)}`, `张牌置于了牌堆底`);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tthreaten: 1.8,\n\t\t\t\torder: 3.4,\n\t\t\t\tresult: {\n\t\t\t\t\tplayer(player) {\n\t\t\t\t\t\tlet transferValue = function (cards) {\n\t\t\t\t\t\t\treturn cards.map(card => player.getUseValue(card)).reduce((acc, curr) => acc + curr, 0);\n\t\t\t\t\t\t};\n\t\t\t\t\t\tlet filterCards = function (cards) {\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\treturn cards.filter(card => player.getCardUsable2(card) > 0 && (get.type(card) === \"basic\" || (get.type(card) !== \"basic\" && player.countUsed(card) < 1)));\n\t\t\t\t\t\t};\n\t\t\t\t\t\tlet cards = filterCards(player.getCards(\"h\"));\n\t\t\t\t\t\tlet discardPlie = filterCards(Array.from(ui.discardPile.childNodes));\n\t\t\t\t\t\treturn transferValue(cards) > transferValue(discardPlie) ? -1 : 1;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t},\n};\n"],"names":["event","player","trigger","target","result","card","color","skill","skills","hs","moved","cards","i","targets","num","earliest","discardPlie"],"mappings":"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"}