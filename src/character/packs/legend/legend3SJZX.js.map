{"version":3,"file":"legend3SJZX.js","sources":["../../../../../../../../packages/extension/WhichWay/src/character/packs/legend/legend3SJZX.js"],"sourcesContent":["import { lib, game, ui, get, ai, _status } from \"noname\";\nimport { skillCustomFunc } from \"../../../nonameEx/custom/skill.ts\";\nimport { whichWayTips } from \"../../../tips/index.ts\";\nimport { whichWayUtil } from \"../../../utill.js\";\n\nconst tmpSave = window.whichWaySave.tmpSave;\n\n/** @type { WhichWayCharacterPack } */\nexport default {\n\tcharacter: {\n\t\tspweicaomrfz: {\n\t\t\tsex: \"female\",\n\t\t\tgroup: \"shenmrfz\",\n\t\t\thp: 3,\n\t\t\tskills: [\"gongximrfz\", \"huamianmrfz\"],\n\t\t},\n\t\tspsikadimrfz: {\n\t\t\tsex: \"female\",\n\t\t\tgroup: \"haimrfz\",\n\t\t\thp: 4,\n\t\t\tskills: [\"newqianximrfz\", \"haixuanmrfz\"],\n\t\t},\n\t\tzhenyanmrfz: {\n\t\t\tsex: \"female\",\n\t\t\tgroup: \"luomrfz\",\n\t\t\thp: 3,\n\t\t\tskills: [\"lingxinmrfz\", \"lianganmrfz\", \"qinyinmrfz\"],\n\t\t},\n\t\thuoerhaiyamrfz: {\n\t\t\tsex: \"female\",\n\t\t\thp: 4,\n\t\t\tskills: [\"yumengmrfz\"],\n\t\t\tgroup: \"gemrfz\",\n\t\t\tdesigner: \"涵涵\",\n\t\t},\n\t\tspyinhuimrfz: {\n\t\t\tsex: \"male\",\n\t\t\thp: 4,\n\t\t\tskills: [\"kuangshimrfz\", \"muzhimrfz\"],\n\t\t\tgroup: \"xiemrfz\",\n\t\t},\n\t\tspchuxuemrfz: {\n\t\t\tsex: \"female\",\n\t\t\thp: 3,\n\t\t\tskills: [\"fulingmrfz\", \"shengweimrfz\"],\n\t\t\tgroup: \"xiemrfz\",\n\t\t},\n\t\tspxingyuanmrfz: {\n\t\t\tsex: \"female\",\n\t\t\thp: 4,\n\t\t\tskills: [\"yulimrfz\", \"sulimrfz\"],\n\t\t\tgroup: \"gemrfz\",\n\t\t},\n\t\tnasitimrfz: {\n\t\t\tsex: \"female\",\n\t\t\thp: 3,\n\t\t\tskills: [\"wangqiongmrfz\", \"tadimrfz\"],\n\t\t\tgroup: \"gemrfz\",\n\t\t},\n\t\ttitimrfz: {\n\t\t\tsex: \"female\",\n\t\t\thp: 3,\n\t\t\tskills: [\"xiushimrfz\", \"canshimrfz\", \"titimrfz_mingshimrfz\"],\n\t\t\tgroup: \"samrfz\",\n\t\t\tdesigner: \"涵涵\",\n\t\t},\n\t\twangmrfz:{\n\t\t\tsex:\"male\",\n\t\t\thp:4,\n\t\t\tskills:[\"qushimrfz\",\"dingshengmrfz\"],\n\t\t\tgroup:\"suimrfz\",\n\t\t},\n\t},\n\tskill: {\n\t\t//望 二哥\n\t\tqushimrfz:{\n\t\t\taudio:[\"作战中1\", \"作战中2\",\"作战中3\", \"作战中4\",\"部署1\",\"部署2\",\"行动出发\",\"行动开始\"],\n\t\t},\n\t\tdingshengmrfz:{\n\t\t\taudio:[\"精英化晋升2\",\"编入队伍\"],\n\t\t},\n\n\t\t//缇缇\n\t\txiushimrfz: {\n\t\t\taudio: [\"作战中1\", \"作战中2\"],\n\t\t\tenable: \"phaseUse\",\n\t\t\tusable: 1,\n\t\t\tfilter(event, player) {\n\t\t\t\treturn player.countCards(\"he\") > 0 && game.hasPlayer(c => c !== player && c.countCards(\"he\") > 0);\n\t\t\t},\n\t\t\tfilterTarget(card, player, target) {\n\t\t\t\treturn target.countCards(\"he\") > 0 && target!==player;\n\t\t\t},\n\t\t\tfilterCard(card, player) {\n\t\t\t\tif (get.type(card) === \"trick\") {\n\t\t\t\t\twhichWayTips.addPrompt(card, `可摸牌`, \"xiushimrfz_tip\", \"uncheckBegin\");\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tposition: \"he\",\n\t\t\tcheck(card) {\n\t\t\t\tif (get.type(card) !== \"trick\") return -1;\n\t\t\t\treturn 114514 - get.value(card);\n\t\t\t},\n\t\t\tdiscard:false,\n\t\t\tlose:false,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tconst {\n\t\t\t\t\ttargets: [target],\n\t\t\t\t\tcards: [card],\n\t\t\t\t} = event;\n\t\t\t\tconst {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tcards: [card2],\n\t\t\t\t} = await target\n\t\t\t\t\t.chooseCard(\"he\")\n\t\t\t\t\t.set(\"forced\", true)\n\t\t\t\t\t.set(\"position\", \"he\")\n\t\t\t\t\t.set(\"prompt\", whichWayUtil.colorize(`【修使】:请选择你要交给${get.translation(player)}的牌，若为#r装备牌#，你与其各摸一张牌`))\n\t\t\t\t\t.set(\"ai\", card => {\n\t\t\t\t\t\tlet player = get.player(),\n\t\t\t\t\t\t\t/** @type {Player} */\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\ttarget = get.event().targetx;\n\t\t\t\t\t\tif (get.attitude(player, target) < 0) return -get.value(card);\n\t\t\t\t\t\tif (get.type(card) === \"equip\") return 10 - get.value(card);\n\t\t\t\t\t\tif (get.tag(card, \"damage\") > 0) return 8 - get.value(card);\n\t\t\t\t\t\treturn -get.value(card);\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"targetx\", player)\n\t\t\t\t\t.forResult();\n\t\t\t\tif (!card2) return;\n\t\t\t\tawait player.swapHandcards(target, [card], [card2]);\n\t\t\t\tconst count = [];\n\t\t\t\tif (get.type(card2) === \"equip\") count.push(\"林登万\");\n\t\t\t\tif (get.type(card) === \"trick\") count.push(\"林登万\");\n\t\t\t\tfor (const i of count) {\n\t\t\t\t\tgame.asyncDraw([target, player], 1);\n\t\t\t\t}\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 13,\n\t\t\t\tresult: {\n\t\t\t\t\ttarget(player, target) {\n\t\t\t\t\t\tlet res = 0;\n\t\t\t\t\t\tif (get.attitude(player, target) < 0) return;\n\t\t\t\t\t\tif (player.countCards(\"h\", { type: \"trick\" }) > 0) res += 2;\n\t\t\t\t\t\tif (target.countCards(\"e\") > 0) res += 2;\n\t\t\t\t\t\treturn res;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tcanshimrfz: {\n\t\t\taudio: [\"部署1\", \"部署2\"],\n\t\t\tforced: true,\n\t\t\tglobal: \"canshimrfz_eff\",\n\t\t\tmod: {\n\t\t\t\tmaxHandcard(player, num) {\n\t\t\t\t\treturn (num += game.countPlayer(char => char.group === player.group) || 0);\n\t\t\t\t},\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\teff: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tmod: {\n\t\t\t\t\t\tplayerEnabled(card, player, target, result) {\n\t\t\t\t\t\t\tif (_status.currentPhase !== player) return result;\n\t\t\t\t\t\t\tconst targets = game.filterPlayer(c => c.hasSkill(\"canshimrfz\") && c !== player) || [];\n\t\t\t\t\t\t\tif (targets.some(char => player.inRange(char)) && get.tag(card, \"damage\") > 0) {\n\t\t\t\t\t\t\t\tfor (let targetx of targets) {\n\t\t\t\t\t\t\t\t\tif (!player.inRange(targetx)) continue;\n\t\t\t\t\t\t\t\t\tlet num = game.countPlayer(c => c.group === targetx.group);\n\t\t\t\t\t\t\t\t\tif (player.getHistory(\"useCard\")?.length + 1 === num) {\n\t\t\t\t\t\t\t\t\t\treturn target === targetx;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\ttitimrfz_mingshimrfz: {\n\t\t\taudio: [\"作战中3\", \"作战中4\"],\n\t\t\tinit(player,skill){\n\t\t\t\tplayer.storage[skill] = false;\n\t\t\t},\n\t\t\tonremove:true,\n\t\t\tmark: true,\n\t\t\tzhuanhuanji: true,\n\t\t\tmarktext: \"☯\",\n\t\t\tintro: {\n\t\t\t\tcontent(storage, player, skill) {\n\t\t\t\t\treturn whichWayUtil.colorize(`转换技，${storage ? \"#s阳：出牌阶段限一次#;#y阴：当你受到伤害后#\" : \"#r阳：出牌阶段限一次#;#s阴：当你受到伤害后#\"}。你可以展示手牌，并使用其中一张普通锦囊牌，你因此使用的普通锦囊牌额外结算Y次。（Y=你手牌中普通锦囊牌的数量）`);\n\t\t\t\t},\n\t\t\t},\n\t\t\ttrigger:{\n\t\t\t\tplayer:\"damageEnd\"\n\t\t\t},\n\t\t\tfilter(event,player){\n\t\t\t\treturn player.storage.titimrfz_mingshimrfz===true&&player.countCards(\"h\")>0;\n\t\t\t},\n\t\t\tcheck(){\n\t\t\t\tconst player = get.player();\n\t\t\t\treturn player.countCards(\"h\",card=>get.type(card) === \"trick\"&&player.hasUseTarget(card)&&game.hasPlayer(c=>get.effect(c,card,player,player)>0));\n\t\t\t},\n\t\t\tasync content(event, trigger,player) {\n\t\t\t\tplayer.changeZhuanhuanji(\"titimrfz_mingshimrfz\");\n\n\t\t\t\tconst extra = player.countCards(\"h\", card=>get.type(card) === \"trick\");\n\t\t\t\tconst cards = player.getCards(\"h\");\n\t\t\t\tplayer.showCards(player.getCards(\"h\"),`${get.translation(player)}【明史】展示的牌`);\n\n\t\t\t\tif(extra<1) return;\n\n\t\t\t\tplayer.when({player:\"useCard\"})\n\t\t\t\t\t.filter(event=>{\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\treturn event.getParent().titimrfz_mingshimrfz_useCard === true;\n\t\t\t\t\t})\n\t\t\t\t\t.step(async (event,trigger,player)=>{\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\ttrigger.effectCount += extra;\n\t\t\t\t\t\tgame.log(player,\"因\",\"#g【明史】\",\"令\",`#y${get.translation(trigger.card)}`,\"额外结算\", extra, \"次\");\n\t\t\t\t\t})\n\n\t\t\t\tawait player.chooseToUse()\n\t\t\t\t\t.set(\"titimrfz_mingshimrfz_useCard\",true)\n\t\t\t\t\t.set(\"filterCard\",(card)=>{\n\t\t\t\t\t\tif(cards.includes(card)){\n\t\t\t\t\t\t\twhichWayTips.addPrompt(card, \"【明史】展示\", \"titimrfz_mingshimrfz_tip\", \"uncheckEnd\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn get.type(card) === \"trick\"&&cards.includes(card);\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"forced\",true)\n\t\t\t\t\t.set(\"prompt\",whichWayUtil.colorize(`【明史】:请选择你要使用的普通锦囊牌<br>#r此牌额外结算${extra}次#`))\n\t\t\t\t\t.set(\"ai\",card=>get.value(card));\n\t\t\t},\n\t\t\tgroup:[\"titimrfz_mingshimrfz_phaseUse\"],\n\t\t\tsubSkill:{\n\t\t\t\tphaseUse:{\n\t\t\t\t\taudio:\"titimrfz_mingshimrfz\",\n\t\t\t\t\tenable:\"phaseUse\",\n\t\t\t\t\tusable:1,\n\t\t\t\t\tfilter(event,player){\n\t\t\t\t\t\treturn player.storage.titimrfz_mingshimrfz===false&&player.countCards(\"h\")>0;\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event,trigger,player){\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tawait lib.skill.titimrfz_mingshimrfz.content(event,trigger,player);\n\t\t\t\t\t},\n\t\t\t\t\tai:{\n\t\t\t\t\t\torder:10,\n\t\t\t\t\t\tresult:{\n\t\t\t\t\t\t\tplayer(player){\n\t\t\t\t\t\t\t\tconst cards = player.getCards(\"h\",card=>get.type(card) === \"trick\"&&player.hasUseTarget(card));\n\t\t\t\t\t\t\t\treturn cards.some(card=>game.hasPlayer(c=>get.effect(c,card,player,player)>0)) ? 1 : 0;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t//娜斯提\n\t\twangqiongmrfz: {\n\t\t\taudio: [\"闲置\", \"行动出发\"],\n\t\t\ttrigger: {\n\t\t\t\tplayer: [\"loseAfter\", \"gainAfter\", \"loseAsyncAfter\", \"addToExpansionAfter\"],\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\tconsole.log(event);\n\t\t\t\t//@ts-ignore\n\t\t\t\tif (_status.currentPhase !== player) return false;\n\t\t\t\t//@ts-ignore\n\t\t\t\tif (event.hs && event.hs.length < 1) return false;\n\t\t\t\treturn [2, 4].includes(player.countCards(\"h\"));\n\t\t\t},\n\t\t\tprompt(event, player) {\n\t\t\t\treturn `【望穹】:你可以使用一张【${player.countCards(\"h\") === 2 ? \"无中生有\" : \"火攻\"}】`;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tconst name = player.countCards(\"h\") === 2 ? \"wuzhong\" : \"huogong\";\n\t\t\t\tawait player\n\t\t\t\t\t.chooseUseTarget({ name: name })\n\t\t\t\t\t.set(\"forced\", true)\n\t\t\t\t\t.set(\"prompt\", `请选择【${get.translation(name)}】的目标`)\n\t\t\t\t\t.forResult();\n\t\t\t},\n\t\t},\n\t\ttadimrfz: {\n\t\t\taudio: [\"选中干员1\", \"选中干员2\"],\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"changeHpAfter\",\n\t\t\t},\n\t\t\tinit(player, skill) {\n\t\t\t\tplayer.storage[skill] = [];\n\t\t\t},\n\t\t\tonremove: true,\n\t\t\tfilter(event, player) {\n\t\t\t\treturn !player.storage.tadimrfz.includes(player.hp);\n\t\t\t},\n\t\t\tintro: {\n\t\t\t\tcontent(storage, player) {\n\t\t\t\t\tif (storage.length < 1) return `·本轮体力值没有发生过改变`;\n\t\t\t\t\treturn `·已在体力值为 ${storage.join(\"、\")} 时摸过牌`;\n\t\t\t\t},\n\t\t\t},\n\t\t\tforced: true,\n\t\t\tlocked: true,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tplayer.draw();\n\t\t\t\tplayer.storage.tadimrfz.push(player.hp);\n\t\t\t\tplayer.markSkill(\"tadimrfz\");\n\t\t\t},\n\t\t\tgroup: \"tadimrfz_clear\",\n\t\t\tsubSkill: {\n\t\t\t\tclear: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tglobal: \"roundStart\",\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tplayer.storage.tadimrfz = [];\n\t\t\t\t\t\tplayer.unmarkSkill(\"tadimrfz\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t//溯光星源\n\t\tyulimrfz: {\n\t\t\taudio: [\"观看作战记录\", \"非3星结束行动\"],\n\t\t\tderivation: [\"yulimrfz_rewirte\"],\n\t\t\tinit(player, skill) {\n\t\t\t\tplayer.storage[skill] = false;\n\t\t\t},\n\t\t\tonremove: true,\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"gainAfter\",\n\t\t\t},\n\t\t\tlocked(skill, player) {\n\t\t\t\treturn !player || !player.storage.yulimrfz;\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\t//@ts-ignore\n\t\t\t\tif (Object.keys(event.getParent(\"yulimrfz\")).length > 0) return false;\n\t\t\t\tlet types = [\"basic\", \"trick\", \"equip\"];\n\t\t\t\treturn player.storage.yulimrfz ? new Set(event.cards.map(i => get.type2(i)).filter(i => types.includes(i))).size !== types.length : !event.cards.map(i => get.type2(i)).includes(\"basic\");\n\t\t\t},\n\t\t\tasync cost(event, trigger, player) {\n\t\t\t\tif (player.storage.yulimrfz) {\n\t\t\t\t\tlet types = [\"basic\", \"trick\", \"equip\"].filter(type => !trigger.cards.map(i => get.type2(i)).includes(type));\n\t\t\t\t\tconst result = await player\n\t\t\t\t\t\t.chooseControl(...types, \"cancel2\")\n\t\t\t\t\t\t.set(\"prompt\", `【迂理】:请选择你要从牌堆中获得的牌的类型`)\n\t\t\t\t\t\t.set(\"ai\", () => {\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tlet { types, player } = get.event();\n\t\t\t\t\t\t\tif (player.getDamagedHp() > 1 && types.includes(\"basic\")) return \"basic\";\n\t\t\t\t\t\t\tif (player.countEquipableSlot() > 0 && types.includes(\"equip\")) return \"equip\";\n\t\t\t\t\t\t\treturn types.includes(\"trick\") ? \"trick\" : types.randomGet();\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.set(\"types\", types)\n\t\t\t\t\t\t.forResult();\n\t\t\t\t\tevent.result = {\n\t\t\t\t\t\t...result,\n\t\t\t\t\t\tcost_data: result,\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tevent.result = {\n\t\t\t\t\t\tbool: true,\n\t\t\t\t\t\tcost_data: {\n\t\t\t\t\t\t\tcontrol: \"basic\",\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet { control } = event.cost_data;\n\t\t\t\tlet card = get.cardPile(card => get.type2(card) === control, \"cardPile\");\n\t\t\t\tif (card) player.gain(card, \"gain2\");\n\t\t\t\telse player.chat(`牌堆中没有${get.translation(control)}牌了！`);\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tthreaten: 1.1,\n\t\t\t},\n\t\t},\n\t\tsulimrfz: {\n\t\t\taudio: [\"作战中1\", \"作战中4\"],\n\t\t\tenable: \"phaseUse\",\n\t\t\tfilter(event, player) {\n\t\t\t\treturn player.countCards(\"he\") > 0;\n\t\t\t},\n\t\t\tposition: \"he\",\n\t\t\tfilterCard(card) {\n\t\t\t\tlet player = get.player();\n\t\t\t\tlet event = get.event();\n\t\t\t\tlet maxType = lib.skill.sulimrfz.getMaxType(player);\n\n\t\t\t\tif (get.type2(card) === maxType) {\n\t\t\t\t\twhichWayTips.addPrompt(card, \"最多类型\", \"sulimrfz_tip\", \"uncheckBegin\");\n\t\t\t\t}\n\n\t\t\t\treturn !player.getStorage(\"sulimrfz\").includes(get.type2(card));\n\t\t\t},\n\t\t\tselectCard: [1, 2],\n\t\t\tmark: true,\n\t\t\tintro: {\n\t\t\t\tcontent(storage, player) {\n\t\t\t\t\tlet list = [];\n\t\t\t\t\tif (Array.isArray(storage) && storage.length > 0) list.push(`·本阶段已弃置的类型：${get.translation(storage)}`);\n\t\t\t\t\tif (player.storage.yulimrfz === true) {\n\t\t\t\t\t\tif (player.hasSkill(\"yulimrfz\")) list.push(\"·已修改【迂理】\");\n\t\t\t\t\t\tlist.push(\"·已修改【溯理】\");\n\t\t\t\t\t}\n\t\t\t\t\treturn list.length > 0 ? list.join(\"<br>\") : \"无信息\";\n\t\t\t\t},\n\t\t\t},\n\t\t\tgetMaxType(player) {\n\t\t\t\tconst handTypes = player.getCards(\"h\").map(card => get.type2(card));\n\n\t\t\t\tconst counts = { basic: 0, trick: 0, equip: 0 };\n\t\t\t\tfor (const type of handTypes) {\n\t\t\t\t\tif (type in counts) counts[type]++;\n\t\t\t\t}\n\t\t\t\t// 找出最大值及出现次数\n\t\t\t\tconst values = Object.values(counts);\n\t\t\t\tconst maxCount = Math.max(...values);\n\t\t\t\tconst maxCountOccurrences = values.filter(v => v === maxCount).length;\n\n\t\t\t\treturn maxCountOccurrences === 1 ? Object.keys(counts).find(type => counts[type] === maxCount) : undefined;\n\t\t\t},\n\t\t\tdiscard: false,\n\t\t\tlose: false,\n\t\t\tdelay: 0,\n\t\t\tcheck(card) {\n\t\t\t\tlet player = get.player(),\n\t\t\t\t\tcards = ui.selected.cards,\n\t\t\t\t\tmaxType = lib.skill.sulimrfz.getMaxType(player);\n\t\t\t\tif (get.type(card) === maxType) return -1;\n\t\t\t\tif (cards.length > 0 && get.position(card) === \"e\") return -1;\n\t\t\t\treturn 8 - get.value(card);\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tconst cards = event.cards;\n\n\t\t\t\tconst loseAllCard = player.countCards(\"h\") - cards.length === 0;\n\n\t\t\t\tplayer.storage.sulimrfz.addArray(cards.map(i => get.type2(i)));\n\n\t\t\t\tawait player.discard(cards);\n\n\t\t\t\tconst maxType = lib.skill.sulimrfz.getMaxType(player);\n\n\t\t\t\tif (player.countCards(\"h\") === 0 && !player.storage.yulimrfz && loseAllCard) {\n\t\t\t\t\tplayer.storage.yulimrfz = true;\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\tplayer.$skill(get.translation(\"sulimrfz\"), true, \"wood\");\n\t\t\t\t}\n\n\t\t\t\tlet num = 3 - new Set(player.getCards(\"h\").map(card => get.type2(card))).size;\n\t\t\t\tif ((!maxType || !cards.map(i => get.type2(i)).includes(maxType)) && num > 0) {\n\t\t\t\t\tawait player.draw(num);\n\t\t\t\t}\n\t\t\t},\n\t\t\tinit(player, skill) {\n\t\t\t\tplayer.storage[skill] = [];\n\t\t\t},\n\t\t\tonremove(player, skill) {\n\t\t\t\tdelete player.storage[skill];\n\t\t\t\tif (!player.hasSkill(\"yulimrfz\") && player.storage.yulimrfz === true) delete player.storage.yulimrfz;\n\t\t\t},\n\t\t\tgroup: \"sulimrfz_clear\",\n\t\t\tsubSkill: {\n\t\t\t\tclear: {\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"phaseUseEnd\",\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tlib.skill.sulimrfz.init(player, \"sulimrfz\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 4,\n\t\t\t\tresult: {\n\t\t\t\t\tplayer: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t//圣聆初雪\n\t\tshengweimrfz: {\n\t\t\tmod: {\n\t\t\t\taiOrder(player, card, num) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tif (get.type(card) !== \"basic\" && card?.cards?.some(i => i.hasGaintag(\"shengweimrfz_pile\"))) return num + 1;\n\t\t\t\t},\n\t\t\t\taiValue(player, card, num) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tif (get.type(card) !== \"basic\" && card?.cards?.some(i => i.hasGaintag(\"shengweimrfz_pile\"))) return num - 10;\n\t\t\t\t},\n\t\t\t\tcardUsable(card, player) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tif (get.type(card) !== \"basic\" && card?.cards?.some(i => i.hasGaintag(\"shengweimrfz_pile\"))) return false;\n\t\t\t\t},\n\t\t\t\tcardEnabled(card, player) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tif (get.type(card) !== \"basic\" && card?.cards?.some(i => i.hasGaintag(\"shengweimrfz_pile\"))) return false;\n\t\t\t\t},\n\t\t\t\tcardEnabled2(card, player) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tif (get.type(card) !== \"basic\" && card?.cards?.some(i => i.hasGaintag(\"shengweimrfz_pile\"))) return false;\n\t\t\t\t},\n\t\t\t\tcardSavable(card, player) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tif (get.type(card) !== \"basic\" && card?.cards?.some(i => i.hasGaintag(\"shengweimrfz_pile\"))) return false;\n\t\t\t\t},\n\t\t\t},\n\t\t\tinit(player, skill) {\n\t\t\t\tlib.translate[\"shengweimrfz_pile\"] = \"牌堆顶\";\n\n\t\t\t\tlib.skill.shengweimrfz.observerPile(player);\n\n\t\t\t\ttmpSave.fulingmrfz_acted_callback = function (player, args) {\n\t\t\t\t\tif (args.p !== \"length\" && args.p !== void 0) return;\n\t\t\t\t\tplayer.getCards(\"s\", card => card.hasGaintag(\"shengweimrfz_pile\")).forEach(i => i.delete());\n\t\t\t\t\ttmpSave[player.playerid][\"observer_shengweimrfz\"].disconnect();\n\t\t\t\t\ttmpSave[player.playerid][\"observer_shengweimrfz\"].takeRecords();\n\t\t\t\t\ttmpSave[player.playerid][\"observer_shengweimrfz\"] = null;\n\t\t\t\t\tlib.skill.shengweimrfz.observerPile(player);\n\t\t\t\t};\n\t\t\t},\n\t\t\tobserverPile(player) {\n\t\t\t\tgetCopyCard(player);\n\t\t\t\tlet recordCount;\n\t\t\t\tconst observer = new MutationObserver(() => {\n\t\t\t\t\tif (player.isDead()) {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tlib.skill.shengweimrfz.onremove(player, \"shengweimrfz\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet currentCount = ui.cardPile.childNodes.length;\n\t\t\t\t\tif (currentCount !== recordCount) {\n\t\t\t\t\t\trecordCount = currentCount;\n\n\t\t\t\t\t\tlet pileCards = player.getCards(\"s\", card => card.hasGaintag(\"shengweimrfz_pile\"));\n\n\t\t\t\t\t\tlet tops = get.cards((player.storage?.fulingmrfz?.acted?.length || 0) + 1, true);\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tif (tops.every(card => pileCards.map(i => i._cardid).includes(card.cardid))) return;\n\n\t\t\t\t\t\tpileCards.forEach(card => card.delete());\n\n\t\t\t\t\t\tgetCopyCard(player);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tobserver.observe(ui.cardPile, {\n\t\t\t\t\tchildList: true,\n\t\t\t\t\tsubtree: false,\n\t\t\t\t});\n\n\t\t\t\ttmpSave[player.playerid] ??= {};\n\t\t\t\ttmpSave[player.playerid][\"observer_shengweimrfz\"] = observer;\n\n\t\t\t\tfunction getCopyCard(player) {\n\t\t\t\t\tlet num = (player.storage?.fulingmrfz?.acted?.length || 0) + 1;\n\t\t\t\t\tlet cards = get.cards(num, true);\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tlet copy_cards = cards.map(card => {\n\t\t\t\t\t\tlet copy_card = ui.create.card();\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tcopy_card.init(get.cardInfo(card));\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tcopy_card._cardid = card.cardid;\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tcopy_card._destroy = true;\n\t\t\t\t\t\treturn copy_card;\n\t\t\t\t\t});\n\t\t\t\t\tfor (let i = 0; i < copy_cards.length; i++) {\n\t\t\t\t\t\tlet card = copy_cards[i];\n\t\t\t\t\t\tcard.addPromptSJZX(`第${i + 1}张`);\n\t\t\t\t\t\tskillCustomFunc.invisableJiZhan(card, player);\n\t\t\t\t\t}\n\t\t\t\t\tplayer.directgains(copy_cards, null, \"shengweimrfz_pile\");\n\t\t\t\t}\n\t\t\t},\n\t\t\tonremove(player, skill) {\n\t\t\t\tdelete tmpSave.fulingmrfz_acted_callback;\n\t\t\t\tplayer.getCards(\"s\", card => card.hasGaintag(\"shengweimrfz_pile\")).forEach(i => i.delete());\n\t\t\t\tif (player.playerid === undefined) return;\n\t\t\t\ttmpSave[player.playerid][\"observer_shengweimrfz\"].disconnect();\n\t\t\t\ttmpSave[player.playerid][\"observer_shengweimrfz\"].takeRecords();\n\t\t\t\ttmpSave[player.playerid][\"observer_shengweimrfz\"] = null;\n\t\t\t},\n\t\t\taudio: [\"作战中1\", \"作战中2\"],\n\t\t\ttrigger: {\n\t\t\t\tglobal: [\"useSkill\", \"logSkillBegin\"],\n\t\t\t},\n\t\t\tforced: true,\n\t\t\tfilter(event, player) {\n\t\t\t\t//@ts-ignore\n\t\t\t\tlet skill = event.skill;\n\t\t\t\t//@ts-ignore\n\t\t\t\tif (!skill || skill === \"shengweimrfz\" || event.sourceSkill === \"shengweimrfz\") {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tlet info = get.info(skill);\n\t\t\t\tif (!info || info.equipSkill) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn skill.startsWith(\"fulingmrfz_\");\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {},\n\t\t\tgroup: [\"shengweimrfz_replace\"],\n\t\t\tsubSkill: {\n\t\t\t\treplace: {\n\t\t\t\t\taudio: \"shengweimrfz\",\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: [\"useCardBefore\", \"respondBefore\"],\n\t\t\t\t\t},\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tlet cards = player.getCards(\"s\", card => card.hasGaintag(\"shengweimrfz_pile\") && card._cardid);\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\tevent.cards &&\n\t\t\t\t\t\t\tevent.cards.some(card => {\n\t\t\t\t\t\t\t\treturn cards.includes(card);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t\tforced: true,\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tlet num = (player.storage?.fulingmrfz?.acted?.length || 0) + 1;\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tlet cardsid = get.cards(num, true).map(i => i.cardid);\n\n\t\t\t\t\t\ttrigger.cards = trigger.cards.map(card => {\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tif (!cardsid.includes(card._cardid)) return card;\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\treturn get.cards(num, true).find(cardx => cardx.cardid === card._cardid);\n\t\t\t\t\t\t});\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\ttrigger.card.cards = trigger.card.cards.map(card => {\n\t\t\t\t\t\t\tif (!cardsid.includes(card._cardid)) return card;\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\treturn get.cards(num, true).find(cardx => cardx.cardid === card._cardid);\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tfulingmrfz: {\n\t\t\taudio: [\"作战中4\", \"作战中3\", \"行动出发\", \"行动开始\", \"观看作战记录\"],\n\t\t\tderivation: [\"fangzhu\", \"rexingxue\", \"yanru\"],\n\t\t\ttrigger: {\n\t\t\t\tglobal: \"roundStart\",\n\t\t\t},\n\t\t\tlastDo: true,\n\t\t\tinit(player, skill) {\n\t\t\t\tlet handler = {\n\t\t\t\t\tset(t, p, v, r) {\n\t\t\t\t\t\tif (typeof tmpSave.fulingmrfz_acted_callback === \"function\") tmpSave.fulingmrfz_acted_callback(player, { t, p, v, r });\n\n\t\t\t\t\t\treturn Reflect.set(t, p, v, r);\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t\tplayer.storage[skill] = {\n\t\t\t\t\ttarget: 0,\n\t\t\t\t\t// purge education cohesion\n\t\t\t\t\tacted: new Proxy([], handler),\n\t\t\t\t};\n\t\t\t\tif (typeof tmpSave.fulingmrfz_acted_callback === \"function\") tmpSave.fulingmrfz_acted_callback(player, {});\n\t\t\t\tif (!lib.skill.rexingxue.audioname2) lib.skill.rexingxue.audioname2 = {};\n\t\t\t\tif (!lib.skill.rexingxue.audioname2[player.name]) lib.skill.rexingxue.audioname2[player.name] = \"fulingmrfz\";\n\t\t\t},\n\t\t\tmark: true,\n\t\t\tintro: {\n\t\t\t\tcontent(storage, player) {\n\t\t\t\t\tif (!storage || !player) return `没有标记！`;\n\t\t\t\t\tlet cnplayer = get.translation(player),\n\t\t\t\t\t\tacted = storage.acted;\n\t\t\t\t\tif (storage.target < 1) return `·看来${cnplayer}不打算采取任何行动`;\n\t\t\t\t\tlet str = [`·${cnplayer}需要推动#r${storage.target}#项改革，否则其会失去#r1#点体力！`, \"———已行之事———\"];\n\t\t\t\t\tif (acted.includes(\"purge\")) str.push(`已放逐蔓珠院保守派`);\n\t\t\t\t\tif (acted.includes(\"education\")) str.push(`已推动基础教育`);\n\t\t\t\t\tif (acted.includes(\"cohesion\")) str.push(`已加强宗教凝聚力`);\n\t\t\t\t\treturn str.map(i => whichWayUtil.colorize(i)).join(\"<br>\");\n\t\t\t\t},\n\t\t\t},\n\t\t\tonremove: true,\n\t\t\tasync cost(event, trigger, player) {\n\t\t\t\t//无论如何都要重置的\n\t\t\t\t//@ts-ignore\n\t\t\t\tlib.skill.fulingmrfz.init(player, \"fulingmrfz\");\n\t\t\t\tconst result = await player\n\t\t\t\t\t.chooseControl(\"一\", \"二\", \"三\", \"cancel2\")\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"fulingmrfz\"))\n\t\t\t\t\t.set(\"prompt2\", `你可以摸至多三张牌，然后你的回合结束时，若你执行选项的数量少于你摸的牌数，你失去X点体力。(X=你摸的牌数 - 你执行的项数)`)\n\t\t\t\t\t.set(\"ai\", () => {\n\t\t\t\t\t\tlet player = get.player();\n\t\t\t\t\t\treturn player.hp > 2 ? \"三\" : [\"一\", \"二\", \"三\"].randomGet();\n\t\t\t\t\t})\n\t\t\t\t\t.forResult();\n\t\t\t\tif (result?.control !== \"cancel2\") {\n\t\t\t\t\tevent.result = {\n\t\t\t\t\t\t...result,\n\t\t\t\t\t\tcost_data: {\n\t\t\t\t\t\t\tindex: result.index,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet { index } = event.cost_data;\n\t\t\t\tplayer.draw(index + 1);\n\t\t\t\tplayer.storage.fulingmrfz.target = index + 1;\n\t\t\t},\n\t\t\tgroup: [\"fulingmrfz_purge\", \"fulingmrfz_education\", \"fulingmrfz_cohesion\", \"fulingmrfz_loseHp\"],\n\t\t\tsubSkill: {\n\t\t\t\tloseHp: {\n\t\t\t\t\taudio: \"fulingmrfz\",\n\t\t\t\t\tforced: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tglobal: \"roundEnd\",\n\t\t\t\t\t},\n\t\t\t\t\tlastDo: true,\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\tlet storage = player.getStorage(\"fulingmrfz\");\n\t\t\t\t\t\treturn storage.target > storage.acted.length;\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tpurge: {\n\t\t\t\t\taudio: \"fulingmrfz\",\n\t\t\t\t\tforced: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tsource: \"damageSource\",\n\t\t\t\t\t},\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\tlet storage = player.getStorage(\"fulingmrfz\");\n\t\t\t\t\t\treturn !storage.acted.includes(\"purge\") && storage.target > storage.acted.length && event.player !== player;\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tlet cost = game.createEvent(\"cost_fangzhu_fulingmrfz\");\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tcost.player = player;\n\t\t\t\t\t\tcost.skill = \"fangzhu\";\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tcost.setContent(lib.skill.fangzhu.cost);\n\t\t\t\t\t\tawait cost;\n\t\t\t\t\t\tif (cost.result && cost.result.bool === true && cost.result.targets) {\n\t\t\t\t\t\t\tgame.log(player, \"对\", cost.result.targets[0], \"发动了\", \"#y【放逐】\");\n\t\t\t\t\t\t\tlet content = game.createEvent(\"fangzhu_fangzhu_fulingmrfz\");\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tcontent.player = player;\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tcontent.targets = cost.result.targets;\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tcontent.setContent(lib.skill.fangzhu.content);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.storage.fulingmrfz.acted.add(\"purge\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\teducation: {\n\t\t\t\t\taudio: \"fulingmrfz\",\n\t\t\t\t\tforced: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"useCardAfter\",\n\t\t\t\t\t},\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\tlet storage = player.getStorage(\"fulingmrfz\");\n\t\t\t\t\t\treturn !storage.acted.includes(\"education\") && storage.target > storage.acted.length && get.type(event.card) === \"equip\";\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tgame.log(player, \"发动了\", \"#y【兴学】\");\n\t\t\t\t\t\tlet content = game.createEvent(\"rexingxue_fulingmrfz\");\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tcontent.player = player;\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tcontent.setContent(lib.skill.rexingxue.content);\n\t\t\t\t\t\tplayer.storage.fulingmrfz.acted.add(\"education\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcohesion: {\n\t\t\t\t\taudio: \"fulingmrfz\",\n\t\t\t\t\tforced: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tglobal: \"roundEnd\",\n\t\t\t\t\t},\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\tlet storage = player.getStorage(\"fulingmrfz\");\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\treturn !storage.acted.includes(\"cohesion\") && storage.target > storage.acted.length && player.getRoundHistory(\"lose\", evt => evt.type === \"discard\").length < 1 && player.countCards(\"h\") > 0;\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tgame.log(player, \"发动了\", \"#y【宴如】\");\n\t\t\t\t\t\tlet info = lib.skill.yanru;\n\t\t\t\t\t\tlet cards;\n\t\t\t\t\t\tif (player.countCards(\"h\") % 2 === 0) {\n\t\t\t\t\t\t\tconst result = await player\n\t\t\t\t\t\t\t\t.chooseCard()\n\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\t.set(\"prompt\", info.prompt())\n\t\t\t\t\t\t\t\t.set(\"filterCard\", info.filterCard)\n\t\t\t\t\t\t\t\t.set(\"selectCard\", info.selectCard)\n\t\t\t\t\t\t\t\t.set(\"complexCard\", true)\n\t\t\t\t\t\t\t\t.set(\"forced\", true)\n\t\t\t\t\t\t\t\t.set(\"ai\", info.check)\n\t\t\t\t\t\t\t\t.forResult();\n\t\t\t\t\t\t\tcards = result.cards;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet content = game.createEvent(\"yanru_fulingmrfz\");\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tcontent.player = player;\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tcontent.cards = cards;\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tcontent.setContent(info.content);\n\t\t\t\t\t\tplayer.storage.fulingmrfz.acted.add(\"cohesion\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t//凛御银灰\n\t\tkuangshimrfz: {\n\t\t\taudio: [\"作战中1\", \"作战中2\", \"作战中3\", \"作战中4\"],\n\t\t\tenable: \"phaseUse\",\n\t\t\tfilter(event, player) {\n\t\t\t\treturn player.countCards(\"he\") > 0 && player.getHandcardLimit() > 0;\n\t\t\t},\n\t\t\tfilterCard: true,\n\t\t\tfilterTarget(card, player, target) {\n\t\t\t\treturn player.canUse(\"juedou\", target) === true;\n\t\t\t},\n\t\t\tmark: true,\n\t\t\tintro: {\n\t\t\t\tcontent(storage, player) {\n\t\t\t\t\treturn `·本回合手牌上限-${storage ? storage : \"0\"}<br>·【诓势】已使用的颜色:${!player?.storage?.kuangshimrfz_used ? \"无\" : get.translation(player.storage.kuangshimrfz_used)}`;\n\t\t\t\t},\n\t\t\t},\n\t\t\tmultitarget: true,\n\t\t\tmultiline: true,\n\t\t\tdiscard: false,\n\t\t\tlose: false,\n\t\t\tdelay: false,\n\t\t\tprompt() {\n\t\t\t\tlet player = get.player();\n\t\t\t\tlet storage = player?.storage?.kuangshimrfz_used || [];\n\t\t\t\treturn whichWayUtil.colorize(`请将一张手牌当【决斗】使用${storage.length > 0 ? `<br>选择#r${get.translation(storage)}#的牌会令#r手牌上限-1#` : \"\"}`);\n\t\t\t},\n\t\t\tcheck(card) {\n\t\t\t\t//开摆，这ai写不了一点\n\t\t\t\treturn 8 - get.value(card);\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tconst { cards, targets } = event;\n\t\t\t\tif (!Array.isArray(player.storage.kuangshimrfz_used)) {\n\t\t\t\t\tplayer.storage.kuangshimrfz_used = [];\n\t\t\t\t}\n\t\t\t\tlet used = player.storage.kuangshimrfz_used;\n\t\t\t\tif (used.some(i => cards.map(j => get.color(j)).includes(i))) {\n\t\t\t\t\tplayer.addMark(\"kuangshimrfz\", 1, false);\n\t\t\t\t} else player.storage.kuangshimrfz_used.addArray(cards.map(j => get.color(j)));\n\t\t\t\tawait player\n\t\t\t\t\t.chooseUseTarget({ name: \"juedou\" }, cards, targets)\n\t\t\t\t\t.set(\"forced\", true)\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => get.event().targetsx.includes(target))\n\t\t\t\t\t.set(\"selectTarget\", targets.length)\n\t\t\t\t\t.set(\"targetsx\", targets);\n\n\t\t\t\tlet list = [\"摸两张牌\", \"失去一点体力\", \"将手牌调整至手牌上限并结束出牌阶段\"];\n\n\t\t\t\tconst { links } = await player\n\t\t\t\t\t.chooseButton()\n\t\t\t\t\t.set(\"createDialog\", [\"【诓势】:请选择一项\", [[[0, list[0]]], \"tdnodes\"], [[[1, list[1]]], \"tdnodes\"], [[[2, list[2]]], \"tdnodes\"]])\n\t\t\t\t\t.set(\"forced\", true)\n\t\t\t\t\t.set(\"filterButton\", button => {\n\t\t\t\t\t\tlet index = button.link;\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\treturn get.event().indexCheck(index);\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"ai\", button => {\n\t\t\t\t\t\tlet index = button.link;\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tif (!get.event().indexCheck(index)) return -114514;\n\t\t\t\t\t\treturn index === 0 ? 114514 : Math.random();\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"indexCheck\", check)\n\t\t\t\t\t.forResult();\n\t\t\t\tif (!links) return;\n\t\t\t\tswitch (links[0]) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2: {\n\t\t\t\t\t\tconst num = player.countCards(\"h\") - player.getHandcardLimit();\n\t\t\t\t\t\tif (num === 0) {\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t} else if (num > 0) await player.chooseToDiscard(\"h\", num, true, `请弃置${get.cnNumber(num)}张牌`);\n\t\t\t\t\t\telse await player.draw(Math.abs(num));\n\t\t\t\t\t\tlet evt = event.getParent(\"phaseUse\");\n\t\t\t\t\t\tif (evt) {\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tevt.skipped = true;\n\t\t\t\t\t\t\tgame.log(player, \"跳过了出牌阶段\");\n\t\t\t\t\t\t} else player.chat(\"由于你的插入结算过多，你可以不用跳过出牌阶段了\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfunction check(index) {\n\t\t\t\t\tswitch (index) {\n\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\tif (player.countCards(\"h\") + 2 === player.getHandcardLimit()) return true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\tif (player.countCards(\"h\") + 1 === player.getHandcardLimit()) return true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\t\t\tgroup: [\"kuangshimrfz_clear\"],\n\t\t\tsubSkill: {\n\t\t\t\tused: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tonremove(player) {\n\t\t\t\t\t\tplayer.storage.kuangshimrfz_used = [];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tclear: {\n\t\t\t\t\tmod: {\n\t\t\t\t\t\tmaxHandcard(player, num) {\n\t\t\t\t\t\t\treturn (num -= player.countMark(\"kuangshimrfz\"));\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\taudio: false,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\treturn player.countMark(\"kuangshimrfz\") > 0 || player.getStorage(\"kuangshimrfz_used\").length > 0;\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tplayer.storage.kuangshimrfz_used = [];\n\t\t\t\t\t\tplayer.removeMark(\"kuangshimrfz\", player.countMark(\"kuangshimrfz\"), false);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 1,\n\t\t\t\tresult: {\n\t\t\t\t\ttarget(player, target) {\n\t\t\t\t\t\treturn get.effect(target, { name: \"juedou\" }, player, player) > 0 ? -1 : 0;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tmuzhimrfz: {\n\t\t\tmod: {\n\t\t\t\taiOrder(player, card, num) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tif (!lib.skill.muzhimrfz.includeDiscard(card.name) && card?.cards?.some(i => i.hasGaintag(\"muzhimrfz_pile\"))) return num + 1;\n\t\t\t\t},\n\t\t\t\taiValue(player, card, num) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tif (!lib.skill.muzhimrfz.includeDiscard(card.name) && card?.cards?.some(i => i.hasGaintag(\"muzhimrfz_pile\"))) return num - 10;\n\t\t\t\t},\n\t\t\t\tcardUsable(card, player) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tif (!lib.skill.muzhimrfz.includeDiscard(card.name) && card?.cards?.some(i => i.hasGaintag(\"muzhimrfz_pile\"))) return false;\n\t\t\t\t},\n\t\t\t\tcardEnabled(card, player) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tif (!lib.skill.muzhimrfz.includeDiscard(card.name) && card?.cards?.some(i => i.hasGaintag(\"muzhimrfz_pile\"))) return false;\n\t\t\t\t},\n\t\t\t\tcardEnabled2(card, player) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tif (!lib.skill.muzhimrfz.includeDiscard(card.name) && card?.cards?.some(i => i.hasGaintag(\"muzhimrfz_pile\"))) return false;\n\t\t\t\t},\n\t\t\t\tcardSavable(card, player) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tif (!lib.skill.muzhimrfz.includeDiscard(card.name) && card?.cards?.some(i => i.hasGaintag(\"muzhimrfz_pile\"))) return false;\n\t\t\t\t},\n\t\t\t},\n\t\t\tincludeDiscard(name) {\n\t\t\t\treturn (\n\t\t\t\t\tArray.from(ui.discardPile.children)\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t.map(i => i.name)\n\t\t\t\t\t\t.includes(name)\n\t\t\t\t);\n\t\t\t},\n\t\t\taudio: [\"部署1\", \"部署2\"],\n\t\t\tinit(player, skill) {\n\t\t\t\tlib.translate[\"muzhimrfz_pile\"] = \"牌堆底\";\n\n\t\t\t\tlet recordCount;\n\t\t\t\tconst observer = new MutationObserver(() => {\n\t\t\t\t\tif (player.isDead()) {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tlib.skill.muzhimrfz.onremove(player, skill);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet currentCount = ui.cardPile.childNodes.length;\n\t\t\t\t\tif (currentCount !== recordCount) {\n\t\t\t\t\t\trecordCount = currentCount;\n\n\t\t\t\t\t\tlet pileCards = player.getCards(\"s\", card => card.hasGaintag(\"muzhimrfz_pile\"));\n\n\t\t\t\t\t\tlet bottoms = get.bottomCards(4, true);\n\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tif (bottoms.every(card => pileCards.map(i => i._cardid).includes(card.cardid))) return;\n\n\t\t\t\t\t\tpileCards.forEach(card => card.delete());\n\n\t\t\t\t\t\tlet cards = get.bottomCards(4, true);\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tlet copy_cards = cards.map(card => {\n\t\t\t\t\t\t\tlet copy_card = ui.create.card();\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tcopy_card.init(get.cardInfo(card));\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tcopy_card._cardid = card.cardid;\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tcopy_card._destroy = true;\n\t\t\t\t\t\t\treturn copy_card;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfor (let i = 0; i < copy_cards.length; i++) {\n\t\t\t\t\t\t\t/** @type { Card } */\n\t\t\t\t\t\t\tlet card = copy_cards[i];\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tcard.addPromptSJZX(`第${i + 1}张`);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.directgains(copy_cards, null, \"muzhimrfz_pile\");\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tobserver.observe(ui.cardPile, {\n\t\t\t\t\tchildList: true,\n\t\t\t\t\tsubtree: false,\n\t\t\t\t});\n\n\t\t\t\tif (!player.playerid) return;\n\n\t\t\t\ttmpSave[player.playerid] ??= {};\n\t\t\t\ttmpSave[player.playerid][\"observer_muzhimrfz\"] = observer;\n\t\t\t},\n\t\t\tonremove(player, skill) {\n\t\t\t\tplayer.getCards(\"s\", card => card.hasGaintag(\"muzhimrfz_pile\")).forEach(i => i.delete());\n\n\t\t\t\tif (!player.playerid) return;\n\n\t\t\t\ttmpSave[player.playerid][\"observer_muzhimrfz\"].disconnect();\n\t\t\t\ttmpSave[player.playerid][\"observer_muzhimrfz\"].takeRecords();\n\t\t\t\ttmpSave[player.playerid][\"observer_muzhimrfz\"] = null;\n\t\t\t},\n\t\t\ttrigger: {\n\t\t\t\tplayer: [\"useCardBefore\", \"respondBefore\"],\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\t//@ts-ignore\n\t\t\t\tlet cards = player.getCards(\"s\", card => card.hasGaintag(\"muzhimrfz_pile\") && card._cardid);\n\t\t\t\treturn (\n\t\t\t\t\tevent.cards &&\n\t\t\t\t\tevent.cards.some(card => {\n\t\t\t\t\t\treturn cards.includes(card);\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t},\n\t\t\tforced: true,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\t//@ts-ignore\n\t\t\t\tlet cardsid = get.bottomCards(4, true).map(i => i.cardid);\n\n\t\t\t\ttrigger.cards = trigger.cards.map(card => {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tif (!cardsid.includes(card._cardid)) return card;\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\treturn get.bottomCards(4, true).find(cardx => cardx.cardid === card._cardid);\n\t\t\t\t});\n\t\t\t\t//@ts-ignore\n\t\t\t\ttrigger.card.cards = trigger.card.cards.map(card => {\n\t\t\t\t\tif (!cardsid.includes(card._cardid)) return card;\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\treturn get.bottomCards(4, true).find(cardx => cardx.cardid === card._cardid);\n\t\t\t\t});\n\t\t\t},\n\t\t},\n\n\t\t//新霍尔海雅\n\t\tyumengmrfz: {\n\t\t\t_textList: [\"距离梦醒还有4年\", \"距离达成目标还差1000步\"],\n\t\t\tget textList() {\n\t\t\t\treturn this._textList;\n\t\t\t},\n\t\t\tset textList(value) {\n\t\t\t\tconst texts = document.querySelectorAll(\".canonization .text\").length ? document.querySelectorAll(\".canonization .text\") : document.querySelectorAll(\".canonization-simple .text\");\n\t\t\t\tif (texts) {\n\t\t\t\t\tfor (let i = 0; i < value.length; i++) {\n\t\t\t\t\t\ttexts[i].innerHTML = value[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis._textList = value;\n\t\t\t},\n\t\t\tcreateTip() {\n\t\t\t\tconst warpper = ui.create.div(\".canonization\", document.body);\n\t\t\t\tconst title = ui.create.div(\".title\", warpper);\n\t\t\t\ttitle.innerHTML = \"·羽蛇之梦·\";\n\t\t\t\tconst subtitle = ui.create.div(\".subtitle\", warpper);\n\t\t\t\tsubtitle.innerHTML = `我们自当与神明同位`;\n\t\t\t\tfor (let str of this.textList) {\n\t\t\t\t\tconst text = ui.create.div(\".text\", warpper);\n\t\t\t\t\ttext.innerHTML = str;\n\t\t\t\t}\n\n\t\t\t\twarpper.hide();\n\n\t\t\t\treturn warpper;\n\t\t\t},\n\t\t\tupdate(player) {\n\t\t\t\t//@ts-ignore\n\t\t\t\tlet skillcount = _status.currentPhase === player ? 4 - player.countSkill(\"yumengmrfz\") : \"???\";\n\t\t\t\t//@ts-ignore\n\t\t\t\tlet canonization = ui.cardPile.childNodes.length * game.countPlayer() - player.storage.yumengmrfz;\n\t\t\t\tthis.textList = [`距离梦醒还有${skillcount}年`, `距离达成目标还差${canonization}步`];\n\t\t\t},\n\t\t\tinit(player, skill) {\n\t\t\t\tlet name = `yumengmrfz_${player.playerid}`;\n\n\t\t\t\ttmpSave[name] = {};\n\n\t\t\t\tplayer.storage[skill] = 2;\n\t\t\t\ttmpSave[name][\"ui\"] = this.createTip();\n\n\t\t\t\tlet lastChildCount = 0;\n\t\t\t\tconst observer = new MutationObserver(() => {\n\t\t\t\t\tconst currentChildCount = ui.cardPile.children.length;\n\t\t\t\t\tif (currentChildCount !== lastChildCount) {\n\t\t\t\t\t\tlib.skill.yumengmrfz.update(player);\n\t\t\t\t\t\tlastChildCount = currentChildCount;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tobserver.observe(ui.cardPile, {\n\t\t\t\t\tchildList: true,\n\t\t\t\t\tsubtree: false,\n\t\t\t\t});\n\n\t\t\t\ttmpSave[name][\"observer\"] = observer;\n\n\t\t\t\ttmpSave[name][\"remove\"] = () => {\n\t\t\t\t\ttmpSave[name][\"observer\"].disconnect();\n\t\t\t\t\ttmpSave[name][\"ui\"].remove();\n\t\t\t\t\tdelete tmpSave[name];\n\t\t\t\t};\n\t\t\t},\n\t\t\tintro: {\n\t\t\t\tcontent: \"N:#\",\n\t\t\t},\n\t\t\tmark: true,\n\t\t\tonremove(player, skill) {\n\t\t\t\tlet name = `yumengmrfz_${player.playerid}`;\n\t\t\t\tdelete player.storage[skill];\n\t\t\t\ttmpSave[name][\"remove\"]();\n\t\t\t},\n\t\t\taudio: [\"编入队伍\", \"任命队长\"],\n\t\t\tderivation: [\"yushenmrfz\", \"newkuangyumrfz\", \"tanxianmrfz\"],\n\t\t\tenable: \"phaseUse\",\n\t\t\tusable: 4,\n\t\t\tfilterCard(card) {\n\t\t\t\tlet player = get.player();\n\t\t\t\treturn player.countCards(\"h\") >= player.storage.yumengmrfz;\n\t\t\t},\n\t\t\tprompt() {\n\t\t\t\tlet player = get.player();\n\t\t\t\tlet num = player.storage.yumengmrfz;\n\t\t\t\treturn player.countCards(\"h\") >= num ? `请弃置${get.cnNumber(num)}张手牌` : `摸${get.cnNumber(num)}张牌`;\n\t\t\t},\n\t\t\tselectCard() {\n\t\t\t\tlet player = get.player();\n\t\t\t\treturn player.countCards(\"h\") < player.storage.yumengmrfz ? -1 : player.storage.yumengmrfz;\n\t\t\t},\n\t\t\tcheck(card) {\n\t\t\t\tlet player = get.player();\n\t\t\t\treturn 114514 - player.getUseValue(card);\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet num = player.storage.yumengmrfz;\n\t\t\t\tif (event.cards.length < 1) player.draw(num);\n\t\t\t\t//@ts-ignore\n\t\t\t\telse player.setSkillCount(\"yumengmrfz\", -1);\n\t\t\t\tplayer.storage.yumengmrfz++;\n\t\t\t\tlib.skill.yumengmrfz.update(player);\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 1,\n\t\t\t\tresult: {\n\t\t\t\t\tplayer: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t\tgroup: [\"yumengmrfz_canonization\", \"yumengmrfz_fail\", \"yumengmrfz_changeBackground\"],\n\t\t\tsubSkill: {\n\t\t\t\tchangeBackground: {\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: [\"phaseBegin\", \"phaseAfter\"],\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\ttmpSave[`yumengmrfz_${player.playerid}`].ui[event.triggername === \"phaseBegin\" ? \"show\" : \"hide\"]();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcanonization: {\n\t\t\t\t\taudio: \"yumengmrfz\",\n\t\t\t\t\tforced: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"phaseEnd\",\n\t\t\t\t\t},\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\treturn player.storage.yumengmrfz > ui.cardPile.childNodes.length * game.countPlayer();\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tplayer.awakenSkill(\"yumengmrfz\");\n\t\t\t\t\t\tgame.log(player, \"使命成功\");\n\t\t\t\t\t\tplayer.addSkill(\"yushenmrfz\");\n\t\t\t\t\t\ttmpSave[`yumengmrfz_${player.playerid}`][\"remove\"]();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tfail: {\n\t\t\t\t\taudio: \"yumengmrfz\",\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tglobal: \"roundStart\",\n\t\t\t\t\t},\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\treturn game.roundNumber === 2;\n\t\t\t\t\t},\n\t\t\t\t\tforced: true,\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tplayer.awakenSkill(\"yumengmrfz\");\n\t\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\t\tgame.log(player, \"使命失败\");\n\t\t\t\t\t\tplayer.chat(\"腾蛇乘雾，终为土灰...\");\n\t\t\t\t\t\tplayer.addSkill([\"newkuangyumrfz\", \"tanxianmrfz\"]);\n\t\t\t\t\t\ttmpSave[`yumengmrfz_${player.playerid}`][\"remove\"]();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tnewkuangyumrfz: {\n\t\t\taudio: \"kuangyumrfz\",\n\t\t\tusable: 1,\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"useCardToTargeted\",\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\t//@ts-ignore\n\t\t\t\tif (event.getParent().triggeredTargets3.length > 1) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t//@ts-ignore\n\t\t\t\treturn game.filterPlayer(char => player.canUse(event.card, char) && !event.targets.includes(char)) && (get.name(event.card) === \"sha\" || get.type(event.card) === \"trick\");\n\t\t\t},\n\t\t\tasync cost(event, trigger, player) {\n\t\t\t\tevent.result = await player\n\t\t\t\t\t.chooseTarget()\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"newkuangyumrfz\"))\n\t\t\t\t\t.set(\"prompt2\", `你可以为此牌额外指定至多${get.cnNumber(player.hp)}个合法目标，若此牌没有造成伤害，你失去一点体力，反之，此技能本回合视为未发动过`)\n\t\t\t\t\t.set(\"selectTarget\", [0, player.hp])\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tlet targets = get.event().targetsx;\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\treturn !targets.includes(target) && player.canUse(get.event().cardx, target);\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"cardx\", trigger.card)\n\t\t\t\t\t.set(\"targetsx\", trigger.targets)\n\t\t\t\t\t.set(\"ai\", target => {\n\t\t\t\t\t\tlet val = 0,\n\t\t\t\t\t\t\tplayer = get.player(),\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tcard = get.event().cardx;\n\t\t\t\t\t\tif (get.attitude(target, player) > 0) return -1;\n\t\t\t\t\t\tif (get.tag(card, \"damage\")) val += 2;\n\t\t\t\t\t\tif (get.canRespond(card, target).includes(\"sha\") && !target.mayHaveSha()) val += 10;\n\t\t\t\t\t\tif (get.canRespond(card, target).includes(\"shan\") && !target.mayHaveShan()) val += 10;\n\t\t\t\t\t\tif (target.countCards(\"h\") < 1) val += 3;\n\t\t\t\t\t\tif (target.countCards(\"h\") > 5) val -= 3;\n\t\t\t\t\t\treturn val;\n\t\t\t\t\t})\n\t\t\t\t\t.forResult();\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet { targets } = event;\n\t\t\t\tif (Array.isArray(targets) && targets.length > 0) {\n\t\t\t\t\tplayer.line(targets);\n\t\t\t\t\ttrigger.targets.addArray(targets);\n\t\t\t\t}\n\t\t\t\tplayer\n\t\t\t\t\t.when({ player: \"useCardAfter\", source: \"damageSource\" })\n\t\t\t\t\t.filter((event, player) => {\n\t\t\t\t\t\treturn event.card && event.card.cardid === trigger.card.cardid;\n\t\t\t\t\t})\n\t\t\t\t\t.step(async (event, trigger, player) => {\n\t\t\t\t\t\tif (trigger.name === \"useCard\") {\n\t\t\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tplayer.setSkillCount(\"newkuangyumrfz\", -1);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t},\n\t\t},\n\t\ttanxianmrfz: {\n\t\t\taudio: \"chuangzhongmrfz\",\n\t\t\tforced: true,\n\t\t\tinit(player, skill) {\n\t\t\t\tplayer.storage[skill] = {\n\t\t\t\t\tdraw: 4,\n\t\t\t\t\tsha: 1,\n\t\t\t\t\tattack: 5,\n\t\t\t\t};\n\t\t\t},\n\t\t\tmark: true,\n\t\t\tintro: {\n\t\t\t\tcontent(storage) {\n\t\t\t\t\treturn \"额定摸牌数、杀的次数、基础攻击距离为：\" + Object.values(storage).join(\"、\");\n\t\t\t\t},\n\t\t\t},\n\t\t\tonremove: true,\n\t\t\tmod: {\n\t\t\t\tattackRangeBase(player, num) {\n\t\t\t\t\tif (player.storage?.tanxianmrfz?.attack) return player.storage.tanxianmrfz.attack;\n\t\t\t\t},\n\t\t\t\tcardUsable(card, player, num) {\n\t\t\t\t\tif (get.name(card) === \"sha\") return (num += player.storage?.tanxianmrfz?.sha || 0);\n\t\t\t\t},\n\t\t\t},\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"phaseDrawBegin2\",\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\treturn !event.numFixed && player.storage?.tanxianmrfz?.draw;\n\t\t\t},\n\t\t\tfirstDo: true,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\ttrigger.num = player.storage.tanxianmrfz.draw;\n\t\t\t},\n\t\t\t/** @type { ContentFuncByAll } */\n\t\t\tasync exchanging(event, trigger, player) {\n\t\t\t\tconst { promise, resolve } = Promise.withResolvers();\n\n\t\t\t\t/** @type { Record<string,number> } */\n\t\t\t\tlet { draw, sha, attack } = player.storage.tanxianmrfz;\n\t\t\t\tlet list = [\"请选择你要交换的数字<br>(选择两个数字即可交换)\", \"你的额定摸牌数为\", [[draw], \"tdnodes\"], \"出牌阶段【杀】的使用次数+\", [[sha], \"tdnodes\"], \"你的基础攻击范围为\", [[attack], \"tdnodes\"]];\n\t\t\t\tlet dialog = ui.create.dialog(...list, \"hidden\");\n\n\t\t\t\tlet texts = [],\n\t\t\t\t\tbuttons = [];\n\t\t\t\tlet content = dialog.querySelector(\".content\");\n\t\t\t\tlet firstSelected;\n\t\t\t\t//@ts-ignore\n\t\t\t\tevent.sort = [];\n\t\t\t\tconst listener = function () {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tif (_status.dragged || _status.justdragged) return;\n\n\t\t\t\t\tif (!firstSelected) {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tfirstSelected = this;\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tthis.classList.add(\"bluebg\");\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t} else if (firstSelected === this) {\n\t\t\t\t\t\tfirstSelected.classList.remove(\"bluebg\");\n\t\t\t\t\t\tfirstSelected = null;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst firstSpan = firstSelected.querySelector(\"span\");\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tconst secondSpan = this.querySelector(\"span\");\n\n\t\t\t\t\t\t[firstSpan.textContent, secondSpan.textContent] = [secondSpan.textContent, firstSpan.textContent];\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t[firstSelected.link, this.link] = [this.link, firstSelected.link];\n\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tevent.sort = Array.from(content.querySelectorAll(\".buttons\")).map(b => b.childNodes[0]);\n\n\t\t\t\t\t\tfirstSelected.classList.remove(\"bluebg\");\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tthis.classList.remove(\"bluebg\");\n\t\t\t\t\t\tfirstSelected = null;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t//@ts-ignore\n\t\t\t\tfor (let el of Array.from(content.children)) {\n\t\t\t\t\tif (el.innerHTML === list[0]) continue;\n\n\t\t\t\t\tif (el.classList.contains(\"caption\")) {\n\t\t\t\t\t\ttexts.push(el);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet td = el.childNodes[0];\n\t\t\t\t\t\tbuttons.push(el);\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tevent.sort.push(td);\n\t\t\t\t\t\ttd.addEventListener(\"click\", listener);\n\t\t\t\t\t}\n\t\t\t\t\tel.remove();\n\t\t\t\t}\n\n\t\t\t\tfor (let i = 0; i < texts.length; i++) {\n\t\t\t\t\tlet wrapper = ui.create.div(\".specialDialogWrapper\", content);\n\t\t\t\t\twrapper.appendChild(texts[i]);\n\t\t\t\t\twrapper.appendChild(buttons[i]);\n\t\t\t\t}\n\t\t\t\t//@ts-ignore\n\t\t\t\tevent.dialog = dialog;\n\n\t\t\t\tdialog.open();\n\t\t\t\t//@ts-ignore\n\t\t\t\tevent.switchToAuto = function () {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tevent.control.close();\n\t\t\t\t\tgame.resume();\n\t\t\t\t\t_status.imchoosing = false;\n\t\t\t\t};\n\t\t\t\t//@ts-ignore\n\t\t\t\tevent.control = ui.create.control(\"ok\", function () {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tevent.control.close();\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tevent.sort = event.sort.map(i => i.link);\n\t\t\t\t\tgame.resume();\n\t\t\t\t\t_status.imchoosing = false;\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tresolve(event.sort);\n\t\t\t\t});\n\n\t\t\t\tgame.pause();\n\n\t\t\t\treturn promise;\n\t\t\t},\n\t\t\tgroup: \"tanxianmrfz_exchange\",\n\t\t\tsubSkill: {\n\t\t\t\texchange: {\n\t\t\t\t\taudio: \"tanxianmrfz\",\n\t\t\t\t\tforced: true,\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\treturn Object.values(player.storage.tanxianmrfz).some(i => i > 0);\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tlet nums = Object.values(player.storage.tanxianmrfz);\n\t\t\t\t\t\tlet max = Math.max(...nums);\n\t\t\t\t\t\tfor (let i = 0; i < 3; i++) {\n\t\t\t\t\t\t\tlet list = Object.keys(player.storage.tanxianmrfz);\n\t\t\t\t\t\t\tlet num = nums[i];\n\t\t\t\t\t\t\tif (nums[i] === max) {\n\t\t\t\t\t\t\t\tnum -= 1;\n\t\t\t\t\t\t\t\tmax += 114151919810; // 使得只会减一次\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tplayer.storage.tanxianmrfz[list[i]] = num;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (player.isUnderControl()) {\n\t\t\t\t\t\t\tgame.swapPlayerAuto(player);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet next;\n\t\t\t\t\t\tif (!event.isMine() && !event.isOnline()) {\n\t\t\t\t\t\t\tnext = switchAuto();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnext = lib.skill.tanxianmrfz.exchanging(event, trigger, player);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst result = await next;\n\n\t\t\t\t\t\tif (!result) return;\n\n\t\t\t\t\t\tfor (let i = 0; i < result.length; i++) {\n\t\t\t\t\t\t\tlet keys = Object.keys(player.storage.tanxianmrfz);\n\t\t\t\t\t\t\tlet key = keys[i];\n\t\t\t\t\t\t\tplayer.storage.tanxianmrfz[key] = result[i];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgame.log(player, \"调整了\", `#y【${get.translation(event.name)}】`, \"的数字\");\n\n\t\t\t\t\t\tfunction switchAuto() {\n\t\t\t\t\t\t\t_status.imchoosing = false;\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tif (event.dialog) event.dialog.close();\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tif (event.control) event.control.close();\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tevent.sort = Object.values(player.storage.tanxianmrfz).sort((a, b) => b - a);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tyushenmrfz: {\n\t\t\taudio: [\"选中干员1\", \"选中干员2\"],\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"dieBegin\",\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\t//@ts-ignore\n\t\t\t\tif (!(event.getParent().name !== \"giveup\" && player.maxHp > 0)) return false;\n\t\t\t\treturn ui.cardPile.childNodes.length > 0;\n\t\t\t},\n\t\t\tforced: true,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tconst card = get.cardPile2(true, \"random\");\n\t\t\t\tif (!card) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t//@ts-ignore\n\t\t\t\tawait game.cardsGotoSpecial(card);\n\t\t\t\tgame.log(player, \"将\", card, \"移出游戏\");\n\t\t\t\ttrigger.cancel();\n\t\t\t\tawait player.recoverTo(1);\n\t\t\t},\n\t\t\tgroup: \"yushenmrfz_hack\",\n\t\t\tsubSkill: {\n\t\t\t\thack: {\n\t\t\t\t\taudio: \"yushenmrfz\",\n\t\t\t\t\ttrigger: { player: \"phaseBegin\" },\n\t\t\t\t\tforced: true,\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tlet packs = Object.keys(lib.characterSort);\n\n\t\t\t\t\t\tlet buttonList = [`请选择一个将包`];\n\t\t\t\t\t\tlet count = 0;\n\t\t\t\t\t\tlet list = [];\n\t\t\t\t\t\tfor (let i = 0; i < packs.length; i++) {\n\t\t\t\t\t\t\tlist.push([i, getPacksTranslation(packs[i])]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (var i = 0; i < Math.ceil(list.length / 4); i++) {\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tbuttonList.push([list.slice(count, count + 4 >= list.length ? list.length : count + 4), \"tdnodes\"]);\n\t\t\t\t\t\t\tcount += 4;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst packsResult = await player.chooseButton(buttonList).set(\"forced\", true).forResult();\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tlet choosePack = packs[packsResult.buttons[0].link];\n\n\t\t\t\t\t\tlet sorts = Object.keys(lib.characterSort[choosePack]);\n\n\t\t\t\t\t\tlet buttonList_sorts = [`请选择一个子包`];\n\t\t\t\t\t\tlet count_sorts = 0;\n\t\t\t\t\t\tlet list_sorts = [];\n\t\t\t\t\t\tfor (let i = 0; i < sorts.length; i++) {\n\t\t\t\t\t\t\tlist_sorts.push([i, lib.translate[sorts[i]]]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (var i = 0; i < Math.ceil(list_sorts.length / 4); i++) {\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tbuttonList_sorts.push([list_sorts.slice(count_sorts, count_sorts + 4 >= list_sorts.length ? list_sorts.length : count_sorts + 4), \"tdnodes\"]);\n\t\t\t\t\t\t\tcount_sorts += 4;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst sortsResult = await player.chooseButton(buttonList_sorts).set(\"forced\", true).forResult();\n\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tlet chooseSort = sorts[sortsResult.buttons[0].link];\n\n\t\t\t\t\t\tlet characters = Object.values(lib.characterSort[choosePack][chooseSort]);\n\n\t\t\t\t\t\tfor (let name of characters) {\n\t\t\t\t\t\t\tif (get.character(name)?.skills) {\n\t\t\t\t\t\t\t\tget.character(name).skills.forEach(i => player.addSkill(i));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgame.log(player, \"获得了武将包\", `#y${getPacksTranslation(choosePack)}`, \"的\", `#y${lib.translate[chooseSort]}`, \"中所有武将的技能\");\n\n\t\t\t\t\t\tfunction getPacksTranslation(pack) {\n\t\t\t\t\t\t\treturn lib.translate[`${pack}_character_config`];\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t// 真言\n\t\tlingxinmrfz: {\n\t\t\taudio: [\"任命队长\", \"作战中4\"],\n\t\t\ttrigger: {\n\t\t\t\tplayer: [\"logSkillBegin\", \"useSkill\"],\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\tif (!game.expandSkills(player.getSkills()).includes(event.skill)) return false;\n\t\t\t\treturn event.skill !== \"lingxinmrfz\" && !event.skill.startsWith(\"lingxinmrfz\");\n\t\t\t},\n\t\t\tforced: true,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tplayer\n\t\t\t\t\t.when({ global: [`${trigger.skill}After`, `${trigger.skill}_costAfter`] })\n\t\t\t\t\t.filter(event => {\n\t\t\t\t\t\tconsole.log(event);\n\t\t\t\t\t\treturn !(event.name.endsWith(\"_cost\") && event.result?.bool === true);\n\t\t\t\t\t})\n\t\t\t\t\t.then(() => {})\n\t\t\t\t\t.assign({\n\t\t\t\t\t\tai: {\n\t\t\t\t\t\t\tviewHandcard: true,\n\t\t\t\t\t\t\tskillTagFilter(player, tag, arg) {\n\t\t\t\t\t\t\t\tif (player == arg) return false;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t},\n\t\t\tgroup: \"lingxinmrfz_addTrigger\",\n\t\t\tsubSkill: {\n\t\t\t\taddTrigger: {\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tglobal: \"phaseBefore\",\n\t\t\t\t\t\tplayer: [\"enterGame\", \"changeSkillsAfter\"],\n\t\t\t\t\t},\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn event.name !== \"phase\" || game.phaseNumber == 0 || event.skill === \"changeSkills\";\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tlet skills = [];\n\t\t\t\t\t\tskills.addArray(player.getSkills().map(i => i + \"_costBegin\"));\n\t\t\t\t\t\tgame.broadcastAll(\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t(skills, player) => {\n\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\tlib.skill.lingxinmrfz.trigger.player.addArray(skills);\n\t\t\t\t\t\t\t\tplayer.addSkillTrigger(\"lingxinmrfz\", null, true);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tskills,\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tplayer\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tlianganmrfz: {\n\t\t\taudio: [\"部署1\", \"作战中1\"],\n\t\t\ttrigger: {\n\t\t\t\tglobal: \"phaseDrawAfter\",\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\t//@ts-ignore\n\t\t\t\treturn event.player.countCards(\"h\", card => !card.isConnect()) > 0;\n\t\t\t},\n\t\t\tcheck(event, player) {\n\t\t\t\treturn get.attitude2(event.player) < 0;\n\t\t\t},\n\t\t\tasync cost(event, trigger, player) {\n\t\t\t\tlet target = trigger.player;\n\t\t\t\tevent.result = await player\n\t\t\t\t\t.choosePlayerCard(target)\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"lianganmrfz\"))\n\t\t\t\t\t.set(\"prompt2\", `你可以连接${get.translation(target)}的一张手牌`)\n\t\t\t\t\t.set(\"ai\", button => get.value(button.link))\n\t\t\t\t\t.forResult();\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\t//@ts-ignore\n\t\t\t\tevent.cards.forEach(card => card.addConnect());\n\t\t\t},\n\t\t\tgroup: \"lianganmrfz_view\",\n\t\t\tsubSkill: {\n\t\t\t\tview: {\n\t\t\t\t\taudio: \"lianganmrfz\",\n\t\t\t\t\tenable: \"chooseToUse\",\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\treturn game.getConnectCards().length > 1 && player.countCards(\"h\", card => card.isConnect()) > 0;\n\t\t\t\t\t},\n\t\t\t\t\thiddenCard(player, name) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\tgame\n\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\t.getConnectCards()\n\t\t\t\t\t\t\t\t.map(card => get.name(card))\n\t\t\t\t\t\t\t\t.includes(name)\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t\tchooseButton: {\n\t\t\t\t\t\tdialog(event, player) {\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tlet list = game.getConnectCards().map(card => [get.type(card), \"\", get.name(card), get.nature(card)]);\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * @type { Dialog }\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tconst dialog = ui.create.dialog(\"联感\", [list, \"vcard\"]);\n\t\t\t\t\t\t\treturn dialog;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfilter(button, player) {\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\treturn _status.event.getParent().filterCard({ name: button.link[2] }, player, _status.event.getParent());\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcheck(button) {\n\t\t\t\t\t\t\tvar player = _status.event.player;\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tvar card = { name: button.link[2], nature: button.link[3] };\n\t\t\t\t\t\t\tif (player.countCards(\"hes\", cardx => cardx.name == card.name)) {\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\treturn _status.event.getParent().type == \"phase\" ? player.getUseValue(card) : 1;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbackup(links, player) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\taudio: \"lianganmrfz\",\n\t\t\t\t\t\t\t\tfilterCard(card) {\n\t\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\t\treturn card.isConnect();\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tpopname: true,\n\t\t\t\t\t\t\t\tcheck(card) {\n\t\t\t\t\t\t\t\t\treturn 7 - get.value(card);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tposition: \"h\",\n\t\t\t\t\t\t\t\tviewAs: { name: links[0][2], nature: links[0][3] },\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprompt(links, player) {\n\t\t\t\t\t\t\treturn \"将一张连接牌当做\" + (get.translation(links[0][3]) || \"\") + get.translation(links[0][2]) + \"使用\";\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tai: {\n\t\t\t\t\t\torder: 1,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tqinyinmrfz: {\n\t\t\taudio: [\"编入队伍\", \"作战中3\"],\n\t\t\tenable: \"phaseUse\",\n\t\t\tfilter(event, player) {\n\t\t\t\t//@ts-ignore\n\t\t\t\treturn game.hasPlayer(char => char.countCards(\"h\") > 0) && player.hasUseTarget(\"shunshou\", true);\n\t\t\t},\n\t\t\tusable: 1,\n\t\t\tfilterTarget(card, player, target) {\n\t\t\t\treturn target.countCards(\"h\") > 0;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tconst {\n\t\t\t\t\ttargets: [target],\n\t\t\t\t} = event;\n\t\t\t\tconst { cards } = await player\n\t\t\t\t\t.choosePlayerCard(target, true)\n\t\t\t\t\t.set(\"prompt\", `请以弃置的方式将${get.translation(target)}的一张手牌当【顺手牵羊】使用`)\n\t\t\t\t\t.set(\"nodistance\", true)\n\t\t\t\t\t.set(\"ai\", button => {\n\t\t\t\t\t\tlet card = button.link;\n\t\t\t\t\t\tlet val = get.value(card);\n\t\t\t\t\t\tif (card.isConnect()) return val + 3;\n\t\t\t\t\t\treturn val;\n\t\t\t\t\t})\n\t\t\t\t\t.forResult();\n\t\t\t\tplayer.chooseUseTarget({ name: \"shunshou\" }, cards).set(\"forced\", true).set(\"qinyinmrfz\", true);\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tresult: {\n\t\t\t\t\ttarget(player, target) {\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tgroup: [\"qinyinmrfz_discard\", \"qinyinmrfz_roundEnd\"],\n\t\t\tsubSkill: {\n\t\t\t\troundEnd: {\n\t\t\t\t\tauio: \"qinyinmrfz\",\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tglobal: \"roundEnd\",\n\t\t\t\t\t},\n\t\t\t\t\tfilter() {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\treturn lib.skill.qinyinmrfz.filter.apply(this, arguments);\n\t\t\t\t\t},\n\t\t\t\t\tasync cost(event, trigger, player) {\n\t\t\t\t\t\tevent.result = await player\n\t\t\t\t\t\t\t.chooseTarget()\n\t\t\t\t\t\t\t.set(\"prompt\", get.prompt(\"qinyinmrfz\"))\n\t\t\t\t\t\t\t.set(\"filterTarget\", lib.skill.qinyinmrfz.filterTarget)\n\t\t\t\t\t\t\t.set(\"ai\", target => get.attitude2(target) < 0)\n\t\t\t\t\t\t\t.set(\"nodistance\", true)\n\t\t\t\t\t\t\t.forResult();\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tawait lib.skill.qinyinmrfz.content(event, trigger, player);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdiscard: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"chooseUseTargetBegin\",\n\t\t\t\t\t},\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\treturn event.qinyinmrfz === true;\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tfor (let target of trigger.targets) {\n\t\t\t\t\t\t\tawait target.discard(trigger.cards);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t//新浊心斯卡蒂 红蒂\n\t\tnewqianximrfz: {\n\t\t\taudio: \"qianximrfz\",\n\t\t\ttrigger: {\n\t\t\t\tglobal: \"phaseOver\",\n\t\t\t},\n\t\t\tforced: true,\n\t\t\tgetNextByAll(player) {\n\t\t\t\tlet chars = game.players.slice().concat(game.dead).sort(lib.sort.position);\n\t\t\t\tlet index = chars.indexOf(player);\n\t\t\t\treturn chars[index + 1 > chars.length ? 0 : index + 1];\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\t//@ts-ignore\n\t\t\t\tlet evt = event.getChildren(\"phase\");\n\t\t\t\tif (!evt.player) return false;\n\t\t\t\tlet target = this.getNextByAll(evt.player);\n\t\t\t\treturn target && !target.isAlive();\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\t//@ts-ignore\n\t\t\t\tlet evt = trigger.getChildren(\"phase\");\n\t\t\t\tlet target = lib.skill.newqianximrfz.getNextByAll(evt.player);\n\t\t\t\tgame.broadcastAll(\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tfunction (char1, char2) {\n\t\t\t\t\t\tgame.swapSeat(char1, char2);\n\t\t\t\t\t},\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tplayer,\n\t\t\t\t\ttarget\n\t\t\t\t);\n\t\t\t\ttrigger.player = target;\n\t\t\t},\n\t\t},\n\t\thaixuanmrfz: {\n\t\t\taudio: [\"作战中2\", \"作战中4\"],\n\t\t\ttrigger: {\n\t\t\t\tglobal: \"phaseZhunbeiBegin\",\n\t\t\t},\n\t\t\tderivation: [\"duwu\"],\n\t\t\tfilter(event, player) {\n\t\t\t\treturn event.player !== player && event.player.countCards(\"he\") > 0;\n\t\t\t},\n\t\t\tprompt(event, player) {\n\t\t\t\treturn `【海漩】:是否令${get.translation(event.player)}对你发动一次【黩武】？`;\n\t\t\t},\n\t\t\tcheck(event, player) {\n\t\t\t\treturn get.attitude2(event.player) < 0 && player.hp > 2 && event.player.countCards(\"he\") > 1;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tconst target = trigger.player;\n\t\t\t\tconst { cards } = await target\n\t\t\t\t\t.chooseToDiscard(\"he\", true)\n\t\t\t\t\t.set(\"prompt\", `弃置${player.hp}张牌`)\n\t\t\t\t\t.set(\"prompt2\", get.skillInfoTranslation(\"duwu\"))\n\t\t\t\t\t.set(\"selectCard\", Math.min(player.hp, target.countCards(\"he\")))\n\t\t\t\t\t.set(\"ai\", card => -get.value(card))\n\t\t\t\t\t.forResult();\n\t\t\t\tif (!cards) return;\n\t\t\t\tconst next = game.createEvent(\"haixuanmrfz_duwu\");\n\t\t\t\t//@ts-ignore\n\t\t\t\tnext.target = player;\n\t\t\t\t//@ts-ignore\n\t\t\t\tnext.player = target;\n\t\t\t\t//@ts-ignore\n\t\t\t\tnext.setContent(lib.skill.duwu.content);\n\t\t\t\tlet cardsx = cards.filter(card => !get.tag(card, \"damage\") && get.position(card) === \"d\");\n\t\t\t\tif (cardsx.length) {\n\t\t\t\t\tplayer.gain(cardsx, \"gain2\");\n\t\t\t\t\tif (new Set(cardsx.map(card => get.suit(card))).size === cardsx.length) player.recover();\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\n\t\t//新焰影苇草\n\t\tgongximrfz: {\n\t\t\taudio: \"yingyaomrfz\",\n\t\t\tderivation: [\"huoshaolianying\"],\n\t\t\tenable: \"phaseUse\",\n\t\t\tfilter(event, player) {\n\t\t\t\tif (\n\t\t\t\t\tObject.entries(player.getStat(\"skill\"))\n\t\t\t\t\t\t.filter(i => [\"gongximrfz\", \"gongximrfz_dying\"].includes(i[0]))\n\t\t\t\t\t\t.reduce((n, arr) => n + arr[1], 0) > 0\n\t\t\t\t)\n\t\t\t\t\treturn false;\n\t\t\t\treturn player.countCards(\"he\", card => get.tag(card, \"damage\")) > 0 && player.hasUseTarget(\"huoshaolianying\");\n\t\t\t},\n\t\t\tfilterCard(card) {\n\t\t\t\treturn get.tag(card, \"damage\");\n\t\t\t},\n\t\t\tfilterTarget(card, player, target) {\n\t\t\t\treturn !target.isLinked();\n\t\t\t},\n\t\t\tselectTarget() {\n\t\t\t\t//@ts-ignore\n\t\t\t\tlet num = get.targetCounts(ui.selected.cards[0]);\n\t\t\t\treturn [0, num];\n\t\t\t},\n\t\t\tcheck(card) {\n\t\t\t\tlet player = get.player();\n\t\t\t\treturn (\n\t\t\t\t\t8 -\n\t\t\t\t\tget.value(card) +\n\t\t\t\t\tMath.min(\n\t\t\t\t\t\tgame.countPlayer(char => {\n\t\t\t\t\t\t\treturn get.effect(char, { name: \"huoshaolianying\" }, player, player) > 0;\n\t\t\t\t\t\t}),\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tget.targetCounts(card)\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t},\n\t\t\tcomplexSelect: true,\n\t\t\tdiscard: false,\n\t\t\tlose: false,\n\t\t\tmultitarget: true,\n\t\t\tmultiline: true,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tconst {\n\t\t\t\t\tcards: [card],\n\t\t\t\t\ttargets,\n\t\t\t\t} = event;\n\t\t\t\tif (Array.isArray(targets))\n\t\t\t\t\ttargets.forEach(target => {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tif (!target.isLinked()) target.link();\n\t\t\t\t\t});\n\t\t\t\tif (player.hasUseTarget(\"huoshaolianying\")) {\n\t\t\t\t\tplayer\n\t\t\t\t\t\t.when({ player: \"useCardAfter\" })\n\t\t\t\t\t\t.filter(event => event.card?.storage?.gongximrfz === true)\n\t\t\t\t\t\t.step(async (event, trigger, player) => {\n\t\t\t\t\t\t\tconst damages = player.getHistory(\"sourceDamage\", evt => evt.card && evt.card.storage && evt.card.storage.gongximrfz === true).length;\n\t\t\t\t\t\t\tif (damages > 0) {\n\t\t\t\t\t\t\t\tconst { targets } = await player\n\t\t\t\t\t\t\t\t\t.chooseTarget()\n\t\t\t\t\t\t\t\t\t.set(\"selectTarget\", [0, damages])\n\t\t\t\t\t\t\t\t\t.set(\"prompt\", `你可以令至多${damages}名角色回复一点体力并摸一张牌`)\n\t\t\t\t\t\t\t\t\t.set(\"ai\", target => {\n\t\t\t\t\t\t\t\t\t\tlet player = get.player();\n\t\t\t\t\t\t\t\t\t\tlet att = get.attitude(player, target);\n\t\t\t\t\t\t\t\t\t\tlet num = att > 0 ? 1 : -114514;\n\t\t\t\t\t\t\t\t\t\tif (att > 0 && target.hp < 2) num += 10;\n\t\t\t\t\t\t\t\t\t\tif (target === player) num += 2;\n\t\t\t\t\t\t\t\t\t\tif (att > 0 && target.getDamagedHp() > 0) num += 2;\n\t\t\t\t\t\t\t\t\t\treturn num;\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.forResult();\n\t\t\t\t\t\t\t\tif (targets) {\n\t\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\t\tplayer.logSkill(\"gongximrfz\", targets);\n\t\t\t\t\t\t\t\t\ttargets.forEach(target => {\n\t\t\t\t\t\t\t\t\t\ttarget.recover();\n\t\t\t\t\t\t\t\t\t\ttarget.draw();\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\tawait player\n\t\t\t\t\t\t.chooseUseTarget({ name: \"huoshaolianying\", storage: { gongximrfz: true } }, [card])\n\t\t\t\t\t\t.set(\"forced\", true)\n\t\t\t\t\t\t.set(\"prompt2\", `此牌结算完成后，你令至多Y名角色回复一点体力并摸一张牌。（Y=【火烧连营】此次造成的伤害值）`);\n\t\t\t\t}\n\t\t\t},\n\t\t\tgroup: \"gongximrfz_dying\",\n\t\t\tsubSkill: {\n\t\t\t\tdying: {\n\t\t\t\t\taudio: \"gongximrfz\",\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tglobal: \"dying\",\n\t\t\t\t\t},\n\t\t\t\t\tfilter() {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\treturn lib.skill.gongximrfz.filter.apply(this, arguments);\n\t\t\t\t\t},\n\t\t\t\t\tasync cost(event, trigger, player) {\n\t\t\t\t\t\tevent.result = await player\n\t\t\t\t\t\t\t.chooseCardTarget({\n\t\t\t\t\t\t\t\tprompt: get.prompt(\"gongximrfz\"),\n\t\t\t\t\t\t\t\tprompt2: get.skillInfoTranslation(\"gongximrfz\"),\n\t\t\t\t\t\t\t\tfilterCard: lib.skill.gongximrfz.filterCard,\n\t\t\t\t\t\t\t\tfilterTarget: lib.skill.gongximrfz.filterTarget,\n\t\t\t\t\t\t\t\tselectTarget: lib.skill.gongximrfz.selectTarget,\n\t\t\t\t\t\t\t\tcheck1: lib.skill.gongximrfz.check,\n\t\t\t\t\t\t\t\tcheck2(target) {\n\t\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\t\treturn lib.skill.gongximrfz.ai.result.target(get.player(), target);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcomplexSelect: true,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.forResult();\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tawait lib.skill.gongximrfz.content(event, trigger, player);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 5,\n\t\t\t\tresult: {\n\t\t\t\t\ttarget(player, target) {\n\t\t\t\t\t\tlet att = get.attitude(player, target);\n\t\t\t\t\t\tif (att > 0) return;\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\thuamianmrfz: {\n\t\t\taudio: \"minghuomrfz\",\n\t\t\tderivation: [\"jsrgjishan\", \"dcctjiuxian\", \"newminghuomrfz\"],\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"phaseJieshuEnd\",\n\t\t\t},\n\t\t\tgetNum(player) {\n\t\t\t\tlet [drawPlayer, recoverPlayer] = [[], []];\n\t\t\t\t//@ts-ignore\n\t\t\t\tgame.getGlobalHistory(\"changeHp\", evt => {\n\t\t\t\t\tlet evtx = evt.parent;\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tif (evtx?.name === \"recover\" && evtx?.source === player && !Object.isEmpty(evtx?.getParent(\"phaseUse\"))) recoverPlayer.add(evtx.player);\n\t\t\t\t});\n\n\t\t\t\tfor (let char of game.players.concat(game.dead)) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tchar.getHistory(\"gain\", evt => {\n\t\t\t\t\t\t\tlet evtx = evt.parent;\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\treturn evtx?.name === \"draw\" && evtx?.source === player && !Object.isEmpty(evtx?.getParent(\"phaseUse\"));\n\t\t\t\t\t\t}).length > 0\n\t\t\t\t\t)\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tdrawPlayer.add(char);\n\t\t\t\t}\n\n\t\t\t\tconsole.log(drawPlayer, recoverPlayer);\n\n\t\t\t\treturn drawPlayer.length + recoverPlayer.length;\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\treturn this.getNum(player) > 0;\n\t\t\t},\n\t\t\tforced: true,\n\t\t\tinit(player) {\n\t\t\t\t//@ts-ignore\n\t\t\t\tgame.broadcastAll(function () {\n\t\t\t\t\t[\"jsrgjishan\", \"dcctjiuxian\", \"newminghuomrfz\"].forEach(skill => {\n\t\t\t\t\t\tlet info = get.info(skill);\n\t\t\t\t\t\tif (!info.audioname2) info.audioname2 = {};\n\t\t\t\t\t\tinfo.audioname2[player.name] = \"huamianmrfz\";\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet num = lib.skill.huamianmrfz.getNum(player);\n\t\t\t\tconsole.log(num);\n\t\t\t\tif (num >= 4) player.addTempSkill(\"newminghuomrfz\", { player: \"phaseJieshuBegin\" });\n\t\t\t\tif (num >= 3) player.addTempSkill(\"dcctjiuxian\", { player: \"phaseJieshuBegin\" });\n\t\t\t\tif (num >= 2) player.addTempSkill(\"jsrgjishan\", { player: \"phaseJieshuBegin\" });\n\t\t\t\tif (num >= 1) player.draw();\n\t\t\t},\n\t\t},\n\t\tnewminghuomrfz: {\n\t\t\taudio: [\"3星结束行动\", \"任命队长\"],\n\t\t\tusable: 1,\n\t\t\ttrigger: {\n\t\t\t\tglobal: [\"dyingAfter\", \"recoverAfter\"],\n\t\t\t},\n\t\t\tforced: true,\n\t\t\tfilter(event, player) {\n\t\t\t\tif (event.name === \"dying\") {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tlet evt = event.getChildren(\"recover\");\n\t\t\t\t\treturn evt?.source === player;\n\t\t\t\t}\n\t\t\t\treturn event?.source === player && event.player.getDamagedHp() === 0;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\t//@ts-ignore\n\t\t\t\tplayer.insertPhase();\n\t\t\t},\n\t\t},\n\t},\n};\n"],"names":["card","player","target","event","trigger","types","i","skills","targets"],"mappings":"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"}