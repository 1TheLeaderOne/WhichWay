{"version":3,"file":"legend1SJZX.js","sources":["../../../../../../../../packages/extension/WhichWay/src/character/packs/legend/legend1SJZX.js"],"sourcesContent":["import { lib, game, ui, get, ai, _status } from \"noname\";\r\n\r\n/**\r\n * 六星武将第一部分\r\n * (都是牢武将了)\r\n */\r\nexport default {\r\n\tcharacter: {\r\n\t\tailinimrfz: [\"female\", \"yimrfz\", 3, [\"zhidengmrfz\", \"shenpanmrfz\", \"liechaomrfz\"], []],\r\n\t\thongxuemrfz: [\"female\", \"luomrfz\", 4, [\"ruibimrfz\", \"sujimrfz\"], []],\r\n\t\txiaoyangmrfz: [\"female\", \"laimrfz\", 3, [\"qingyanmrfz\", \"luanhuomrfz\"], []],\r\n\t\tyinhuimrfz: [\"male\", \"xiemrfz\", 4, [\"xuebianmrfz\", \"tonghemrfz\"], []],\r\n\t\tlingzhimrfz: [\"male\", \"xiemrfz\", 4, [\"siyongmrfz\"], []],\r\n\t\tliumingmrfz: [\"male\", \"yimrfz\", 4, [\"fanyuanmrfz\", \"yingjimrfz\", \"new_weiguangmrfz\"], []],\r\n\t\tchizuimrfz: [\"female\", \"xumrfz\", 4, [\"newzhidianmrfz\", \"newpijimrfz\"], []],\r\n\t\tniyanmrfz: [\"female\", \"luomrfz\", 4, [\"sutumrfz\", \"wotumrfz\"], []],\r\n\t\tchengshanmrfz: [\"female\", \"luomrfz\", 3, [\"dianshanmrfz\", \"shidemrfz\"], []],\r\n\t\twmrfz: [\"female\", \"bamrfz\", 3, [\"fukemrfz\", \"zhumengmrfz3\"], []],\r\n\t\t// spsikadimrfz: [\"female\", \"haimrfz\", 4, [\"qianximrfz\"], []],\r\n\t\tsikadimrfz: [\"female\", \"liemrfz\", 4, [\"jingliemrfz\", \"shulangmrfz\", \"tongmaimrfz\"], [\"clan:深海猎人\"]],\r\n\t\tspdegoumrfz: [\"female\", \"qimrfz\", 4, [\"laoyingmrfz\", \"yushimrfz\"], []],\r\n\t\tmaennamrfz: [\"male\", \"kamrfz\", 4, [\"lianmangmrfz\", \"zhanmangmrfz\", \"xingyimrfz\"], []],\r\n\t\tsplinguangmrfz: [\"female\", \"kamrfz\", 4, [\"zhuguangmrfz\", \"kuanmrfz\", \"shuoguangmrfz\"], []],\r\n\t\tkaierximrfz: [\"female\", \"luomrfz\", 3, [\"yuanlvemrfz\", \"chonggoumrfz\", \"yuanshimrfz\", \"m3mrfz\"], [\"zhu\"]],\r\n\t\tshanmrfz: [\"male\", \"gemrfz\", 4, [\"zhefumrfz\", \"yubianmrfz\"], []],\r\n\t\tgeleidiyamrfz: [\"female\", \"liemrfz\", \"3/4\", [\"quliemrfz\", \"newxunxiangmrfz\", \"xueshuomrfz\", \"tongmaimrfz\"], [\"clan:深海猎人\"]],\r\n\t\tchenmrfz: [\"female\", \"longmrfz\", 4, [\"danweimrfz\", \"hechimrfz\", \"jueyingmrfz\", \"newjingsimrfz\"], [\"zhu\"]],\r\n\t\txingxiongmrfz: [\"female\", \"longmrfz\", \"4/5\", [\"xinboremrfz\", \"xinyizhongmrfz\"], []],\r\n\t\tkanielianmrfz: [\"female\", \"laimrfz\", 3, [\"shazhenmrfz\", \"shacanmrfz\", \"shahuanmrfz\"], []],\r\n\t\tkuiyingmrfz: [\"male\", \"weimrfz\", 3, [\"xuyingmrfz\", \"xuegemrfz\", \"huanxiangmrfz\"], []],\r\n\t\tmositimamrfz: [\"female\", \"lamrfz\", 3, [\"shishimrfz\", \"huanshimrfz\"], []],\r\n\t\tkeebomrfz: [\"female\", \"luomrfz\", 3, [\"jiemimrfz\", \"shihuangmrfz\", \"baokemrfz\"], []],\r\n\t\tfeiyameitamrfz: [\"female\", \"lamrfz\", 4, [\"shunanmrfz\"], []],\r\n\t\tjicimrfz: [\"male\", \"yimrfz\", 4, [\"jihumrfz\", \"re_jianshumrfz\"], []],\r\n\t\t// yeyingmrfz: [\r\n\t\t// \t\"female\",\r\n\t\t// \t\"shimrfz\",\r\n\t\t// \t\"3/3/1\",\r\n\t\t// \t[\"qiulongmrfz\", \"bihumrfz\", \"shengyumrfz\"],\r\n\t\t// \t[],\r\n\t\t// ],\r\n\t\thelagemrfz: [\"male\", \"wumrfz\", 4, [\"yingkuimrfz\", \"cangfengmrfz\", \"yuexiangmrfz\"], []],\r\n\t\twendimrfz: [\"female\", \"luomrfz\", 4, [\"jiangpaomrfz\", \"newdanpaomrfz\"], []],\r\n\t\tsenranmrfz: [\"female\", \"samrfz\", \"3/5\", [\"juezhanmrfz\", \"shanxiemrfz\", \"tieyimrfz\"], []],\r\n\t\tashmrfz: [\"female\", \"othermrfz\", \"3/3/1\", [\"baigeimrfz\", \"wusumrfz\", \"wutoumrfz\"], []],\r\n\t\tkamimrfz: [\"male\", \"samrfz\", 3, [\"dianlianmrfz\", \"shazumrfz\", \"leibaomrfz\"], []],\r\n\t\tnianmrfz: [\"female\", \"suimrfz\", 4, [\"zhujimrfz\", \"tongyinmrfz\", \"tieyumrfz\"], []],\r\n\t\tlingmrfz: [\"female\", \"suimrfz\", 3, [\"shixingmrfz\", \"zuimengmrfz\", \"haojiumrfz\"], []],\r\n\t\tfengdimrfz: [\"female\", \"weimrfz\", 4, [\"newjuntongmrfz\", \"newpochengmrfz\"], []],\r\n\t\tqinliumrfz: [\"female\", \"weimrfz\", 3, [\"junqimrfz\", \"butuimrfz\", \"zhiqimrfz\"], []],\r\n\t\tlaolimrfz: [\"male\", \"limrfz\", 3, [\"linhuamrfz\", \"mingshimrfz\", \"jixiongmrfz\"], []],\r\n\t\tamrfz: [\"male\", \"limrfz\", \"3/4/1\", [\"guaijiemrfz\", \"guaiyaomrfz\", \"qizhenmrfz\"], []],\r\n\t\theimrfz: [\"female\", \"ximrfz\", 4, [\"heishimrfz\", \"ruitongmrfz\", \"junumrfz\"], []],\r\n\t\tchongyuemrfz: [\"male\", \"suimrfz\", 3, [\"shubianmrfz\", \"wubenmrfz\", \"wowumrfz\"], []],\r\n\t\tanjielinamrfz: [\"female\", \"xumrfz\", 3, [\"xinshimrfz\", \"fanzhongmrfz\"], []],\r\n\t\thaojiaomrfz: [\"female\", \"weimrfz\", 4, [\"xuezhanmrfz\", \"dunpaomrfz\", \"biaohaomrfz\"], []],\r\n\t\txigymrfz: [\"female\", \"suimrfz\", 3, [\"huijuanmrfz\", \"dianjingmrfz\", \"cangjuanmrfz\"], []],\r\n\t\tyanweimrfz: [\"female\", \"hongmrfz\", 4, [\"fengjianmrfz\", \"hongsongmrfz\"], []],\r\n\t\tnengtianshimrfz: [\"female\", \"qimrfz\", \"3/3/1\", [\"lianshemrfz\", \"guozaimrfz\"], []],\r\n\t\tyuanyamrfz: [\"female\", \"hongmrfz\", 4, [\"bingximrfz\", \"ningshenmrfz\", \"yuanmengmrfz\"], []],\r\n\t\tmidiexiangmrfz: [\"female\", \"luomrfz\", 3, [\"zhangyimrfz\", \"chongjimrfz\", \"nianshoumrfz\"], []],\r\n\t\tspzzxpmrfz: [\"female\", \"luomrfz\", 3, [\"yuyunmrfz\", \"shuiqiangmrfz\", \"jianfengmrfz\"], []],\r\n\t\tshuiyuemrfz: [\"male\", \"dongmrfz\", 3, [\"liqunmrfz\", \"chuangshangmrfz\", \"jinghuamrfz\"], []],\r\n\t\tspyoulingshamrfz: [\"female\", \"liemrfz\", 3, [\"xinyongwomrfz\", \"douzhengmrfz\", \"shensuimrfz\", \"tongmaimrfz\"], [\"clan:深海猎人\"]],\r\n\t\tqiubaimrfz: [\"female\", \"yanmrfz\", 4, [\"ruximrfz\", \"wenxuemrfz\"], []],\r\n\t\tbaitiemrfz: [\"male\", \"weimrfz\", 4, [\"jigongmrfz\", \"jiefeimrfz\"], []],\r\n\t\tweinamrfz: [\"female\", \"weimrfz\", 4, [\"fensuimrfz\", \"yuechuimrfz\"], []],\r\n\t\tsiyemrfz: [\"male\", \"xumrfz\", 1, [\"qunxingmrfz\", \"langqunmrfz\"], []],\r\n\t\tspjiaweiermrfz: [\"female\", \"luomrfz\", 4, [\"yixuemrfz\", \"juximrfz\", \"conghunmrfz\"], []],\r\n\t\tsemrfz: [\"female\", \"luomrfz\", 4, [\"mojianmrfz\", \"huanghunmrfz\", \"yujinmrfz\"], []],\r\n\t\tlinmrfz: [\"female\", \"yanmrfz\", 3, [\"zhenzamrfz\", \"liuliemrfz\", \"yinbimrfz\"], []],\r\n\t\tduoluoximrfz: [\"female\", \"lymrfz\", 3, [\"newgongzhenmrfz\", \"newmengxiangmrfz\"], []],\r\n\t\tkongxianmrfz: [\"female\", \"lamrfz\", \"3/3/1\", [\"sanyimrfz\", \"baofengmrfz\", \"tiexianmrfz\"], []],\r\n\t\tspyedaomrfz: [\"female\", \"othermrfz\", \"3/4\", [\"luanwumrfz\"], []],\r\n\t\tyineisimrfz: [\"female\", \"luomrfz\", 3, [\"yingzhimrfz\", \"yingshaomrfz\"], []],\r\n\t\tmiumiumrfz: [\"female\", \"lymrfz\", 3, [\"yuanliumrfz\", \"shuilingmrfz\", \"xinjingshuimrfz\"], []],\r\n\t\theijianmrfz: [\"male\", \"laimrfz\", 3, [\"newhuangxiangmrfz\", \"newjiyinmrfz\"], []],\r\n\t\tyifulitemrfz: [\"female\", \"lymrfz\", 3, [\"yanmomrfz\", \"yanbaomrfz\", \"huishenmrfz\"], []],\r\n\t\tsphemomrfz: [\"female\", \"lymrfz\", 3, [\"renbenmrfz\", \"dizhumrfz\"], []],\r\n\t\tsaileiyamrfz: [\"female\", \"lymrfz\", \"3/4\", [\"panshimrfz\", \"newgaihuamrfz\"], []],\r\n\t\t// spweicaomrfz: [\r\n\t\t// \t\"female\",\r\n\t\t// \t\"shenmrfz\",\r\n\t\t// \t3,\r\n\t\t// \t[\"zhuohenmrfz\", \"yingyaomrfz\", \"minghuomrfz\"],\r\n\t\t// \t[],\r\n\t\t// ],\r\n\t\thuangmrfz: [\"female\", \"luomrfz\", 4, [\"newyanxunmrfz\", \"newfeixuemrfz\"], []],\r\n\t\t// huoerhaiyamrfz: [\r\n\t\t// \t\"female\",\r\n\t\t// \t\"gemrfz\",\r\n\t\t// \t3,\r\n\t\t// \t[\"xinkuangyumrfz\", \"xinchuanzhongmrfz\"],\r\n\t\t// \t[],\r\n\t\t// ],\r\n\t\tlinglanmrfz: [\"female\", \"xumrfz\", 3, [\"newhualaomrfz\", \"newhemingmrfz\", \"wuyuemrfz\"], []],\r\n\t\tshanlingmrfz: [\"female\", \"shimrfz\", 4, [\"yubimrfz\", \"jiushumrfz\", \"lichangmrfz\"], []],\r\n\t\tmaizhelunmrfz: [\"female\", \"lymrfz\", 3, [\"kanchamrfz\", \"longtengmrfz\"], []],\r\n\t\tpalasimrfz: [\"female\", \"mimrfz\", 4, [\"yingzhumrfz\", \"yingdanmrfz\", \"yingfenmrfz\"], []],\r\n\t\txiaguangmrfz: [\"female\", \"kamrfz\", 4, [\"rencimrfz\", \"huiguangmrfz\", \"jiandunmrfz\"], []],\r\n\t\tzaolumrfz: [\"female\", \"wumrfz\", 4, [\"zhongxiemrfz\", \"rusuimrfz\"], []],\r\n\t\tspshihuaiyamrfz: [\"female\", \"longmrfz\", 3, [\"mianzaimrfz\", \"zhijinmrfz\"], []],\r\n\t\tspsongzangrenmrfz: [\"male\", \"lamrfz\", 3, [\"chongdanmrfz\", \"tianxuanmrfz\", \"shengcaimrfz\"], []],\r\n\t\tspjiexikamrfz: [\"female\", \"gemrfz\", 4, [\"yijiemrfz\", \"fuhuangmrfz\"], []],\r\n\t\t// tifengmrfz: [\r\n\t\t// \t\"female\",\r\n\t\t// \t\"samimrfz\",\r\n\t\t// \t4,\r\n\t\t// \t[\"ruiyamrfz\", \"shouliemrfz\"],\r\n\t\t// \t[],\r\n\t\t// ],\r\n\t\tweiweiannamrfz: [\"female\", \"laimrfz\", 4, [\"zhanjumrfz\", \"zhuhuomrfz\", \"yunjiaomrfz\"], []],\r\n\t\tspxiaoyangmrfz: [\"female\", \"laimrfz\", 3, [\"lvmengmrfz\", \"rechenmrfz\"], []],\r\n\t\tsuxinmrfz: [\"female\", \"lamrfz\", 3, [\"qinmingmrfz\", \"kongwomrfz\"], []],\r\n\t\thedeleimrfz: [\"male\", \"luomrfz\", \"4/6\", [\"zhengrongmrfz\", \"siyanmrfz\"], []],\r\n\t\tzhisongmrfz: [\"male\", \"laimrfz\", 4, [\"kuxiumrfz\", \"lirenmrfz\"], []],\r\n\t\tjianmrfz: [\"female\", \"xiemrfz\", 4, [\"weiyamrfz\", \"zhiwumrfz\"], []],\r\n\t\tlaiyimrfz: [\"female\", \"leimrfz\", 3, [\"shaobanmrfz\", \"tankuangmrfz\"], []],\r\n\t\tshumrfz: [\"female\", \"suimrfz\", 3, [\"kenyemrfz\", \"heyingmrfz\", \"rancuimrfz\"], []],\r\n\t\tzuolemrfz: [\"male\", \"yanmrfz\", \"4/5\", [\"qikumrfz\", \"bingzhumrfz\"], []],\r\n\t\telamrfz: [\"female\", \"othermrfz\", 3, [\"leimingmrfz\", \"zuzhimrfz\"], []],\r\n\t\tasikalunmrfz: [\"female\", \"luomrfz\", 3, [\"dunyingmrfz\", \"niximrfz\"], []],\r\n\t\tluogesimrfz: [\"male\", \"luomrfz\", 3, [\"baidumrfz\", \"yuhuimrfz\"], []],\r\n\t\tweishidaiermrfz: [\"female\", \"bamrfz\", 3, [\"yuximrfz\", \"haolimrfz\", \"shezumrfz\"], []],\r\n\t\tmowangmrfz: [\"female\", \"luomrfz\", 3, [\"duanzhangmrfz\", \"chenaimrfz\", \"canxiangmrfz\"], []],\r\n\t\twuerbianmrfz: [\"male\", \"a_groupmrfz\", 4, [\"guqianmrfz\", \"piweimrfz\", \"tongmaimrfz\"], [\"clan:深海猎人\"]],\r\n\t\tnifumrfz: [\"female\", \"luomrfz\", 3, [\"xunxinmrfz\", \"chixinmrfz\", \"kuixinmrfz\"], []],\r\n\t\tnarentuyamrfz: [\"female\", \"samrfz\", \"4/6\", [\"eyanmrfz\", \"shafeimrfz\"], []],\r\n\t\tpeipeimrfz: [\"female\", \"samrfz\", 3, [\"boqingmrfz\", \"kuisuimrfz\", \"lianwenmrfz\"], []],\r\n\t\tmaluxiermrfz: [\"female\", \"othermrfz\", 3, [\"kumomrfz\", \"cainvmrfz\", \"cangshumrfz\"], []],\r\n\t\tspweinamrfz: [\"female\", \"weimrfz\", 4, [\"zhongyuanmrfz\", \"futumrfz\", \"wangximrfz\"], []],\r\n\t\tsplapulandemrfz: [\"female\", \"xumrfz\", 3, [\"shilangmrfz\", \"toulangmrfz\", \"kuanglangmrfz\"], []],\r\n\t\trendongmrfz: [\"female\", \"xumrfz\", 4, [\"yinhumrfz\", \"zhuixiongmrfz\"], []],\r\n\t\tshijunzhemrfz: [\"female\", \"xumrfz\", 4, [\"fengyanmrfz\", \"weimingmrfz\"], []],\r\n\t\tspjicimrfz: [\"male\", \"yimrfz\", 3, [\"xinxiangmrfz\", \"haijiangmrfz\", \"fanyangmrfz\"], []],\r\n\t\tyumrfz: [\"male\", \"suimrfz\", 4, [\"qizaomrfz\", \"zhonglemrfz\"], []],\r\n\t\tzhuhuangmrfz: [\"female\", \"yanmrfz\", \"4/5\", [\"chongrangmrfz\", \"zhuoyanmrfz\", \"liaoyuanmrfz\"], []],\r\n\t},\r\n\tskill: {\r\n\t\t//艾丽妮\r\n\t\tzhidengmrfz: {\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseZhunbeiBegin\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar num = player.hp;\r\n\t\t\t\tplayer.chooseTarget(get.prompt2(\"zhidengmrfz\"), [0, num], function (card, player, target) {\r\n\t\t\t\t\treturn target.hp <= player.hp;\r\n\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar targets;\r\n\t\t\t\t\tif (event.versus) {\r\n\t\t\t\t\t\ttargets = game.filterPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn current != player && current.side == player.side;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttargets = result.targets;\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tplayer.logSkill(\"zhidengmrfz\", targets);\r\n\t\t\t\t\tgame.asyncDraw(targets);\r\n\t\t\t\t\tif (!player.storage._sjzxAch_denghuoweimingmrfz) player.storage._sjzxAch_denghuoweimingmrfz = 0;\r\n\t\t\t\t\tif (targets.length >= 2) player.storage._sjzxAch_denghuoweimingmrfz++;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tshenpanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn player.canCompare(target);\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.chooseToCompare(target);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\ttarget.addTempSkill(\"shenpanmrfz2\");\r\n\t\t\t\t\tplayer.addTempSkill(\"shenpanmrfz3\");\r\n\t\t\t\t\tplayer.storage.shenpanmrfz3 = target;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 10,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: function (player) {\r\n\t\t\t\t\t\tif (player.countCards(\"h\", \"sha\") > 0) return 0.6;\r\n\t\t\t\t\t\tvar num = player.countCards(\"h\");\r\n\t\t\t\t\t\tif (num > player.hp) return 0;\r\n\t\t\t\t\t\tif (num == 1) return -2;\r\n\t\t\t\t\t\tif (num == 2) return -1;\r\n\t\t\t\t\t\treturn -0.7;\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tvar num = target.countCards(\"h\");\r\n\t\t\t\t\t\tif (num == 1) return -1;\r\n\t\t\t\t\t\tif (num == 2) return -0.7;\r\n\t\t\t\t\t\treturn -0.5;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tthreaten: 1.3,\r\n\t\t\t},\r\n\t\t},\r\n\t\tshenpanmrfz2: {\r\n\t\t\tcharlotte: true,\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"伊比利亚审判庭裁决你为异端\",\r\n\t\t\t},\r\n\t\t},\r\n\t\tshenpanmrfz3: {\r\n\t\t\tmod: {\r\n\t\t\t\tglobalFrom: function (from, to) {\r\n\t\t\t\t\tif (to == from.storage.shenpanmrfz3) {\r\n\t\t\t\t\t\treturn -Infinity;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tcharlotte: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.target.hasSkill(\"shenpanmrfz2\") && event.target.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.player) < 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\ttrigger.target.chooseToDiscard(\"he\", true, 1);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.cards.length == 1) {\r\n\t\t\t\t\tevent._result = {\r\n\t\t\t\t\t\tbool: true,\r\n\t\t\t\t\t\tlinks: result.cards.slice(0),\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (result.links) player.gain(result.links, \"gain2\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tliechaomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tsource: \"damageBegin3\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event) {\r\n\t\t\t\tif (event.parent.name == \"_lianhuan\" || event.parent.name == \"_lianhuan2\") return false;\r\n\t\t\t\tif (event.card) {\r\n\t\t\t\t\tif (event.player.countCards(\"he\") == 0) return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.num++;\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\teffect: {\r\n\t\t\t\t\tplayer: function (card, player, target, current) {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tcard.name == \"sha\" &&\r\n\t\t\t\t\t\t\ttarget.countCards(\"h\") == 0 &&\r\n\t\t\t\t\t\t\t!target.hasSkillTag(\"filterDamage\", null, {\r\n\t\t\t\t\t\t\t\tplayer: player,\r\n\t\t\t\t\t\t\t\tcard: card,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\treturn [1, 0, 1, -3];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//鸿雪\r\n\t\truibimrfz: {\r\n\t\t\taudio: 3,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tderivation: [\"dazijimrfzskill\"],\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.countCards(\"he\") > 0 &&\r\n\t\t\t\t\t!player.isDisabled(1) &&\r\n\t\t\t\t\t!player.hasCard(function (card) {\r\n\t\t\t\t\t\treturn card.name == \"dazijimrfz\";\r\n\t\t\t\t\t}, \"e\")\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tfilterCard: true,\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar card = game.createCard(\"dazijimrfz\", \"heart\", 2);\r\n\t\t\t\tplayer.$gain2(card);\r\n\t\t\t\tgame.delayx();\r\n\t\t\t\tplayer.equip(card);\r\n\t\t\t},\r\n\t\t\tgroup: \"ruibimrfz2\",\r\n\t\t\tai: {\r\n\t\t\t\torder: 12,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\truibimrfz2: {\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.isDisabled(1) && (event.name != \"phase\" || game.phaseNumber == 0);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar card = game.createCard(\"dazijimrfz\", \"heart\", 2);\r\n\t\t\t\tplayer.$gain2(card);\r\n\t\t\t\tgame.delayx();\r\n\t\t\t\tplayer.equip(card);\r\n\t\t\t\tplayer.removeSkill(\"ruibimrfz2\");\r\n\t\t\t\tplayer.logSkill(\"ruibimrfz\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tsujimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tsource: \"damageSource\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.player == player) return false;\r\n\t\t\t\tif (event.card.name != \"sha\" || !player.isPhaseUsing()) return false;\r\n\t\t\t\treturn event.player.isAlive();\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.player.addSkill(\"sujimrfz2\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"sujimrfz_damage\"],\r\n\t\t},\r\n\t\tsujimrfz2: {\r\n\t\t\tcharlotte: true,\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"鸿雪记住了你的弱点\",\r\n\t\t\t},\r\n\t\t},\r\n\t\tsujimrfz_damage: {\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!event.card || event.card.name != \"sha\" || player.hasSkill(\"sujimrfz_damage_ban\")) return false;\r\n\t\t\t\tfor (var i = 0; i < event.targets.length; i++) {\r\n\t\t\t\t\tvar target = event.targets[i];\r\n\t\t\t\t\tif (target.hasSkill(\"sujimrfz2\")) return true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tfor (var i = 0; i < trigger.targets.length; i++) {\r\n\t\t\t\t\tvar target = trigger.targets[i];\r\n\t\t\t\t\tif (target.hasSkill(\"sujimrfz2\")) {\r\n\t\t\t\t\t\ttarget.addTempSkill(\"qinggang2\");\r\n\t\t\t\t\t\ttarget.storage.qinggang2.add(trigger.card);\r\n\t\t\t\t\t\ttarget.markSkill(\"qinggang2\");\r\n\t\t\t\t\t\ttarget.addTempSkill(\"sujimrfz_damage_add\");\r\n\t\t\t\t\t\ttarget.storage.sujimrfz_damage = {\r\n\t\t\t\t\t\t\tcard: trigger.card,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tplayer.addTempSkill(\"sujimrfz_damage_ban\", \"phaseEnd\");\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tadd: {\r\n\t\t\t\t\tonremove: function (player) {\r\n\t\t\t\t\t\tdelete player.storage.sujimrfz_damage;\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"damageBegin3\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar info = player.storage.sujimrfz_damage;\r\n\t\t\t\t\t\treturn event.card && event.card == info.card;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t\tplayer.logSkill(\"sujimrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//艾雅法拉\r\n\t\tcuofengmrfz: {\r\n\t\t\tgroup: [\"cuofengmrfz_mark1\", \"cuofengmrfz_mark2\"],\r\n\t\t\taudio: 2,\r\n\t\t\tpreHidden: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"damageEnd\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar num = player.countMark(\"cuofengmrfz_mark1\") + player.countMark(\"cuofengmrfz_mark2\");\r\n\t\t\t\tif (num >= player.maxHp - 1) return false;\r\n\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar list = [\"摸牌阶段\", \"结束阶段\"];\r\n\t\t\t\tplayer.chooseControl(list, function () {});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.control == \"摸牌阶段\") {\r\n\t\t\t\t\tplayer.addMark(\"cuofengmrfz_mark1\", 1, false);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.addMark(\"cuofengmrfz_mark2\", 1, false);\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tplayer.chooseToDiscard(\"he\", true, 1);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tmaixie: true,\r\n\t\t\t\tmaixie_hp: true,\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget: function (card, player, target) {\r\n\t\t\t\t\t\tif (player.hasSkillTag(\"jueqing\", false, target)) return [1, -1];\r\n\t\t\t\t\t\tif (get.tag(card, \"damage\")) return [1, 0.55];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tcuofengmrfz_mark1: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"摸牌阶段额外摸#张牌\",\r\n\t\t\t},\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseDrawBegin2\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"cuofengmrfz_mark1\") > 0;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar num = player.countMark(\"cuofengmrfz_mark1\");\r\n\t\t\t\ttrigger.num += num;\r\n\t\t\t},\r\n\t\t},\r\n\t\tcuofengmrfz_mark2: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"结束阶段摸#张牌\",\r\n\t\t\t},\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseJieshuBegin\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"cuofengmrfz_mark2\") > 0;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar num = player.countMark(\"cuofengmrfz_mark2\");\r\n\t\t\t\tplayer.draw(num);\r\n\t\t\t},\r\n\t\t},\r\n\t\tchengzhimrfz: {\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationColor: \"wood\",\r\n\t\t\taudio: 2,\r\n\t\t\tjuexingji: true,\r\n\t\t\tunique: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseZhunbeiBegin\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar num = player.countMark(\"cuofengmrfz_mark1\") + player.countMark(\"cuofengmrfz_mark2\");\r\n\t\t\t\tif (num != player.maxHp - 1) return false;\r\n\t\t\t\treturn !player.storage.chengzhimrfz;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.loseMaxHp();\r\n\t\t\t\tplayer.addSkill(\"zhuzhimrfz\");\r\n\t\t\t\tgame.log(player, \"获得了技能\", \"#g【逐志】\");\r\n\t\t\t\tplayer.awakenSkill(event.name);\r\n\t\t\t\tplayer.storage[event.name] = true;\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhuzhimrfz: {\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseZhunbeiBegin\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.hp == 1 && player.countCards(\"he\") <= 0) return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tif (player.hp > 1) {\r\n\t\t\t\t\tplayer.damage(\"fire\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.chooseToDiscard(\"he\", true, 1);\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tvar num1 = player.countMark(\"cuofengmrfz_mark1\") + player.countMark(\"cuofengmrfz_mark2\");\r\n\t\t\t\tvar num2 = Math.floor(num1 / 2);\r\n\t\t\t\tplayer.addTempSkill(\"zhuzhimrfz_mark\", {\r\n\t\t\t\t\tplayer: \"phaseAfter\",\r\n\t\t\t\t});\r\n\t\t\t\tplayer.draw(num2);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tbasic: {\r\n\t\t\t\t\torder: 1,\r\n\t\t\t\t},\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: function (player) {\r\n\t\t\t\t\t\tif (player.hp < 2) return -1;\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhuzhimrfz_mark: {\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"黑暗追着她，她追着光。\",\r\n\t\t\t},\r\n\t\t\tinit: function (player, skill) {\r\n\t\t\t\tif (!player.storage[skill]) player.storage[skill] = 0;\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\tvar n = player.countMark(\"cuofengmrfz_mark1\") + player.countMark(\"cuofengmrfz_mark2\");\r\n\t\t\t\t\treturn num + n;\r\n\t\t\t\t},\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tvar n = player.countMark(\"cuofengmrfz_mark1\") + player.countMark(\"cuofengmrfz_mark2\");\r\n\t\t\t\t\tif (card.name == \"sha\") return num - 1 + n;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//银灰\r\n\t\tmoucunmrfz: {\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"roundStart\",\r\n\t\t\t},\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"【鹰视】中的X为#。\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.line2(\r\n\t\t\t\t\tgame\r\n\t\t\t\t\t\t.filterPlayer(function (current) {\r\n\t\t\t\t\t\t\tif (current.hasSkill(\"moucunmrfz3\")) {\r\n\t\t\t\t\t\t\t\tcurrent.removeSkill(\"moucunmrfz3\");\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.concat(result.targets),\r\n\t\t\t\t\t\"green\"\r\n\t\t\t\t);\r\n\t\t\t\tplayer.removeMark(\"moucunmrfz2\", player.countMark(\"moucunmrfz2\"));\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tplayer.chooseCardTarget({\r\n\t\t\t\t\tprompt: \"请交给一名其他角色一至两张牌\",\r\n\t\t\t\t\tfilterCard: true,\r\n\t\t\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\t\t\tvar group = game.me.group;\r\n\t\t\t\t\t\treturn player != target && target.group !== group;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai1: function (card) {\r\n\t\t\t\t\t\treturn 10 - get.value(card);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai2: function (target) {\r\n\t\t\t\t\t\tif (get.attitude(player, target) <= 0) return get.attitude(player, target);\r\n\t\t\t\t\t\treturn get.attitude(player, target) > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tselectCard: [1, 2],\r\n\t\t\t\t\tposition: \"he\",\r\n\t\t\t\t});\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tresult.targets[0].gain(result.cards, player, \"giveAuto\");\r\n\t\t\t\t\tresult.targets[0].addSkill(\"moucunmrfz3\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"moucunmrfz2\",\r\n\t\t},\r\n\t\tyingshimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => lib.skill.yingshimrfz.filterTarget(null, player, current));\r\n\t\t\t},\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar num = player.countMark(\"moucunmrfz\");\r\n\t\t\t\tif (num < 1) {\r\n\t\t\t\t\tplayer.viewHandcards(target);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar max = target.countCards(\"h\");\r\n\t\t\t\t\tif (max > num) return player.gainPlayerCard(num, target, \"h\", true, \"visible\");\r\n\t\t\t\t\tif (num >= max) return player.gainPlayerCard(max, target, \"h\", true, \"visible\");\r\n\t\t\t\t}\r\n\t\t\t\tgame.log(player, \"观看了\", target, \"的手牌\");\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 6,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 0.5,\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tif (target.hasSkillTag(\"noh\")) return 0;\r\n\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tmoucunmrfz2: {\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseUseEnd\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!event.player.hasSkill(\"moucunmrfz3\")) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tevent.player.getHistory(\"useCard\", function (evt) {\r\n\t\t\t\t\t\treturn evt.getParent(\"phaseUse\") == event;\r\n\t\t\t\t\t}).length > 0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar list = [];\r\n\t\t\t\tplayer.logSkill(\"moucunmrfz\");\r\n\t\t\t\ttrigger.player.getHistory(\"useCard\", function (evt) {\r\n\t\t\t\t\tif (evt.getParent(\"phaseUse\") == trigger) list.add(get.type2(evt.card));\r\n\t\t\t\t});\r\n\t\t\t\tplayer.draw(list.length);\r\n\t\t\t\tif (list.length > 2) {\r\n\t\t\t\t\tplayer.addMark(\"moucunmrfz\", 1, false);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tmoucunmrfz3: {\r\n\t\t\tcharlotte: true,\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"银灰前来求学\",\r\n\t\t\t},\r\n\t\t},\r\n\t\t//灵知\r\n\t\tsiyongmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"loseEnd\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.getParent().name != \"useCard\" || player != _status.currentPhase) return false;\r\n\t\t\t\tvar list = player.getStorage(\"siyongmrfz2\");\r\n\t\t\t\tfor (var i of event.cards) {\r\n\t\t\t\t\tif (!list.includes(get.suit(i, player))) return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tif (!player.storage.siyongmrfz2) player.storage.siyongmrfz2 = [];\r\n\t\t\t\tfor (var i of trigger.cards) player.storage.siyongmrfz2.add(get.suit(i, player));\r\n\t\t\t\tplayer.storage.siyongmrfz2.sort();\r\n\t\t\t\tplayer.addTempSkill(\"siyongmrfz2\");\r\n\t\t\t\tplayer.markSkill(\"siyongmrfz2\");\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (\r\n\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && current.countCards(\"he\") > 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t) {\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.chooseTarget(\"请选择一名其他角色获得其一张牌\", true, function (card, player, target) {\r\n\t\t\t\t\t\t\treturn target != player && target.countCards(\"he\") > 0;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\tvar att = get.attitude(player, target);\r\n\t\t\t\t\t\t\tif (att >= 0) return 0;\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\ttarget.countCards(\"he\", function (card) {\r\n\t\t\t\t\t\t\t\t\treturn get.value(card) > 5;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn -att;\r\n\t\t\t\t\t\t\treturn Math.random();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\tplayer.gainPlayerCard(1, target, \"he\", true);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t},\r\n\t\tsiyongmrfz2: {\r\n\t\t\tonremove: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"当前已使用花色：$\",\r\n\t\t\t},\r\n\t\t},\r\n\t\t//旧流明\r\n\t\tyijianmrfz: {\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"damageBegin\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\tusable: 1,\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.num--;\r\n\t\t\t},\r\n\t\t},\r\n\t\tweiguangmrfz: {\r\n\t\t\taudio: \"new_weiguangmrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseZhunbeiBegin\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tglobal: [\"weiguangmrfz_mark\", \"weiguangmrfz_losemark\"],\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.hasMark(\"weiguangmrfz_mark\");\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.addMark(\"weiguangmrfz_mark\", 1);\r\n\t\t\t},\r\n\t\t\tgroup: \"weiguangmrfz2\",\r\n\t\t},\r\n\t\tweiguangmrfz_mark: {\r\n\t\t\tmarktext: \"火光\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"火光\",\r\n\t\t\t\tcontent: \"流明希望人们能有余力擦去脸上的灰尘\",\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tif (card.name == \"sha\") return num + player.countMark(\"weiguangmrfz_mark\");\r\n\t\t\t\t},\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\treturn num + player.countMark(\"weiguangmrfz_mark\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseDrawBegin2\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.hasMark(\"weiguangmrfz_mark\");\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.num += player.countMark(\"weiguangmrfz_mark\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tweiguangmrfz_losemark: {\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseJieshuBegin\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tcharlotte: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.hasMark(\"weiguangmrfz_mark\");\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.drawTo(Math.min(5, player.getHandcardLimit()));\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tplayer.removeMark(\"weiguangmrfz_mark\", 1);\r\n\t\t\t\tplayer.logSkill(\"new_weiguangmrfz\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tweiguangmrfz2: {\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilterTarget: 1,\r\n\t\t\tprompt: \"选择一名角色令其获得一个“火光”标记并对自己造成一点伤害，若该角色是你，你流失一点体力\",\r\n\t\t\tcontent: function () {\r\n\t\t\t\tif (target == player) {\r\n\t\t\t\t\tplayer.loseHp();\r\n\t\t\t\t}\r\n\t\t\t\tplayer.damage();\r\n\t\t\t\ttarget.addMark(\"weiguangmrfz_mark\");\r\n\t\t\t\tplayer.logSkill(\"new_weiguangmrfz\");\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 9,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tif (target.countCards(\"h\") > 2) return 5;\r\n\t\t\t\t\t\tif (player == target && player.getDamagedHp() == 0) return 5;\r\n\t\t\t\t\t\treturn 2;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tthreaten: 2,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//斥罪\r\n\t\tzhidianmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"roundStart\",\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar list = lib.inpile;\r\n\t\t\t\tvar list2 = [];\r\n\t\t\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\t\t\tvar name = list[i];\r\n\t\t\t\t\tif (name == \"shan\" || name == \"wuxie\") continue;\r\n\t\t\t\t\tvar type = get.type(name);\r\n\t\t\t\t\tif (name == \"sha\") {\r\n\t\t\t\t\t\tlist2.push([\"基本\", \"\", \"sha\"]);\r\n\t\t\t\t\t\tlist2.push([\"基本\", \"\", \"sha\", \"fire\"]);\r\n\t\t\t\t\t\tlist2.push([\"基本\", \"\", \"sha\", \"thunder\"]);\r\n\t\t\t\t\t} else if (type == \"basic\") {\r\n\t\t\t\t\t\tlist2.push([\"基本\", \"\", list[i]]);\r\n\t\t\t\t\t} else if (type == \"trick\") {\r\n\t\t\t\t\t\tlist2.push([\"锦囊\", \"\", list[i]]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!list.length) event.finish();\r\n\t\t\t\telse\r\n\t\t\t\t\tplayer.chooseButton([get.prompt(\"zhidianmrfz\"), [list, \"vcard\"]]).set(\"ai\", function (button) {\r\n\t\t\t\t\t\tswitch (button.link[2]) {\r\n\t\t\t\t\t\t\tcase \"wuxie\":\r\n\t\t\t\t\t\t\t\treturn 0.6 + Math.random();\r\n\t\t\t\t\t\t\tcase \"wuzhong\":\r\n\t\t\t\t\t\t\tcase \"dongzhuxianji\":\r\n\t\t\t\t\t\t\t\treturn 0.5 + Math.random();\r\n\t\t\t\t\t\t\tcase \"guohe\":\r\n\t\t\t\t\t\t\tcase \"zhujinqiyuan\":\r\n\t\t\t\t\t\t\t\treturn 0.4 + Math.random();\r\n\t\t\t\t\t\t\tcase \"sha\":\r\n\t\t\t\t\t\t\t\treturn 1 + Math.random();\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\treturn Math.random();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar name = result.links[0][2];\r\n\t\t\t\t\tplayer.logSkill(\"zhidianmrfz\");\r\n\t\t\t\t\tplayer.storage.zhidianmrfz = name;\r\n\t\t\t\t\tplayer.markSkill(\"zhidianmrfz\");\r\n\t\t\t\t\tgame.log(player, \"声明了\", \"#g\" + get.translation(name));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"已声明【$】\",\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhidianmrfz_use\"],\r\n\t\t},\r\n\t\tzhidianmrfz_use: {\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"useCard1\",\r\n\t\t\t},\r\n\t\t\tsilent: true,\r\n\t\t\tforced: true,\r\n\t\t\tcharlotte: true,\r\n\t\t\tpopup: false,\r\n\t\t\tfirstDo: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.card.name == player.storage.zhidianmrfz;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar target = trigger.player;\r\n\t\t\t\t(\"step 0\");\r\n\t\t\t\tif (target == player) {\r\n\t\t\t\t\tplayer.chooseToDiscard(\"he\", true, 1);\r\n\t\t\t\t\tplayer.logSkill(\"zhidianmrfz\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (target.countCards(\"he\") == 0) event._result = { index: 1 };\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tvar str = get.translation(player);\r\n\t\t\t\t\t\ttarget.chooseControl().set(\"choiceList\", [\"交给\" + str + \"一张牌\", \"失去一点体力\"]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (target !== player) {\r\n\t\t\t\t\tplayer.logSkill(\"zhidianmrfz\");\r\n\t\t\t\t\tif (result.index == 0) {\r\n\t\t\t\t\t\ttarget.chooseCard(\"he\", true);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttarget.loseHp();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (target !== player) {\r\n\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\ttarget.give(result.cards, player, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tpijimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"damageEnd\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.source == player) return false;\r\n\t\t\t\treturn event.source != undefined;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tlogTarget: \"source\",\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar num = player.maxHp - player.hp;\r\n\t\t\t\tif (num < 2) trigger.source.damage();\r\n\t\t\t\tif (num > 1) trigger.source.damage(2);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tmaixie_defend: true,\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget: function (card, player, target) {\r\n\t\t\t\t\t\tif (player.hasSkillTag(\"jueqing\", false, target)) return [1, -1];\r\n\t\t\t\t\t\treturn 0.8;\r\n\t\t\t\t\t\t// if(get.tag(card,'damage')&&get.damageEffect(target,player,player)>0) return [1,0,0,-1.5];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//泥岩\r\n\t\twotumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCard2\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!event.cards) return false;\r\n\t\t\t\treturn event.cards.length == 0 && !player.hasSkill(\"wotumrfz_ban\");\r\n\t\t\t},\r\n\t\t\tfrequent: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.changeHujia();\r\n\t\t\t\tplayer.addTempSkill(\"wotumrfz_ban\", {\r\n\t\t\t\t\tglobal: \"roundStart\",\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tsutumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardAfter\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!event.card.isCard) return false;\r\n\t\t\t\tif (player.countCards(\"h\") !== player.hp) return false;\r\n\t\t\t\treturn event.cards && event.cards.length == 1;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar list = [];\r\n\t\t\t\tfor (var i = 0; i < lib.inpile.length; i++) {\r\n\t\t\t\t\tvar name = lib.inpile[i];\r\n\t\t\t\t\tif (name == \"sha\") {\r\n\t\t\t\t\t\tlist.push([\"基本\", \"\", \"sha\"]);\r\n\t\t\t\t\t\tfor (var j of lib.inpile_nature) list.push([\"基本\", \"\", \"sha\", j]);\r\n\t\t\t\t\t} else if (get.type(name) == \"basic\") list.push([\"基本\", \"\", name]);\r\n\t\t\t\t\telse if (get.type(name) == \"trick\") list.push([\"锦囊\", \"\", name]);\r\n\t\t\t\t}\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseButton([\"塑土\", [list, \"vcard\"]], true)\r\n\t\t\t\t\t.set(\"ai\", function (button) {\r\n\t\t\t\t\t\tvar player = _status.event.getParent().player,\r\n\t\t\t\t\t\t\tcard = {\r\n\t\t\t\t\t\t\t\tname: button.link[2],\r\n\t\t\t\t\t\t\t\tnature: button.link[3],\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current != player && get.attitude(player, current) < 0 && current.countCards(\"he\") > 0 && get.distance(player, current) < 2;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\treturn \"shunshou\";\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current != player && get.attitude(player, current) < 0 && current.countCards(\"he\") == 0 && player.inRange(current);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\treturn \"sha\";\r\n\t\t\t\t\t\treturn player.getUseValue(card, null, true) * _status.event.att;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"att\", get.attitude(event.target, player) > 0 ? 1 : -1);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar name = result.links[0][2];\r\n\t\t\t\t\tplayer.chooseUseTarget({ name: name, isCard: true }, true);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\t//澄闪\r\n\t\tdianshanmrfz: {\r\n\t\t\tmark: true,\r\n\t\t\tlocked: true,\r\n\t\t\tzhuanhuanji: true,\r\n\t\t\tmarktext: \"☯\",\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (storage, player, skill) {\r\n\t\t\t\t\tif (player.storage.dianshanmrfz !== true) return \"锁定技，当你成为其他角色使用的黑色牌的目标时,你对一名其他角色造成一点雷属性伤害\";\r\n\t\t\t\t\treturn \"锁定技，当你成为其他角色使用的黑色牌的目标时,你弃置一名其他角色一张牌。\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: \"dianyongmrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\ttarget: \"useCardToTargeted\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && !current.countCards(\"he\");\r\n\t\t\t\t\t}) &&\r\n\t\t\t\t\tplayer.storage.dianshanmrfz !== true\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\treturn player != event.player && get.color(event.card) == \"black\";\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.changeZhuanhuanji(\"dianshanmrfz\");\r\n\t\t\t\tif (player.storage.dianshanmrfz == true) {\r\n\t\t\t\t\tplayer.chooseTarget(get.prompt(\"dianshanmrfz\"), \"对一名其他角色造成一点雷属性伤害\", true, function (card, player, target) {\r\n\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\t\treturn -get.attitude(player, target);\r\n\t\t\t\t\t};\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.chooseTarget(get.prompt(\"dianshanmrfz\"), \"弃置一名其他角色一张牌\", true, function (card, player, target) {\r\n\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\t\treturn -get.attitude(player, target);\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tif (player.storage.dianshanmrfz == true) {\r\n\t\t\t\t\t\tresult.targets[0].damage(\"thunder\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tplayer.discardPlayerCard(result.targets[0], 1, \"he\", true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tshidemrfz: {\r\n\t\t\taudio: \"fuxiemrfz\",\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"useCard\", \"respond\", \"loseAfter\"],\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.name != \"lose\") return true;\r\n\t\t\t\tif (event.type != \"discard\") return false;\r\n\t\t\t\tif (event.cards2) {\r\n\t\t\t\t\tfor (var i = 0; i < event.cards2.length; i++) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tif (player.isLinked()) player.link(false);\r\n\t\t\t\telse player.link();\r\n\t\t\t},\r\n\t\t\tgroup: \"shidemrfz_draw\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\taudio: \"shidemrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"linkAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn !player.isLinked();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//w\r\n\t\tfukemrfz: {\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"gainAfter\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (\r\n\t\t\t\t\t!game.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && current.countCards(\"he\") > 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\treturn event.getParent(3).name != \"fukemrfz\";\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar num = trigger.cards.length;\r\n\t\t\t\tplayer.chooseTarget(\r\n\t\t\t\t\tget.prompt(\"fukemrfz\"),\r\n\t\t\t\t\t\"获得至多\" + get.translation(num) + \"名角色的各一张牌，然后弃置等量的牌\",\r\n\t\t\t\t\t[1, num],\r\n\t\t\t\t\tfunction (card, player, target) {\r\n\t\t\t\t\t\treturn target.countCards(\"he\") > 0 && player != target;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfunction (target) {\r\n\t\t\t\t\t\tvar att = get.attitude(_status.event.player, target);\r\n\t\t\t\t\t\tif (target.hasSkill(\"tuntian\")) return att / 10;\r\n\t\t\t\t\t\treturn 1 - att;\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar num2 = result.targets.length;\r\n\t\t\t\t\tresult.targets.sortBySeat();\r\n\t\t\t\t\tplayer.logSkill(\"fukemrfz\", result.targets);\r\n\t\t\t\t\tplayer.chooseToDiscard(num2, true, \"he\");\r\n\t\t\t\t\tplayer.gainMultiple(result.targets, \"he\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.6,\r\n\t\t\t\texpose: 0.2,\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhumengmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"roundStart\",\r\n\t\t\t},\r\n\t\t\tfirstDo: true,\r\n\t\t\tforced: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.removeMark(\"zhumengmrfz3\", player.countMark(\"zhumengmrfz3\"));\r\n\t\t\t\tplayer.unmarkSkill(\"zhumengmrfz2\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhumengmrfz2: {\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"roundStart\",\r\n\t\t\t},\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (storage) {\r\n\t\t\t\t\treturn get.translation(storage) + \"牌\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.judge();\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tplayer.markSkill(\"zhumengmrfz2\");\r\n\t\t\t\tif (get.type(result.card) !== \"delay\") {\r\n\t\t\t\t\tplayer.storage.zhumengmrfz2 = get.type(result.card);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.storage.zhumengmrfz2 = \"trick\";\r\n\t\t\t\t}\r\n\t\t\t\tplayer.addMark(\"zhumengmrfz3\", result.number);\r\n\t\t\t\tplayer.logSkill(\"zhumengmrfz\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhumengmrfz3: {\r\n\t\t\tmarktext: \"梦\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"梦\",\r\n\t\t\t\tcontent: \"萨卡兹的命运应该掌握在自己手中\",\r\n\t\t\t},\r\n\t\t\taudio: \"zhumengmrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"useCard\", \"respond\"],\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.storage.zhumengmrfz2 == \"trick\" && get.type(event.card) == \"delay\") return true;\r\n\t\t\t\treturn get.type(event.card) == player.storage.zhumengmrfz2 && player.countMark(\"zhumengmrfz3\") > 0;\r\n\t\t\t},\r\n\t\t\tfrequent: true,\r\n\t\t\tprompt: \"是否摸一张牌\",\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.removeMark(\"zhumengmrfz3\");\r\n\t\t\t\tplayer.draw();\r\n\t\t\t\tplayer.logSkill(\"zhumengmrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhumengmrfz2\", \"zhumengmrfz\"],\r\n\t\t},\r\n\t\t//浊心斯卡蒂\r\n\t\tqianximrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t},\r\n\t\t\tderivation: [\"qianximrfz_ban\"],\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar characterlist = [];\r\n\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\tvar players = game.players[i];\r\n\t\t\t\t\tif (players == player) continue;\r\n\t\t\t\t\tcharacterlist.push(players.name);\r\n\t\t\t\t}\r\n\t\t\t\tif (!lib.config.isNoLimted_mrfz) {\r\n\t\t\t\t\tcharacterlist.remove(\"amiyamrfz\");\r\n\t\t\t\t\tcharacterlist.remove(\"baocunzhemrfz\");\r\n\t\t\t\t}\r\n\t\t\t\tvar skills = [];\r\n\t\t\t\tfor (var i of characterlist) {\r\n\t\t\t\t\tskills.addArray(lib.character[i][3]);\r\n\t\t\t\t}\r\n\t\t\t\tif (!characterlist.length || !skills.length) {\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (player.isUnderControl()) {\r\n\t\t\t\t\tgame.swapPlayerAuto(player);\r\n\t\t\t\t}\r\n\t\t\t\tvar switchToAuto = function () {\r\n\t\t\t\t\t_status.imchoosing = false;\r\n\t\t\t\t\tevent._result = {\r\n\t\t\t\t\t\tbool: true,\r\n\t\t\t\t\t\tskills: skills.randomGets(2),\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (event.dialog) event.dialog.close();\r\n\t\t\t\t\tif (event.control) event.control.close();\r\n\t\t\t\t};\r\n\t\t\t\tvar chooseButton = function (list, skills) {\r\n\t\t\t\t\tvar event = _status.event;\r\n\t\t\t\t\tif (!event._result) event._result = {};\r\n\t\t\t\t\tevent._result.skills = [];\r\n\t\t\t\t\tvar rSkill = event._result.skills;\r\n\t\t\t\t\tvar dialog = ui.create.dialog(\"请获得两个技能\", [list, \"character\"], \"hidden\");\r\n\t\t\t\t\tevent.dialog = dialog;\r\n\t\t\t\t\tvar table = document.createElement(\"div\");\r\n\t\t\t\t\ttable.classList.add(\"add-setting\");\r\n\t\t\t\t\ttable.style.margin = \"0\";\r\n\t\t\t\t\ttable.style.width = \"100%\";\r\n\t\t\t\t\ttable.style.position = \"relative\";\r\n\t\t\t\t\tfor (var i = 0; i < skills.length; i++) {\r\n\t\t\t\t\t\tvar td = ui.create.div(\".shadowed.reduce_radius.pointerdiv.tdnode\");\r\n\t\t\t\t\t\ttd.link = skills[i];\r\n\t\t\t\t\t\ttable.appendChild(td);\r\n\t\t\t\t\t\ttd.innerHTML = \"<span>\" + get.translation(skills[i]) + \"</span>\";\r\n\t\t\t\t\t\ttd.addEventListener(lib.config.touchscreen ? \"touchend\" : \"click\", function () {\r\n\t\t\t\t\t\t\tif (_status.dragged) return;\r\n\t\t\t\t\t\t\tif (_status.justdragged) return;\r\n\t\t\t\t\t\t\t_status.tempNoButton = true;\r\n\t\t\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\t\t\t_status.tempNoButton = false;\r\n\t\t\t\t\t\t\t}, 500);\r\n\t\t\t\t\t\t\tvar link = this.link;\r\n\t\t\t\t\t\t\tif (!this.classList.contains(\"bluebg\")) {\r\n\t\t\t\t\t\t\t\tif (rSkill.length >= 2) return;\r\n\t\t\t\t\t\t\t\trSkill.add(link);\r\n\t\t\t\t\t\t\t\tthis.classList.add(\"bluebg\");\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.classList.remove(\"bluebg\");\r\n\t\t\t\t\t\t\t\trSkill.remove(link);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdialog.content.appendChild(table);\r\n\t\t\t\t\tdialog.add(\"　　\");\r\n\t\t\t\t\tdialog.open();\r\n\r\n\t\t\t\t\tevent.switchToAuto = function () {\r\n\t\t\t\t\t\tevent.dialog.close();\r\n\t\t\t\t\t\tevent.control.close();\r\n\t\t\t\t\t\tgame.resume();\r\n\t\t\t\t\t\t_status.imchoosing = false;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tevent.control = ui.create.control(\"ok\", function (link) {\r\n\t\t\t\t\t\tevent.dialog.close();\r\n\t\t\t\t\t\tevent.control.close();\r\n\t\t\t\t\t\tgame.resume();\r\n\t\t\t\t\t\t_status.imchoosing = false;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tfor (var i = 0; i < event.dialog.buttons.length; i++) {\r\n\t\t\t\t\t\tevent.dialog.buttons[i].classList.add(\"selectable\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgame.pause();\r\n\t\t\t\t\tgame.countChoose();\r\n\t\t\t\t};\r\n\t\t\t\tif (event.isMine()) {\r\n\t\t\t\t\tchooseButton(characterlist, skills);\r\n\t\t\t\t} else if (event.isOnline()) {\r\n\t\t\t\t\tevent.player.send(chooseButton, characterlist, skills);\r\n\t\t\t\t\tevent.player.wait();\r\n\t\t\t\t\tgame.pause();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tswitchToAuto();\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tvar map = event.result || result;\r\n\t\t\t\tif (map && map.skills && map.skills.length) {\r\n\t\t\t\t\tfor (var i of map.skills) player.addSkillLog(i);\r\n\t\t\t\t}\r\n\t\t\t\tgame.broadcastAll(function (list) {\r\n\t\t\t\t\tgame.expandSkills(list);\r\n\t\t\t\t\tfor (var i of list) {\r\n\t\t\t\t\t\tvar info = lib.skill[i];\r\n\t\t\t\t\t\tif (!info) continue;\r\n\t\t\t\t\t\tif (!info.audioname2) info.audioname2 = {};\r\n\t\t\t\t\t\tinfo.audioname2.old_yuanshu = \"weidi\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}, map.skills);\r\n\t\t\t},\r\n\t\t},\r\n\t\t//斯卡蒂\r\n\t\tgeyaomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseZhunbeiBegin\",\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.draw(\"visible\");\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tvar card = result[0];\r\n\t\t\t\tif (get.type(card) == \"equip\") {\r\n\t\t\t\t\tplayer.addTempSkill(\"geyaomrfz_e\");\r\n\t\t\t\t}\r\n\t\t\t\tif (get.type(card) == \"trick\" || get.type(card) == \"delay\") {\r\n\t\t\t\t\tplayer.addTempSkill(\"geyaomrfz_t\");\r\n\t\t\t\t}\r\n\t\t\t\tif (get.type(card) == \"basic\") {\r\n\t\t\t\t\tplayer.addTempSkill(\"geyaomrfz_b\");\r\n\t\t\t\t}\r\n\t\t\t\tgame.log(player, \"展示了一张\", get.type(card), \"牌\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tgeyaomrfz_e: {\r\n\t\t\tmod: {\r\n\t\t\t\ttargetInRange: function (card, player, target, now) {\r\n\t\t\t\t\tif (card.name == \"sha\") return true;\r\n\t\t\t\t},\r\n\t\t\t\tselectTarget: function (card, player, range) {\r\n\t\t\t\t\tif (card.name == \"sha\" && range[1] != -1) range[1] = Infinity;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tcharlotte: true,\r\n\t\t},\r\n\t\tgeyaomrfz_t: {\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCard\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tcharlotte: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.logSkill(\"geyaomrfz\");\r\n\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tdirectHit_ai: true,\r\n\t\t\t},\r\n\t\t},\r\n\t\tgeyaomrfz_b: {\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t},\r\n\t\t\tfrequent: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.card.name == \"sha\" && event.target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.target) < 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t//player.logSkill('geyaomrfz');\r\n\t\t\t\t//player.gainPlayerCard(1,trigger.target,'he',true,'visible');\r\n\t\t\t\tvar color = get.color(trigger.card);\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.gainPlayerCard(trigger.target, \"h\", \"visible\")\r\n\t\t\t\t\t.set(\"color\", color)\r\n\t\t\t\t\t.set(\"filterButton\", function (button) {\r\n\t\t\t\t\t\tvar evt = _status.event;\r\n\t\t\t\t\t\treturn get.color(button.link, evt.target) != evt.color;\r\n\t\t\t\t\t});\r\n\t\t\t\tplayer.logSkill(\"geyaomrfz\", trigger.target);\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhangenmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardAfter\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.countCards(\"h\") == 0) return false;\r\n\t\t\t\treturn event.card.name == \"sha\" && player.getHistory(\"sourceDamage\").length > 0;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.getCardUsable(\"sha\") == 0 &&\r\n\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\treturn card.name == \"sha\";\r\n\t\t\t\t\t}) > 0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.chooseToDiscard(\"h\", 1, true);\r\n\t\t\t\ttrigger.addCount = false;\r\n\t\t\t\tif (player.stat[player.stat.length - 1].card.sha > 0) {\r\n\t\t\t\t\tplayer.stat[player.stat.length - 1].card.sha--;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\t//缄默德克萨斯\r\n\t\tyushimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar num = 8 - game.roundNumber;\r\n\t\t\t\ttrigger.num = Math.max(3, num);\r\n\t\t\t},\r\n\t\t},\r\n\t\tlaoyingmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tusable: 1,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.card && event.getParent(\"phaseUse\") && event.getParent(\"phaseUse\").player == player && get.itemtype(event.cards) == \"cards\" && get.position(event.cards[0], true) == \"o\";\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.gain(trigger.cards, \"gain2\");\r\n\t\t\t\tvar cardu = { name: trigger.card.name, isCard: true };\r\n\t\t\t\tif (get.type(cardu) == \"basic\") player.addTempSkill(\"laoyingmrfz_basic\");\r\n\t\t\t\telse player.addTempSkill(\"laoyingmrfz_trick\");\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tbasic: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num + 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttrick: {\r\n\t\t\t\t\taudio: \"laoyingmrfz\",\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn get.type2(event.card) == \"trick\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current != player;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tplayer.removeSkill(\"laoyingmrfz_trick\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t\t\treturn get.type2(arg.card) == \"trick\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//玛恩纳\r\n\t\txunlumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tgroup: [\"xunlumrfz_draw\", \"xunlumrfz_sha\", \"xunlumrfz_h\"],\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (storage, player, skill) {\r\n\t\t\t\t\treturn \"数字：<span class=thundertext>\" + player.storage.xunlumrfz_draw + \"</span> <span class=firetext>\" + player.storage.xunlumrfz_sha + \"</span> <span class=greentext>\" + player.storage.xunlumrfz_h + \"</span></br>本回合杀的数量：\" + player.storage.xunlumrfz_sha2 + \"</br>本回合手牌上限：\" + player.storage.xunlumrfz_h2 + (player.storage.xunlumrfz2 ? \"</br>已修改【寻路】\" : \"\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tonremove: true,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.storage.xunlumrfz_draw + player.storage.xunlumrfz_sha + player.storage.xunlumrfz_h < 12) return true;\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar list = [\"蓝色\", \"红色\", \"绿色\"];\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseControl(list, \"cancel2\")\r\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"xunlumrfz\"))\r\n\t\t\t\t\t.set(\"prompt2\", \"令〖寻路〗中的一个数字+1</br>数字：<span class=thundertext>\" + player.storage.xunlumrfz_draw + \"</span> <span class=firetext>\" + player.storage.xunlumrfz_sha + \"</span> <span class=greentext>\" + player.storage.xunlumrfz_h + \"</span>\")\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\tif (player.storage.xunlumrfz_draw < 4) return 0;\r\n\t\t\t\t\t\tif (player.storage.xunlumrfz_draw == 4 && player.xunlumrfz_sha < 4) return 1;\r\n\t\t\t\t\t\tif (player.storage.xunlumrfz_h < 4) return 2;\r\n\t\t\t\t\t\treturn 3;\r\n\t\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.control != \"cancel2\") {\r\n\t\t\t\t\tif (result.control == \"蓝色\") {\r\n\t\t\t\t\t\tif (player.storage.xunlumrfz_draw < 4) {\r\n\t\t\t\t\t\t\tplayer.storage.xunlumrfz_draw++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (result.control == \"红色\") {\r\n\t\t\t\t\t\tif (player.storage.xunlumrfz_sha < 4) {\r\n\t\t\t\t\t\t\tplayer.storage.xunlumrfz_sha++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (result.control == \"绿色\") {\r\n\t\t\t\t\t\tif (player.storage.xunlumrfz_h < 4) {\r\n\t\t\t\t\t\t\tplayer.storage.xunlumrfz_h++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (result.control == \"修改【寻路】\") {\r\n\t\t\t\t\t\tif (!player.storage.xunlumrfz2) {\r\n\t\t\t\t\t\t\tplayer.storage.xunlumrfz2 = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplayer.markSkill(\"xunlumrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\t//m-n\r\n\t\t//Math.random()*(n-m)+m;\r\n\t\txunlumrfz_draw: {\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.xunlumrfz_draw = 1;\r\n\t\t\t\tplayer.syncStorage(\"xunlumrfz_draw\");\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\tforced: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar num = game.RDNbet(player.storage.xunlumrfz_draw, 6);\r\n\t\t\t\ttrigger.num = Math.min(num, 6);\r\n\t\t\t\tplayer.logSkill(\"xunlumrfz\");\r\n\t\t\t\tplayer.chat(\"可出\" + player.storage.xunlumrfz_sha2 + \"张杀</br>手牌上限为：\" + player.storage.xunlumrfz_h2);\r\n\t\t\t},\r\n\t\t},\r\n\t\txunlumrfz_sha: {\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.xunlumrfz_sha = 0;\r\n\t\t\t\tplayer.syncStorage(\"xunlumrfz_sha\");\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tforced: true,\r\n\t\t\tcharlotte: true,\r\n\t\t\tfirstDo: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.addTempSkill(\"xunlumrfz_sha2\", {\r\n\t\t\t\t\tplayer: \"phaseZhunbeiBegin\",\r\n\t\t\t\t});\r\n\t\t\t\tplayer.storage.xunlumrfz_sha2 = game.RDNbet(player.storage.xunlumrfz_sha, 5);\r\n\t\t\t\tplayer.logSkill(\"xunlumrfz\");\r\n\t\t\t},\r\n\t\t},\r\n\t\txunlumrfz_sha2: {\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.xunlumrfz_sha2 = 0;\r\n\t\t\t\tplayer.syncStorage(\"xunlumrfz_sha2\");\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tif (card.name == \"sha\") return (num = Math.min(player.storage.xunlumrfz_sha2, 5));\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txunlumrfz_h: {\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.xunlumrfz_h = 3;\r\n\t\t\t\tplayer.syncStorage(\"xunlumrfz_h\");\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tforced: true,\r\n\t\t\tcharlotte: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.addTempSkill(\"xunlumrfz_h2\", {\r\n\t\t\t\t\tplayer: \"phaseZhunbeiBegin\",\r\n\t\t\t\t});\r\n\t\t\t\tplayer.storage.xunlumrfz_h2 = game.RDNbet(player.storage.xunlumrfz_h, 8);\r\n\t\t\t},\r\n\t\t},\r\n\t\txunlumrfz_h2: {\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.xunlumrfz_h2 = 0;\r\n\t\t\t\tplayer.syncStorage(\"xunlumrfz_h2\");\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\treturn (num = player.storage.xunlumrfz_h2);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txunlumrfz2: {\r\n\t\t\tcharlotte: true,\r\n\t\t},\r\n\t\t//耀骑士临光\r\n\t\tzhuguangmrfz: {\r\n\t\t\tderivation: \"zhuguangmrfz_rewrite\",\r\n\t\t\taudio: 2,\r\n\t\t\taudioname: [\"linguangmrfz\"],\r\n\t\t\ttrigger: { player: \"phaseZhunbeiAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.zhuguangmrfz_change;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseTarget(\"选择一名其他角色，视为对其使用【决斗】\", function (card, player, target) {\r\n\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\treturn -get.attitude(_status.event.player, target);\r\n\t\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tplayer.addSkill(\"zhuguangmrfz2\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\tplayer.useCard({ name: \"juedou\" }, true, target);\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (player.hasSkill(\"zhuguangmrfz2\")) player.removeSkill(\"zhuguangmrfz2\");\r\n\t\t\t},\r\n\t\t\tgroup: \"zhuguangmrfz_change\",\r\n\t\t},\r\n\t\tzhuguangmrfz2: {\r\n\t\t\taudio: false,\r\n\t\t\tsilent: true,\r\n\t\t\ttrigger: { source: \"damageBegin2\" },\r\n\t\t\tfilter: function (event, player, card) {\r\n\t\t\t\treturn event.card.name == \"juedou\";\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\tif (!player.storage.zhuguangmrfz_change) return \"是否防止此伤害并选择一项\";\r\n\t\t\t\treturn \"是否发动【逐光】\";\r\n\t\t\t},\r\n\t\t\tfrequent: function (event, player) {\r\n\t\t\t\tif (!player.storage.zhuguangmrfz_change) return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tif (!player.storage.zhuguangmrfz_change) trigger.cancel();\r\n\t\t\t\tvar list = [];\r\n\t\t\t\tif (!player.storage.kuanmrfz && player.hasSkill(\"kuanmrfz\")) list.add(\"修改【苦暗】\");\r\n\t\t\t\tif (!player.storage.zhuguangmrfz_change) list.add(\"修改【逐光】\");\r\n\t\t\t\t//if(player.countDisabled()>0) list.add('恢复装备栏');\r\n\t\t\t\tif (!player.storage.zhuguangmrfz_change) list.add(\"摸一张牌\");\r\n\t\t\t\tif (player.storage.zhuguangmrfz_change) list.add(\"摸两张牌\");\r\n\r\n\t\t\t\t//判断是否只剩余一个选项\r\n\t\t\t\tif (list.length == 1) {\r\n\t\t\t\t\tplayer.draw(player.storage.zhuguangmrfz_change ? 2 : 1);\r\n\t\t\t\t\tplayer.logSkill(\"zhuguangmrfz\");\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlist.add(\"cancel2\");\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t.set(\"prompt\", get.prompt(\"zhuguangmrfz\"))\r\n\t\t\t\t\t\t.set(\"prompt2\", \"选择一项\")\r\n\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\tif (!player.storage.zhuguangmrfz_change) return 1;\r\n\t\t\t\t\t\t\tif (!player.storage.kuanmrfz && player.hasSkill(\"kuanmrfz\")) return 0;\r\n\t\t\t\t\t\t\treturn [0, 1].randomGet();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tplayer.logSkill(\"zhuguangmrfz\");\r\n\t\t\t\tif (result.control != \"cancel2\") {\r\n\t\t\t\t\tif (result.control == \"修改【苦暗】\") {\r\n\t\t\t\t\t\tplayer.storage.kuanmrfz = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (result.control == \"修改【逐光】\") {\r\n\t\t\t\t\t\tplayer.storage.zhuguangmrfz_change = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//if(result.control=='恢复装备栏'){\r\n\t\t\t\t\t//    player.chooseToEnable();\r\n\t\t\t\t\t//}\r\n\t\t\t\t\tif (result.control == \"摸一张牌\") {\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (result.control == \"摸两张牌\") {\r\n\t\t\t\t\t\tplayer.draw(2);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhuguangmrfz_change: {\r\n\t\t\taudio: \"zhuguangmrfz\",\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.storage.zhuguangmrfz_change;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.logSkill(\"zhuguangmrfz\");\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseTarget(\"选择一名其他角色，视为对其使用【决斗】，且此决斗不可响应\", function (card, player, target) {\r\n\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\treturn -get.attitude(_status.event.player, target);\r\n\t\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tplayer.addSkill([\"zhuguangmrfz2\", \"zhuguangmrfz3\"]);\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\tplayer.useCard({ name: \"juedou\", zhuguangmrfz: true }, true, target);\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (player.hasSkill(\"zhuguangmrfz2\")) player.removeSkill(\"zhuguangmrfz2\");\r\n\t\t\t\tif (player.hasSkill(\"zhuguangmrfz3\")) player.removeSkill(\"zhuguangmrfz3\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhuguangmrfz3: {\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCard\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tcharlotte: true,\r\n\t\t\tsilent: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.card.name == \"juedou\" && event.card.zhuguangmrfz == true;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tdirectHit_ai: true,\r\n\t\t\t},\r\n\t\t},\r\n\t\tkuanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"gameDrawAfter\" },\r\n\t\t\tforced: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.disableEquip(\"equip1\");\r\n\t\t\t\tplayer.disableEquip(\"equip2\");\r\n\t\t\t\tplayer.disableEquip(\"equip3\");\r\n\t\t\t\tplayer.disableEquip(\"equip4\");\r\n\t\t\t\tplayer.disableEquip(\"equip5\");\r\n\t\t\t\tplayer.disableJudge();\r\n\t\t\t\tplayer.draw(3);\r\n\t\t\t},\r\n\t\t\tgroup: [\"kuanmrfz2\", \"kuanmrfz5\"],\r\n\t\t\tmod: {\r\n\t\t\t\tignoredHandcard: function (card, player) {\r\n\t\t\t\t\tif (get.type(card) == \"equip\") return true;\r\n\t\t\t\t},\r\n\t\t\t\tcardDiscardable: function (card, player, name) {\r\n\t\t\t\t\tif (name == \"phaseDiscard\" && get.type(card) == \"equip\") return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tkuanmrfz2: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseJudgeBefore\" },\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.kuanmrfz;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.logSkill(\"kuanmrfz\");\r\n\t\t\t\tplayer.judge(function (card) {\r\n\t\t\t\t\tif (get.suit(card) == \"heart\") return -2;\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.suit !== \"heart\") {\r\n\t\t\t\t\tplayer.skip(\"phaseUse\");\r\n\t\t\t\t\tgame.log(player, \"的<span class=thundertext>【乐不思蜀】</span>判定结果为\", result.suit, \",\", player, \"跳过出牌阶段\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgame.log(player, \"的<span class=thundertext>【乐不思蜀】</span>判定结果为\", result.suit, \",判定失败\");\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tplayer.judge(function (card) {\r\n\t\t\t\t\tif (get.suit(card) == \"club\") return -2;\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t});\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tif (result.suit !== \"club\") {\r\n\t\t\t\t\tplayer.skip(\"phaseDraw\");\r\n\t\t\t\t\tgame.log(player, \"的<span class=thundertext>【兵粮寸断】</span>判定结果为\", result.suit, \",\", player, \"跳过摸牌阶段\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgame.log(player, \"的<span class=thundertext>【兵粮寸断】</span>判定结果为\", result.suit, \",判定失败\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tkuanmrfz5: {\r\n\t\t\taudio: \"kuanmrfz\",\r\n\t\t\tenable: [\"chooseToRespond\", \"chooseToUse\"],\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tevent.type == \"wuxie\" ||\r\n\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\treturn get.type(card) == \"equip\";\r\n\t\t\t\t\t}) == 0\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\tfor (var name of [\"sha\", \"shan\", \"jiu\"]) {\r\n\t\t\t\t\tif (event.filterCard({ name: name, isCard: true }, player, event)) return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tchooseButton: {\r\n\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\tvar vcards = [];\r\n\t\t\t\t\tfor (var name of [\"sha\", \"shan\", \"jiu\"]) {\r\n\t\t\t\t\t\tvar card = { name: name, isCard: true };\r\n\t\t\t\t\t\tif (event.filterCard(card, player, event)) vcards.push([\"基本\", \"\", name]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar dialog = ui.create.dialog(\"苦暗\", [vcards, \"vcard\"], \"hidden\");\r\n\t\t\t\t\tdialog.direct = true;\r\n\t\t\t\t\treturn dialog;\r\n\t\t\t\t},\r\n\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tfilterCard: function (card) {\r\n\t\t\t\t\t\t\treturn get.type(card) == \"equip\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tselectCard: 1,\r\n\t\t\t\t\t\tviewAs: {\r\n\t\t\t\t\t\t\tname: links[0][2],\r\n\t\t\t\t\t\t\tisCard: false,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t\tprecontent: function () {\r\n\t\t\t\t\t\t\tplayer.logSkill(\"kuanmrfz\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\treturn \"【苦暗】：使用一张【\" + get.translation(links[0][2]) + \"】\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 3,\r\n\t\t\t\trespondSha: true,\r\n\t\t\t\trespondShan: true,\r\n\t\t\t},\r\n\t\t},\r\n\t\tshuoguangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseDiscardBefore\" },\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.shuoguangmrfz;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t\tplayer.storage.shuoguangmrfz = true;\r\n\t\t\t},\r\n\t\t},\r\n\t\t//凯尔希\r\n\t\tyuanlvemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"drawBegin\" },\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.getParent(1).name != \"yuanlvemrfz\";\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tlet num = 0;\r\n\t\t\t\tif (!player.storage.yuanshimrfz || player.storage.yuanshimrfz_gain) {\r\n\t\t\t\t\tnum = trigger.num;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnum = trigger.num + 1;\r\n\t\t\t\t}\r\n\t\t\t\tif (trigger.parent.name !== \"phaseDraw\") {\r\n\t\t\t\t\tplayer.chooseToGuanxing(num);\r\n\t\t\t\t\tplayer.draw(num);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.chooseToGuanxing(num + 1);\r\n\t\t\t\t\tplayer.draw(num + 1);\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t},\r\n\t\t},\r\n\t\tchonggoumrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"已修改【重构】。\",\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.getDamagedHp() == 0 && !player.storage.chonggoumrfz) return false;\r\n\t\t\t\treturn player.countCards(\"h\") >= player.hp;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.chooseToDiscard(\"h\", player.countCards(\"h\"), true);\r\n\t\t\t\tif (!player.storage.chonggoumrfz) {\r\n\t\t\t\t\tplayer.draw(player.countCards(\"h\") - player.getDamagedHp());\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.draw(player.countCards(\"h\"));\r\n\t\t\t\t}\r\n\t\t\t\tplayer.recover();\r\n\t\t\t},\r\n\t\t},\r\n\t\tyuanshimrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"令【远略】中的X+1。\",\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\taudio: 3,\r\n\t\t\tdirect: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (event.name != \"phase\" || game.phaseNumber == 0) && player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar hs = player.getCards(\"h\");\r\n\t\t\t\tif (hs.length) player.addGaintag(hs, \"yuanshimrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"yuanshimrfz_basic\", \"yuanshimrfz_equip\", \"yuanshimrfz_trick\", \"yuanshimrfz_gain\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tbasic: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCard\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: \"是否令此牌不可响应\",\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\tif (event.card.name == \"sha\") return true;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (get.type(event.card) !== \"basic\") return false;\r\n\t\t\t\t\t\treturn player.hasHistory(\"lose\", function (evt) {\r\n\t\t\t\t\t\t\tif (event != evt.getParent()) return false;\r\n\t\t\t\t\t\t\tfor (var i in evt.gaintag_map) {\r\n\t\t\t\t\t\t\t\tif (evt.gaintag_map[i].includes(\"yuanshimrfz\")) return true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (!player.storage.yuanshimrfz_gain) player.storage.yuanshimrfz_gain = true;\r\n\t\t\t\t\t\tplayer.logSkill(\"yuanshimrfz\");\r\n\t\t\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current != player;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tequip: {\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tprompt: \"是否摸一张牌\",\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (get.type(event.card) !== \"equip\" && get.type(event.card) !== \"delay\") return false;\r\n\t\t\t\t\t\treturn player.hasHistory(\"lose\", function (evt) {\r\n\t\t\t\t\t\t\tif (event != evt.getParent()) return false;\r\n\t\t\t\t\t\t\tfor (var i in evt.gaintag_map) {\r\n\t\t\t\t\t\t\t\tif (evt.gaintag_map[i].includes(\"yuanshimrfz\")) return true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (!player.storage.yuanshimrfz_gain) player.storage.yuanshimrfz_gain = true;\r\n\t\t\t\t\t\tplayer.logSkill(\"yuanshimrfz\");\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttrick: {\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tprompt: function (event, player) {\r\n\t\t\t\t\t\treturn \"是否令\" + get.translation(event.card) + \"的目标+1/-1\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (get.type(event.card) !== \"trick\") return false;\r\n\t\t\t\t\t\treturn player.hasHistory(\"lose\", function (evt) {\r\n\t\t\t\t\t\t\tif (event != evt.getParent()) return false;\r\n\t\t\t\t\t\t\tfor (var i in evt.gaintag_map) {\r\n\t\t\t\t\t\t\t\tif (evt.gaintag_map[i].includes(\"yuanshimrfz\")) return true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tif (!player.storage.yuanshimrfz_gain) player.storage.yuanshimrfz_gain = true;\r\n\t\t\t\t\t\tvar prompt2 = \"为\" + get.translation(trigger.card) + \"增加或减少一个目标\";\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.chooseTarget(get.prompt(\"yuanshimrfz\"), function (card, player, target) {\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\tif (_status.event.targets.includes(target)) return true;\r\n\t\t\t\t\t\t\t\treturn lib.filter.targetEnabled2(_status.event.card, player, target) && lib.filter.targetInRange(_status.event.card, player, target);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"prompt2\", prompt2)\r\n\t\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\tvar trigger = _status.event.getTrigger();\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\treturn get.effect(target, trigger.card, player, player) * (_status.event.targets.includes(target) ? -1 : 1);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"targets\", trigger.targets)\r\n\t\t\t\t\t\t\t.set(\"card\", trigger.card);\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tif (!event.isMine() && !event.isOnline()) game.delayx();\r\n\t\t\t\t\t\t\tevent.targets = result.targets;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tif (event.targets) {\r\n\t\t\t\t\t\t\tplayer.logSkill(\"yuanshimrfz\", event.targets);\r\n\t\t\t\t\t\t\tif (trigger.targets.includes(event.targets[0])) trigger.targets.removeArray(event.targets);\r\n\t\t\t\t\t\t\telse trigger.targets.addArray(event.targets);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tgain: {\r\n\t\t\t\t\ttrigger: { player: \"loseAfter\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.storage.yuanshimrfz || player.storage.chonggoumrfz) return false;\r\n\t\t\t\t\t\treturn !player.hasCard(function (card) {\r\n\t\t\t\t\t\t\treturn card.hasGaintag(\"yuanshimrfz\");\r\n\t\t\t\t\t\t}, \"h\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.logSkill(\"yuanshimrfz\");\r\n\t\t\t\t\t\tif (!player.storage.yuanshimrfz_gain) {\r\n\t\t\t\t\t\t\tplayer.storage.yuanshimrfz = true;\r\n\t\t\t\t\t\t\tplayer.markSkill(\"yuanshimrfz\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tplayer.storage.chonggoumrfz = true;\r\n\t\t\t\t\t\t\tplayer.markSkill(\"chonggoumrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tm3mrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"dying\",\r\n\t\t\t},\r\n\t\t\tzhuSkill: true,\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationColor: \"red\",\r\n\t\t\tmark: true,\r\n\t\t\tunique: true,\r\n\t\t\tlimited: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.hp > 0) return false;\r\n\t\t\t\treturn !player.storage.m3mrfz;\r\n\t\t\t},\r\n\t\t\tinit: (player, skill) => (player.storage[skill] = false),\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tvar num = player.countCards(\"h\", function (card) {\r\n\t\t\t\t\treturn card.name == \"tao\" || card.name == \"jiu\";\r\n\t\t\t\t});\r\n\t\t\t\treturn player.hp + num <= 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.awakenSkill(\"m3mrfz\");\r\n\t\t\t\tplayer.removeSkill(\"chonggoumrfz\");\r\n\t\t\t\tplayer.discard(player.getCards(\"hej\"));\r\n\t\t\t\tplayer.recoverTo(2);\r\n\t\t\t\tplayer.storage.m3mrfz = true;\r\n\t\t\t\tplayer.loseMaxHp();\r\n\t\t\t\tplayer.turnOver(false);\r\n\t\t\t\tplayer.link(false);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tvar targets = game.filterPlayer();\r\n\t\t\t\tevent.targets = targets.remove(player);\r\n\t\t\t\tevent.discard = [];\r\n\t\t\t\tevent.num = 0;\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (event.targets.length) {\r\n\t\t\t\t\tvar current = event.targets.shift();\r\n\t\t\t\t\tif (current.countCards(\"he\") > 0) {\r\n\t\t\t\t\t\tcurrent\r\n\t\t\t\t\t\t\t.chooseBool(\"是否弃置一张牌令\" + get.translation(player) + \"摸一张牌\")\r\n\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\treturn get.attitude(_status.event.player, _status.event.target) > 2;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"target\", player);\r\n\t\t\t\t\t\tevent.current = current;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tevent.redo();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tevent.goto(4);\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tevent.discard.push(event.current);\r\n\t\t\t\t\tevent.current.line(player, \"green\");\r\n\t\t\t\t\tgame.log(event.current, \"令\", player, \"摸一张牌\");\r\n\t\t\t\t\tplayer.draw();\r\n\t\t\t\t}\r\n\t\t\t\tif (event.targets.length) {\r\n\t\t\t\t\tevent.goto(2);\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 4\");\r\n\t\t\t\tif (event.discard.length) {\r\n\t\t\t\t\tvar next = game.createEvent(\"m3mrfz_next\");\r\n\t\t\t\t\tevent.next.remove(next);\r\n\t\t\t\t\ttrigger.after.push(next);\r\n\t\t\t\t\tnext.targets = event.discard;\r\n\t\t\t\t\tnext.setContent(function () {\r\n\t\t\t\t\t\tfor (var i = 0; i < targets.length; i++) {\r\n\t\t\t\t\t\t\tif (targets[i].countCards(\"h\") > 0) {\r\n\t\t\t\t\t\t\t\ttargets[i].chooseToDiscard(\"h\", true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\t//山\r\n\t\tzhuangtimrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"已造成#点伤害\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.maxHp < 15;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.addMark(\"zhuangtimrfz\", trigger.num);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tvar damage = player.countMark(\"zhuangtimrfz\");\r\n\t\t\t\tif (damage > 1) {\r\n\t\t\t\t\tplayer.gainMaxHp(Math.floor(damage / 2));\r\n\t\t\t\t\tplayer.removeMark(\"zhuangtimrfz\", Math.floor(damage / 2) * 2);\r\n\t\t\t\t\tplayer.logSkill(\"zhuangtimrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhuangtimrfz_use\", \"zhuangtimrfz_draw\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tuse: {\r\n\t\t\t\t\taudio: 2,\r\n\t\t\t\t\tusable: 1,\r\n\t\t\t\t\tenable: \"phaseUse\",\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tfor (var i of lib.inpile) {\r\n\t\t\t\t\t\t\tif (get.type(i) == \"trick\" && event.filterCard({ name: i, isCard: true }, player, event)) return true;\r\n\t\t\t\t\t\t\tif (get.type(i) == \"basic\" && event.filterCard({ name: i, isCard: true }, player, event)) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tchooseButton: {\r\n\t\t\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\t\t\tvar list = [];\r\n\t\t\t\t\t\t\tfor (var i of lib.inpile) {\r\n\t\t\t\t\t\t\t\tif (get.type(i) == \"trick\" && event.filterCard({ name: i, isCard: true }, player, event)) list.push([\"锦囊\", \"\", i]);\r\n\t\t\t\t\t\t\t\tif (get.type(i) == \"basic\" && event.filterCard({ name: i, isCard: true }, player, event)) list.push([\"基本\", \"\", i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn ui.create.dialog(\"壮体\", [list, \"vcard\"]);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcheck: function (button) {\r\n\t\t\t\t\t\t\treturn _status.event.player.getUseValue({\r\n\t\t\t\t\t\t\t\tname: button.link[2],\r\n\t\t\t\t\t\t\t\tisCard: true,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tviewAs: {\r\n\t\t\t\t\t\t\t\t\tname: links[0][2],\r\n\t\t\t\t\t\t\t\t\tisCard: true,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfilterCard: () => false,\r\n\t\t\t\t\t\t\t\tselectCard: -1,\r\n\t\t\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t\t\t\tprecontent: function () {\r\n\t\t\t\t\t\t\t\t\tplayer.logSkill(\"zhuangtimrfz\");\r\n\t\t\t\t\t\t\t\t\tplayer.loseMaxHp();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\t\t\treturn \"请选择\" + get.translation(links[0][2]) + \"的目标\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: { order: 1, result: { player: 1 } },\r\n\t\t\t\t},\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\treturn player.hp < 3;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tpromt: function (event, player) {\r\n\t\t\t\t\t\treturn \"是否失去\" + player.getDamagedHp() + \"点体力上限，摸\" + Math.ceil(player.getDamagedHp() / 2) + \"张牌。\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar num = player.getDamagedHp();\r\n\t\t\t\t\t\tplayer.loseMaxHp(num);\r\n\t\t\t\t\t\tplayer.draw(Math.ceil(num / 2));\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tjulimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.getDamagedHp() >= event.player.hp;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.player) < 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\ttrigger.num++;\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tvar card = trigger.player.countCards(\"he\");\r\n\t\t\t\tif (player.maxHp >= card) {\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.chooseControl(\"确定\", \"cancel2\")\r\n\t\t\t\t\t\t.set(\"prompt\", \"是否失去两点体力上限，令此伤害+1\")\r\n\t\t\t\t\t\t.set(\"ai\", function (event, player) {\r\n\t\t\t\t\t\t\tif (get.attitude(player, event.player) < 0 && player.maxHp >= 3) return 0;\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (result.control !== \"cancel2\") {\r\n\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\tplayer.loseMaxHp(2);\r\n\t\t\t\t\tplayer.logSkill(\"zhuangtimrfz\", trigger.player);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//歌蕾蒂亚\r\n\t\txunxiangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tusable: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.hasSkill(\"xunxiangmrfz2\")) return false;\r\n\t\t\t\treturn game.hasPlayer(current => current.countCards(\"h\") > 0);\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tselectTarget: -1,\r\n\t\t\tmultitarget: true,\r\n\t\t\tmultiline: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar num = [3, 1, 2].randomGet();\r\n\t\t\t\tif (num == 1) player.storage.xunxiangmrfz = \"basic\";\r\n\t\t\t\tif (num == 2) player.storage.xunxiangmrfz = \"trick\";\r\n\t\t\t\tif (num == 3) player.storage.xunxiangmrfz = \"equip\";\r\n\t\t\t\tgame.log(\"<span class=thundertext>【寻相】</span>随机的类型为<span class=firetext>\", player.storage.xunxiangmrfz, \"牌</span>\");\r\n\t\t\t\tplayer.popup(get.translation(player.storage.xunxiangmrfz) + \"牌\");\r\n\t\t\t\ttargets.sortBySeat();\r\n\t\t\t\tvar next = player\r\n\t\t\t\t\t.chooseCardOL(targets, \"请选择要展示的牌\", true)\r\n\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\treturn -get.value(card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"source\", player);\r\n\t\t\t\tnext.aiCard = function (target) {\r\n\t\t\t\t\tvar hs = target.getCards(\"h\");\r\n\t\t\t\t\treturn { bool: true, cards: [hs.randomGet()] };\r\n\t\t\t\t};\r\n\t\t\t\tnext._args.remove(\"glow_result\");\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tvar cards = [];\r\n\t\t\t\tvar num = 0;\r\n\t\t\t\tevent.videoId = lib.status.videoId++;\r\n\t\t\t\tfor (var i = 0; i < targets.length; i++) {\r\n\t\t\t\t\tcards.push(result[i].cards[0]);\r\n\t\t\t\t}\r\n\t\t\t\tevent.cards = cards;\r\n\t\t\t\tgame.log(player, \"展示了\", targets, \"的\", cards);\r\n\t\t\t\tgame.broadcastAll(\r\n\t\t\t\t\tfunction (targets, cards, id, player) {\r\n\t\t\t\t\t\tvar dialog = ui.create.dialog(get.translation(player) + \"发动了【寻相】</br><span class=firetext>【寻相】随机声明的类型为\" + get.translation(player.storage.xunxiangmrfz) + \"牌</span>\", cards);\r\n\t\t\t\t\t\tdialog.videoId = id;\r\n\t\t\t\t\t\tvar getName = function (target) {\r\n\t\t\t\t\t\t\tif (target._tempTranslate) return target._tempTranslate;\r\n\t\t\t\t\t\t\tvar name = target.name;\r\n\t\t\t\t\t\t\tif (lib.translate[name + \"_ab\"]) return lib.translate[name + \"_ab\"];\r\n\t\t\t\t\t\t\treturn get.translation(name);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tfor (var i = 0; i < targets.length; i++) {\r\n\t\t\t\t\t\t\tdialog.buttons[i].querySelector(\".info\").innerHTML = getName(targets[i]);\r\n\t\t\t\t\t\t\tif (get.type(result[i].cards[0]) == player.storage.xunxiangmrfz) num++;\r\n\t\t\t\t\t\t\tif (get.type(result[i].cards[0]) == \"delay\" && player.storage.xunxiangmrfz == \"trick\") num++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttargets,\r\n\t\t\t\t\tcards,\r\n\t\t\t\t\tevent.videoId,\r\n\t\t\t\t\tplayer\r\n\t\t\t\t);\r\n\t\t\t\tgame.delay(4);\r\n\t\t\t\tif (num == 0) {\r\n\t\t\t\t\tplayer.chooseTarget(\"选择一名其他角色，你与其各流失一点体力\", true, function (card, player, target) {\r\n\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\t\treturn get.attitude(player, target) < 2;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tplayer.loseHp();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.addTempSkill(\"xunxiangmrfz2\", \"phaseUseEnd\");\r\n\t\t\t\t\tplayer.draw(num);\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tgame.broadcastAll(\"closeDialog\", event.videoId);\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\ttarget.loseHp();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 12,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 5,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txunxiangmrfz2: {\r\n\t\t\t//检测用技能，无实际意义。\r\n\t\t},\r\n\t\tronghangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\tforced: true,\r\n\t\t\tgetLastUsed: function (player, event) {\r\n\t\t\t\tvar history = player.getAllHistory(\"useCard\");\r\n\t\t\t\tvar index;\r\n\t\t\t\tif (event) index = history.indexOf(event) - 1;\r\n\t\t\t\telse index = history.length - 1;\r\n\t\t\t\tif (index >= 0) return history[index];\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar evtcard = event.card;\r\n\t\t\t\tvar evt = lib.skill.ronghangmrfz.getLastUsed(player, event);\r\n\t\t\t\tif (!evt.card || !evt) return false;\r\n\t\t\t\treturn get.tag(evtcard, \"damage\") > 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar lastcard = lib.skill.ronghangmrfz.getLastUsed(player, trigger);\r\n\t\t\t\tif (get.cardNameLength(lastcard.card) < get.cardNameLength(trigger.card)) {\r\n\t\t\t\t\ttrigger.baseDamage++;\r\n\t\t\t\t\tplayer.popup(\"伤害基数+1\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar name = get.name(trigger.card);\r\n\t\t\t\t\tif (name == \"sha\") {\r\n\t\t\t\t\t\ttrigger.addCount = false;\r\n\t\t\t\t\t\tif (player.stat[player.stat.length - 1].card.sha > 0) {\r\n\t\t\t\t\t\t\tplayer.stat[player.stat.length - 1].card.sha--;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (name == \"jiu\") {\r\n\t\t\t\t\t\ttrigger.addCount = false;\r\n\t\t\t\t\t\tif (player.stat[player.stat.length - 1].card.jiu > 0) {\r\n\t\t\t\t\t\t\tplayer.stat[player.stat.length - 1].card.jiu--;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn current != player;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t);\r\n\t\t\t\t\tplayer.popup(\"强中且无限制\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\tvar evtcard = lib.skill.ronghangmrfz.getLastUsed(player, event);\r\n\t\t\t\t\treturn get.cardNameLength(evtcard) >= get.cardNameLength(arg.card);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//废弃技能，暂时无用\r\n\t\tcaiganmrfz: {\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"gainAfter\",\r\n\t\t\t},\r\n\t\t\tfirstDo: true,\r\n\t\t\tdirect: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.getParent(2).name != \"caiganmrfz\";\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.chooseToDiscard(\"h\", [1, Infinity], get.prompt(\"caiganmrfz\"), function (card) {\r\n\t\t\t\t\treturn card.hasGaintag(\"caiganmrfz\");\r\n\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar cards = result.cards;\r\n\t\t\t\t\tplayer.draw(cards.length);\r\n\t\t\t\t\tif (!player.storage.caiganmrfz_times) {\r\n\t\t\t\t\t\tplayer.storage.caiganmrfz_times = true;\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.6,\r\n\t\t\t\texpose: 0.2,\r\n\t\t\t},\r\n\t\t\tgroup: [\"caiganmrfz_mark\", \"caiganmrfz_remove\", \"caiganmrfz_times\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tmark: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"gainBegin\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.gaintag.add(\"caiganmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tremove: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"gainAfter\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeGaintag(\"caiganmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttimes: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"phaseEnd\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.storage.caiganmrfz_times;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.caiganmrfz_times = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tjingsimrfz: {\r\n\t\t\tonremove: true,\r\n\t\t\tintro: { content: \"已使用的牌：$\" },\r\n\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\taudio: 2,\r\n\t\t\tfrequent: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.getStorage(\"jingsimrfz\").includes(event.card.name);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.draw();\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tplayer.markAuto(\"jingsimrfz\", [trigger.card.name]);\r\n\t\t\t},\r\n\t\t},\r\n\t\t//旧星熊\r\n\t\tbanruomrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\tonremove: true,\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.banruomrfz = true;\r\n\t\t\t\tplayer.syncStorage(\"banruomrfz\");\r\n\t\t\t},\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (storage, player, skill) {\r\n\t\t\t\t\tif (player.storage.banruomrfz) return \"星熊的巨盾将会保护她和她想保护的人\";\r\n\t\t\t\t\treturn \"盾牌破损，但她并未后退\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\ttrigger: { player: \"damageBegin3\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.storage.banruomrfz;\r\n\t\t\t},\r\n\t\t\tprompt: \"是否取消此次伤害\",\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcardBase: function (player, num) {\r\n\t\t\t\t\tif (player.storage.banruomrfz) return player.maxHp;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"banruomrfz_lose\", \"banruomrfz_draw\", \"banruomrfz_round\", \"banruomrfz_atk\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tlose: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.storage.banruomrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.banruomrfz = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.storage.banruomrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num--;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tround: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn game.roundNumber > player.maxHp && player.storage.banruomrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.banruomrfz = false;\r\n\t\t\t\t\t\tplayer.logSkill(\"banruomrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tatk: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn !player.storage.banruomrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeSkill(\"banruomrfz_atk\");\r\n\t\t\t\t\t\tplayer.addSkill(\"banruomrfz2\");\r\n\t\t\t\t\t\tplayer.logSkill(\"banruomrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget: function (card, player, target, current) {\r\n\t\t\t\t\t\tif (!player.storage.banruomrfz) return;\r\n\t\t\t\t\t\tif (get.tag(card, \"damage\")) return \"zerotarget\";\r\n\t\t\t\t\t\tif (get.type(card) == \"trick\" && get.tag(card, \"damage\")) {\r\n\t\t\t\t\t\t\treturn \"zeroplayertarget\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tbanruomrfz2: {\r\n\t\t\tmark: true,\r\n\t\t\tonremove: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"星熊放下了她的盾\",\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tif (card.name == \"sha\") return (num += 1);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"banruomrfz2_damage\", \"banruomrfz2_lose\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tusable: 1,\r\n\t\t\t\t\ttrigger: { source: \"damageBegin\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t\tplayer.logSkill(\"banruomrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tlose: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeSkill(\"banruomrfz2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tyizhongmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"damageBegin3\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn get.distance(player, event.player) <= 1 && event.player != player && player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.player) > 0;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"是否弃置一张牌并为\" + get.translation(event.player) + \"承担伤害\";\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.chooseToDiscard(true, \"he\");\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t\tplayer.damage(trigger.num, trigger.source || \"nosource\", \"nocard\");\r\n\t\t\t},\r\n\t\t\tgroup: \"yizhongmrfz2\",\r\n\t\t},\r\n\t\tyizhongmrfz2: {\r\n\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\tfirstDo: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.getParent().name == \"yizhongmrfz\";\r\n\t\t\t},\r\n\t\t\tprompt: \"是否摸两张牌\",\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.draw(2);\r\n\t\t\t},\r\n\t\t},\r\n\t\t//卡涅利安\r\n\t\tshazhenmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\tmark: true,\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.shazhenmrfz = false;\r\n\t\t\t\tplayer.syncStorage(\"shazhenmrfz\");\r\n\t\t\t},\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (storage, player, skill) {\r\n\t\t\t\t\tif (!player.storage.shazhenmrfz || game.roundNumber == 1) return \"沙暴环绕着卡涅利安</br>【沙阵】剩余次数：\" + (2 - player.countMark(\"shazhenmrfz_damage\"));\r\n\t\t\t\t\treturn \"沙暴散去\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\ttrigger: { player: \"damageBegin3\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (game.roundNumber == 1 || !player.storage.shazhenmrfz) && player.countMark(\"shazhenmrfz_damage\") < 2;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.num--;\r\n\t\t\t\tplayer.addMark(\"shazhenmrfz_damage\", false);\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcardBase: function (player, num) {\r\n\t\t\t\t\tif (!player.storage.shazhenmrfz) return (num += 2);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"shazhenmrfz_damage\", \"shazhenmrfz_clear\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn !event.player.hasMark(\"shacanmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.shazhenmrfz = true;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.storage.shazhenmrfz || player.countMark(\"shazhenmrfz_damage\") > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.shazhenmrfz = false;\r\n\t\t\t\t\t\tplayer.removeMark(\"shazhenmrfz_damage\", player.countMark(\"shazhenmrfz_damage\"));\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshacanmrfz: {\r\n\t\t\tmarktext: \"噬\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"噬\",\r\n\t\t\t\tcontent: function (storage, player, skill) {\r\n\t\t\t\t\treturn \"<span class=firetext>食噬之印</span></br>还需交给卡涅利安\" + (2 - player.countMark(\"shacanmrfz2\")) + \"张牌即可消除一个‘噬’标记\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\taudio: 2,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.player.isAlive() && event.player.countMark(\"shacanmrfz\") < 2;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"是否令\" + get.translation(event.player) + \"获得一个‘噬’标记\";\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.player) <= 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.player.addMark(\"shacanmrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"shacanmrfz_remove\", \"shacanmrfz_gain\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tremove: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"gainEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.source && event.source.isAlive() && event.source != player && event.source.hasMark(\"shacanmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlogTarget: \"source\",\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar target = trigger.source;\r\n\t\t\t\t\t\tvar num = target.countMark(\"shacanmrfz2\");\r\n\t\t\t\t\t\t(\"step 0\");\r\n\t\t\t\t\t\ttarget.addMark(\"shacanmrfz2\", trigger.cards.length, false);\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (num > 1) {\r\n\t\t\t\t\t\t\ttarget.removeMark(\"shacanmrfz\", Math.floor(num / 2));\r\n\t\t\t\t\t\t\ttarget.removeMark(\"shacanmrfz2\", Math.floor(num / 2) * 2);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tgain: {\r\n\t\t\t\t\ttrigger: { global: \"phaseUseBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.hasMark(\"shacanmrfz\") && (player.getDamagedHp() > 0 || event.player.countCards(\"he\") > 0);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar target = trigger.player;\r\n\t\t\t\t\t\t(\"step 0\");\r\n\t\t\t\t\t\tvar list = [];\r\n\t\t\t\t\t\tif (player.getDamagedHp() > 0) list.add(\"回血\");\r\n\t\t\t\t\t\tif (target.countCards(\"he\") > 0) list.add(\"交牌\");\r\n\t\t\t\t\t\ttarget\r\n\t\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t\t.set(\"prompt\", \"选择一项\")\r\n\t\t\t\t\t\t\t.set(\"ai\", function (player) {\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.control == \"cancel2\") event.finish();\r\n\t\t\t\t\t\tif (result.control == \"回血\") {\r\n\t\t\t\t\t\t\tplayer.recover();\r\n\t\t\t\t\t\t\ttarget.removeMark(\"shacanmrfz\");\r\n\t\t\t\t\t\t\tplayer.logSkill(\"shacanmrfz\");\r\n\t\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (result.control == \"交牌\") {\r\n\t\t\t\t\t\t\tif (target.countCards(\"he\") > 1)\r\n\t\t\t\t\t\t\t\ttarget.chooseCard(2, \"展示两张牌\", true, \"he\").set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\t\t\treturn get.value(card);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\telse target.chooseCard(1, \"展示两张手牌\", true, \"he\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tif (result.bool && result.cards && result.cards.length) {\r\n\t\t\t\t\t\t\tif (result.cards.length == 1) {\r\n\t\t\t\t\t\t\t\tevent._result = {\r\n\t\t\t\t\t\t\t\t\tbool: true,\r\n\t\t\t\t\t\t\t\t\tlinks: result.cards.slice(0),\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t\t\tplayer.chooseButton([\"选择获得其中的一张牌\", result.cards], true).ai = function (button) {\r\n\t\t\t\t\t\t\t\t\treturn get.value(button.link);\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 3\");\r\n\t\t\t\t\t\tif (result.links) {\r\n\t\t\t\t\t\t\tplayer.gain(result.links, target, \"give\");\r\n\t\t\t\t\t\t\tplayer.logSkill(\"shacanmrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshacanmrfz2: {\r\n\t\t\t//检测用技能，无实际意义\r\n\t\t},\r\n\t\tshahuanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && target.countMark(\"shacanmrfz\") < 1;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttarget.addMark(\"shacanmrfz\");\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 10,\r\n\t\t\t\texpose: 0.4,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: -1,\r\n\t\t\t\t},\r\n\t\t\t\tthreaten: 2,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//陈\r\n\t\tdanweimrfz: {\r\n\t\t\tonremove: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"已有#个胆\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tusable: 2,\r\n\t\t\ttrigger: { global: [\"respond\", \"useCard\"] },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!event.respondTo) return false;\r\n\t\t\t\tif (player != event.respondTo[0]) return false;\r\n\t\t\t\treturn event.cards.filterInD(\"od\").length > 0;\r\n\t\t\t},\r\n\t\t\tlogTarget: \"player\",\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar cards = trigger.cards.filterInD(\"od\");\r\n\t\t\t\tplayer.gain(cards, \"log\", \"gain2\");\r\n\t\t\t\tplayer.addMark(\"danweimrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"danweimrfz_use\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tuse: {\r\n\t\t\t\t\ttrigger: { player: [\"respond\", \"useCard\"] },\r\n\t\t\t\t\tusable: 2,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!event.respondTo) return false;\r\n\t\t\t\t\t\treturn event.cards.filterInD(\"od\").length > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlogTarget: \"player\",\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar cards = [];\r\n\t\t\t\t\t\tif (get.itemtype(trigger.respondTo[1]) == \"card\") cards.push(trigger.respondTo[1]);\r\n\t\t\t\t\t\telse if (trigger.respondTo[1].cards) cards.addArray(trigger.respondTo[1].cards);\r\n\t\t\t\t\t\tcards = cards.filterInD(\"od\");\r\n\t\t\t\t\t\tplayer.gain(cards, \"gain2\", \"log\");\r\n\t\t\t\t\t\tplayer.logSkill(\"danweimrfz\");\r\n\t\t\t\t\t\tplayer.addMark(\"danweimrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thechimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tselectTarget: 1,\r\n\t\t\tfilterTarget: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"danweimrfz\") > 0 || player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tif (player.countCards(\"h\") == 0) event._result = { index: 1 };\r\n\t\t\t\tif (player.countMark(\"danweimrfz\") == 0) event._result = { index: 0 };\r\n\t\t\t\tif (player.countMark(\"danweimrfz\") > 0 && player.countCards(\"h\") > 0)\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.chooseControl()\r\n\t\t\t\t\t\t.set(\"choiceList\", [\r\n\t\t\t\t\t\t\t\"弃置一张手牌\", //0\r\n\t\t\t\t\t\t\t\"失去一个‘胆’\", //1\r\n\t\t\t\t\t\t])\r\n\t\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tplayer.hasCard(function (card) {\r\n\t\t\t\t\t\t\t\t\treturn get.value(card) < 7;\r\n\t\t\t\t\t\t\t\t}, \"h\")\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.index == 0) {\r\n\t\t\t\t\tplayer.chooseToDiscard(true, \"h\", \"弃置一张手牌\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.removeMark(\"danweimrfz\");\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (!target.hasSkill(\"hechimrfz2\")) target.addSkill(\"hechimrfz2\");\r\n\t\t\t\ttarget.addMark(\"hechimrfz2\");\r\n\t\t\t\ttarget.draw(2);\r\n\t\t\t\tif (target != player) player.draw();\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t},\r\n\t\t},\r\n\t\thechimrfz2: {\r\n\t\t\tonremove: true,\r\n\t\t\tmark: true,\r\n\t\t\tmarktext: \"斥\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"呵斥\",\r\n\t\t\t\tcontent: \"受到了陈的*龙门粗口*，手牌上限-#\",\r\n\t\t\t},\r\n\t\t\ttrigger: { player: \"phaseDiscardEnd\" },\r\n\t\t\tforced: true,\r\n\t\t\tcharlotte: true,\r\n\t\t\tsilent: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.removeMark(\"hechimrfz2\", player.countMark(\"hechimrfz2\"));\r\n\t\t\t\tplayer.removeSkill(\"hechimrfz2\");\r\n\t\t\t\t//彩蛋\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (Math.random() < 0.1) player.logSkill(\"chencaidanmrfz\");\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcardBase: function (player, num) {\r\n\t\t\t\t\treturn (num -= player.countMark(\"hechimrfz2\"));\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tjueyingmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"danweimrfz\") >= 5;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.removeMark(\"danweimrfz\", 5);\r\n\t\t\t\tevent.num = 0;\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tevent.num++;\r\n\t\t\t\tplayer.chooseUseTarget(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\tnature: \"thunder\",\r\n\t\t\t\t\t\tisCard: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"请选择雷【杀】的目标（雷【杀】：\" + event.num + \"/2；普通【杀】:0/1）\",\r\n\t\t\t\t\tfalse,\r\n\t\t\t\t\t\"nodistance\"\r\n\t\t\t\t);\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (result.bool && event.num < 2) event.goto(1);\r\n\t\t\t\telse\r\n\t\t\t\t\tplayer.chooseUseTarget(\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\t\tisCard: true,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\"请选择【杀】的目标（雷【杀】：2/2；普通【杀】:1/1）\",\r\n\t\t\t\t\t\tfalse,\r\n\t\t\t\t\t\t\"nodistance\"\r\n\t\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\tchencaidanmrfz: {\r\n\t\t\t//彩蛋\r\n\t\t\taudio: 3,\r\n\t\t},\r\n\t\tnewjingsimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tzhuSkill: true,\r\n\t\t\ttrigger: { global: \"useCardToTarget\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.hasSkill(\"newjingsimrfz_ban\")) return false;\r\n\t\t\t\tif (event.targets.length > 1) return false;\r\n\t\t\t\tif (event.player == player || event.target == player || event.source == player || player == _status.currentPhase) return false;\r\n\t\t\t\treturn event.card.name == \"sha\" || event.card.name == \"juedou\";\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar target = trigger.target,\r\n\t\t\t\t\tcard = trigger.card;\r\n\t\t\t\ttarget.chooseBool(\"【警司】：是否请求将此\" + get.translation(trigger.card) + \"的目标改为\" + get.translation(player) + \"?\").set(\"ai\", function () {\r\n\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\ttarget = _status.event.getTrigger().player;\r\n\t\t\t\t\treturn get.attitude(player, target) > 2;\r\n\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.chooseBool(\"【警司】：是否接受\" + get.translation(trigger.player) + \"的请求，令\" + get.translation(trigger.card) + \"的目标改为你？\")\r\n\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\t\t\ttarget = _status.event.getTrigger().player;\r\n\t\t\t\t\t\t\tvar nametmp = _status.event.name;\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tnametmp == \"sha\" &&\r\n\t\t\t\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\t\t\treturn card.name == \"shan\";\r\n\t\t\t\t\t\t\t\t}) < 1\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tnametmp == \"juedou\" &&\r\n\t\t\t\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\t\t\treturn card.name == \"sha\";\r\n\t\t\t\t\t\t\t\t}) < 2\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\tif (player.hp < 3) return false;\r\n\t\t\t\t\t\t\treturn get.attitude(player, target) > 2;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"name\", trigger.card.name);\r\n\t\t\t\t} else event.finish();\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\tplayer.addMark(\"danweimrfz\");\r\n\t\t\t\t\tplayer.addTempSkill(\"newjingsimrfz_ban\", \"phaseEnd\");\r\n\t\t\t\t\tvar target = trigger.target;\r\n\t\t\t\t\ttrigger.targets.remove(target);\r\n\t\t\t\t\ttrigger.getParent().triggeredTargets1.remove(target);\r\n\t\t\t\t\ttrigger.untrigger();\r\n\t\t\t\t\tgame.delayx();\r\n\t\t\t\t} else event.finish();\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\ttrigger.targets.push(player);\r\n\t\t\t\ttrigger.player.line(player, \"fire\");\r\n\t\t\t\tgame.log(trigger.card, \"的目标被改为\", player);\r\n\t\t\t\tplayer.logSkill(\"newjingsimrfz\");\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//新艾雅法拉\r\n\t\tluanhuomrfz: {\r\n\t\t\tonremove: true,\r\n\t\t\tmarktext: \"火\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"乱火\",\r\n\t\t\t\tcontent: \"本轮已执行回合数：#\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"damageBegin2\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.nature == \"fire\";\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t\tplayer.logSkill(\"luanhuomrfz\");\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tnofire: true,\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget: function (card, player, target, current) {\r\n\t\t\t\t\t\tif (get.tag(card, \"fireDamage\")) return \"zerotarget\";\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"luanhuomrfz_fire\", \"luanhuomrfz_times\", \"luanhuomrfz_clear\", \"luanhuomrfz_damage\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tfire: {\r\n\t\t\t\t\ttrigger: { source: \"damageBegin\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.nature != \"fire\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t\ttrigger.player.damage(trigger.num, player, \"fire\");\r\n\t\t\t\t\t\tplayer.logSkill(\"luanhuomrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttimes: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addMark(\"luanhuomrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.countMark(\"luanhuomrfz\") > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeMark(\"luanhuomrfz\", player.countMark(\"luanhuomrfz\"));\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar num = player.countMark(\"luanhuomrfz\");\r\n\t\t\t\t\t\tvar str1 = \"对至多\" + get.cnNumber(num, true) + \"名其他角色造成一点伤害\";\r\n\t\t\t\t\t\tvar str2 = \"对一名其他角色造成\" + get.cnNumber(num, true) + \"点伤害\";\r\n\t\t\t\t\t\t(\"step 0\");\r\n\t\t\t\t\t\tif (num == 1) {\r\n\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t.chooseTarget(get.prompt2(\"luanhuomrfz\"), function (card, player, target) {\r\n\t\t\t\t\t\t\t\t\treturn player != target;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\t\treturn get.damageEffect(target, player, player);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tplayer.chooseControl(str1, str2).set(\"ai\", function (event, player) {\r\n\t\t\t\t\t\t\t\tif (num > 2) return 0;\r\n\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool && num == 1) {\r\n\t\t\t\t\t\t\tresult.targets[0].damage();\r\n\t\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\t\tplayer.logSkill(\"luanhuomrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (result.control == str1 && num > 1) {\r\n\t\t\t\t\t\t\tplayer.storage.luanhuomrfz_damage = true;\r\n\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t.chooseTarget([1, num], \"对至多\" + get.cnNumber(num, true) + \"名其他角色造成一点伤害\", function (card, player, target) {\r\n\t\t\t\t\t\t\t\t\treturn player != target;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\t\treturn get.damageEffect(target, player, player);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else if (result.control == str2 && num > 1) {\r\n\t\t\t\t\t\t\tplayer.storage.luanhuomrfz_damage = false;\r\n\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t.chooseTarget(\"对一名其他角色造成\" + get.cnNumber(num, true) + \"点伤害\", function (card, player, target) {\r\n\t\t\t\t\t\t\t\t\treturn player != target;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\t\treturn get.damageEffect(target, player, player);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tif (result.bool && !player.storage.luanhuomrfz_damage) {\r\n\t\t\t\t\t\t\tresult.targets[0].damage(num);\r\n\t\t\t\t\t\t\tplayer.logSkill(\"luanhuomrfz\");\r\n\t\t\t\t\t\t} else if (result.bool && player.storage.luanhuomrfz_damage) {\r\n\t\t\t\t\t\t\tplayer.logSkill(\"luanhuomrfz\");\r\n\t\t\t\t\t\t\tfor (var i = 0; i < result.targets.length; i++) result.targets[i].damage(player);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tqingyanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseUseEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.hasMark(\"qingyanmrfz\")) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.getHistory(\"useCard\", function (evt) {\r\n\t\t\t\t\t\treturn evt.getParent(\"phaseUse\") == event;\r\n\t\t\t\t\t}).length > 0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar list = [];\r\n\t\t\t\tplayer.getHistory(\"useCard\", function (evt) {\r\n\t\t\t\t\tif (evt.getParent(\"phaseUse\") == trigger) list.add(get.type2(evt.card));\r\n\t\t\t\t});\r\n\t\t\t\tif (list.length >= 3) {\r\n\t\t\t\t\tplayer.chooseBool(\"【勤研】：是否于本回合结束后额外执行一个回合？\");\r\n\t\t\t\t} else event.finish();\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tplayer.insertPhase();\r\n\t\t\t\t\tplayer.addMark(\"qingyanmrfz\", false);\r\n\t\t\t\t\tplayer.logSkill(\"qingyanmrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"qingyanmrfz_clear\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"qingyanmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeMark(\"qingyanmrfz\", player.countMark(\"qingyanmrfz\"));\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//傀影\r\n\t\txuyingmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"expansion\",\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t},\r\n\t\t\tonremove: function (player, skill) {\r\n\t\t\t\tvar cards = player.getExpansions(skill);\r\n\t\t\t\tif (cards.length) player.loseToDiscardpile(cards);\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\tdirect: true,\r\n\t\t\tnotemp: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.xuyingmrfz_buff || !event.targets.length || player.hasSkill(\"xuyingmrfz_buff\")) return false;\r\n\t\t\t\tvar type = get.type(event.card, false);\r\n\t\t\t\tif (type != \"basic\" && type != \"trick\" && player.getExpansions(\"xuyingmrfz\").length > 0) return false;\r\n\t\t\t\treturn player.getExpansions(\"xuyingmrfz\").filter(function (magic) {\r\n\t\t\t\t\treturn get.type2(magic) != get.type2(event.card);\r\n\t\t\t\t}).length;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar cards = player.getExpansions(\"xuyingmrfz\").filter(function (magic) {\r\n\t\t\t\t\treturn get.type2(magic) != get.type2(trigger.card);\r\n\t\t\t\t});\r\n\t\t\t\tif (cards.length) player.chooseButton([\"你可以选择移去一张与你使用的牌类型不同的“虚影”，令此牌结算两次\", cards]);\r\n\t\t\t\telse event.finish();\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tplayer.logSkill(\"xuyingmrfz\");\r\n\t\t\t\t\tplayer.loseToDiscardpile(result.links);\r\n\t\t\t\t\tplayer.addTempSkill(\"xuyingmrfz_buff\", \"phaseUseAfter\");\r\n\t\t\t\t\ttrigger.xuyingmrfz_buff = player;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"xuyingmrfz_discard\", \"xuyingmrfz_judge\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdiscard: {\r\n\t\t\t\t\taudio: 2,\r\n\t\t\t\t\ttrigger: { global: \"loseAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.type != \"discard\" || event.getlx === false) return false;\r\n\t\t\t\t\t\tif (player.getExpansions(\"xuyingmrfz\").length >= 3) return false;\r\n\t\t\t\t\t\tvar cards = event.cards.slice(0);\r\n\t\t\t\t\t\tvar evt = event.getl(player);\r\n\t\t\t\t\t\tfor (var i = 0; i < cards.length; i++) {\r\n\t\t\t\t\t\t\tif (cards[i].original != \"j\" && get.suit(cards[i], event.player) == \"spade\" && get.position(cards[i], true) == \"d\") {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tif (trigger.delay == false) game.delay();\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tvar cards = [],\r\n\t\t\t\t\t\t\tcards2 = trigger.cards.slice(0),\r\n\t\t\t\t\t\t\tevt = trigger.getl(player);\r\n\t\t\t\t\t\tvar num = player.getExpansions(\"xuyingmrfz\").length;\r\n\t\t\t\t\t\tfor (var i = 0; i < cards2.length; i++) {\r\n\t\t\t\t\t\t\tif (cards2[i].original != \"j\" && get.suit(cards2[i], trigger.player) == \"spade\" && get.position(cards2[i], true) == \"d\") {\r\n\t\t\t\t\t\t\t\tcards.push(cards2[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (cards.length && num + cards.length <= 3) {\r\n\t\t\t\t\t\t\tplayer.chooseButton([\"虚影：选择置于武将牌上的牌\", cards], [1, cards.length]).set(\"ai\", function (button) {\r\n\t\t\t\t\t\t\t\treturn get.value(button.link, _status.event.player, \"raw\");\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else if (cards.length) {\r\n\t\t\t\t\t\t\tplayer.chooseButton([\"虚影：选择置于武将牌上的牌\", cards], [1, 3 - num]).set(\"ai\", function (button) {\r\n\t\t\t\t\t\t\t\treturn get.value(button.link, _status.event.player, \"raw\");\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tif (result.bool && result.links.length) {\r\n\t\t\t\t\t\t\tplayer.logSkill(\"xuyingmrfz\");\r\n\t\t\t\t\t\t\tplayer.addToExpansion(result.links, player, \"giveAuto\").gaintag.add(\"xuyingmrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tjudge: {\r\n\t\t\t\t\taudio: 2,\r\n\t\t\t\t\ttrigger: { global: \"cardsDiscardAfter\" },\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar evt = event.getParent().relatedEvent;\r\n\t\t\t\t\t\tif (!evt || evt.name != \"judge\") return;\r\n\t\t\t\t\t\tif (player.getExpansions(\"xuyingmrfz\").length >= 3) return false;\r\n\t\t\t\t\t\tif (get.position(event.cards[0], true) != \"d\") return false;\r\n\t\t\t\t\t\treturn get.suit(event.cards[0]) == \"spade\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tvar card = trigger.cards.length;\r\n\t\t\t\t\t\tvar num = player.getExpansions(\"xuyingmrfz\").length;\r\n\t\t\t\t\t\tif (card + num <= 3)\r\n\t\t\t\t\t\t\tplayer.chooseButton([\"虚影：选择置于武将牌上的牌\", trigger.cards], [1, card]).set(\"ai\", function (button) {\r\n\t\t\t\t\t\t\t\treturn get.value(button.link, _status.event.player, \"raw\");\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tplayer.chooseButton([\"虚影：选择置于武将牌上的牌\", trigger.cards], [1, 3 - num]).set(\"ai\", function (button) {\r\n\t\t\t\t\t\t\t\treturn get.value(button.link, _status.event.player, \"raw\");\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool && result.links.length) {\r\n\t\t\t\t\t\t\tplayer.logSkill(\"xuyingmrfz\");\r\n\t\t\t\t\t\t\tplayer.addToExpansion(result.links, player, \"giveAuto\").gaintag.add(\"xuyingmrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tbuff: {\r\n\t\t\t\t\ttrigger: { global: \"useCardToTargeted\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.parent.xuyingmrfz_buff == player && event.targets.length == event.parent.triggeredTargets4.length;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.getParent().targets = trigger.getParent().targets.concat(trigger.targets);\r\n\t\t\t\t\t\ttrigger.getParent().triggeredTargets4 = trigger.getParent().triggeredTargets4.concat(trigger.targets);\r\n\t\t\t\t\t\tplayer.removeSkill(\"xuyingmrfz_buff\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txuegemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(function (target) {\r\n\t\t\t\t\treturn target != player && player.inRange(target);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(function (target) {\r\n\t\t\t\t\treturn target != player && get.attitude(player, target) < 2 && player.inRange(target);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.chooseTarget(\"请选择【血歌】的目标\", \"对一名你的攻击范围内其他角色造成一点伤害\", true, function (card, player, target) {\r\n\t\t\t\t\treturn target != player && player.inRange(target);\r\n\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\treturn -get.attitude(player, target);\r\n\t\t\t\t};\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tplayer.line(result.targets);\r\n\t\t\t\t\tresult.targets[0].damage();\r\n\t\t\t\t\tif (result.targets[0].hp > player.hp || player.getExpansions(\"xuyingmrfz\").length >= 3) event.finish();\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (player.countCards(\"he\") && player.getExpansions(\"xuyingmrfz\").length < 3) {\r\n\t\t\t\t\tplayer.chooseCard(\"你可以将一张牌置于武将牌上作为“虚影”\", \"he\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tif (result.cards && result.cards.length) {\r\n\t\t\t\t\tplayer.addToExpansion(result.cards, player, \"giveAuto\").gaintag.add(\"xuyingmrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\thuanxiangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.card && (event.card.name == \"shan\" || event.card.name == \"wuxie\");\r\n\t\t\t},\r\n\t\t\tfrequent: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.draw();\r\n\t\t\t},\r\n\t\t},\r\n\t\t//莫斯提马\r\n\t\thuanshimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\tgetNum: function () {\r\n\t\t\t\tvar num = 0;\r\n\t\t\t\tgame.getGlobalHistory(\"cardMove\", function (evt) {\r\n\t\t\t\t\tif (evt.name == \"lose\" && evt.type == \"discard\") num += evt.cards2.length;\r\n\t\t\t\t});\r\n\t\t\t\treturn num;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tlib.skill.huanshimrfz.getNum() > 0 &&\r\n\t\t\t\t\tgame.hasPlayer(function (target) {\r\n\t\t\t\t\t\treturn target != player && !player.hasSkill(\"huanshimrfz_buff1\");\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar num = lib.skill.huanshimrfz.getNum();\r\n\t\t\t\t(\"step 0\");\r\n\t\t\t\tplayer.chooseTarget(get.prompt(\"huanshimrfz\"), \"你可以选择至多\" + get.cnNumber(num) + \"名角色令其下个回合内：①其使用的第一张【杀】指定目标时，取消之，然后其获得这张【杀】。\", [1, num], function (card, player, target) {\r\n\t\t\t\t\treturn target != player && !player.hasSkill(\"huanshimrfz_buff1\");\r\n\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\treturn -get.attitude(player, target);\r\n\t\t\t\t};\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tfor (var i of result.targets) {\r\n\t\t\t\t\t\ti.addSkill([\"huanshimrfz_buff1\", \"huanshimrfz_buff2\"]);\r\n\t\t\t\t\t\tplayer.line(i);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplayer.logSkill(\"huanshimrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\ttmp: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\tbuff1: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.hasSkill(\"huanshimrfz_tmp\")) return false;\r\n\t\t\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar cards = [];\r\n\t\t\t\t\t\tfor (var i = 0; i < trigger.cards.length; i++) {\r\n\t\t\t\t\t\t\tif (get.position(trigger.cards[i], true) == \"o\") {\r\n\t\t\t\t\t\t\t\tcards.push(trigger.cards[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tplayer.gain(cards, \"gain2\");\r\n\t\t\t\t\t\ttrigger.getParent().excluded.addArray(trigger.targets);\r\n\t\t\t\t\t\tplayer.addTempSkill(\"huanshimrfz_tmp\", \"phaseEnd\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tbuff2: {\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tmarktext: \"缓\",\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tname: \"主观缓时\",\r\n\t\t\t\t\t\tcontent: \"行动受到限制\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasSkill(\"huanshimrfz_buff1\") || player.hasSkill(\"huanshimrfz_buff2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeSkill(\"huanshimrfz_buff1\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"huanshimrfz_buff2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshishimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"drawBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (event.getParent(\"phaseDraw\") && event.getParent(\"phaseDraw\").player == player) || (event.getParent(\"phaseUse\") && event.getParent(\"phaseUse\").player == player);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.num += player.countMark(\"shishimrfz\") + 1;\r\n\t\t\t\tplayer.addMark(\"shishimrfz\", false);\r\n\t\t\t},\r\n\t\t\tgroup: \"shishimrfz_discard\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdiscard: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDiscardBefore\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"shishimrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar num = player.countMark(\"shishimrfz\");\r\n\t\t\t\t\t\tplayer.chooseToDiscard(get.prompt(\"shishimrfz\"), \"弃置\" + get.cnNumber(num) + \"张牌\", \"he\", true, num);\r\n\t\t\t\t\t\tplayer.removeMark(\"shishimrfz\", num, false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tjiemimrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar num = player.countMark(\"jiemimrfz\") + 1;\r\n\t\t\t\t\tif (player != _status.currentPhase && player.countMark(\"jiemimrfz\") % 2 == 1) return \"弃置\" + get.cnNumber(num) + \"张牌\";\r\n\t\t\t\t\tif (player != _status.currentPhase && player.countMark(\"jiemimrfz\") % 2 != 1) return \"摸\" + get.cnNumber(num) + \"张牌\";\r\n\t\t\t\t\tif (player == _status.currentPhase && player.countMark(\"jiemimrfz\") % 2 == 1) return \"摸\" + get.cnNumber(num) + \"张牌\";\r\n\t\t\t\t\tif (player == _status.currentPhase && player.countMark(\"jiemimrfz\") % 2 != 1) return \"弃置\" + get.cnNumber(num) + \"张牌\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tcharlotte: true,\r\n\t\t\tonremove: true,\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.hasMark(\"jiemimrfz\");\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.removeMark(\"jiemimrfz\", player.countMark(\"jiemimrfz\"));\r\n\t\t\t},\r\n\t\t\tgroup: [\"jiemimrfz_cw\", \"jiemimrfz_zd\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tcw: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { target: \"useCardToTargeted\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player != _status.currentPhase;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer.addMark(\"jiemimrfz\");\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (player.countMark(\"jiemimrfz\") % 2 == 1) player.draw(player.countMark(\"jiemimrfz\"));\r\n\t\t\t\t\t\telse player.chooseToDiscard(\"弃置\" + get.cnNumber(player.countMark(\"jiemimrfz\")) + \"张手牌\", player.countMark(\"jiemimrfz\"), true, \"h\");\r\n\t\t\t\t\t\tplayer.logSkill(\"jiemimrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tzd: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"useCardToTargeted\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player != _status.currentPhase) return false;\r\n\t\t\t\t\t\treturn event.target != player && event.targets.length == 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer.addMark(\"jiemimrfz\");\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (player.countMark(\"jiemimrfz\") % 2 == 1) player.chooseToDiscard(\"弃置\" + get.cnNumber(player.countMark(\"jiemimrfz\")) + \"张手牌\", player.countMark(\"jiemimrfz\"), true, \"h\");\r\n\t\t\t\t\t\telse player.draw(player.countMark(\"jiemimrfz\"));\r\n\t\t\t\t\t\tplayer.logSkill(\"jiemimrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshihuangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tusable: 2,\r\n\t\t\ttrigger: { player: \"loseAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.type != \"discard\" || event.getlx === false) return false;\r\n\t\t\t\tif (event.name.indexOf(\"lose\") != 0) return event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t\tvar evt = event.getl(player);\r\n\t\t\t\tvar num = 0;\r\n\t\t\t\tfor (var i = 0; i < evt.cards2.length; i++) {\r\n\t\t\t\t\tnum += evt.cards2[i].number;\r\n\t\t\t\t}\r\n\t\t\t\treturn num > player.hp * 2 && !player.hasSkill(\"shihuangmrfz2\");\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar num = 0;\r\n\t\t\t\tfor (var i = 0; i < trigger.cards.length; i++) {\r\n\t\t\t\t\tnum += trigger.cards[i].number;\r\n\t\t\t\t}\r\n\t\t\t\tplayer.addSkill(\"shihuangmrfz2\");\r\n\t\t\t\tplayer.gain(trigger.cards, \"gain2\", \"log\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tshihuangmrfz2: {\r\n\t\t\tdirect: true,\r\n\t\t\tsilent: true,\r\n\t\t\tcharlotte: true,\r\n\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.removeSkill(\"shihuangmrfz2\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tbaokemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tusable: 1,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.getParent(\"phaseUse\") && event.getParent(\"phaseUse\").player != player) return false;\r\n\t\t\t\tif (event.player == player) return false;\r\n\t\t\t\tif (!event.player.isAlive()) return false;\r\n\t\t\t\tif (event.nature) return true;\r\n\t\t\t\treturn event.player.getEquip(2);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.player.damage();\r\n\t\t\t},\r\n\t\t},\r\n\t\t//菲亚梅塔\r\n\t\tnanjiaomrfz: {\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.nanjiaomrfz = 0;\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\t\tif (game.players[i].isOut() || game.players[i] == player) continue;\r\n\t\t\t\t\t\tif (game.players[i].storage.nanjiaomrfz && game.players[i].storage.nanjiaomrfz != 0) {\r\n\t\t\t\t\t\t\tvar target = game.players[i];\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn \"你的手牌上限\" + (player.storage.nanjiaomrfz > 0 ? \"+\" : \"\") + Math.floor(player.storage.nanjiaomrfz / 2) + \"</br>\" + get.translation(target) + \"的手牌上限\" + (target.storage.nanjiaomrfz > 0 ? \"+\" : \" \") + Math.floor(target.storage.nanjiaomrfz / 2);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tforced: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\tif (current.storage.nanjiaomrfz) {\r\n\t\t\t\t\t\tcurrent.storage.nanjiaomrfz = 0;\r\n\t\t\t\t\t\tif (current != player) current.removeSkill(\"nanjiaomrfz_eff\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (!player.isMaxHandCardLimit(true)) {\r\n\t\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\t\tif (game.players[i].isOut() || game.players[i] == player) continue;\r\n\t\t\t\t\t\tif (game.players[i].isMaxHandCardLimit()) {\r\n\t\t\t\t\t\t\tplayer.storage.nanjiaomrfz = game.players[i].getHandcardLimit();\r\n\t\t\t\t\t\t\tgame.players[i].storage.nanjiaomrfz = -(game.players[i].getHandcardLimit() - 1);\r\n\t\t\t\t\t\t\tgame.players[i].addSkill(\"nanjiaomrfz_eff\");\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\t\tif (game.players[i].isOut() || game.players[i] == player) continue;\r\n\t\t\t\t\t\tif (game.players[i].isMinHandCardLimit()) {\r\n\t\t\t\t\t\t\tgame.players[i].storage.nanjiaomrfz = player.getHandcardLimit();\r\n\t\t\t\t\t\t\tplayer.storage.nanjiaomrfz = -(player.getHandcardLimit() - 1);\r\n\t\t\t\t\t\t\tgame.players[i].addSkill(\"nanjiaomrfz_eff\");\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"nanjiaomrfz_eff\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn num + Math.floor(player.storage.nanjiaomrfz / 2);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshunanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.hp > 1 && !player.hasSkill(\"lvwaimrfz_ban\");\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.loseHp();\r\n\t\t\t},\r\n\t\t\tgroup: [\"shunanmrfz_damage\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tsource: \"damageBegin3\",\r\n\t\t\t\t\t\tplayer: \"phaseDrawBegin2\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.countCards(\"h\") >= player.hp;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (player.getDamagedHp() <= player.maxHp / 2) trigger.num += 2;\r\n\t\t\t\t\t\telse trigger.num++;\r\n\t\t\t\t\t\tplayer.logSkill(\"shunanmrfza\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.2,\r\n\t\t\t},\r\n\t\t},\r\n\t\tshunanmrfza: {\r\n\t\t\taudio: 2,\r\n\t\t},\r\n\t\tlvwaimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tunique: true,\r\n\t\t\tmark: true,\r\n\t\t\tlimited: true,\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationStr: \"律外\",\r\n\t\t\tanimationColor: \"fire\",\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.lvwaimrfz = false;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.lvwaimrfz;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.awakenSkill(event.name);\r\n\t\t\t\tplayer.addSkill([\"lvwaimrfz_damage\", \"lvwaimrfz_ban\", \"lvwaimrfz_clear\", \"lvwaimrfz_sha\"]);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tplayer.chooseUseTarget({ name: \"sha\", isCard: true }, true, \"nodistance\");\r\n\t\t\t\tplayer.storage.lvwaimrfz = true;\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.draw(trigger.num);\r\n\t\t\t\t\t\tplayer.recover(trigger.num);\r\n\t\t\t\t\t\tplayer.removeSkill(\"lvwaimrfz_damage\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tban: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseBegin\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeSkill(\"lvwaimrfz_ban\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"shaAfter\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeSkill(\"lvwaimrfz_clear\");\r\n\t\t\t\t\t\tif (player.hasSkill(\"lvwaimrfz_damage\")) player.removeSkill(\"lvwaimrfz_damage\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tsha: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tfilter: function (event, card) {\r\n\t\t\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.directHit.addArray(game.players);\r\n\t\t\t\t\t\tplayer.removeSkill(\"lvwaimrfz_sha\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//棘刺\r\n\t\tchaoshengmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\treturn player.countMark(\"chaoshengmrfz\") + \"/\" + player.countMark(\"chaoshengmrfz2\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\tfrequent: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"chaoshengmrfz\") >= player.countMark(\"chaoshengmrfz2\");\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.removeMark(\"chaoshengmrfz\", player.countMark(\"chaoshengmrfz\"));\r\n\t\t\t\tif (player.countMark(\"jianshumrfz\") < 15) {\r\n\t\t\t\t\tplayer.chooseDrawRecover(2, true, function (event, player) {\r\n\t\t\t\t\t\tif (player.hp == 1 && player.isDamaged()) return \"recover_hp\";\r\n\t\t\t\t\t\treturn \"draw_card\";\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.draw(2);\r\n\t\t\t\t\tplayer.recover();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"chaoshengmrfz_limite\", \"chaoshengmrfz_gain\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tlimite: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addMark(\"chaoshengmrfz2\", 3, false);\r\n\t\t\t\t\t\tplayer.removeSkill(\"chaoshengmrfz_limite\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tgain: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (!player.getStat(\"damage\")) player.addMark(\"chaoshengmrfz\");\r\n\t\t\t\t\t\telse player.removeMark(\"chaoshengmrfz\", player.countMark(\"chaoshengmrfz\"));\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tjianshumrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar num = player.countMark(\"jianshumrfz\");\r\n\t\t\t\t\tif (num == 15) return \"【潮声】已修改</br>摸牌阶段摸牌数+1;攻击距离和【杀】的使用次数各+2\";\r\n\t\t\t\t\tif (num < 15 && num > 9) return \"已累计指定\" + num + \"次</br>摸牌阶段摸牌数+1;攻击距离和【杀】的使用次数各+2\";\r\n\t\t\t\t\tif (num < 10 && num > 4) return \"已累计指定\" + num + \"次</br>摸牌阶段摸牌数、攻击距离和【杀】的使用次数各+1\";\r\n\t\t\t\t\treturn \"已累计指定\" + num + \"次\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 3,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { player: \"useCardToTargeted\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"jianshumrfz\") < 15;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.addMark(\"jianshumrfz\");\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tvar num = player.countMark(\"jianshumrfz\");\r\n\t\t\t\tif (num % 5 == 0) {\r\n\t\t\t\t\tplayer.logSkill(\"jianshumrfz\");\r\n\t\t\t\t\tif (num == 5 || num == 15) player.removeMark(\"chaoshengmrfz2\");\r\n\t\t\t\t\tif (num == 10) player.addSkill(\"jianshumrfz_usesha\");\r\n\t\t\t\t\tif (num == 5 || 10) player.addMark(\"jianshumrfz_time\");\r\n\t\t\t\t\tif (num == 5) player.addMark(\"jianshumrfz_draw\");\r\n\t\t\t\t\tif (num == 5 || 10) player.addMark(\"jianshumrfz_range\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"jianshumrfz_time\", \"jianshumrfz_range\", \"jianshumrfz_draw\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\ttime: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num + player.countMark(\"jianshumrfz_time\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\trange: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tattackRange: function (player, num) {\r\n\t\t\t\t\t\t\treturn num + player.countMark(\"jianshumrfz_range\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"jianshumrfz_draw\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t\tplayer.logSkill(\"jianshumrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tusesha: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer.chooseTarget(\"选择一名其他角色视为对其使用一张【杀】\", function (card, player, target) {\r\n\t\t\t\t\t\t\treturn target != player && player.inRange(target);\r\n\t\t\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\t\t\treturn -get.attitude(player, target);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\t\t\tplayer.useCard({ name: \"sha\" }, true, false, target);\r\n\t\t\t\t\t\t\tplayer.logSkill(\"jianshumrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//夜莺\r\n\t\tqiulongmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"笼\",\r\n\t\t\t\tcontent: \"你获得了白恶魔的庇护\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.line2(\r\n\t\t\t\t\tgame\r\n\t\t\t\t\t\t.filterPlayer(function (current) {\r\n\t\t\t\t\t\t\tif (current.hasMark(\"qiulongmrfz\")) {\r\n\t\t\t\t\t\t\t\tcurrent.removeMark(\"qiulongmrfz\");\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.concat(result.targets),\r\n\t\t\t\t\t\"green\"\r\n\t\t\t\t);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tplayer.chooseTarget(\"你可以选择一名角色，令其获得‘笼’标记\", function (card, player, target) {\r\n\t\t\t\t\treturn target != player;\r\n\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\treturn get.attitude(player, target);\r\n\t\t\t\t};\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tresult.targets[0].addMark(\"qiulongmrfz\");\r\n\t\t\t\t\tplayer.logSkill(\"qiulongmrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"qiulongmrfz_damage\", \"qiulongmrfz_huan\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tremove: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"qiulongmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeMark(\"qiulongmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.hasMark(\"qiulongmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar num = trigger.num;\r\n\t\t\t\t\t\ttrigger.player.recover(num);\r\n\t\t\t\t\t\tplayer.damage(num, \"nosource\");\r\n\t\t\t\t\t\tplayer.addMark(\"qiulongmrfz_huan\", num * 2);\r\n\t\t\t\t\t\tplayer.logSkill(\"qiulongmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\thuan: {\r\n\t\t\t\t\tmarktext: \"幻影\",\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tname: \"幻\",\r\n\t\t\t\t\t\tcontent: \"幻影\",\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tbihumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"damageBegin3\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.nature;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t},\r\n\t\t\tgroup: \"bihumrfz_damage\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.source != undefined;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addMark(\"qiulongmrfz_huan\", trigger.num);\r\n\t\t\t\t\t\tplayer.logSkill(\"bihumrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tnofire: true,\r\n\t\t\t\tnothunder: true,\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget: function (card, player, target, current) {\r\n\t\t\t\t\t\tif (get.tag(card, \"natureDamage\")) return \"zerotarget\";\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshengyumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tforced: true,\r\n\t\t\tmark: true,\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.shengyumrfz = false;\r\n\t\t\t},\r\n\t\t\tderivation: [\"polongmrfz\"],\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.shengyumrfz;\r\n\t\t\t},\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tif (!player.storage.shengyumrfz) return \"圣域已准备就绪\";\r\n\t\t\t\t\treturn \"圣域充能中:\" + player.countMark(\"shengyumrfz_cd\") + \"/4\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tfilterTarget: true,\r\n\t\t\tselectTarget: [1, 3],\r\n\t\t\tmultitarget: true,\r\n\t\t\tmultiline: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tfor (var i of targets) i.addSkill(\"polongmrfz\");\r\n\t\t\t\tplayer.storage.shengyumrfz = true;\r\n\t\t\t\tplayer.recover(2);\r\n\t\t\t},\r\n\t\t\tgroup: \"shengyumrfz_cd\",\r\n\t\t\tai: {\r\n\t\t\t\torder: 10,\r\n\t\t\t\tthreaten: 2,\r\n\t\t\t\texpose: 0.8,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 10,\r\n\t\t\t\t\ttarget: 10,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tcd: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.storage.shengyumrfz == true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer.addMark(\"shengyumrfz_cd\", false);\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (player.countMark(\"shengyumrfz_cd\") >= 4) {\r\n\t\t\t\t\t\t\tplayer.storage.shengyumrfz = false;\r\n\t\t\t\t\t\t\tplayer.removeMark(\"shengyumrfz_cd\", player.countMark(\"shengyumrfz_cd\"));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tpolongmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"破笼\",\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tif (player.countMark(\"polongmrfz_round\") >= 3) return \"圣域持续时间:\" + player.countMark(\"polongmrfz_round\") + \"/3</br><span class=firetext>最后一轮</span>\";\r\n\t\t\t\t\treturn \"圣域持续时间:\" + player.countMark(\"polongmrfz_round\") + \"/3\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 5,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.getDamagedHp() == 0 && player.countMark(\"polongmrfz_mark1\") >= 3) return false;\r\n\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\treturn current.countMark(\"qiulongmrfz_huan\") > 0;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar list = [];\r\n\t\t\t\tif (player.countMark(\"polongmrfz_mark1\") < 3) list.add(\"摸牌\");\r\n\t\t\t\tif (player.countMark(\"polongmrfz_mark2\") < 2) list.add(\"回血\");\r\n\t\t\t\tif (player.getDamagedHp() != 0) {\r\n\t\t\t\t\tplayer.chooseControl(list, \"cancel2\").set(\"prompt\", get.prompt(\"polongmrfz\")).set(\"prompt2\", \"回复一点体力或摸一张牌\").ai = function (event, player) {\r\n\t\t\t\t\t\tif (player.hp == 1 && player.isDamaged()) return \"回血\";\r\n\t\t\t\t\t\treturn \"摸牌\";\r\n\t\t\t\t\t};\r\n\t\t\t\t} else {\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\tplayer.logSkill(\"polongmrfz\");\r\n\t\t\t\t\tplayer.addMark(\"polongmrfz_mark1\", false);\r\n\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\tcurrent.removeMark(\"qiulongmrfz_huan\");\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.control != \"cancel2\") {\r\n\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\tcurrent.removeMark(\"qiulongmrfz_huan\");\r\n\t\t\t\t\t});\r\n\t\t\t\t\tplayer.logSkill(\"polongmrfz\");\r\n\t\t\t\t\tif (result.control == \"摸牌\") {\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\tplayer.addMark(\"polongmrfz_mark1\", false);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (result.control == \"回血\") {\r\n\t\t\t\t\t\tplayer.recover();\r\n\t\t\t\t\t\tplayer.addMark(\"polongmrfz_mark2\", false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"polongmrfz_damage\", \"polongmrfz_remove\", \"polongmrfz_round\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\ttrigger: { player: \"damageBegin3\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn current.countMark(\"qiulongmrfz_huan\") > 0;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current.countMark(\"qiulongmrfz_huan\") > 3;\r\n\t\t\t\t\t\t\t}) || player.hp <= 2\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num--;\r\n\t\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\t\tcurrent.removeMark(\"qiulongmrfz_huan\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tremove: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseUseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"polongmrfz_mark1\") || player.hasMark(\"polongmrfz_mark2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeMark(\"polongmrfz_mark1\", player.countMark(\"polongmrfz_mark1\"));\r\n\t\t\t\t\t\tplayer.removeMark(\"polongmrfz_mark2\", player.countMark(\"polongmrfz_mark2\"));\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tround: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer.addMark(\"polongmrfz_round\", false);\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (player.countMark(\"polongmrfz_round\") > 3) player.removeSkill(\"polongmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tmark1: {},\r\n\t\t\t\tmark2: {},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 12,\r\n\t\t\t\tthreaten: 2,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 10,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//赫拉格\r\n\t\tyingkuimrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tcardname: function (card, player) {\r\n\t\t\t\t\tif (card.name == \"tao\") return \"sha\";\r\n\t\t\t\t},\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\treturn (num += 2);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\tfirstDo: true,\r\n\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (get.name(event.card) != \"sha\") return false;\r\n\t\t\t\treturn event.card && event.card.cards && event.card.cards.length == 1 && event.card.cards[0].name == \"tao\";\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\tskillTagFilter(player, tag, arg) {\r\n\t\t\t\t\tvar cards = arg.card.cards;\r\n\t\t\t\t\tif (get.name(arg.card) != \"sha\" || !cards || cards.length != 1) return false;\r\n\t\t\t\t\tif (cards[0].name != \"tao\") return false;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tyingkuimrfza: {\r\n\t\t\taudio: 2,\r\n\t\t},\r\n\t\tcangfengmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"#/2\",\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar mark = player.countMark(\"cangfengmrfz\");\r\n\t\t\t\t(\"step 0\");\r\n\t\t\t\tplayer.addMark(\"cangfengmrfz\", trigger.num, false);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (mark / 2 >= 1 && player.getDamagedHp() > 0) {\r\n\t\t\t\t\tplayer.chooseControl(\"摸牌\", \"回血\").set(\"prompt\", \"摸一张牌或回一点血\");\r\n\t\t\t\t} else if (mark / 2 < 1) event.finish();\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (result.control == \"回血\") player.recover();\r\n\t\t\t\telse player.draw();\r\n\t\t\t\tplayer.logSkill(\"cangfengmrfz\");\r\n\t\t\t\tplayer.removeMark(\"cangfengmrfz\", 2);\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tif (mark / 2 >= 1) event.goto(1);\r\n\t\t\t},\r\n\t\t},\r\n\t\tyuexiangmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar list = [];\r\n\t\t\t\t\tif (player.getDamagedHp() >= 3) {\r\n\t\t\t\t\t\tlist.push(\"<span class=firetext>满月</span> <span class=thundertext>弦月 新月</span></br>·你使用【杀】的次数+X（X=本阶段你使用杀的次数/2+1，向下取整）；出牌阶段限一次，你第一次使用【杀】造成的伤害+1</br>·出牌阶段使用的第一张【杀】结算两次</br>·出牌阶段你使用的第一张【杀】目标+1；攻击距离+2\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (player.getDamagedHp() == 2) {\r\n\t\t\t\t\t\tlist.push(\"满月 <span class=firetext>弦月</span> <span class=thundertext>新月</span></br>·你使用【杀】的次数+X（X=本阶段你使用杀的次数/2+1，向下取整）；出牌阶段限一次，你第一次使用【杀】造成的伤害+1</br>·出牌阶段使用的第一张【杀】结算两次\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (player.getDamagedHp() == 1) {\r\n\t\t\t\t\t\tlist.push(\"满月 弦月 <span class=firetext>新月</span></br>·你使用【杀】的次数+X（X=本阶段你使用杀的次数/2+1，向下取整）；出牌阶段限一次，你第一次使用【杀】造成的伤害+1\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (player.getDamagedHp() == 0) {\r\n\t\t\t\t\t\tlist.push(\"满月 弦月 新月\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn list;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 3,\r\n\t\t\ttrigger: { player: [\"phaseBefore\", \"changeHp\"] },\r\n\t\t\tdirect: true,\r\n\t\t\tpopup: false,\r\n\t\t\tmark: true,\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tif (game.online) return;\r\n\t\t\t\tplayer.removeAdditionalSkill(\"yuexiangmrfz\");\r\n\t\t\t\tvar list = [];\r\n\t\t\t\tif (player.getDamagedHp() >= 3) {\r\n\t\t\t\t\tlist.push(\"yuexiangmrfz_man\");\r\n\t\t\t\t}\r\n\t\t\t\tif (player.getDamagedHp() >= 2) {\r\n\t\t\t\t\tlist.push(\"yuexiangmrfz_xian\");\r\n\t\t\t\t}\r\n\t\t\t\tif (player.getDamagedHp() >= 1) {\r\n\t\t\t\t\tlist.push(\"yuexiangmrfz_xin\");\r\n\t\t\t\t}\r\n\t\t\t\tif (list.length) {\r\n\t\t\t\t\tplayer.addAdditionalSkill(\"yuexiangmrfz\", list);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.removeAdditionalSkill(\"yuexiangmrfz\");\r\n\t\t\t\tvar list = [];\r\n\t\t\t\tif (player.getDamagedHp() >= 3) {\r\n\t\t\t\t\tlist.push(\"yuexiangmrfz_man\");\r\n\t\t\t\t}\r\n\t\t\t\tif (player.getDamagedHp() >= 2) {\r\n\t\t\t\t\tlist.push(\"yuexiangmrfz_xian\");\r\n\t\t\t\t}\r\n\t\t\t\tif (player.getDamagedHp() >= 1) {\r\n\t\t\t\t\tif (trigger.num != undefined && trigger.num < 0 && player.getDamagedHp() - trigger.num > 1) player.logSkill(\"yingkuimrfza\");\r\n\t\t\t\t\tlist.push(\"yuexiangmrfz_xin\");\r\n\t\t\t\t}\r\n\t\t\t\tif (list.length) {\r\n\t\t\t\t\tplayer.addAdditionalSkill(\"yuexiangmrfz\", list);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tmaixie: true,\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget: function (card, player, target) {\r\n\t\t\t\t\t\tif (get.tag(card, \"damage\")) {\r\n\t\t\t\t\t\t\tif (!target.hasFriend()) return;\r\n\t\t\t\t\t\t\tif (target.hp >= 4) return [0, 1];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (get.tag(card, \"recover\") && player.hp >= player.maxHp - 2) return [0, 0];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: \"yuexiangmrfz_clear\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseUseEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.yuexiangmrfz_man = false;\r\n\t\t\t\t\t\tif (player.hasMark(\"yuexiangmrfz_xin\")) {\r\n\t\t\t\t\t\t\tplayer.removeMark(\"yuexiangmrfz_xin\", player.countMark(\"yuexiangmrfz_xin\"));\r\n\t\t\t\t\t\t\tplayer.unmarkSkill(\"yuexiangmrfz_xin\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tman: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { player: \"shaAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn !player.storage.yuexiangmrfz_man;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.yuexiangmrfz_man = true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tselectTarget: function (card, player, range) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\" && range[1] != -1 && !player.storage.yuexiangmrfz_man) range[1]++;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tattackRange: function (player, num) {\r\n\t\t\t\t\t\t\treturn (num += 2);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\txian: {\r\n\t\t\t\t\ttrigger: { player: \"useCardToTargeted\" },\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\tusable: 1,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card.name == \"sha\" && event.targets.length == event.parent.triggeredTargets4.length;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.getParent().targets = trigger.getParent().targets.concat(trigger.targets);\r\n\t\t\t\t\t\ttrigger.getParent().triggeredTargets4 = trigger.getParent().triggeredTargets4.concat(trigger.targets);\r\n\t\t\t\t\t\tplayer.logSkill(\"yuexiangmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\txin: {\r\n\t\t\t\t\tgroup: \"yuexiangmrfz_xin2\",\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return (num += Math.floor(player.countMark(\"yuexiangmrfz_xin\") / 2) + 1);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\t\t\treturn \"本回合使用【杀】的次数+\" + (Math.floor(player.countMark(\"yuexiangmrfz_xin\") / 2) + 1);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"shaAfter\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addMark(\"yuexiangmrfz_xin\");\r\n\t\t\t\t\t\tif (player.countMark(\"yuexiangmrfz_xin\") % 2 == 0) player.logSkill(\"yuexiangmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\txin2: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { source: \"damageBegin3\" },\r\n\t\t\t\t\tusable: 1,\r\n\t\t\t\t\tfilter: function (event) {\r\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//温蒂\r\n\t\tdanpaomrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"【氮炮】剩余次数：#\",\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.addMark(\"danpaomrfz\", 2);\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player;\r\n\t\t\t},\r\n\t\t\tselectTarget: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"danpaomrfz\") > 0 && player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tif (player.countCards(\"h\") > 0) player.chooseToDiscard(\"h\", true, player.countCards(\"h\"));\r\n\t\t\t\telse player.chooseToDiscard(\"he\", true, player.countCards(\"he\"));\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\ttarget.damage();\r\n\t\t\t\tif (player.hasMark(\"shuipaomrfz\")) {\r\n\t\t\t\t\tplayer.removeMark(\"shuipaomrfz\");\r\n\t\t\t\t\ttarget.addSkill(\"danpaomrfz_plus\");\r\n\t\t\t\t} else target.addSkill(\"danpaomrfz_nor\");\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tplayer.removeMark(\"danpaomrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: \"danpaomrfz_damage\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tplus: {\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"计算与其他角色距离+4；每使用一张牌受到一点伤害\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tglobalFrom: function (from, to, distance) {\r\n\t\t\t\t\t\t\treturn distance + 4;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeSkill(\"danpaomrfz_plus\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tnor: {\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"计算与其他角色距离+2；每使用两张牌受到一点伤害\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tglobalFrom: function (from, to, distance) {\r\n\t\t\t\t\t\t\treturn distance + 2;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeSkill(\"danpaomrfz_nor\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { global: \"useCard\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.hasSkill(\"danpaomrfz_nor\") || event.player.hasSkill(\"danpaomrfz_plus\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar target = trigger.player;\r\n\t\t\t\t\t\t(\"step 0\");\r\n\t\t\t\t\t\tif (target.hasSkill(\"danpaomrfz_nor\")) {\r\n\t\t\t\t\t\t\ttarget.addMark(\"danpaomrfz_nor\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tplayer.logSkill(\"danpaomrfz\", target);\r\n\t\t\t\t\t\t\ttarget.damage(\"player\");\r\n\t\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (target.countMark(\"danpaomrfz_nor\") >= 2) {\r\n\t\t\t\t\t\t\tplayer.logSkill(\"danpaomrfz\", target);\r\n\t\t\t\t\t\t\ttarget.damage(\"player\");\r\n\t\t\t\t\t\t\ttarget.removeMark(\"danpaomrfz_nor\", 2);\r\n\t\t\t\t\t\t} else event.finish();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: function (event, player) {\r\n\t\t\t\t\t\tvar cardh = player.getCards(\"h\"),\r\n\t\t\t\t\t\t\tcarde = player.getCards(\"e\");\r\n\t\t\t\t\t\tif (cardh.length == 0 && carde.length && carde.length < 2) return 1;\r\n\t\t\t\t\t\tif (cardh.length > 3) return -1;\r\n\t\t\t\t\t\tfor (var i = 0; i < cardh.length; i++) {\r\n\t\t\t\t\t\t\tif (get.value(cardh[i]) > 8) return 0.5;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\treturn get.damageEffect(target, player);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshuipaomrfz: {\r\n\t\t\tmarktext: \"蓄水\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"蓄水\",\r\n\t\t\t\tcontent: \"蓄水炮蓄水完毕</br>·【氮炮】中蓝色数字翻倍，红色数字-1</br>·【水炮①】中‘+1’改为‘+2’\",\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.shuipaomrfz = true;\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { source: \"damageBegin3\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.getEquip(1) && !player.hasMark(\"shuipaomrfz\") && event.getParent().name != \"danpaomrfz\";\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.addMark(\"shuipaomrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: \"shuipaomrfz_j\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tj: {\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\t\t\tif (player.hasSkill(\"shuipaomrfz_j2\")) return \"计算与其他角色的距离+2\";\r\n\t\t\t\t\t\t\treturn \"计算与其他角色的距离+1\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn !event.player.hasMark(\"shuipaomrfz_j\") && event.player != player && event.getParent().name != \"danpaomrfz\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (player.hasMark(\"shuipaomrfz\")) trigger.player.addSkill(\"shuipaomrfz_j2\");\r\n\t\t\t\t\t\telse trigger.player.addSkill(\"shuipaomrfz_j3\");\r\n\t\t\t\t\t\ttrigger.player.addMark(\"shuipaomrfz_j\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tj2: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeMark(\"shuipaomrfz_j\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"shuipaomrfz_j2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tglobalFrom: function (from, to, distance) {\r\n\t\t\t\t\t\t\treturn distance + 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tj3: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeMark(\"shuipaomrfz_j\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"shuipaomrfz_j3\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tglobalFrom: function (from, to, distance) {\r\n\t\t\t\t\t\t\treturn distance + 2;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tjiepimrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tcanBeDiscarded: function (card) {\r\n\t\t\t\t\tif (get.position(card) == \"e\") return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tglobal: \"jiepimrfz2\",\r\n\t\t},\r\n\t\tjiepimrfz2: {\r\n\t\t\tmod: {\r\n\t\t\t\tcanBeDiscarded: function (card) {\r\n\t\t\t\t\tif (get.position(card) == \"e\" && _status.currentPhase.isAlive() && _status.currentPhase.hasSkill(\"jiepimrfz\")) return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//森蚺\r\n\t\tjuezhanmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tselectTarget: function (card, player, range) {\r\n\t\t\t\t\tif (lib.skill.juezhanmrfz.isJuezhan(card) && card.name != \"jiedao\") range[1] = 1;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tisJuezhan: function (card) {\r\n\t\t\t\tvar info = lib.card[card.name];\r\n\t\t\t\tif (!info || (info.type != \"trick\" && info.type != \"delay\")) return false;\r\n\t\t\t\tif (info.notarget) return false;\r\n\t\t\t\tif (info.selectTarget != undefined) {\r\n\t\t\t\t\tif (Array.isArray(info.selectTarget)) {\r\n\t\t\t\t\t\tif (info.selectTarget[0] < 0) return !info.toself;\r\n\t\t\t\t\t\treturn info.selectTarget[0] != 1 || info.selectTarget[1] != 1;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (info.selectTarget < 0) return !info.toself;\r\n\t\t\t\t\t\treturn info.selectTarget != 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tmarktext: \"单挑\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"单挑\",\r\n\t\t\t\tcontent: \"和森蚺决一死战吧！\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { target: \"useCardToTargeted\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.card.name == \"sha\" && !event.player.hasMark(\"juezhanmrfz\");\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.player.addMark(\"juezhanmrfz\");\r\n\t\t\t\ttrigger.player.addSkill(\"juezhanmrfz_ta\");\r\n\t\t\t},\r\n\t\t\tgroup: \"juezhanmrfz_pl\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tta: {\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tplayerEnabled: function (card, player, target) {\r\n\t\t\t\t\t\t\tif (!target.hasSkill(\"juezhanmrfz\") && target != player) {\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tinRangeOf: function (from, to) {\r\n\t\t\t\t\t\t\tif (from.hasSkill(\"juezhanmrfz\")) return true;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: [\"phaseEnd\", \"die\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.hasSkill(\"juezhanmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeMark(\"juezhanmrfz\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"juezhanmrfz_ta\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tpl: {\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tplayerEnabled: function (card, player, target) {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t!target.hasMark(\"juezhanmrfz\") &&\r\n\t\t\t\t\t\t\t\ttarget != player &&\r\n\t\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\t\treturn current.countMark(\"juezhanmrfz\") > 0;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tinRangeOf: function (from, to) {\r\n\t\t\t\t\t\t\tif (from.hasMark(\"juezhanmrfz\")) return true;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshanxiemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"loseAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.countMark(\"shanxiemrfz\") > player.countCards(\"h\")) return false;\r\n\t\t\t\tif (event.type != \"discard\" || event.getlx === false) return false;\r\n\t\t\t\tvar cards = event.cards.slice(0);\r\n\t\t\t\tvar evt = event.getl(player);\r\n\t\t\t\tif (evt && evt.cards) cards.removeArray(evt.cards);\r\n\t\t\t\tfor (var i = 0; i < cards.length; i++) {\r\n\t\t\t\t\tif (cards[i].original != \"j\" && get.type(cards[i], event.player) == \"equip\" && get.position(cards[i], true) == \"d\") {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tif (player.countCards(\"h\") >= player.countMark(\"shanxiemrfz\") && player.countMark(\"shanxiemrfz\") > 0) {\r\n\t\t\t\t\tplayer.chooseToDiscard(get.prompt(\"shanxiemrfz\"), \"你可以弃置\" + get.cnNumber(player.countMark(\"shanxiemrfz\")) + \"张牌获得此装备牌\", false, player.countMark(\"shanxiemrfz\")).set(\"ai\", function (card) {\r\n\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (player.countMark(\"shanxiemrfz\") == 0) event.goto(2);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (trigger.delay == false) game.delay();\r\n\t\t\t\tif (!result.cards) event.finish();\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tvar cards = [],\r\n\t\t\t\t\tcards2 = trigger.cards.slice(0),\r\n\t\t\t\t\tevt = trigger.getl(player);\r\n\t\t\t\tif (evt && evt.cards) cards2.removeArray(evt.cards);\r\n\t\t\t\tfor (var i = 0; i < cards2.length; i++) {\r\n\t\t\t\t\tif (cards2[i].original != \"j\" && get.type(cards2[i], trigger.player) == \"equip\" && get.position(cards2[i], true) == \"d\") {\r\n\t\t\t\t\t\tcards.push(cards2[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tevent.num = cards.length;\r\n\t\t\t\tif (cards.length) {\r\n\t\t\t\t\tplayer.chooseButton([\"擅械：请选择获得一张牌\", cards], 1).set(\"ai\", function (button) {\r\n\t\t\t\t\t\treturn get.value(button.link, _status.event.player, \"raw\");\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tevent.num--;\r\n\t\t\t\t\tplayer.logSkill(\"shanxiemrfz\");\r\n\t\t\t\t\tplayer.gain(result.links, \"gain2\", \"log\");\r\n\t\t\t\t\tplayer.addMark(\"shanxiemrfz\", false);\r\n\t\t\t\t\tif (event.num > 0) event.goto(0);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"shanxiemrfz_sha\", \"shanxiemrfz_usesha\", \"shanxiemrfz_remove\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tsha: {\r\n\t\t\t\t\taudio: \"shanxiemrfz\",\r\n\t\t\t\t\tenable: [\"chooseToRespond\", \"chooseToUse\"],\r\n\t\t\t\t\tfilterCard: function (card, player) {\r\n\t\t\t\t\t\treturn get.type(card) == \"equip\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tposition: \"hes\",\r\n\t\t\t\t\tviewAs: { name: \"sha\" },\r\n\t\t\t\t\tprompt: \"将一张装备牌当杀使用或打出\",\r\n\t\t\t\t\tcheck: function (card) {\r\n\t\t\t\t\t\tvar val = get.value(card);\r\n\t\t\t\t\t\tif (_status.event.name == \"chooseToRespond\") return 1 / Math.max(0.1, val);\r\n\t\t\t\t\t\treturn 10 - val;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t\t\tif (!get.type(arg.card) == \"equip\") return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\trespondSha: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tusesha: {\r\n\t\t\t\t\ttrigger: { source: \"damageBegin3\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\" && event.player.hasMark(\"juezhanmrfz\") && get.type(event.cards[0], \"equip\") == \"equip\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t\tplayer.logSkill(\"shanxiemrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tremove: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeMark(\"shanxiemrfz\", player.countMark(\"shanxiemrfz\"));\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 2,\r\n\t\t\t},\r\n\t\t},\r\n\t\ttieyimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tmark: true,\r\n\t\t\tlimited: true,\r\n\t\t\tselectCard: [0, 3],\r\n\t\t\tfilterCard: true,\r\n\t\t\tposition: \"h\",\r\n\t\t\tprompt: \"弃置至多三张手牌，摸两倍于你弃置牌的牌\",\r\n\t\t\tdelay: 0,\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\treturn 6 - get.value(card) && get.name(card) != \"sha\" && get.type(card) != \"equip\";\r\n\t\t\t},\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.tieyimrfz = false;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.tieyimrfz;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.awakenSkill(event.name);\r\n\t\t\t\tplayer.node.avatar.setBackgroundImage(\"extension/WhichWay/image/skill/senrantieyumrfz.jpg\");\r\n\t\t\t\tplayer.node.name.innerHTML = get.translation(\"senrantieyumrfz\");\r\n\t\t\t\tplayer.draw(cards.length * 2);\r\n\t\t\t\tplayer.recover(2);\r\n\t\t\t\tplayer.turnOver();\r\n\t\t\t\tplayer.storage.tieyimrfz = true;\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (\r\n\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\treturn current != player && !current.hasMark(\"juezhanmrfz\");\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t\tplayer.chooseTarget(true, function (card, player, target) {\r\n\t\t\t\t\t\treturn target != player && !target.hasMark(\"juezhanmrfz\");\r\n\t\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\t\treturn -get.attitude(player, target);\r\n\t\t\t\t\t};\r\n\t\t\t\telse event.goto(3);\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\ttarget.addSkill(\"juezhanmrfz_ta\");\r\n\t\t\t\t\ttarget.addMark(\"juezhanmrfz\");\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tplayer.addTempSkill(\"tieyimrfz_use\");\r\n\t\t\t\tplayer.addTempSkill(\"tieyimrfz_discard\");\r\n\t\t\t\tplayer.addSkill(\"tieyimrfz_back\");\r\n\t\t\t},\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"limited\",\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tback: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: [\"dying\", \"phaseEnd\"] },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.node.avatar.setBackgroundImage(\"extension/WhichWay/image/senranmrfz.jpg\");\r\n\t\t\t\t\t\tplayer.node.name.innerHTML = get.translation(\"senranmrfz\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"tieyimrfz_back\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdiscard: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.countCards(\"h\") > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.chooseToDiscard(true, player.countCards(\"h\"));\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tuse: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsableTarget: function (card, player, target) {\r\n\t\t\t\t\t\t\tif (target.hasMark(\"juezhanmrfz\")) return true;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\tthreaten: 3,\r\n\t\t\t\texpose: 0.9,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tvar hs1 = player.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\treturn card.name == \"sha\";\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvar hs2 = player.countCards(\"he\", function (card) {\r\n\t\t\t\t\t\t\treturn get.type(card) == \"equip\";\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (hs1 + 2 * hs2 > 4) return -1;\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//ASH灰烬\r\n\t\twusumrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tif (player.countMark(\"wusumrfz\") == 0) return \"Ash已化身监控室大爷\";\r\n\t\t\t\t\treturn \"FBI突击中</br>距离ASH白给还剩\" + (5 - player.countMark(\"wusumrfz\")) + \"个阶段\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"phaseZhunbeiBefore\", \"phaseJudgeBefore\", \"phaseDrawBefore\", \"phaseDiscardBefore\", \"phaseJieshuBefore\"],\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.getParent(\"phase\");\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t\tvar next = trigger.player.phaseUse();\r\n\t\t\t\tevent.next.remove(next);\r\n\t\t\t\ttrigger.getParent(\"phase\").next.push(next);\r\n\t\t\t\tplayer.addMark(\"wusumrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: \"wusumrfz_draw\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget: function (card, player, target, current) {\r\n\t\t\t\t\t\tif (get.type(card) == \"delay\") return \"zeroplayertarget\";\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\twutoumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\tusable: 1,\r\n\t\t\ttrigger: { player: \"damageBegin3\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.num === player.hp;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t},\r\n\t\t},\r\n\t\tbaigeimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"phaseUseEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"wusumrfz\") >= 5;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tif (player.countMark(\"wusumrfz\") >= 5) {\r\n\t\t\t\t\tvar num = player.countCards(\"h\") - player.getHandcardLimit();\r\n\t\t\t\t\tvar chattext = [\"窗下怎么会有个夹子？\", \"为什么会有人放站位edd！\", \"（Ash听到的敌方干员的声音）call a pizza！\", '（狼人手枪的枪声）女鬼:\"talk\"', \"(剃刀花的声音)\", \"(两个蛊声，三条枪线)\", \"(发射祖母榴弹->rush->火山盾炸裂的声音)\", \"“友军已将你击杀”\"].randomGet();\r\n\t\t\t\t\tif (num > 0) {\r\n\t\t\t\t\t\tplayer.logSkill(\"baigeimrfz\");\r\n\t\t\t\t\t\tplayer.chooseToDiscard(\"h\", num, true, \"弃置\" + get.cnNumber(num) + \"张手牌\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplayer.removeMark(\"wusumrfz\", 5);\r\n\t\t\t\t\tplayer.chat(chattext);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\t//异客\r\n\t\tshazumrfz: {\r\n\t\t\tmarktext: \"仇敌\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"仇敌\",\r\n\t\t\t\tcontent: \"沙卒盯上你了\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target.countCards(\"he\") > 0 && target != player;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.chooseCard(\"he\", true);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tevent.cardp = result.cards[0];\r\n\t\t\t\tif (target.countCards(\"e\") > 0) target.chooseCard(\"e\", true);\r\n\t\t\t\telse target.chooseCard(\"h\", true);\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (!result.bool) event.finish();\r\n\t\t\t\telse {\r\n\t\t\t\t\tevent.cardt = result.cards[0];\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tplayer.swapHandcards(target, [event.cardp], [event.cardt]);\r\n\t\t\t\t(\"step 4\");\r\n\t\t\t\tvar numt = target.countCards(\"h\");\r\n\t\t\t\tvar nump = player.countCards(\"h\");\r\n\t\t\t\tif (numt == nump) event.finish();\r\n\t\t\t\tif (numt > nump) player.draw();\r\n\t\t\t\telse if (nump > numt) target.draw();\r\n\t\t\t},\r\n\t\t\tgroup: \"shazumrfz_damage\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\taudio: \"shazumrfz\",\r\n\t\t\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.source != undefined && !event.source.hasMark(\"shazumrfz\") && event.source != player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlogTarget: \"source\",\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current.hasMark(\"shazumrfz\");\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current.removeMark(\"shazumrfz\");\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\ttrigger.source.addMark(\"shazumrfz\");\r\n\t\t\t\t\t\t} else trigger.source.addMark(\"shazumrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.1,\r\n\t\t\t\torder: 8,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: function (player, target) {\r\n\t\t\t\t\t\tif (get.attitude(player, target) > 0) return 1.5;\r\n\t\t\t\t\t\treturn 0.5;\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tif (get.attitude(player, target) < 2 && target.countCards(\"e\") > 0 && target.countCards(\"h\") > player.countCards(\"h\")) return -1;\r\n\t\t\t\t\t\treturn 0.5;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tdianlianmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageSource\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.num <= 1) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tevent.player != player &&\r\n\t\t\t\t\tevent.player.isAlive() &&\r\n\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != event.player && get.distance(event.player, current) <= 1 && current != player;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && get.attitude(player, current) < 0 && current != event.player;\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t\treturn true;\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.chooseTarget(true, \"选择一名与\" + get.translation(trigger.player) + \"距离为1的角色并对其造成\" + (trigger.num - 1) + \"点伤害\", function (card, player, target) {\r\n\t\t\t\t\tvar damaged = trigger.player;\r\n\t\t\t\t\treturn get.distance(damaged, target) <= 1 && target != damaged && target != player;\r\n\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\treturn -get.attitude(player, target);\r\n\t\t\t\t};\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tvar num = trigger.num - 1;\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\ttarget.damage(\"player\", trigger.num - 1);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"dianlianmrfz_damage\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\taudio: \"dianlianmrfz\",\r\n\t\t\t\t\ttrigger: { source: \"damageBegin3\" },\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\treturn get.attitude(player, event.player) < 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.nature == \"thunder\" && !player.storage.dianlianmrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: \"是否令此伤害+1\",\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t\tplayer.storage.dianlianmrfz = true;\r\n\t\t\t\t\t\tplayer.addSkill(\"dianlianmrfz_remove\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tremove: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.dianlianmrfz = false;\r\n\t\t\t\t\t\tplayer.removeSkill(\"dianlianmrfz_remove\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tleibaomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tselectTarget: 1,\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\tif (target == player) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\t!game.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && current.hp > target.hp;\r\n\t\t\t\t\t}) || target.hasMark(\"shazumrfz\")\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.getCards(\"he\", function (card) {\r\n\t\t\t\t\t\treturn get.type(card) == \"equip\";\r\n\t\t\t\t\t}).length >= 2 || player.countCards(\"h\", \"shandian\")\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseToDiscard(\"he\", true, function (card, player) {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tplayer.getCards(\"he\", function (card) {\r\n\t\t\t\t\t\t\t\treturn get.type(card) == \"equip\";\r\n\t\t\t\t\t\t\t}).length >= 2\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\treturn get.type(card) == \"equip\" || card.name == \"shandian\";\r\n\t\t\t\t\t\treturn card.name == \"shandian\";\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"prompt\", \"请弃置一张【闪电】，或依次弃置两张装备牌。\");\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.cards[0].name != \"shandian\") {\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.chooseToDiscard(\"he\", true, function (card, player) {\r\n\t\t\t\t\t\t\treturn get.type(card) == \"equip\";\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"prompt\", \"请弃置一张装备牌。\");\r\n\t\t\t\t\ttarget.damage(\"player\", 2);\r\n\t\t\t\t} else target.damage(\"player\", 2, \"thunder\");\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.2,\r\n\t\t\t\torder: 13,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: -1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//年\r\n\t\tzhujimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"phaseDrawAfter\", \"phaseJieshuAfter\"],\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.chooseToDiscard(\"he\", get.prompt(\"zhujimrfz\"), \"【铸极】:你可以重铸一张牌\").set(\"ai\", function (card) {\r\n\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.cards) player.draw();\r\n\t\t\t\tif (result.cards && get.type(result.cards[0]) == \"equip\") {\r\n\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\tplayer.logSkill(\"zhujimrfz\");\r\n\t\t\t\t} else if (result.cards) {\r\n\t\t\t\t\tplayer.logSkill(\"zhujimrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\ttongyinmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.source != undefined && event.source != player;\r\n\t\t\t},\r\n\t\t\tusable: 1,\r\n\t\t\tlogTarget: \"source\",\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.source) < 2;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tif (!trigger.source.hasSkill(\"fengyin\")) {\r\n\t\t\t\t\ttrigger.source.addTempSkill(\"fengyin\");\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\ttrigger.source.chooseToDiscard(\"he\", true, \"【铜印】:请选择弃置一张非基本或\" + get.translation(Math.min(player.getDamagedHp() + 1, 1)) + \"张基本牌\");\r\n\t\t\t\tif (player.getDamagedHp() < 2) event.finish();\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (result.cards && get.type(result.cards[0]) == \"basic\") {\r\n\t\t\t\t\ttrigger.source\r\n\t\t\t\t\t\t.chooseToDiscard(true, \"【铜印】:请选择弃置\" + get.translation(player.getDamagedHp() - 1) + \"张基本牌\", [1, player.getDamagedHp() - 1], function (card) {\r\n\t\t\t\t\t\t\treturn get.type(card) == \"basic\";\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 0.5,\r\n\t\t\t\texpose: 0.4,\r\n\t\t\t},\r\n\t\t},\r\n\t\ttieyumrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"使用【杀】的次数+#；可令大于一的伤害改为一#次\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"useCard\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"tieyumrfz_clear2\") < 2 && get.type(event.card) == \"equip\";\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.player) > 2;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tif (trigger.player.getDamagedHp() > 0) trigger.player.recover();\r\n\t\t\t\telse trigger.player.changeHujia();\r\n\t\t\t\ttrigger.player.addSkill([\"tieyumrfz_sha\", \"tieyumrfz_damage\", \"tieyumrfz_clear\"]);\r\n\t\t\t\ttrigger.player.addMark(\"tieyumrfz\");\r\n\t\t\t\tplayer.addMark(\"tieyumrfz_clear2\", false);\r\n\t\t\t},\r\n\t\t\tgroup: \"tieyumrfz_clear2\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tsha: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num + player.countMark(\"tieyumrfz\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"damageBegin3\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.num > 1 && player.countMark(\"tieyumrfz_damage\") < player.countMark(\"tieyumrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num = 1;\r\n\t\t\t\t\t\tplayer.logSkill(\"tieyumrfz\");\r\n\t\t\t\t\t\tplayer.addMark(\"tieyumrfz_damage\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeSkill(\"tieyumrfz_damage\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"tieyumrfz_sha\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"tieyumrfz_clear\");\r\n\t\t\t\t\t\tplayer.removeMark(\"tieyumrfz\", player.countMark(\"tieyumrfz\"));\r\n\t\t\t\t\t\tplayer.removeMark(\"tieyumrfz_damage\", player.countMark(\"tieyumrfz_damage\"));\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear2: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"tieyumrfz_clear2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeMark(\"tieyumrfz_clear2\", player.countMark(\"tieyumrfz_clear2\"));\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.2,\r\n\t\t\t\texpose: 0.8,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//令\r\n\t\tshixingmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"expansion\",\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t},\r\n\t\t\tonremove: function (player, skill) {\r\n\t\t\t\tvar cards = player.getExpansions(skill);\r\n\t\t\t\tif (cards.length) player.loseToDiscardpile(cards);\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\taudio: 6,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tplayer.getExpansions(\"shixingmrfz\").filter(function (magic) {\r\n\t\t\t\t\t\treturn get.type2(magic) == \"equip\";\r\n\t\t\t\t\t}).length &&\r\n\t\t\t\t\tplayer.hasCard(function (card) {\r\n\t\t\t\t\t\treturn get.type(card) == \"equip\";\r\n\t\t\t\t\t}).length\r\n\t\t\t\t)\r\n\t\t\t\t\treturn true;\r\n\t\t\t\tif (player.countCards(\"h\") < 3 && player.getExpansions(\"shixingmrfz\").length) return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\t//牌小于2且大于0则选择\r\n\t\t\t\tif (player.getExpansions(\"shixingmrfz\").length <= 1 && player.getExpansions(\"shixingmrfz\").length)\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.chooseControl(\"弃置\", \"增加\")\r\n\t\t\t\t\t\t.set(\"prompt\", \"选择弃置所有置于武将牌上的牌或往武将牌上放置牌\")\r\n\t\t\t\t\t\t.set(\"ai\", function (event, player) {\r\n\t\t\t\t\t\t\tvar num = Math.random();\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tplayer.getExpansions(\"shixingmrfz\").filter(function (magic) {\r\n\t\t\t\t\t\t\t\t\treturn get.type2(magic) == \"equip\";\r\n\t\t\t\t\t\t\t\t}).length &&\r\n\t\t\t\t\t\t\t\tplayer.countCards(\"h\") < 4\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\tif (num <= 0.6) return 0;\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t//牌为0则跳到第四步\r\n\t\t\t\telse if (player.getExpansions(\"shixingmrfz\").length == 0) event.goto(4);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.control == \"弃置\" || player.getExpansions(\"shixingmrfz\").length > 1) {\r\n\t\t\t\t\t//弦惊判定\r\n\t\t\t\t\tevent.num = 0;\r\n\t\t\t\t\t//清平弃置\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tplayer.getExpansions(\"shixingmrfz\").filter(function (magic) {\r\n\t\t\t\t\t\t\treturn get.type2(magic) == \"basic\";\r\n\t\t\t\t\t\t}).length\r\n\t\t\t\t\t)\r\n\t\t\t\t\t\tplayer.gain(\r\n\t\t\t\t\t\t\tget.cardPile(function (card) {\r\n\t\t\t\t\t\t\t\treturn get.type(card) == \"basic\";\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\"gain2\"\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t//弦惊选角色\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tplayer.getExpansions(\"shixingmrfz\").filter(function (magic) {\r\n\t\t\t\t\t\t\treturn get.type2(magic) == \"equip\";\r\n\t\t\t\t\t\t}).length\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tevent.num++;\r\n\t\t\t\t\t\tplayer.chooseTarget(\"【诗型】:弃置一名其他角色的一张牌\", false, function (card, target, player) {\r\n\t\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\t\t\treturn -get.attitude(_status.event.player, target);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//逍遥弃置\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tplayer.getExpansions(\"shixingmrfz\").filter(function (magic) {\r\n\t\t\t\t\t\t\treturn get.type2(magic) == \"trick\";\r\n\t\t\t\t\t\t}).length\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\tplayer.recover();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (result.control == \"增加\") event.goto(4);\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\t//弦惊弃置\r\n\t\t\t\tif (result.bool && event.num == 1) {\r\n\t\t\t\t\tplayer.discardPlayerCard(result.targets[0], \"he\", true);\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tplayer.loseToDiscardpile(player.getExpansions(\"shixingmrfz\"));\r\n\t\t\t\t(\"step 4\");\r\n\t\t\t\t//放置牌到武将牌上\r\n\t\t\t\tif (\r\n\t\t\t\t\t!player.getExpansions(\"shixingmrfz\").length ||\r\n\t\t\t\t\tplayer.hasCard(function (card) {\r\n\t\t\t\t\t\treturn player.getExpansions(\"shixingmrfz\").filter(function (magic) {\r\n\t\t\t\t\t\t\treturn get.type2(magic) == get.type2(card);\r\n\t\t\t\t\t\t}).length;\r\n\t\t\t\t\t}, \"he\")\r\n\t\t\t\t)\r\n\t\t\t\t\tplayer.chooseCard(\"he\", \"依次将最多两张牌至于武将牌上\", function (card, player) {\r\n\t\t\t\t\t\tif (player.getExpansions(\"shixingmrfz\").length)\r\n\t\t\t\t\t\t\treturn player.getExpansions(\"shixingmrfz\").filter(function (magic) {\r\n\t\t\t\t\t\t\t\treturn get.type2(magic) == get.type2(card);\r\n\t\t\t\t\t\t\t}).length;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t});\r\n\t\t\t\telse event.finish();\r\n\t\t\t\t(\"step 5\");\r\n\t\t\t\tif (result.cards && result.cards.length) {\r\n\t\t\t\t\tplayer.addToExpansion(result.cards, player, \"giveAuto\").gaintag.add(\"shixingmrfz\");\r\n\t\t\t\t}\r\n\t\t\t\tif (result.cards && player.getExpansions(\"shixingmrfz\").length < 1) event.goto(4);\r\n\t\t\t},\r\n\t\t\tgroup: [\"shixingmrfz_basic\", \"shixingmrfz_trick\", \"shixingmrfz_equip\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\t//清平\r\n\t\t\t\tbasic: {\r\n\t\t\t\t\taudio: \"shixingmrfz\",\r\n\t\t\t\t\ttrigger: { player: \"damageBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.getExpansions(\"shixingmrfz\").filter(function (magic) {\r\n\t\t\t\t\t\t\treturn get.type2(magic) == \"basic\";\r\n\t\t\t\t\t\t}).length;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar cards = player.getExpansions(\"shixingmrfz\");\r\n\t\t\t\t\t\t(\"step 0\");\r\n\t\t\t\t\t\tif (cards.length) player.chooseButton([\"选择移去一张“清平”\", cards], true);\r\n\t\t\t\t\t\telse event.finish();\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool) player.loseToDiscardpile(result.links);\r\n\t\t\t\t\t\ttrigger.num--;\r\n\t\t\t\t\t\tplayer.popup(\"清平\");\r\n\t\t\t\t\t\tgame.log(player, \"移去了一张‘清平’\");\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tevent.card = get.cardPile(function (card) {\r\n\t\t\t\t\t\t\treturn get.type(card) == \"basic\";\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tplayer.getExpansions(\"shixingmrfz\").filter(function (magic) {\r\n\t\t\t\t\t\t\t\treturn get.type2(magic) == \"basic\";\r\n\t\t\t\t\t\t\t}).length < 1\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\tplayer.gain(event.card, \"gain2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t//弦惊\r\n\t\t\t\tequip: {\r\n\t\t\t\t\taudio: \"shixingmrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tplayer.getExpansions(\"shixingmrfz\").filter(function (magic) {\r\n\t\t\t\t\t\t\t\treturn get.type2(magic) == \"equip\";\r\n\t\t\t\t\t\t\t}).length > 1\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num += 2;\r\n\t\t\t\t\t\tplayer.popup(\"弦惊\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tplayer.getExpansions(\"shixingmrfz\").filter(function (magic) {\r\n\t\t\t\t\t\t\t\t\treturn get.type2(magic) == \"equip\";\r\n\t\t\t\t\t\t\t\t}).length\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn num + 2;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tcard.name == \"sha\" &&\r\n\t\t\t\t\t\t\t\tplayer.getExpansions(\"shixingmrfz\").filter(function (magic) {\r\n\t\t\t\t\t\t\t\t\treturn get.type2(magic) == \"equip\";\r\n\t\t\t\t\t\t\t\t}).length > 1\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn num + 2;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t//逍遥\r\n\t\t\t\ttrick: {\r\n\t\t\t\t\taudio: \"shixingmrfz\",\r\n\t\t\t\t\tenable: \"phaseUse\",\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tplayer.getExpansions(\"shixingmrfz\").filter(function (magic) {\r\n\t\t\t\t\t\t\t\treturn get.type2(magic) == \"trick\";\r\n\t\t\t\t\t\t\t}).length > 0 && event.filterCard({ name: \"sha\" }, player, event)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tchooseButton: {\r\n\t\t\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\t\t\treturn ui.create.dialog(\"逍遥\", player.getExpansions(\"shixingmrfz\"), \"hidden\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tfilterCard: function () {\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tselectCard: -1,\r\n\t\t\t\t\t\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\t\t\t\t\t\treturn target != player && player.inRange(target);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcard: links[0],\r\n\t\t\t\t\t\t\t\tcontent: lib.skill.shixingmrfz_trick.contentx,\r\n\t\t\t\t\t\t\t\tai: {\r\n\t\t\t\t\t\t\t\t\torder: 8,\r\n\t\t\t\t\t\t\t\t\trespondSha: true,\r\n\t\t\t\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\t\t\t\ttarget: -1,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tprompt: function () {\r\n\t\t\t\t\t\t\treturn \"请选择【杀】的目标\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontentx: function () {\r\n\t\t\t\t\t\tvar card = lib.skill.shixingmrfz_trick_backup.card;\r\n\t\t\t\t\t\t(\"step 0\");\r\n\t\t\t\t\t\tplayer.addTempSkill(\"shixingmrfz_damage\", \"shaEnd\");\r\n\t\t\t\t\t\tplayer.addTempSkill(\"shixingmrfz_sha\", \"useCardAfter\");\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tplayer.useCard({ name: \"sha\", isCard: true }, true, target);\r\n\t\t\t\t\t\tgame.log(player, \"视为对\", target, \"使用【杀】\");\r\n\t\t\t\t\t\tplayer.logSkill(\"shixingmrfz\");\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tif (!player.storage.shixingmrfz_damage) {\r\n\t\t\t\t\t\t\tplayer.loseToDiscardpile(card);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tplayer.gain(card, \"gain2\");\r\n\t\t\t\t\t\t\tplayer.storage.shixingmrfz_damage = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 3\");\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tplayer.getExpansions(\"shixingmrfz\").filter(function (magic) {\r\n\t\t\t\t\t\t\t\treturn get.type2(magic) == \"trick\";\r\n\t\t\t\t\t\t\t}).length < 1\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tplayer.recover();\r\n\t\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\trespondSha: true,\r\n\t\t\t\t\t\torder: 4,\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tplayer.getExpansions(\"shixingmrfz\").filter(function (magic) {\r\n\t\t\t\t\t\t\t\t\treturn get.type2(magic) == \"trick\";\r\n\t\t\t\t\t\t\t\t}).length < 1\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\tif (arg != \"use\") return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"shaMiss\" },\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.shixingmrfz_damage = true;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tsha: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (trigger.addCount !== false) {\r\n\t\t\t\t\t\t\ttrigger.addCount = false;\r\n\t\t\t\t\t\t\tplayer.getStat().card.sha--;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: function (player) {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tplayer.getExpansions(\"shixingmrfz\").filter(function (magic) {\r\n\t\t\t\t\t\t\treturn get.type2(magic) == \"basic\";\r\n\t\t\t\t\t\t}).length > 0\r\n\t\t\t\t\t)\r\n\t\t\t\t\t\treturn 0.8;\r\n\t\t\t\t\treturn 1.2;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzuimengmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tunique: true,\r\n\t\t\tmark: true,\r\n\t\t\tlimited: true,\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationStr: \"醉梦\",\r\n\t\t\tanimationColor: \"fire\",\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.zuimengmrfz = false;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.zuimengmrfz && player.countCards(\"h\", \"jiu\") > 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.awakenSkill(event.name);\r\n\t\t\t\tplayer.storage.zuimengmrfz = true;\r\n\t\t\t\tplayer.chooseToUse(\r\n\t\t\t\t\ttrue,\r\n\t\t\t\t\tfunction (card, player, event) {\r\n\t\t\t\t\t\treturn get.name(card) == \"jiu\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"使用一张【酒】\"\r\n\t\t\t\t);\r\n\t\t\t\tevent.num = 0;\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (event.num < game.countPlayer()) {\r\n\t\t\t\t\tevent.num++;\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.chooseTarget(true, \"【醉梦\" + event.num + \"/\" + game.countPlayer() + \"】：选择一名角色，获得其区域内一张牌\", function (card, player, target) {\r\n\t\t\t\t\t\t\treturn target.countMark(\"zuimengmrfz_remove\") < 2;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tvar att = get.attitude(player, target);\r\n\t\t\t\t\t\t\tif (att < 0) {\r\n\t\t\t\t\t\t\t\tatt = -Math.sqrt(-att);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tatt = Math.sqrt(att);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn att * lib.card.shunshou.ai.result.target(player, target);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (player.countCards(\"h\") < game.countPlayer()) player.drawTo(game.countPlayer());\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t\tevent.getParent(\"phaseUse\").skipped = true;\r\n\t\t\t\t\tplayer.addTempSkill(\"zuimengmrfz_skip\");\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\tif (!target.hasSkill(\"zuimengmrfz_remove\")) target.addTempSkill(\"zuimengmrfz_remove\");\r\n\t\t\t\t\tplayer.gainPlayerCard(\"hej\", target, true);\r\n\t\t\t\t\ttarget.addMark(\"zuimengmrfz_remove\", false);\r\n\t\t\t\t\tevent.goto(1);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tremove: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeMark(\"zuimengmrfz_remove\", player.countMark(\"zuimengmrfz_remove\"));\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tskip: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDiscardBefore\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 6,\r\n\t\t\t\tthreaten: 0.6,\r\n\t\t\t\texpose: 0.6,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thaojiumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.card.name == \"jiu\" && player.getDamagedHp() > 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.recover();\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tif (card.name == \"jiu\") return Infinity;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//风笛\r\n\t\tjuntongmrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.draw(3);\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\treturn num - 1;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"juntongmrfz_ban\", \"juntongmrfz_sha\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"phaseJudgeBefore\", \"phaseDrawBefore\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tsha: {\r\n\t\t\t\t\taudio: \"juntongmrfz\",\r\n\t\t\t\t\ttrigger: { player: \"useCard2\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer.judge(function (card) {\r\n\t\t\t\t\t\t\tvar suit = get.suit(card);\r\n\t\t\t\t\t\t\tif (suit == \"heart\" || suit == \"diamond\" || suit == \"spade\") return -4;\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t}).judge2 = function (result) {\r\n\t\t\t\t\t\t\treturn result.bool == false ? true : false;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.suit == \"diamond\") {\r\n\t\t\t\t\t\t\tif (trigger.addCount !== false) {\r\n\t\t\t\t\t\t\t\ttrigger.addCount = false;\r\n\t\t\t\t\t\t\t\tplayer.getStat().card.sha--;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (result.suit == \"heart\") {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\t\treturn !trigger.targets.includes(current) && player.canUse(trigger.card, current);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t\t.chooseTarget(get.prompt(\"juntongmrfz\"), \"为\" + get.translation(trigger.card) + \"增加一个目标\", function (card, player, target) {\r\n\t\t\t\t\t\t\t\t\t\treturn !_status.event.sourcex.includes(target) && player.canUse(_status.event.card, target);\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.set(\"sourcex\", trigger.targets)\r\n\t\t\t\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\t\t\treturn get.effect(target, _status.event.card, player, player);\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.set(\"card\", trigger.card);\r\n\t\t\t\t\t\t\telse event.finish();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (result.suit == \"spade\") {\r\n\t\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (result.suit == \"club\") event.finish();\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\ttrigger.targets.push(result.targets[0]);\r\n\t\t\t\t\t\t\tplayer.logSkill(\"juntongmrfz\", result.targets[0]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget: function (card, player, target, current) {\r\n\t\t\t\t\t\tif (get.type(card) == \"delay\") return \"zeroplayertarget\";\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tpochengmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardToTargeted\" },\r\n\t\t\tonremove: true,\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.target) < 0;\r\n\t\t\t},\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.pochengmrfz = false;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.card.name == \"sha\" && game.roundNumber != 1 && !player.storage.pochengmrfz;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.storage.pochengmrfz = true;\r\n\t\t\t\tevent.num = 2;\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tevent.num--;\r\n\t\t\t\ttrigger.getParent().targets = trigger.getParent().targets.concat(trigger.targets);\r\n\t\t\t\ttrigger.getParent().triggeredTargets4 = trigger.getParent().triggeredTargets4.concat(trigger.targets);\r\n\t\t\t\tif (event.num > 0) event.goto(1);\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tevent.getParent(\"phaseUse\").skipped = true;\r\n\t\t\t\tplayer.addTempSkill(\"pochengmrfz_one\");\r\n\t\t\t},\r\n\t\t\tgroup: \"pochengmrfz_clear\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.storage.pochengmrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addMark(\"pochengmrfz_clear\", false);\r\n\t\t\t\t\t\tif (player.countMark(\"pochengmrfz_clear\") >= 3) {\r\n\t\t\t\t\t\t\tplayer.storage.pochengmrfz = false;\r\n\t\t\t\t\t\t\tplayer.removeMark(\"pochengmrfz_clear\", player.countMark(\"pochengmrfz_clear\"));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tone: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn num + 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//琴柳\r\n\t\tjunqimrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\tgroup: [\"junqimrfz_reget\", \"junqimrfz_get\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\trem: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"die\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.hasSkill(\"junqimrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar isSkillandRemove = function (str, who) {\r\n\t\t\t\t\t\t\tif (who.hasSkill(str)) who.removeSkill(str);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tisSkillandRemove(\"junqimrfz_zhiyu\", player);\r\n\t\t\t\t\t\tisSkillandRemove(\"junqimrfz_zhiyuan\", player);\r\n\t\t\t\t\t\tisSkillandRemove(\"junqimrfz_jingong\", player);\r\n\t\t\t\t\t\tisSkillandRemove(\"butuimrfz\", player);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tzhiyu: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tmarktext: \"军旗\",\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tname: \"军旗（治愈之旗）\",\r\n\t\t\t\t\t\tcontent: \"出牌阶段开始时，其可弃置至多三张牌，然后其选择等量角色，然后其回复一点体力并令其中手牌数最少的角色摸一张牌\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.countCards(\"h\") > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: \"是否发动【军旗(治愈之旗)】\",\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer.chooseToDiscard(\"he\", true, [1, 3], \"请弃置至多三张牌\").set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.cards)\r\n\t\t\t\t\t\t\tplayer.chooseTarget(true, [1, result.cards.length], \"请选择至多\" + result.cards.length + \"名角色\").set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\treturn get.attitude(_status.event.player, target);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tvar min = player.countCards(\"h\"),\r\n\t\t\t\t\t\t\t\tmin_player = player;\r\n\t\t\t\t\t\t\tplayer.logSkill(\"junqimrfz\");\r\n\t\t\t\t\t\t\tfor (i = 0; i < result.targets.length; i++) result.targets[i].recover();\r\n\t\t\t\t\t\t\tfor (var i of result.targets) {\r\n\t\t\t\t\t\t\t\tif (i == player) continue;\r\n\t\t\t\t\t\t\t\tvar num = i.countCards(\"h\");\r\n\t\t\t\t\t\t\t\tif (num < min) {\r\n\t\t\t\t\t\t\t\t\tmin = num;\r\n\t\t\t\t\t\t\t\t\tmin_player = i;\r\n\t\t\t\t\t\t\t\t} else if (num == min) min_player = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (min_player) min_player.draw();\r\n\t\t\t\t\t\t\telse game.delayx();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgroup: \"junqimrfz_rem\",\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\texpose: 0.6,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tjingong: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tmarktext: \"军旗\",\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tname: \"军旗（进攻之旗）\",\r\n\t\t\t\t\t\tcontent: \"当与你距离不大于2的其他角色受到伤害时，你可以弃置一张牌，令此伤害+1；使用【杀】的次数+1\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: { global: \"damageBegin3\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn get.distance(player, event.player) <= 2 && event.player.isIn() && event.player != player && player.countCards(\"he\") > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: function (event, player) {\r\n\t\t\t\t\t\treturn \"【军旗(进攻之旗)】:是否弃置一张牌，令此伤害对\" + get.translation(event.player) + \"+1？\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\treturn get.attitude(player, event.player) < 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.chooseToDiscard(\"he\", true, \"弃置一张牌\");\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t\tplayer.logSkill(\"junqimrfz\", trigger.player);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num + 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgroup: \"junqimrfz_rem\",\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\texpose: 0.8,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tzhiyuan: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tmarktext: \"军旗\",\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tname: \"军旗（支援之旗）\",\r\n\t\t\t\t\t\tcontent: \"与其距离不大于1的角色受到伤害后，其可摸一张牌，然后交给受伤角色一张牌；摸牌阶段摸牌数+1\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: { global: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn get.distance(player, event.player) <= 1 && event.player.isIn();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\treturn get.attitude(player, event.player) > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: function (event, player) {\r\n\t\t\t\t\t\tif (event.player == player) return \"【军旗(支援之旗)】:你是否摸一张牌？\";\r\n\t\t\t\t\t\treturn \"【军旗(支援之旗)】:是否摸一张牌并交给\" + get.translation(event.player) + \"一张牌？\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\tplayer.logSkill(\"junqimrfz\", trigger.player);\r\n\t\t\t\t\t\tif (trigger.player != player) {\r\n\t\t\t\t\t\t\tplayer.chooseCard(true, \"he\", \"交给\" + get.translation(trigger.player) + \"一张牌\").set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\t\tif (get.position(card) == \"e\") return -1;\r\n\t\t\t\t\t\t\t\tif (card.name == \"shan\" || card.name == \"tao\" || card.name == \"jiu\") return 1;\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tplayer.give(result.cards, trigger.player, \"give\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgroup: [\"junqimrfz_draw\", \"junqimrfz_rem\"],\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\texpose: 0.4,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\taudio: \"junqimrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tget: {\r\n\t\t\t\t\taudio: \"junqimrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar str1 = \"【支援之旗】:与其距离不大于1的角色受到伤害时，其可摸一张牌，然后交给受伤角色一张牌；摸牌阶段摸牌数+1\";\r\n\t\t\t\t\t\tvar str2 = \"【治愈之旗】:出牌阶段开始时，其可弃置至多三张牌，然后其选择等量角色，然后其回复一点体力并令其中手牌数最少的角色摸至4张\";\r\n\t\t\t\t\t\tvar str3 = \"【进攻之旗】:当与你距离不大于2的角色受到伤害后，你可以弃置一张牌，令此伤害+1；使用【杀】的次数+1\";\r\n\t\t\t\t\t\t(\"step 0\");\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.chooseControl(\"支援之旗\", \"治愈之旗\", \"进攻之旗\")\r\n\t\t\t\t\t\t\t.set(\"choiceList\", [str1, str2, str3])\r\n\t\t\t\t\t\t\t.set(\"ai\", function (event, player) {\r\n\t\t\t\t\t\t\t\treturn [0, 2].randomGet();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tvar list = [\"junqimrfz_zhiyuan\", \"junqimrfz_zhiyu\", \"junqimrfz_jingong\"];\r\n\t\t\t\t\t\tfor (i = 0; i < 3; i++) {\r\n\t\t\t\t\t\t\tif (result.index == i) player.addSkill(list[i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tplayer.removeSkill(\"junqimrfz_get\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\treget: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar list = [\"junqimrfz_zhiyuan\", \"junqimrfz_zhiyu\", \"junqimrfz_jingong\"];\r\n\t\t\t\t\t\t(\"step 0\");\r\n\t\t\t\t\t\tplayer.logSkill(\"junqimrfz\");\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current.hasSkill(\"junqimrfz_zhiyuan\") || current.hasSkill(\"junqimrfz_jingong\") || current.hasSkill(\"junqimrfz_zhiyu\");\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\t\t\tfor (i = 0; i < 3; i++) {\r\n\t\t\t\t\t\t\t\t\tif (current.hasSkill(list[i]) && current != player) {\r\n\t\t\t\t\t\t\t\t\t\tcurrent.removeSkill(list[i]);\r\n\t\t\t\t\t\t\t\t\t\tplayer.addSkill(list[i]);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tplayer.chooseControl(\"确定\", \"cancel2\").set(\"prompt\", get.prompt(\"junqimrfz\")).set(\"prompt2\", \"是否更换‘军旗’类型\");\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tif (result.control == \"cancel2\") event.finish();\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tfor (i = 0; i < 3; i++) {\r\n\t\t\t\t\t\t\t\tif (player.hasSkill(list[i])) player.removeSkill(list[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 3\");\r\n\t\t\t\t\t\tvar str1 = \"【支援之旗】:与其距离不大于1的角色受到伤害时，其可摸一张牌，然后交给受伤角色一张牌；摸牌阶段摸牌数+1\";\r\n\t\t\t\t\t\tvar str2 = \"【治愈之旗】:出牌阶段开始时，其可弃置至多三张牌，然后其选择等量角色，然后其回复一点体力并令其中手牌数最少的角色摸至4张\";\r\n\t\t\t\t\t\tvar str3 = \"【进攻之旗】:当与你距离不大于2的角色受到伤害后，你可以弃置一张牌，令此伤害+1；使用【杀】的次数+1\";\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.chooseControl(\"支援之旗\", \"治愈之旗\", \"进攻之旗\")\r\n\t\t\t\t\t\t\t.set(\"choiceList\", [str1, str2, str3])\r\n\t\t\t\t\t\t\t.set(\"ai\", function (event, player) {\r\n\t\t\t\t\t\t\t\tvar num = Math.random();\r\n\t\t\t\t\t\t\t\tif (player.hp <= 1) return 1;\r\n\t\t\t\t\t\t\t\tif (num > 0.6) return 2;\r\n\t\t\t\t\t\t\t\tif (num < 0.3) return 0;\r\n\t\t\t\t\t\t\t\telse return [0, 1, 2].randomGet();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t(\"step 4\");\r\n\t\t\t\t\t\tfor (i = 0; i < 3; i++) {\r\n\t\t\t\t\t\t\tif (result.index == i) player.addSkill(list[i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhiqimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player;\r\n\t\t\t},\r\n\t\t\tselectTarget: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.hasSkill(\"junqimrfz_zhiyuan\") || player.hasSkill(\"junqimrfz_jingong\") || player.hasSkill(\"junqimrfz_zhiyu\");\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar list = [\"junqimrfz_zhiyuan\", \"junqimrfz_zhiyu\", \"junqimrfz_jingong\"];\r\n\t\t\t\tfor (i = 0; i < 3; i++) {\r\n\t\t\t\t\tif (player.hasSkill(list[i])) {\r\n\t\t\t\t\t\ttarget.addSkill(list[i]);\r\n\t\t\t\t\t\tplayer.removeSkill(list[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"junqimrfz_rem\",\r\n\t\t\tai: {\r\n\t\t\t\torder: 1,\r\n\t\t\t\texpose: 0.8,\r\n\t\t\t\tthreaten: 1.1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tif (get.attitude(player, target) < 0) return 0;\r\n\t\t\t\t\t\tif (get.attitude(player, target) > 0) return 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tbutuimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { global: \"phaseBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.player.hasSkill(\"junqimrfz_zhiyuan\") || event.player.hasSkill(\"junqimrfz_jingong\") || event.player.hasSkill(\"junqimrfz_zhiyu\");\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar list = [\"摸一张牌\"];\r\n\t\t\t\tif (trigger.player.countCards(\"he\") > 0) list.add(\"弃两张牌并跳过判定阶段\");\r\n\t\t\t\ttrigger.player\r\n\t\t\t\t\t.chooseControl(list, \"cancel2\")\r\n\t\t\t\t\t.set(\"prompt2\", get.prompt(\"butuimrfz\"))\r\n\t\t\t\t\t.set(\"prompt\", \"请选择一项\")\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\tvar player = _status.event.playerx;\r\n\t\t\t\t\t\tif (player.countCards(\"j\") > 0 && player.countCards(\"he\") > 0) return 1;\r\n\t\t\t\t\t\telse return 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"playerx\", trigger.player);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.control != \"cancel2\") {\r\n\t\t\t\t\tif (result.control == \"摸一张牌\") {\r\n\t\t\t\t\t\ttrigger.player.draw();\r\n\t\t\t\t\t\ttrigger.player.logSkill(\"butuimrfz\");\r\n\t\t\t\t\t} else if (trigger.player.countCards(\"he\") > 0) {\r\n\t\t\t\t\t\ttrigger.player.chooseToDiscard(\"he\", true, \"弃置两张牌\", 2);\r\n\t\t\t\t\t\ttrigger.player.addTempSkill(\"butuimrfz_skip\", {\r\n\t\t\t\t\t\t\tglobal: \"phaseEnd\",\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tplayer.logSkill(\"butuimrfz\", trigger.player);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tskip: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseJudgeBefore\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//老鲤\r\n\t\tlinhuamrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { source: \"damageBegin3\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.source != undefined;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t\ttrigger.player.damage(\"nosource\", trigger.num);\r\n\t\t\t},\r\n\t\t\tgroup: [\"linhuamrfz_anti\", \"linhuamrfz_skip\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tanti: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"damageBegin3\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!event.nature) return false;\r\n\t\t\t\t\t\treturn player.countCards(\"he\") >= 2 && event.source != undefined;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlogTarget: \"source\",\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer.chooseToDiscard(\"he\", false, 2, \"你可以弃置两张牌将此伤害转移给\" + get.translation(trigger.source));\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.cards) {\r\n\t\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t\t\ttrigger.source.damage(trigger.num, trigger.nature);\r\n\t\t\t\t\t\t\tplayer.logSkill(\"linhuamrfz\", trigger.source);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tskip: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseJudgeBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.countCards(\"h\") >= 2 && player.countCards(\"j\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer.chooseToDiscard(\"h\", false, 2, \"你可以弃置两张牌并移动一张你判定区内的一张牌\").set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.cards) {\r\n\t\t\t\t\t\t\tvar card = player.getCards(\"j\");\r\n\t\t\t\t\t\t\tplayer.chooseButton([\"将你判定区的一张牌移动至一名角色的判定区\", card]);\r\n\t\t\t\t\t\t} else event.finish();\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tif (result.cards) {\r\n\t\t\t\t\t\t\tevent.card = result.links[0];\r\n\t\t\t\t\t\t\tplayer.chooseTarget(true, \"选择\" + get.translation(event.card) + \"的移动目标\", function (card, player, target) {\r\n\t\t\t\t\t\t\t\treturn target != player && target.canAddJudge(event.card);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else event.finish();\r\n\t\t\t\t\t\t(\"step 3\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\t\t\tplayer.$give(event.card, target);\r\n\t\t\t\t\t\t\tgame.delayx();\r\n\t\t\t\t\t\t\tplayer.logSkill(\"linhuamrfz\");\r\n\t\t\t\t\t\t\tvar name = card.viewAs || card.name;\r\n\t\t\t\t\t\t\tif (event.card.name != name) {\r\n\t\t\t\t\t\t\t\ttarget.addJudge(name, event.card);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttarget.addJudge(card);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tmingshimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 2,\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && !target.hasSkill(\"mingshimrfz2\");\r\n\t\t\t},\r\n\t\t\tselectTarget: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.chooseCard(\"he\", \"请选择一张牌交给\" + get.translation(target), true).set(\"ai\", function (card) {\r\n\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t});\r\n\t\t\t\tplayer.addTempSkill(\"mingshimrfz2\");\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.cards) {\r\n\t\t\t\t\tplayer.give(result.cards, target);\r\n\t\t\t\t\ttarget.addTempSkill(\"mingshimrfz2\");\r\n\t\t\t\t\tplayer.line(target);\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tplayer.viewHandcards(target);\r\n\t\t\t\tgame.log(player, \"观看了\", target, \"的手牌\");\r\n\t\t\t\tif (target.countCards(\"h\") > 3) {\r\n\t\t\t\t\tplayer.discardPlayerCard(target, \"h\", [1, 3]).set(\"forceAuto\", true);\r\n\t\t\t\t\ttarget.addSkill(\"mingshimrfz_draw1\");\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.chooseControl(\"令其摸一张\", \"令其摸两张\")\r\n\t\t\t\t\t\t.set(\"prompt\", \"【明事】:请选择一项\")\r\n\t\t\t\t\t\t.set(\"prompt2\", \"你可以令其摸[2/1]张牌,然后于下一个准备阶段弃置[1/2]张牌\")\r\n\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\tvar att = get.attitude(target, player);\r\n\t\t\t\t\t\t\tif (att > 0) return 1;\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t}); //QQQ\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tif (result.index == 0) {\r\n\t\t\t\t\ttarget.draw();\r\n\t\t\t\t\ttarget.addSkill(\"mingshimrfz_dis2\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttarget.draw(2);\r\n\t\t\t\t\ttarget.addSkill(\"mingshimrfz_dis1\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"mingshimrfz_ed\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\ted: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseJieshuBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasSkill(\"mingshimrfz2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdraw1: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseJieshuBegin\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\tplayer.removeSkill(\"mingshimrfz_draw1\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdis1: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.chooseToDiscard(\"he\", true, \"【明事】:弃置一张牌\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"mingshimrfz_dis1\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdis2: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.chooseToDiscard(\"he\", true, 2, \"【明事】:弃置两张牌\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"mingshimrfz_dis2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 1,\r\n\t\t\t\texpose: 0.2,\r\n\t\t\t\tthreaten: 1.2,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tvar att = get.attitude(player, target);\r\n\t\t\t\t\t\tif (att > 0 && target.countCards(\"h\") < 3) return 1;\r\n\t\t\t\t\t\tif (att < 0) return -1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tmingshimrfz2: {},\r\n\t\tjixiongmrfz: {\r\n\t\t\tgroup: \"jixiongmrfz2\",\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { global: \"phaseZhunbeiBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.player.hasMark(\"jixiongxmrfz\");\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\ttrigger.player.judge(function (card) {\r\n\t\t\t\t\tvar color = get.color(card);\r\n\t\t\t\t\tif (color == \"black\") return 4;\r\n\t\t\t\t\treturn -4;\r\n\t\t\t\t});\r\n\t\t\t\ttrigger.player.removeMark(\"jixiongxmrfz\");\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.color == \"black\") {\r\n\t\t\t\t\ttrigger.player.chooseToDiscard(\"he\", true, \"【吉凶】:请弃置一张牌\");\r\n\t\t\t\t\ttrigger.player.loseHp();\r\n\t\t\t\t}\r\n\t\t\t\tif (trigger.player.hasMark(\"jixiongxmrfz\")) event.goto(0);\r\n\t\t\t\telse event.finish();\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (result.cards) player.gain(result.cards, \"gain2\");\r\n\t\t\t\tif (trigger.player.hasMark(\"jixiongxmrfz\")) event.goto(0);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.9,\r\n\t\t\t},\r\n\t\t},\r\n\t\tjixiongmrfz2: {\r\n\t\t\ttrigger: { global: \"gainEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.source && event.source.hasSkill(\"jixiongmrfz\");\r\n\t\t\t},\r\n\t\t\tlogTarget: \"source\",\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseControl(\"确定\", \"取消\")\r\n\t\t\t\t\t.set(\"prompt\", \"是否发动【吉凶】？\")\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\tvar att = get.attitude(trigger.source, player);\r\n\t\t\t\t\t\tif (att > 0) return 1;\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t}); //QQQ\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.control == \"确定\") {\r\n\t\t\t\t\ttrigger.player.addMark(\"jixiongxmrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tjixiongxmrfz: {\r\n\t\t\tcharlotte: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"准备阶段，你进行一次判定，若判定结果为黑色，则你须弃置一张牌并流失一点体力，然后弃置‘符纸’标记\",\r\n\t\t\t},\r\n\t\t},\r\n\t\t//阿\r\n\t\tguaijiemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\tfirstDo: true,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.guaijiemrfz;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.loseHp();\r\n\t\t\t},\r\n\t\t\tgroup: \"guaijiemrfz_damage\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\taudio: \"guaijiemrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn !player.storage.guaijiemrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer.storage.guaijiemrfz = true;\r\n\t\t\t\t\t\tplayer.addSkill(\"guaijiemrfz_remove\");\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.chooseTarget(true, \"弃置一名角色区域内的一张牌\", function (card, player, target) {\r\n\t\t\t\t\t\t\t\treturn target.countCards(\"hej\") > 0;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\tvar att = get.attitude(player, target);\r\n\t\t\t\t\t\t\t\tif (att < 0) {\r\n\t\t\t\t\t\t\t\t\tatt = -Math.sqrt(-att);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tatt = Math.sqrt(att);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn att * lib.card.guohe.ai.result.target(player, target);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\t\t\tplayer.discardPlayerCard(target, \"hej\", true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tremove: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.guaijiemrfz = false;\r\n\t\t\t\t\t\tplayer.removeSkill(\"guaijiemrfz_remove\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tqizhenmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player;\r\n\t\t\t},\r\n\t\t\tselectTarget: 1,\r\n\t\t\tusable: 1,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tif (target.countCards(\"he\") == 0) {\r\n\t\t\t\t\tevent.goto(2);\r\n\t\t\t\t\ttarget.damage();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar str1 = \"令\" + get.translation(target) + \"弃置两张牌\";\r\n\t\t\t\t\tvar str2 = \"对\" + get.translation(target) + \"造成一点伤害\";\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.chooseControl(str1, str2)\r\n\t\t\t\t\t\t.set(\"prompt\", \"【奇针】:请选择一项\")\r\n\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\tif (target.hp > 2 && target.countCards(\"he\") < 4) return 1;\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.index == 0) target.chooseToDiscard(\"he\", true, 2, \"【奇针】:请弃置两张牌\");\r\n\t\t\t\telse target.damage();\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\ttarget.addTempSkill(\"qizhenmrfz_effect\", {\r\n\t\t\t\t\tplayer: \"phaseEnd\",\r\n\t\t\t\t});\r\n\t\t\t\ttarget.changeHujia();\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teffect: {\r\n\t\t\t\t\taudio: \"qizhenmrfz\",\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card.name == \"sha\" || event.card.name == \"juedou\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.baseDamage++;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tguaiyaomrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { source: \"damageBegin3\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.player != player;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar target = trigger.player;\r\n\t\t\t\tvar num = Math.random();\r\n\t\t\t\tif (num < 0.1) {\r\n\t\t\t\t\ttarget.addTempSkill(\"guaiyaomrfz_skip\", {\r\n\t\t\t\t\t\tplayer: \"phaseEnd\",\r\n\t\t\t\t\t});\r\n\t\t\t\t\tplayer.popup(\"怪药·跳过\");\r\n\t\t\t\t\tgame.log(player, \"的【怪药】结果为<span class=thundertext>【怪药·跳过】</span>\");\r\n\t\t\t\t}\r\n\t\t\t\tif (num >= 0.1 && num < 0.325) {\r\n\t\t\t\t\tplayer.getDamagedHp() > 0 ? player.recover(2) : player.changeHujia();\r\n\t\t\t\t\tplayer.popup(\"怪药·回复\");\r\n\t\t\t\t\tgame.log(player, \"的【怪药】结果为<span class=thundertext>【怪药·回复】</span>\");\r\n\t\t\t\t}\r\n\t\t\t\tif (num >= 0.325 && num < 0.55) {\r\n\t\t\t\t\ttarget.chooseToDiscard(\"he\", true, \"【怪药】:请弃置一张牌\");\r\n\t\t\t\t\tplayer.popup(\"怪药·弃牌\");\r\n\t\t\t\t\tgame.log(player, \"的【怪药】结果为<span class=thundertext>【怪药·弃牌】</span>\");\r\n\t\t\t\t}\r\n\t\t\t\tif (num >= 0.55 && num < 0.775) {\r\n\t\t\t\t\ttarget.addTempSkill(\"guaiyaomrfz_decrease\", {\r\n\t\t\t\t\t\tplayer: \"phaseDrawAfter\",\r\n\t\t\t\t\t});\r\n\t\t\t\t\tplayer.popup(\"怪药·摸牌减少\");\r\n\t\t\t\t\tgame.log(player, \"的【怪药】结果为<span class=thundertext>【怪药·摸牌减少】</span>\");\r\n\t\t\t\t}\r\n\t\t\t\tif (num >= 0.775) {\r\n\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\tplayer.popup(\"怪药·摸牌\");\r\n\t\t\t\t\tgame.log(player, \"的【怪药】结果为<span class=thundertext>【怪药·摸牌】</span>\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tskip: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"跳过下个出牌和弃牌阶段\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\taudio: \"guaiyaomrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"phaseUseBegin\", \"phaseDiscardBefore\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdecrease: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"下个摸牌阶段摸牌数-1\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\taudio: \"guaiyaomrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num--;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//黑\r\n\t\theishimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { source: \"damageBegin3\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (get.distance(player, event.player) <= player.hasSkill(\"junumrfz_effect\") ? 3 : 1 || event.player.getEquip(2)) && event.card && event.card.name == \"sha\";\r\n\t\t\t}, //QQQ\r\n\t\t\tcontent: function () {\r\n\t\t\t\tif (get.distance(player, trigger.player) <= player.hasSkill(\"junumrfz_effect\") ? 3 : 1) trigger.num++;\r\n\t\t\t\tif (trigger.player.getEquip(2)) trigger.num++;\r\n\t\t\t},\r\n\t\t\tgroup: \"heishimrfz_wushi\",\r\n\t\t\tmod: {\r\n\t\t\t\tplayerEnabled: function (card, player, target) {\r\n\t\t\t\t\tif (!player.hasSkill(\"junumrfz_effect\") && get.distance(player, target) > 2 && card.name == \"sha\") return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\twushi: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event) {\r\n\t\t\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tlogTarget: \"target\",\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (player.hasSkill(\"heishimrfz\")) player.logSkill(\"heishimrfz\");\r\n\t\t\t\t\t\ttrigger.target.addTempSkill(\"heishimrfz_wushi2\");\r\n\t\t\t\t\t\ttrigger.target.storage.heishimrfz_wushi2.add(trigger.card);\r\n\t\t\t\t\t\ttrigger.target.markSkill(\"heishimrfz_wushi2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tunequip_ai: true,\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t\t\tif (arg && arg.name == \"sha\") return true;\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\twushi2: {\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tai: { unequip2: true },\r\n\t\t\t\t\tinit: function (player, skill) {\r\n\t\t\t\t\t\tif (!player.storage[skill]) player.storage[skill] = [];\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"damage\", \"damageCancelled\", \"damageZero\"],\r\n\t\t\t\t\t\tsource: [\"damage\", \"damageCancelled\", \"damageZero\"],\r\n\t\t\t\t\t\ttarget: [\"shaMiss\", \"useCardToExcluded\", \"useCardToEnd\", \"eventNeutralized\"],\r\n\t\t\t\t\t\tglobal: [\"useCardEnd\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.storage.heishimrfz_wushi2 && event.card && player.storage.heishimrfz_wushi2.includes(event.card) && (event.name != \"damage\" || event.notLink());\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tpriority: 12,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.heishimrfz_wushi2.remove(trigger.card);\r\n\t\t\t\t\t\tif (!player.storage.heishimrfz_wushi2.length) player.removeSkill(\"heishimrfz_wushi2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmarktext: \"※\",\r\n\t\t\t\t\tintro: { content: \"当前防具技能已失效\" },\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.2,\r\n\t\t\t},\r\n\t\t},\r\n\t\truitongmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"useCardAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!player.hasSkill(\"junumrfz_effect\") && get.distance(player, event.player) > 2 && player.hasSkill(\"heishimrfz\")) return false;\r\n\t\t\t\treturn event.player && event.player.isAlive() && event.player != player && get.subtype(event.card) == \"equip2\" && player.inRange(event.player);\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"是否对\" + get.translation(event.player) + \"视为使用一张【杀】\";\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.player) < 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.useCard({ name: \"sha\", isCard: true }, true, trigger.player);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.9,\r\n\t\t\t\tthreaten: 0.8,\r\n\t\t\t},\r\n\t\t},\r\n\t\tjunumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tunique: true,\r\n\t\t\tmark: true,\r\n\t\t\tlimited: true,\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationStr: \"巨弩\",\r\n\t\t\tanimationColor: \"orange\",\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (\r\n\t\t\t\t\t!game.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && get.attitude(current, player) < 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\treturn player.countCards(\"h\", \"sha\") >= 2;\r\n\t\t\t},\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.junumrfz = false;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.junumrfz;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.storage.junumrfz = true;\r\n\t\t\t\tplayer.addTempSkill(\"junumrfz_effect\");\r\n\t\t\t\tplayer.awakenSkill(event.name);\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teffect: {\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\ttargetInRange: function (card, player, target, now) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return true;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tselectTarget: function (card, player, range) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\" && range[1] != -1) range[1]++;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num + 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.1,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//重岳\r\n\t\twubenmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\tfirstDo: true,\r\n\t\t\tdirect: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.countCards(\"h\") == 0) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\t!player.getEquip(1) &&\r\n\t\t\t\t\tgame.hasPlayer(function (target) {\r\n\t\t\t\t\t\treturn target != player && player.inRange(target);\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.chooseCard(\"h\", \"你可以使用一张【杀】\").set(\"ai\", function (card) {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn current != player && player.inRange(current) && get.attitude(player, current) < 0;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t)\r\n\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.cards) {\r\n\t\t\t\t\tplayer.chooseUseTarget({ name: \"sha\" }, result.cards, true, false);\r\n\t\t\t\t\tplayer.logSkill(\"wubenmrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tif (card.name == \"sha\" && !player.getEquip(1)) return num + 1;\r\n\t\t\t\t},\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\treturn (num += Math.floor((5 - player.countCards(\"e\")) / 2));\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\twowumrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tif (player.countMark(\"wowumrfz_time\") >= 5) return \"<span class=firetext>【气收秋毫平】</span></br>已使用\" + player.countMark(\"wowumrfz\") + \"张牌\";\r\n\t\t\t\t\treturn \"<span class=firetext>【劲发江潮落】</span></br>已使用\" + player.countMark(\"wowumrfz\") + \"张牌</br>已发动\" + player.countMark(\"wowumrfz_time\") + \"次【我无】\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tderivation: \"wowumrfz_rewrite\",\r\n\t\t\taudio: 4,\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tdirect: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif ((player != _status.currentPhase || !player.isPhaseUsing()) && player.countMark(\"wowumrfz_time\") < 5) return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.addMark(\"wowumrfz\", false);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (player.countMark(\"wowumrfz\") >= 3 && !player.hasMark(\"shubianmrfz\")) {\r\n\t\t\t\t\tplayer.chooseTarget(false, get.prompt(\"wowumrfz\"), \"你可以对一名其他角色使用一张【杀】\", function (card, player, target) {\r\n\t\t\t\t\t\treturn player.countMark(\"wowumrfz_time\") >= 5 ? target != player : target != player && player.inRange(target);\r\n\t\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\t\treturn -get.attitude(player, target);\r\n\t\t\t\t\t};\r\n\t\t\t\t\tplayer.removeMark(\"wowumrfz\", 3, false);\r\n\t\t\t\t\tif (player.countMark(\"wowumrfz_time\") < 5) player.addMark(\"wowumrfz_time\", false);\r\n\t\t\t\t} else if (player.countMark(\"wowumrfz\") >= 3) {\r\n\t\t\t\t\tif (player.countMark(\"wowumrfz_time\") < 5) player.addMark(\"wowumrfz_time\", false);\r\n\t\t\t\t\tplayer.removeMark(\"wowumrfz\", 3, false);\r\n\t\t\t\t} else event.finish();\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (result.bool && result.targets) {\r\n\t\t\t\t\tplayer.useCard({ name: \"sha\", isCard: true }, true, false, result.targets);\r\n\t\t\t\t\tplayer.logSkill(\"wowumrfz\", result.targets);\r\n\t\t\t\t\tif (player.countMark(\"wowumrfz_time\") >= 5) player.draw();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"wowumrfz_draw\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar evt = event.getParent(3);\r\n\t\t\t\t\t\tif (!event.card) return false;\r\n\t\t\t\t\t\tvar sha = event.card.name == \"sha\";\r\n\t\t\t\t\t\treturn player.countMark(\"wowumrfz_time\") < 5 && evt && evt.name == \"wowumrfz\" && evt.player == player && sha;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\tplayer.logSkill(\"wowumrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.3,\r\n\t\t\t\texpose: 0.2,\r\n\t\t\t},\r\n\t\t},\r\n\t\tshubianmrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.source != player && event.source.isAlive() && event.source != undefined;\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\treturn get.attitude(player, event.source) < 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet source = trigger.source;\r\n\t\t\t\tsource.addTempSkill(\"shubianmrfz_eff\", { global: \"phaseAfter\" });\r\n\t\t\t\tsource.markSkill(\"shubianmrfz_eff\");\r\n\t\t\t\tif (source.countDiscardableCards(player, \"e\")) {\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.discardPlayerCard(\"e\", source)\r\n\t\t\t\t\t\t.set(\"target\", source)\r\n\t\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t\t.set(\"ai\", lib.card.guohe.ai.button)\r\n\t\t\t\t\t\t.set(\"prompt\", `你可以弃置${get.translation(source)}装备区的一张牌`);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"·手牌上限+2<br>·无法使用手牌中的伤害类牌\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove(player) {\r\n\t\t\t\t\t\tplayer.unmarkSkill(\"shubianmrfz_eff\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn (num += 2);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcardEnabled2(card, player) {\r\n\t\t\t\t\t\t\tif (get.position(card) === \"h\" && get.tag(card, \"damage\")) {\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 0.8,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//安洁莉娜\r\n\t\tfanzhongmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"重力紊乱\",\r\n\t\t\t},\r\n\t\t\taudio: 4,\r\n\t\t\tglobal: [\"fanzhongmrfz2\", \"fanzhongmrfz_gain\", \"fanzhongmrfz_gain2\", \"fanzhongmrfz_lose\"],\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(function (target) {\r\n\t\t\t\t\treturn target != player && player.inRange(target) && target.countMark(\"fanzhongmrfz\") < 3;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.chooseTarget(get.prompt(\"fanzhongmrfz\"), \"你可以选择攻击范围内的一名其他角色，令其获得‘反重’标记\", function (card, player, target) {\r\n\t\t\t\t\treturn target != player && player.inRange(target) && target.countMark(\"fanzhongmrfz\") < 3;\r\n\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\treturn -get.attitude(player, target);\r\n\t\t\t\t};\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool && result.targets) {\r\n\t\t\t\t\tresult.targets[0].addMark(\"fanzhongmrfz\");\r\n\t\t\t\t\tplayer.logSkill(\"fanzhongmrfz\", result.targets[0]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tgain: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"fanzhongmrfz\") && player.getExpansions(\"fanzhongmrfz2\").length > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tvar cards = player.getExpansions(\"fanzhongmrfz2\");\r\n\t\t\t\t\t\tif (cards.length) player.chooseButton([\"获得一张牌\", cards], true);\r\n\t\t\t\t\t\telse event.finish();\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool) player.gain(result.links, \"gain2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tgain2: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDiscardBefore\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"fanzhongmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar cards = player.getExpansions(\"fanzhongmrfz2\");\r\n\t\t\t\t\t\tif (cards) player.gain(cards, \"gain2\");\r\n\t\t\t\t\t\tplayer.removeAllmark(\"fanzhongmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tlose: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"die\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"fanzhongmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar cards = player.getExpansions(\"fanzhongmrfz2\");\r\n\t\t\t\t\t\tplayer.removeAllmark(\"fanzhongmrfz\");\r\n\t\t\t\t\t\tif (cards) player.loseToDiscardpile(cards);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.6,\r\n\t\t\t\tthreaten: 1.2,\r\n\t\t\t},\r\n\t\t},\r\n\t\tfanzhongmrfz2: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"expansion\",\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t},\r\n\t\t\tonremove: function (player, skill) {\r\n\t\t\t\tvar cards = player.getExpansions(skill);\r\n\t\t\t\tif (cards.length) player.loseToDiscardpile(cards);\r\n\t\t\t},\r\n\t\t\tcharlotte: true,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { player: \"gainEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.player.getExpansions(\"fanzhongmrfz2\").length >= 6) return false;\r\n\t\t\t\treturn player.hasMark(\"fanzhongmrfz\") && event.getParent().name != \"fanzhongmrfz_gain\" && event.getParent().name != \"fanzhongmrfz_gain2\";\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.addToExpansion(trigger.cards, player, \"give\").gaintag.add(\"fanzhongmrfz2\");\r\n\t\t\t\tplayer.logSkill(\"fanzhongmrfz\");\r\n\t\t\t\t//var str='';\r\n\t\t\t\t//str+=get.translation(trigger)+'</br>';\r\n\t\t\t\t//for(var i=1;i<=10;i++) str+=get.translation(trigger.getParent(i))+'</br>';\r\n\t\t\t\t//game.log(str);\r\n\t\t\t\t//player.popup(str);\r\n\t\t\t},\r\n\t\t},\r\n\t\txinshimrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tignoredHandcard: function (card, player) {\r\n\t\t\t\t\tif (card.hasGaintag(\"xinshimrfz\")) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcardDiscardable: function (card, player, name) {\r\n\t\t\t\t\tif (name == \"phaseDiscard\" && card.hasGaintag(\"xinshimrfz\")) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 4,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tdiscard: false,\r\n\t\t\tlose: false,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && !target.tempSkills.xinshimrfz2 && !target.hasMark(\"xinshimrfz\");\r\n\t\t\t},\r\n\t\t\tfilterCard: function (card, player) {\r\n\t\t\t\treturn !player.storage.xinshimrfz || !player.storage.xinshimrfz.includes(get.type(card, \"trick\"));\r\n\t\t\t},\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\treturn 10 - get.value(card);\r\n\t\t\t},\r\n\t\t\tdelay: 0,\r\n\t\t\tprompt: \"你可以将一张本回合你未以此法交出过的类型的牌交给本回合你未以此法选择过的角色\",\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tif (!player.storage.xinshimrfz) player.storage.xinshimrfz = [];\r\n\t\t\t\tplayer.storage.xinshimrfz.push(get.type(cards[0], \"trick\"));\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tplayer.give(cards, target);\r\n\t\t\t\ttarget.addTempSkill(\"xinshimrfz2\");\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tvar mark = player.storage.xinshimrfz.length;\r\n\t\t\t\tif (mark == 1) {\r\n\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t}\r\n\t\t\t\tif (mark == 2) event.goto(3);\r\n\t\t\t\tif (mark == 3) {\r\n\t\t\t\t\tevent.goto(5);\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tif (target.countCards(\"h\") > 0) target.chooseCard(\"h\", true);\r\n\t\t\t\telse event.finish();\r\n\t\t\t\t(\"step 4\");\r\n\t\t\t\tif (result.cards) {\r\n\t\t\t\t\ttarget.give(result.cards, player);\r\n\t\t\t\t\ttarget.draw();\r\n\t\t\t\t}\r\n\t\t\t\tevent.finish();\r\n\t\t\t\t(\"step 5\");\r\n\t\t\t\tif (player.storage.xinshimrfz.length == 3) {\r\n\t\t\t\t\tplayer.chooseTarget(true, \"【信使】:请选择一名其他角色，令其获得‘反重’标记\", function (card, player, target) {\r\n\t\t\t\t\t\treturn target != player && !target.hasMark(\"xinshimrfz\");\r\n\t\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\t\treturn -get.attitude(player, target);\r\n\t\t\t\t\t};\r\n\t\t\t\t\tplayer.logSkill(\"xinshimrfz\");\r\n\t\t\t\t} else event.finish();\r\n\t\t\t\t(\"step 6\");\r\n\t\t\t\tif (result.bool && result.targets) {\r\n\t\t\t\t\tresult.targets[0].addMark(\"fanzhongmrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 9,\r\n\t\t\t\texpose: 0.2,\r\n\t\t\t\tthreaten: 1.2,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tif (player.countCards(\"h\") > 2) return 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"xinshimrfz_clear\", \"xinshimrfz_give\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.xinshimrfz = [];\r\n\t\t\t\t\t\tplayer.removeGaintag(\"xinshimrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tgive: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"gainEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.source;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlogTarget: \"source\",\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tif (trigger.cards.length) player.addMark(\"xinshimrfz_give\", trigger.cards.length, false);\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (player.countMark(\"xinshimrfz_give\") >= 2) {\r\n\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t.chooseControl(\"basic\", \"trick\", \"equip\", \"cancel2\")\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", \"选择获得一种类型的牌\")\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\tplayer.hp <= 3 &&\r\n\t\t\t\t\t\t\t\t\t\t!player.countCards(\"h\", {\r\n\t\t\t\t\t\t\t\t\t\t\tname: [\"shan\", \"tao\"],\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\treturn \"basic\";\r\n\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\tplayer.countCards(\"he\", {\r\n\t\t\t\t\t\t\t\t\t\t\ttype: \"equip\",\r\n\t\t\t\t\t\t\t\t\t\t}) < 2\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\treturn \"equip\";\r\n\t\t\t\t\t\t\t\t\treturn \"trick\";\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tplayer.removeMark(\"xinshimrfz_give\", 2, false);\r\n\t\t\t\t\t\t} else event.finish();\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tif (result.control != \"cancel2\") {\r\n\t\t\t\t\t\t\tvar card = get.cardPile2(function (card) {\r\n\t\t\t\t\t\t\t\treturn get.type(card, \"trick\") == result.control;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif (card) player.gain(card, \"gain2\", \"log\").gaintag.add(\"xinshimrfz\");\r\n\t\t\t\t\t\t\tplayer.logSkill(\"xinshimrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (player.countMark(\"xinshimrfz_give\") >= 2) event.goto(1);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txinshimrfz2: {},\r\n\t\t//号角\r\n\t\tdunpaomrfz: {\r\n\t\t\tderivation: \"dunpaomrfz_rewrite\",\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t(game.countPlayer() <= 4 &&\r\n\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn get.attitude(player, current) < 0 && get.distance(player, current) == 1;\r\n\t\t\t\t\t\t})) ||\r\n\t\t\t\t\t!game.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn get.attitude(player, current) >= 0 && current != player;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.dunpaomrfz;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.storage.dunpaomrfz = true;\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\tif (player.storage.dunpaomrfz) return num + 2;\r\n\t\t\t\t},\r\n\t\t\t\tplayerEnabled: function (card, player, target) {\r\n\t\t\t\t\tif (!player.storage.dunpaomrfz && get.distance(player, target) <= 1 && target != player) return false;\r\n\t\t\t\t},\r\n\t\t\t\tattackRange: function (player, num) {\r\n\t\t\t\t\tif (!player.storage.dunpaomrfz) return num + 5;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: \"dunpaomrfz_add\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tadd: {\r\n\t\t\t\t\taudio: \"biaohaomrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { source: \"damageBegin3\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.storage.dunpaomrfz) return false;\r\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\" && event.player != player && get.distance(player, event.player) > 1; //QQQ\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar target = trigger.player;\r\n\t\t\t\t\t\t(\"step 0\");\r\n\t\t\t\t\t\ttarget.judge(function (card) {\r\n\t\t\t\t\t\t\tvar color = get.color(card);\r\n\t\t\t\t\t\t\tif (color == \"black\") return -4;\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t}).judge2 = function (result) {\r\n\t\t\t\t\t\t\treturn result.bool == false ? true : false;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.color == \"black\") trigger.num++;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tbiaohaomrfz: {\r\n\t\t\taudio: 6,\r\n\t\t\tchargeSkill: true,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 2,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.countMark(\"charge\") < 4 &&\r\n\t\t\t\t\tplayer.hasCard(function (card) {\r\n\t\t\t\t\t\treturn get.tag(card, \"damage\");\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tfilterCard: function (card) {\r\n\t\t\t\treturn get.tag(card, \"damage\");\r\n\t\t\t},\r\n\t\t\tposition: \"he\",\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\tif (card.name == \"sha\") return 1;\r\n\t\t\t\tif (card.name == \"nanman\" || card.name == \"wanjian\") return -1;\r\n\t\t\t\treturn 10 - get.value(card);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.addMark(\"charge\");\r\n\t\t\t\tplayer.draw();\r\n\t\t\t},\r\n\t\t\tgroup: [\"biaohaomrfz_usesha\", \"biaohaomrfz_allin\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tusesha: {\r\n\t\t\t\t\taudio: \"biaohaomrfz\",\r\n\t\t\t\t\tenable: \"chooseToUse\",\r\n\t\t\t\t\tviewAs: { name: \"sha\", isCard: true },\r\n\t\t\t\t\tfilterCard: function () {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tviewAsFilter: function (player) {\r\n\t\t\t\t\t\tif (player.countMark(\"charge\") <= 0) return false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tselectCard: -1,\r\n\t\t\t\t\tprompt: \"视为使用一张杀\",\r\n\t\t\t\t\tprecontent: function () {\r\n\t\t\t\t\t\tplayer.removeMark(\"charge\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\torder: function () {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t!game.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\t\treturn player.canUse(\"sha\", current) && current.hp == 1 && get.effect(current, { name: \"sha\" }, player, player) > 0;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn 2.95;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t\t\tif (arg != \"use\") return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\trespondSha: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tallin: {\r\n\t\t\t\t\tenable: \"phaseUse\",\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.countMark(\"charge\") >= 4;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdelay: 0,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer.chooseControl(\"确定\", \"取消\").set(\"prompt\", get.prompt(\"biaohaomrfz\")).set(\"prompt2\", \"你可以消耗4点蓄力值，视为使用三张【杀】和一张【万箭齐发】，然后失去3点体力。\");\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.control == \"取消\") event.finish();\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tplayer.logSkill(\"biaohaomrfz\");\r\n\t\t\t\t\t\t\tplayer.removeMark(\"charge\", 4);\r\n\t\t\t\t\t\t\tevent.num = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tevent.num++;\r\n\t\t\t\t\t\tplayer.chooseUseTarget(\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tname: event.num < 4 ? \"sha\" : \"wanjian\",\r\n\t\t\t\t\t\t\t\tisCard: true,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\"请选择【杀】的目标(【杀】:\" + (event.num < 4 ? event.num : 3) + \"/3;【万箭齐发】:0/1)\",\r\n\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tplayer.logSkill(\"biaohaomrfz\");\r\n\t\t\t\t\t\tif (event.num < 4) event.redo();\r\n\t\t\t\t\t\t(\"step 3\");\r\n\t\t\t\t\t\tplayer.loseHp(3);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\torder: 3,\r\n\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 10,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txuezhanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"dieBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.xuezhanmrfz;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.storage.xuezhanmrfz = true;\r\n\t\t\t\tplayer.chooseToDiscard(\"hej\", true, player.countCards(\"hej\"));\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t\tgame.log(player, \"复活\");\r\n\t\t\t\tif (player.getDamagedHp()) player.recover(player.maxHp);\r\n\t\t\t\tif (player.maxHp >= 2) player.loseMaxHp(player.maxHp - 2);\r\n\t\t\t\telse player.gainMaxHp(2 - player.maxHp);\r\n\t\t\t\tplayer.draw(4);\r\n\t\t\t\tplayer.link(false);\r\n\t\t\t\tplayer.turnOver(false);\r\n\t\t\t},\r\n\t\t},\r\n\t\t//焰尾\r\n\t\tfengjianmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"当你使用下一张非的【闪】基本牌后，你可以视为使用一张相同的基本牌。\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: [\"respond\", \"useCardAfter\"] },\r\n\t\t\tforced: true,\r\n\t\t\tfirstDo: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!event.respondTo) return false;\r\n\t\t\t\treturn !player.hasMark(\"fengjianmrfz\");\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.addMark(\"fengjianmrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: \"fengjianmrfz_use\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tuse: {\r\n\t\t\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.card.name == \"shan\") return false;\r\n\t\t\t\t\t\treturn player.hasMark(\"fengjianmrfz\") && get.type(event.card) == \"basic\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar cards = trigger.card;\r\n\t\t\t\t\t\tplayer.removeMark(\"fengjianmrfz\");\r\n\t\t\t\t\t\tif ((cards.name == \"tao\" && player.getDamagedHp() > 0) || cards.name != \"shan\") {\r\n\t\t\t\t\t\t\tplayer.chooseUseTarget(cards, false, get.prompt2(\"fengjianmrfz\"), \"你可以使用一张\" + get.translation(cards));\r\n\t\t\t\t\t\t\tplayer.logSkill(\"fengjianmrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thongsongmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"你有#个‘红松’标记</br>·有‘红松’标记的角色需要使用或打出闪时可以进行判定，若不为♥，视为使用一张【闪】并获得此判定牌，然后移除一个‘红松’标记。\",\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: [\"respond\", \"useCardAfter\"] },\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar num = 0;\r\n\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\tif (game.players[i].hasMark(\"hongsongmrfz\")) num += game.players[i].countMark(\"hongsongmrfz\");\r\n\t\t\t\t}\r\n\t\t\t\tif (!event.respondTo) return false;\r\n\t\t\t\treturn num < 3;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.addMark(\"hongsongmrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"hongsongmrfz_shan\", \"hongsongmrfz_give\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tshan: {\r\n\t\t\t\t\taudio: \"hongsongmrfz\",\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: [\"chooseToRespondBegin\", \"chooseToUseBegin\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.responded) return false;\r\n\t\t\t\t\t\tif (!event.filterCard || !event.filterCard({ name: \"shan\" }, player, event)) return false;\r\n\t\t\t\t\t\tif (event.name == \"chooseToRespond\" && !lib.filter.cardRespondable({ name: \"shan\" }, player, event)) return false;\r\n\t\t\t\t\t\tif (event.player != player && !event.player.hasMark(\"hongsongmrfz\")) return false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\ttrigger.player.chooseControl(\"确定\", \"取消\").set(\"prompt\", get.prompt(\"hongsongmrfz\")).set(\"prompt2\", \"你可以进行判定，若不为♥，其视为使用或打出一张【闪】并获得判定牌\");\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.control == \"确定\") {\r\n\t\t\t\t\t\t\ttrigger.player\r\n\t\t\t\t\t\t\t\t.judge(function (card) {\r\n\t\t\t\t\t\t\t\t\treturn get.suit(card) == \"heart\" ? -0.5 : 1.5;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"callback\", lib.skill.hongsongmrfz_shan.callback).judge2 = function (result) {\r\n\t\t\t\t\t\t\t\treturn result.bool;\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t} else event.finish();\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tif (result.judge > 0) {\r\n\t\t\t\t\t\t\ttrigger.untrigger();\r\n\t\t\t\t\t\t\ttrigger.set(\"responded\", true);\r\n\t\t\t\t\t\t\ttrigger.result = {\r\n\t\t\t\t\t\t\t\tbool: true,\r\n\t\t\t\t\t\t\t\tcard: { name: \"shan\", isCard: true },\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tif (trigger.player != player) trigger.player.removeMark(\"hongsongmrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcallback: function () {\r\n\t\t\t\t\t\tif (get.suit(card) != \"heart\") player.gain(card, \"gain2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\trespondShan: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tgive: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"hongsongmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer.chooseTarget(get.prompt(\"hongsongmrfz\"), \"你可以将任意个‘红松’标记交给任意名其他角色\", function (card, player, target) {\r\n\t\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\t\t\treturn get.attitude(player, target) > 0;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool && result.targets) {\r\n\t\t\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\t\t\ttarget.addMark(\"hongsongmrfz\");\r\n\t\t\t\t\t\t\tplayer.removeMark(\"hongsongmrfz\");\r\n\t\t\t\t\t\t\tplayer.logSkill(\"hongsongmrfz\", target);\r\n\t\t\t\t\t\t\tif (player.hasMark(\"hongsongmrfz\")) event.goto(0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 0.5,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//夕\r\n\t\thuijuanmrfz: {\r\n\t\t\tintro: { content: \"记录的牌名:$\" },\r\n\t\t\tonremove: true,\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { global: \"useCard\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (get.type(event.card) == \"equip\") return false;\r\n\t\t\t\tif (get.type(event.card) == \"trick\" && player.hasSkill(\"huijuanmrfz_trick\")) return false;\r\n\t\t\t\tif (get.type(event.card) == \"basic\" && player.hasSkill(\"huijuanmrfz_basic\")) return false;\r\n\t\t\t\tif (get.type(event.card) == \"delay\" && player.hasSkill(\"huijuanmrfz_delay\")) return false;\r\n\t\t\t\treturn !player.getStorage(\"huijuanmrfz\").includes(event.card.name);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.markAuto(\"huijuanmrfz\", [trigger.card.name]);\r\n\t\t\t\tif (get.type(trigger.card) == \"trick\") player.addSkill(\"huijuanmrfz_trick\");\r\n\t\t\t\tif (get.type(trigger.card) == \"delay\") player.addSkill(\"huijuanmrfz_delay\");\r\n\t\t\t\tif (get.type(trigger.card) == \"basic\") player.addSkill(\"huijuanmrfz_basic\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"huijuanmrfz_use\", \"huijuanmrfz_clear\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\t//检测技能\r\n\t\t\t\tbasic: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeSkill(\"huijuanmrfz_basic\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttrick: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeSkill(\"huijuanmrfz_trick\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdelay: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeSkill(\"huijuanmrfz_delay\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t//非检测技能\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.getStorage(\"huijuanmrfz\").length;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tfor (var i = 0; i < 2; i++) player.unmarkAuto(\"huijuanmrfz\", [player.getStorage(\"huijuanmrfz\")[0]]);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tuse: {\r\n\t\t\t\t\thiddenCard: function (player, name) {\r\n\t\t\t\t\t\tif (name == \"wuxie\") return player.getStorage(\"huijianmrfz\").includes(name);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tenable: [\"chooseToRespond\", \"chooseToUse\"],\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.getStorage(\"huijuanmrfz\").length == 0 || player.countCards(\"h\") == 0) return false;\r\n\t\t\t\t\t\tfor (var i = 0; i < player.getStorage(\"huijuanmrfz\").length; i++) {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tevent.filterCard(\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tname: player.getStorage(\"huijuanmrfz\")[i],\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tplayer,\r\n\t\t\t\t\t\t\t\t\tevent\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tchooseButton: {\r\n\t\t\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\t\t\tvar list = [];\r\n\t\t\t\t\t\t\tvar storage = player.getStorage(\"huijuanmrfz\");\r\n\t\t\t\t\t\t\tfor (var i of lib.inpile) {\r\n\t\t\t\t\t\t\t\tif (event.filterCard({ name: i }, player, event) && storage.includes(i)) list.push([get.type(i) == \"basic\" ? \"基本\" : \"锦囊\", \"\", i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn ui.create.dialog(\"绘卷\", [list, \"vcard\"], \"hidden\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfilter: function (button, player) {\r\n\t\t\t\t\t\t\treturn lib.filter.cardEnabled(\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tname: button.link[2],\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tplayer,\r\n\t\t\t\t\t\t\t\t_status.event.getParent()\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcheck: function (button) {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tvar card = {\r\n\t\t\t\t\t\t\t\tname: button.link[2],\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tif (player.getUseValue(card) > 0) return get.order(card);\r\n\t\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\taudio: \"huijuanmrfz\",\r\n\t\t\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t\t\t\tfilterCard: true,\r\n\t\t\t\t\t\t\t\tposition: \"hs\",\r\n\t\t\t\t\t\t\t\tviewAs: {\r\n\t\t\t\t\t\t\t\t\tname: links[0][2],\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcheck: function (card) {\r\n\t\t\t\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tprecontent: function () {\r\n\t\t\t\t\t\t\t\t\tvar cards = event.result.card;\r\n\t\t\t\t\t\t\t\t\tif (cards.name == \"sha\" || cards.name == \"jiu\") event.getParent().addCount = false;\r\n\t\t\t\t\t\t\t\t\tplayer.unmarkAuto(\"huijuanmrfz\", [cards.name]);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\t\t\treturn \"将一张手牌当做【\" + get.translation(links[0][2]) + \"】使用\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\torder: 13,\r\n\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.3,\r\n\t\t\t},\r\n\t\t},\r\n\t\tdianjingmrfz: {\r\n\t\t\tmark: true,\r\n\t\t\tlocked: false,\r\n\t\t\tzhuanhuanji: true,\r\n\t\t\tmarktext: \"☯\",\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\treturn !player.storage.dianjingmrfz ? \"当你使用转化牌时，你可以从牌堆中获得与你使用的转化牌的牌名相同的牌。\" : \"当你使用转化牌时，你可以从牌堆中获得与你使用的转化牌的类型相同的牌。\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !event.card.isCard;\r\n\t\t\t},\r\n\t\t\tfrequent: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar cardt = get.cardPile2(function (card) {\r\n\t\t\t\t\treturn get.type(card, \"trick\") == get.type(trigger.card);\r\n\t\t\t\t});\r\n\t\t\t\tvar cardf = get.cardPile2(trigger.card.name);\r\n\t\t\t\tif (player.storage.dianjingmrfz == true) {\r\n\t\t\t\t\tif (cardt) player.gain(cardt, \"gain2\", \"log\");\r\n\t\t\t\t\telse player.chat(\"牌堆中没有\", cardt, \"牌\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (cardf) player.gain(cardf, \"gain2\", \"log\");\r\n\t\t\t\t\telse player.chat(\"牌堆中没有【\" + get.translation(trigger.card.name) + \"】\");\r\n\t\t\t\t}\r\n\t\t\t\tplayer.changeZhuanhuanji(\"dianjingmrfz\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tcangjuanmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tignoredHandcard: function (card, player) {\r\n\t\t\t\t\tif (card.hasGaintag(\"cangjuanmrfz\")) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcardDiscardable: function (card, player, name) {\r\n\t\t\t\t\tif (name == \"phaseDiscard\" && card.hasGaintag(\"cangjuanmrfz\")) return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"gainBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"cangjuanmrfz\") < 3;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.addMark(\"cangjuanmrfz\", false);\r\n\t\t\t\ttrigger.gaintag.add(\"cangjuanmrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: \"cangjuanmrfz_remove\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tremove: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeMark(\"cangjuanmrfz\", 3);\r\n\t\t\t\t\t\tplayer.removeGaintag(\"cangjuanmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//能天使\r\n\t\tlianshemrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tif (card.name == \"sha\") return (num = player.maxHp);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\tforced: true,\r\n\t\t\tfirstDo: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !event.audioed && event.card.name == \"sha\" && event.getParent().type == \"phase\";\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.audioed = true;\r\n\t\t\t},\r\n\t\t},\r\n\t\tguozaimrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.getCardUsable(\"sha\") > 0;\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar cards = game.cardsGotoOrdering(get.cards(player.maxHp + 1)).cards;\r\n\t\t\t\tevent.cards = cards;\r\n\t\t\t\tevent.cards2 = [];\r\n\t\t\t\tevent.cards3 = [];\r\n\t\t\t\tevent.num = 0;\r\n\t\t\t\tif (!player.canUse(\"sha\", target, false)) event.finish();\r\n\t\t\t\tfor (var i = 0; i < event.cards.length; i++) {\r\n\t\t\t\t\tif (event.cards[i].name == \"sha\") {\r\n\t\t\t\t\t\tevent.cards2.push(event.cards[i]);\r\n\t\t\t\t\t\tevent.num++;\r\n\t\t\t\t\t} else event.cards3.push(event.cards[i]);\r\n\t\t\t\t}\r\n\t\t\t\tgame.cardsGotoOrdering(event.cards);\r\n\t\t\t\tplayer.showCards(event.cards, get.translation(player) + \"发动了【过载】\");\r\n\t\t\t\tif (event.cards2.length == 0 || !target.isAlive()) event.goto(2);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tvar cards = event.cards2[event.num - 1];\r\n\t\t\t\tplayer.showCards(cards, get.translation(player) + \"发动了【过载】\");\r\n\t\t\t\tevent.num--;\r\n\t\t\t\tplayer.logSkill(\"guozaimrfz\", target);\r\n\t\t\t\tif (target.isAlive())\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.chooseUseTarget(cards, true, \"nodistance\")\r\n\t\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\t\tvar evt = _status.event;\r\n\t\t\t\t\t\t\tif (_status.event.name == \"chooseTarget\") evt = evt.getParent();\r\n\t\t\t\t\t\t\tif (target != player && target != evt.guozaimrfz_target) return false;\r\n\t\t\t\t\t\t\treturn lib.filter.targetEnabledx(card, player, target);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"guozaimrfz_target\", target);\r\n\t\t\t\tif (event.num > 0 && target.isAlive() && player.getCardUsable(\"sha\") > 0) event.redo();\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (event.cards3.length > 0)\r\n\t\t\t\t\tplayer.chooseButton([\"过载:你可以获得一张牌\", event.cards3]).set(\"ai\", function (button) {\r\n\t\t\t\t\t\treturn get.value(button.link, _status.event.player);\r\n\t\t\t\t\t});\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tif (result.links) player.gain(result.links, \"gain2\");\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 10,\r\n\t\t\t\tthreaten: 1.1,\r\n\t\t\t\texpose: 0.6,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: -1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//远牙\r\n\t\tyuanmengmrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\ttrigger: { global: \"useCard\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.inRange(event.player)) return false;\r\n\t\t\t\tif (!player.hasSha()) return false;\r\n\t\t\t\treturn event.card.name == \"sha\" && event.player != player;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar target = trigger.targets[0],\r\n\t\t\t\t\tsource = trigger.player;\r\n\t\t\t\t(\"step 0\");\r\n\t\t\t\tif (target == player)\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.chooseControl(\"确定\", \"cancel2\")\r\n\t\t\t\t\t\t.set(\"prompt\", get.prompt(\"yuanmengmrfz\"))\r\n\t\t\t\t\t\t.set(\"prompt2\", \"你可以对\" + get.translation(source) + \"使用【杀】\")\r\n\t\t\t\t\t\t.set(\"ai\", function (player, target) {\r\n\t\t\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\t\t\ttarget = _status.event.getTrigger().player,\r\n\t\t\t\t\t\t\t\tsource = _status.event.getTrigger().source;\r\n\t\t\t\t\t\t\tif (get.attitude(player, target) > 2) return 1;\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t});\r\n\t\t\t\telse event.goto(2);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.index == 0) {\r\n\t\t\t\t\tif (player.hasSha()) {\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.chooseToUse(true, function (card, player, event) {\r\n\t\t\t\t\t\t\t\tif (get.name(card) != \"sha\") return false;\r\n\t\t\t\t\t\t\t\treturn lib.filter.cardEnabled.apply(this, arguments);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\t\t\tif (target != _status.event.targetx && !ui.selected.targets.includes(_status.event.targetx)) return false;\r\n\t\t\t\t\t\t\t\treturn lib.filter.targetEnabled.apply(this, arguments);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"targetx\", source);\r\n\t\t\t\t\t\tplayer.logSkill(\"yuanmengmrfz\", source);\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t} else event.finish();\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tvar next = player.chooseControl(get.translation(target), get.translation(source), \"cancel2\").set(\"prompt\", get.prompt(\"yuanmengmrfz\")).set(\"prompt2\", \"你可以对其中一名角色使用【杀】\");\r\n\t\t\t\tnext.set(\"ai\", function () {\r\n\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\ttarget = _status.event.getTrigger().player,\r\n\t\t\t\t\t\tsource = _status.event.getTrigger().source;\r\n\t\t\t\t\tif (get.attitude(player, target) < 2) return 1;\r\n\t\t\t\t\tif (get.attitude(player, source) < 2) return 0;\r\n\t\t\t\t\treturn 2;\r\n\t\t\t\t});\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tif (result.index != 2) {\r\n\t\t\t\t\tvar resulty = result.index == 1 ? target : source,\r\n\t\t\t\t\t\tresultx = result.index == 0 ? target : source;\r\n\t\t\t\t\t//player.addTempSkill('yuanmengmrfz_discard',{player:'shaAfter'});\r\n\t\t\t\t\tif (player.hasSha()) {\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.chooseToUse(true, function (card, player, event) {\r\n\t\t\t\t\t\t\t\tif (get.name(card) != \"sha\") return false;\r\n\t\t\t\t\t\t\t\treturn lib.filter.cardEnabled.apply(this, arguments);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\t\t\tif (target != _status.event.targetx && !ui.selected.targets.includes(_status.event.targetx)) return false;\r\n\t\t\t\t\t\t\t\treturn lib.filter.targetEnabled.apply(this, arguments);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"targetx\", result.index == 0 ? target : source);\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\tresulty.draw();\r\n\t\t\t\t\t\tplayer.logSkill(\"yuanmengmrfz\", resultx);\r\n\t\t\t\t\t} else event.finish();\r\n\t\t\t\t} else event.finish();\r\n\t\t\t},\r\n\t\t\t//subSkill:{\r\n\t\t\t//discard:{\r\n\t\t\t//direct:true,\r\n\t\t\t//charlotte:true,\r\n\t\t\t//trigger:{player:'shaMiss'},\r\n\t\t\t//content:function(){\r\n\t\t\t//\t'step 0'\r\n\t\t\t//\tif(player.countCards('h')>0) trigger.targets[0].chooseCard('h',true,'【援盟】:请交给'+get.translation(player)+'一张手牌');\r\n\t\t\t//\telse event.finish();\r\n\t\t\t//\t'step 1'\r\n\t\t\t//\tif(result.cards){\r\n\t\t\t//\t\tplayer.logSkill('yuanmengmrfz',trigger.targets[0]);\r\n\t\t\t//\t\ttrigger.targets[0].give(result.cards,player);\r\n\t\t\t//\t}\r\n\t\t\t//},\r\n\t\t\t//},\r\n\t\t\t//},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.5,\r\n\t\t\t\tthreaten: 1.2,\r\n\t\t\t},\r\n\t\t},\r\n\t\tningshenmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\treturn (player.storage.ningshenmrfz_damage ? \"·本轮已受到过伤害</br>\" : \"\") + (player.countMark(\"ningshenmrfz\") == 0 ? \"·已连续0个回合没有成为其他角色使用牌的目标。\" : \"·已连续\" + player.countMark(\"ningshenmrfz\") + \"个回合没有成为其他角色使用牌的目标。\") + (player.storage.ningshenmrfz_mark != 0 ? \"</br>·下一张带有伤害类标签的牌伤害基数+\" + player.storage.ningshenmrfz_mark : \"\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!event.player.isAlive()) return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar history = trigger.player.getHistory(\"useCard\");\r\n\t\t\t\tif (trigger.player != player)\r\n\t\t\t\t\tfor (var i = 0; i < history.length; i++) {\r\n\t\t\t\t\t\tif (!history[i].targets) continue;\r\n\t\t\t\t\t\tfor (var j = 0; j < history[i].targets.length; j++) {\r\n\t\t\t\t\t\t\tif (history[i].targets[j] == player) {\r\n\t\t\t\t\t\t\t\tplayer.removeMark(\"ningshenmrfz\", player.countMark(\"ningshenmrfz\"));\r\n\t\t\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tplayer.addMark(\"ningshenmrfz\");\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (player.countMark(\"ningshenmrfz\") >= 2) {\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.chooseControl(\"摸牌\", \"获得杀\")\r\n\t\t\t\t\t\t.set(\"prompt\", get.prompt(\"ningshenmrfz\"))\r\n\t\t\t\t\t\t.set(\"prompt2\", \"请选择一项\")\r\n\t\t\t\t\t\t.set(\"ai\", function (event, player) {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tplayer.hp <= 2 ||\r\n\t\t\t\t\t\t\t\tplayer.hasCard(function (card) {\r\n\t\t\t\t\t\t\t\t\treturn card.name == \"sha\";\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\tplayer.removeMark(\"ningshenmrfz\", player.countMark(\"ningshenmrfz\"));\r\n\t\t\t\t\tplayer.popup(\"ningshenmrfz\");\r\n\t\t\t\t\tplayer.logSkill(\"ningshenmrfz\");\r\n\t\t\t\t} else event.finish();\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tvar cards = get.cardPile2(\"sha\");\r\n\t\t\t\tif (result.index == 0) player.draw();\r\n\t\t\t\telse if (cards) player.gain(cards, \"gain2\", \"log\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"ningshenmrfz_mark\", \"ningshenmrfz_damage\", \"ningshenmrfz_remove\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tmark: {\r\n\t\t\t\t\ttrigger: { player: \"useCard1\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn get.tag(event.card, \"damage\") && player.storage.ningshenmrfz_mark > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.baseDamage += player.storage.ningshenmrfz_mark;\r\n\t\t\t\t\t\tplayer.storage.ningshenmrfz_mark = 0;\r\n\t\t\t\t\t\tplayer.logSkill(\"ningshenmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tinit: function (player) {\r\n\t\t\t\t\t\tplayer.storage.ningshenmrfz_mark = 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: function (player) {\r\n\t\t\t\t\t\tdelete player.storage.ningshenmrfz_mark;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tdamageBonus: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (!player.storage.ningshenmrfz_damage) {\r\n\t\t\t\t\t\t\tplayer.logSkill(\"ningshenmrfz\");\r\n\t\t\t\t\t\t\tplayer.storage.ningshenmrfz_mark++;\r\n\t\t\t\t\t\t} else player.storage.ningshenmrfz_damage = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tremove: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (!player.storage.ningshenmrfz_damage) player.storage.ningshenmrfz_damage = true;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.1,\r\n\t\t\t},\r\n\t\t},\r\n\t\tbingximrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tattackRangeBase: function (player, num) {\r\n\t\t\t\t\tif (player != _status.currentPhase && player.hp <= player.countCards(\"h\")) return (num = 0);\r\n\t\t\t\t\treturn num;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//迷迭香\r\n\t\tnianshoumrfz: {\r\n\t\t\tmarkimage: \"extension/WhichWay/image/skill/mdxnianshoumrfz.png\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"巨剑\",\r\n\t\t\t\tcontent: \"expansion\",\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t},\r\n\t\t\tonremove: function (player, skill) {\r\n\t\t\t\tvar cards = player.getExpansions(skill);\r\n\t\t\t\tif (cards.length) player.loseToDiscardpile(cards);\r\n\t\t\t},\r\n\t\t\taudio: 4,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.getExpansions(\"nianshoumrfz\").length >= 2) return false;\r\n\t\t\t\treturn player.hasCard(function (card) {\r\n\t\t\t\t\treturn get.subtype(card) == \"equip1\";\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tfilterCard: function (card) {\r\n\t\t\t\treturn get.subtype(card) == \"equip1\";\r\n\t\t\t},\r\n\t\t\tposition: \"he\",\r\n\t\t\tdiscard: false,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.addToExpansion(cards, player, \"give\").gaintag.add(\"nianshoumrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"nianshoumrfz_disable\", \"nianshoumrfz_usesha\", \"nianshoumrfz_eff1\", \"nianshoumrfz_eff2\", \"nianshoumrfz_eff3\", \"nianshoumrfz_eff4\", \"nianshoumrfz_eff5\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdisable: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar card = get.cardPile2(function (card) {\r\n\t\t\t\t\t\t\treturn get.subtype(card) == \"equip1\";\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t(\"step 0\");\r\n\t\t\t\t\t\tplayer.logSkill(\"nianshoumrfz\");\r\n\t\t\t\t\t\tevent.num = 0;\r\n\t\t\t\t\t\tplayer.disableEquip(\"equip1\");\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tevent.num++;\r\n\t\t\t\t\t\tif (card) player.gain(card, \"gain2\", \"log\");\r\n\t\t\t\t\t\telse player.chat(\"牌堆中没有武器牌了\");\r\n\t\t\t\t\t\tif (event.num < 2) event.redo();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tusesha: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar targetx = event.targets,\r\n\t\t\t\t\t\t\tnum = 0;\r\n\t\t\t\t\t\tif (event.card.name != \"sha\" || player.getExpansions(\"nianshoumrfz\").length == 0) return false;\r\n\t\t\t\t\t\tif (event.getParent().triggeredTargets3.length > 1) return false;\r\n\t\t\t\t\t\tfor (var i = 0; i < targetx.length; i++) {\r\n\t\t\t\t\t\t\tif (targetx[i].getExpansions(\"nianshoumrfz\").length < 2) num++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn num > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer.chooseBool(\"是否将一个‘巨剑’置于\" + (trigger.targets.length == 1 ? get.translation(trigger.targets[0]) : \"其中一个目标\") + \"的武将牌上\").set(\"ai\", function () {\r\n\t\t\t\t\t\t\treturn trigger.targets.some(q => get.attitude(player, q) < 2);\r\n\t\t\t\t\t\t}); //QQQ\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool && trigger.targets.length == 1) {\r\n\t\t\t\t\t\t\tplayer.logSkill(\"nianshoumrfz\");\r\n\t\t\t\t\t\t\tvar cards = player.getExpansions(\"nianshoumrfz\");\r\n\t\t\t\t\t\t\tif (cards.length) player.chooseButton([\"选择一个‘巨剑’\", cards], true);\r\n\t\t\t\t\t\t\telse event.finish();\r\n\t\t\t\t\t\t} else event.goto(4);\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tif (result.links && result.bool && trigger.targets.length == 1) {\r\n\t\t\t\t\t\t\tplayer.gain(result.links, \"gain2\").gaintag.add(\"nianshoumrfz2\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 3\");\r\n\t\t\t\t\t\tif (result.cards && trigger.targets.length == 1) {\r\n\t\t\t\t\t\t\tvar cards3 = player.getCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\t\treturn card.hasGaintag(\"nianshoumrfz2\");\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\ttrigger.targets[0].addToExpansion(cards3, trigger.targets[0], \"give\").gaintag.add(\"nianshoumrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\t(\"step 4\");\r\n\t\t\t\t\t\tif (result.links && result.bool && trigger.targets.length > 1) {\r\n\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t.chooseTarget(true, function (card, player, target) {\r\n\t\t\t\t\t\t\t\t\treturn _status.event.targets.includes(target);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"targets\", trigger.targets)\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\t\treturn get.attitude(_status.event.player, target) < 2;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else event.finish();\r\n\t\t\t\t\t\t(\"step 5\");\r\n\t\t\t\t\t\tif (result.bool && result.targets) {\r\n\t\t\t\t\t\t\tevent.target = result.targets[0];\r\n\t\t\t\t\t\t\tvar cards = player.getExpansions(\"nianshoumrfz\");\r\n\t\t\t\t\t\t\tif (cards.length) player.chooseButton([\"选择一个‘巨剑’\", cards], true);\r\n\t\t\t\t\t\t\telse event.finish();\r\n\t\t\t\t\t\t} else event.finish();\r\n\t\t\t\t\t\t(\"step 6\");\r\n\t\t\t\t\t\tif (result.links && result.bool) {\r\n\t\t\t\t\t\t\tplayer.gain(result.links, \"gain2\").gaintag.add(\"nianshoumrfz2\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 7\");\r\n\t\t\t\t\t\tif (result.cards) {\r\n\t\t\t\t\t\t\tvar cards3 = player.getCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\t\treturn card.hasGaintag(\"nianshoumrfz2\");\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tevent.target.addToExpansion(cards3, event.target, \"give\").gaintag.add(\"nianshoumrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff1: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"loseAfter\", \"addToExpansionAfter\", \"cardsGotoSpecialAfter\", \"loseAsyncAfter\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player, name) {\r\n\t\t\t\t\t\tif (event.name == \"lose\" || event.name == \"loseAsync\") return event.getlx !== false && event.toStorage == true;\r\n\t\t\t\t\t\tif (event.name == \"cardGotoSpecial\") return !event.notrigger;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tfor (var i = 0; i < player.getExpansions(\"nianshoumrfz\").length; i++) {\r\n\t\t\t\t\t\t\tvar names = player.getExpansions(\"nianshoumrfz\")[i].name + \"_skill\";\r\n\t\t\t\t\t\t\tif (lib.skill[names]) {\r\n\t\t\t\t\t\t\t\tplayer.addSkill(names);\r\n\t\t\t\t\t\t\t} //QQQ\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff2: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"gainAfter\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.fromStorage == true ||\r\n\t\t\t\t\t\t\tgame.hasPlayer2(function (current) {\r\n\t\t\t\t\t\t\t\tvar evt = event.getl(current);\r\n\t\t\t\t\t\t\t\treturn evt && evt.xs && evt.xs.length > 0;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (Array.isArray(trigger.cards))\r\n\t\t\t\t\t\t\tfor (var i of trigger.cards) {\r\n\t\t\t\t\t\t\t\tvar names = i.name + \"_skill\";\r\n\t\t\t\t\t\t\t\tif (lib.skill[names] && player.hasSkill(names)) {\r\n\t\t\t\t\t\t\t\t\tplayer.removeSkill(names);\r\n\t\t\t\t\t\t\t\t} //QQQ\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff3: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseDrawBegin2\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.getExpansions(\"nianshoumrfz\").length > 0 && event.player != player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar target = trigger.player;\r\n\t\t\t\t\t\ttrigger.num -= target.getExpansions(\"nianshoumrfz\").length;\r\n\t\t\t\t\t\tplayer.logSkill(\"nianshoumrfz\", target);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff4: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"damageBegin3\" },\r\n\t\t\t\t\tusable: 1,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.source == undefined) return false;\r\n\t\t\t\t\t\treturn event.source.getExpansions(\"nianshoumrfz\").length > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num -= trigger.source.getExpansions(\"nianshoumrfz\").length;\r\n\t\t\t\t\t\tplayer.logSkill(\"nianshoumrfz\", trigger.source);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff5: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn current.getExpansions(\"nianshoumrfz\").length > 0 && current != player;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar list = [\"e\", \"h\"];\r\n\t\t\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\t\t\tif (game.players[i].getExpansions(\"nianshoumrfz\").length > 0 && game.players[i] != player) {\r\n\t\t\t\t\t\t\t\tfor (var j = 0; j < 2; j++) {\r\n\t\t\t\t\t\t\t\t\tif (game.players[i].countCards(list[j]) > 0) {\r\n\t\t\t\t\t\t\t\t\t\tplayer.gain(game.players[i].getCards(list[j]).randomGet(), \"give\");\r\n\t\t\t\t\t\t\t\t\t\tgame.log(player, \"获得了\", game.players[i], \"的\" + get.translation(game.players[i].getCards(list[j]).randomGet()));\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tplayer.gain(game.players[i].getExpansions(\"nianshoumrfz\"), \"give\", \"log\");\r\n\r\n\t\t\t\t\t\t\t\tplayer.logSkill(\"nianshoumrfz\", game.players[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhangyimrfz: {\r\n\t\t\tcharlotte: true,\r\n\t\t\tmod: {\r\n\t\t\t\tattackRange: function (player, num) {\r\n\t\t\t\t\tif (player.getExpansions(\"nianshoumrfz\").length) return num + player.getExpansions(\"nianshoumrfz\").length;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tchongjimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tdirect: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.parent.name == \"_lianhuan\" || event.parent.name == \"_lianhuan2\") return false;\r\n\t\t\t\tif (event.card && event.card.name != \"sha\") return false;\r\n\t\t\t\tif (game.countPlayer() <= 2) return false;\r\n\t\t\t\treturn event.getParent().name != \"chongjimrfz\" && event.num > 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar targets = trigger.player;\r\n\t\t\t\tplayer.chooseTarget(get.prompt(\"chongjimrfz\"), \"你可以对\" + get.translation(targets) + \"的上家或下家造成一点伤害\", function (card, player, target) {\r\n\t\t\t\t\treturn (target == targets.getNext() || target == targets.getPrevious()) && target != player;\r\n\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\treturn -get.attitude(player, target);\r\n\t\t\t\t};\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool && result.targets) {\r\n\t\t\t\t\tresult.targets[0].damage();\r\n\t\t\t\t\tif (trigger.num > 0) result.targets[0].chooseToDiscard(\"h\", true, get.prompt(\"chongjimrfz\"), \"请选择弃置\" + trigger.num + \"张手牌\", trigger.num);\r\n\t\t\t\t\tplayer.logSkill(\"chongjimrfz\", result.targets[0]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\t//水陈 假日威龙陈\r\n\t\tyuyunmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar num = player.getCardUsable(\"sha\");\r\n\t\t\t\tvar history = player.getHistory(\"useCard\");\r\n\t\t\t\t(\"step 0\");\r\n\t\t\t\tfor (var i = 0; i < history.length; i++) {\r\n\t\t\t\t\tif (history[i].card.name == \"sha\") {\r\n\t\t\t\t\t\tplayer.removeMark(\"yuyunmrfz\", player.countMark(\"yuyunmrfz\"));\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tplayer.chooseBool(\"是否发动【余韵】？\");\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tplayer.draw(Math.min(num, 3));\r\n\t\t\t\t\tplayer.logSkill(\"yuyunmrfz\");\r\n\t\t\t\t} else event.finish();\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tplayer.removeMark(\"yuyunmrfz\", player.countMark(\"yuyunmrfz\"));\r\n\t\t\t\tplayer.addMark(\"yuyunmrfz\", Math.min(num, 2));\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tif (card.name == \"sha\") return (num += player.countMark(\"yuyunmrfz\"));\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshuiqiangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.getParent().triggeredTargets3.length > 1) return false;\r\n\t\t\t\tif (event.card.name != \"sha\") return false;\r\n\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\treturn !event.targets.includes(current) && player.canUse(event.card, current) && player.inRange(current);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar list = [];\r\n\t\t\t\t(\"step 0\");\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseTarget([1, Infinity], get.prompt(\"shuiqiangmrfz\"), \"为\" + get.translation(trigger.card) + \"增加任意个目标\", function (card, player, target) {\r\n\t\t\t\t\t\treturn !_status.event.sourcex.includes(target) && player.inRange(target) && player.canUse(_status.event.card, target);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"sourcex\", trigger.targets)\r\n\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\treturn get.effect(target, _status.event.card, player, player);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"card\", trigger.card)\r\n\t\t\t\t\t.setHiddenSkill(event.name);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tif (!event.isMine() && !event.isOnline()) game.delayx();\r\n\t\t\t\t\tfor (var i = 0; i < result.targets.length; i++) {\r\n\t\t\t\t\t\ttrigger.targets.push(result.targets[i]);\r\n\t\t\t\t\t\tplayer.line(result.targets[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplayer.logSkill(\"shuiqiangmrfz\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tjianfengmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t},\r\n\t\t\tfrequent: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.judge(function (card) {\r\n\t\t\t\t\tvar suit = get.suit(card);\r\n\t\t\t\t\tif (suit == \"spade\") return -4;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}).judge2 = function (result) {\r\n\t\t\t\t\treturn result.bool == false ? true : false;\r\n\t\t\t\t};\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.suit == \"spade\") {\r\n\t\t\t\t\tvar list = [];\r\n\t\t\t\t\tfor (var i = 0; i < trigger.cards.length; i++) {\r\n\t\t\t\t\t\tif (get.position(trigger.cards[i], true) == \"o\") {\r\n\t\t\t\t\t\t\tlist.push(trigger.cards[i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (trigger.addCount !== false) {\r\n\t\t\t\t\t\ttrigger.addCount = false;\r\n\t\t\t\t\t\ttrigger.player.getStat().card.sha--;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplayer.gain(list, \"gain2\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\t//水月\r\n\t\tliqunmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { target: \"useCardToTargeted\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.player == player) return false;\r\n\t\t\t\treturn event.card.length < 2 || get.distance(player, event.target) < 2;\r\n\t\t\t},\r\n\t\t\tusable: 1,\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (event.card.name == \"wugu\" || event.card.name == \"tao\") return false;\r\n\t\t\t\tif (get.attitude(player, event.target) > 2 && event.card.name == \"sha\") return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.getParent().excluded.add(player);\r\n\t\t\t},\r\n\t\t},\r\n\t\tchuangshangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.getParent().name == \"chuangshangmrfz\") return false;\r\n\t\t\t\tif (event.player == player) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tevent.player.isMinHp() ||\r\n\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && player.inRange(current) && current.maxHp / 2 >= current.hp;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar target = trigger.player;\r\n\t\t\t\t(\"step 0\");\r\n\t\t\t\tvar str1 = \"摸两张牌\",\r\n\t\t\t\t\tstr2 = \"对\" + get.translation(target) + \"造成一点伤害\";\r\n\t\t\t\tif (\r\n\t\t\t\t\ttarget.isMinHp() &&\r\n\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && player.inRange(current) && current.maxHp / 2 >= current.hp;\r\n\t\t\t\t\t})\r\n\t\t\t\t) {\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.chooseControl(str1, str2)\r\n\t\t\t\t\t\t.set(\"prompt\", get.prompt(\"chuangshangmrfz\"))\r\n\t\t\t\t\t\t.set(\"prompt2\", \"请选择一项\")\r\n\t\t\t\t\t\t.set(\"ai\", function (player) {\r\n\t\t\t\t\t\t\tif (player.hp < 2 && player.countCards(\"h\") < 3) return 0;\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.index == 0) {\r\n\t\t\t\t\tplayer.draw(2);\r\n\t\t\t\t} else target.damage();\r\n\t\t\t},\r\n\t\t},\r\n\t\tjinghuamrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.getParent().triggeredTargets3.length > 1) return false;\r\n\t\t\t\tif (event.card.name != \"sha\") return false;\r\n\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\treturn current != player && current != event.target;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (player.hp < 3) return false;\r\n\t\t\t\tif (\r\n\t\t\t\t\t!game.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != event.target && current != player && current != event.player && get.attitude(player, current) < 2;\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseTarget(true, [1, 2], get.prompt(\"jinghuamrfz\"), \"为\" + get.translation(trigger.card) + \"增加至多两个目标\", function (card, player, target) {\r\n\t\t\t\t\t\treturn !_status.event.sourcex.includes(target) && player.canUse(_status.event.card, target, false);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"sourcex\", trigger.targets)\r\n\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\treturn get.effect(target, _status.event.card, player, player);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"card\", trigger.card)\r\n\t\t\t\t\t.setHiddenSkill(event.name);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tplayer.addTempSkill(\"jinghuamrfz2\", {\r\n\t\t\t\t\t\tplayer: \"useCardAfter\",\r\n\t\t\t\t\t});\r\n\t\t\t\t\tfor (var i = 0; i < result.targets.length; i++) {\r\n\t\t\t\t\t\ttrigger.targets.push(result.targets[i]);\r\n\t\t\t\t\t\tplayer.line(result.targets[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tjinghuamrfz2: {\r\n\t\t\tcharlotte: true,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { player: \"useCardEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.card.name != \"sha\") return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.getHistory(\"sourceDamage\", function (evt) {\r\n\t\t\t\t\t\treturn evt.card == event.card;\r\n\t\t\t\t\t}).length <= 2\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.loseHp();\r\n\t\t\t},\r\n\t\t},\r\n\t\t//仇白\r\n\t\truximrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.target == player) return false;\r\n\t\t\t\tif (event.getParent().triggeredTargets3.length > 1) return false;\r\n\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.target) < 2;\r\n\t\t\t},\r\n\t\t\tsubfrequent: [\"link\"],\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.judge(function (card) {\r\n\t\t\t\t\tvar suit = get.suit(card);\r\n\t\t\t\t\tif (suit == \"spade\") return -2;\r\n\t\t\t\t\tif (suit == \"club\") return -4;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}).judge2 = function (result) {\r\n\t\t\t\t\treturn result.bool == false ? true : false;\r\n\t\t\t\t};\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tfor (var i = 0; i < trigger.targets.length; i++) {\r\n\t\t\t\t\tvar target = trigger.targets[i];\r\n\t\t\t\t\tif (result.color == \"black\") {\r\n\t\t\t\t\t\ttarget.link(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (result.suit == \"club\") {\r\n\t\t\t\t\t\tplayer.addTempSkill(\"ruximrfz2\", \"phaseEnd\");\r\n\t\t\t\t\t\tplayer.addMark(\"ruximrfz2\", false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"ruximrfz_link\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tlink: {\r\n\t\t\t\t\ttrigger: { player: \"useCardToPlayer\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.target == player) return false;\r\n\t\t\t\t\t\tif (event.targets.length > 1) return false;\r\n\t\t\t\t\t\treturn event.target.isLinked() || event.target.countCards(\"j\") > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfrequent: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tif (trigger.targets[0].countCards(\"hej\") == 0) {\r\n\t\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tplayer.chooseBool(get.prompt(\"ruximrfz\"), \"【入隙】:是否摸一张牌</br>选择取消则为弃置\" + get.translation(trigger.targets[0]) + \"的区域内一张牌\").set(\"ai\", function () {\r\n\t\t\t\t\t\t\tvar target = trigger.targets[0];\r\n\t\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\t\tvar att = get.attitude(player, target);\r\n\t\t\t\t\t\t\tvar num = Math.random();\r\n\t\t\t\t\t\t\tif (att > 2 && target.countCards(\"j\") > 0) return false;\r\n\t\t\t\t\t\t\treturn num > 0.5 ? true : false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tplayer.discardPlayerCard(trigger.targets[0], \"hej\", true);\r\n\t\t\t\t\t\t\tplayer.line(trigger.targets[0]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\truximrfz2: {\r\n\t\t\tcharlotte: true,\r\n\t\t\tonremove: true,\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tif (card.name == \"sha\") return num + player.countMark(\"ruximrfz2\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\twenxuemrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\ttrigger: { player: \"useCard2\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.card.name != \"sha\") return false;\r\n\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\treturn !event.targets.includes(current) && player.canUse(event.card, current) && player.inRange(current) && (current.isLinked() || current.countCards(\"j\") > 0);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseTarget([1, 2], get.prompt(\"wenxuemrfz\"), \"为\" + get.translation(trigger.card) + \"增加至多两个目标\", function (card, player, target) {\r\n\t\t\t\t\t\treturn !_status.event.sourcex.includes(target) && player.inRange(target) && player.canUse(_status.event.card, target) && (target.isLinked() || target.countCards(\"j\") > 0);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"sourcex\", trigger.targets)\r\n\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\treturn get.effect(target, _status.event.card, player, player);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"card\", trigger.card)\r\n\t\t\t\t\t.setHiddenSkill(event.name);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tfor (var i = 0; i < result.targets.length; i++) {\r\n\t\t\t\t\t\tplayer.logSkill(\"wenxuemrfz\", result.targets[i]);\r\n\t\t\t\t\t\ttrigger.targets.push(result.targets[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"wenxuemrfz_sha\", \"wenxuemrfz_count\", \"wenxuemrfz_clear\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tsha: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.card.name != \"sha\") return false;\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t!game.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current != player && player.inRange(current) && player.canUse(\"sha\", current);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\tvar history = player.getHistory(\"useCard\", function (evt) {\r\n\t\t\t\t\t\t\treturn evt.card.name == \"sha\" && evt.cards && evt.cards.length == 1;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn history.length % 2 == 0 && event.cards && event.cards.length == 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\t//event.num=Math.floor(player.countMark('wenxuemrfz_count')/2);\r\n\t\t\t\t\t\tvar history = player.getHistory(\"useCard\", function (evt) {\r\n\t\t\t\t\t\t\treturn evt.card.name == \"sha\" && evt.cards && evt.cards.length == 1;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tevent.num = history.length / 2;\r\n\t\t\t\t\t\tplayer.chooseBool(get.prompt(\"wenxuemrfz\"), \"可以使用\" + event.num + \"张【杀】\");\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tplayer.chooseUseTarget(\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\t\t\t\tisCard: true,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\"请选择【杀】的目标(还可使用\" + event.num + \"张【杀】)\",\r\n\t\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tevent.num--;\r\n\t\t\t\t\t\t\tplayer.logSkill(\"wenxuemrfz\");\r\n\t\t\t\t\t\t\tif (event.num > 0) event.redo();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tcount: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player == _status.currentPhase) return false;\r\n\t\t\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addMark(\"wenxuemrfz_count\", false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeMark(\"wenxuemrfz_count\", player.countMark(\"wenxuemrfz_count\"), false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//归溟幽灵鲨\r\n\t\tyongwomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"dying\" },\r\n\t\t\tforced: true,\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tif (player.isTurnedOver()) return \"复活不可用\";\r\n\t\t\t\t\tif (!player.storage.yongwomrfz2 && !player.isTurnedOver()) return \"复活未使用\";\r\n\t\t\t\t\treturn \"复活已使用\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.storage.yongwomrfz2) return false;\r\n\t\t\t\treturn !player.isTurnedOver();\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.storage.yongwomrfz2 = true;\r\n\t\t\t\tplayer.turnOver();\r\n\t\t\t\tif (player.hp <= 0) player.recover(1 - player.hp);\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tglobalTo: function (source, player, distance) {\r\n\t\t\t\t\tif (player.isTurnedOver()) return distance + 1;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"yongwomrfz_discard\", \"yongwomrfz_change1\", \"yongwomrfz_change2\", \"yongwomrfz2\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdiscard: {\r\n\t\t\t\t\ttrigger: { global: \"useCardAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!player.isTurnedOver()) return false;\r\n\t\t\t\t\t\tif (event.player == player) return false;\r\n\t\t\t\t\t\tif (event.player.countCards(\"he\") == 0) return false;\r\n\t\t\t\t\t\treturn event.player == player.getNext() || event.player == player.getPrevious();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar target = trigger.player;\r\n\t\t\t\t\t\t(\"step 0\");\r\n\t\t\t\t\t\ttarget.chooseToDiscard(\"he\", true, \"【拥我】:请弃置一张牌\");\r\n\t\t\t\t\t\ttarget.addMark(\"yongwomrfz2\", false);\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (target.countMark(\"yongwomrfz2\") >= 2) {\r\n\t\t\t\t\t\t\ttarget.removeMark(\"yongwomrfz2\", 2, false);\r\n\t\t\t\t\t\t\ttarget.damage();\r\n\t\t\t\t\t\t\tplayer.logSkill(\"yongwomrfz\", target);\r\n\t\t\t\t\t\t} else event.finish();\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tplayer.chooseBool(\"【拥我】:是否翻面\").set(\"ai\", function () {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tif (player.hp < 2 && !player.storage.yongwomrfz2) return true;\r\n\t\t\t\t\t\t\tif (get.attitude(player, player.getNext()) > 2 || get.attitude(player, player.getPrevious()) > 2) return true;\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t(\"step 3\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tplayer.turnOver();\r\n\t\t\t\t\t\t\tplayer.logSkill(\"yongwomrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tchange1: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"turnOverAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn !player.isTurnedOver();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.draw(2);\r\n\t\t\t\t\t\tplayer.logSkill(\"yongwomrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tchange2: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.isTurnedOver() || !event.player.isAlive()) return false;\r\n\t\t\t\t\t\treturn player.getStat(\"damage\") > 0 || player.getHistory(\"damage\").length > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer.chooseBool(\"【拥我】:是否翻面\").set(\"ai\", function () {\r\n\t\t\t\t\t\t\tvar num = 0.2,\r\n\t\t\t\t\t\t\t\tplayer = _status.event.player;\r\n\t\t\t\t\t\t\tif (player.countCards(\"h\") > 2) num + 0.3;\r\n\t\t\t\t\t\t\tif (player.hp > 1) num + 0.1;\r\n\t\t\t\t\t\t\tif (get.attitude(player, player.getNext()) < 2 || get.attitude(player, player.getPrevious()) < 2) num + 0.3;\r\n\t\t\t\t\t\t\tif (player.isTurnedOver()) num + 0.3;\r\n\t\t\t\t\t\t\treturn Math.random() + num > 0.6;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tplayer.turnOver();\r\n\t\t\t\t\t\t\tplayer.logSkill(\"yongwomrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tyongwomrfz2: {\r\n\t\t\tsilent: true,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.storage.yongwomrfz2;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.storage.yongwomrfz2 = false;\r\n\t\t\t},\r\n\t\t},\r\n\t\t//白铁\r\n\t\tjigongmrfz: {\r\n\t\t\tderivation: [\"jigongmrfz_card\"],\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar next = player\r\n\t\t\t\t\t.chooseControl()\r\n\t\t\t\t\t.set(\"choiceList\", [\"白铁多功能平台-攻击型：当你造成至少两点伤害时，你可以令此伤害+1。\", \"白铁多功能平台-支援型：锁定技，弃牌阶段开始时，你摸一张牌并额外执行一个出牌阶段。\", \"铁钳号原型机：出牌阶段你可以弃置X张带有伤害类标签的牌，然后选择一名你攻击范围内的其他角色，对其造成一点伤害（X=此技能本回合使用数+1）。\"])\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\treturn [0, 1, 2].randomGet();\r\n\t\t\t\t\t});\r\n\t\t\t\tnext.set(\"prompt\", get.prompt(\"jigongmrfz\")).set(\"prompt2\", \"请选择一项\");\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tvar list = [\"baitiemrfzcard1\", \"baitiemrfzcard2\", \"baitiemrfzcard3\"];\r\n\t\t\t\tfor (var i = 0; i < 3; i++) {\r\n\t\t\t\t\tif (result.index == i) {\r\n\t\t\t\t\t\tevent.card = game.createCard(list[i], [\"heart\", \"spade\"].randomGet(), [1, 2, 6, 8].randomGet());\r\n\t\t\t\t\t\tplayer.gain(event.card, \"gain2\");\r\n\t\t\t\t\t\tevent.card2 = list[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (player.getCards(\"h\").includes(card) && get.name(card, player) == event.card2) player.chooseUseTarget(card, \"nopopup\", true);\r\n\t\t\t},\r\n\t\t\tgroup: [\"jigongmrfz_gcard\", \"jigongmrfz_zb\", \"jigongmrfz_discard\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tgcard: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar list = [\"baitiemrfzcard1\", \"baitiemrfzcard2\", \"baitiemrfzcard3\"];\r\n\t\t\t\t\t\tfor (var i = 0; i < 3; i++) {\r\n\t\t\t\t\t\t\tif (player.countCards(\"e\", list[i])) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer.chooseTarget(\"你可以将【支援装备】移动至一名其他角色的装备区\", function (card, player, target) {\r\n\t\t\t\t\t\t\treturn target != player && !target.getEquip(5) && !target.isDisabled(5);\r\n\t\t\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\t\t\treturn get.attitude(player, target);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tvar list = [\"baitiemrfzcard1\", \"baitiemrfzcard2\", \"baitiemrfzcard3\"];\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tfor (var i = 0; i < 3; i++) {\r\n\t\t\t\t\t\t\t\tif (player.countCards(\"e\", list[i])) {\r\n\t\t\t\t\t\t\t\t\tevent.card = player.getCards(\"e\", function (card) {\r\n\t\t\t\t\t\t\t\t\t\treturn card.name == list[i];\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tplayer.lose(event.card, ui.ordering, \"visible\");\r\n\t\t\t\t\t\t\t\t\tplayer.line(result.targets[0]);\r\n\t\t\t\t\t\t\t\t\tevent.target = result.targets[0];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else event.finish();\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tevent.target.equip(event.card[0]);\r\n\t\t\t\t\t\tplayer.logSkill(\"jigongmrfz\", event.target);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tzb: {\r\n\t\t\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar list = [\"baitiemrfzcard1\", \"baitiemrfzcard2\", \"baitiemrfzcard3\"];\r\n\t\t\t\t\t\tfor (var i = 0; i < 3; i++) {\r\n\t\t\t\t\t\t\tif (player.countCards(\"e\", list[i])) return false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tvar next = player\r\n\t\t\t\t\t\t\t.chooseControl()\r\n\t\t\t\t\t\t\t.set(\"choiceList\", [\"白铁多功能平台-攻击型：当你造成至少两点伤害时，你可以令此伤害+1。\", \"白铁多功能平台-支援型：锁定技，弃牌阶段开始时，你额外执行一个出牌阶段和摸牌阶段。\", \"铁钳号原型机：出牌阶段你可以弃置X张带有伤害类标签的牌，然后选择一名你攻击范围内的其他角色，对其造成一点伤害（X=此技能本回合使用数+1）。\"])\r\n\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\treturn [0, 1, 2].randomGet();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tnext.set(\"prompt\", get.prompt(\"jigongmrfz\")).set(\"prompt2\", \"请选择一项\");\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tvar list = [\"baitiemrfzcard1\", \"baitiemrfzcard2\", \"baitiemrfzcard3\"];\r\n\t\t\t\t\t\tfor (var i = 0; i < 3; i++) {\r\n\t\t\t\t\t\t\tif (result.index == i) {\r\n\t\t\t\t\t\t\t\tevent.card = game.createCard(list[i], [\"heart\", \"spade\"].randomGet(), [1, 2, 6, 8].randomGet());\r\n\t\t\t\t\t\t\t\tplayer.gain(event.card, \"gain2\");\r\n\t\t\t\t\t\t\t\tevent.card2 = list[i];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tif (player.getCards(\"h\").includes(card) && get.name(card, player) == event.card2) player.chooseUseTarget(card, \"nopopup\", true);\r\n\t\t\t\t\t\tplayer.logSkill(\"jigongmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdiscard: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar list = [\"baitiemrfzcard1\", \"baitiemrfzcard2\", \"baitiemrfzcard3\"];\r\n\t\t\t\t\t\tfor (var i = 0; i < 3; i++) {\r\n\t\t\t\t\t\t\tif (event.player.countCards(\"e\", list[i])) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tvar list = [\"baitiemrfzcard1\", \"baitiemrfzcard2\", \"baitiemrfzcard3\"];\r\n\t\t\t\t\t\tfor (var i = 0; i < 3; i++) {\r\n\t\t\t\t\t\t\tif (trigger.player.countCards(\"e\", list[i])) {\r\n\t\t\t\t\t\t\t\tevent.card = trigger.player.getCards(\"e\", function (card) {\r\n\t\t\t\t\t\t\t\t\treturn card.name == list[i];\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\ttrigger.player.discard(event.card);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tjiefeimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: [\"loseEnd\", \"cardsDiscardEnd\"] },\r\n\t\t\tdirect: true,\r\n\t\t\tpopup: false,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar cs = event.cards;\r\n\t\t\t\tfor (var i = 0; i < cs.length; i++) {\r\n\t\t\t\t\tif (cs[i].name.indexOf(\"baitiemrfzcard\") == 0 && get.position(cs[i], true) == \"d\") return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tforceDie: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tif (!_status.jigongmrfz) _status.jigongmrfz = {};\r\n\t\t\t\tvar list = [];\r\n\t\t\t\tvar list2 = [\"baitiemrfzcard1\", \"baitiemrfzcard2\", \"baitiemrfzcard3\"];\r\n\t\t\t\tvar cs = trigger.cards;\r\n\t\t\t\tfor (var i = 0; i < cs.length; i++) {\r\n\t\t\t\t\tif (cs[i].name.indexOf(\"baitiemrfzcard\") == 0 && get.position(cs[i], true) == \"d\") {\r\n\t\t\t\t\t\t_status.jigongmrfz[cs[i].name] = false;\r\n\t\t\t\t\t\tlist.push(cs[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (var j = 0; j < 3; j++) {\r\n\t\t\t\t\t\tif (cs[i].name == list2[j]) event.card = list2[j];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tgame.log(list, \"已被移出游戏\");\r\n\t\t\t\tgame.cardsGotoSpecial(list);\r\n\t\t\t\tevent.card = game.createCard(list[0].name, [\"heart\", \"spade\"].randomGet(), [1, 2, 6, 8].randomGet());\r\n\t\t\t\tplayer.popup(\"jigongmrfz\");\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tplayer.chooseBool(get.prompt(\"jigongmrfz\"));\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tplayer.logSkill(\"jiefeimrfz\");\r\n\t\t\t\t\tplayer.judge(function (card) {\r\n\t\t\t\t\t\tvar color = get.color(card);\r\n\t\t\t\t\t\tif (color == \"red\") return -4;\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t}).judge2 = function (result) {\r\n\t\t\t\t\t\treturn result.bool == false ? true : false;\r\n\t\t\t\t\t};\r\n\t\t\t\t} else event.finish();\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tif (result.color == \"red\") {\r\n\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\tplayer.chooseTarget(\"你可以令一名角色装备【支援装备】\", function (card, player, target) {\r\n\t\t\t\t\t\treturn !target.getEquip(5) && !target.isDisabled(5);\r\n\t\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\t\treturn get.attitude(player, target);\r\n\t\t\t\t\t};\r\n\t\t\t\t} else event.finish();\r\n\t\t\t\t(\"step 4\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar cards = game.createCard(event.card, [\"heart\", \"spade\"].randomGet(), [1, 2, 6, 8].randomGet());\r\n\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\ttarget.gain(cards, \"gain2\");\r\n\t\t\t\t\ttarget.equip(cards);\r\n\t\t\t\t\tplayer.logSkill(\"jiefeimrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\t//推进之王 维纳\r\n\t\tyuechuimrfz: {\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.addMark(skill, 1, false);\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardAfter\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.card && event.card.name == \"sha\";\r\n\t\t\t},\r\n\t\t\tfrequent: true,\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\tlet num = player.countMark(\"yuechuimrfz\") > 0 ? player.countMark(\"yuechuimrfz\") : 1;\r\n\t\t\t\treturn `是否摸${num}张牌？`;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tawait player.draw(player.countMark(\"yuechuimrfz\") > 0 ? player.countMark(\"yuechuimrfz\") : 1);\r\n\t\t\t\tif (player.countMark(\"yuechuimrfz\") < 3 && player.countCards(\"he\", { type: \"equip\" }) > 0) {\r\n\t\t\t\t\tconst {cards} = await player\r\n\t\t\t\t\t\t.chooseToDiscard(\"he\", card => get.type(card) == \"equip\")\r\n\t\t\t\t\t\t.set(\"prompt\", `【跃锤】:你可以弃置一张装备牌令‘跃锤’中[]内的数字+1（当前：${player.countMark(\"yuechuimrfz\") > 0 ? player.countMark(\"yuechuimrfz\") : 1}）`)\r\n\t\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\t\treturn get.value(card) < 8;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (cards) player.addMark(\"yuechuimrfz\", 1, false);\r\n\t\t\t\t}\r\n\t\t\t\tlet targets = trigger.targets,\r\n\t\t\t\t\ttargetx = game.players.slice().filter(i => {\r\n\t\t\t\t\t\tfor (var j of targets) {\r\n\t\t\t\t\t\t\tif (get.distance(j, i) == 1 && !targets.includes(i)) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t});\r\n\t\t\t\tif (targetx) {\r\n\t\t\t\t\tconst {targets:targetscs} = await player\r\n\t\t\t\t\t\t.chooseTarget()\r\n\t\t\t\t\t\t.set(\"prompt\", `【跃锤】:你可以对${get.translation(targetx)}其中一名角色造成一点伤害`)\r\n\t\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\r\n\t\t\t\t\t\t\treturn _status.event.targets.includes(target);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\treturn get.damageEffect(target, get.event().player, get.event().player) > 0;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"targets\", targetx)\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (targetscs) {\r\n\t\t\t\t\t\ttargetscs[0].damage(player);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tfensuimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"dying\" },\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.player != player && get.distance(player, event.player) <= 1;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.draw();\r\n\t\t\t\tplayer.line(trigger.player);\r\n\t\t\t},\r\n\t\t},\r\n\t\t//伺夜\r\n\t\tlangqunmrfz: {\r\n\t\t\tmark: true,\r\n\t\t\tmarktext: \"狼群\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"狼群\",\r\n\t\t\t\tcontent: \"有#个狼\",\r\n\t\t\t},\r\n\t\t\taudio: 4,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.addMark(\"langqunmrfz\", 2);\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\tif (player.hasMark(\"langqunmrfz\")) return num + 1;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"langqunmrfz_gainb\", \"langqunmrfz_damage\", \"langqunmrfz_discard\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tgainb: {\r\n\t\t\t\t\taudio: \"langqunmrfz\",\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"loseAfter\",\r\n\t\t\t\t\t\tglobal: \"loseAsyncAfter\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfrequent: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.getlx === false) return false;\r\n\t\t\t\t\t\tif (player.countMark(\"langqunmrfz\") > 2) return false;\r\n\t\t\t\t\t\treturn !player.hasSkill(\"langqunmrfz2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addMark(\"langqunmrfz\");\r\n\t\t\t\t\t\tplayer.addTempSkill(\"langqunmrfz2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\taudio: \"langqunmrfz\",\r\n\t\t\t\t\ttrigger: { target: \"useCardToTargeted\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.countMark(\"langqunmrfz\") > 0 && get.tag(event.card, \"damage\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: function (event, player) {\r\n\t\t\t\t\t\treturn \"你可以移去一个‘狼群’标记并令此牌(\" + get.translation(event.card) + \")取消你为目标(剩余‘狼群’数:\" + player.countMark(\"langqunmrfz\") + \")\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.targets.remove(player);\r\n\t\t\t\t\t\ttrigger.getParent().triggeredTargets2.remove(player);\r\n\t\t\t\t\t\ttrigger.untrigger();\r\n\t\t\t\t\t\tplayer.removeMark(\"langqunmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdiscard: {\r\n\t\t\t\t\taudio: \"langqunmrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDiscardEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar cards = [];\r\n\t\t\t\t\t\tgame.getGlobalHistory(\"cardMove\", function (evt) {\r\n\t\t\t\t\t\t\tif (evt.name == \"cardsDiscard\") {\r\n\t\t\t\t\t\t\t\tif (evt.getParent(\"phaseDiscard\") == trigger) {\r\n\t\t\t\t\t\t\t\t\tvar moves = evt.cards.filterInD(\"d\");\r\n\t\t\t\t\t\t\t\t\tcards.addArray(moves);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (evt.name == \"lose\") {\r\n\t\t\t\t\t\t\t\tif (evt.type != \"discard\" || evt.position != ui.discardPile || evt.getParent(\"phaseDiscard\") != trigger) return;\r\n\t\t\t\t\t\t\t\tvar moves = evt.cards.filterInD(\"d\");\r\n\t\t\t\t\t\t\t\tcards.addArray(moves);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tplayer.draw(Math.floor(cards.length / 2) + 1);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tlangqunmrfz2: {},\r\n\t\tqunxingmrfz: {\r\n\t\t\tmarktext: \"群仇\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"群仇\",\r\n\t\t\t\tcontent: \"你被狼群盯上了\",\r\n\t\t\t},\r\n\t\t\taudio: 4,\r\n\t\t\ttrigger: { target: \"useCardToTarget\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.player != player && event.player.countMark(\"qunxingmrfz\") < 6;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"是否令\" + get.translation(event.player) + \"获得一个‘群仇’标记\";\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.player) < 2;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.player.addMark(\"qunxingmrfz\");\r\n\t\t\t\tplayer.line(trigger.player);\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\ttargetInRange: function (card, player, target) {\r\n\t\t\t\t\tif (target.hasMark(\"qunxingmrfz\")) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"qunxingmrfz_damage\", \"qunxingmrfz_dirhit\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\taudio: \"qunxingmrfz\",\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.hasMark(\"qunxingmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar target = trigger.player;\r\n\t\t\t\t\t\tplayer.draw(target.countMark(\"qunxingmrfz\"));\r\n\t\t\t\t\t\ttarget.removeAllmark(\"qunxingmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdirhit: {\r\n\t\t\t\t\taudio: \"qunxingmrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.card &&\r\n\t\t\t\t\t\t\t(get.type(event.card) == \"trick\" || (get.type(event.card) == \"basic\" && ![\"shan\", \"tao\", \"jiu\", \"du\"].includes(event.card.name))) &&\r\n\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current != player && current.hasMark(\"qunxingmrfz\");\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current != player && current.hasMark(\"qunxingmrfz\");\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tplayer.line(\r\n\t\t\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current != player && current.hasMark(\"qunxingmrfz\");\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t\t\treturn arg.target.hasMark(\"qunxingmrfz\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//百炼嘉维尔\r\n\t\tyixuemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"recoverBegin\" },\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.hasSkill(\"yixuemrfz2\");\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.num++;\r\n\t\t\t\tplayer.addSkill(\"yixuemrfz2\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tyixuemrfz2: {\r\n\t\t\tsilent: true,\r\n\t\t\tfirstDo: true,\r\n\t\t\tcharlotte: true,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.hasSkill(\"yixuemrfz2\");\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.removeSkill(\"yixuemrfz2\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tjuximrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.targets.length > 1) return false;\r\n\t\t\t\treturn event.card.name == \"sha\" && event.target.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar cards = trigger.target.getCards(\"hej\"),\r\n\t\t\t\t\tlist = [],\r\n\t\t\t\t\tnum = 0;\r\n\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\tlist.add(get.suit(i, player));\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i of lib.suit) {\r\n\t\t\t\t\tif (list.includes(i)) num++;\r\n\t\t\t\t}\r\n\t\t\t\tplayer.choosePlayerCard(trigger.target, \"he\", [1, Math.min(trigger.target.countCards(\"he\"), num)], get.prompt(\"juximrfz\", trigger.target) + \"(可选\" + num + \"张牌)\").set(\"forceAuto\", true);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool && result.links.length) {\r\n\t\t\t\t\tvar target = trigger.target;\r\n\t\t\t\t\tplayer.logSkill(\"juximrfz\", target);\r\n\t\t\t\t\tplayer.addToExpansion(result.cards, \"giveAuto\", player).gaintag.add(\"juximrfz2\");\r\n\t\t\t\t\tplayer.addSkill(\"juximrfz2\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tunequip_ai: true,\r\n\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\tif (get.attitude(player, arg.target) > 0) return false;\r\n\t\t\t\t\tif (tag == \"directHit_ai\") return arg.target.countCards(\"h\") < 2;\r\n\t\t\t\t\tif (arg && arg.name == \"sha\" && arg.target.getEquip(2)) return true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tjuximrfz2: {\r\n\t\t\tintro: {\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t\tmark: function (dialog, storage, player) {\r\n\t\t\t\t\tvar cards = player.getExpansions(\"juximrfz2\");\r\n\t\t\t\t\tif (player.isUnderControl(true)) dialog.addAuto(cards);\r\n\t\t\t\t\telse return \"共有\" + get.cnNumber(cards.length) + \"张牌\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.card.name != \"sha\") return false;\r\n\t\t\t\treturn player.getExpansions(\"juximrfz2\").length > 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar history = player.getHistory(\"sourceDamage\", function (evt) {\r\n\t\t\t\t\treturn evt.card == trigger.card;\r\n\t\t\t\t}).length;\r\n\t\t\t\tvar cards = player.getExpansions(\"juximrfz2\");\r\n\t\t\t\t(\"step 0\");\r\n\t\t\t\tif (history > 0)\r\n\t\t\t\t\tplayer.chooseButton([\"你可以至多获得两张牌\", cards], [0, Math.min(2, cards.length)], true).set(\"ai\", function (button) {\r\n\t\t\t\t\t\treturn get.value(button.link, _status.event.player);\r\n\t\t\t\t\t});\r\n\t\t\t\telse\r\n\t\t\t\t\ttrigger.targets[0].chooseButton([\"你可以至多获得两张牌\", cards], [0, Math.min(2, cards.length)], true).set(\"ai\", function (button) {\r\n\t\t\t\t\t\treturn get.value(button.link, _status.event.player);\r\n\t\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tif (history > 0) player.gain(result.links, \"gain2\");\r\n\t\t\t\t\telse trigger.targets[0].gain(result.links, \"gain2\");\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tplayer.loseToDiscardpile(cards);\r\n\t\t\t\tplayer.removeSkill(\"juximrfz2\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tconghunmrfz: {\r\n\t\t\tmarktext: \"坚韧\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"坚韧\",\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tif (player.storage.conghunmrfz_lose) return \"已有\" + player.countMark(\"conghunmrfz\") + \"个坚韧标记</br>本轮已发动过【丛魂①】\";\r\n\t\t\t\t\treturn \"已有\" + player.countMark(\"conghunmrfz\") + \"个坚韧标记</br>本轮未发动过【丛魂①】\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.conghunmrfza = -10;\r\n\t\t\t},\r\n\t\t\tfirstDo: true,\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.hasMark(\"conghunmrfz\") && player.storage.conghunmrfza <= game.roundNumber - 2;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn player.hp < 3 || player.countCards(\"he\") < 4 || player.countCards(\"h\") == 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.storage.conghunmrfz_lose = true;\r\n\t\t\t\tplayer.storage.conghunmrfza = game.roundNumber;\r\n\t\t\t},\r\n\t\t\tgroup: [\"conghunmrfz_dam\", \"conghunmrfz_rem\", \"conghunmrfz_lose\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdam: {\r\n\t\t\t\t\taudio: \"conghunmrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"damageBegin3\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.storage.conghunmrfz_lose;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num--;\r\n\t\t\t\t\t\tplayer.addMark(\"conghunmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\trem: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.storage.conghunmrfz_lose && player.storage.conghunmrfza <= game.roundNumber - 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.conghunmrfz_lose = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tlose: {\r\n\t\t\t\t\taudio: \"conghunmrfza\",\r\n\t\t\t\t\ttrigger: { global: \"phaseBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"conghunmrfz\") && player.storage.conghunmrfza <= game.roundNumber - 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.loseHp();\r\n\t\t\t\t\t\tplayer.removeMark(\"conghunmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tconghunmrfza: { audio: 2 },\r\n\t\t//史尔特尔\r\n\t\tyujinmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"dying\" },\r\n\t\t\tunique: true,\r\n\t\t\tmark: true,\r\n\t\t\tlimited: true,\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationStr: \"余烬\",\r\n\t\t\tanimationColor: \"fire\",\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.yujinmrfz = false;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.yujinmrfz;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.storage.yujinmrfz = true;\r\n\t\t\t\tvar next = [player.phaseZhunbei(), player.phaseJudge(), player.phaseDraw(), player.phaseUse(), player.phaseDiscard(), player.phaseJieshu()];\r\n\t\t\t\tfor (var i = 0; i < next.length; i++) {\r\n\t\t\t\t\tevent.next.remove(next[i]);\r\n\t\t\t\t\ttrigger.next.push(next[i]);\r\n\t\t\t\t}\r\n\t\t\t\tplayer.awakenSkill(event.name);\r\n\t\t\t},\r\n\t\t\tgroup: \"yujinmrfz_rec\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\trec: {\r\n\t\t\t\t\taudio: \"huanghunmrfza\",\r\n\t\t\t\t\ttrigger: { player: \"turnOverAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.storage.yujinmrfz == true && !player.isTurnedOver();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.yujinmrfz = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thuanghunmrfza: { audio: 2 },\r\n\t\thuanghunmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (player.countCards(\"he\") < 3) return false;\r\n\t\t\t\tif (\r\n\t\t\t\t\tplayer.countCards(\"j\") > 0 &&\r\n\t\t\t\t\t!player.hasCard(function (card) {\r\n\t\t\t\t\t\treturn card.name == \"wuxie\";\r\n\t\t\t\t\t}, \"h\")\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\treturn player.hasCard(function (card) {\r\n\t\t\t\t\treturn card.name == \"sha\";\r\n\t\t\t\t}, \"h\"); //QQQ\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.chooseToDiscard(\"he\", \"【黄昏】:你可以至多弃置两张牌，然后增加等量的体力上限\", [0, 2]).set(\"ai\", function (card) {\r\n\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tplayer.gainMaxHp(result.cards.length);\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tplayer.addTempSkill(\"huanghunmrfz_lose\");\r\n\t\t\t\tplayer.addTempSkill(\"huanghunmrfz_dam\");\r\n\t\t\t\tplayer.turnOver();\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tlose: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn get.tag(event.card, \"damage\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.loseMaxHp();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdam: {\r\n\t\t\t\t\taudio: \"huanghunmrfz\",\r\n\t\t\t\t\ttrigger: { source: \"damageBegin\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tselectTarget: function (card, player, range) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\" && range[1] != -1) range[1] += 2;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tattackRange: function (player, num) {\r\n\t\t\t\t\t\t\treturn (num += 2);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tmojianmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tusable: 2,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.nature == \"fire\" && player.isPhaseUsing();\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.draw(2);\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tcardnature: function (card, player) {\r\n\t\t\t\t\tif (card.nature != \"thunder\" && card.name == \"sha\") return \"fire\";\r\n\t\t\t\t\tif (card.nature == \"thunder\" && card.name == \"sha\") return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//新流明\r\n\t\tfanyuanmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"凡人之愿\",\r\n\t\t\t\tcontent: \"“直到灯火明亮”\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"useCardToTargeted\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (get.type(event.card) != \"delay\") return false;\r\n\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\treturn current.hasMark(\"fanyuanmrfz\");\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.logSkill(\"fanyuanmrfz\");\r\n\t\t\t},\r\n\t\t\tglobal: \"fanyuanmrfz_eff\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"fanyuanmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeMark(\"fanyuanmrfz\", false);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\ttargetEnabled: function (card, player, target) {\r\n\t\t\t\t\t\t\tif (get.type(card) == \"delay\" && target.hasMark(\"fanyuanmrfz\")) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tnew_weiguangmrfz: {\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"灯火不灭\",\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\treturn \"剩余次数:\" + (5 - player.countMark(\"new_weiguangmrfz\"));\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 4,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: [\"turnOverAfter\", \"linkAfter\", \"addJudgeBefore\"],\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.countMark(\"new_weiguangmrfz\") > 4) return false;\r\n\t\t\t\tif (event.name == \"link\") return event.player.isLinked();\r\n\t\t\t\tif (event.name == \"turnOver\") return event.player.isTurnedOver();\r\n\t\t\t\treturn event.name == \"addJudge\";\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"是否对\" + get.translation(event.player) + \"发动【微光】(\" + (5 - player.countMark(\"new_weiguangmrfz\")) + \"/5)？\";\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tvar att = get.attitude(player, event.player);\r\n\t\t\t\tif (event.player.hasSkill(\"xinfu_limu\") && att > 2 && event.name == \"addJudge\" && event.player.isPhaseUsing()) return false;\r\n\t\t\t\tif (event.player.hasSkill(\"xinfu_limu\") && att < 0 && event.name == \"addJudge\" && event.player.isPhaseUsing()) return true;\r\n\t\t\t\treturn att > 2;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar target = trigger.player;\r\n\t\t\t\t(\"step 0\");\r\n\t\t\t\tplayer.addMark(\"new_weiguangmrfz\", false);\r\n\t\t\t\tif (!target.hasMark(\"fanyuanmrfz\")) target.addMark(\"fanyuanmrfz\", false);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tvar num = 3;\r\n\t\t\t\tif (target.isLinked()) {\r\n\t\t\t\t\ttarget.link(false);\r\n\t\t\t\t\tnum--;\r\n\t\t\t\t}\r\n\t\t\t\tif (target.isTurnedOver()) {\r\n\t\t\t\t\ttarget.turnOver(false);\r\n\t\t\t\t\tnum--;\r\n\t\t\t\t}\r\n\t\t\t\tif (trigger.name == \"addJudge\" || target.countCards(\"j\") > 0) {\r\n\t\t\t\t\tif (trigger.name == \"addJudge\") {\r\n\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t\tvar owner = get.owner(trigger.card);\r\n\t\t\t\t\t\tif (owner && owner.getCards(\"hej\").includes(trigger.card)) owner.lose(trigger.card, ui.discardPile);\r\n\t\t\t\t\t\telse game.cardsDiscard(trigger.card);\r\n\t\t\t\t\t\tgame.log(trigger.card, \"进入了弃牌堆\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttarget.chooseToDiscard(true, \"j\", target.countCards(\"j\"));\r\n\t\t\t\t\tnum--;\r\n\t\t\t\t}\r\n\t\t\t\ttarget.draw(num);\r\n\t\t\t},\r\n\t\t\tgroup: \"new_weiguangmrfz_rem\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\trem: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.countMark(\"new_weiguangmrfz\") > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeMark(\"new_weiguangmrfz\", player.countMark(\"new_weiguangmrfz\"), false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tyingjimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"useCardToTarget\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.target == player) return false;\r\n\t\t\t\tif (event.targets.length > 1) return false;\r\n\t\t\t\treturn get.type(event.card) == \"delay\" && !player.hasMark(\"yingjimrfz\");\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"是否令\" + get.translation(event.target) + \"回复一点体力并摸一张牌\";\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.target) > 2;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.targets[0].recover();\r\n\t\t\t\ttrigger.targets[0].draw();\r\n\t\t\t\tplayer.addMark(\"yingjimrfz\", false);\r\n\t\t\t},\r\n\t\t\tgroup: \"yingjimrfz_rem\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\trem: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"yingjimrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeMark(\"yingjimrfz\", false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//林\r\n\t\tyinbimrfz: {\r\n\t\t\tmarktext: \"壁\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"壁\",\r\n\t\t\t\tcontent: \"·琉璃壁保护着你</br>·此琉璃壁来源【荫蔽】\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.liuliemrfz && !player.storage.yinbimrfz;\r\n\t\t\t},\r\n\t\t\tselectTarget: [1, 2],\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && !target.hasMark(\"yinbimrfz\") && !target.hasMark(\"zhenzamrfz\");\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.storage.yinbimrfz = true;\r\n\t\t\t\tif (!player.hasSkill(\"liuliemrfz_rem\")) player.addSkill(\"liuliemrfz_rem\");\r\n\t\t\t\tfor (var i = 0; i < targets.length; i++) {\r\n\t\t\t\t\tif (!targets[i].hasMark(\"yinbimrfz\")) targets[i].addMark(\"yinbimrfz\");\r\n\t\t\t\t\tif (!targets[i].hasSkill(\"yinbimrfz_rem\")) targets[i].addSkill(\"yinbimrfz_rem\");\r\n\t\t\t\t\tif (targets[i].hujia < 1) targets[i].changeHujia();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\trem: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (player.hasMark(\"yinbimrfz\")) {\r\n\t\t\t\t\t\t\tplayer.removeMark(\"yinbimrfz\");\r\n\t\t\t\t\t\t\tplayer.changeHujia(-1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tplayer.removeSkill(\"yinbimrfz_rem\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 10,\r\n\t\t\t\texpose: 0.3,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\ttarget: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tliuliemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && get.attitude(player, current) > 2;\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t\treturn Math.random() > 0.85;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.storage.liuliemrfz = true;\r\n\t\t\t\tplayer.addSkill(\"liuliemrfz_rem\");\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\trem: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.liuliemrfz = false;\r\n\t\t\t\t\t\tplayer.storage.yinbimrfz = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhenzamrfz: {\r\n\t\t\tmarktext: \"壁\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"壁\",\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tif (player.storage.liuliemrfz) return \"·琉璃壁保护着你</br>·【缜匝②】已修改</br>·【荫蔽】已失效\";\r\n\t\t\t\t\treturn \"·琉璃壁保护着你\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 6,\r\n\t\t\tderivation: [\"zhenzamrfz_rewrite\"],\r\n\t\t\ttrigger: { global: \"damageEnd\" },\r\n\t\t\tdirect: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!event.player.hasMark(\"zhenzamrfz\") && !event.player.hasMark(\"yinbimrfz\")) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tevent.hujia &&\r\n\t\t\t\t\t!event.player.hujia &&\r\n\t\t\t\t\tevent.player.isIn() &&\r\n\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != event.player && event.player.inRangeOf(current);\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar playerx = trigger.player;\r\n\t\t\t\t(\"step 0\");\r\n\t\t\t\tif (playerx.hasMark(\"zhenzamrfz\")) playerx.removeMark(\"zhenzamrfz\");\r\n\t\t\t\telse playerx.removeMark(\"yinbimrfz\");\r\n\t\t\t\tplayerx.chooseTarget(get.prompt(\"zhenzamrfz\"), \"你可以随机获得攻击范围内一名其他角色的\" + (player.storage.liuliemrfz ? \"两张牌\" : \"一张牌\") + \"并对其造成一点伤害\", function (card, target, player) {\r\n\t\t\t\t\treturn target != player && player.inRangeOf(target);\r\n\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\tvar trigger = _status.event.getTrigger();\r\n\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\treturn -get.attitude(trigger.player, target);\r\n\t\t\t\t};\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar target = result.targets[0],\r\n\t\t\t\t\t\tcardg = [];\r\n\t\t\t\t\tfor (var i = 0; i < (player.storage.liuliemrfz ? 2 : 1); i++) {\r\n\t\t\t\t\t\tvar cardt = target.getCards(\"he\").randomGet();\r\n\t\t\t\t\t\tif (!cardg.includes(cardt)) cardg.push(cardt);\r\n\t\t\t\t\t\telse if (target.countCards(\"he\") > 1) i--;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplayerx.gain(cardg, target, \"giveAuto\", \"bySelf\");\r\n\t\t\t\t\ttarget.damage(playerx || \"nosource\", \"nocard\");\r\n\t\t\t\t\t//playerx.gainPlayerCard(target,(player.storage.liuliemrfz?2:1),'he',true)\r\n\t\t\t\t\tplayerx.logSkill(\"zhenzamrfz\", target);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhenzamrfz_sta\", \"zhenzamrfz_gt\", \"zhenzamrfz_gt2\", \"zhenzamrfz_time1\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tsta: {\r\n\t\t\t\t\taudio: \"zhenzamrfz\",\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tlocked: false,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (event.name != \"phase\" || game.phaseNumber == 0) && player.countCards(\"h\") > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addMark(\"zhenzamrfz\");\r\n\t\t\t\t\t\tif (player.hujia < 1) player.changeHujia();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tgt: {\r\n\t\t\t\t\taudio: \"zhenzamrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseZhunbeiBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.countMark(\"zhenzamrfz_time1\") > 1) return false;\r\n\t\t\t\t\t\treturn !player.hasMark(\"zhenzamrfz\") && !player.hasMark(\"yinbimrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addMark(\"zhenzamrfz\");\r\n\t\t\t\t\t\tplayer.addMark(\"zhenzamrfz_time1\", false);\r\n\t\t\t\t\t\tif (player.hujia < 1) player.changeHujia();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tgt2: {\r\n\t\t\t\t\taudio: \"zhenzamrfz\",\r\n\t\t\t\t\ttrigger: { global: \"dying\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.countMark(\"zhenzamrfz_time2\") > 1) return false;\r\n\t\t\t\t\t\tif (player.hasMark(\"zhenzamrfz\") || player.hasMark(\"yinbimrfz\")) return false;\r\n\t\t\t\t\t\treturn event.player != player && event.parent.name == \"damage\" && event.parent.source && event.parent.source == player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addMark(\"zhenzamrfz\");\r\n\t\t\t\t\t\tplayer.addMark(\"zhenzamrfz_time2\", false);\r\n\t\t\t\t\t\tif (player.hujia < 1) player.changeHujia();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttime1: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeMark(\"zhenzamrfz_time1\", player.countMark(\"zhenzamrfz_time1\"), false);\r\n\t\t\t\t\t\tplayer.removeMark(\"zhenzamrfz_time2\", player.countMark(\"zhenzamrfz_time2\"), false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttime2: {},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 0.8,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//多萝西\r\n\t\tgongzhenmrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: [\"useCardAfter\", \"respond\"] },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!player.isPhaseUsing()) return false;\r\n\t\t\t\tif (!event.card.isCard) return false;\r\n\t\t\t\treturn event.cards && event.cards.length == 1;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar cards = player.getCards(\"h\"),\r\n\t\t\t\t\tlist = [],\r\n\t\t\t\t\tnum = 0;\r\n\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\tlist.add(get.suit(i, player));\r\n\t\t\t\t}\r\n\t\t\t\tif (!list.includes(get.suit(trigger.card, player))) player.draw();\r\n\t\t\t\telse if (player.countCards(\"h\") > 0) player.chooseToDiscard(\"h\", true, \"【共振】:请弃置一张手牌\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tmengxiangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"drawAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!player.isPhaseUsing()) return false;\r\n\t\t\t\treturn event.getParent().name == \"gongzhenmrfz\";\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.addMark(\"mengxiangmrfz\", false);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (player.countMark(\"mengxiangmrfz\") % 2 == 0 && player.hasMark(\"mengxiangmrfz\")) {\r\n\t\t\t\t\tplayer.addTempSkill(\"mengxiangmrfz_eff\", {\r\n\t\t\t\t\t\tplayer: \"phaseEnd\",\r\n\t\t\t\t\t});\r\n\t\t\t\t\tplayer.removeMark(\"mengxiangmrfz\", 2, false);\r\n\t\t\t\t\tif (player.countMark(\"mengxiangmrfz\") > 0) event.redo();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"mengxiangmrfz_rem\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\trem: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"mengxiangmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeMark(\"mengxiangmrfz\", player.countMark(\"mengxiangmrfz\"), false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff: {\r\n\t\t\t\t\taudio: \"mengxiangmrfz\",\r\n\t\t\t\t\ttrigger: { player: [\"useCard1\", \"respond\"] },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeSkill(\"mengxiangmrfz_eff\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable: function (card) {\r\n\t\t\t\t\t\t\treturn Infinity;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttargetInRange: function (card) {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"下一张使用或打出的牌无次数和距离限制\",\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tpaizhangmrfz: {\r\n\t\t\tglobal: \"paizhangmrfz_tag4\",\r\n\t\t\taudio: 4,\r\n\t\t\ttrigger: { player: \"loseAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.type != \"discard\" || event.getlx === false || event.getParent(3).name != \"gongzhenmrfz\") return false;\r\n\t\t\t\tfor (var card of event.cards) {\r\n\t\t\t\t\tif (get.position(card, true) == \"d\") return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tif (trigger.cards.length) {\r\n\t\t\t\t\tplayer.chooseTarget(get.prompt(\"paizhangmrfz\"), \"你可以将此牌交给一名其他角色\", function (card, target, player) {\r\n\t\t\t\t\t\treturn target != player && !target.hasSkill(\"paizhangmrfz2\");\r\n\t\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\t\treturn -get.attitude(player, target);\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tresult.targets[0].gain(trigger.cards, \"gain2\").gaintag = [\"paizhangmrfz\"];\r\n\t\t\t\t\tresult.targets[0].addTempSkill(\"paizhangmrfz2\");\r\n\t\t\t\t\tplayer.logSkill(\"paizhangmrfz\");\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tfor (i of trigger.cards) {\r\n\t\t\t\t\ti.storage.paizhangmrfz = true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"paizhangmrfz_tag1\", \"paizhangmrfz_tag2\", \"paizhangmrfz_tag3\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\ttag1: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"useCard\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tfor (var i = 0; i < event.cards.length; i++) {\r\n\t\t\t\t\t\t\tif (event.cards[i].storage && event.cards[i].storage.paizhangmrfz) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar cards = trigger.cards[0];\r\n\t\t\t\t\t\tif (trigger.cards.length > 1 || cards.number == undefined) {\r\n\t\t\t\t\t\t\ttrigger.player.damage();\r\n\t\t\t\t\t\t\tplayer.logSkill(\"paizhangmrfz\", trigger.player);\r\n\t\t\t\t\t\t} else if (cards.number > 8) {\r\n\t\t\t\t\t\t\ttrigger.player.damage();\r\n\t\t\t\t\t\t\tplayer.logSkill(\"paizhangmrfz\", trigger.player);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttrigger.player.chooseToDiscard(\"he\", Math.floor(cards.number / 3), \"【排障】:请弃置\" + Math.floor(cards.number / 3) + \"张牌\", true);\r\n\t\t\t\t\t\t\tplayer.logSkill(\"paizhangmrfz\", trigger.player);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttag2: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\ttarget: \"useCardToTarget\",\r\n\t\t\t\t\t\tplayer: \"addJudgeBefore\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tfor (var i = 0; i < event.cards.length; i++) {\r\n\t\t\t\t\t\t\tif (event.cards[i].storage && event.cards[i].storage.paizhangmrfz) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tif (trigger.name == \"addJudge\") {\r\n\t\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t\t\tvar owner = get.owner(trigger.card);\r\n\t\t\t\t\t\t\tif (owner && owner.getCards(\"hej\").includes(trigger.card)) owner.lose(trigger.card, ui.discardPile);\r\n\t\t\t\t\t\t\telse game.cardsDiscard(trigger.card);\r\n\t\t\t\t\t\t\tgame.log(trigger.card, \"进入了弃牌堆\");\r\n\t\t\t\t\t\t} else trigger.getParent().targets.remove(player);\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tvar trgnext = trigger.player.getNext(),\r\n\t\t\t\t\t\t\ttrgprvs = trigger.player.getPrevious();\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\ttrgnext != player &&\r\n\t\t\t\t\t\t\ttrgnext.hasCard(function (card) {\r\n\t\t\t\t\t\t\t\treturn card.storage && card.storage.paizhangmrfz;\r\n\t\t\t\t\t\t\t}, \"h\")\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tvar cards = trgnext.getCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\t\treturn card.storage && card.storage.paizhangmrfz;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tplayer.logSkill(\"paizhangmrfz\", trgnext);\r\n\t\t\t\t\t\t\ttrgnext.damage();\r\n\t\t\t\t\t\t\tgame.cardsDiscard(cards);\r\n\t\t\t\t\t\t\tgame.log(cards, \"进入了弃牌堆\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\ttrgprvs != player &&\r\n\t\t\t\t\t\t\ttrgprvs.hasCard(function (card) {\r\n\t\t\t\t\t\t\t\treturn card.storage && card.storage.paizhangmrfz;\r\n\t\t\t\t\t\t\t}, \"h\")\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tvar cards = trgprvs.getCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\t\treturn card.storage && card.storage.paizhangmrfz;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tplayer.logSkill(\"paizhangmrfz\", trgprvs);\r\n\t\t\t\t\t\t\ttrgprvs.damage();\r\n\t\t\t\t\t\t\tgame.cardsDiscard(cards);\r\n\t\t\t\t\t\t\tgame.log(cards, \"进入了弃牌堆\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttag3: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"useCardToPlayered\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.player == player) return false;\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t!event.player.hasCard(function (card) {\r\n\t\t\t\t\t\t\t\treturn card.storage && card.storage.paizhangmrfz;\r\n\t\t\t\t\t\t\t}, \"h\")\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\tfor (var i = 0; i < event.cards.length; i++) {\r\n\t\t\t\t\t\t\tif (event.cards[i].storage && event.cards[i].storage.paizhangmrfz) return false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var i = 0; i < event.targets.length; i++) {\r\n\t\t\t\t\t\t\tif (event.targets[i] == player) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tvar cards = trigger.player.getCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\treturn card.storage && card.storage.paizhangmrfz;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tevent.cards = cards;\r\n\t\t\t\t\t\tgame.cardsDiscard(cards);\r\n\t\t\t\t\t\tgame.log(cards, \"进入了弃牌堆\");\r\n\t\t\t\t\t\tplayer.logSkill(\"paizhangmrfz\", trigger.player);\r\n\t\t\t\t\t\tif (trigger.name == \"addJudge\") {\r\n\t\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t\t\tvar owner = get.owner(trigger.card);\r\n\t\t\t\t\t\t\tif (owner && owner.getCards(\"hej\").includes(trigger.card)) owner.lose(trigger.card, ui.discardPile);\r\n\t\t\t\t\t\t\telse game.cardsDiscard(trigger.card);\r\n\t\t\t\t\t\t\tgame.log(trigger.card, \"进入了弃牌堆\");\r\n\t\t\t\t\t\t} else trigger.getParent().targets.remove(player);\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (event.cards.length > 1 || event.cards.number == undefined) {\r\n\t\t\t\t\t\t\ttrigger.player.damage();\r\n\t\t\t\t\t\t\tplayer.logSkill(\"paizhangmrfz\", trigger.player);\r\n\t\t\t\t\t\t} else if (event.cards.number > 8) {\r\n\t\t\t\t\t\t\ttrigger.player.damage();\r\n\t\t\t\t\t\t\tplayer.logSkill(\"paizhangmrfz\", trigger.player);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttrigger.player.chooseToDiscard(\"he\", Math.floor(cards.number / 3), \"【排障】:请弃置\" + Math.floor(cards.number / 3) + \"张牌\", true);\r\n\t\t\t\t\t\t\tplayer.logSkill(\"paizhangmrfz\", trigger.player);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tvar trgnext = trigger.player.getNext(),\r\n\t\t\t\t\t\t\ttrgprvs = trigger.player.getPrevious();\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\ttrgnext.hasCard(function (card) {\r\n\t\t\t\t\t\t\t\treturn card.storage && card.storage.paizhangmrfz;\r\n\t\t\t\t\t\t\t}, \"h\")\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tvar cards = trgnext.getCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\t\treturn card.storage && card.storage.paizhangmrfz;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tplayer.logSkill(\"paizhangmrfz\", trgnext);\r\n\t\t\t\t\t\t\ttrgnext.damage();\r\n\t\t\t\t\t\t\tgame.cardsDiscard(cards);\r\n\t\t\t\t\t\t\tgame.log(cards, \"进入了弃牌堆\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\ttrgprvs.hasCard(function (card) {\r\n\t\t\t\t\t\t\t\treturn card.storage && card.storage.paizhangmrfz;\r\n\t\t\t\t\t\t\t}, \"h\")\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tvar cards = trgprvs.getCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\t\treturn card.storage && card.storage.paizhangmrfz;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tplayer.logSkill(\"paizhangmrfz\", trgprvs);\r\n\t\t\t\t\t\t\ttrgprvs.damage();\r\n\t\t\t\t\t\t\tgame.cardsDiscard(cards);\r\n\t\t\t\t\t\t\tgame.log(cards, \"进入了弃牌堆\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttag4: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardDiscardable: function (card, player) {\r\n\t\t\t\t\t\t\tif (card.storage && card.storage.paizhangmrfz) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tpaizhangmrfz2: { charlotte: true },\r\n\t\t//空弦\r\n\t\ttiexianmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\tif (!player.hujia) return num + 1;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.hujia;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.draw(3);\r\n\t\t\t},\r\n\t\t\tgroup: [\"tiexianmrfz_draw\", \"tiexianmrfz_k\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\tk: {\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardnumber(card) {\r\n\t\t\t\t\t\t\tif (card.hasGaintag(\"tiexianmrfz\")) return 13;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"gainAfter\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn !player.hujia && !player.hasSkill(\"tiexianmrfz_ban\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\tplayer.addTempSkill(\"tiexianmrfz_ban\", {\r\n\t\t\t\t\t\t\tglobal: \"roundStart\",\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tfor (var i of trigger.cards) {\r\n\t\t\t\t\t\t\ti.addGaintag(\"tiexianmrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\taudio: \"tiexianmrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn !player.hujia;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tlieshimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tusable: 3,\r\n\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.card.name != \"sha\" || !event.targets || event.targets.length > 1) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.countCards(\"he\") > 0 &&\r\n\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && get.distance(event.targets[0], current) <= 1 && !event.targets.includes(current);\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseToDiscard(\"he\", get.prompt(\"lieshimrfz\"), \"你可以弃置一张牌并选择一名与\" + get.translation(trigger.targets[0]) + \"距离为1的其他角色视为使用一张【杀】\")\r\n\t\t\t\t\t.set(\r\n\t\t\t\t\t\t\"goon\",\r\n\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\tvar target = trigger.targets[0];\r\n\t\t\t\t\t\t\treturn get.distance(target, current) == 1 && get.attitude(player, current) < 2;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\tif (_status.event.goon) return 6 - get.value(card);\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.cards) {\r\n\t\t\t\t\tplayer.chooseTarget(true, \"请选择一名与\" + get.translation(trigger.targets[0]) + \"距离为1的一名其他角色\", function (card, player, target) {\r\n\t\t\t\t\t\tvar evt = _status.event.getTrigger();\r\n\t\t\t\t\t\treturn target != player && target != evt.targets[0] && get.distance(evt.targets[0], target) <= 1 && lib.filter.targetEnabled2(evt.card, player, target);\r\n\t\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\t\treturn -get.attitude(player, target);\r\n\t\t\t\t\t};\r\n\t\t\t\t} else event.finish();\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tplayer.useCard({ name: \"sha\", isCard: true }, result.targets[0]);\r\n\t\t\t\t\tplayer.logSkill(\"lieshimrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\t//麒麟夜刀\r\n\t\tguirenmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardToTargeted\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!player.isPhaseUsing()) return false;\r\n\t\t\t\tif (player.getHandcardLimit() == 0) return false;\r\n\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"你可以令此【杀】额外结算一次，然后本回合的手牌上限-1。(当前手牌上限:\" + player.getHandcardLimit() + \")\";\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.getParent().targets = trigger.getParent().targets.concat(trigger.targets);\r\n\t\t\t\ttrigger.getParent().triggeredTargets4 = trigger.getParent().triggeredTargets4.concat(trigger.targets);\r\n\t\t\t\tif (!player.hasSkill(\"guirenmrfz2\")) player.addTempSkill(\"guirenmrfz2\");\r\n\t\t\t\tif (!player.hasSkill(\"guirenmrfz_lose\")) player.addTempSkill(\"guirenmrfz_lose\");\r\n\t\t\t\tplayer.storage.guirenmrfz2++;\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tlose: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseUseEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeSkill(\"guirenmrfz\");\r\n\t\t\t\t\t\tplayer.addSkill(\"guiqiangmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tguirenmrfz2: {\r\n\t\t\tsilent: true,\r\n\t\t\tcharlotte: true,\r\n\t\t\tfirstDo: true,\r\n\t\t\ttrigger: { player: \"phaseAfter\" },\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.guirenmrfz2 = 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.storage.guirenmrfz2 = 0;\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\treturn num - player.storage.guirenmrfz2;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tguiqiangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tfrequent: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.drawTo(Math.min(player.maxHp, 4));\r\n\t\t\t\tplayer.chooseToDiscard(get.prompt(\"guiqiangmrfz\"), \"你可以弃置一张牌并失去此技能，然后获得【鬼人】\", \"he\").set(\"ai\", function (card) {\r\n\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.cards) {\r\n\t\t\t\t\tplayer.removeSkill(\"guiqiangmrfz\");\r\n\t\t\t\t\tplayer.addSkill(\"guirenmrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tluanwumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tderivation: [\"guiqiangmrfz\", \"guirenmrfz\"],\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\treturn get.type2(card) == \"trick\" || get.tag(card, \"damage\");\r\n\t\t\t\t\t}) > 2\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\tif (player.getHandcardLimit() > 2) return false;\r\n\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\treturn current != player && player.inRange(current) && get.attitude(player.current) < 0;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (\r\n\t\t\t\t\t!game.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && player.inRange(current);\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\treturn player.hasSkill(\"guirenmrfz\");\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.chooseTarget(true, \"【乱舞】:请选择一名其他角色，视为对其使用一张结算三次的【杀】\", function (card, player, target) {\r\n\t\t\t\t\treturn target != player && player.inRange(target);\r\n\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\treturn -get.attitude(player, target);\r\n\t\t\t\t};\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\tplayer.addTempSkill(\"luanwumrfza\", {\r\n\t\t\t\t\t\tplayer: \"shaAfter\",\r\n\t\t\t\t\t});\r\n\t\t\t\t\tplayer.useCard({ name: \"sha\", isCard: true }, result.targets[0]);\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tplayer.skip(\"phaseUse\");\r\n\t\t\t\tplayer.skip(\"phaseDraw\");\r\n\t\t\t\tplayer.skip(\"phaseJudge\");\r\n\t\t\t\tif (!player.hasSkill(\"luanwumrfz_dam\")) player.addSkill(\"luanwumrfz_dam\");\r\n\t\t\t},\r\n\t\t\tgroup: \"luanwumrfz_add\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdam: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"受到的伤害+1\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"damageBegin\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t\tplayer.removeSkill(\"luanwumrfz_dam\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tadd: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addSkill(\"guirenmrfz\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"luanwumrfz_add\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tluanwumrfza: {\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { player: \"useCardToTargeted\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tevent.num = 2;\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tevent.num--;\r\n\t\t\t\tplayer.logSkill(\"luanwumrfza\");\r\n\t\t\t\ttrigger.getParent().targets = trigger.getParent().targets.concat(trigger.targets);\r\n\t\t\t\ttrigger.getParent().triggeredTargets4 = trigger.getParent().triggeredTargets4.concat(trigger.targets);\r\n\t\t\t\tif (event.num > 0) event.redo();\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tplayer.removeSkill(\"luanwumrfza\");\r\n\t\t\t},\r\n\t\t},\r\n\t\t//土豆雷（划掉） 伊内丝\r\n\t\tyingzhimrfz: {\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar str = \"·摸牌阶段摸牌数+\" + player.countMark(\"yingzhimrfz_draw\") + \"</br>·手牌上限+\" + player.countMark(\"yingzhimrfz_mhand\");\r\n\t\t\t\t\tstr = str + \"</br>·使用【杀】的次数+\" + player.countMark(\"yingzhimrfz_sha\");\r\n\t\t\t\t\tif (!player.hasMark(\"yingzhimrfz_dying\")) return str;\r\n\t\t\t\t\treturn str + \"</br>·下次造成的伤害+1\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 6,\r\n\t\t\tsilent: true,\r\n\t\t\tfirstDo: true,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tcontent: function () {\r\n\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\tif (current != player) current.storage.yingzhimrfz_draw = false;\r\n\t\t\t\t\tif (current != player) current.storage.yingzhimrfz_mhand = false;\r\n\t\t\t\t\tif (current != player) current.storage.yingzhimrfz_sha = false;\r\n\t\t\t\t\tif (current != player) current.storage.yingzhimrfz_dying = false;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgroup: [\"yingzhimrfz_draw\", \"yingzhimrfz_drbuff\", \"yingzhimrfz_mhand\", \"yingzhimrfz_sha\", \"yingzhimrfz_dying\", \"yingzhimrfz_dybuff\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\t//标记\r\n\t\t\t\tmark: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\t\t\tvar str = \"·摸牌阶段摸牌数-\" + player.countMark(\"yingzhimrfz_drdebuff\") + \"</br>·手牌上限-\" + player.countMark(\"yingzhimrfz_mhddebuff\");\r\n\t\t\t\t\t\t\tstr = str + \"</br>·使用【杀】的次数-\" + player.countMark(\"yingzhimrfz_shadebuff\");\r\n\t\t\t\t\t\t\tif (!player.hasSkill(\"yingzhimrfz_dydebuff\")) return str;\r\n\t\t\t\t\t\t\treturn str + \"</br>·下次造成的伤害-1\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t//非延时锦囊牌 摸牌阶段摸牌数\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\taudio: \"yingzhimrfz\",\r\n\t\t\t\t\ttrigger: { player: \"useCardToTargeted\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.targets.length > 1) return false;\r\n\t\t\t\t\t\tif (event.target.storage.yingzhimrfz_draw) return false;\r\n\t\t\t\t\t\treturn get.type(event.card) == \"trick\" && event.target != player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\treturn get.attitude(player, event.target) < 2;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: function (event, player) {\r\n\t\t\t\t\t\treturn \"是否令\" + get.translation(event.target) + \"下个摸牌阶段摸牌数-1且你摸牌阶段摸牌数+1？\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (player.countMark(\"yingzhimrfz_draw\") < 2) player.addMark(\"yingzhimrfz_draw\", false);\r\n\t\t\t\t\t\ttrigger.targets[0].storage.yingzhimrfz_draw = true;\r\n\t\t\t\t\t\ttrigger.targets[0].addSkill(\"yingzhimrfz_drdebuff\");\r\n\t\t\t\t\t\ttrigger.targets[0].addMark(\"yingzhimrfz_drdebuff\", false);\r\n\t\t\t\t\t\ttrigger.targets[0].addSkill(\"yingzhimrfz_mark\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdrbuff: {\r\n\t\t\t\t\taudio: \"yingzhimrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDrawBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"yingzhimrfz_draw\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num += player.countMark(\"yingzhimrfz_draw\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdrdebuff: {\r\n\t\t\t\t\taudio: \"yingzhimrfz\",\r\n\t\t\t\t\ttrigger: { player: \"phaseDrawBegin\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"yingzhimrfz_drdebuff\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num -= player.countMark(\"yingzhimrfz_drdebuff\");\r\n\t\t\t\t\t\tplayer.removeMark(\"yingzhimrfz_drdebuff\", player.countMark(\"yingzhimrfz_drdebuff\"), false);\r\n\t\t\t\t\t\tplayer.removeSkill(\"yingzhimrfz_drdebuff\");\r\n\t\t\t\t\t\tif (!player.hasMark(\"yingzhimrfz_mhddebuff\") && !player.hasMark(\"yingzhimrfz_shadebuff\") && !player.hasSkill(\"yingzhimrfz_dydebuff\")) player.removeSkill(\"yingzhimrfz_mark\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t//其他角色响应你的牌 手牌上限\r\n\t\t\t\tmhand: {\r\n\t\t\t\t\taudio: \"yingzhimrfz\",\r\n\t\t\t\t\ttrigger: { global: [\"respond\", \"useCard\"] },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!event.respondTo) return false;\r\n\t\t\t\t\t\tif (event.player == player) return false;\r\n\t\t\t\t\t\tif (player != event.respondTo[0]) return false;\r\n\t\t\t\t\t\treturn !event.player.storage.yingzhimrfz_mhand;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\treturn get.attitude(player, event.player) < 2;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: function (event, player) {\r\n\t\t\t\t\t\treturn \"是否令\" + get.translation(event.player) + \"的下个回合手牌上限-1且你的手牌上限+1？\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (player.countMark(\"yingzhimrfz_mhand\") < 3) player.addMark(\"yingzhimrfz_mhand\", false);\r\n\t\t\t\t\t\ttrigger.player.addMark(\"yingzhimrfz_mhddebuff\", false);\r\n\t\t\t\t\t\ttrigger.player.storage.yingzhimrfz_mhand = true;\r\n\t\t\t\t\t\ttrigger.player.addSkill(\"yingzhimrfz_mhddebuff\");\r\n\t\t\t\t\t\ttrigger.player.addSkill(\"yingzhimrfz_mark\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn num + player.countMark(\"yingzhimrfz_mhand\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tmhddebuff: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"yingzhimrfz_mhddebuff\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeMark(\"yingzhimrfz_mhddebuff\", player.countMark(\"yingzhimrfz_mhddebuff\"), false);\r\n\t\t\t\t\t\tplayer.removeSkill(\"yingzhimrfz_mhddebuff\");\r\n\t\t\t\t\t\tif (!player.hasMark(\"yingzhimrfz_drdebuff\") && !player.hasMark(\"yingzhimrfz_shadebuff\") && !player.hasSkill(\"yingzhimrfz_dydebuff\")) player.removeSkill(\"yingzhimrfz_mark\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn num - player.countMark(\"yingzhimrfz_mhddebuff\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t//进入濒死 伤害+1\r\n\t\t\t\tdying: {\r\n\t\t\t\t\taudio: \"yingzhimrfz\",\r\n\t\t\t\t\ttrigger: { global: \"dying\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.player.storage.yingzhimrfz_dying) return false;\r\n\t\t\t\t\t\tif (event.player.hasSkill(\"yingzhimrfz_dydebuff\") && player.hasMark(\"yingzhimrfz_dying\")) return false;\r\n\t\t\t\t\t\treturn event.player != player && event.parent.name == \"damage\" && event.parent.source && event.parent.source == player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\treturn get.attitude(player, event.player) < 2;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: function (event, player) {\r\n\t\t\t\t\t\treturn \"是否令\" + get.translation(event.player) + \"下次造成的伤害-1且你下次造成的伤害+1？\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (!player.hasMark(\"yingzhimrfz_dying\")) player.addMark(\"yingzhimrfz_dying\", false);\r\n\t\t\t\t\t\tif (!trigger.player.hasSkill(\"yingzhimrfz_dydebuff\")) {\r\n\t\t\t\t\t\t\ttrigger.player.addSkill(\"yingzhimrfz_dydebuff\", false);\r\n\t\t\t\t\t\t\ttrigger.player.addSkill(\"yingzhimrfz_mark\");\r\n\t\t\t\t\t\t\ttrigger.player.storage.yingzhimrfz_dying = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdybuff: {\r\n\t\t\t\t\taudio: \"yingzhimrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { source: \"damageBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"yingzhimrfz_dying\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t\tplayer.removeMark(\"yingzhimrfz_dying\", false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdydebuff: {\r\n\t\t\t\t\taudio: \"yingzhimrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { source: \"damageBegin\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num--;\r\n\t\t\t\t\t\tplayer.removeSkill(\"yingzhimrfz_dydebuff\");\r\n\t\t\t\t\t\tif (!player.hasMark(\"yingzhimrfz_drdebuff\") && !player.hasMark(\"yingzhimrfz_mhddebuff\") && !player.hasMark(\"yingzhimrfz_shadebuff\")) player.removeSkill(\"yingzhimrfz_mark\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t//你响应其他角色牌 使用杀的次数\r\n\t\t\t\tsha: {\r\n\t\t\t\t\taudio: \"yingzhimrfz\",\r\n\t\t\t\t\ttrigger: { player: [\"useCard\", \"respond\"] },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!Array.isArray(event.respondTo)) return false;\r\n\t\t\t\t\t\tif (player == event.respondTo[0]) return false;\r\n\t\t\t\t\t\treturn !event.player.storage.sha;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\treturn get.attitude(player, event.respondTo[0]) < 2;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: function (event, player) {\r\n\t\t\t\t\t\treturn \"是否令\" + get.translation(event.respondTo[0]) + \"的下个回合使用【杀】的次数-1且你使用【杀】的次数+1？\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar target = trigger.respondTo[0];\r\n\t\t\t\t\t\ttarget.addMark(\"yingzhimrfz_shadebuff\", false);\r\n\t\t\t\t\t\ttarget.addSkill(\"yingzhimrfz_shadebuff\");\r\n\t\t\t\t\t\ttarget.addSkill(\"yingzhimrfz_mark\");\r\n\t\t\t\t\t\ttarget.storage.yingzhimrfz_sha = true;\r\n\t\t\t\t\t\tplayer.addMark(\"yingzhimrfz_sha\", false);\r\n\t\t\t\t\t\tplayer.addSkill(\"yingzhimrfz_sharem\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num + player.countMark(\"yingzhimrfz_sha\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tsharem: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseUseEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeMark(\"yingzhimrfz_sha\", player.countMark(\"yingzhimrfz_sha\"), false);\r\n\t\t\t\t\t\tplayer.removeSkill(\"yingzhimrfz_sharem\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tshadebuff: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"yingzhimrfz_shadebuff\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeMark(\"yingzhimrfz_shadebuff\", player.countMark(\"yingzhimrfz_shadebuff\"), false);\r\n\t\t\t\t\t\tplayer.removeSkill(\"yingzhimrfz_shadebuff\");\r\n\t\t\t\t\t\tif (!player.hasMark(\"yingzhimrfz_drdebuff\") && !player.hasMark(\"yingzhimrfz_mhddebuff\") && !player.hasSkill(\"yingzhimrfz_dydebuff\")) player.removeSkill(\"yingzhimrfz_mark\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num - player.countMark(\"yingzhimrfz_shadebuff\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.1,\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t},\r\n\t\t},\r\n\t\tyingshaomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"dyingAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.parent.name == \"damage\" && event.parent.source;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.parent.source) < 2;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"是否令\" + get.translation(event.parent.source) + \"获得‘影哨’标记？\";\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.parent.source.addSkill(\"yingshaomrfz_ban\");\r\n\t\t\t},\r\n\t\t\tgroup: \"yingshaomrfz_dying\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban2: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardEnabled: function (card) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tban: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\t\t\tif (player.hasSkill(\"yingshaomrfz_ban2\")) return \"·手牌上限-1</br>·本出牌阶段不能使用【杀】\";\r\n\t\t\t\t\t\t\treturn \"·手牌上限-1</br>·使用【杀】的次数至多为1\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!player.isPhaseUsing()) return false;\r\n\t\t\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addTempSkill(\"yingshaomrfz_ban2\", {\r\n\t\t\t\t\t\t\tplayer: \"phaseUseEnd\",\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn num - 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdying: {\r\n\t\t\t\t\taudio: \"yingshaomrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"dying\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn current.hasSkill(\"yingshaomrfz_ban\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\t\tif (current.hasSkill(\"yingshaomrfz_ban\")) {\r\n\t\t\t\t\t\t\t\tcurrent.removeSkill(\"yingshaomrfz_ban\");\r\n\t\t\t\t\t\t\t\tif (current.hasSkill(\"yingshaomrfz_ban2\")) current.removeSkill(\"yingshaomrfz_ban2\");\r\n\t\t\t\t\t\t\t\tcurrent.damage(player);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tplayer.recover(2 - player.hp);\r\n\t\t\t\t\t\tplayer.removeSkill(\"yingshaomrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.2,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//缪尔赛思\r\n\t\tkaiyuanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"roundStart\",\r\n\t\t\t},\r\n\t\t\tfirstDo: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn game.roundNumber == 1;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.chooseTarget(\"【开源】:请选择一名角色令其摸两张牌且本局游戏使用【杀】的次数+1，若该角色是你，你摸一张牌\", true).ai = function (target) {\r\n\t\t\t\t\treturn get.attitude(player, target) > 0;\r\n\t\t\t\t};\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\ttarget.draw(2);\r\n\t\t\t\t\ttarget.addSkill(\"kaiyuanmrfz_buff\");\r\n\t\t\t\t\tif (target == player) {\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\tplayer.logSkill(\"kaiyuanmrfz\");\r\n\t\t\t\t\t} else player.logSkill(\"kaiyuanmrfz\", target);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tbuff: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"使用【杀】的次数+1\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num + 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tjingshuimrfz: {\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\treturn \"·你的攻击范围:\" + player.getAttackRange() + \"</br>·你使用【杀】的次数:\" + player.getCardUsable(\"sha\") + \"</br>·你的手牌上限:\" + player.getHandcardLimit();\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 3,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar str = \"【净水】:你可选择一名其他角色，你将你的手牌数、手牌上限、攻击范围和使用【杀】的次数调整至与其一致\";\r\n\t\t\t\tplayer.chooseTarget(get.prompt(\"jingshuimrfz\"), str, function (card, player, target) {\r\n\t\t\t\t\treturn target != player;\r\n\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\treturn target.isMaxHandcard();\r\n\t\t\t\t};\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\tvar numsha = target.getCardUsable(\"sha\");\r\n\t\t\t\t\tvar numatt = target.getAttackRange();\r\n\t\t\t\t\tvar numhand = target.getHandcardLimit();\r\n\t\t\t\t\tplayer.logSkill(\"jingshuimrfz\", target);\r\n\t\t\t\t\t//摸牌\r\n\t\t\t\t\tif (player.countCards(\"h\") <= target.countCards(\"h\")) player.drawTo(target.countCards(\"h\"));\r\n\t\t\t\t\t//杀\r\n\t\t\t\t\tplayer.removeMark(\"jingshuimrfz_sha\", player.countMark(\"jingshuimrfz_sha\"), false);\r\n\t\t\t\t\tplayer.addMark(\"jingshuimrfz_sha\", numsha, false);\r\n\t\t\t\t\t//攻击距离\r\n\t\t\t\t\tplayer.removeMark(\"jingshuimrfz_att\", player.countMark(\"jingshuimrfz_att\"), false);\r\n\t\t\t\t\tplayer.addMark(\"jingshuimrfz_att\", numatt, false);\r\n\t\t\t\t\t//手牌上限\r\n\t\t\t\t\tplayer.removeMark(\"jingshuimrfz_maxhand\", player.countMark(\"jingshuimrfz_maxhand\"), false);\r\n\t\t\t\t\tplayer.addMark(\"jingshuimrfz_maxhand\", numhand, false);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tif (card.name == \"sha\" && player.hasMark(\"jingshuimrfz_sha\")) return (num = player.countMark(\"jingshuimrfz_sha\"));\r\n\t\t\t\t},\r\n\t\t\t\tattackRangeBase: function (player, num) {\r\n\t\t\t\t\tif (player.hasMark(\"jingshuimrfz_att\")) return (num = player.countMark(\"jingshuimrfz_att\"));\r\n\t\t\t\t},\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\tif (player.hasMark(\"jingshuimrfz_maxhand\")) return (num = player.countMark(\"jingshuimrfz_maxhand\"));\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tsha: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\tatt: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\tmaxhand: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tliuxingmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"damageBegin\",\r\n\t\t\t},\r\n\t\t\tusable: 1,\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") >= player.hp && event.nature != \"thunder\";\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t},\r\n\t\t},\r\n\t\t//黑键\r\n\t\tyiyinmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tchargeSkill: true,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.countMark(\"charge\") > 2) return false;\r\n\t\t\t\treturn player.hasCard(function (card) {\r\n\t\t\t\t\treturn get.tag(card, \"damage\");\r\n\t\t\t\t}, \"h\");\r\n\t\t\t},\r\n\t\t\tfilterCard: function (card) {\r\n\t\t\t\treturn get.tag(card, \"damage\");\r\n\t\t\t},\r\n\t\t\tselectCard: function () {\r\n\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\treturn [1, 3 - player.countMark(\"charge\")];\r\n\t\t\t},\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\tif (\r\n\t\t\t\t\tplayer.countCards(function (card) {\r\n\t\t\t\t\t\treturn card.name == \"sha\";\r\n\t\t\t\t\t}) >\r\n\t\t\t\t\tplayer.getCardUsable(\"sha\") + 1\r\n\t\t\t\t)\r\n\t\t\t\t\treturn true;\r\n\t\t\t\treturn card.name != \"sha\";\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.addMark(\"charge\", cards.length);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: function (event, player) {\r\n\t\t\t\t\treturn 0.85 + player.countMark(\"charge\") * 0.1;\r\n\t\t\t\t},\r\n\t\t\t\torder: 13,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"yiyinmrfz_sha\", \"yiyinmrfz_get\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tsha: {\r\n\t\t\t\t\taudio: \"yiyinmrfz\",\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.countMark(\"charge\") == 0) return false;\r\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\" && !player.storage.jiyinmrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: \"你可以消耗一点蓄力值令此【杀】的伤害基数+1\",\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (!trigger.baseDamage) trigger.baseDamage = 1;\r\n\t\t\t\t\t\ttrigger.baseDamage++;\r\n\t\t\t\t\t\tplayer.removeMark(\"charge\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tget: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addMark(\"charge\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thuangxiangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseDiscardEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tplayer.hasCard(function (card) {\r\n\t\t\t\t\t\treturn card.hasGaintag(\"huangxiangmrfzx\");\r\n\t\t\t\t\t}, \"h\")\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\treturn player.countMark(\"charge\") > 0 && player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.chooseCard(get.prompt(\"huangxiangmrfz\"), \"你可以消耗一点蓄力值并标记一张手牌\", \"h\").set(\"ai\", function (card) {\r\n\t\t\t\t\tif (card.name == \"shan\" && card.name == \"wuxie\") return 6;\r\n\t\t\t\t\tif (card.name == \"sha\" && card.name == \"tao\" && card.name == \"jiu\") return 5;\r\n\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tplayer.logSkill(\"huangxiangmrfz\");\r\n\t\t\t\t\tplayer.addGaintag(result.cards, \"huangxiangmrfzx\");\r\n\t\t\t\t\tplayer.removeMark(\"charge\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"huangxiangmrfz_lose\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tlose: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"loseAfter\", \"damageEnd\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.name == \"damage\")\r\n\t\t\t\t\t\t\treturn player.hasCard(function (card) {\r\n\t\t\t\t\t\t\t\treturn card.hasGaintag(\"huangxiangmrfzx\");\r\n\t\t\t\t\t\t\t}, \"h\");\r\n\t\t\t\t\t\tif (event.name == \"lose\") {\r\n\t\t\t\t\t\t\tfor (var i in event.gaintag_map) {\r\n\t\t\t\t\t\t\t\tif (event.gaintag_map[i].includes(\"huangxiangmrfzx\")) return true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tvar history = game.getAllGlobalHistory(\"useCard\");\r\n\t\t\t\t\t\tfor (var i = history.length - 1; i > 0; i--) {\r\n\t\t\t\t\t\t\tif (!history[i].targets) continue;\r\n\t\t\t\t\t\t\tif (history[i].targets.includes(player) && history[i].player != player) {\r\n\t\t\t\t\t\t\t\tevent.targets = history[i].player;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.chooseControl(event.targets ? [\"摸牌\", \"对\" + get.translation(event.targets) + \"造成一点伤害\", \"cancel2\"] : [\"摸牌\", \"cancel2\"])\r\n\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\tif (event.targets) {\r\n\t\t\t\t\t\t\t\t\tif (get.damageEffect(event.targets, player, player) > 0) return 1;\r\n\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\t} else return 0;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"prompt\", \"【荒响】:请选择一项\");\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.control != \"cancel2\") {\r\n\t\t\t\t\t\t\tplayer.logSkill(\"huangxiangmrfz\");\r\n\t\t\t\t\t\t\tif (result.control == \"摸牌\") {\r\n\t\t\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\t\t\tif (player.countMark(\"charge\") < 3) player.addMark(\"charge\");\r\n\t\t\t\t\t\t\t} else event.targets.damage();\r\n\t\t\t\t\t\t} else event.finish();\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t!player.hasCard(function (card) {\r\n\t\t\t\t\t\t\t\treturn card.hasGaintag(\"huangxiangmrfzx\");\r\n\t\t\t\t\t\t\t}, \"h\") &&\r\n\t\t\t\t\t\t\tplayer.countMark(\"charge\") > 0\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tplayer.chooseCard(get.prompt(\"huangxiangmrfz\"), \"你可以消耗一点蓄力值并标记一张手牌\", \"h\").set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\t\tif (card.name == \"shan\" && card.name == \"wuxie\") return 6;\r\n\t\t\t\t\t\t\t\tif (card.name == \"sha\" && card.name == \"tao\" && card.name == \"jiu\") return 5;\r\n\t\t\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 3\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tplayer.logSkill(\"huangxiangmrfz\");\r\n\t\t\t\t\t\t\tplayer.addGaintag(result.cards, \"huangxiangmrfzx\");\r\n\t\t\t\t\t\t\tplayer.removeMark(\"charge\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tjiyinmrfz: {\r\n\t\t\taudio: 3,\r\n\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"charge\") > 0;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.hasCard(function (card) {\r\n\t\t\t\t\t\treturn card.name == \"sha\";\r\n\t\t\t\t\t}, \"h\") > 0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar list = [\"jiyinmrfz_eff1\", \"jiyinmrfz_lose\", \"jiyinmrfz_eff4\", \"jiyinmrfz_eff2\", \"jiyinmrfz_eff3\"];\r\n\t\t\t\tplayer.storage.jiyinmrfz = true;\r\n\t\t\t\tfor (i of list) player.addTempSkill(i);\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tlose: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.jiyinmrfz = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t//伤害基数 目标\r\n\t\t\t\teff1: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!event.card) return false;\r\n\t\t\t\t\t\treturn event.card.name == \"sha\" && event.targets.length == 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tvar target = trigger.targets[0],\r\n\t\t\t\t\t\t\tbuff = 0;\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t!game.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current != target && current.countCards(\"h\") > target.countCards(\"h\");\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\tbuff++;\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t!game.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current != target && current.hp > target.hp;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\tbuff++;\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t!game.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current != target && current.countCards(\"e\") > target.countCards(\"e\");\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\tbuff++;\r\n\t\t\t\t\t\tif (buff == 3) {\r\n\t\t\t\t\t\t\tplayer.storage.jiyinmrfz_eff1 = true;\r\n\t\t\t\t\t\t\tplayer.addTempSkill(\"jiyinmrfz_eff1_buff2\", \"shaAfter\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tplayer.addTempSkill(\"jiyinmrfz_eff1_buff\", \"shaAfter\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tplayerEnabled: function (card, player, target) {\r\n\t\t\t\t\t\t\tif ((target.isMaxHp() || target.isMaxHandcard() || target.isMaxEquip()) && card.name == \"sha\") return true;\r\n\t\t\t\t\t\t\telse if (card.name == \"sha\") return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff1_buff: {\r\n\t\t\t\t\taudio: \"huangxiangmrfz\",\r\n\t\t\t\t\ttrigger: { source: \"damageBegin3\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar target = trigger.player;\r\n\t\t\t\t\t\tif (player.storage.jiyinmrfz_eff1) {\r\n\t\t\t\t\t\t\ttrigger.num = target.hp;\r\n\t\t\t\t\t\t} else trigger.num = Math.max(Math.min(target.hp - 1, player.countMark(\"charge\")), 1);\r\n\t\t\t\t\t\tplayer.removeSkill(\"jiyinmrfz_eff1_buff\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff1_buff2: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"shaEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.jiyinmrfz_eff1 = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t//闪的次数\r\n\t\t\t\teff2: {\r\n\t\t\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card.name == \"sha\" && !event.getParent().directHit.includes(event.target);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlogTarget: \"target\",\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar targets = trigger.target;\r\n\t\t\t\t\t\tvar id = trigger.target.playerid;\r\n\t\t\t\t\t\tvar map = trigger.getParent().customArgs;\r\n\t\t\t\t\t\tif (!map[id]) map[id] = {};\r\n\t\t\t\t\t\tif (typeof map[id].shanRequired == \"number\") {\r\n\t\t\t\t\t\t\tmap[id].shanRequired += targets.hp - 1;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmap[id].shanRequired = targets.hp;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t\t\tif (arg.card.name != \"sha\" || arg.target.countCards(\"h\", \"shan\") > player.countMark(\"charge\")) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t//提示\r\n\t\t\t\teff3: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\t\t\tvar list = [];\r\n\t\t\t\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\t\t\t\tif (game.players[i].isMaxHp() && game.players[i].isMaxHandcard() && game.players[i].isMaxEquip()) list.add(get.translation(game.players[i]));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn \"手牌最多或之一且体力值最多或之一且装备数最多或之一的角色有:</br>\" + (list.length ? list : \"没有满足条件的角色！\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t//消耗蓄力值\r\n\t\t\t\teff4: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeMark(\"charge\", trigger.num);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//伊芙利特 小火龙\r\n\t\tyanmomrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\tmod: {\r\n\t\t\t\tattackRange: function (player, num) {\r\n\t\t\t\t\treturn num + 2;\r\n\t\t\t\t},\r\n\t\t\t\tplayerEnabled: function (card, player, target) {\r\n\t\t\t\t\tvar gone = [];\r\n\t\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\t\tvar players = game.players[i];\r\n\t\t\t\t\t\tif (players.isAction()) gone.add(players);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (target != player && _status.currentPhase == player) {\r\n\t\t\t\t\t\tif (!gone.includes(target) && player.storage.yanmomrfz == true) return false;\r\n\t\t\t\t\t\tif (gone.includes(target) && player.storage.yanmomrfz == false) return false;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar num = 0,\r\n\t\t\t\t\tgone = [],\r\n\t\t\t\t\twlgo = [];\r\n\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\tvar players = game.players[i];\r\n\t\t\t\t\tif (players.isAction()) gone.add(players);\r\n\t\t\t\t\telse wlgo.add(players);\r\n\t\t\t\t}\r\n\t\t\t\t//console.log(player.storage.yanmomrfz_gone);\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseControl()\r\n\t\t\t\t\t.set(\"choiceList\", [\"只能指定本轮<font color=#f61e46>已进行</font>回合的其他角色<br>(\" + get.translation(gone) + \")\", \"只能指定本轮<font color=#f61e46>未进行</font>回合的其他角色<br>(\" + get.translation(wlgo) + \")\"])\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\tif (num > game.players.length - num) return 0;\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.index == 0) {\r\n\t\t\t\t\tplayer.storage.yanmomrfz = true;\r\n\t\t\t\t} else player.storage.yanmomrfz = false;\r\n\t\t\t\tplayer.logSkill(\"yanmomrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"yanmomrfz_add\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tgone: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\teff: {\r\n\t\t\t\t\tinit: function (player) {\r\n\t\t\t\t\t\tplayer.storage.yanmomrfz_eff = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.yanmomrfz_eff = true;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\t\tcurrent.storage.yanmomrfz_eff = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tadd: {\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (get.type(event.card) == \"delay\") return false;\r\n\t\t\t\t\t\tif (get.type(event.card) == \"equip\") return false;\r\n\t\t\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn !event.targets.includes(current) && player.canUse(event.card, current) && current != player;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\tvar num = 0;\r\n\t\t\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\t\t\tif (game.players[i] == player || event.targets.includes(game.players[i])) continue;\r\n\t\t\t\t\t\t\tif (!player.inRange(game.players[i])) continue;\r\n\t\t\t\t\t\t\tif (player.canUse(event.card, game.players[i])) {\r\n\t\t\t\t\t\t\t\tnum = num + get.attitude(player, game.players[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn num > -1;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: function (event, player) {\r\n\t\t\t\t\t\tvar list = [];\r\n\t\t\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\t\t\tif (game.players[i] == player || event.targets.includes(game.players[i])) continue;\r\n\t\t\t\t\t\t\tif (!player.inRange(game.players[i])) continue;\r\n\t\t\t\t\t\t\tif (player.canUse(event.card, game.players[i])) list.add(get.translation(game.players[i]));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn \"是否增加\" + list + \"为\" + get.translation(event.card) + \"的目标？\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tvar list = [],\r\n\t\t\t\t\t\t\ttargets = [];\r\n\t\t\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\t\t\tif (game.players[i] == player || trigger.targets.includes(game.players[i])) continue;\r\n\t\t\t\t\t\t\tif (!player.inRange(game.players[i])) continue;\r\n\t\t\t\t\t\t\tif (player.canUse(trigger.card, game.players[i])) {\r\n\t\t\t\t\t\t\t\ttargets.push(game.players[i]);\r\n\t\t\t\t\t\t\t\tplayer.line(game.players[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (targets.length > 0) {\r\n\t\t\t\t\t\t\tif (!event.isMine() && !event.isOnline()) game.delayx();\r\n\t\t\t\t\t\t\tevent.targets = targets;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tplayer.logSkill(\"yanmomrfz\");\r\n\t\t\t\t\t\tgame.log(event.targets, \"成为了\", trigger.card, \"的目标\");\r\n\t\t\t\t\t\ttrigger.targets.addArray(event.targets);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tyanbaomrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: '<span style=\"text-decoration:line-through\">防御力-100</span></br>本轮下次因【杀】受到的伤害+1',\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tglobal: [\"yanbaomrfz_eff\", \"yanbaomrfz_clear\"],\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!event.player.isAlive()) return false;\r\n\t\t\t\treturn !event.player.hasMark(\"yanbaomrfz\") && event.player != player && !event.player.storage.yanbaomrfz2;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.player) < 2;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.player.addMark(\"yanbaomrfz\", false);\r\n\t\t\t\ttrigger.player.storage.yanbaomrfz2 = true;\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeMark(\"yanbaomrfz\", false);\r\n\t\t\t\t\t\tplayer.storage.yanbaomrfz2 = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"damageBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!player.hasMark(\"yanbaomrfz\")) return false;\r\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t\tplayer.removeMark(\"yanbaomrfz\", false);\r\n\t\t\t\t\t\tplayer.logSkill(\"yanbaomrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t},\r\n\t\t},\r\n\t\tyanbaomrfz2: {\r\n\t\t\tcharlotte: true,\r\n\t\t},\r\n\t\thuishenmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tusable: 1,\r\n\t\t\ttrigger: { player: \"useCardToPlayer\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.target != player;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.addTempSkill(\"huishenmrfz_eff\", \"useCardAfter\");\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.target != player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\ttrigger.target.chooseToDiscard(\"弃置一张手牌，或令\" + get.translation(player) + \"摸一张牌\").set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\tvar trigger = _status.event.getTrigger();\r\n\t\t\t\t\t\t\treturn -get.attitude(trigger.target, trigger.player) - get.value(card);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool == false) player.draw();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//淬羽赫默\r\n\t\trenbenmrfz: {\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"《特里蒙科学伦理宣言》\",\r\n\t\t\t\tcontent: \"本轮游戏不能使用、打出或弃置【$】\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t//priority:-100,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\tif (current.hasSkill(\"renbenmrfz2\")) current.removeSkill(\"renbenmrfz2\");\r\n\t\t\t\t\tif (current.hasSkill(\"renbenmrfz3\")) current.removeSkill(\"renbenmrfz3\");\r\n\t\t\t\t});\r\n\t\t\t\tvar list = lib.inpile;\r\n\t\t\t\tvar list2 = [];\r\n\t\t\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\t\t\tvar name = list[i];\r\n\t\t\t\t\tvar type = get.type(name);\r\n\t\t\t\t\tif (name == \"sha\") {\r\n\t\t\t\t\t\tlist2.push([\"基本\", \"\", \"sha\"]);\r\n\t\t\t\t\t} else if (type == \"basic\") {\r\n\t\t\t\t\t\tlist2.push([\"基本\", \"\", list[i]]);\r\n\t\t\t\t\t} else if (type == \"trick\") {\r\n\t\t\t\t\t\tlist2.push([\"锦囊\", \"\", list[i]]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!list.length) event.finish();\r\n\t\t\t\telse {\r\n\t\t\t\t\tevent.cards = list2;\r\n\t\t\t\t\tevent.cards2 = [];\r\n\t\t\t\t\tevent.num = 0;\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (event.num < game.players.length)\r\n\t\t\t\t\tgame.players[event.num].chooseButton(true, [\"【人本】:请声明一张牌</br>科学理应注视每一个人\", [event.cards, \"vcard\"]]).set(\"ai\", function (button) {\r\n\t\t\t\t\t\tswitch (button.link[2]) {\r\n\t\t\t\t\t\t\tcase \"wuxie\":\r\n\t\t\t\t\t\t\t\treturn 0.5 + Math.random();\r\n\t\t\t\t\t\t\tcase \"wuzhong\":\r\n\t\t\t\t\t\t\tcase \"dongzhuxianji\":\r\n\t\t\t\t\t\t\t\treturn 0.3 + Math.random();\r\n\t\t\t\t\t\t\tcase \"guohe\":\r\n\t\t\t\t\t\t\tcase \"zhujinqiyuan\":\r\n\t\t\t\t\t\t\t\treturn 0.3 + Math.random();\r\n\t\t\t\t\t\t\tcase \"sha\":\r\n\t\t\t\t\t\t\t\treturn 0.3 + Math.random();\r\n\t\t\t\t\t\t\tcase \"tao\":\r\n\t\t\t\t\t\t\t\treturn 0.4 + Math.random();\r\n\t\t\t\t\t\t\tcase \"shan\":\r\n\t\t\t\t\t\t\t\treturn 0.3 + Math.random();\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\treturn Math.random();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\telse event.goto(3);\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tevent.cards2.add2(result.links[0][2]);\r\n\t\t\t\t\tgame.log(game.players[event.num], \"声明了\", result.links[0][2]);\r\n\t\t\t\t\tif (event.num < game.players.length) {\r\n\t\t\t\t\t\tevent.num++;\r\n\t\t\t\t\t\tevent.goto(1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tvar maxCard = game.mostStr(event.cards2);\r\n\t\t\t\tif (maxCard.length == 1) {\r\n\t\t\t\t\tgame.log(\"本轮游戏不能使用、打出或弃置\", maxCard);\r\n\t\t\t\t\tplayer.popup(maxCard);\r\n\t\t\t\t\tplayer.storage.renbenmrfz = maxCard;\r\n\t\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\t\tif (game.players[i].storage.renbenmrfz != maxCard) game.players[i].storage.renbenmrfz = maxCard;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tevent.goto(6);\r\n\t\t\t\t} else event.cards3 = maxCard;\r\n\t\t\t\t(\"step 4\");\r\n\t\t\t\tplayer.chooseButton([true, \"【人本】:请选择一张牌</br>科学理应注视每一个人\", [event.cards3, \"vcard\"]]);\r\n\t\t\t\t(\"step 5\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tgame.log(\"本轮游戏不能使用、打出或弃置\", result.links[0][2]);\r\n\t\t\t\t\tplayer.popup(result.links[0][2]);\r\n\t\t\t\t\tplayer.storage.renbenmrfz = result.links[0][2];\r\n\t\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\t\tif (game.players[i].storage.renbenmrfz != result.links[0][2]) game.players[i].storage.renbenmrfz = result.links[0][2];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 6\");\r\n\t\t\t\tevent.num2 = 0;\r\n\t\t\t\t(\"step 7\");\r\n\t\t\t\tif (event.num2 < game.players.length) {\r\n\t\t\t\t\tif (game.players[event.num2] != player)\r\n\t\t\t\t\t\tgame.players[event.num2]\r\n\t\t\t\t\t\t\t.chooseControl(\"是\", \"否\")\r\n\t\t\t\t\t\t\t.set(\"prompt\", \"【人本】:是否遵守协议？(不能使用或打出\" + get.translation(player.storage.renbenmrfz) + \")\")\r\n\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\tif (!player.getEquip(1)) return 0;\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\t\t\treturn get.distance(player, current) <= 1 && player != current && get.attitude(player, current) < 0;\r\n\t\t\t\t\t\t\t\t\t}) ||\r\n\t\t\t\t\t\t\t\t\t(player.storage.renbenmrfz == \"sha\" && Math.random() > 0.4)\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tevent.num2++;\r\n\t\t\t\t\t\tevent.redo();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else event.finish();\r\n\t\t\t\t(\"step 8\");\r\n\t\t\t\tif (result.index == 0) {\r\n\t\t\t\t\tgame.players[event.num2].addSkill(\"renbenmrfz2\");\r\n\t\t\t\t} else if (result.index == 1) {\r\n\t\t\t\t\tgame.players[event.num2].addSkill(\"renbenmrfz3\");\r\n\t\t\t\t}\r\n\t\t\t\tif (event.num2 < game.players.length) {\r\n\t\t\t\t\tevent.num2++;\r\n\t\t\t\t\tevent.goto(7);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tglobal: \"renbenmrfz_use\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tuse: {\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardDiscardable: function (card, player) {\r\n\t\t\t\t\t\t\tif (get.name(card) == player.storage.renbenmrfz && (player.hasSkill(\"renbenmrfz2\") || player.hasSkill(\"renbenmrfz\"))) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcardEnabled2: function (card, player) {\r\n\t\t\t\t\t\t\tif (get.name(card) == player.storage.renbenmrfz && (player.hasSkill(\"renbenmrfz2\") || player.hasSkill(\"renbenmrfz\"))) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tignoredHandcard: function (card, player) {\r\n\t\t\t\t\t\t\tif (get.name(card) == player.storage.renbenmrfz && player.hasSkill(\"renbenmrfz\")) {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\trenbenmrfz2: {\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"接受《特里蒙科学伦理宣言》\",\r\n\t\t\t},\r\n\t\t\taudio: \"renbenmrfz\",\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilterCard: function (card, player) {\r\n\t\t\t\treturn card.name == player.storage.renbenmrfz;\r\n\t\t\t},\r\n\t\t\tdiscard: false,\r\n\t\t\tlose: false,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.hasCard(function (card) {\r\n\t\t\t\t\treturn card.name == player.storage.renbenmrfz;\r\n\t\t\t\t}, \"h\");\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && target.hasSkill(\"renbenmrfz\");\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.draw();\r\n\t\t\t\tplayer.give(cards, target);\r\n\t\t\t},\r\n\t\t\tgroup: \"renbenmrfz2_lose\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tlose: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tpriority: 50,\r\n\t\t\t\t\ttrigger: { global: \"die\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.hasSkill(\"renbenmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeSkill(\"renbenmrfz2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: function (player, target) {\r\n\t\t\t\t\t\tif (get.attitude(player, target) > 0) return 1;\r\n\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\trenbenmrfz3: {\r\n\t\t\tmark: true,\r\n\t\t\tmarkimage: \"extension/WhichWay/image/skill/rejecthmmrfz.png\",\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\treturn \"不接受《特里蒙科学伦理宣言》</br>当前攻击距离为\" + player.getAttackRange();\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tattackRange: function (player, num) {\r\n\t\t\t\t\tvar atk = 0;\r\n\t\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\t\tif (game.players[i] == player) continue;\r\n\t\t\t\t\t\tif (game.players[i].hasSkill(\"renbenmrfz2\")) atk++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn num - Math.max(2, atk);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tdizhumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\tcurrent.removeSkill(\"dizhumrfzx\");\r\n\t\t\t\t});\r\n\t\t\t\tplayer.chooseTarget(\"【砥柱】:你可以选择至多两名角色，令其获得‘夜灯’标记\", [0, 2]).set(\"ai\", function (target) {\r\n\t\t\t\t\treturn get.attitude(_status.event.player, target) > 2;\r\n\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar targets = result.targets;\r\n\t\t\t\t\tplayer.logSkill(\"dizhumrfz\");\r\n\t\t\t\t\tfor (i of targets) {\r\n\t\t\t\t\t\ti.addSkill(\"dizhumrfzx\");\r\n\t\t\t\t\t\ti.storage.dizhumrfz = true;\r\n\t\t\t\t\t\tplayer.line(i);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tdizhumrfzx: {\r\n\t\t\tmark: true,\r\n\t\t\tmarkimage: \"extension/WhichWay/image/skill/yedengmrfz.png\",\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\treturn \"受到的伤害-1，若为致命伤害，则防止之\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"damageBegin3\" },\r\n\t\t\tcontent: function () {\r\n\t\t\t\tif (trigger.num < player.hp) trigger.num--;\r\n\t\t\t\telse trigger.num = 0;\r\n\t\t\t\tplayer.removeMark(\"dizhumrfz\");\r\n\t\t\t\tplayer.removeSkill(\"dizhumrfzx\");\r\n\t\t\t\tplayer.logSkill(\"dizhumrfz\");\r\n\t\t\t},\r\n\t\t},\r\n\t\t//塞雷娅\r\n\t\tfuyuanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"recoverEnd\" },\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.source == player && event.player != player;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.player.draw();\r\n\t\t\t},\r\n\t\t},\r\n\t\tgaihuamrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"damageBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.player == player) return false;\r\n\t\t\t\treturn event.nature && player.inRange(event.player);\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tif (trigger.card) {\r\n\t\t\t\t\tvar cards = trigger.card;\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.chooseToDiscard(\"he\", get.prompt(\"gaihuamrfz\"), \"是否弃置一张非\" + get.translation(get.type(cards)) + \"牌令此伤害+1\", function (card) {\r\n\t\t\t\t\t\t\treturn get.type(card) != get.type(cards);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"goon\", get.attitude(player, trigger.player) < 0)\r\n\t\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\tif (!_status.event.goon) return 0;\r\n\t\t\t\t\t\t\treturn 7 - get.value(card);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.chooseToDiscard(get.prompt(\"gaihuamrfz\"), \"是否弃置一张牌令此伤害+1\")\r\n\t\t\t\t\t\t.set(\"goon\", get.attitude(player, trigger.player) < 0)\r\n\t\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\tif (!_status.event.goon) return 0;\r\n\t\t\t\t\t\t\treturn 7 - get.value(card);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\tplayer.logSkill(\"gaihuamrfz\", trigger.player);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tyaopeimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.getCardUsable(\"sha\") > 0 && player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tfilterCard: true,\r\n\t\t\tposition: \"he\",\r\n\t\t\tprompt: \"请弃置一张牌\",\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar num = 0;\r\n\t\t\t\tvar go = false;\r\n\t\t\t\tif (\r\n\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn get.distance(player, current) <= 1 && get.attitude(player, current) > 2 && current.getDamagedHp() > 2;\r\n\t\t\t\t\t})\r\n\t\t\t\t) {\r\n\t\t\t\t\tgo = true;\r\n\t\t\t\t} else if (\r\n\t\t\t\t\t!game.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn get.distance(player, current) <= 1 && get.attitude(player, current) > 0 && current.getDamagedHp() > 0 && current != player;\r\n\t\t\t\t\t}) &&\r\n\t\t\t\t\tplayer.getDamagedHp() > 0\r\n\t\t\t\t) {\r\n\t\t\t\t\tgo = true;\r\n\t\t\t\t}\r\n\t\t\t\tplayer.addTempSkill(\"yaopeimrfz2\", \"phaseUseAfter\");\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseTarget(\"【药配】:选择一名与你距离不大于1的角色令其回血，或选择‘取消’令攻击范围内的所有角色回复一点体力\", function (card, target, player) {\r\n\t\t\t\t\t\treturn get.distance(player, target) <= 1 && target.getDamagedHp() > 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"go\", go)\r\n\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\tif (go) return get.attitude(player, target) > 2;\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar targets = result.targets[0];\r\n\t\t\t\t\ttargets.recover();\r\n\t\t\t\t\tif (targets.getDamagedHp() >= 3) targets.recover();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\t\tvar targets = game.players;\r\n\t\t\t\t\t\tif (player.inRange(targets[i]) || targets[i] == player) targets[i].recover();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tthreaten: 1.5,\r\n\t\t\t\torder: 13,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: function (player) {\r\n\t\t\t\t\t\tvar num = 0,\r\n\t\t\t\t\t\t\tplayer = _status.event.player;\r\n\t\t\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\t\t\tvar targetx = game.players;\r\n\t\t\t\t\t\t\tif (!player.inRange(targetx[i])) continue;\r\n\t\t\t\t\t\t\tif (get.attitude(player, targetx[i]) > 0 && targetx[i].getDamagedHp() > 0) num++;\r\n\t\t\t\t\t\t\tif (get.attitude(player, targetx[i]) <= 0 && targetx[i].getDamagedHp() > 0) num--;\r\n\t\t\t\t\t\t\tif (player.getDamagedHp() > 0) {\r\n\t\t\t\t\t\t\t\tnum = 1;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (num > 0) return 1;\r\n\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tyaopeimrfz2: {\r\n\t\t\tcharlotte: true,\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tif (card.name == \"sha\") return num - 1;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//焰影苇草\r\n\t\tminghuomrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tif (player.hasSkill(\"minghuomrfz_buff1\")) player.removeSkill(\"minghuomrfz_buff1\");\r\n\t\t\t\tif (player.hasSkill(\"minghuomrfz_buff2\")) player.removeSkill(\"minghuomrfz_buff2\");\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseControl()\r\n\t\t\t\t\t.set(\"choiceList\", [\"每回合你使用的第一张单一目标的普通锦囊或【杀】可以额外指定一个目标\", \"当有‘灼痕’标记的角色进入濒死状态时，你可以令其上家或下家获得一个‘灼痕’标记\", '<span style=\"text-decoration:line-through\">真的会有人选这个选项吗？</span>不发动此技能'])\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\t\t\tvar curnext = current.getNext(),\r\n\t\t\t\t\t\t\t\t\tcurpre = current.getPrevious();\r\n\t\t\t\t\t\t\t\treturn current != player && current.hasMark(\"zhuohenmrfz\") && current.hp < 2 && (get.attitude(player, curnext) || get.attitude(player, curpre));\r\n\t\t\t\t\t\t\t}) > 0\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.index != 2) {\r\n\t\t\t\t\tif (result.index == 0) player.addSkill(\"minghuomrfz_buff1\");\r\n\t\t\t\t\telse player.addSkill(\"minghuomrfz_buff2\");\r\n\t\t\t\t\tplayer.logSkill(\"minghuomrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tbuff1: {\r\n\t\t\t\t\ttrigger: { player: \"useCard2\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.hasSkill(\"minghuomrfz_mark\")) return false;\r\n\t\t\t\t\t\tif (event.targets.length > 1) return false;\r\n\t\t\t\t\t\tif (get.type(event.card) != \"trick\" && event.card.name != \"sha\") return false;\r\n\t\t\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn !event.targets.includes(current) && player.canUse(event.card, current);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.chooseTarget(get.prompt(\"minghuomrfz\"), \"为\" + get.translation(trigger.card) + \"增加一个目标\", function (card, player, target) {\r\n\t\t\t\t\t\t\t\treturn !_status.event.sourcex.includes(target) && player.canUse(_status.event.card, target);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"sourcex\", trigger.targets)\r\n\t\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\treturn get.effect(target, _status.event.card, player, player);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"card\", trigger.card);\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tif (!event.isMine() && !event.isOnline()) game.delayx();\r\n\t\t\t\t\t\t\tevent.target = result.targets[0];\r\n\t\t\t\t\t\t\tplayer.addTempSkill(\"minghuomrfz_mark\", \"phaseEnd\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tplayer.logSkill(\"minghuomrfz\", event.target);\r\n\t\t\t\t\t\ttrigger.targets.push(event.target);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tbuff2: {\r\n\t\t\t\t\ttrigger: { global: \"dying\" },\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.player.getNext().hasMark(\"zhuohenmrfz\") && event.player.getPrevious().hasMark(\"zhuohenmrfz\")) return false;\r\n\t\t\t\t\t\treturn game.players.length > 2 && event.player.hasMark(\"zhuohenmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tvar target = trigger.player;\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.chooseTarget(get.prompt(\"minghuomrfz\"), \"你可以令\" + get.translation(target) + \"的上家或下家（不能是你）获得一个‘灼痕’标记\", function (card, player, target) {\r\n\t\t\t\t\t\t\t\treturn !target.hasMark(\"zhuohenmrfz\") && target != player && (target == _status.event.TriPlayer.getNext() || target == _status.event.TriPlayer.getPrevious());\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"TriPlayer\", trigger.player)\r\n\t\t\t\t\t\t\t.set(\"ai\", function (player, target) {\r\n\t\t\t\t\t\t\t\tif (get.attitude(player, targetx.getNext()) > 2 && get.attitude(player, targetx.getNext()) > 2) return 0;\r\n\t\t\t\t\t\t\t\treturn get.attitude(player, target) < 2;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"targetx\", trigger.player);\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\t\t\ttarget.addMark(\"zhuohenmrfz\");\r\n\t\t\t\t\t\t\tplayer.logSkill(\"zhuohenmrfz\", target);\r\n\t\t\t\t\t\t\tif (target.countCards(\"h\") > 0) target.chooseToDiscard(\"h\", true, \"【灼痕】:请选择弃置一张手牌\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tmark: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tyingyaomrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\treturn \"剩余使用次数:\" + (game.totalmark(\"zhuohenmrfz\") - player.countMark(\"yingyaomrfz\"));\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (game.totalmark(\"zhuohenmrfz\") <= player.countMark(\"yingyaomrfz\")) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tevent.player != player &&\r\n\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && player.inRange(current);\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseTarget(true, get.prompt(\"yingyaomrfz\"), \"你可以选择一名在你攻击范围内的角色，令其回复一点体力，若其为你，你摸一张牌\", function (card, player, target) {\r\n\t\t\t\t\t\treturn (player.inRange(target) && target.getDamagedHp() > 0) || target == player;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\treturn get.attitude(_status.event.player, target) > 2;\r\n\t\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\ttarget.recover();\r\n\t\t\t\t\tplayer.addMark(\"yingyaomrfz\", false);\r\n\t\t\t\t\tif (target == player) player.draw();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"yingyaomrfz_clear\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeMark(\"yingyaomrfz\", player.countMark(\"yingyaomrfz\"), false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhuohenmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"·被德拉克的火焰灼伤</br>·手牌上限-1</br>·受到伤害时需弃置一张手牌\",\r\n\t\t\t},\r\n\t\t\tglobal: \"zhuohenmrfz_debuff2\",\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.target != player && !event.target.hasMark(\"zhuohenmrfz\") && !event.target.hasSkill(\"zhuohenmrfz2\");\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.target) < 0;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"是否令\" + get.translation(event.target) + \"获得一个‘灼痕’标记？\";\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar target = trigger.target;\r\n\t\t\t\ttarget.addMark(\"zhuohenmrfz\");\r\n\t\t\t\ttarget.addSkill(\"zhuohenmrfz_clear\");\r\n\t\t\t\ttarget.addTempSkill(\"zhuohenmrfz2\");\r\n\t\t\t\tif (target.countCards(\"h\") > 0) target.chooseToDiscard(\"h\", true, \"【灼痕】:请选择弃置一张手牌\");\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\treturn num + game.totalmark(\"zhuohenmrfz\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhuohenmrfz_debuff\", \"zhuohenmrfz_draw\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\taudio: \"zhuohenmrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.hasMark(\"zhuohenmrfz\") && !player.isMaxHandcard(true);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeMark(\"zhuohenmrfz\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"zhuohenmrfz_clear\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdebuff: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"damageBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player != player && event.player.hasMark(\"zhuohenmrfz\") && event.player.countCards(\"h\") > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.player.chooseToDiscard(\"h\", true, \"【灼痕】:请选择弃置一张手牌\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdebuff2: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\tif (player.hasMark(\"zhuohenmrfz\")) return num - 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhuohenmrfz2: {\r\n\t\t\tcharlotte: true,\r\n\t\t},\r\n\t\t//霍尔海雅\r\n\t\tchuangzhongmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tfor (var i = 0; i < event.targets.length; i++) {\r\n\t\t\t\t\tif (event.targets[i].hasMark(\"kuangyumrfz\")) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tfor (var i = 0; i < trigger.targets.length; i++) {\r\n\t\t\t\t\tif (trigger.targets[i].hasMark(\"kuangyumrfz\")) {\r\n\t\t\t\t\t\ttrigger.targets[i].addTempSkill(\"fengyin\");\r\n\t\t\t\t\t\ttrigger.targets[i].addSkill(\"chuangzhongmrfz_eff\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDiscardEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeSkill(\"chuangzhongmrfz_eff\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\tif (player.hasMark(\"kuangyumrfz\")) return num - player.hp;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tkuangyumrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"风起\",\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tif (player.hasSkill(\"chuangzhongmrfz_eff\")) return \"·回合开始时，随机跳过两个阶段</br>·手牌上限-\" + player.hp;\r\n\t\t\t\t\treturn \"·回合开始时，随机跳过两个阶段\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 4,\r\n\t\t\tderivation: [\"kuangyumrfz_rewirte\"],\r\n\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\tfirstDo: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar nost = get.type(event.card) != \"trick\" && get.type(event.card) != \"delay\";\r\n\t\t\t\tvar hast = get.type(event.card) != \"trick\" && event.card.name != \"sha\";\r\n\t\t\t\tif (!event.targets || event.targets.length > 1) return false;\r\n\t\t\t\tif (event.cards && (player.storage.kuangyumrfz ? nost : hast)) return false;\r\n\t\t\t\treturn event.target != player && !event.target.hasMark(\"kuangyumrfz\");\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"是否令\" + get.translation(event.target) + \"获得一个‘风起’标记？\";\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar target = trigger.target;\r\n\t\t\t\ttarget.addMark(\"kuangyumrfz\");\r\n\t\t\t\ttarget.addSkill(\"kuangyumrfz_clear\");\r\n\t\t\t\ttarget.addTempSkill(\"kuangyumrfz2\");\r\n\t\t\t\ttarget.addSkill(\"kuangyumrfz_skip\");\r\n\t\t\t\tif (player.inRange(target)) player.addTempSkill(\"kuangyumrfz_damage\", \"useCardAfter\");\r\n\t\t\t},\r\n\t\t\tgroup: \"kuangyumrfz_clear2\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear2: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.storage.kuangyumrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.kuangyumrfz = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeMark(\"kuangyumrfz\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"kuangyumrfz_clear\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tskip: {\r\n\t\t\t\t\taudio: \"kuangyumrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar phase = [\"phaseBegin\", \"phaseJudge\", \"phaseDraw\", \"phaseUse\", \"phaseDiscard\", \"phaseJieshu\"].randomGet2(2);\r\n\t\t\t\t\t\tfor (var i = 0; i < phase.length; i++) {\r\n\t\t\t\t\t\t\tplayer.skip(phase[i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgame.log(player, \"因【狂语】将会跳过\", get.tranPhase(phase[0]), \"和\", get.tranPhase(phase[1]));\r\n\t\t\t\t\t\tplayer.removeSkill(\"kuangyumrfz_skip\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\taudio: \"kuangyumrfz\",\r\n\t\t\t\t\ttrigger: { source: \"damageBegin\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.hasMark(\"kuangyumrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t\tplayer.storage.kuangyumrfz = true;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tkuangyumrfz2: {\r\n\t\t\tcharlotte: true,\r\n\t\t},\r\n\t\t//新棘刺\r\n\t\tjihumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"荆棘护身\",\r\n\t\t\t},\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\treturn get.tag(card, \"damage\") || (get.type(card) == \"trick\" && !get.tag(card, \"damage\")) || get.type(card) == \"delay\";\r\n\t\t\t\t\t}) > 1\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tif (!player.hasMark(\"jihumrfz\")) player.addMark(\"jihumrfz\", false);\r\n\t\t\t\tplayer.addTempSkill(\"zishou2\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"jihumrfz_clear\", \"jihumrfz_buff\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"jihumrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeMark(\"jihumrfz\", false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tbuff: {\r\n\t\t\t\t\ttrigger: { target: \"useCardToTargeted\" },\r\n\t\t\t\t\tusable: 1,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (get.type(event.card) == \"delay\" || get.type(event.card) == \"equip\") return false;\r\n\t\t\t\t\t\tif (!player.hasMark(\"jihumrfz\")) return false;\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.player != player &&\r\n\t\t\t\t\t\t\t(player.canUse(event.card, event.player, false) ||\r\n\t\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\t\treturn current != player && get.distance(player, current) <= 1 && player.canUse(event.card, current, \"nodistance\");\r\n\t\t\t\t\t\t\t\t}))\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.chooseTarget(function (card, player, target) {\r\n\t\t\t\t\t\t\t\treturn player.canUse(trigger.card, target, false) && target != player && (get.distance(player, target) <= 1 || target == _status.event.TriPlayer);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"TriPlayer\", trigger.player)\r\n\t\t\t\t\t\t\t.set(\"prompt\", get.prompt(\"jihumrfz\"))\r\n\t\t\t\t\t\t\t.set(\"prompt2\", \"【棘护】:你可以使用一张【\" + get.translation(trigger.card.name) + \"】\").ai = function (target) {\r\n\t\t\t\t\t\t\treturn -get.attitude(player, target);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tplayer.useCard({ name: trigger.card.name, isCard: true }, result.targets[0], false);\r\n\t\t\t\t\t\t\tplayer.logSkill(\"jihumrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tre_jianshumrfz: {\r\n\t\t\taudio: \"jianshumrfz\",\r\n\t\t\tderivation: [\"re_chaoshengmrfz\"],\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar num = player.countMark(\"re_jianshumrfz\");\r\n\t\t\t\t\tif (num == 20) return \"出牌阶段开始时可以使用一张【杀】</br>摸牌阶段摸牌数+1;攻击距离和【杀】的使用次数各+2\";\r\n\t\t\t\t\telse if (num >= 10) return \"已累计指定\" + num + \"次</br>出牌阶段开始时可以使用一张【杀】</br>摸牌阶段摸牌数、攻击距离和【杀】的使用次数各+1\";\r\n\t\t\t\t\treturn \"已累计指定\" + num + \"次\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { player: \"useCardToTargeted\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"re_jianshumrfz\") < 20;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.addMark(\"re_jianshumrfz\", false);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tvar num = player.countMark(\"re_jianshumrfz\");\r\n\t\t\t\tif (num % 10 == 0) {\r\n\t\t\t\t\tplayer.logSkill(\"jianshumrfz\");\r\n\t\t\t\t\t//--第一次使用至高之术--//\r\n\t\t\t\t\tif (num == 10) {\r\n\t\t\t\t\t\tplayer.addSkill(\"re_jianshumrfz_usesha\");\r\n\t\t\t\t\t\tplayer.addMark(\"re_jianshumrfz_time\", false);\r\n\t\t\t\t\t\tplayer.addMark(\"re_jianshumrfz_draw\", false);\r\n\t\t\t\t\t\tplayer.addMark(\"re_jianshumrfz_range\", false);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//--第二次使用至高之术--//\r\n\t\t\t\t\tif (num == 20) {\r\n\t\t\t\t\t\tplayer.addMark(\"re_jianshumrfz_time\", false);\r\n\t\t\t\t\t\tplayer.addMark(\"re_jianshumrfz_range\", false);\r\n\t\t\t\t\t\tplayer.removeSkill(\"jihumrfz\");\r\n\t\t\t\t\t\tplayer.addSkill(\"re_chaoshengmrfz\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"re_jianshumrfz_time\", \"re_jianshumrfz_range\", \"re_jianshumrfz_draw\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\ttime: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num + player.countMark(\"re_jianshumrfz_time\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\trange: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tattackRange: function (player, num) {\r\n\t\t\t\t\t\t\treturn num + player.countMark(\"re_jianshumrfz_range\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"re_jianshumrfz_draw\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t\tplayer.logSkill(\"jianshumrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tusesha: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer.chooseTarget(\"选择一名其他角色视为对其使用一张【杀】\", function (card, player, target) {\r\n\t\t\t\t\t\t\treturn target != player && player.inRange(target);\r\n\t\t\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\t\t\treturn -get.attitude(player, target);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\t\t\tplayer.useCard({ name: \"sha\" }, true, false, target);\r\n\t\t\t\t\t\t\tplayer.logSkill(\"jianshumrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tre_chaoshengmrfz: {\r\n\t\t\taudio: \"chaoshengmrfz\",\r\n\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.getStat(\"damage\");\r\n\t\t\t},\r\n\t\t\tfrequent: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.draw(2);\r\n\t\t\t\tplayer.recover();\r\n\t\t\t},\r\n\t\t},\r\n\t\t//煌\r\n\t\tyanxunmrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\ttrigger: { player: \"damageBegin\" },\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.parent.name == \"_lianhuan\" || event.parent.name == \"_lianhuan2\";\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.num--;\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\treturn num + 2;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"yanxunmrfz_kaishi\", \"yanxunmrfz_draw\", \"yanxunmrfz_use\", \"yanxunmrfz_judge\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tjudge: {\r\n\t\t\t\t\taudio: \"yanxunmrfz\",\r\n\t\t\t\t\ttrigger: { player: \"damageBegin\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.getParent(\"phaseJudge\") && event.getParent(\"phaseJudge\").player == player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num -= 2;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tkaishi: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tif (player.isLinked()) {\r\n\t\t\t\t\t\t\tplayer.link();\r\n\t\t\t\t\t\t\tplayer.logSkill(\"yanxunmrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (player.isTurnedOver()) {\r\n\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t.chooseBool()\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", get.prompt(\"yanxunmrfz\"))\r\n\t\t\t\t\t\t\t\t.set(\"prompt2\", \"【严训】:是否翻面并跳过下个出牌阶段？\")\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\t\treturn player.countCards(\"h\") < player.getHandcardLimit() * 2;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tplayer.turnOver();\r\n\t\t\t\t\t\t\tplayer.addSkill(\"yanxunmrfz_skipped\");\r\n\t\t\t\t\t\t\tplayer.logSkill(\"yanxunmrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tskipped: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"跳过下个出牌阶段\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.skip(\"phaseUse\");\r\n\t\t\t\t\t\tgame.log(player, \"的出牌阶段将被跳过\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"yanxunmrfz_skipped\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\taudio: \"yanxunmrfz\",\r\n\t\t\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.getHistory(\"skipped\").includes(\"phaseDraw\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfrequent: true,\r\n\t\t\t\t\tprompt: \"【严训】:是否摸一张牌?\",\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tuse: {\r\n\t\t\t\t\taudio: \"yanxunmrfz\",\r\n\t\t\t\t\ttrigger: { player: \"phaseDiscardBefore\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar cardh = player.getCards(\"h\"),\r\n\t\t\t\t\t\t\tcanuse = false;\r\n\t\t\t\t\t\tfor (var i = 0; i < cardh.length; i++) {\r\n\t\t\t\t\t\t\tif (player.canUseToAnyone(cardh[i])) {\r\n\t\t\t\t\t\t\t\tcanuse = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn player.getHistory(\"skipped\").includes(\"phaseUse\") && canuse == true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: \"【严训】:是否使用至多两张手牌?\",\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tevent.num = 0;\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tvar cardh = player.getCards(\"h\"),\r\n\t\t\t\t\t\t\tlist = [],\r\n\t\t\t\t\t\t\tcards = [];\r\n\t\t\t\t\t\tevent.num++;\r\n\t\t\t\t\t\tfor (var i = 0; i < cardh.length; i++) {\r\n\t\t\t\t\t\t\tcards.push(cardh[i].name);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var name of lib.inpile) {\r\n\t\t\t\t\t\t\tif (!cards.includes(name)) continue;\r\n\t\t\t\t\t\t\tvar card = { name: name, isCard: true };\r\n\t\t\t\t\t\t\tif (!player.canUseToAnyone(card)) continue;\r\n\t\t\t\t\t\t\tif (get.type(card) == \"basic\") {\r\n\t\t\t\t\t\t\t\tlist.push([\"基本\", \"\", name]);\r\n\t\t\t\t\t\t\t} else if (get.type(card) == \"trick\" || get.type(card) == \"delay\") {\r\n\t\t\t\t\t\t\t\tlist.push([\"锦囊\", \"\", name]);\r\n\t\t\t\t\t\t\t} else if (get.type(card) == \"equip\") {\r\n\t\t\t\t\t\t\t\tlist.push([\"装备\", \"\", name]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (list.length) player.chooseButton([\"【严训】:请选择你要使用的手牌(\" + event.num + \"/2)\", [list, \"vcard\"]], \"hidden\");\r\n\t\t\t\t\t\telse event.finish();\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tvar name = result.links[0][2];\r\n\t\t\t\t\t\t\tplayer.chooseToUse(\r\n\t\t\t\t\t\t\t\tfunction (card, player, event) {\r\n\t\t\t\t\t\t\t\t\treturn get.name(card) == name;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\"【严训】:你可以使用一张\" + get.translation(name)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tif (event.num < 2) event.goto(1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tchuchanmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tif (!player.storage.chuchanmrfz) return \"未发动\";\r\n\t\t\t\t\tif (player.storage.chuchanmrfz && player.hasSkill(\"chuchanmrfz_buff1\")) return \"本轮受到伤害后回复一点体力\";\r\n\t\t\t\t\treturn \"已发动\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"changeHp\" },\r\n\t\t\tforced: true,\r\n\t\t\tunique: true,\r\n\t\t\tmark: true,\r\n\t\t\tlimited: true,\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationStr: \"除颤\",\r\n\t\t\tanimationColor: \"fire\",\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.chuchanmrfz = false;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.chuchanmrfz && player.hp < 2;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.storage.chuchanmrfz = true;\r\n\t\t\t\tplayer.recoverTo(2);\r\n\t\t\t\tplayer.addSkill(\"chuchanmrfz_buff1\");\r\n\t\t\t\tplayer.addSkill(\"chuchanmrfz_buff2\");\r\n\t\t\t\tplayer.awakenSkill(event.name);\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tbuff1: {\r\n\t\t\t\t\taudio: \"chuchanmrfz\",\r\n\t\t\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.recover();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\teffect: {\r\n\t\t\t\t\t\t\ttarget: function (card, player, target, current) {\r\n\t\t\t\t\t\t\t\tif (get.tag(card, \"damage\")) return \"zerotarget\";\r\n\t\t\t\t\t\t\t\tif (get.type(card) == \"trick\" && get.tag(card, \"damage\")) {\r\n\t\t\t\t\t\t\t\t\treturn \"zeroplayertarget\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tbuff2: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeSkill([\"chuchanmrfz_buff1\", \"chuchanmrfz_buff2\"]);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tfeixuemrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tif (card.name == \"sha\") return num + player.storage.feixuemrfz;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.feixuemrfz = 0;\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\taudio: 4,\r\n\t\t\ttrigger: { player: [\"loseHpEnd\", \"damageEnd\"] },\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tevent.num = trigger.num;\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tevent.num--;\r\n\t\t\t\tvar card = get.cardPile2(function (card) {\r\n\t\t\t\t\treturn get.name(card) == \"sha\" && card.nature == \"fire\";\r\n\t\t\t\t});\r\n\t\t\t\tif (card) player.gain(card, \"gain2\", \"log\");\r\n\t\t\t\telse {\r\n\t\t\t\t\tplayer.draw();\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (trigger.source && trigger.source.countCards(\"e\") > 0) {\r\n\t\t\t\t\tplayer.storage.feixuemrfz += 1;\r\n\t\t\t\t\tplayer.discardPlayerCard(trigger.source, \"e\", false).set(\"forceAuto\", true).boolline = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (event.num > 0) event.goto(1);\r\n\t\t\t},\r\n\t\t\tgroup: \"feixuemrfz_clear\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.feixuemrfz = 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tthreaten: 0.8,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//铃兰\r\n\t\thualaomrfz: {\r\n\t\t\tmarktext: \"脆弱\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"脆弱\",\r\n\t\t\t\tcontent: \"下次受到的伤害+#\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.player != player;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (get.attitude(player, event.player) > 0) return false;\r\n\t\t\t\tif (event.num + event.player.countMark(\"hualaomrfz\") - event.player.hp >= 0) return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar target = trigger.player;\r\n\t\t\t\ttarget.addMark(\"hualaomrfz\", trigger.num + 1, false);\r\n\t\t\t\ttarget.addSkill(\"hualaomrfz_eff\");\r\n\t\t\t\ttrigger.num = 0;\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\ttrigger: { player: \"damageBegin2\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"hualaomrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num += player.countMark(\"hualaomrfz\");\r\n\t\t\t\t\t\tplayer.removeMark(\"hualaomrfz\", player.countMark(\"hualaomrfz\"), false);\r\n\t\t\t\t\t\tplayer.logSkill(\"hualaomrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tthreaten: 1.2,\r\n\t\t\t},\r\n\t\t},\r\n\t\thuhuomrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"摸牌阶段摸牌数-#,出牌阶段结束时摸#张牌\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageZero\" },\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.player.addMark(\"huhuomrfz\", false);\r\n\t\t\t\ttrigger.player.addSkill(\"huhuomrfz2\");\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"huhuomrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeMark(\"huhuomrfz\", player.countMark(\"huhuomrfz\"), false);\r\n\t\t\t\t\t\ttrigger.player.removeSkill(\"huhuomrfz2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thuhuomrfz2: {\r\n\t\t\tdirect: true,\r\n\t\t\tcharlotte: true,\r\n\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.num -= player.countMark(\"huhuomrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"huhuomrfz2_draw\", \"huhuomrfz_clear\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseUseEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.draw(player.countMark(\"huhuomrfz\"));\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\twuyuemrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\ttargetInRange: function (card, player, target, now) {\r\n\t\t\t\t\tif (card.name == \"sha\" && get.color(card) == \"black\") return true;\r\n\t\t\t\t},\r\n\t\t\t\tselectTarget: function (card, player, range) {\r\n\t\t\t\t\tif (card.name == \"sha\" && range[1] != -1 && get.color(card) == \"red\") range[1]++;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//闪灵\r\n\t\tlichangmrfz: {\r\n\t\t\tmarktext: \"屏障\",\r\n\t\t\tmarkimage: \"extension/WhichWay/image/skill/slmrfzimage.png\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"屏障\",\r\n\t\t\t\tcontent: \"expansion\",\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t},\r\n\t\t\tonremove: function (player, skill) {\r\n\t\t\t\tvar cards = player.getExpansions(skill);\r\n\t\t\t\tif (cards.length) player.loseToDiscardpile(cards);\r\n\t\t\t},\r\n\t\t\taudio: 6,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.countCards(\"h\") > 0 &&\r\n\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn !current.hasSkill(\"lichangmrfz2\");\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn !target.hasSkill(\"lichangmrfz2\");\r\n\t\t\t},\r\n\t\t\tfilterCard: true,\r\n\t\t\tlose: false,\r\n\t\t\tdiscard: false,\r\n\t\t\tdelay: 0,\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\tif (\r\n\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\treturn get.type(card) == \"equip\";\r\n\t\t\t\t\t}) > 0\r\n\t\t\t\t)\r\n\t\t\t\t\treturn get.type(card) == \"equip\";\r\n\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t},\r\n\t\t\tprompt: `请选择一张牌`,\r\n\t\t\tposition: \"he\",\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttarget.addTempSkill(\"lichangmrfz2\");\r\n\t\t\t\ttarget.addToExpansion(cards, target, \"giveAuto\").gaintag.add(\"lichangmrfz\");\r\n\t\t\t\tif (get.type(cards[0]) == \"equip\" && target.hujia < 5) target.changeHujia();\r\n\t\t\t\tif (target.hujia < 5) target.changeHujia();\r\n\t\t\t},\r\n\t\t\tgroup: [\"lichangmrfz_rem\", \"lichangmrfz_dam\", \"lichangmrfz_da\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\trem: {\r\n\t\t\t\t\taudio: \"lichangmrfz\",\r\n\t\t\t\t\tchargeSkill: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { global: \"gainAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.getParent(1).name != \"lichangmrfz_dam\") return false;\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.fromStorage == true ||\r\n\t\t\t\t\t\t\tgame.hasPlayer2(function (current) {\r\n\t\t\t\t\t\t\t\tvar evt = event.getl(current);\r\n\t\t\t\t\t\t\t\treturn evt && evt.xs && evt.xs.length > 0;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addMark(\"charge\");\r\n\t\t\t\t\t\t//var str='';\r\n\t\t\t\t\t\t//str+=get.translation(event)+'</br>';\r\n\t\t\t\t\t\t//for(var i=1;i<=10;i++) str+=get.translation(event.getParent(i))+'</br>';\r\n\t\t\t\t\t\t//game.log(str);\r\n\t\t\t\t\t\t//player.popup(str);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdam: {\r\n\t\t\t\t\taudio: \"lichangmrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { global: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.hujia && event.player.getExpansions(\"lichangmrfz\").length > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar cards = trigger.player.getExpansions(\"lichangmrfz\");\r\n\t\t\t\t\t\ttrigger.player.gain(cards, \"gain2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tda: {\r\n\t\t\t\t\ttrigger: { global: \"phaseBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.countMark(\"charge\") >= 3;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer.chooseTarget(get.prompt(\"lichangmrfz\"), \"【力场】:你可以选择三名角色，令其各从牌堆或弃牌堆中获得一张装备牌\", [1, 3]).ai = function (target) {\r\n\t\t\t\t\t\t\treturn get.attitude(player, target) > 0;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tplayer.removeMark(\"charge\", player.countMark(\"charge\"));\r\n\t\t\t\t\t\t\tplayer.logSkill(\"lichangmrfz\");\r\n\t\t\t\t\t\t\tevent.targets = result.targets;\r\n\t\t\t\t\t\t\tevent.num = 0;\r\n\t\t\t\t\t\t\tevent.num2 = result.targets.length;\r\n\t\t\t\t\t\t} else event.finish();\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tvar card = get.cardPile(function (card) {\r\n\t\t\t\t\t\t\treturn get.type(card) == \"equip\";\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tevent.card = card;\r\n\t\t\t\t\t\tvar list = game.filterPlayer(function (target) {\r\n\t\t\t\t\t\t\treturn target != player && target.hasSkill(\"lichangmrfz\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvar str = \"【力场】:你可以将此牌交给\" + get.translation(list);\r\n\t\t\t\t\t\tif (list.length > 1) str += \"其中一人\";\r\n\t\t\t\t\t\tstr += \",或取消自己装备此牌\";\r\n\t\t\t\t\t\tevent.targets[event.num].gain(card, \"gain\");\r\n\t\t\t\t\t\tevent.targets[event.num].chooseTarget(str, function (card, player, target) {\r\n\t\t\t\t\t\t\treturn target != event.targets[event.num] && target.hasSkill(\"lichangmrfz\");\r\n\t\t\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\t\t\tvar player = event.targets[event.num];\r\n\t\t\t\t\t\t\tif (get.attitude(player, target) <= 0) return 0;\r\n\t\t\t\t\t\t\treturn get.attitude(player, target) >= 0;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t(\"step 3\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tevent.targets[event.num].hasCard(function (card) {\r\n\t\t\t\t\t\t\t\t\treturn card == event.card;\r\n\t\t\t\t\t\t\t\t}, \"h\")\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\tevent.targets[event.num].give(event.card, player);\r\n\t\t\t\t\t\t\tevent.targets[event.num].recover();\r\n\t\t\t\t\t\t} else if (\r\n\t\t\t\t\t\t\tevent.targets[event.num].hasCard(function (card) {\r\n\t\t\t\t\t\t\t\treturn card == event.card;\r\n\t\t\t\t\t\t\t}, \"h\")\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\tevent.targets[event.num].chooseUseTarget(event.card, true);\r\n\t\t\t\t\t\tif (event.num < event.num2 - 1) {\r\n\t\t\t\t\t\t\tevent.num++;\r\n\t\t\t\t\t\t\tevent.goto(2);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.2,\r\n\t\t\t\torder: function () {\r\n\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\tif (player.hp <= 2) return 13;\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t},\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\ttarget: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tlichangmrfz2: {\r\n\t\t\tcharlotte: true,\r\n\t\t},\r\n\t\tjiushumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"chooseToUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tplayer.countCards(\"he\", function (card) {\r\n\t\t\t\t\t\treturn get.color(card) == \"black\";\r\n\t\t\t\t\t}) == 0\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\treturn player.isPhase(\"phaseJudge\", false) || player.isPhase(\"phaseZhunbei\", false);\r\n\t\t\t},\r\n\t\t\tfilterCard: function (card) {\r\n\t\t\t\treturn get.color(card) == \"black\";\r\n\t\t\t},\r\n\t\t\tviewAsFilter: function (player) {\r\n\t\t\t\tif (!player.isPhase(\"phaseJudge\", false) && !player.isPhase(\"phaseZhunbei\", false)) return false;\r\n\t\t\t\treturn player.countCards(\"he\", { color: \"black\" }) > 0;\r\n\t\t\t},\r\n\t\t\tviewAs: { name: \"wuxie\" },\r\n\t\t\tposition: \"he\",\r\n\t\t\tprompt: \"将一张黑色牌当无懈可击使用\",\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\tvar tri = _status.event.getTrigger();\r\n\t\t\t\tif (tri && tri.card && tri.card.name == \"chiling\") return -1;\r\n\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t},\r\n\t\t},\r\n\t\tyubimrfz: {\r\n\t\t\tglobal: \"yubimrfz_eff\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn num + Math.min(player.hujia, 5);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//麦哲伦\r\n\t\tkanchamrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tfilterCard: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"已发动#次【勘查】\",\r\n\t\t\t},\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\tif (\r\n\t\t\t\t\tplayer.hasCard(function (card) {\r\n\t\t\t\t\t\treturn get.type(card) == \"equip\";\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t\treturn get.type(card) == \"equip\";\r\n\t\t\t\tif (\r\n\t\t\t\t\tplayer.hasCard(function (card) {\r\n\t\t\t\t\t\treturn get.type(card) == \"trick\";\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t\treturn get.type(card) == \"trick\";\r\n\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tevent.cards2 = cards[0];\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseControl(\"顶部\", \"底部\")\r\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"kanchamrfz\"))\r\n\t\t\t\t\t.set(\"prompt2\", \"【勘查】:请选择展示牌堆顶还是牌堆底\" + (player.countMark(\"kanchamrfz\") + 3) + \"张牌\")\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\treturn [0, 1].randomGet();\r\n\t\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tvar num = player.countMark(\"kanchamrfz\") + 3;\r\n\t\t\t\tif (result.index == 0) {\r\n\t\t\t\t\tvar cards = game.cardsGotoOrdering(get.cards(num)).cards;\r\n\t\t\t\t\tevent.cards = cards;\r\n\t\t\t\t} else if (result.index == 1) event.cards = get.bottomCards(num);\r\n\t\t\t\telse event.finish();\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tvar list = [];\r\n\t\t\t\tplayer.showCards(event.cards, get.translation(player) + \"发动了【勘查】\");\r\n\t\t\t\tfor (var i = 0; i < event.cards.length; i++) {\r\n\t\t\t\t\tif (get.type(event.cards2, \"trick\") != get.type(event.cards[i], \"trick\")) list.push(event.cards[i]);\r\n\t\t\t\t}\r\n\t\t\t\tif (list.length) player.gain(list, \"gain2\");\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tif (player.countMark(\"kanchamrfz\") < 3) player.addMark(\"kanchamrfz\", false);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\tthreaten: 1.1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tlongtengmrfz: {\r\n\t\t\tmarkimage: \"extension/WhichWay/image/skill/mrfz_LTF.png\",\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"expansion\",\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t},\r\n\t\t\tonremove: function (player, skill) {\r\n\t\t\t\tvar cards = player.getExpansions(skill);\r\n\t\t\t\tif (cards.length) player.loseToDiscardpile(cards);\r\n\t\t\t},\r\n\t\t\taudio: 8,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"loseAfter\",\r\n\t\t\t\tglobal: \"loseAsyncAfter\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.isPhase(\"phaseDiscard\", false)) return false;\r\n\t\t\t\tif (event.type != \"discard\" || event.getlx === false) return;\r\n\t\t\t\tvar evt = event.getl(player);\r\n\t\t\t\tfor (var i = 0; i < evt.cards2.length; i++) {\r\n\t\t\t\t\tif (get.position(evt.cards2[i], evt.hs.includes(evt.cards2[i]) ? evt.player : false) == \"d\") {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar cards = [];\r\n\t\t\t\tvar evt = trigger.getl(player);\r\n\t\t\t\tfor (var i = 0; i < evt.cards2.length; i++) {\r\n\t\t\t\t\tif (get.position(evt.cards2[i]) == \"d\") {\r\n\t\t\t\t\t\tcards.push(evt.cards2[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!cards.length) {\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (cards.length > 1)\r\n\t\t\t\t\t\tplayer.chooseButton([\"【龙腾】:请选择一张牌\", cards]).set(\"ai\", button => {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\t\treturn get.attitude(player, current) > 2;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn get.type(button.link) == \"equip\" || get.type(button.link, \"trick\") == \"trick\";\r\n\t\t\t\t\t\t\treturn get.type(button.link) == \"basic\";\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tevent.cards = cards;\r\n\t\t\t\t\t\tevent.goto(2);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.links && result.links.length) {\r\n\t\t\t\t\tevent.cards = result.links;\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tplayer.chooseTarget(\"【龙腾】:请选择一名角色，并将\" + get.translation(event.cards) + \"(\" + get.translation(get.type(event.cards[0], \"trick\")) + \"牌)置于该角色武将牌上\", function (card, player, target) {\r\n\t\t\t\t\treturn target.getExpansions(\"longtengmrfz\").length == 0;\r\n\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\tvar type = get.type2(event.cards[0]);\r\n\t\t\t\t\tif (type == \"basic\") return -get.attitude(player, target);\r\n\t\t\t\t\telse return get.attitude(player, target) > 2;\r\n\t\t\t\t};\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\tvar type = get.type2(event.cards[0]);\r\n\t\t\t\t\ttarget.addToExpansion(event.cards, target, \"give\").gaintag.add(\"longtengmrfz\");\r\n\t\t\t\t\ttarget.addSkill(\"longtengmrfz_changeI\");\r\n\t\t\t\t\tplayer.logSkill(\"longtengmrfz\", target);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"longtengmrfz_clear\",\r\n\t\t\tglobal: [\"longtengmrfz_basic_1\", \"longtengmrfz_basic_2\", \"longtengmrfz_trick\", \"longtengmrfz_equip\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tchangeI: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"longtengmrfzAfter\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeSkill(\"longtengmrfz_changeI\");\r\n\t\t\t\t\t\tif (player.isTypeExpansions(\"longtengmrfz\", \"basic\")) player.changeMarkImage(\"longtengmrfz\", \"mrfz_LTF\");\r\n\t\t\t\t\t\tif (player.isTypeExpansions(\"longtengmrfz\", \"trick\")) player.changeMarkImage(\"longtengmrfz\", \"mrfz_LTL\");\r\n\t\t\t\t\t\tif (player.isTypeExpansions(\"longtengmrfz\", \"equip\")) player.changeMarkImage(\"longtengmrfz\", \"mrfz_LTA\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tbasic_1: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDrawBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.isTypeExpansions(\"longtengmrfz\", \"basic\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num--;\r\n\t\t\t\t\t\tplayer.logSkill(\"longtengmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tbasic_2: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseUseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.isTypeExpansions(\"longtengmrfz\", \"basic\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\tplayer.logSkill(\"longtengmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttrick: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard2\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (get.type(event.card, \"trick\") != \"trick\") return false;\r\n\t\t\t\t\t\tif (player.hasSkill(\"longtengmrfz_trick2\")) return false;\r\n\t\t\t\t\t\tif (player.isTypeExpansions(\"longtengmrfz\", \"trick\") == false) return false;\r\n\t\t\t\t\t\tvar info = get.info(event.card);\r\n\t\t\t\t\t\tif (info.allowMultiple == false) return false;\r\n\t\t\t\t\t\tif (event.targets && !info.multitarget) {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\t\treturn lib.filter.targetEnabled2(event.card, player, current) && !event.targets.includes(current);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.chooseTarget(\"【龙腾】:你可以为此牌(\" + get.translation(trigger.card) + \")额外指定一个目标\", function (card, player, target) {\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\tif (_status.event.targets.includes(target)) return false;\r\n\t\t\t\t\t\t\t\tif (player.canUse(trigger.card, target, true) == false) return false;\r\n\t\t\t\t\t\t\t\treturn lib.filter.targetEnabled2(_status.event.card, player, target);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\tvar trigger = _status.event.getTrigger();\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\treturn get.effect(target, trigger.card, player, player);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"targets\", trigger.targets)\r\n\t\t\t\t\t\t\t.set(\"card\", trigger.card);\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tif (!event.isMine() && !event.isOnline()) game.delayx();\r\n\t\t\t\t\t\t\tevent.targets = result.targets;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tplayer.logSkill(\"longtengmrfz\", event.targets);\r\n\t\t\t\t\t\ttrigger.targets.addArray(event.targets);\r\n\t\t\t\t\t\t(\"step 3\");\r\n\t\t\t\t\t\tif (get.tag(trigger.card, \"damage\")) {\r\n\t\t\t\t\t\t\tplayer.chooseBool(\"【龙腾】:是否令此牌伤害+1？\");\r\n\t\t\t\t\t\t} else event.finish();\r\n\t\t\t\t\t\t(\"step 4\");\r\n\t\t\t\t\t\ttrigger.baseDamage++;\r\n\t\t\t\t\t\tplayer.addTempSkill(\"longtengmrfz_trick2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttrick2: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\tequip: {\r\n\t\t\t\t\ttrigger: { player: \"useCard2\" },\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (get.type(event.card) != \"basic\") return false;\r\n\t\t\t\t\t\tif (player.isTypeExpansions(\"longtengmrfz\", \"equip\") == false) return false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tvar list = [\"不计入次数限制\"];\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn !trigger.targets.includes(current) && player.canUse(trigger.card, current, false);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\tlist.add(\"增加目标\");\r\n\t\t\t\t\t\tif (trigger.card.name == \"sha\") list.add(\"伤害基数+1\");\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t\t.set(\"prompt\", \"【龙腾】:请选择一项\")\r\n\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\t\t\t\tnum = [];\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\t\t\t\t\t\t\tnum.add(i);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (get.name(_status.event.TriCard) == \"sha\" && player.getCardUsable(\"sha\") == 0 && player.countCards(\"h\", \"sha\") > 0) return 0;\r\n\t\t\t\t\t\t\t\tif (get.name(_status.event.TriCard) == \"sha\" && (player.countCards(\"h\", \"sha\") == 0 || player.getCardUsable(\"sha\") > 0)) return list.length - 1;\r\n\t\t\t\t\t\t\t\tif (get.name(_status.event.TriCard) == \"jiu\") return 0;\r\n\t\t\t\t\t\t\t\treturn num.randomGet();\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"TriCard\", trigger.card);\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tgame.log(player, \"选择了\", result.control);\r\n\t\t\t\t\t\tplayer.popup(result.control);\r\n\t\t\t\t\t\tplayer.logSkill(\"longtengmrfz\");\r\n\t\t\t\t\t\tif (result.control == \"不计入次数限制\") {\r\n\t\t\t\t\t\t\tif (trigger.addCount !== false && (trigger.card.name == \"sha\" || trigger.card.name == \"jiu\")) {\r\n\t\t\t\t\t\t\t\ttrigger.addCount = false;\r\n\t\t\t\t\t\t\t\tif (trigger.card.name == \"sha\") trigger.player.getStat().card.sha--;\r\n\t\t\t\t\t\t\t\telse trigger.player.getStat().card.jiu--;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\t} else if (result.control == \"增加目标\") {\r\n\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t.chooseTarget([1, 2], \"【龙腾】:你可以为此牌(\" + get.translation(trigger.card) + \")额外指定两个目标\", function (card, player, target) {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\t\tif (_status.event.targets.includes(target)) return false;\r\n\t\t\t\t\t\t\t\t\tif (player.canUse(trigger.card, target, true) == false) return false;\r\n\t\t\t\t\t\t\t\t\treturn lib.filter.targetEnabled2(_status.event.card, player, target);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\t\tvar trigger = _status.event.getTrigger();\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\t\treturn get.effect(target, trigger.card, player, player);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"targets\", trigger.targets)\r\n\t\t\t\t\t\t\t\t.set(\"card\", trigger.card);\r\n\t\t\t\t\t\t} else if (result.control == \"伤害基数+1\") {\r\n\t\t\t\t\t\t\tif (!trigger.baseDamage) trigger.baseDamage = 1;\r\n\t\t\t\t\t\t\ttrigger.baseDamage += 1;\r\n\t\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\t} else event.finish();\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tfor (var i = 0; i < result.targets.length; i++) {\r\n\t\t\t\t\t\t\t\ttrigger.targets.push(result.targets[i]);\r\n\t\t\t\t\t\t\t\tplayer.line(result.targets[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { player: [\"phaseZhunbeiBegin\", \"dieBegin\"] },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\t\tvar cards = current.getExpansions(\"longtengmrfz\");\r\n\t\t\t\t\t\t\tif (current.getExpansions(\"longtengmrfz\").length) current.loseToDiscardpile(cards);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//嵯峨\r\n\t\tquanshanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.player.countCards(\"h\") == 0 && event.player != player;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"是否令\" + get.translation(event.player) + \"将手牌补至3张并令其获得一些负面效果？\";\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (event.player.hp < 2 && get.attitude(player, event.player) > 0) return true;\r\n\t\t\t\tif (get.attitude(player, event.player) > 2 && event.player.maxHp > 2) return Math.random() > 0.6;\r\n\t\t\t\tif (event.player.hp < 2) return false;\r\n\t\t\t\treturn get.attitude(player, event.player) < 2;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar target = trigger.player;\r\n\t\t\t\ttarget.drawTo(Math.min(3, target.maxHp));\r\n\t\t\t\ttarget.addSkill(\"quanshanmrfz_eff\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"quanshanmrfz_clear\", \"quanshanmrfz_clear2\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear2: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.hasSkill(\"quanshanmrfz_eff\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar target = trigger.player;\r\n\t\t\t\t\t\ttarget.removeMark(\"quanshanmrfz_eff\", target.countMark(\"quanshanmrfz_eff\"));\r\n\t\t\t\t\t\ttarget.removeSkill(\"quanshanmrfz_eff\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"dieBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn current.hasMark(\"quanshanmrfz\") || current.hasSkill(\"quanshanmrfz_eff\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\t\tcurrent.removeMark(\"quanshanmrfz_eff\", current.countMark(\"quanshanmrfz_eff\"));\r\n\t\t\t\t\t\t\tcurrent.removeSkill(\"quanshanmrfz_eff\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff: {\r\n\t\t\t\t\tmarktext: \"恶\",\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tname: \"恶\",\r\n\t\t\t\t\t\tcontent: \"·当你造成伤害时，你获得一个‘恶’</br>·你共有#个‘恶’\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer.logSkill(\"quanshanmrfz\");\r\n\t\t\t\t\t\tplayer.addMark(\"quanshanmrfz_eff\");\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (player.getHandcardLimit() <= 0) {\r\n\t\t\t\t\t\t\tevent.getParent(\"phaseUse\").skipped = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn num - player.countMark(\"quanshanmrfz_eff\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tchuemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\treturn current != player && current.countCards(\"h\") > 0 && player.inRange(current);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn player.inRange(target) && target != player && target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tcheck: function () {\r\n\t\t\t\treturn -1;\r\n\t\t\t},\r\n\t\t\tselectTarget: [1, 2],\r\n\t\t\tmultitarget: true,\r\n\t\t\tmultiline: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tevent.num = 0;\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tvar target = targets[event.num];\r\n\t\t\t\tvar hs = target.getCards(\"h\");\r\n\t\t\t\tvar colred = false;\r\n\t\t\t\tfor (var i = 0; i < hs.length; i++) {\r\n\t\t\t\t\tif (get.color(hs[i]) == \"red\") {\r\n\t\t\t\t\t\tcolred = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tplayer.viewHandcards(target);\r\n\t\t\t\tgame.log(player, \"观看了\", target, \"的手牌\");\r\n\t\t\t\tif (colred) {\r\n\t\t\t\t\tvar list = [];\r\n\t\t\t\t\tfor (var i = 0; i < hs.length; i++) {\r\n\t\t\t\t\t\tif (list.length == 2) break;\r\n\t\t\t\t\t\tif (get.suit(hs[i]) == \"club\" && !list.includes(\"梅花\")) list.add(\"梅花\");\r\n\t\t\t\t\t\tif (get.suit(hs[i]) == \"spade\" && !list.includes(\"黑桃\")) list.add(\"黑桃\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlist.add(\"cancel2\");\r\n\t\t\t\t\tif (list.length > 1)\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t\t.set(\"prompt\", \"【除恶】:请选择一个花色，然后其(\" + get.translation(target) + \")弃置该花色的所有牌\")\r\n\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\t\t\t\ths = target.getCards(),\r\n\t\t\t\t\t\t\t\t\tnum = 0;\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < hs.length; i++) {\r\n\t\t\t\t\t\t\t\t\tif (get.suit(hs[i]) == \"club\") num++;\r\n\t\t\t\t\t\t\t\t\tif (get.suit(hs[i]) == \"spade\") num--;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (list.length == 1) return 0;\r\n\t\t\t\t\t\t\t\tif (num > 0) return 0;\r\n\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t} else if (!colred) {\r\n\t\t\t\t\tplayer.chooseBool(\"【除恶】:是否弃置其(\" + get.translation(target) + \")所有手牌？\");\r\n\t\t\t\t\tevent.goto(3);\r\n\t\t\t\t} else event.finish();\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tvar target = targets[event.num];\r\n\t\t\t\tif (result.control != \"cancel2\") {\r\n\t\t\t\t\tvar hs = target.getCards();\r\n\t\t\t\t\tvar dis = [];\r\n\t\t\t\t\tfor (var i = 0; i < hs.length; i++) {\r\n\t\t\t\t\t\tif (get.suit(hs[i]) == (result.control == \"黑桃\" ? \"spade\" : \"club\")) dis.push(hs[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttarget.discard(dis);\r\n\t\t\t\t\tplayer.draw(dis.length);\r\n\t\t\t\t}\r\n\t\t\t\tif (event.num < targets.length - 1) {\r\n\t\t\t\t\tevent.num++;\r\n\t\t\t\t\tevent.goto(1);\r\n\t\t\t\t} else event.finish();\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tvar target = targets[event.num];\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar dis = target.getCards();\r\n\t\t\t\t\ttarget.discard(dis);\r\n\t\t\t\t\tif (target.hasMark(\"quanshanmrfz_eff\")) {\r\n\t\t\t\t\t\ttarget.damage(target.countMark(\"quanshanmrfz_eff\"));\r\n\t\t\t\t\t\ttarget.removeMark(\"quanshanmrfz_eff\", target.countMark(\"quanshanmrfz_eff\"));\r\n\t\t\t\t\t} else event.goto(5);\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 4\");\r\n\t\t\t\tif (event.num < targets.length - 1) {\r\n\t\t\t\t\tevent.num++;\r\n\t\t\t\t\tevent.goto(1);\r\n\t\t\t\t} else event.finish();\r\n\t\t\t\t(\"step 5\");\r\n\t\t\t\tvar target = targets[event.num];\r\n\t\t\t\tif (!target.hasSkill(\"quanshanmrfz_eff\")) {\r\n\t\t\t\t\ttarget.drawTo(Math.min(3, target.maxHp));\r\n\t\t\t\t\ttarget.addSkill(\"quanshanmrfz_eff\");\r\n\t\t\t\t\tplayer.popup(\"劝善\");\r\n\t\t\t\t\tplayer.logSkill(\"quanshanmrfz\", target);\r\n\t\t\t\t}\r\n\t\t\t\tevent.goto(4);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\ttarget: -1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//新银灰\r\n\t\txuebianmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"已造成#点伤害\",\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\taudio: 2,\r\n\t\t\tusable: 1,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.countCards(\"h\") > 0 &&\r\n\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && current.countCards(\"h\") > 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tselectTarget: [1, 2],\r\n\t\t\tcheck: function () {\r\n\t\t\t\treturn -1;\r\n\t\t\t},\r\n\t\t\tmultitarget: true,\r\n\t\t\tmultiline: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tevent.cards1 = [];\r\n\t\t\t\tevent.cards2 = [];\r\n\t\t\t\tevent.cards3 = [];\r\n\t\t\t\tfor (i of targets) i.addTempSkill(\"xuebianmrfz2\", { player: \"phaseEnd\" });\r\n\t\t\t\ttargets.push(player);\r\n\t\t\t\ttargets.sortBySeat();\r\n\t\t\t\tvar next = player\r\n\t\t\t\t\t.chooseCardOL(targets, \"请选择要展示的牌\", true, [1, 3])\r\n\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\treturn -get.value(card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"source\", player);\r\n\t\t\t\tnext.aiCard = function (target) {\r\n\t\t\t\t\tvar hs = target.getCards(\"h\");\r\n\t\t\t\t\treturn { bool: true, cards: [hs.randomGet()] };\r\n\t\t\t\t};\r\n\t\t\t\tnext._args.remove(\"glow_result\");\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tvar cards = [];\r\n\t\t\t\tvar num = 0;\r\n\t\t\t\tevent.videoId = lib.status.videoId++;\r\n\t\t\t\tfor (var i = 0; i < targets.length; i++) {\r\n\t\t\t\t\tfor (var j = 0; j < result[i].cards.length; j++) {\r\n\t\t\t\t\t\tcards.push(result[i].cards[j]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tevent.cards = cards;\r\n\t\t\t\tgame.log(player, \"展示了\", targets, \"的\", cards);\r\n\t\t\t\tgame.broadcastAll(\r\n\t\t\t\t\tfunction (targets, cards, id, player) {\r\n\t\t\t\t\t\tvar dialog = ui.create.dialog(get.translation(player) + \"发动了【雪变】\", cards);\r\n\t\t\t\t\t\tdialog.videoId = id;\r\n\t\t\t\t\t\tvar getName = function (target) {\r\n\t\t\t\t\t\t\tif (target._tempTranslate) return target._tempTranslate;\r\n\t\t\t\t\t\t\tvar name = target.name;\r\n\t\t\t\t\t\t\tif (lib.translate[name + \"_ab\"]) return lib.translate[name + \"_ab\"];\r\n\t\t\t\t\t\t\treturn get.translation(name);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tfor (var i = 0; i < targets.length; i++) {\r\n\t\t\t\t\t\t\tif (i == 0) event.cards1 = result[i].cards;\r\n\t\t\t\t\t\t\tif (i == 1) event.cards2 = result[i].cards;\r\n\t\t\t\t\t\t\tif (i == 2) event.cards3 = result[i].cards;\r\n\t\t\t\t\t\t\tfor (var j = 0; j < result[i].cards.length; j++) {\r\n\t\t\t\t\t\t\t\tif (i == 0) dialog.buttons[j].querySelector(\".info\").innerHTML = getName(targets[i]);\r\n\t\t\t\t\t\t\t\telse if (i == 1) dialog.buttons[j + result[i - 1].cards.length].querySelector(\".info\").innerHTML = getName(targets[i]);\r\n\t\t\t\t\t\t\t\telse dialog.buttons[j + result[i - 2].cards.length + result[i - 1].cards.length].querySelector(\".info\").innerHTML = getName(targets[i]);\r\n\t\t\t\t\t\t\t\tif (get.color(result[i].cards[j]) == \"red\") num++;\r\n\t\t\t\t\t\t\t\telse num--;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttargets,\r\n\t\t\t\t\tcards,\r\n\t\t\t\t\tevent.videoId,\r\n\t\t\t\t\tplayer\r\n\t\t\t\t);\r\n\t\t\t\tgame.delay(4);\r\n\t\t\t\t//红多\r\n\t\t\t\tif (num > 0) {\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.chooseTarget(\"【雪变】：你可以对其中一名角色造成一点伤害并令其弃置其展示的牌\", function (card, player, target) {\r\n\t\t\t\t\t\t\treturn target != player && target.hasSkill(\"xuebianmrfz2\");\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\treturn get.attitude(player, target) < 0;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\tevent.targets = result;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor (var i = 0; i < targets.length; i++) {\r\n\t\t\t\t\t\ttargets[i].discard(result[i].cards);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tvar list = [event.cards1, event.cards2, event.cards3];\r\n\t\t\t\tgame.broadcastAll(\"closeDialog\", event.videoId);\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tresult.targets[0].damage();\r\n\t\t\t\t\tfor (var i = 0; i < event.targets.length; i++) {\r\n\t\t\t\t\t\tif (event.targets[i] == result.targets[0]) var cards = list[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresult.targets[0].discard(cards);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"xuebianmrfz_dam\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdam: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.getParent().name == \"xuebianmrfz\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addMark(\"xuebianmrfz\", trigger.num, false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 12,\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\ttarget: -1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txuebianmrfz2: {\r\n\t\t\tcharlotte: true,\r\n\t\t},\r\n\t\ttonghemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tderivation: [\"xinyingshimrfz\", \"new_xinbangmrfz\"],\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationColor: \"thunder\",\r\n\t\t\tunique: true,\r\n\t\t\tjuexingji: true,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"xuebianmrfz\") >= 2 || game.roundNumber > 2;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.addMark(\"xinyingshimrfz\", player.countMark(\"xuebianmrfz\"), false);\r\n\t\t\t\tplayer.removeSkill(\"xuebianmrfz\");\r\n\t\t\t\tplayer.addSkill(\"xinyingshimrfz\");\r\n\t\t\t\tplayer.addSkill(\"new_xinbangmrfz\");\r\n\t\t\t\tplayer.loseMaxHp();\r\n\t\t\t\tplayer.recoverTo(player.maxHp);\r\n\t\t\t\tplayer.awakenSkill(\"tonghemrfz\");\r\n\t\t\t},\r\n\t\t},\r\n\t\txinyingshimrfz: {\r\n\t\t\taudio: \"yingshimrfz\",\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => lib.skill.xinyingshimrfz.filterTarget(null, player, current));\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar num = player.countMark(\"xinyingshimrfz\") + 1;\r\n\t\t\t\tvar max = target.countCards(\"h\");\r\n\t\t\t\tif (max > num) return player.discardPlayerCard(num, target, \"h\", true, \"visible\");\r\n\t\t\t\tif (num >= max) return player.discardPlayerCard(max, target, \"h\", true, \"visible\");\r\n\t\t\t\tgame.log(player, \"观看了\", target, \"的手牌\");\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tthreaten: 1.1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\ttarget: -1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txinbangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseDrawBegin2\",\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.num > 0 && !event.numFixed;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.storage.xinbangmrfz = [];\r\n\t\t\t\tvar num = get.copy(trigger.num);\r\n\t\t\t\tplayer.chooseTarget(\r\n\t\t\t\t\tget.prompt(\"xinbangmrfz\"),\r\n\t\t\t\t\t\"选择至多\" + get.translation(num) + \"名其他角色，其选择让你定向摸牌，然后你少摸等量的牌\",\r\n\t\t\t\t\t[1, num],\r\n\t\t\t\t\tfunction (card, player, target) {\r\n\t\t\t\t\t\treturn player != target;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfunction (target) {\r\n\t\t\t\t\t\tvar att = get.attitude(_status.event.player, target);\r\n\t\t\t\t\t\treturn att > 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tevent.targets = result.targets;\r\n\t\t\t\t\tevent.num = 0;\r\n\t\t\t\t\ttrigger.num -= result.targets.length;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tvar target = event.targets[event.num];\r\n\t\t\t\tvar att = get.attitude(target, player);\r\n\t\t\t\ttarget.addTempSkill(\"xinbangmrfz2\", {\r\n\t\t\t\t\tplayer: \"phaseUseEnd\",\r\n\t\t\t\t});\r\n\t\t\t\ttarget\r\n\t\t\t\t\t.chooseControl(\"basic\", \"trick\", \"equip\")\r\n\t\t\t\t\t.set(\"prompt\", \"【兴邦】：请让\" + get.translation(player) + \"摸一张指定类型牌，当此牌造成伤害时，你与其各摸一张牌\")\r\n\t\t\t\t\t.set(\"ai\", function (player) {\r\n\t\t\t\t\t\tif (att > 0) return [1, 2].randomGet();\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t});\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tvar card = get.cardPile2(function (card) {\r\n\t\t\t\t\treturn get.type(card, \"trick\") == result.control;\r\n\t\t\t\t});\r\n\t\t\t\tif (card) {\r\n\t\t\t\t\tplayer.gain(card, \"gain2\").gaintag = [\"xinbangmrfz\"];\r\n\t\t\t\t} else player.chat(\"牌堆中没有\" + get.translation(result.control) + \"牌了！\");\r\n\t\t\t\t(\"step 4\");\r\n\t\t\t\tvar cards = player.getCards(\"h\", function (card) {\r\n\t\t\t\t\treturn card.hasGaintag(\"xinbangmrfz\");\r\n\t\t\t\t});\r\n\t\t\t\tfor (i of cards) {\r\n\t\t\t\t\ti.storage.xinbangmrfz = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (event.num < event.targets.length - 1) {\r\n\t\t\t\t\tevent.num++;\r\n\t\t\t\t\tevent.goto(2);\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 5\");\r\n\t\t\t\tif (trigger.num <= 0) game.delay();\r\n\t\t\t},\r\n\t\t\tgroup: [\"xinbangmrfz_draw\", \"xinbangmrfz_lose\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\taudio: \"xinbangmrfz\",\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!event.cards || event.cards.length > 1) return false;\r\n\t\t\t\t\t\treturn event.card.storage && event.card.storage.xinbangmrfz == true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.chooseTarget(\"【兴邦】:请选择一名其他角色，然后你与其各摸一张牌\", true, function (card, player, target) {\r\n\t\t\t\t\t\t\t\treturn target != player && target.hasSkill(\"xinbangmrfz2\");\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\treturn get.attitude(player, target) > 0;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tresult.targets[0].draw();\r\n\t\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tlose: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseUseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\t\treturn card.hasGaintag(\"xinbangmrfz\");\r\n\t\t\t\t\t\t\t}) > 0\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeGaintag(\"xinbangmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txinbangmrfz2: {\r\n\t\t\tcharlotte: true,\r\n\t\t\tsilent: true,\r\n\t\t\tonremove: true,\r\n\t\t},\r\n\t\tnew_xinbangmrfz: {\r\n\t\t\taudio: \"xinbangmrfz\",\r\n\t\t\tfrequent: true,\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!player.isPhaseUsing()) return false;\r\n\t\t\t\tvar list = player.getStorage(\"xinbangmrfz2\");\r\n\t\t\t\tif (!list.includes(get.type2(event.card, player))) return true;\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tif (!player.storage.xinbangmrfz2) {\r\n\t\t\t\t\tplayer.addTempSkill(\"xinbangmrfz2\");\r\n\t\t\t\t\tplayer.storage.xinbangmrfz2 = [];\r\n\t\t\t\t}\r\n\t\t\t\tplayer.storage.xinbangmrfz2.add(get.type2(trigger.card, player));\r\n\t\t\t\tplayer.draw();\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (Array.isArray(result) && result.length > 0) {\r\n\t\t\t\t\tvar card = result[0],\r\n\t\t\t\t\t\tcards = player.getCards(\"h\"),\r\n\t\t\t\t\t\tlist = [];\r\n\t\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\t\tif (i == result[0]) continue;\r\n\t\t\t\t\t\tlist.add(get.suit(i, player));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!list.includes(get.suit(card, player))) player.draw();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\t//帕拉斯\r\n\t\tyingzhumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\tdirect: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.yingzhumrfz;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar next = player.chooseControl(\"准备\", \"判定\", \"摸牌\", \"出牌\", \"弃牌\", \"结束\", \"cancel2\").set(\"prompt\", get.prompt(\"yingzhumrfz\"));\r\n\t\t\t\tnext.set(\"prompt2\", \"你可以令自己在任意阶段结束后额外执行一个该阶段\");\r\n\t\t\t\tnext.set(\"ai\", function () {\r\n\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tplayer.countCards(\"h\", \"sha\") > player.getCardUsable(\"sha\") &&\r\n\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn current != player && player.inRange(current) && get.attitude(player, current) < 0;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t)\r\n\t\t\t\t\t\treturn 3;\r\n\t\t\t\t\treturn 2;\r\n\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.control != \"cancel2\") {\r\n\t\t\t\t\tvar list = [\"yingzhumrfz_Zhunbei\", \"yingzhumrfz_judge\", \"yingzhumrfz_draw\", \"yingzhumrfz_use\", \"yingzhumrfz_discard\", \"yingzhumrfz_jieshu\"];\r\n\t\t\t\t\tplayer.addTempSkill(list[result.index]);\r\n\t\t\t\t\tplayer.logSkill(\"yingzhumrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"yingzhumrfz_phase\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tphase: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer.storage.yingzhumrfz = false;\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.chooseTarget(get.prompt(\"yingzhumrfz\"), \"你可以选择一名其他角色，令其于任一阶段结束后额外执行一次此阶段\", function (card, player, target) {\r\n\t\t\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\tvar att = get.attitude(player, target);\r\n\t\t\t\t\t\t\t\treturn att > 0;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tvar att = get.attitude(player, result.targets[0]);\r\n\t\t\t\t\t\t\tvar next = player.chooseControl(\"准备\", \"判定\", \"摸牌\", \"出牌\", \"弃牌\", \"结束\");\r\n\t\t\t\t\t\t\tnext.set(\"prompt\", \"【英祝】:请选择一个阶段,\" + get.translation(result.targets[0]) + \"于此阶段结束后额外执行一次此阶段\");\r\n\t\t\t\t\t\t\tnext.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\t\t\t\treturn 2;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tplayer.storage.yingzhumrfz = true;\r\n\t\t\t\t\t\t\tevent.target = result.targets[0];\r\n\t\t\t\t\t\t} else event.finish();\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tvar list = [\"yingzhumrfz_Zhunbei\", \"yingzhumrfz_judge\", \"yingzhumrfz_draw\", \"yingzhumrfz_use\", \"yingzhumrfz_discard\", \"yingzhumrfz_jieshu\"];\r\n\t\t\t\t\t\tevent.target.addSkill(list[result.index]);\r\n\t\t\t\t\t\tplayer.logSkill(\"yingzhumrfz\", event.target);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\texpose: 0.1,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tZhunbei: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseZhunbeiAfter\" },\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"于准备阶段结束后额外执行一个准备阶段\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tevent.next.remove(player.phaseZhunbei());\r\n\t\t\t\t\t\ttrigger.next.push(player.phaseZhunbei());\r\n\t\t\t\t\t\tplayer.removeSkill(\"yingzhumrfz_Zhunbei\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tjudge: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"于判定阶段结束后额外执行一个判定阶段\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: { player: \"phaseJudgeAfter\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tevent.next.remove(player.phaseJudge());\r\n\t\t\t\t\t\ttrigger.next.push(player.phaseJudge());\r\n\t\t\t\t\t\tplayer.removeSkill(\"yingzhumrfz_judge\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"于摸牌阶段结束后额外执行一个摸牌阶段\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: { player: \"phaseDrawAfter\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tevent.next.remove(player.phaseDraw());\r\n\t\t\t\t\t\ttrigger.next.push(player.phaseDraw());\r\n\t\t\t\t\t\tplayer.removeSkill(\"yingzhumrfz_draw\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tuse: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"于出牌阶段结束后额外执行一个出牌阶段\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: { player: \"phaseUseAfter\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tevent.next.remove(player.phaseUse());\r\n\t\t\t\t\t\ttrigger.next.push(player.phaseUse());\r\n\t\t\t\t\t\tplayer.removeSkill(\"yingzhumrfz_use\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdiscard: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"于弃牌阶段结束后额外执行一个弃牌阶段\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: { player: \"phaseDiscardAfter\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tevent.next.remove(player.phaseDiscard());\r\n\t\t\t\t\t\ttrigger.next.push(player.phaseDiscard());\r\n\t\t\t\t\t\tplayer.removeSkill(\"yingzhumrfz_discard\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tjieshu: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"于结束阶段结束后额外执行一个结束阶段\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: { player: \"phaseJieshuAfter\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tevent.next.remove(player.phaseJieshu());\r\n\t\t\t\t\t\ttrigger.next.push(player.phaseJieshu());\r\n\t\t\t\t\t\tplayer.removeSkill(\"yingzhumrfz_jieshu\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tyingdanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tsilent: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: [\"phaseZhunbeiAfter\", \"phaseJudgeAfter\", \"phaseDrawAfter\", \"phaseUseAfter\", \"phaseDiscardAfter\", \"phaseJieshuAfter\"],\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.player.addMark(\"yingdanmrfz\", false);\r\n\t\t\t},\r\n\t\t\tgroup: \"yingdanmrfz_draw\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tvar target = trigger.player;\r\n\t\t\t\t\t\tif (target.countMark(\"yingdanmrfz\") > 6) {\r\n\t\t\t\t\t\t\tvar next = player.chooseBool(\"【英诞】:是否令\" + (target == player ? \"自己\" : get.translation(target)) + \"摸\" + (target.countMark(\"yingdanmrfz\") - 6) + \"张牌？\");\r\n\t\t\t\t\t\t\tnext.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\tvar target = trigger.player;\r\n\t\t\t\t\t\t\t\treturn get.attitude(player, target) > 0;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tvar target = trigger.player;\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\ttarget.draw(target.countMark(\"yingdanmrfz\") - 6);\r\n\t\t\t\t\t\t\tplayer.logSkill(\"yingdanmrfz\", target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttarget.removeMark(\"yingdanmrfz\", target.countMark(\"yingdanmrfz\"), false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t},\r\n\t\t},\r\n\t\tyingfenmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.storage.yingfenmrfz) return false;\r\n\t\t\t\treturn event.card.name == \"tao\";\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseTarget(get.prompt(\"yingfenmrfz\"), \"你可以令一名其他角色恢复一点体力\", function (card, player, target) {\r\n\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\treturn get.attitude(player, target) > 0;\r\n\t\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tplayer.storage.yingfenmrfz = true;\r\n\t\t\t\t\tresult.targets[0].recover();\r\n\t\t\t\t\tplayer.logSkill(\"yingfenmrfz\", result.targets[0]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"yingfenmrfz_clear\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.storage.yingfenmrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.yingfenmrfz = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//瑕光\r\n\t\trencimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseEnd\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.player == player || event.player.getHistory(\"skipped\").length == 0) return false;\r\n\t\t\t\treturn lib.filter.targetEnabled({ name: \"sha\" }, player, event.player) && (player.hasSha() || (_status.connectMode && player.countCards(\"h\") > 0));\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.addTempSkill(\"rencimrfz_dam\", \"useCardAfter\");\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseToUse(\r\n\t\t\t\t\t\tfunction (card, player, event) {\r\n\t\t\t\t\t\t\tif (get.name(card) != \"sha\") return false;\r\n\t\t\t\t\t\t\treturn lib.filter.filterCard.apply(this, arguments);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\"【仁慈】:是否对\" + get.translation(trigger.player) + \"使用一张杀？\"\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"logSkill\", \"rencimrfz\")\r\n\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\tif (target != _status.event.sourcex && !ui.selected.targets.includes(_status.event.sourcex)) return false;\r\n\t\t\t\t\t\treturn lib.filter.targetEnabled.apply(this, arguments);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"sourcex\", trigger.player);\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdam: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tsource: \"damageBegin\",\r\n\t\t\t\t\t\tplayer: \"shaMiss\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (trigger.name == \"damage\") trigger.num++;\r\n\t\t\t\t\t\tplayer.removeSkill(\"rencimrfz_dam\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thuiguangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.hasMark(\"huiguangmrfz\") && player.countMark(\"huiguangmrfz\") <= 6;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar num = player.countMark(\"huiguangmrfz\") - 1;\r\n\t\t\t\tvar list = [\"准备\", \"判定\", \"摸牌\", \"出牌\", \"弃牌\", \"结束\"];\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseTarget(\"【辉光】:你可以令一名其他角色跳过下个\" + list[num] + \"阶段\", function (card, player, target) {\r\n\t\t\t\t\t\treturn target != player && !target.hasSkill(\"huiguangmrfz_skip\");\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\tvar att = get.attitude(target, player),\r\n\t\t\t\t\t\t\tnum = player.countMark(\"huiguangmrfz\");\r\n\t\t\t\t\t\tif (num == 2 || num == 5) return att > 0;\r\n\t\t\t\t\t\treturn att < 0;\r\n\t\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar target = result.targets[0],\r\n\t\t\t\t\t\tnum = player.countMark(\"huiguangmrfz\") - 1;\r\n\t\t\t\t\ttarget.addSkill(\"huiguangmrfz_skip\");\r\n\t\t\t\t\ttarget.addMark(\"huiguangmrfz_skip\", num + 1, false);\r\n\t\t\t\t\tplayer.logSkill(\"huiguangmrfz\", target);\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tplayer.removeMark(\"huiguangmrfz\", player.countMark(\"huiguangmrfz\"), false);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t},\r\n\t\t\tgroup: [\"huiguangmrfz_mark\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tskip: {\r\n\t\t\t\t\tmarkimage: \"extension/WhichWay/image/skill/sleepmrfz.png\",\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tname: \"睡眠\",\r\n\t\t\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\t\t\tvar phase = [\"phaseZhunbei\", \"phaseJudge\", \"phaseDraw\", \"phaseUse\", \"phaseDiscard\", \"phaseJieshu\"];\r\n\t\t\t\t\t\t\tvar num = player.countMark(\"huiguangmrfz_skip\") - 1;\r\n\t\t\t\t\t\t\treturn \"跳过下个\" + get.tranPhase(phase[num]);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar phase = [\"phaseZhunbei\", \"phaseJudge\", \"phaseDraw\", \"phaseUse\", \"phaseDiscard\", \"phaseJieshu\"];\r\n\t\t\t\t\t\tvar num = player.countMark(\"huiguangmrfz_skip\") - 1;\r\n\t\t\t\t\t\tplayer.skip(phase[num]);\r\n\t\t\t\t\t\tgame.log(player, \"跳过了\", get.tranPhase(phase[num]));\r\n\t\t\t\t\t\tplayer.removeMark(\"huiguangmrfz_skip\", player.countMark(\"huiguangmrfz_skip\"), false);\r\n\t\t\t\t\t\tplayer.removeSkill(\"huiguangmrfz_skip\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tmark: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCardAfter\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn _status.currentPhase == player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addMark(\"huiguangmrfz\", false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tjiandunmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: [\"chooseToRespond\", \"chooseToUse\"],\r\n\t\t\thiddenCard: function (player, name) {\r\n\t\t\t\tif (get.type(name) != \"basic\") return false;\r\n\t\t\t\treturn player.hasCard(function (card) {\r\n\t\t\t\t\treturn get.type2(card) == \"trick\";\r\n\t\t\t\t}, \"hs\");\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (\r\n\t\t\t\t\t!player.hasCard(function (card) {\r\n\t\t\t\t\t\treturn get.type2(card) == \"trick\";\r\n\t\t\t\t\t}, \"hs\")\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\tfor (var name of lib.inpile) {\r\n\t\t\t\t\tif (get.type(name) != \"basic\") continue;\r\n\t\t\t\t\tif (event.filterCard({ name: name }, player, event)) return true;\r\n\t\t\t\t\tif (name == \"sha\") {\r\n\t\t\t\t\t\tfor (var nature of lib.inpile_nature) {\r\n\t\t\t\t\t\t\tif (event.filterCard({ name: \"sha\", nature: nature }, player, event)) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tchooseButton: {\r\n\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\tvar list = [];\r\n\t\t\t\t\tfor (var name of lib.inpile) {\r\n\t\t\t\t\t\tif (get.type(name) != \"basic\") continue;\r\n\t\t\t\t\t\tif (event.filterCard({ name: name }, player, event)) {\r\n\t\t\t\t\t\t\tlist.push([\"基本\", \"\", name]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (name == \"sha\") {\r\n\t\t\t\t\t\t\tfor (var nature of lib.inpile_nature) {\r\n\t\t\t\t\t\t\t\tif (event.filterCard({ name: name, nature: nature }, player, event)) list.push([\"基本\", \"\", \"sha\", nature]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn ui.create.dialog(\"剑盾\", [list, \"vcard\"], \"hidden\");\r\n\t\t\t\t},\r\n\t\t\t\tcheck: function (button) {\r\n\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\tvar card = {\r\n\t\t\t\t\t\tname: button.link[2],\r\n\t\t\t\t\t\tnature: button.link[3],\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t_status.event.getParent().type != \"phase\" ||\r\n\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn player.canUse(card, current) && get.effect(current, card, player, player) > 0;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tswitch (button.link[2]) {\r\n\t\t\t\t\t\t\tcase \"tao\":\r\n\t\t\t\t\t\t\tcase \"shan\":\r\n\t\t\t\t\t\t\t\treturn 5;\r\n\t\t\t\t\t\t\tcase \"jiu\": {\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\tplayer.countCards(\"hs\", {\r\n\t\t\t\t\t\t\t\t\t\ttype: \"trick\",\r\n\t\t\t\t\t\t\t\t\t}) > 2\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\treturn 3;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcase \"sha\":\r\n\t\t\t\t\t\t\t\tif (button.link[3] == \"fire\") return 2.95;\r\n\t\t\t\t\t\t\t\telse if (button.link[3] == \"thunder\" || button.link[3] == \"ice\") return 2.92;\r\n\t\t\t\t\t\t\t\telse return 2.9;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t},\r\n\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\taudio: \"jiandunmrfz\",\r\n\t\t\t\t\t\tfilterCard: function (card, player, target) {\r\n\t\t\t\t\t\t\treturn get.type2(card) == \"trick\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcomplexCard: true,\r\n\t\t\t\t\t\tselectCard: 1,\r\n\t\t\t\t\t\tcheck: function (card, player, target) {\r\n\t\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tviewAs: { name: links[0][2], nature: links[0][3] },\r\n\t\t\t\t\t\tposition: \"hes\",\r\n\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\treturn \"你可以将一张锦囊牌当任意基本牌使用或打出\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 3.1,\r\n\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\tif (tag == \"fireAttack\") return true;\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t!player.hasCard(function (card) {\r\n\t\t\t\t\t\t\treturn get.type2(card) == \"trick\";\r\n\t\t\t\t\t\t}, \"hes\")\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t\trespondSha: true,\r\n\t\t\t\trespondShan: true,\r\n\t\t\t\tfireAttack: true,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//新星熊\r\n\t\txinboremrfz: {\r\n\t\t\taudio: \"banruomrfz\",\r\n\t\t\tmark: false,\r\n\t\t\tmarkimage: \"extension/WhichWay/image/skill/xinboremrfz.png\",\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (player) {\r\n\t\t\t\t\tvar playerhas = game.findPlayer(function (current) {\r\n\t\t\t\t\t\treturn current.hasSkill(\"xinboremrfz\");\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn get.translation(playerhas) + \"正在保护你\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"xinboremrfz_choose\", \"xinboremrfz_card\", \"xinboremrfz_betarget\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tbetarget: {\r\n\t\t\t\t\taudio: \"banruomrfz\",\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"useCardToPlayer\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.targets > 1 || get.type(event.card) == \"equip\") return false;\r\n\t\t\t\t\t\treturn event.target.hasMark(\"xinboremrfz\") && player.getHandcardLimit() > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: function (event, player) {\r\n\t\t\t\t\t\treturn \"【般若】：是否令\" + get.translation(event.card) + \"的目标由\" + get.translation(event.target) + \"改为你？\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\tvar att = get.attitude(event.target, player);\r\n\t\t\t\t\t\tif ((event.card.name == \"wuzhong\" || event.card.name == \"dongzhuxianji\" || event.card.name == \"zenbing\") && att < 0) return true;\r\n\t\t\t\t\t\treturn att > 0 && get.tag(event.card, \"damage\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tvar target = trigger.target;\r\n\t\t\t\t\t\ttrigger.targets.remove(target);\r\n\t\t\t\t\t\ttrigger.getParent().triggeredTargets1.remove(target);\r\n\t\t\t\t\t\ttrigger.untrigger();\r\n\t\t\t\t\t\tgame.delayx();\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\ttrigger.targets.push(player);\r\n\t\t\t\t\t\ttrigger.player.line(player, \"fire\");\r\n\t\t\t\t\t\tgame.log(trigger.card, \"的目标被改为\", player);\r\n\t\t\t\t\t\tplayer.addMark(\"xinboremrfz_losehdlimit\", false);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\texpose: 0.1,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tchoose: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer.chooseTarget(true, \"【般若】：请选择一名其他角色，令其获得‘般若’标记\", function (card, player, target) {\r\n\t\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\t\t\treturn get.attitude(player, target);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\t\t\ttarget.addMark(\"xinboremrfz\");\r\n\t\t\t\t\t\t\tplayer.logSkill(\"xinboremrfz\", target);\r\n\t\t\t\t\t\t\tplayer.disableEquip(\"equip2\");\r\n\t\t\t\t\t\t\ttarget.disableEquip(\"equip2\");\r\n\t\t\t\t\t\t\tplayer.addSkill(\"xinboremrfz_handlit\");\r\n\t\t\t\t\t\t\ttarget.addSkill(\"xinboremrfz_handlit\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tplayer.addSkill(\"xinboremrfz_losehdlimit\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"xinboremrfz_choose\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\texpose: 0.1,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tcard: {\r\n\t\t\t\t\taudio: \"xinboremrfz\",\r\n\t\t\t\t\tenable: \"chooseToUse\",\r\n\t\t\t\t\thiddenCard: function (player, name) {\r\n\t\t\t\t\t\tif (player.hasSkill(\"xinboremrfz_usedwuxie\") && player.hasSkill(\"xinboremrfz_usedsha\") && player.hasSkill(\"xinboremrfz_usedshan\")) return false;\r\n\t\t\t\t\t\tif (name == \"wuxie\" && player.hasSkill(\"xinboremrfz_usedwuxie\")) return false;\r\n\t\t\t\t\t\tif (name == \"sha\" && player.hasSkill(\"xinboremrfz_usedsha\")) return false;\r\n\t\t\t\t\t\tif (name == \"shan\" && player.hasSkill(\"xinboremrfz_usedshan\")) return false;\r\n\t\t\t\t\t\treturn (name == \"wuxie\" || name == \"sha\" || name == \"shan\") && (player.getHandcardLimit() > 0 || player.countDisabledSlot() < 5);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.hasSkill(\"xinboremrfz_usedwuxie\") && player.hasSkill(\"xinboremrfz_usedsha\") && player.hasSkill(\"xinboremrfz_usedshan\")) return false;\r\n\t\t\t\t\t\treturn player.getHandcardLimit() > 0 || player.countDisabledSlot() < 5;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tchooseButton: {\r\n\t\t\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\t\t\tvar vcards = [];\r\n\t\t\t\t\t\t\tfor (var name of [\"sha\", \"shan\", \"wuxie\"]) {\r\n\t\t\t\t\t\t\t\tconst card = { name: name };\r\n\t\t\t\t\t\t\t\tif (name == \"wuxie\" && player.hasSkill(\"xinboremrfz_usedwuxie\")) continue;\r\n\t\t\t\t\t\t\t\tif (name == \"shan\" && player.hasSkill(\"xinboremrfz_usedshan\")) continue;\r\n\t\t\t\t\t\t\t\tif (name == \"sha\" && player.hasSkill(\"xinboremrfz_usedsha\")) continue;\r\n\t\t\t\t\t\t\t\tif (event.filterCard(card, player, event)) {\r\n\t\t\t\t\t\t\t\t\t//QQQ\r\n\t\t\t\t\t\t\t\t\tif (name == \"sha\") {\r\n\t\t\t\t\t\t\t\t\t\tvcards.push([\"基本\", \"\", \"sha\"]);\r\n\t\t\t\t\t\t\t\t\t\tfor (var j of lib.inpile_nature) vcards.push([\"基本\", \"\", \"sha\", j]);\r\n\t\t\t\t\t\t\t\t\t} else if (get.type(name) == \"trick\") {\r\n\t\t\t\t\t\t\t\t\t\tvcards.push([\"锦囊\", \"\", name]);\r\n\t\t\t\t\t\t\t\t\t} else if (get.type(name) == \"basic\") {\r\n\t\t\t\t\t\t\t\t\t\tvcards.push([\"基本\", \"\", name]);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar dialog = ui.create.dialog(\"般若\", [vcards, \"vcard\"], \"hidden\");\r\n\t\t\t\t\t\t\tdialog.direct = true;\r\n\t\t\t\t\t\t\treturn dialog;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfilter: function (button, player) {\r\n\t\t\t\t\t\t\treturn _status.event.getParent().filterCard({ name: button.link[2] }, player, _status.event.getParent());\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tfilterCard: () => false,\r\n\t\t\t\t\t\t\t\tselectCard: -1,\r\n\t\t\t\t\t\t\t\tviewAs: {\r\n\t\t\t\t\t\t\t\t\tname: links[0][2],\r\n\t\t\t\t\t\t\t\t\tnature: links[0][3],\r\n\t\t\t\t\t\t\t\t\tisCard: true,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t\t\t\tprecontent: function () {\r\n\t\t\t\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\t\t\t\tvar card = event.result.card.name;\r\n\t\t\t\t\t\t\t\t\tif (card == \"sha\") {\r\n\t\t\t\t\t\t\t\t\t\tevent.getParent().addCount = false;\r\n\t\t\t\t\t\t\t\t\t\tplayer.addSkill(\"xinboremrfz_usedsha\");\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (card == \"shan\") player.addSkill(\"xinboremrfz_usedshan\");\r\n\t\t\t\t\t\t\t\t\tif (card == \"wuxie\") player.addSkill(\"xinboremrfz_usedwuxie\");\r\n\t\t\t\t\t\t\t\t\tplayer.logSkill(\"xinboremrfz\");\r\n\t\t\t\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\t\t\t\tvar list = [];\r\n\t\t\t\t\t\t\t\t\tif (player.getHandcardLimit() > 0) list.push(\"手牌上限-1\");\r\n\t\t\t\t\t\t\t\t\tif (player.countDisabledSlot() < 5) list.push(\"废除一个装备栏\");\r\n\t\t\t\t\t\t\t\t\tif (list.length > 1)\r\n\t\t\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t\t\t\t\t\t.set(\"prompt\", \"【般若】：请选择一项\")\r\n\t\t\t\t\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t\tif (player.getHandcardLimit() == 0)\r\n\t\t\t\t\t\t\t\t\t\t\tplayer.chooseToDisable().ai = function (event, player, list) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (list.includes(\"equip5\")) return \"equip5\";\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn list.randomGet();\r\n\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\telse player.addMark(\"xinboremrfz_losehdlimit\", false);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\t\t\t\tif (result.index == 0) player.addMark(\"xinboremrfz_losehdlimit\", false);\r\n\t\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\t\tplayer.chooseToDisable().ai = function (event, player, list) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (list.includes(\"equip5\")) return \"equip5\";\r\n\t\t\t\t\t\t\t\t\t\t\treturn list.randomGet();\r\n\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\t\t\treturn \"【般若】：视为使用一张【\" + get.translation(links[0][2]) + \"】\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\torder: function (item, player) {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tvar event = _status.event;\r\n\t\t\t\t\t\t\tif (event.filterCard({ name: \"sha\" }, player, event)) {\r\n\t\t\t\t\t\t\t\treturn 4;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\trespondSha: true,\r\n\t\t\t\t\t\trespondShan: true,\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t\t\tif (player.hasSkill(\"xinboremrfz_usedwuxie\") && player.hasSkill(\"xinboremrfz_usedsha\") && player.hasSkill(\"xinboremrfz_usedshan\")) return false;\r\n\t\t\t\t\t\t\tif (arg != \"use\") return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tlosehdlimit: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn num - player.countMark(\"xinboremrfz_losehdlimit\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tusedshan: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseZhunbeiBegin\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeSkill(\"xinboremrfz_usedshan\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tusedwuxie: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseZhunbeiBegin\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeSkill(\"xinboremrfz_usedwuxie\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tusedsha: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseZhunbeiBegin\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeSkill(\"xinboremrfz_usedsha\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\thandlit: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn num + 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txinyizhongmrfz: {\r\n\t\t\taudio: \"yizhongmrfz\",\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.hp >= player.getHandcardLimit();\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar num = 5 - player.countDisabledSlot() - 1;\r\n\t\t\t\tplayer.addMark(\"xinyizhongmrfz\", num, false);\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\treturn num + player.countMark(\"xinyizhongmrfz\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: \"xinyizhongmrfz_lose\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tlose: {\r\n\t\t\t\t\taudio: \"yizhongmrfz\",\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.source != undefined && event.num > 0 && event.source.hasMark(\"xinboremrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeSkill(\"xinboremrfz\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"xinyizhongmrfz_lose\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//新缪尔赛思\r\n\t\tyuanliumrfz: {\r\n\t\t\taudio: \"kaiyuanmrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tlocked: false,\r\n\t\t\tmarkimage: \"extension/WhichWay/image/skill/miumiuliuxingmrfz.png\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"流形\",\r\n\t\t\t\tcontent: \"#/3\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseControl()\r\n\t\t\t\t\t.set(\"choiceList\", [\"令一名角色摸两张牌\", \"获得一个‘流形’\"])\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\treturn [0, 1].randomGet();\r\n\t\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.index == 0) {\r\n\t\t\t\t\tplayer.chooseTarget(true, \"【源流】：令一名角色摸两张牌\").ai = function (target) {\r\n\t\t\t\t\t\treturn get.attitude(player, target) > 2;\r\n\t\t\t\t\t};\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.logSkill(\"kaiyuanmrfz\");\r\n\t\t\t\t\tplayer.addMark(\"yuanliumrfz\");\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\ttarget.draw(2);\r\n\t\t\t\t\tplayer.logSkill(\"kaiyuanmrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\treturn num + player.countMark(\"yuanliumrfz\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: \"yuanliumrfz_get\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tget: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"phaseUseEnd\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tplayer.getHistory(\"useCard\", function (evt) {\r\n\t\t\t\t\t\t\t\treturn evt.getParent(\"phaseUse\") == event;\r\n\t\t\t\t\t\t\t}).length > 0 && player.countMark(\"yuanliumrfz\") < 3\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar list = [],\r\n\t\t\t\t\t\t\tmark = player.countMark(\"yuanliumrfz\");\r\n\t\t\t\t\t\tplayer.getHistory(\"useCard\", function (evt) {\r\n\t\t\t\t\t\t\tif (evt.getParent(\"phaseUse\") == trigger) list.add(get.type2(evt.card));\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (mark + list.length > 3) player.addMark(\"yuanliumrfz\", 3 - mark);\r\n\t\t\t\t\t\telse player.addMark(\"yuanliumrfz\", list.length);\r\n\t\t\t\t\t\tplayer.logSkill(\"yuanliumrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txinjingshuimrfz: {\r\n\t\t\taudio: \"jingshuimrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t},\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar evt = event.getParent(\"phaseUse\"),\r\n\t\t\t\t\ttype = get.type(event.card);\r\n\t\t\t\tif (type != \"basic\" && type != \"trick\") return false;\r\n\t\t\t\tif (!evt || evt.player != player) return false;\r\n\t\t\t\tif (!player.hasMark(\"yuanliumrfz\")) return false;\r\n\t\t\t\treturn event.targets && event.targets.length == 1;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"是否移除所有‘源流’并令【\" + get.translation(event.card.name) + \"】额外结算\" + player.countMark(\"yuanliumrfz\") + \"次？\";\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn !get.tag(event.card, \"norepeat\");\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar num = player.countMark(\"yuanliumrfz\");\r\n\t\t\t\ttrigger.getParent().effectCount += num;\r\n\t\t\t\tplayer.removeAllmark(\"yuanliumrfz\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tshuilingmrfz: {\r\n\t\t\taudio: \"liuxingmrfz\",\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"damageBegin3\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.hasSkill(\"shuilingmrfz_ban\")) return false;\r\n\t\t\t\treturn !event.nature && player.countCards(\"h\") >= player.hp;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.num--;\r\n\t\t\t\tplayer.addTempSkill(\"shuilingmrfz_ban\", \"phaseEnd\");\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"本回合已发动过【水灵】\",\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//新归溟幽灵鲨\r\n\t\txinyongwomrfz: {\r\n\t\t\taudio: \"yongwomrfz\",\r\n\t\t\tzhuanhuanji: true,\r\n\t\t\tlocked: false,\r\n\t\t\tmark: true,\r\n\t\t\tmarktext: \"☯\",\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (storage, player, skill) {\r\n\t\t\t\t\tif (player.storage.xinyongwomrfz) return \"阳：当你进入濒死状态时，你可以回复至一点体力\";\r\n\t\t\t\t\treturn \"阴：当你武将牌从正面朝上至背面朝上时，你可以摸两张牌，然后选择一项：1.弃置你攻击范围内一名其他角色区域内各一张牌；2.对你攻击范围内的一名其他角色造成一点伤害\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.xinyongwomrfz = true;\r\n\t\t\t},\r\n\t\t\ttrigger: { player: \"dying\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.storage.xinyongwomrfz;\r\n\t\t\t},\r\n\t\t\tprompt: \"【拥我】：是否将体力回复至1点\",\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.recoverTo(1);\r\n\t\t\t\tplayer.changeZhuanhuanji(\"xinyongwomrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: \"xinyongwomrfz_ying\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\t//阴\r\n\t\t\t\tying: {\r\n\t\t\t\t\taudio: \"xinyongwomrfz\",\r\n\t\t\t\t\ttrigger: { player: \"turnOverAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.isTurnedOver() && !player.storage.xinyongwomrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: \"【拥我】：你可以摸两张牌，然后选择一项：1.弃置你攻击范围内一名其他角色区域内各一张牌；2.对你攻击范围内的一名其他角色造成一点伤害。\",\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn current != player && get.attitude(player, current) < 0;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tvar choice = 0,\r\n\t\t\t\t\t\t\tmax = 0;\r\n\t\t\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\t\t\tvar target = game.players[i],\r\n\t\t\t\t\t\t\t\ttmp1 = 0;\r\n\t\t\t\t\t\t\tif (target == player) continue;\r\n\t\t\t\t\t\t\tif (!player.inRange(target)) continue;\r\n\t\t\t\t\t\t\tif (get.attitude(player, target) > 0) continue;\r\n\t\t\t\t\t\t\tif (target.countCards(\"e\") > 0) tmp1++;\r\n\t\t\t\t\t\t\tif (target.countCards(\"h\") > 0) tmp1++;\r\n\t\t\t\t\t\t\tif (target.countCards(\"j\") > 0) tmp1--;\r\n\t\t\t\t\t\t\tif (tmp1 > max) max = tmp1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current != player && get.attitude(player, current) < 0 && current.hp <= 1;\r\n\t\t\t\t\t\t\t}) ||\r\n\t\t\t\t\t\t\tmax < 2\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\tchoice = 1;\r\n\t\t\t\t\t\tplayer.draw(2);\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.chooseControl()\r\n\t\t\t\t\t\t\t.set(\"choiceList\", [\"弃置你攻击范围内一名其他角色区域内各一张牌\", \"对你攻击范围内的一名其他角色造成一点伤害\"])\r\n\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\treturn choice;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tevent.choice = choice;\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tevent.index = result.index;\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current != player && player.inRange(current);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t.chooseTarget(\"【拥我】:请选择一名其他角色\", true, function (rd, player, target) {\r\n\t\t\t\t\t\t\t\t\treturn target != player && player.inRange(target);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\t\t\t\t\tatt = get.attitude(player, target);\r\n\t\t\t\t\t\t\t\t\tif (event.choice == 0) {\r\n\t\t\t\t\t\t\t\t\t\tif (target.countCards(\"e\") > 0) return att < 0 && target.countCards(\"e\") > 0;\r\n\t\t\t\t\t\t\t\t\t\telse return att < 0;\r\n\t\t\t\t\t\t\t\t\t} else return get.damageEffect(target, player, player) > 0;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else event.finish();\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\t\t\tif (event.index == 0) {\r\n\t\t\t\t\t\t\t\tvar num = 0;\r\n\t\t\t\t\t\t\t\tif (target.countCards(\"h\")) num++;\r\n\t\t\t\t\t\t\t\tif (target.countCards(\"e\")) num++;\r\n\t\t\t\t\t\t\t\tif (target.countCards(\"j\")) num++;\r\n\t\t\t\t\t\t\t\tif (num) {\r\n\t\t\t\t\t\t\t\t\tplayer.discardPlayerCard(target, num, \"hej\", true).set(\"filterButton\", function (button) {\r\n\t\t\t\t\t\t\t\t\t\tfor (var i = 0; i < ui.selected.buttons.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (get.position(button.link) == get.position(ui.selected.buttons[i].link)) return false;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else target.damage(\"player\");\r\n\t\t\t\t\t\t\tplayer.logSkill(\"yongwomrfz\", target);\r\n\t\t\t\t\t\t\tplayer.changeZhuanhuanji(\"xinyongwomrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tdouzhengmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"【斗争】：是否失去所有体力并视为对\" + get.translation(event.player) + \"使用一张【杀】？\";\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.player != player;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (get.attitude(player, event.player) > 0) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\treturn card.name == \"tao\" || card.name == \"jiu\";\r\n\t\t\t\t\t}) > 0 || player.storage.xinyongwomrfz == true\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.loseHp(player.hp);\r\n\t\t\t\tplayer.useCard({ name: \"sha\", isCard: true }, false, trigger.player);\r\n\t\t\t\tplayer.turnOver();\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t},\r\n\t\t},\r\n\t\tshensuimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"loseHpEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.num > 1 && player.hujia < 1;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.changeHujia(trigger.num);\r\n\t\t\t},\r\n\t\t\tgroup: \"shensuimrfz_change\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tchange: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn !player.storage.xinyongwomrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.changeZhuanhuanji(\"xinyongwomrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//早露\r\n\t\tzhongxiemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.card.name != \"sha\" || typeof get.number(event.card) != \"number\") return false;\r\n\t\t\t\treturn event.target.countCards(\"h\") <= get.number(event.card);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.getParent().directHit.add(trigger.target);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\tif (tag == \"directHit_ai\") {\r\n\t\t\t\t\t\tif (arg.card.name == \"sha\" && typeof get.number(arg.card) == \"number\") return arg.card.name == \"sha\" && arg.target.countCards(\"h\") <= get.number(arg.card);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tattackRange: function (player, num) {\r\n\t\t\t\t\treturn (num += 2);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhongxiemrfz_damage\", \"zhongxiemrfz_wushi\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\taudio: \"zhongxiemrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { source: \"damageBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.hujia > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num += trigger.player.hujia;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\twushi: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event) {\r\n\t\t\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tlogTarget: \"target\",\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.target.addTempSkill(\"qinggang2\");\r\n\t\t\t\t\t\ttrigger.target.storage.qinggang2.add(trigger.card);\r\n\t\t\t\t\t\ttrigger.target.markSkill(\"qinggang2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tunequip_ai: true,\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t\t\tif (arg && arg.name == \"sha\") return true;\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\trusuimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageBegin2\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar num = 0,\r\n\t\t\t\t\ttarget = event.player;\r\n\t\t\t\tif (!event.card) return false;\r\n\t\t\t\tif (target.countCards(\"h\") >= target.hp) num++;\r\n\t\t\t\tif (target.countCards(\"e\") > 0) num++;\r\n\t\t\t\tif (target.getDamagedHp() <= target.hp) num++;\r\n\t\t\t\treturn event.player != player && event.card.name == \"sha\" && num != 0;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.player) < 0;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\tvar num = 0,\r\n\t\t\t\t\ttarget = event.player;\r\n\t\t\t\tif (target.countCards(\"h\") >= target.hp) num++;\r\n\t\t\t\tif (target.countCards(\"e\") > 0) num++;\r\n\t\t\t\tif (target.getDamagedHp() <= target.hp) num++;\r\n\t\t\t\tif (num < 3) return \"【入髓】：是否令\" + get.translation(target) + \"弃置\" + num + \"张牌\";\r\n\t\t\t\telse return \"【入髓】：是否令\" + get.translation(target) + \"弃置\" + num + \"张牌并令此杀伤害+1\";\r\n\t\t\t},\r\n\t\t\tprompt2: false,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar num = 0,\r\n\t\t\t\t\ttarget = trigger.player;\r\n\t\t\t\tif (target.countCards(\"h\") >= target.hp) num++;\r\n\t\t\t\tif (target.countCards(\"e\") > 0) num++;\r\n\t\t\t\tif (target.getDamagedHp() <= target.hp) num++;\r\n\t\t\t\ttarget.chooseToDiscard(\"he\", true, \"【入髓】：请弃置\" + num + \"张牌\", num);\r\n\t\t\t\tif (num == 3) trigger.num++;\r\n\t\t\t},\r\n\t\t},\r\n\t\t//琳琅诗怀雅\r\n\t\tzhijinmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\taiOrder: function (player, card, num) {\r\n\t\t\t\t\tif (typeof card == \"object\" && player.isPhaseUsing()) {\r\n\t\t\t\t\t\tvar evt = lib.skill.zhijinmrfz.getLastUsed(player);\r\n\t\t\t\t\t\tif (evt && evt.card && get.suit(evt.card) && get.suit(evt.card) == get.suit(card)) {\r\n\t\t\t\t\t\t\treturn num + 10;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmarktext: \"钱\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"钱\",\r\n\t\t\t\tcontent: \"共有#个钱\",\r\n\t\t\t},\r\n\t\t\taudio: 4,\r\n\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\tforced: true,\r\n\t\t\tgetLastUsed: function (player, event) {\r\n\t\t\t\tvar history = player.getAllHistory(\"useCard\");\r\n\t\t\t\tvar index;\r\n\t\t\t\tif (event) index = history.indexOf(event) - 1;\r\n\t\t\t\telse index = history.length - 1;\r\n\t\t\t\tif (index >= 0) return history[index];\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar evt = lib.skill.dcjianying.getLastUsed(player, event);\r\n\t\t\t\tif (!evt || !evt.card) return false;\r\n\t\t\t\treturn lib.suit.includes(get.suit(evt.card)) && get.suit(evt.card) == get.suit(event.card);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.addMark(\"zhijinmrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhijinmrfz_round\", \"zhijinmrfz_use\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tuse: {\r\n\t\t\t\t\taudio: \"zhijinmrfz\",\r\n\t\t\t\t\tenable: [\"chooseToUse\", \"chooseToRespond\"],\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar vcards = [],\r\n\t\t\t\t\t\t\tlist = [],\r\n\t\t\t\t\t\t\tmark = player.countMark(\"zhijinmrfz\");\r\n\t\t\t\t\t\tif (mark >= 1) list.push(\"sha\");\r\n\t\t\t\t\t\tif (mark >= 2) list.push(\"juedou\");\r\n\t\t\t\t\t\tif (mark >= 3) list.push(\"wuzhong\");\r\n\t\t\t\t\t\tif (mark >= 4) list.push(\"tao\");\r\n\t\t\t\t\t\tif (mark >= 5) list.push(\"wanjian\");\r\n\t\t\t\t\t\tif (!player.isPhaseUsing() || player.countMark(\"zhijinmrfz\") == 0 || list.length == 0) return false;\r\n\t\t\t\t\t\tfor (var name of list) {\r\n\t\t\t\t\t\t\tif (event.filterCard({ name: name, isCard: false }, player, event)) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tchooseButton: {\r\n\t\t\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\t\t\tvar vcards = [],\r\n\t\t\t\t\t\t\t\tlist = [],\r\n\t\t\t\t\t\t\t\tmark = player.countMark(\"zhijinmrfz\");\r\n\t\t\t\t\t\t\tif (mark >= 1) list.push(\"sha\");\r\n\t\t\t\t\t\t\tif (mark >= 2) list.push(\"juedou\");\r\n\t\t\t\t\t\t\tif (mark >= 3) list.push(\"wuzhong\");\r\n\t\t\t\t\t\t\tif (mark >= 4) list.push(\"tao\");\r\n\t\t\t\t\t\t\tif (mark >= 5) list.push(\"wanjian\");\r\n\t\t\t\t\t\t\tfor (var name of list) {\r\n\t\t\t\t\t\t\t\tconst card = { name: name };\r\n\t\t\t\t\t\t\t\tif (event.filterCard(card, player, event)) {\r\n\t\t\t\t\t\t\t\t\tif (name == \"sha\") {\r\n\t\t\t\t\t\t\t\t\t\tfor (var j of lib.inpile_nature) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (j != \"fire\") continue;\r\n\t\t\t\t\t\t\t\t\t\t\tvcards.push([\"基本\", \"\", \"sha\", j]);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} else if (get.type(name) == \"trick\") {\r\n\t\t\t\t\t\t\t\t\t\tvcards.push([\"锦囊\", \"\", name]);\r\n\t\t\t\t\t\t\t\t\t} else if (get.type(name) == \"basic\") {\r\n\t\t\t\t\t\t\t\t\t\tvcards.push([\"基本\", \"\", name]);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar dialog = ui.create.dialog(\"掷金\", [vcards, \"vcard\"], \"hidden\");\r\n\t\t\t\t\t\t\tdialog.direct = true;\r\n\t\t\t\t\t\t\treturn dialog;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcheck: function (button) {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tvar recover = 0,\r\n\t\t\t\t\t\t\t\tlose = 1,\r\n\t\t\t\t\t\t\t\tplayers = game.filterPlayer(),\r\n\t\t\t\t\t\t\t\tchoose = button.link[2];\r\n\t\t\t\t\t\t\tvar mark = player.countMark(\"zhijinmrfz\");\r\n\t\t\t\t\t\t\tif (mark >= 5) {\r\n\t\t\t\t\t\t\t\tif (player.hp < 3) return choose == \"tao\" ? 2 : -1;\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < players.length; i++) {\r\n\t\t\t\t\t\t\t\t\tvar att = get.attitude(player, players[i]);\r\n\t\t\t\t\t\t\t\t\tif (players[i].hp == 1 && get.damageEffect(players[i], player, player) > 0 && !players[i].hasSha()) {\r\n\t\t\t\t\t\t\t\t\t\treturn button.link[2] == \"juedou\" ? 2 : -1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (att < 0) lose++;\r\n\t\t\t\t\t\t\t\t\tif (att > 0 && players[i].hp > 2) lose = lose - 0.5;\r\n\t\t\t\t\t\t\t\t\tif (att > 0 && players[i].hp < 2) lose--;\r\n\t\t\t\t\t\t\t\t\tif (att > 2 && players[i] == 1) lose -= 3;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (lose > 0) return choose == \"wanjian\" ? 1 : -1;\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\t\t\t\treturn (card.name = \"sha\");\r\n\t\t\t\t\t\t\t\t\t}) >= player.getCardUsable(\"sha\") ||\r\n\t\t\t\t\t\t\t\t\tplayer.getCardUsable(\"sha\") == 0\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\treturn choose == \"wuzhong\" ? 1 : -1;\r\n\t\t\t\t\t\t\t\treturn choose == \"sha\" ? 1 : -1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (mark >= 4) {\r\n\t\t\t\t\t\t\t\tif (player.hp < 3) return choose == \"tao\" ? 1 : -1;\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < players.length; i++) {\r\n\t\t\t\t\t\t\t\t\tvar att = get.attitude(player, players[i]);\r\n\t\t\t\t\t\t\t\t\tif (players[i].hp == 1 && get.damageEffect(players[i], player, player) > 0 && !players[i].hasSha()) {\r\n\t\t\t\t\t\t\t\t\t\treturn button.link[2] == \"juedou\" ? 2 : -1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\t\t\t\treturn (card.name = \"sha\");\r\n\t\t\t\t\t\t\t\t\t}) >= player.getCardUsable(\"sha\") ||\r\n\t\t\t\t\t\t\t\t\tplayer.getCardUsable(\"sha\") == 0\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\treturn choose == \"wuzhong\" ? 1 : -1;\r\n\t\t\t\t\t\t\t\treturn choose == \"sha\" ? 1 : -1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (mark >= 3) {\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < players.length; i++) {\r\n\t\t\t\t\t\t\t\t\tvar att = get.attitude(player, players[i]);\r\n\t\t\t\t\t\t\t\t\tif (players[i].hp == 1 && get.damageEffect(players[i], player, player) > 0 && !players[i].hasSha()) {\r\n\t\t\t\t\t\t\t\t\t\treturn button.link[2] == \"juedou\" ? 2 : -1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\t\t\t\treturn (card.name = \"sha\");\r\n\t\t\t\t\t\t\t\t\t}) >= player.getCardUsable(\"sha\") ||\r\n\t\t\t\t\t\t\t\t\tplayer.getCardUsable(\"sha\") == 0\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\treturn choose == \"wuzhong\" ? 1 : -1;\r\n\t\t\t\t\t\t\t\treturn choose == \"sha\" ? 1 : -1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (mark >= 2) {\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < players.length; i++) {\r\n\t\t\t\t\t\t\t\t\tvar att = get.attitude(player, players[i]);\r\n\t\t\t\t\t\t\t\t\tif (players[i].hp == 1 && get.damageEffect(players[i], player, player) > 0 && !players[i].hasSha()) {\r\n\t\t\t\t\t\t\t\t\t\treturn button.link[2] == \"juedou\" ? 2 : -1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn choose == \"sha\" ? 1 : -1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn choose == \"sha\" ? 1 : -1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tfilterCard: () => true,\r\n\t\t\t\t\t\t\t\tselectCard: 1,\r\n\t\t\t\t\t\t\t\tviewAs: {\r\n\t\t\t\t\t\t\t\t\tname: links[0][2],\r\n\t\t\t\t\t\t\t\t\tnature: links[0][3],\r\n\t\t\t\t\t\t\t\t\tisCard: false,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tposition: \"he\",\r\n\t\t\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t\t\t\tprecontent: function () {\r\n\t\t\t\t\t\t\t\t\tvar card = event.result.card.name,\r\n\t\t\t\t\t\t\t\t\t\tmark = player.countMark(\"zhijinmrfz\");\r\n\t\t\t\t\t\t\t\t\tif (card == \"sha\") {\r\n\t\t\t\t\t\t\t\t\t\tif (mark == 1) player.draw();\r\n\t\t\t\t\t\t\t\t\t\tplayer.removeMark(\"zhijinmrfz\");\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (card == \"juedou\") {\r\n\t\t\t\t\t\t\t\t\t\tif (mark == 2) player.draw();\r\n\t\t\t\t\t\t\t\t\t\tplayer.removeMark(\"zhijinmrfz\", 2);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (card == \"wuzhong\") {\r\n\t\t\t\t\t\t\t\t\t\tif (mark == 3) player.draw();\r\n\t\t\t\t\t\t\t\t\t\tplayer.removeMark(\"zhijinmrfz\", 3);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (card == \"tao\") {\r\n\t\t\t\t\t\t\t\t\t\tif (mark == 4) player.draw();\r\n\t\t\t\t\t\t\t\t\t\tplayer.removeMark(\"zhijinmrfz\", 4);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (card == \"wanjian\") {\r\n\t\t\t\t\t\t\t\t\t\tif (mark == 5) player.draw();\r\n\t\t\t\t\t\t\t\t\t\tplayer.removeMark(\"zhijinmrfz\", 5);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\t\t\treturn \"【掷金】：视为使用一张\" + (links[0][3] == undefined ? \"\" : \"火\") + \"【\" + get.translation(links[0][2]) + \"】\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\trespondSha: true,\r\n\t\t\t\t\t\tfireAttack: true,\r\n\t\t\t\t\t\torder: function (item, player) {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tvar event = _status.event;\r\n\t\t\t\t\t\t\tvar mark = player.countMark(\"zhijinmrfz\");\r\n\t\t\t\t\t\t\tif (event.filterCard({ name: \"tao\" }, player, event) && mark >= 4) {\r\n\t\t\t\t\t\t\t\treturn 10;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (event.filterCard({ name: \"wuzhong\" }, player, event) && mark >= 3) {\r\n\t\t\t\t\t\t\t\treturn 13;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (event.filterCard({ name: \"juedou\" }, player, event) && mark >= 2) {\r\n\t\t\t\t\t\t\t\treturn 4.95;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (event.filterCard({ name: \"sha\" }, player, event) && mark >= 1) {\r\n\t\t\t\t\t\t\t\treturn 2.95;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t\t\treturn player.countMark(\"zhijinmrfz\") > 0;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tround: {\r\n\t\t\t\t\taudio: \"zhijinmrfz\",\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addMark(\"zhijinmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tmianzaimrfz: {\r\n\t\t\tmarkimage: \"extension/WhichWay/image/skill/mianzaimrfz_money.png\",\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"累计点数：#\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"dying\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar cards = game.cardsGotoOrdering(get.cards(6)).cards,\r\n\t\t\t\t\tnum = 0;\r\n\t\t\t\tfor (var i = 0; i < cards.length; i++) {\r\n\t\t\t\t\tnum = num + cards[i].number;\r\n\t\t\t\t}\r\n\t\t\t\tplayer.showCards(cards, get.translation(player) + \"发动了【免灾】</br>点数之和为：\" + num);\r\n\t\t\t\tif (num <= player.countMark(\"mianzaimrfz\")) {\r\n\t\t\t\t\tplayer.recoverTo(3);\r\n\t\t\t\t\tplayer.drawTo(3);\r\n\t\t\t\t\tplayer.removeMark(\"mianzaimrfz\", player.countMark(\"mianzaimrfz\"), false);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"mianzaimrfz_number\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tnumber: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.cards && event.cards.length == 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar num = trigger.card.number;\r\n\t\t\t\t\t\tplayer.addMark(\"mianzaimrfz\", num, false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//圣约送葬人\r\n\t\tchongdanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tfrequent: true,\r\n\t\t\tsubfrequent: [\"chongdanmrfz_player\"],\r\n\t\t\ttrigger: {\r\n\t\t\t\tsource: \"damageSource\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.countCards(\"h\") == 0 && player.getDamagedHp() == 0) return false;\r\n\t\t\t\treturn !player.storage.chongdanmrfz;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.storage.chongdanmrfz = true;\r\n\t\t\t\tif (player.getDamagedHp() == 0) player.draw(player.hp);\r\n\t\t\t\telse {\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.chooseBool(\"【铳弹】：是否摸\" + player.hp + \"张牌？\")\r\n\t\t\t\t\t\t.set(\"prompt2\", \"选择取消则为回复\" + player.countCards(\"h\") + \"点体力\")\r\n\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tvar hp = player.hp;\r\n\t\t\t\t\t\t\tif (player.countCards(\"h\") == 0) return 0;\r\n\t\t\t\t\t\t\tif (hp < 2) return 1;\r\n\t\t\t\t\t\t\tif (player.countCards(\"j\") > 0) return 1;\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tplayer.isPhaseUsing() &&\r\n\t\t\t\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\t\t\treturn card.name == \"tao\";\r\n\t\t\t\t\t\t\t\t}) >= player.getDamagedHp()\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tplayer.draw(player.hp);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.recover(player.countCards(\"h\"));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tcardEnabled: function (card, player) {\r\n\t\t\t\t\tif (player.countMark(\"chongdanmrfz_lim\") >= 2 * player.maxHp) return false;\r\n\t\t\t\t},\r\n\t\t\t\tcardUsable: function (card, player) {\r\n\t\t\t\t\tif (player.countMark(\"chongdanmrfz_lim\") >= 2 * player.maxHp) return false;\r\n\t\t\t\t},\r\n\t\t\t\tcardSavable: function (card, player) {\r\n\t\t\t\t\tif (player.countMark(\"chongdanmrfz_lim\") >= 2 * player.maxHp) return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tpresha: true,\r\n\t\t\t\tpretao: true,\r\n\t\t\t},\r\n\t\t\tgroup: [\"chongdanmrfz_clear\", \"chongdanmrfz_player\", \"chongdanmrfz_lim\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tlim: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"已使用：#张牌\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCard\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.countMark(\"chongdanmrfz_lim\") < 2 * player.maxHp;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addMark(\"chongdanmrfz_lim\", false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (player.storage.chongdanmrfz_player) player.storage.chongdanmrfz_player = false;\r\n\t\t\t\t\t\tif (player.storage.chongdanmrfz) player.storage.chongdanmrfz = false;\r\n\t\t\t\t\t\tif (player.countMark(\"chongdanmrfz_lim\") > 0) player.removeMark(\"chongdanmrfz_lim\", player.countMark(\"chongdanmrfz_lim\"), false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tplayer: {\r\n\t\t\t\t\taudio: \"chongdanmrfz\",\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"damageEnd\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.countCards(\"h\") == 0 && player.getDamagedHp() == 0) return false;\r\n\t\t\t\t\t\treturn !player.storage.chongdanmrfz_player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer.storage.chongdanmrfz_player = true;\r\n\t\t\t\t\t\tif (player.getDamagedHp() == 0) player.draw(player.hp);\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t.chooseBool(\"【铳弹】：是否摸\" + player.hp + \"张牌？\")\r\n\t\t\t\t\t\t\t\t.set(\"prompt2\", \"选择取消则为回复\" + player.countCards(\"h\") + \"点体力\")\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\t\tvar hp = player.hp;\r\n\t\t\t\t\t\t\t\t\tif (player.countCards(\"h\") == 0) return 0;\r\n\t\t\t\t\t\t\t\t\tif (hp < 3) return 1;\r\n\t\t\t\t\t\t\t\t\tif (player.countCards(\"j\") > 0) return 1;\r\n\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\tplayer.isPhaseUsing() &&\r\n\t\t\t\t\t\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\t\t\t\t\treturn card.name == \"tao\";\r\n\t\t\t\t\t\t\t\t\t\t}) >= player.getDamagedHp()\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tplayer.draw(player.hp);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tplayer.recover(player.countCards(\"h\"));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\ttianxuanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\treturn \"已有的花色：\" + get.translation(player.storage.tianxuanmrfz);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCard1\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn get.tag(event.card, \"damage\") > 0 && player.isPhaseUsing();\r\n\t\t\t},\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.tianxuanmrfz = [\"heart\"];\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\tvar list = player.storage.tianxuanmrfz;\r\n\t\t\t\treturn \"【天选】：是否进行判定，若为\" + get.translation(list) + \",则\" + get.translation(event.card) + \"结算两次\";\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar list = player.storage.tianxuanmrfz;\r\n\t\t\t\tplayer.judge(function (card) {\r\n\t\t\t\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\t\t\t\tvar suit = get.suit(card);\r\n\t\t\t\t\t\tif (suit == list[i]) return -4;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}).judge2 = function (result) {\r\n\t\t\t\t\treturn result.bool == false ? true : false;\r\n\t\t\t\t};\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool == false) {\r\n\t\t\t\t\ttrigger.effectCount++;\r\n\t\t\t\t\tplayer.storage.tianxuanmrfz = [];\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar suit = player.storage.tianxuanmrfz,\r\n\t\t\t\t\t\tlist = [];\r\n\t\t\t\t\tfor (i of lib.suit) {\r\n\t\t\t\t\t\tif (suit.includes(i)) continue;\r\n\t\t\t\t\t\tlist.push(i);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t.set(\"prompt\", \"【天选】：请选择为[]内增加一个花色\")\r\n\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\tif (list.includes(\"diamond\")) return \"diamond\";\r\n\t\t\t\t\t\t\treturn list.randomGet();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (result.control) {\r\n\t\t\t\t\tplayer.storage.tianxuanmrfz.add(result.control);\r\n\t\t\t\t\tplayer.storage.tianxuanmrfz.sort();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tshengcaimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCard2\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!get.tag(event.card, \"damage\") || !player.isPhaseUsing()) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.getHistory(\"useCard\", function (evt) {\r\n\t\t\t\t\t\treturn get.tag(evt.card, \"damage\") > 0;\r\n\t\t\t\t\t}).length > 1\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"【圣裁】：是否令\" + get.translation(event.card) + \"伤害基数+1？\";\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tif (!trigger.baseDamage) trigger.baseDamage = 1;\r\n\t\t\t\ttrigger.baseDamage++;\r\n\t\t\t},\r\n\t\t\tgroup: \"shengcaimrfz_damage\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tgame.countPlayer(current => {\r\n\t\t\t\t\t\t\t\treturn current != player && current.getHistory(\"damage\").length > 0;\r\n\t\t\t\t\t\t\t}) > 0\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tvar next = player.chooseTarget([1, Infinity], \"【圣裁】：你可以对本回合造成过伤害的其他角色造成一点伤害\", function (card, player, target) {\r\n\t\t\t\t\t\t\treturn target != player && target.getHistory(\"damage\").length > 0;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tnext.ai = function (target) {\r\n\t\t\t\t\t\t\treturn get.attitude(player, target) < 0;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\tplayer.logSkill(\"shengcaimrfz\");\r\n\t\t\t\t\t\t\tfor (i of result.targets) {\r\n\t\t\t\t\t\t\t\ti.damage(\"player\");\r\n\t\t\t\t\t\t\t\tplayer.line(i);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//澄闪废案\r\n\t\tfuxiemrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\ttargetInRange: function (card, player, target) {\r\n\t\t\t\t\tif (target.hasMark(\"fuxiemrfzx\")) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\treturn (num += player.countMark(\"fuxiemrfzx\"));\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tlocked: false,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.addMark(\"fuxiemrfzx\", 2);\r\n\t\t\t},\r\n\t\t\tgroup: [\"fuxiemrfz_thu\", \"fuxiemrfz_give\", \"fuxiemrfz_get\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tthu: {\r\n\t\t\t\t\ttrigger: { source: \"damageBefore\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.nature != \"thunder\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t\ttrigger.player.damage(trigger.num, player, \"thunder\");\r\n\t\t\t\t\t\tplayer.logSkill(\"fuxiemrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tgive: {\r\n\t\t\t\t\taudio: \"fuxiemrfz\",\r\n\t\t\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!player.isPhaseUsing()) return false;\r\n\t\t\t\t\t\tif (event.targets.length > 1) return false;\r\n\t\t\t\t\t\treturn player.countMark(\"fuxiemrfzx\") > 0 && event.target != player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: function (event, player) {\r\n\t\t\t\t\t\treturn \"【浮械】：是否令\" + get.translation(event.target) + \"获得一个‘浮标’(剩余‘浮标’数：\" + player.countMark(\"fuxiemrfzx\") + \")\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\tvar att = get.attitude(player, event.target);\r\n\t\t\t\t\t\tif (att > 2) return false;\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t!event.target.hasMark(\"fuxiemrfzx\") ||\r\n\t\t\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current != player && att < 2 && !current.hasMark(\"fuxiemrfzx\");\r\n\t\t\t\t\t\t\t}) < 2\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.target.addMark(\"fuxiemrfzx\");\r\n\t\t\t\t\t\tplayer.removeMark(\"fuxiemrfzx\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tget: {\r\n\t\t\t\t\taudio: \"fuxiemrfz\",\r\n\t\t\t\t\tenable: \"phaseUse\",\r\n\t\t\t\t\tfilterCard: function (card) {\r\n\t\t\t\t\t\treturn get.suit(card) == \"diamond\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tselectCard: function (event, player) {\r\n\t\t\t\t\t\tvar num = game.getGlobalmark(\"fuxiemrfzx\");\r\n\t\t\t\t\t\treturn [1, 4 - num];\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (game.getGlobalmark(\"fuxiemrfzx\") > 3) return false;\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tplayer.countCards(\"he\", function (card) {\r\n\t\t\t\t\t\t\t\treturn get.suit(card) == \"diamond\";\r\n\t\t\t\t\t\t\t}) > 0\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck: function (card) {\r\n\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tposition: \"he\",\r\n\t\t\t\t\tprompt: function (event, player) {\r\n\t\t\t\t\t\treturn \"【浮械】：你可以弃置任意张♦的牌并获得等量的‘浮标’\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addMark(\"fuxiemrfzx\", cards.length);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\torder: 13,\r\n\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tfuxiemrfzx: {\r\n\t\t\tcharlotte: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"当前有#个‘浮标’\",\r\n\t\t\t},\r\n\t\t},\r\n\t\tdianyongmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn game.getGlobalmark(\"fuxiemrfzx\") >= 4;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tevent.marknum = player.countMark(\"fuxiemrfzx\");\r\n\t\t\t\tplayer.removeAllmark(\"fuxiemrfzx\");\r\n\t\t\t\tevent.num = 0;\r\n\t\t\t\tplayer.addTempSkill(\"dianyongmrfz_extra\", \"phaseEnd\");\r\n\t\t\t\tplayer.addTempSkill(\"dianyongmrfz_nolim\", \"phaseEnd\");\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (event.num < event.marknum) {\r\n\t\t\t\t\tevent.num++;\r\n\t\t\t\t\tvar next = player.chooseTarget(true, \"【电涌】：请选择一名其他角色，为其分配一个‘浮标’\", function (card, player, target) {\r\n\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.ai = function (target) {\r\n\t\t\t\t\t\tvar att = get.attitude(player, target);\r\n\t\t\t\t\t\tif (!target.hasMark(\"fuxiemrfzx\")) return att < 2;\r\n\t\t\t\t\t\treturn att < 2;\r\n\t\t\t\t\t};\r\n\t\t\t\t} else {\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (result.targets) {\r\n\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\ttarget.addMark(\"fuxiemrfzx\");\r\n\t\t\t\t\tevent.goto(1);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\textra: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCard2\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.targets.length > 1) return false;\r\n\t\t\t\t\t\tif (event.card.name == \"wuzhong\") return false;\r\n\t\t\t\t\t\tif (event.card.name != \"sha\" && get.type(event.card) != \"trick\") return false;\r\n\t\t\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn !event.targets.includes(current) && player.canUse(event.card, current) && current.hasMark(\"fuxiemrfzx\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.chooseTarget([1, Infinity], get.prompt(\"dianyongmrfz\"), \"你可以额外指定任意个有‘浮标’标记的角色令其成为\" + get.translation(trigger.card) + \"的目标\", function (card, player, target) {\r\n\t\t\t\t\t\t\t\treturn !_status.event.sourcex.includes(target) && player.canUse(_status.event.card, target) && target.hasMark(\"fuxiemrfzx\") && target != player;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"sourcex\", trigger.targets)\r\n\t\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\treturn get.effect(target, _status.event.card, player, player);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"card\", trigger.card);\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tif (!event.isMine() && !event.isOnline()) game.delayx();\r\n\t\t\t\t\t\t\tevent.target = result.targets;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tfor (var i = 0; i < event.target.length; i++) {\r\n\t\t\t\t\t\t\tvar target = event.target[i];\r\n\t\t\t\t\t\t\tplayer.line(target);\r\n\t\t\t\t\t\t\ttrigger.targets.push(target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tplayer.logSkill(\"dianyongmrfz\");\r\n\t\t\t\t\t\tvar cards = trigger.card;\r\n\t\t\t\t\t\tif (cards.name == \"sha\") {\r\n\t\t\t\t\t\t\tplayer.chooseTarget(true, \"【电涌】：请移除场上一个‘浮标’标记\", function (card, player, target) {\r\n\t\t\t\t\t\t\t\treturn target != player && target.hasMark(\"fuxiemrfzx\");\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else event.finish();\r\n\t\t\t\t\t\t(\"step 3\");\r\n\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\tresult.targets[0].removeMark(\"fuxiemrfzx\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tnolim: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsableTarget: function (card, player, target) {\r\n\t\t\t\t\t\t\tif (target.hasMark(\"fuxiemrfzx\") && card.name == \"sha\") return true;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshizhunmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\tcharlotte: true,\r\n\t\t\ttrigger: { global: \"phaseZhunbeiBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.player != player && event.player.hasMark(\"fuxiemrfzx\");\r\n\t\t\t},\r\n\t\t\tcallback: function () {\r\n\t\t\t\tfor (i of game.players) {\r\n\t\t\t\t\tif (i.hasSkill(\"shizhunmrfz\")) {\r\n\t\t\t\t\t\tvar us = i;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (event.judgeResult.color == \"black\") {\r\n\t\t\t\t\tplayer.damage(\"thunder\", us);\r\n\t\t\t\t\tplayer.removeMark(\"fuxiemrfzx\");\r\n\t\t\t\t} else us.gain(card, \"gain2\");\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.player\r\n\t\t\t\t\t.judge(function (card) {\r\n\t\t\t\t\t\tif (get.color(card) == \"red\") return -4;\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"callback\", lib.skill.shizhunmrfz.callback);\r\n\t\t\t},\r\n\t\t},\r\n\t\t//涤火杰西卡\r\n\t\tyijiemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.countCards(\"he\") == 0) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && current.countCards(\"h\") > 0;\r\n\t\t\t\t\t}) > 0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player;\r\n\t\t\t},\r\n\t\t\ttargetprompt: [\"被出杀(A)\", \"出杀(B)\", \"出杀(B)\"],\r\n\t\t\tselectTarget: [2, 3],\r\n\t\t\tmultitarget: true,\r\n\t\t\tline: false,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tevent.num = 0;\r\n\t\t\t\ttargets.push(player);\r\n\t\t\t\tvar frsTargets = targets[0],\r\n\t\t\t\t\tsecTargets = targets.slice(1);\r\n\t\t\t\tfor (var i of secTargets) i.line(frsTargets);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tvar frsTargets = targets[0],\r\n\t\t\t\t\tsecTargets = targets.slice(1);\r\n\t\t\t\tif (event.num < secTargets.length) {\r\n\t\t\t\t\tsecTargets[event.num].storage.yijiemrfz = frsTargets;\r\n\t\t\t\t\tsecTargets[event.num].addTempSkill(\"yijiemrfz_gain\", \"shaMiss\");\r\n\t\t\t\t\tsecTargets[event.num]\r\n\t\t\t\t\t\t.chooseToUse(\r\n\t\t\t\t\t\t\tfunction (card, player, event) {\r\n\t\t\t\t\t\t\t\tif (get.name(card) != \"sha\") return false;\r\n\t\t\t\t\t\t\t\treturn lib.filter.filterCard.apply(this, arguments);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\"【义劫】：是否对\" + get.translation(frsTargets) + \"使用一张杀？\"\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\t\tif (target != _status.event.frsTargets && !ui.selected.targets.includes(_status.event.frsTargets)) return false;\r\n\t\t\t\t\t\t\treturn lib.filter.targetEnabled.apply(this, arguments);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"addCount\", false)\r\n\t\t\t\t\t\t.set(\"frsTargets\", frsTargets);\r\n\t\t\t\t\tevent.num++;\r\n\t\t\t\t\tevent.redo();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 4.1,\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tif (ui.selected.targets.length == 0) {\r\n\t\t\t\t\t\t\treturn -3;\r\n\t\t\t\t\t\t} else return 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t//group:'tuohuangmrfz',\r\n\t\t\tsubSkill: {\r\n\t\t\t\tgain: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tsource: \"damageEnd\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: function (player) {\r\n\t\t\t\t\t\tdelete player.storage.yijiemrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\" && event.player == player.storage.yijiemrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (trigger.player.countCards(\"he\") > 0) player.gainPlayerCard(trigger.player, true, \"he\");\r\n\t\t\t\t\t\telse trigger.player.damage(\"player\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"yijiemrfz_gain\");\r\n\t\t\t\t\t\tdelete player.storage.yijiemrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tfuhuangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tderivation: [\"tuohuangmrfz\", \"weihumrfz\"],\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationColor: \"fire\",\r\n\t\t\tunique: true,\r\n\t\t\tjuexingji: true,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"gainAfter\",\r\n\t\t\t\tglobal: \"loseAsyncAfter\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"fuhuangmrfz_mark\") >= 2;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.removeMark(\"fuhuangmrfz_mark\", player.countMark(\"fuhuangmrfz_mark\"), false);\r\n\t\t\t\tplayer.awakenSkill(\"fuhuangmrfz\");\r\n\t\t\t\tplayer.removeSkill(\"yijiemrfz\");\r\n\t\t\t\tplayer.addSkill(\"tuohuangmrfz\");\r\n\t\t\t\tplayer.addSkill(\"weihumrfz\");\r\n\t\t\t\tplayer.draw(2);\r\n\t\t\t\tplayer.changeHujia(1);\r\n\t\t\t\tplayer.loseMaxHp(1);\r\n\t\t\t},\r\n\t\t\tgroup: \"fuhuangmrfz_mark\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tmark: {\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"已获得#张牌\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"gainAfter\",\r\n\t\t\t\t\t\tglobal: \"loseAsyncAfter\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.countMark(\"fuhuangmrfz_mark\") >= 2) return false;\r\n\t\t\t\t\t\treturn event.getg(player).length && event.getParent(\"phaseDraw\").player != player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addMark(\"fuhuangmrfz_mark\", false, trigger.num);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\ttuohuangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\treturn current.countCards(\"he\") > 0;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tmultitarget: true,\r\n\t\t\tmultiline: true,\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tselectTarget: [1, 3],\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar num = 4 - targets.length;\r\n\t\t\t\tvar cards = game.cardsGotoOrdering(get.cards(num)).cards;\r\n\t\t\t\tevent.cards = cards;\r\n\t\t\t\tplayer.showCards(event.cards, get.translation(player) + \"发动了【拓荒】\");\r\n\t\t\t\tevent.num = 0;\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (event.num < targets.length) {\r\n\t\t\t\t\tvar suit = [];\r\n\t\t\t\t\tfor (var i of event.cards) {\r\n\t\t\t\t\t\tif (!suit.includes(get.suit(i)) && lib.suit.includes(get.suit(i))) suit.push(get.suit(i));\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttargets[event.num]\r\n\t\t\t\t\t\t.chooseToDiscard(\"h\", \"【拓荒】：你可以弃置\" + get.translation(suit) + \"花色的手牌并摸等量+1张牌\", [1, Infinity], function (card) {\r\n\t\t\t\t\t\t\tvar suitcard = get.suit(card);\r\n\t\t\t\t\t\t\tif (suit.includes(\"diamond\") && suitcard == \"diamond\") return true;\r\n\t\t\t\t\t\t\tif (suit.includes(\"heart\") && suitcard == \"heart\") return true;\r\n\t\t\t\t\t\t\tif (suit.includes(\"spade\") && suitcard == \"spade\") return true;\r\n\t\t\t\t\t\t\tif (suit.includes(\"club\") && suitcard == \"club\") return true;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} else event.finish();\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (result.cards) {\r\n\t\t\t\t\ttargets[event.num].draw(1 + result.cards.length);\r\n\t\t\t\t}\r\n\t\t\t\tevent.num++;\r\n\t\t\t\tevent.goto(1);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tthreaten: 1.35,\r\n\t\t\t\torder: 1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\ttarget: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tweihumrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\tif (player.hujia > 0) return num + 1;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.hujia < 1;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.changeHujia();\r\n\t\t\t},\r\n\t\t\tgroup: \"weihumrfz_give\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tgive: {\r\n\t\t\t\t\ttrigger: { player: \"phaseUseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hujia > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer.chooseTarget([1, player.hujia + 1], \"【卫护】：你可以失去至少一点护甲，然后令等量+1名没有护甲的其他角色获得一点护甲\", function (card, player, target) {\r\n\t\t\t\t\t\t\treturn target != player && target.hujia < 1;\r\n\t\t\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\t\t\treturn get.attitude(player, target) > 2;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\tplayer.logSkill(\"weihumrfz\");\r\n\t\t\t\t\t\t\tplayer.changeHujia(Math.min(-1, -result.targets.length + 1));\r\n\t\t\t\t\t\t\tfor (i of result.targets) {\r\n\t\t\t\t\t\t\t\ti.changeHujia();\r\n\t\t\t\t\t\t\t\tplayer.line(i);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//提丰 小台风\r\n\t\truiyamrfz: {\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\treturn \"上一个成为一唯一目标的【杀】的角色：\" + (player.storage.ruiyamrfz ? get.translation(player.storage.ruiyamrfz) : \"无\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCard2\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.cards && event.card.name == \"sha\" && event.targets && event.targets.length == 1 && event.targets[0] == player.storage.ruiyamrfz;\r\n\t\t\t}, //QQQ\r\n\t\t\tprompt: \"【锐牙】:是否令此杀伤害+1？\",\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.targets[0]) < 2;\r\n\t\t\t}, //QQQ\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar target = trigger.targets[0];\r\n\t\t\t\ttarget.addTempSkill(\"ruiyamrfz_dam\");\r\n\t\t\t\ttarget.storage.ruiyamrfz_dam = {\r\n\t\t\t\t\tcard: trigger.card,\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tgroup: \"ruiyamrfz_mark\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tmark: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!event.targets || event.targets > 1) return false;\r\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.ruiyamrfz = trigger.target;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdam: {\r\n\t\t\t\t\tonremove: function (player) {\r\n\t\t\t\t\t\tdelete player.storage.ruiyamrfz_dam;\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"damageBegin3\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar info = player.storage.ruiyamrfz_dam;\r\n\t\t\t\t\t\treturn event.card && event.card == info.card;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshouliemrfz: {\r\n\t\t\tmarktext: \"矢\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"矢\",\r\n\t\t\t\tcontent: \"expansion\",\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t},\r\n\t\t\tonremove: function (player, skill) {\r\n\t\t\t\tvar cards = player.getExpansions(skill);\r\n\t\t\t\tif (cards.length) player.loseToDiscardpile(cards);\r\n\t\t\t},\r\n\t\t\taudio: 4,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.getExpansions(\"shouliemrfz\").length >= 3) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.countCards(\"he\", function (card) {\r\n\t\t\t\t\t\treturn get.tag(card, \"damage\") > 0;\r\n\t\t\t\t\t}) > 0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tfilterCard: function (card) {\r\n\t\t\t\treturn get.tag(card, \"damage\");\r\n\t\t\t},\r\n\t\t\tselectCard: function () {\r\n\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\treturn [1, 3 - player.getExpansions(\"shouliemrfz\").length];\r\n\t\t\t},\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\treturn 10 - get.value(card) || card.name == \"sha\";\r\n\t\t\t},\r\n\t\t\tprompt: \"【狩猎】：将任意张带有伤害标签的牌置于你的武将牌上，称之为‘矢’\",\r\n\t\t\tdiscard: false,\r\n\t\t\tlose: false,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.addToExpansion(cards, player, \"giveAuto\").gaintag.add(\"shouliemrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"shouliemrfz_use\", \"shouliemrfz_shasha\"],\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\tthreaten: function () {\r\n\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\treturn 1.4 + player.getExpansions(\"shouliemrfz\").length * 0.2;\r\n\t\t\t\t},\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\tuse: {\r\n\t\t\t\t\taudio: \"shouliemrfz\",\r\n\t\t\t\t\tenable: [\"chooseToRespond\", \"chooseToUse\"],\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.getExpansions(\"shouliemrfz\").length < 1 || player.hasSkill(\"shouliemrfz_ban\")) return false;\r\n\t\t\t\t\t\treturn event.filterCard({ name: \"sha\" }, player, event);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tchooseButton: {\r\n\t\t\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\t\t\treturn ui.create.dialog(\"狩猎\", player.getExpansions(\"shouliemrfz\"), \"hidden\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tviewAs: {\r\n\t\t\t\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\t\t\t\tnature: \"stab\",\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcards: links,\r\n\t\t\t\t\t\t\t\tselectCard: -1,\r\n\t\t\t\t\t\t\t\tposition: \"x\",\r\n\t\t\t\t\t\t\t\tfilterCard: card => lib.skill[\"shouliemrfz_use_backup\"].cards.includes(card),\r\n\t\t\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t\t\t\tprecontent: function () {\r\n\t\t\t\t\t\t\t\t\tplayer.addTempSkill(\"shouliemrfz_ban\", \"phaseEnd\");\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\t\t\treturn \"【狩猎】：将\" + get.translation(links.name) + \"当做一张刺【杀】使用或打出\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\torder: 2.95,\r\n\t\t\t\t\t\trespondSha: true,\r\n\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t\t\tif (player.getExpansions(\"shouliemrfz\").length < 1) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tshasha: {\r\n\t\t\t\t\tmarkimage: \"extension/WhichWay/image/skill/taifengmrfz.png\",\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\"你成为了\" +\r\n\t\t\t\t\t\t\t\tget.translation(\r\n\t\t\t\t\t\t\t\t\tgame.findPlayer(function (current) {\r\n\t\t\t\t\t\t\t\t\t\treturn current != player && current.hasSkill(\"shouliemrfz\");\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t) +\r\n\t\t\t\t\t\t\t\t\"的猎物\"\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\taudio: \"shouliemrfz\",\r\n\t\t\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.getHistory(\"skipped\").includes(\"phaseUse\") || player.getHistory(\"skipped\").includes(\"phaseDiscard\")) return false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tplayer.countCards(\"j\", function (card) {\r\n\t\t\t\t\t\t\t\treturn get.name(card) == \"lebu\";\r\n\t\t\t\t\t\t\t}) > 0 &&\r\n\t\t\t\t\t\t\tplayer.countCards(\"h\") + 2 > player.getHandcardLimit()\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tplayer.getExpansions(\"shouliemrfz\").length +\r\n\t\t\t\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\t\t\treturn get.name(card) == \"sha\";\r\n\t\t\t\t\t\t\t\t}) >\r\n\t\t\t\t\t\t\t2\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: \"【狩猎】：是否跳过出牌阶段和弃牌阶段，然后选择一名其他角色，直到你的下个回合开始时，每个其他角色的结束阶段，你都可以对其使用一张【杀】？\",\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer.skip(\"phaseUse\");\r\n\t\t\t\t\t\tplayer.skip(\"phaseDiscard\");\r\n\t\t\t\t\t\tplayer.addSkill(\"shouliemrfz_usesha\");\r\n\t\t\t\t\t\tplayer.chooseTarget(\r\n\t\t\t\t\t\t\t\"【狩猎】：请选择一名其他角色\",\r\n\t\t\t\t\t\t\tfunction (card, player, target) {\r\n\t\t\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t).ai = function (target) {\r\n\t\t\t\t\t\t\treturn get.attitude(_status.event.player, target) < 0;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\t\t\tplayer.storage.shouliemrfz_shasha = target;\r\n\t\t\t\t\t\t\ttarget.addMark(\"shouliemrfz_shasha\", false);\r\n\t\t\t\t\t\t\tplayer.line(target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\texpose: 0.1,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\trem: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\t\tif (current.hasMark(\"shouliemrfz_shasha\")) current.removeAllmark(\"shouliemrfz_shasha\", false);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tplayer.removeSkill(\"shouliemrfz_usesha\");\r\n\t\t\t\t\t\tdelete player.storage.shouliemrfz_shasha;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tusesha: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"phaseJieshuBegin\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.player == player) return false;\r\n\t\t\t\t\t\treturn event.player.isIn() && lib.filter.targetEnabled({ name: \"sha\" }, player, event.player) && (player.hasSha() || _status.connectMode || player.getExpansions(\"shouliemrfz\").length > 0);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar target = game.findPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn current != player && player.storage.shouliemrfz_shasha == current;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.chooseToUse(\r\n\t\t\t\t\t\t\t\tfunction (card, player, event) {\r\n\t\t\t\t\t\t\t\t\tif (get.name(card) != \"sha\") return false;\r\n\t\t\t\t\t\t\t\t\treturn lib.filter.filterCard.apply(this, arguments);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\"【狩猎】：是否对\" + get.translation(target) + \"使用一张【杀】？\"\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t.set(\"logSkill\", \"shouliemrfz\")\r\n\t\t\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\t\t\tif (target != _status.event.sourcex && !ui.selected.targets.includes(_status.event.sourcex)) return false;\r\n\t\t\t\t\t\t\t\treturn lib.filter.targetEnabled.apply(this, arguments);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"sourcex\", target);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgroup: \"shouliemrfz_rem\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//vvan薇薇安娜\r\n\t\tzhanjumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"dying\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!game.checkMod({ name: \"tao\", isCard: true }, player, event.player, \"unchanged\", \"cardSavable\", player)) return false;\r\n\t\t\t\treturn player.countCards(\"h\") > 0 && event.player.hp <= 0;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (get.attitude(player, event.player) < 0) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\treturn card.name == \"tao\";\r\n\t\t\t\t\t}) +\r\n\t\t\t\t\t\tevent.player.hp <\r\n\t\t\t\t\t0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"【盏菊】:你可以将所有手牌当作【桃】对\" + get.translation(event.player) + \"使用\";\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar cards = player.getCards(\"h\");\r\n\t\t\t\ttrigger.player.storage.zhanjumrfz = true;\r\n\t\t\t\tplayer.useCard({ name: \"tao\" }, cards, trigger.player);\r\n\t\t\t},\r\n\t\t\tgroup: \"zhanjumrfz_recast\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\trecast: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\ttrigger: { global: \"dyingAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.storage.zhanjumrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tdelete trigger.player.storage.zhanjumrfz;\r\n\t\t\t\t\t\tif (player.countCards(\"hej\") == 0) event.finish();\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tplayer.chooseCard(\"【盏菊】:你可以重铸一张你区域内的牌\", \"hej\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.cards) {\r\n\t\t\t\t\t\t\tplayer.recast(result.cards);\r\n\t\t\t\t\t\t\tplayer.logSkill(\"zhanjumrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhuhuomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilterCard: function (card, player) {\r\n\t\t\t\treturn player.canRecast(card);\r\n\t\t\t},\r\n\t\t\tselectCard: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tposition: \"he\",\r\n\t\t\tdiscard: false,\r\n\t\t\tlose: false,\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.recast(cards);\r\n\t\t\t},\r\n\t\t\tgroup: \"zhuhuomrfz_draw\",\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\treget: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: [\"phaseZhunbeiAfter\", \"phaseJudgeAfter\", \"phaseUseAfter\", \"phaseDiscardAfter\", \"phaseJieshuAfter\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addSkill(\"zhuhuomrfz\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"zhuhuomrfz_reget\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"loseAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!event.cards) return false;\r\n\t\t\t\t\t\treturn event.getParent(2).name == \"recast\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tif (trigger.cards.length > 1) {\r\n\t\t\t\t\t\t\tvar num = 0;\r\n\t\t\t\t\t\t\tfor (i of trigger.cards) {\r\n\t\t\t\t\t\t\t\tnum += get.cardNameLength(i);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else var num = get.cardNameLength(trigger.cards[0]);\r\n\t\t\t\t\t\tevent.num = num;\r\n\t\t\t\t\t\tvar next = player.chooseControl(\"发牌\", \"摸牌\", \"cancel2\");\r\n\t\t\t\t\t\tnext.set(\"prompt\", \"是否发动【烛火】？\");\r\n\t\t\t\t\t\tnext.set(\"ai\", function () {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tvar count = game.countPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current != player && get.attitude(current, player) > 2;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif (num == 1) return 0;\r\n\t\t\t\t\t\t\tif (count - num < 0) return 1;\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.control == \"cancel2\") event.finish();\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tif (result.index == 1) {\r\n\t\t\t\t\t\t\t\tplayer.draw(Math.min(event.num, 5));\r\n\t\t\t\t\t\t\t\tplayer.logSkill(\"zhuhuo2mrfz\");\r\n\t\t\t\t\t\t\t\tplayer.addSkill(\"zhuhuomrfz_reget\");\r\n\t\t\t\t\t\t\t\tplayer.removeSkill(\"zhuhuomrfz\");\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvar num = event.num;\r\n\t\t\t\t\t\t\t\tvar next = player.chooseTarget(true, \"【烛火】:你可以选择至多\" + num + \"名角色，令其各摸一张牌\", [1, num]);\r\n\t\t\t\t\t\t\t\tnext.ai = function (target) {\r\n\t\t\t\t\t\t\t\t\treturn get.attitude(target, player) > 2;\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\tvar targets = result.targets;\r\n\t\t\t\t\t\t\tfor (i of targets) {\r\n\t\t\t\t\t\t\t\ti.draw();\r\n\t\t\t\t\t\t\t\tplayer.line(i);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tplayer.logSkill(\"zhuhuo2mrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\texpose: 0.1,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhuhuo2mrfz: {\r\n\t\t\taudio: 2,\r\n\t\t},\r\n\t\tyunjiaomrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\taiOrder: function (player, card, num) {\r\n\t\t\t\t\tif (typeof card == \"object\" && !get.tag(card, \"norepeat\")) {\r\n\t\t\t\t\t\tvar history = player.getAllHistory(\"useCard\");\r\n\t\t\t\t\t\tif (history.length > 0) {\r\n\t\t\t\t\t\t\tvar cardx = history[history.length - 1].card;\r\n\t\t\t\t\t\t\tif (get.is.yayun(get.translation(cardx.name), get.translation(card.name))) return num + 20;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar history = player.getAllHistory(\"useCard\");\r\n\t\t\t\t\tvar evt = history[history.length - 1];\r\n\t\t\t\t\tif (!evt) return \"没有使用过牌\";\r\n\t\t\t\t\treturn \"你上一张使用的牌是：\" + get.translation(evt.card.name) + \"(\" + get.pinyin(get.translation(evt.card.name)) + \")\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar history = player.getAllHistory(\"useCard\"),\r\n\t\t\t\t\tindex = history.indexOf(event);\r\n\t\t\t\tif (index < 1) return false;\r\n\t\t\t\tvar evt = history[index - 1];\r\n\t\t\t\treturn get.is.yayun(get.translation(event.card.name), get.translation(evt.card.name)) && player.isPhaseUsing();\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar skills = player.getStockSkills(true, true);\r\n\t\t\t\tgame.expandSkills(skills);\r\n\t\t\t\tvar resetSkills = [];\r\n\t\t\t\tvar suffixs = [\"used\", \"round\", \"block\", \"blocker\"];\r\n\t\t\t\tfor (var skill of skills) {\r\n\t\t\t\t\tvar info = get.info(skill);\r\n\t\t\t\t\tif (typeof info.usable == \"number\") {\r\n\t\t\t\t\t\tif (player.hasSkill(\"counttrigger\") && player.storage.counttrigger[skill] && player.storage.counttrigger[skill] >= 1) {\r\n\t\t\t\t\t\t\tdelete player.storage.counttrigger[skill];\r\n\t\t\t\t\t\t\tresetSkills.add(skill);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (typeof get.skillCount(skill) == \"number\" && get.skillCount(skill) >= 1) {\r\n\t\t\t\t\t\t\tdelete player.getStat(\"skill\")[skill];\r\n\t\t\t\t\t\t\tresetSkills.add(skill);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (info.round && player.storage[skill + \"_roundcount\"]) {\r\n\t\t\t\t\t\tdelete player.storage[skill + \"_roundcount\"];\r\n\t\t\t\t\t\tresetSkills.add(skill);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (player.awakenedSkills.includes(skill)) {\r\n\t\t\t\t\t\tplayer.restoreSkill(skill);\r\n\t\t\t\t\t\tresetSkills.add(skill);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (var suffix of suffixs) {\r\n\t\t\t\t\t\tif (player.hasSkill(skill + \"_\" + suffix)) {\r\n\t\t\t\t\t\t\tplayer.removeSkill(skill + \"_\" + suffix);\r\n\t\t\t\t\t\t\tresetSkills.add(skill);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (resetSkills.length) {\r\n\t\t\t\t\tvar str = \"\";\r\n\t\t\t\t\tfor (var i of resetSkills) {\r\n\t\t\t\t\t\tstr += \"【\" + get.translation(i) + \"】、\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgame.log(player, \"重置了技能\", \"#g\" + str.slice(0, -1));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//纯爱 纯烬艾雅法拉 奶羊 我老婆涅😋\r\n\t\tlvmengmrfz: {\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.lvmengmrfz = {\r\n\t\t\t\t\tbeifeng: [],\r\n\t\t\t\t\tzhongzi: [],\r\n\t\t\t\t\tpimao: [],\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar storage = player.storage.lvmengmrfz;\r\n\t\t\t\t\tvar str = \"北风：\" + (storage[\"beifeng\"].length > 0 ? get.translation(storage[\"beifeng\"]) : \"无\") + \"</br>种子：\" + (storage[\"zhongzi\"].length > 0 ? get.translation(storage[\"zhongzi\"]) : \"无\") + \"</br>皮毛：\" + (storage[\"pimao\"].length > 0 ? get.translation(storage[\"pimao\"]) : \"无\");\r\n\t\t\t\t\treturn str;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 4,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tif (!player.storage.lvmengmrfz)\r\n\t\t\t\t\tplayer.storage.lvmengmrfz = {\r\n\t\t\t\t\t\tbeifeng: [],\r\n\t\t\t\t\t\tzhongzi: [],\r\n\t\t\t\t\t\tpimao: [],\r\n\t\t\t\t\t};\r\n\t\t\t\tvar list = [\r\n\t\t\t\t\t[\"未分配牌的类型（对话框较长，请下滑操作）\", [[\"basic\", \"trick\", \"equip\"], \"vcard\"]],\r\n\t\t\t\t\t[\"北风（从牌堆中获得一张你手牌中没有的花色）\", []],\r\n\t\t\t\t\t[\"种子（此牌结算完毕后你可以将其交给一名其他角色）\", []],\r\n\t\t\t\t\t[\"皮毛（不可被其他角色响应）\", []],\r\n\t\t\t\t];\r\n\t\t\t\tvar next = player.chooseToMove(\"【旅梦】：请分配牌的类型\", true);\r\n\t\t\t\tnext.set(\"list\", list);\r\n\t\t\t\tnext.set(\"filterMove\", function (from, to, moved) {\r\n\t\t\t\t\tif (typeof to == \"number\") {\r\n\t\t\t\t\t\tif (to == 0) return true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t});\r\n\t\t\t\tnext.set(\"processAI\", function () {\r\n\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\tvar moved = [[], [], [], []];\r\n\t\t\t\t\tvar hasFriend = function (player) {\r\n\t\t\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\t\t\treturn get.attitude(player, current) > 2 && current != player;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (!hasFriend(player)) {\r\n\t\t\t\t\t\tmoved[1].addArray([\"equip\"]);\r\n\t\t\t\t\t\tif (Math.random() < 0.5) moved[1].addArray([\"trick\"]);\r\n\t\t\t\t\t\telse moved[3].addArray([\"trick\"]);\r\n\t\t\t\t\t\tmoved[3].addArray([\"basic\"]);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmoved[1].addArray([\"equip\"]);\r\n\t\t\t\t\t\tif (Math.random() < 0.5) {\r\n\t\t\t\t\t\t\tmoved[2].addArray([\"trick\"]);\r\n\t\t\t\t\t\t\tmoved[3].addArray([\"basic\"]);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmoved[2].addArray([\"trick\", \"basic\"]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//console.log(moved);\r\n\t\t\t\t\treturn moved;\r\n\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tgame.broadcastAll(\r\n\t\t\t\t\t\tfunction (moved, player) {\r\n\t\t\t\t\t\t\tvar transform = function (input) {\r\n\t\t\t\t\t\t\t\treturn input.map(item => {\r\n\t\t\t\t\t\t\t\t\tif (item.length === 0) {\r\n\t\t\t\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t\t\t\t} else if (typeof item[0] === \"string\") {\r\n\t\t\t\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\treturn item.map(subItem => subItem[2]);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tvar moved = moved.slice(1);\r\n\t\t\t\t\t\t\tmoved = transform(moved);\r\n\t\t\t\t\t\t\tplayer.storage.lvmengmrfz = {\r\n\t\t\t\t\t\t\t\tbeifeng: [],\r\n\t\t\t\t\t\t\t\tzhongzi: [],\r\n\t\t\t\t\t\t\t\tpimao: [],\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t//console.log(moved);\r\n\t\t\t\t\t\t\tvar keys = Object.keys(player.storage.lvmengmrfz);\r\n\t\t\t\t\t\t\tfor (var i = 0; i < moved.length; i++) {\r\n\t\t\t\t\t\t\t\tfor (var j = 0; j < moved[i].length; j++) {\r\n\t\t\t\t\t\t\t\t\tplayer.storage.lvmengmrfz[keys[i]].add(moved[i][j]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tresult.moved,\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"lvmengmrfz_beifeng\", \"lvmengmrfz_zhongzi\", \"lvmengmrfz_pimao\", \"lvmengmrfz_tag\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\t// 标签\r\n\t\t\t\ttag: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: [\"gainEnd\", \"lvmengmrfzAfter\"] },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn player.storage.lvmengmrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\tvar storage = player.storage.lvmengmrfz,\r\n\t\t\t\t\t\t\tcards = trigger.name == \"gain\" ? trigger.cards : player.getCards(\"h\");\r\n\t\t\t\t\t\tif (trigger.name == \"lvmengmrfz\") {\r\n\t\t\t\t\t\t\tfor (var i of [\"beifeng_lvmengmrfz\", \"zhongzi_lvmengmrfz\", \"pimao_lvmengmrfz\"]) {\r\n\t\t\t\t\t\t\t\tplayer.removeGaintag(i);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var key in storage) {\r\n\t\t\t\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\t\t\t\tif (storage[key].includes(get.type2(i))) i.addGaintag(key + \"_lvmengmrfz\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t//北风\r\n\t\t\t\tbeifeng: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tusable: 4,\r\n\t\t\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar type = player.storage.lvmengmrfz[\"beifeng\"],\r\n\t\t\t\t\t\t\ttmp_bool = false;\r\n\t\t\t\t\t\tif (!type || !event.card) return false;\r\n\t\t\t\t\t\tfor (var i = 0; i < type.length; i++) {\r\n\t\t\t\t\t\t\tif (get.type(event.card, \"trick\") == type[i]) {\r\n\t\t\t\t\t\t\t\ttmp_bool = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar cards = player.getCards(\"h\"),\r\n\t\t\t\t\t\t\tlist = [];\r\n\t\t\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\t\t\tlist.add(get.suit(i, player));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn list.length < 4 && tmp_bool;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar cards = player.getCards(\"h\"),\r\n\t\t\t\t\t\t\tlist = [];\r\n\t\t\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\t\t\tlist.add(get.suit(i, player));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar result = lib.suit.filter(item => !list.includes(item));\r\n\t\t\t\t\t\tvar card = get.cardPile2(card => {\r\n\t\t\t\t\t\t\tfor (var i = 0; i < result.length; i++) {\r\n\t\t\t\t\t\t\t\treturn get.suit(card) == result[i];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (card) player.gain(card, \"gain2\");\r\n\t\t\t\t\t\tif (!trigger.audioed) {\r\n\t\t\t\t\t\t\ttrigger.audioed = true;\r\n\t\t\t\t\t\t\tplayer.logSkill(\"lvmengmrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t//种子\r\n\t\t\t\tzhongzi: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar type = player.storage.lvmengmrfz[\"zhongzi\"],\r\n\t\t\t\t\t\t\ttmp_bool = false;\r\n\t\t\t\t\t\tif (!type || !event.card) return false;\r\n\t\t\t\t\t\tfor (var i = 0; i < type.length; i++) {\r\n\t\t\t\t\t\t\tif (get.type(event.card, \"trick\") == type[i]) {\r\n\t\t\t\t\t\t\t\ttmp_bool = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn event.cards.filterInD().length > 0 && tmp_bool;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.chooseTarget(\"【旅梦】:将\" + get.translation(trigger.cards) + \"交给一名其他角色\", function (card, player, target) {\r\n\t\t\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\tif (target.hasJudge(\"lebu\")) return 0;\r\n\t\t\t\t\t\t\t\tvar att = get.attitude(_status.event.player, target);\r\n\t\t\t\t\t\t\t\tif (att < 3) return 0;\r\n\t\t\t\t\t\t\t\tif (target.hasSkillTag(\"nogain\")) att /= 10;\r\n\t\t\t\t\t\t\t\tif (target.hasSha() && _status.event.sha) {\r\n\t\t\t\t\t\t\t\t\tatt /= 5;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (event.wuxie && target.needsToDiscard(1)) {\r\n\t\t\t\t\t\t\t\t\tatt /= 5;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn att / (1 + get.distance(player, target, \"absolute\"));\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"sha\", trigger.cards[0].name == \"sha\")\r\n\t\t\t\t\t\t\t.set(\"wuxie\", trigger.cards[0].name == \"wuxie\");\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tplayer.line(result.targets[0]);\r\n\t\t\t\t\t\t\tif (!trigger.audioed) {\r\n\t\t\t\t\t\t\t\ttrigger.audioed = true;\r\n\t\t\t\t\t\t\t\tplayer.logSkill(\"lvmengmrfz\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tresult.targets[0].gain(trigger.cards.filterInD(), \"gain2\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t//皮毛\r\n\t\t\t\tpimao: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar type = player.storage.lvmengmrfz[\"pimao\"],\r\n\t\t\t\t\t\t\ttmp_bool = false;\r\n\t\t\t\t\t\tif (!type || !event.card) return false;\r\n\t\t\t\t\t\tfor (var i = 0; i < type.length; i++) {\r\n\t\t\t\t\t\t\tif (get.type(event.card, \"trick\") == type[i]) {\r\n\t\t\t\t\t\t\t\ttmp_bool = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn tmp_bool;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (!trigger.audioed) {\r\n\t\t\t\t\t\t\ttrigger.audioed = true;\r\n\t\t\t\t\t\t\tplayer.logSkill(\"lvmengmrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current != player;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.6,\r\n\t\t\t},\r\n\t\t},\r\n\t\trechenmrfz: {\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar evt = player.getLastUsed();\r\n\t\t\t\t\tif (!player.isPhaseUsing()) return \"不是你的出牌阶段\";\r\n\t\t\t\t\tif (!evt || !evt.card) return \"本回合你未使用过牌\";\r\n\t\t\t\t\treturn \"上一张你使用的牌的花色是：\" + get.translation(get.suit(evt.card));\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\tforced: true,\r\n\t\t\tfirstDo: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar evt = player.getLastUsed(1);\r\n\t\t\t\tif (event.getParent(\"phaseUse\").player != player) return false;\r\n\t\t\t\treturn evt && evt.card && get.suit(event.card) == get.suit(evt.card) && !event.audioed;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.audioed = true;\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\taiOrder: function (player, card, num) {\r\n\t\t\t\t\tif (typeof card == \"object\" && player.isPhaseUsing()) {\r\n\t\t\t\t\t\tvar evt = player.getLastUsed();\r\n\t\t\t\t\t\tif (evt && evt.card && get.suit(evt.card) && get.suit(evt.card) == get.suit(card)) {\r\n\t\t\t\t\t\t\treturn num + 10;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcardUsable: function (card, player) {\r\n\t\t\t\t\tvar evt = player.getLastUsed();\r\n\t\t\t\t\tif (evt && evt.card && get.suit(card) == get.suit(evt.card)) return Infinity;\r\n\t\t\t\t},\r\n\t\t\t\ttargetInRange: function (card, player, target, now) {\r\n\t\t\t\t\tvar evt = player.getLastUsed();\r\n\t\t\t\t\tif (evt && evt.card && get.suit(card) == get.suit(evt.card)) return true;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"rechenmrfz_syn\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tsyn: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"useCardEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.getParent(\"phaseUse\").player === player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addTip(\"rechenmrfz_tip\", `热忱 ${get.translation(get.suit(trigger.card))}`, \"phaseUseEnd\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//塑心 阿尔图罗 2226\r\n\t\tqinmingmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tusable: 1,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn current != player && current.countCards(\"h\") > 0;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tselectTarget: 1,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar tmp_cards = target.getCards(\"h\");\r\n\t\t\t\tvar cards = [];\r\n\t\t\t\tfor (i of tmp_cards) {\r\n\t\t\t\t\tif (target.canRecast(i)) cards.push(i);\r\n\t\t\t\t}\r\n\t\t\t\ttarget.recast(cards);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tvar cards = target.getCards(\"h\");\r\n\t\t\t\ttarget.showCards(cards, \"【琴鸣】:\" + get.translation(target) + \"的手牌\");\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tvar cards = target.getCards(\"h\");\r\n\t\t\t\tvar canCards = [];\r\n\t\t\t\tfor (i of cards) {\r\n\t\t\t\t\tif (target.canUseToAnyone(i)) canCards.push(i);\r\n\t\t\t\t}\r\n\t\t\t\tevent.cards = canCards;\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tif (event.cards.length > 0) {\r\n\t\t\t\t\tif (target.hasCard(event.cards[0].name, \"h\")) target.chooseUseTarget(true, event.cards[0], false);\r\n\t\t\t\t\tevent.goto(2);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 8,\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tvar lowAtt =\r\n\t\t\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\t\t\treturn current != player && current.inRange(target) && get.attitude(player, current) < 0;\r\n\t\t\t\t\t\t\t}) && get.attitude(player, target) < 0;\r\n\t\t\t\t\t\tvar hightAtt =\r\n\t\t\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\t\t\treturn current != player && current.inRange(target) && get.attitude(player, current) < 0;\r\n\t\t\t\t\t\t\t}) && get.attitude(player, target) > 0;\r\n\t\t\t\t\t\tif (lowAtt) return -1;\r\n\t\t\t\t\t\tif (hightAtt) return 1;\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tkongwomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"drawBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.num > 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar num = trigger.num;\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t\tvar cards = [],\r\n\t\t\t\t\tbanCards = [];\r\n\t\t\t\tvar loseCards = player.getHistory(\"lose\", evt => {\r\n\t\t\t\t\treturn evt.player == player;\r\n\t\t\t\t});\r\n\t\t\t\tfor (var i of loseCards) {\r\n\t\t\t\t\tif (!i.cards) continue;\r\n\t\t\t\t\tbanCards.push(i.cards);\r\n\t\t\t\t}\r\n\t\t\t\twhile (cards.length < num) {\r\n\t\t\t\t\tvar card = get.discardPile(card => {\r\n\t\t\t\t\t\treturn !cards.includes(card) && !banCards.includes(card);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (card) cards.push(card);\r\n\t\t\t\t\telse break;\r\n\t\t\t\t}\r\n\t\t\t\tplayer.gain(cards, \"gain2\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"kongwomrfz_get\", \"kongwomrfz_clear\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseUseEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (player.storage.kongwomrfz_get) delete player.storage.kongwomrfz_get;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tget: {\r\n\t\t\t\t\taudio: \"kongwomrfz\",\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"loseAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.player == player || !player.isPhaseUsing()) return false;\r\n\t\t\t\t\t\tif (event.getParent().name != \"useCard\") return false;\r\n\t\t\t\t\t\tvar cards = event.cards2.slice(0);\r\n\t\t\t\t\t\tfor (var i = 0; i < cards.length; i++) {\r\n\t\t\t\t\t\t\tvar type = get.type2(cards[i]);\r\n\t\t\t\t\t\t\tif (get.position(cards[i], true) == \"o\" && type != \"equip\") {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tif (trigger.delay == false) game.delay();\r\n\t\t\t\t\t\tif (!player.storage.kongwomrfz_get) player.storage.kongwomrfz_get = [];\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tvar cards = [];\r\n\t\t\t\t\t\tfor (var i = 0; i < trigger.cards2.length; i++) {\r\n\t\t\t\t\t\t\tvar card = trigger.cards2[i];\r\n\t\t\t\t\t\t\tvar type = get.type2(card);\r\n\t\t\t\t\t\t\tvar name = player.storage.kongwomrfz_get,\r\n\t\t\t\t\t\t\t\tname2 = card.name;\r\n\t\t\t\t\t\t\tif (get.position(card, true) == \"o\" && type != \"equip\" && !name.includes(name2)) {\r\n\t\t\t\t\t\t\t\tcards.push(card);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (cards.length)\r\n\t\t\t\t\t\t\tplayer.chooseButton(true, [\"【空我】:请选择你要获得的牌\", cards], [1, Infinity]).set(\"ai\", button => {\r\n\t\t\t\t\t\t\t\treturn cards;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\telse event.finish();\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tif (result.links) {\r\n\t\t\t\t\t\t\tvar cards = result.links;\r\n\t\t\t\t\t\t\tfor (i of cards) {\r\n\t\t\t\t\t\t\t\tvar name = get.name(i);\r\n\t\t\t\t\t\t\t\tif (!player.storage.kongwomrfz_get.includes(name)) player.storage.kongwomrfz_get.add(name);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tplayer.gain(cards, \"gain2\");\r\n\t\t\t\t\t\t\tplayer.logSkill(\"kongwomrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//赫德雷\r\n\t\tzhengrongmrfz: {\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.zhengrongmrfz = {\r\n\t\t\t\t\tdiscard: false,\r\n\t\t\t\t\tlosedraw: false,\r\n\t\t\t\t\tmaxhp: false,\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"damageEnd\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar list = [],\r\n\t\t\t\t\tstorage = player.storage.zhengrongmrfz;\r\n\t\t\t\tif (player.countCards(\"h\") > 0 && storage[\"discard\"] == false) list.push(\"弃牌\");\r\n\t\t\t\tif (storage[\"losedraw\"] == false) list.push(\"摸牌阶段摸牌数-1\");\r\n\t\t\t\tif (storage[\"maxhp\"] == false) list.push(\"失去体力上限\");\r\n\t\t\t\tif (list.length == 0) return false;\r\n\t\t\t\tif (event.player === undefined) return false;\r\n\t\t\t\tif (!event.player.isAlive()) return false;\r\n\t\t\t\treturn event.player == player || get.distance(player, event.player) <= 1;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\tif (event.player == player) return \"【征戎】：是否选择一项并回复一点体力？\";\r\n\t\t\t\treturn \"【征戎】:是否选择一项并令\" + get.translation(event.player) + \"回复一点体力？\";\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (get.attitude(event.player, player) < 0) return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar list = [],\r\n\t\t\t\t\tstorage = player.storage.zhengrongmrfz;\r\n\t\t\t\tif (player.countCards(\"h\") > 0 && storage[\"discard\"] == false) list.push(\"弃牌\");\r\n\t\t\t\tif (storage[\"losedraw\"] == false) list.push(\"摸牌阶段摸牌数-1\");\r\n\t\t\t\tif (storage[\"maxhp\"] == false) list.push(\"失去体力上限\");\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"prompt\", \"【征戎】:请选择一项\");\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.control) {\r\n\t\t\t\t\tvar control = result.control;\r\n\t\t\t\t\tgame.log(control);\r\n\t\t\t\t\tif (control == \"弃牌\") {\r\n\t\t\t\t\t\tplayer.chooseToDiscard(\"he\", true, \"【征戎】:请弃置一张牌\");\r\n\t\t\t\t\t\tplayer.storage.zhengrongmrfz[\"discard\"] = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (control == \"摸牌阶段摸牌数-1\") {\r\n\t\t\t\t\t\tplayer.addMark(\"zhengrongmrfz_losedraw\", false);\r\n\t\t\t\t\t\tplayer.addTempSkill(\"zhengrongmrfz_losedraw\", {\r\n\t\t\t\t\t\t\tplayer: \"phaseDrawAfter\",\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tplayer.storage.zhengrongmrfz[\"losedraw\"] = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (control == \"失去体力上限\") {\r\n\t\t\t\t\t\tplayer.loseMaxHp();\r\n\t\t\t\t\t\tplayer.storage.zhengrongmrfz[\"maxhp\"] = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttrigger.player.recover();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhengrongmrfz_rec\", \"zhengrongmrfz_draw\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\taudio: 2,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar allGone = Object.values(player.storage.zhengrongmrfz).every(function (value) {\r\n\t\t\t\t\t\t\treturn value === true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (player.storage.zhengrongmrfz === undefined) return false;\r\n\t\t\t\t\t\treturn allGone;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.drawTo(player.maxHp);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\trec: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.zhengrongmrfz = {\r\n\t\t\t\t\t\t\tdiscard: false,\r\n\t\t\t\t\t\t\tlosedraw: false,\r\n\t\t\t\t\t\t\tmaxhp: false,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tlosedraw: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"下个摸牌阶段摸牌数-#\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.num > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num -= player.countMark(\"zhengrongmrfz_losedraw\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tthreaten: 0.8,\r\n\t\t\t},\r\n\t\t},\r\n\t\tsiyanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCard2\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.targets.length > 1) return false;\r\n\t\t\t\tif (event.targets[0] == player) return false;\r\n\t\t\t\tif (!event.card || event.card.name != \"sha\") return false;\r\n\t\t\t\tvar history = event.targets[0].getHistory(\"damage\");\r\n\t\t\t\tfor (var i = 0; i < history.length; i++) {\r\n\t\t\t\t\tif (!history[i].source) continue;\r\n\t\t\t\t\tif (history[i].source == player) return true;\r\n\t\t\t\t}\r\n\t\t\t\tvar seatNum = event.targets[0].getSeatNum();\r\n\t\t\t\t// console.log(seatNum in player.storage.siyanmrfz_tol);\r\n\t\t\t\tif (seatNum in player.storage.siyanmrfz_tol && player.storage.siyanmrfz_tol[seatNum] === true) return true;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (get.attitude(event.targets[0], player) > 0) return false;\r\n\t\t\t\treturn player.hp > 1;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"【死烟】:是否失去一点体力并令\" + get.translation(event.targets[0]) + \"选择一项？\";\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.addTempSkill(\"siyanmrfz_rec\", {\r\n\t\t\t\t\tplayer: \"damageAfter\",\r\n\t\t\t\t});\r\n\t\t\t\tplayer.storage.siyanmrfz_rec = {\r\n\t\t\t\t\tcard: trigger.card,\r\n\t\t\t\t};\r\n\t\t\t\tvar target = trigger.targets[0],\r\n\t\t\t\t\tlist = [\"无法响应\" + get.translation(player) + \"使用的【杀】\"];\r\n\t\t\t\tif (target.countCards(\"h\") > 1) list.push(\"弃置两张手牌\");\r\n\t\t\t\ttarget.loseHp();\r\n\t\t\t\tplayer.loseHp();\r\n\t\t\t\tif (list.length < 2 && target.isAlive()) {\r\n\t\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn current == target;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t);\r\n\t\t\t\t\tgame.log(target, \"选择了无法响应\", player, \"使用的【杀】\");\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t} else if (target.isAlive()) {\r\n\t\t\t\t\ttarget\r\n\t\t\t\t\t\t.chooseControl()\r\n\t\t\t\t\t\t.set(\"choiceList\", list)\r\n\t\t\t\t\t\t.set(\"prompt\", \"【死烟】:请选择一项\")\r\n\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tif (player.countCards(\"h\") < 3) return 0;\r\n\t\t\t\t\t\t\tif (!player.hasShan()) return 0;\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tplayer.hp == 1 &&\r\n\t\t\t\t\t\t\t\tplayer.countCards(\"h\", card => {\r\n\t\t\t\t\t\t\t\t\treturn get.name(card) == \"tao\" || get.name(card) == \"jiu\";\r\n\t\t\t\t\t\t\t\t}) > 0 &&\r\n\t\t\t\t\t\t\t\tplayer.countCards(\"h\") < 3\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} else event.finish();\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.control) {\r\n\t\t\t\t\tvar target = trigger.targets[0];\r\n\t\t\t\t\tif (result.index == 1) {\r\n\t\t\t\t\t\tgame.log(get.translation(target), \"选择了弃置两张手牌\");\r\n\t\t\t\t\t\ttarget.chooseToDiscard(\"h\", true, 2);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current == target;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tgame.log(target, \"选择了无法响应\", player, \"使用的【杀】\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"siyanmrfz_tol\", \"siyanmrfz_clear\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\trec: {\r\n\t\t\t\t\tonremove: function (player) {\r\n\t\t\t\t\t\tdelete player.storage.siyanmrfz_rec;\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tsource: \"damageEnd\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar info = player.storage.siyanmrfz_rec;\r\n\t\t\t\t\t\treturn event.card && event.card == info.card;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (get.suit(trigger.card) == \"diamond\") player.recover();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player != player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar seatNum = trigger.player.getSeatNum();\r\n\t\t\t\t\t\tplayer.storage.siyanmrfz_tol[seatNum] = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttol: {\r\n\t\t\t\t\tinit: function (player) {\r\n\t\t\t\t\t\tplayer.storage.siyanmrfz_tol = {};\r\n\t\t\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\t\t\tif (game.players[i] == player) continue;\r\n\t\t\t\t\t\t\tplayer.storage.siyanmrfz_tol[i + 1] = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.source != undefined && player.isAlive();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar seatNum = trigger.source.getSeatNum();\r\n\t\t\t\t\t\tif (seatNum in player.storage.siyanmrfz_tol && player.storage.siyanmrfz_tol[seatNum] === false) {\r\n\t\t\t\t\t\t\tplayer.storage.siyanmrfz_tol[seatNum] = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\tvar seatNum = arg.target.getSeatNum(arg.target);\r\n\t\t\t\t\tif ((!seatNum) in player.storage.siyanmrfz_tol || player.storage.siyanmrfz_tol[seatNum] === false) return false;\r\n\t\t\t\t\tif (arg.card.name != \"sha\" || arg.target.countCards(\"h\", \"shan\") > 1) return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//止颂\r\n\t\tkuxiumrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tif (card.name == \"sha\") return (num += player.getCards(\"j\").length);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar cards = [];\r\n\t\t\t\tif (player.countCards(\"he\") < 1) return false;\r\n\t\t\t\tfor (var i of lib.inpile) {\r\n\t\t\t\t\tif (get.type(i) == \"delay\") cards.push(i);\r\n\t\t\t\t}\r\n\t\t\t\tfor (var name of cards) {\r\n\t\t\t\t\tif (player.canAddJudge({ name: name })) return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tchooseButton: {\r\n\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\tvar cards = [];\r\n\t\t\t\t\tfor (var i of lib.inpile) {\r\n\t\t\t\t\t\tif (get.type(i) == \"delay\") cards.push(i);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar vcards = [];\r\n\t\t\t\t\tfor (var name of cards) {\r\n\t\t\t\t\t\tvar card = { name: name };\r\n\t\t\t\t\t\tif (player.canAddJudge({ name: name })) vcards.push([\"延时锦囊\", \"\", name]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar dialog = ui.create.dialog(\"苦修\", [vcards, \"vcard\"], \"hidden\");\r\n\t\t\t\t\treturn dialog;\r\n\t\t\t\t},\r\n\t\t\t\tcheck: function (button) {\r\n\t\t\t\t\tvar name = button.link[2];\r\n\t\t\t\t\tswitch (name) {\r\n\t\t\t\t\t\tcase \"lebu\":\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\tcase \"bingliang\":\r\n\t\t\t\t\t\t\treturn 2;\r\n\t\t\t\t\t\tcase \"shandian\":\r\n\t\t\t\t\t\t\treturn 3;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\treturn 1.5;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\taudio: \"kuxiumrfz\",\r\n\t\t\t\t\t\tfilterCard: function (card, player, event) {\r\n\t\t\t\t\t\t\treturn player.canAddJudge({\r\n\t\t\t\t\t\t\t\tname: links[0][2],\r\n\t\t\t\t\t\t\t\tcards: [card],\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tselectTarget: -1,\r\n\t\t\t\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\t\t\t\treturn player == target;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcheck(card) {\r\n\t\t\t\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tviewAs: {\r\n\t\t\t\t\t\t\tname: links[0][2],\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tposition: \"he\",\r\n\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t\tonuse: function (links, player) {\r\n\t\t\t\t\t\t\tif (!links.cards) return;\r\n\t\t\t\t\t\t\tvar next = game.createEvent(\"kuxiumrfz_draw\", false, _status.event.getParent());\r\n\t\t\t\t\t\t\tnext.cards = links.cards;\r\n\t\t\t\t\t\t\tnext.player = player;\r\n\t\t\t\t\t\t\tnext.setContent(function () {\r\n\t\t\t\t\t\t\t\tlet num = player.getCards(\"j\").length;\r\n\t\t\t\t\t\t\t\tif (num > 0) player.draw(num);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tai: {\r\n\t\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\treturn \"【苦修】：请选择一张牌将其当做一张【\" + get.translation(links[0][2]) + \"】对自己使用\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 8,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tlirenmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"j\") > 0;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tvar cards = player.getCards(\"j\");\r\n\t\t\t\tif (cards.length == 1 && cards[0] == \"shandian\") return false;\r\n\t\t\t\treturn player.hp > 1;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar num = player.getCards(\"j\").length;\r\n\t\t\t\tplayer.discardPlayerCard(player, num, \"j\", true);\r\n\t\t\t\tplayer.loseHp();\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//锏\r\n\t\t/** @type { Skill } */\r\n\t\tweiyamrfz: {\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tmod: {\r\n\t\t\t\ttargetInRange(card, player, target) {\r\n\t\t\t\t\tif (player.getStorage(\"weiyamrfz\").includes(target)) return true;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.player != player && !event.player.hasSkill(\"weiyamrfz_ban\") && event.player.isAlive();\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"【威压】:是否令\" + get.translation(event.player) + \"下个出牌阶段不能使用带有伤害类标签的牌？\";\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(event.player, player) < 0;\r\n\t\t\t},\r\n\t\t\tcontent: async function (event, trigger, player) {\r\n\t\t\t\ttrigger.player.addTempSkill(\"weiyamrfz_ban\", {\r\n\t\t\t\t\tplayer: \"phaseUseEnd\",\r\n\t\t\t\t});\r\n\t\t\t\tplayer.storage.weiyamrfz ??= [];\r\n\t\t\t\tplayer.storage.weiyamrfz.add(trigger.player);\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tmarktext: \"战栗\",\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"出牌阶段不能使用带有伤害类标签的牌\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardEnabled: function (card, player) {\r\n\t\t\t\t\t\t\tif (get.tag(card, \"damage\") > 0 && player.isPhaseUsing()) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.2,\r\n\t\t\t\tthreaten: 1.1,\r\n\t\t\t\tunequip: true,\r\n\t\t\t\tskillTagFilter(player, tag, arg) {\r\n\t\t\t\t\treturn player.getStorage(\"weiyamrfz\").includes(arg.target);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t/** @type { Skill } */\r\n\t\tzhiwumrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tcardname: function (card, player) {\r\n\t\t\t\t\tif (card.cardnameCheck) return card.name;\r\n\t\t\t\t\tcard.cardnameCheck = true;\r\n\t\t\t\t\tlet result;\r\n\t\t\t\t\tif (get.type(card) == \"trick\") result = \"sha\";\r\n\t\t\t\t\telse result = card.name;\r\n\t\t\t\t\tdelete card.cardnameCheck;\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"useCardToTargeted\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.targets.length == 0) return false;\r\n\t\t\t\treturn event.card.name == \"sha\" && get.color(event.card) != undefined;\r\n\t\t\t},\r\n\t\t\tcontent: async function (event, trigger, player) {\r\n\t\t\t\tvar targets = trigger.targets;\r\n\t\t\t\tfor (var i = 0; i < targets.length; i++) {\r\n\t\t\t\t\tif (targets[i].hasSkill(\"zhiwumrfz_ban\")) continue;\r\n\t\t\t\t\ttargets[i].addTempSkill(\"zhiwumrfz_ban\");\r\n\t\t\t\t\ttargets[i].storage.zhiwumrfz_ban = {\r\n\t\t\t\t\t\tplayer: player,\r\n\t\t\t\t\t\tcolor: get.color(trigger.card),\r\n\t\t\t\t\t};\r\n\t\t\t\t\tplayer.line(targets[i]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhiwumrfz_count\", \"zhiwumrfz_draw\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\taudio: \"zhiwumrfz\",\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn player.getRoundHistory(\"sourceDamage\", evt => evt.player === event.player).length === 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tcount: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard1\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!player.isPhaseUsing()) return false;\r\n\t\t\t\t\t\tif (!event.card || event.card.name != \"sha\") return false;\r\n\t\t\t\t\t\tif (event.addCount === false) return false;\r\n\t\t\t\t\t\treturn event.card.cards.length > 1 || (event.card.cards.length == 1 && event.cards[0].name != event.card.name);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: async function (event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.addCount = false;\r\n\t\t\t\t\t\tif (player.stat[player.stat.length - 1].card.sha > 0) {\r\n\t\t\t\t\t\t\tplayer.stat[player.stat.length - 1].card.sha--;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tban: {\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardEnabled: function (card, player) {\r\n\t\t\t\t\t\t\tif (get.color(card) == player.storage.zhiwumrfz_ban[\"color\"]) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"useCardAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card.name == \"sha\" && event.player == player.storage.zhiwumrfz_ban[\"player\"];\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t//console.log(player.storage.zhiwumrfz_ban);\r\n\t\t\t\t\t\tdelete player.storage.zhiwumrfz_ban;\r\n\t\t\t\t\t\tplayer.removeSkill(\"zhiwumrfz_ban\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//莱伊\r\n\t\tshaobanmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tinRange: function (from, to) {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tto.hasCard(card => {\r\n\t\t\t\t\t\t\treturn card.name == \"shadishoumrfz\";\r\n\t\t\t\t\t\t}, \"e\")\r\n\t\t\t\t\t)\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tderivation: [\"shadishoumrfz\"],\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.countCards(\"he\") > 0 &&\r\n\t\t\t\t\t!game.hasPlayer(current => {\r\n\t\t\t\t\t\treturn current.hasCard(card => {\r\n\t\t\t\t\t\t\treturn card.name == \"shadishoumrfz\";\r\n\t\t\t\t\t\t}, \"e\");\r\n\t\t\t\t\t}) &&\r\n\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\treturn current != player && !current.isDisabled(2);\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tfilterCard: true,\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && !target.isDisabled(2);\r\n\t\t\t},\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar card = game.createCard(\"shadishoumrfz\", \"heart\", 13);\r\n\t\t\t\ttarget.$gain2(card);\r\n\t\t\t\tgame.delayx();\r\n\t\t\t\ttarget.equip(card);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 5,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: -1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: \"shaobanmrfz_dam\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\tdam: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { source: \"damageBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.hasSkill(\"shaobanmrfz_ban\")) return false;\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.player != player &&\r\n\t\t\t\t\t\t\tevent.player.hasCard(card => {\r\n\t\t\t\t\t\t\t\treturn card.name == \"shadishoumrfz\";\r\n\t\t\t\t\t\t\t}, \"e\")\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t\tplayer.logSkill(\"shaobanmrfz\", trigger.player);\r\n\t\t\t\t\t\tplayer.addTempSkill(\"shaobanmrfz_ban\", {\r\n\t\t\t\t\t\t\tglobal: \"phaseEnd\",\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\ttankuangmrfz: {\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"剩余#次\",\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tgetCountInRanger(player) {\r\n\t\t\t\tvar num = 0,\r\n\t\t\t\t\tplayers = game.filterPlayer();\r\n\t\t\t\tfor (var i = 0; i < players.length; i++) {\r\n\t\t\t\t\tif (player.inRange(players[i])) {\r\n\t\t\t\t\t\tnum++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn num;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"tankuangmrfz\") > 0;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (player.hp < 2) return Math.random() > 0.4;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar card = game.cardsGotoOrdering(get.cards(1)).cards[0],\r\n\t\t\t\t\tnum = 0;\r\n\t\t\t\tplayer.showCards(card, get.translation(player) + \"展示了牌堆顶一张牌\");\r\n\t\t\t\tif (get.color(card) == get.color(trigger.card)) num++;\r\n\t\t\t\tif (get.type(card, \"trick\") == get.type(trigger.card, \"trick\")) num++;\r\n\t\t\t\tif (get.number(card) >= get.number(trigger.card)) num++;\r\n\t\t\t\tif (num > 0) {\r\n\t\t\t\t\tplayer.draw(num);\r\n\t\t\t\t\tif (num == 3) player.recoverTo(player.maxHp);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.loseHp();\r\n\t\t\t\t\tplayer.removeSkill(\"tankuangmrfz\");\r\n\t\t\t\t\tplayer.addTempSkill(\"tankuangmrfz_re3\", {\r\n\t\t\t\t\t\tglobal: \"phaseBegin\",\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tplayer.removeMark(\"tankuangmrfz\", false);\r\n\t\t\t},\r\n\t\t\tgroup: [\"tankuangmrfz_re\", \"tankuangmrfz_re2\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tre: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseBegin\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar num = Math.max(2, lib.skill.tankuangmrfz.getCountInRanger(player));\r\n\t\t\t\t\t\tplayer.removeMark(\"tankuangmrfz\", player.countMark(\"tankuangmrfz\"), false);\r\n\t\t\t\t\t\tplayer.addMark(\"tankuangmrfz\", num, false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tre2: {\r\n\t\t\t\t\tinit: function (player) {\r\n\t\t\t\t\t\tplayer.storage.tankuangmrfz_re2 = lib.skill.tankuangmrfz.getCountInRanger(player);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"loseAfter\", \"changeHp\", \"gainMaxHpAfter\", \"loseMaxHpAfter\"],\r\n\t\t\t\t\t\tglobal: [\"equipAfter\", \"addJudgeAfter\", \"gainAfter\", \"loseAsyncAfter\", \"addToExpansionAfter\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.storage.tankuangmrfz_re2 - Math.max(2, lib.skill.tankuangmrfz.getCountInRanger(player)) != 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (!player.storage.tankuangmrfz_re2) player.storage.tankuangmrfz_re2 = 0;\r\n\t\t\t\t\t\tvar now = Math.max(2, lib.skill.tankuangmrfz.getCountInRanger(player));\r\n\t\t\t\t\t\tvar last = player.storage.tankuangmrfz_re2;\r\n\t\t\t\t\t\tvar num = now - last;\r\n\t\t\t\t\t\tif (num > 0) {\r\n\t\t\t\t\t\t\tplayer.addMark(\"tankuangmrfz\", num, false);\r\n\t\t\t\t\t\t} else player.removeMark(\"tankuangmrfz\", Math.abs(num), false);\r\n\t\t\t\t\t\tplayer.storage.tankuangmrfz_re2 = now;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tre3: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addSkill(\"tankuangmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//新斥罪\r\n\t\tnewzhidianmrfz: {\r\n\t\t\tgetSkillsList: function (event, player) {\r\n\t\t\t\tvar list = [];\r\n\t\t\t\tvar listm = [];\r\n\t\t\t\tvar listv = [];\r\n\t\t\t\tif (player.name1 != undefined) listm = lib.character[player.name1][3];\r\n\t\t\t\telse listm = lib.character[player.name][3];\r\n\t\t\t\tif (player.name2 != undefined) listv = lib.character[player.name2][3];\r\n\t\t\t\tlistm = listm.concat(listv);\r\n\t\t\t\tvar func = function (skill) {\r\n\t\t\t\t\tvar info = get.info(skill);\r\n\t\t\t\t\tif (!info || info.charlotte) return false;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t};\r\n\t\t\t\tfor (var i = 0; i < listm.length; i++) {\r\n\t\t\t\t\tif (func(listm[i])) list.add(listm[i]);\r\n\t\t\t\t}\r\n\t\t\t\tif (player.disabledSkills) {\r\n\t\t\t\t\tfor (var key in player.disabledSkills) {\r\n\t\t\t\t\t\tlist.remove(key);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn list;\r\n\t\t\t},\r\n\t\t\tinit: (player, skill) => {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\taudio: \"zhidianmrfz\",\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 114514,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && !player.storage.newzhidianmrfz.includes(target);\r\n\t\t\t},\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\treturn 7 - get.value(card);\r\n\t\t\t},\r\n\t\t\tposition: \"he\",\r\n\t\t\tfilterCard: true,\r\n\t\t\tdelay: false,\r\n\t\t\tlose: false,\r\n\t\t\tdiscard: false,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet card = event.cards,\r\n\t\t\t\t\ttarget = event.target;\r\n\t\t\t\tplayer.give(card, target);\r\n\t\t\t\tlet list = [],\r\n\t\t\t\t\tlist2 = [];\r\n\t\t\t\tif (target.countCards(\"he\") > 1) {\r\n\t\t\t\t\tlist.add(`弃置三张牌，${get.translation(player)}获得其中一张牌`);\r\n\t\t\t\t\tlist2.add(\"选项一\");\r\n\t\t\t\t} else list.add(`<span style=\"opacity:0.5\">弃置三张牌，${get.translation(player)}获得其中一张牌（不可选:牌数少于2）</span>`);\r\n\t\t\t\tlist.add(`受到一点伤害且令${get.translation(player)}选择让你一个技能失效`);\r\n\t\t\t\tlist2.add(\"选项二\");\r\n\t\t\t\tif (!target.isLinked()) {\r\n\t\t\t\t\tlist.add(`横置武将牌，${get.translation(player)}本回合不能再对你使用此技能`);\r\n\t\t\t\t\tlist2.add(\"选项三\");\r\n\t\t\t\t} else list.add(`<span style=\"opacity:0.5\">横置武将牌，${get.translation(player)}本回合不能再对你使用此技能（不可选:已被横置）</span>`);\r\n\t\t\t\tvar {control} = await target\r\n\t\t\t\t\t.chooseControl(list2)\r\n\t\t\t\t\t.set(\"choiceList\", list)\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\tvar player = _status.event.target,\r\n\t\t\t\t\t\t\tlist = _status.event.list,\r\n\t\t\t\t\t\t\ths = player.getCards(\"he\", card => {\r\n\t\t\t\t\t\t\t\treturn get.value(card) < 8;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (player.hp < 2) list.remove(\"选项二\");\r\n\t\t\t\t\t\tif (player.countCards(\"he\") < 4 || hs.length < 3) list.remove(\"选项一\");\r\n\t\t\t\t\t\tif (list.length == 0) list.push(\"选项二\");\r\n\t\t\t\t\t\treturn list[0];\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"target\", event.target)\r\n\t\t\t\t\t.set(\"list\", list2)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!control) return;\r\n\t\t\t\tswitch (control) {\r\n\t\t\t\t\tcase \"选项一\":\r\n\t\t\t\t\t\tconst {cards} = await target.chooseToDiscard(true, \"he\", 3, \"请弃置三张牌\").forResult();\r\n\t\t\t\t\t\tif (!cards) return;\r\n\t\t\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\t\t\tif (get.position(i) != \"d\") cards.remove(i);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (cards.length == 0) return;\r\n\t\t\t\t\t\tconst {links} = cards.length == 1 ? {links:cards} : await player.chooseCardButton(cards, \"【执典】:请选择获得一张牌\", true, 1).forResult();\r\n\t\t\t\t\t\tplayer.gain(links[0], \"gain2\");\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"选项二\":\r\n\t\t\t\t\t\tlet skillList = lib.skill.newzhidianmrfz.getSkillsList(event, target);\r\n\t\t\t\t\t\tif (skillList.length > 0) {\r\n\t\t\t\t\t\t\tvar {control} = await player\r\n\t\t\t\t\t\t\t\t.chooseControl(skillList)\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", `选择${get.translation(target)}武将牌上的一个技能并令其失效`)\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\ttarget.disableSkill(\"newzhidianmrfz_disable\", control);\r\n\t\t\t\t\t\t\ttarget.addTempSkill(\"newzhidianmrfz_disable\", {\r\n\t\t\t\t\t\t\t\tplayer: \"phaseAfter\",\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tgame.log(player, \"选择了\", target, \"的技能\", \"#g【\" + get.translation(control) + \"】\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttarget.damage();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"选项三\":\r\n\t\t\t\t\t\ttarget.link(true);\r\n\t\t\t\t\t\tif (!player.storage.newzhidianmrfz) player.storage.newzhidianmrfz = [];\r\n\t\t\t\t\t\tplayer.storage.newzhidianmrfz.add(target);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"newzhidianmrfz_count\", \"newzhidianmrfz_clear\"],\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.2,\r\n\t\t\t\torder: 8,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tvar att = get.attitude(player, target);\r\n\t\t\t\t\t\tif (att < 0) {\r\n\t\t\t\t\t\t\treturn -(1 + target.countCards(\"he\") * 0.1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseAfter\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.newzhidianmrfz = [];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tcount: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\t\t\tplayer: [\"changeHp\", \"enterGame\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tlib.skill.newzhidianmrfz.usable = player.hp;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdisable: {\r\n\t\t\t\t\tonremove(player, skill) {\r\n\t\t\t\t\t\tplayer.enableSkill(skill);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlocked: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent(storage, player, skill) {\r\n\t\t\t\t\t\t\tvar list = [];\r\n\t\t\t\t\t\t\tfor (var i in player.disabledSkills) {\r\n\t\t\t\t\t\t\t\tif (player.disabledSkills[i].includes(skill)) list.push(i);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (list.length) {\r\n\t\t\t\t\t\t\t\tvar str = \"失效技能：\";\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\t\t\t\t\t\t\tif (lib.translate[list[i] + \"_info\"]) str += get.translation(list[i]) + \"、\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn str.slice(0, str.length - 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tnewpijimrfz: {\r\n\t\t\taudio: \"pijimrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCard\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tlocked: false,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn current != player && current.isLinked();\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\tgame.filterPlayer(current => {\r\n\t\t\t\t\t\treturn current != player && current.isLinked();\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\treturn arg.target.isLinked();\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: \"newpijimrfz_damage\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.isLinked() && event.getParent().name != \"newpijimrfz_damage\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.logSkill(\"newpijimrfz\");\r\n\t\t\t\t\t\tfor (var i of game.players) {\r\n\t\t\t\t\t\t\tif (player == i || !i.isLinked()) continue;\r\n\t\t\t\t\t\t\tplayer.line(i);\r\n\t\t\t\t\t\t\ti.damage();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//新塞雷娅\r\n\t\tnewgaihuamrfz: {\r\n\t\t\taudio: \"gaihuamrfz\",\r\n\t\t\tenable: [\"chooseToUse\", \"chooseToRespond\"],\r\n\t\t\thiddenCard: function (player, name) {\r\n\t\t\t\tif (lib.inpile.includes(name) && !player.hasSkill(\"newgaihuamrfz_ban\") && get.type(name) == \"basic\") return true;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.responded || event.newgaihuamrfz || player.hasSkill(\"newgaihuamrfz_ban\")) return false;\r\n\t\t\t\tfor (var i of lib.inpile) {\r\n\t\t\t\t\tif (get.type(i) == \"basic\" && event.filterCard({ name: i }, player, event)) return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar evt = event.getParent(2),\r\n\t\t\t\t\tstorage = player.storage.newgaihuamrfz_clear;\r\n\t\t\t\tevt.set(\"newgaihuamrfz\", true);\r\n\t\t\t\tlet list = [\"牌堆顶三张牌\"],\r\n\t\t\t\t\tlist2 = [\"选项一\"],\r\n\t\t\t\t\thd = [];\r\n\t\t\t\tif (ui.discardPile.childNodes.length > 2) {\r\n\t\t\t\t\tlist.add(\"弃牌堆顶三张牌\");\r\n\t\t\t\t\tlist2.add(\"选项二\");\r\n\t\t\t\t} else list.add('<span style=\"opacity:0.5\">弃牌堆顶三张牌(不可选:弃牌堆牌数小于3）</span>');\r\n\t\t\t\tfor (var i of game.players) {\r\n\t\t\t\t\tif (get.distance(player, i) > 1) continue;\r\n\t\t\t\t\tif (i.countCards(\"h\") < 1) continue;\r\n\t\t\t\t\tif (i == player) continue;\r\n\t\t\t\t\thd = hd.concat(i.getCards(\"h\"));\r\n\t\t\t\t}\r\n\t\t\t\tif (hd.length > 0) {\r\n\t\t\t\t\tlist.add(\"与你距离不大于1的其他角色的手牌\");\r\n\t\t\t\t\tlist2.add(\"选项三\");\r\n\t\t\t\t} else list.add('<span style=\"opacity:0.5\">与你距离不大于1的其他角色的手牌(不可选:你距离不大于1的其他角色没有手牌）</span>');\r\n\t\t\t\tconst {control} = await player\r\n\t\t\t\t\t.chooseControl(list2, \"cancel2\")\r\n\t\t\t\t\t.set(\"choiceList\", list)\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\tvar list = _status.event.list,\r\n\t\t\t\t\t\t\tplayer = _status.event.player,\r\n\t\t\t\t\t\t\thd = _status.event.hd;\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tgame.countPlayer(current => {\r\n\t\t\t\t\t\t\t\treturn player != current && get.distance(player, current) <= 1 && get.distance(player, current) < 0;\r\n\t\t\t\t\t\t\t}) < 1 ||\r\n\t\t\t\t\t\t\thd.length < 3\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\tlist.remove(\"选项三\");\r\n\t\t\t\t\t\tif (list.length == 0) return \"cancel2\";\r\n\t\t\t\t\t\treturn list.randomGet();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"list\", list2)\r\n\t\t\t\t\t.set(\"hd\", hd)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!control || control == \"cancel2\") {\r\n\t\t\t\t\tevt.goto(0);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar cards = [];\r\n\t\t\t\tswitch (control) {\r\n\t\t\t\t\tcase \"选项一\":\r\n\t\t\t\t\t\tcards = get.cards(3, true);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"选项二\":\r\n\t\t\t\t\t\tvar num = 3;\r\n\t\t\t\t\t\twhile (num--) {\r\n\t\t\t\t\t\t\tif (ui.discardPile.hasChildNodes() == false) {\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar cardx = ui.discardPile.removeChild(ui.discardPile.firstChild);\r\n\t\t\t\t\t\t\tcardx.original = \"d\";\r\n\t\t\t\t\t\t\tcards.push(cardx);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (let i = cards.length - 1; i >= 0; i--) {\r\n\t\t\t\t\t\t\tui.discardPile.insertBefore(cards[i], ui.discardPile.firstChild);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"选项三\":\r\n\t\t\t\t\t\tcards = hd;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tconst {links} = await player\r\n\t\t\t\t\t.chooseButton([\"【钙化】:选择要\" + (evt.name == \"chooseToUse\" ? \"使用\" : \"打出\") + \"的牌\", cards])\r\n\t\t\t\t\t.set(\"filterButton\", function (button) {\r\n\t\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\t\tevent = _status.event;\r\n\t\t\t\t\t\treturn _status.event.cards.includes(button.link);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\r\n\t\t\t\t\t\t\"cards\",\r\n\t\t\t\t\t\tcards.filter(function (card) {\r\n\t\t\t\t\t\t\tif (get.type(card) != \"basic\") return false;\r\n\t\t\t\t\t\t\treturn evt.filterCard(card, evt.player, evt);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"ai\", function (button) {\r\n\t\t\t\t\t\tvar evt = _status.event.getParent(3);\r\n\t\t\t\t\t\tif (evt && evt.ai) {\r\n\t\t\t\t\t\t\tvar tmp = _status.event;\r\n\t\t\t\t\t\t\t_status.event = evt;\r\n\t\t\t\t\t\t\tvar result = (evt.ai || event.ai1)(button.link, _status.event.player, evt);\r\n\t\t\t\t\t\t\t_status.event = tmp;\r\n\t\t\t\t\t\t\treturn result;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!links) {\r\n\t\t\t\t\tevt.goto(0);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar card = links[0],\r\n\t\t\t\t\tname = links[0].name;\r\n\t\t\t\tif (_status.currentPhase == player)\r\n\t\t\t\t\tplayer.addTempSkill(\"newgaihuamrfz_ban\", {\r\n\t\t\t\t\t\tglobal: \"phaseBeginStart\",\r\n\t\t\t\t\t});\r\n\t\t\t\tif (evt.name == \"chooseToUse\") {\r\n\t\t\t\t\tgame.broadcastAll(\r\n\t\t\t\t\t\tfunction (result, name) {\r\n\t\t\t\t\t\t\tlib.skill.newgaihuamrfz_backup.viewAs = {\r\n\t\t\t\t\t\t\t\tname: name,\r\n\t\t\t\t\t\t\t\tcards: [result],\r\n\t\t\t\t\t\t\t\tisCard: true,\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcard,\r\n\t\t\t\t\t\tname\r\n\t\t\t\t\t);\r\n\t\t\t\t\tvar evt = event.getParent(2);\r\n\t\t\t\t\tevt.set(\"_backupevent\", \"newgaihuamrfz_backup\");\r\n\t\t\t\t\tevt.set(\"openskilldialog\", \"请选择\" + get.translation(card) + \"的目标\");\r\n\t\t\t\t\tevt.backup(\"newgaihuamrfz_backup\");\r\n\t\t\t\t\tplayer.logSkill(\"gaihuamrfz\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdelete evt.result.skill;\r\n\t\t\t\t\tdelete evt.result.used;\r\n\t\t\t\t\tevt.result.card = get.autoViewAs(card);\r\n\t\t\t\t\tevt.result.cards = [card];\r\n\t\t\t\t\tplayer.logSkill(\"gaihuamrfz\");\r\n\t\t\t\t\tevt.redo();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tevt.goto(0);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget: function (card, player, target, effect) {\r\n\t\t\t\t\t\tif (get.tag(card, \"respondShan\")) return 0.7;\r\n\t\t\t\t\t\tif (get.tag(card, \"respondSha\")) return 0.7;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\torder: 11,\r\n\t\t\t\trespondShan: true,\r\n\t\t\t\trespondSha: true,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: function (player) {\r\n\t\t\t\t\t\tif (_status.event.dying) return get.attitude(player, _status.event.dying);\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tnewgaihuamrfz_backup: {\r\n\t\t\tsourceSkill: \"newgaihuamrfz\",\r\n\t\t\tprecontent: function () {\r\n\t\t\t\tdelete event.result.skill;\r\n\t\t\t\tvar name = event.result.card.name,\r\n\t\t\t\t\tcards = event.result.card.cards.slice(0);\r\n\t\t\t\tevent.result.cards = cards;\r\n\t\t\t\tvar rcard = cards[0],\r\n\t\t\t\t\tcard;\r\n\t\t\t\tif (rcard.name == name) card = get.autoViewAs(rcard);\r\n\t\t\t\telse card = get.autoViewAs({ name, isCard: true });\r\n\t\t\t\tevent.result.card = card;\r\n\t\t\t},\r\n\t\t\tfilterCard: function () {\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tselectCard: -1,\r\n\t\t},\r\n\t\tpanshimrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\ttargetEnabled: function (card, player, target) {\r\n\t\t\t\t\tfor (var i of game.players) {\r\n\t\t\t\t\t\tif (i.getHistory(\"useCard\").length > 0) return;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.getHistory(\"useCard\").length > 1) return false;\r\n\t\t\t\treturn event.card && (get.type2(event.card) == \"trick\" || (get.type(event.card) == \"basic\" && ![\"shan\", \"tao\", \"jiu\", \"du\"].includes(event.card.name)));\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//新玛恩纳\r\n\t\tlianmangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\ttarget: \"useCardToTargeted\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0 && event.card && event.player != player && !player.hasSkill(\"zhanmangmrfz_ban\");\r\n\t\t\t},\r\n\t\t\tbanHs: function (event, trigger, player) {\r\n\t\t\t\tplayer.addTempSkill(\"lianmangmrfz_ban\");\r\n\t\t\t\t_status.tmpCard = trigger.card;\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.when({\r\n\t\t\t\t\t\tglobal: \"useCardAfter\",\r\n\t\t\t\t\t\tplayer: \"dying\",\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.filter((event, player) => {\r\n\t\t\t\t\t\treturn event.card == _status.tmpCard || event.name == \"dying\";\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tplayer.removeSkill(\"lianmangmrfz_ban\");\r\n\t\t\t\t\t\tdelete _status.tmpCard;\r\n\t\t\t\t\t});\r\n\t\t\t\t// .emb({ firstDo: true });\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet num = get.cardNameLength(trigger.card);\r\n\t\t\t\tconst { cards } = await player\r\n\t\t\t\t\t.chooseCard(`【敛芒】:请重铸至多${get.cnNumber(num)}张牌`, [0, num], true)\r\n\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\tif (get.tag(card, \"damage\")) return 10 - get.value(card);\r\n\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"filterCard\", card => player.canRecast(card))\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards || cards.length == 0) {\r\n\t\t\t\t\tlib.skill.lianmangmrfz.banHs(event, trigger, player);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet hs = player.getCards(\"h\");\r\n\t\t\t\tawait player.recast(cards, undefined, undefined);\r\n\t\t\t\tif (cards.filter(i => get.tag(i, \"damage\")).length > 0) player.draw();\r\n\t\t\t\tif (hs.isSubset(cards)) trigger.player.damage();\r\n\t\t\t\tlib.skill.lianmangmrfz.banHs(event, trigger, player);\r\n\t\t\t},\r\n\t\t\tgroup: [\"lianmangmrfz_cancel\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardEnabled2: function (card, player) {\r\n\t\t\t\t\t\t\tif (get.position(card) == \"h\") return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tcancel: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\taudio: \"lianmangmrfz\",\r\n\t\t\t\t\ttrigger: { source: \"damageBefore\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn !player.hasSkill(\"zhanmangmrfz_ban\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet num = trigger.num;\r\n\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t\tlet list = [\"选项一\"];\r\n\t\t\t\t\t\tlet chooseList = [`摸${get.cnNumber(num)}张牌`, `回复${get.cnNumber(num)}点体力`];\r\n\t\t\t\t\t\tif (player.getDamagedHp() > 0) {\r\n\t\t\t\t\t\t\tlist.push(\"选项二\");\r\n\t\t\t\t\t\t} else chooseList[1] = '<span style=\"opacity:0.5\">' + chooseList[2] + \"（不可选：已损失体力值为零）</span>\";\r\n\t\t\t\t\t\tconst {control} =\r\n\t\t\t\t\t\t\tlist.length == 1\r\n\t\t\t\t\t\t\t\t? player.draw(num)\r\n\t\t\t\t\t\t\t\t: await player\r\n\t\t\t\t\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t\t\t\t\t.set(\"choiceList\", chooseList)\r\n\t\t\t\t\t\t\t\t\t\t.set(\"prompt\", \"【敛芒】:请选择一项\")\r\n\t\t\t\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\tvar list = _status.event.list;\r\n\t\t\t\t\t\t\t\t\t\t\tif (list.includes(\"选项二\")) return \"选项二\";\r\n\t\t\t\t\t\t\t\t\t\t\treturn \"选项一\";\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.set(\"list\", list)\r\n\t\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (!control) return;\r\n\t\t\t\t\t\tswitch (control) {\r\n\t\t\t\t\t\t\tcase \"选项一\":\r\n\t\t\t\t\t\t\t\tplayer.draw(num);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase \"选项二\":\r\n\t\t\t\t\t\t\t\tplayer.recover(num);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 0.8,\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget: function (card, player, target) {\r\n\t\t\t\t\t\tif (get.tag(card, \"damage\")) return [0, -999999];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhanmangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > player.getHandcardLimit();\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\tvar num = Math.min(player.maxHp, player.countCards(\"h\") - player.getHandcardLimit());\r\n\t\t\t\treturn `【展芒】:你可以摸${get.cnNumber(num)}张牌、本回合使用【杀】的次数+${num}，且本回合【敛芒】失效`;\r\n\t\t\t},\r\n\t\t\tcontent() {\r\n\t\t\t\tvar num = Math.min(player.maxHp, player.countCards(\"h\") - player.getHandcardLimit());\r\n\t\t\t\tplayer.draw(num);\r\n\t\t\t\tplayer.addMark(\"zhanmangmrfz_add\", num, false);\r\n\t\t\t\tplayer.addTempSkill(\"zhanmangmrfz_add\", {\r\n\t\t\t\t\tplayer: \"phaseEnd\",\r\n\t\t\t\t});\r\n\t\t\t\tplayer.addTempSkill(\"zhanmangmrfz_ban\", {\r\n\t\t\t\t\tplayer: \"phaseEnd\",\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\t\t\treturn `·【敛芒】失效<br>·本回合使用【杀】的次数+${player.countMark(\"zhanmangmrfz_add\")}`;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tadd: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tvar count = player.countMark(\"zhanmangmrfz_add\");\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num + count;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: function () {\r\n\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\tnum = player.countCards(\"h\") - player.getHandcardLimit();\r\n\t\t\t\t\treturn 1 + Math.max(0.2, num * 0.2);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txingyimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"phaseJieshuBegin\" },\r\n\t\t\tgetDamagedTarget: function (event, player) {\r\n\t\t\t\tlet list = [];\r\n\t\t\t\tfor (var i of game.players) {\r\n\t\t\t\t\tif (player == i) continue;\r\n\t\t\t\t\tlet history = i.getHistory(\"damage\");\r\n\t\t\t\t\tfor (var j = 0; j < history.length; j++) {\r\n\t\t\t\t\t\tlet damaged = history[j].player;\r\n\t\t\t\t\t\tlist.push(damaged);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn list;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar list = lib.skill.xingyimrfz.getDamagedTarget(event, player);\r\n\t\t\t\treturn list.length > 0 && _status.currentPhase != player;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet list = lib.skill.xingyimrfz.getDamagedTarget(event, player);\r\n\t\t\t\tconst {targets} = await player\r\n\t\t\t\t\t.chooseTarget(\"【行义】:你可以受到一点伤害并令一名本回合受到过伤害的其他角色回复一点体力\")\r\n\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\tvar list = _status.event.list;\r\n\t\t\t\t\t\treturn list.includes(target);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\tif (player.hp < 2 && player.countCards(\"h\", \"tao\") + player.countCards(\"h\", \"jiu\") < 1) return 0;\r\n\t\t\t\t\t\treturn get.attitude(target, player) > 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"list\", list)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!targets) return;\r\n\t\t\t\ttargets[0].recover();\r\n\t\t\t\tplayer.damage(\"nosource\");\r\n\t\t\t\tplayer.logSkill(\"xingyimrfz\", targets[0]);\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//左乐\r\n\t\tqikumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"gainBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") == 0 && event.getParent(2).name != \"qikumrfz\";\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tcontent() {\r\n\t\t\t\tvar num = player.maxHp - trigger.cards.length;\r\n\t\t\t\tplayer.draw(num);\r\n\t\t\t},\r\n\t\t},\r\n\t\t/** @type { Skill } */\r\n\t\tbingzhumrfz: {\r\n\t\t\tmarktext: \"司\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"司\",\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t\tcontent: \"expansion\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar suit = [];\r\n\t\t\t\tfor (var i of player.getCards(\"h\")) {\r\n\t\t\t\t\tif (suit.includes(get.suit(i))) continue;\r\n\t\t\t\t\tsuit.push(get.suit(i));\r\n\t\t\t\t}\r\n\t\t\t\tif (suit.length == 0) return;\r\n\t\t\t\tconst {control} = await player\r\n\t\t\t\t\t.chooseControl(suit, \"cancel2\")\r\n\t\t\t\t\t.set(\"prompt\", \"【秉烛】:请选择一种花色\")\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\tvar suit = _status.event.suit;\r\n\t\t\t\t\t\treturn suit.randomGet();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"suit\", suit)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!control || control == \"cancel2\") {\r\n\t\t\t\t\tif (control == \"cancel2\") {\r\n\t\t\t\t\t\tplayer.setSkillCount(\"bingzhumrfz\", -1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar hs = player.getCards(\"h\", card => {\r\n\t\t\t\t\treturn get.suit(card) == control;\r\n\t\t\t\t});\r\n\t\t\t\tif (hs.length == 0) return;\r\n\t\t\t\tlet list = [];\r\n\t\t\t\twhile (hs.length) {\r\n\t\t\t\t\tconst {cards} = await player\r\n\t\t\t\t\t\t.chooseCard(true, `【秉烛】:请分配第${get.cnNumber(list.length + 1)}组手牌`)\r\n\t\t\t\t\t\t.set(\"selectCard\", function () {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tvar num = game.countPlayer(current => current != player) - (list.length + 1) > 0 ? 1 : hs.length;\r\n\t\t\t\t\t\t\treturn [num, Infinity];\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\tif (!ui.selected.cards) return 1;\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tgame.countPlayer(current => {\r\n\t\t\t\t\t\t\t\t\treturn current != player && get.attitude(current, player) < 0;\r\n\t\t\t\t\t\t\t\t}) < 2\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\tfor (var i of ui.selected.cards) {\r\n\t\t\t\t\t\t\t\tif (get.suit(i) == get.suit(card)) return [-1, -1, 1, 1].randomGet();\r\n\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"filterCard\", card => {\r\n\t\t\t\t\t\t\tvar hs = _status.event.hs;\r\n\t\t\t\t\t\t\treturn hs.includes(card);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"hs\", hs)\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (!cards) continue;\r\n\t\t\t\t\tlist.push([cards]);\r\n\t\t\t\t\ths.removeArray(cards);\r\n\t\t\t\t}\r\n\t\t\t\tlet count = list.length,\r\n\t\t\t\t\tlist2 = [];\r\n\t\t\t\twhile (count) {\r\n\t\t\t\t\tconst {targets} = await player\r\n\t\t\t\t\t\t.chooseTarget(true, `【秉烛】:请将${get.translation(list[list2.length])}置于一名其他角色的武将牌上`)\r\n\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\treturn get.attitude(player, target) < 0;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"filterTarget\", lib.filter.notMe)\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tcount--;\r\n\t\t\t\t\tif (!targets) continue;\r\n\t\t\t\t\tlist2.push(targets[0]);\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0; i < list2.length; i++) {\r\n\t\t\t\t\tlist2[i].addToExpansion(list[i][0], list2[i], \"giveAuto\").gaintag.add(\"bingzhumrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"bingzhumrfz_clear\", \"bingzhumrfz_eff\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"useCardToTargeted\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar cards = event.player.getExpansions(\"bingzhumrfz\");\r\n\t\t\t\t\t\tif (!cards.length || !event.card) return false;\r\n\t\t\t\t\t\tif (get.type2(event.card) != \"trick\" && get.type(event.card) != \"basic\") return false;\r\n\t\t\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\t\t\tif (get.name(i) == get.name(event.card) || get.suit(i) == get.suit(event.card)) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar cards = trigger.player.getExpansions(\"bingzhumrfz\").filter(i => get.name(i) == get.name(trigger.card) || get.suit(i) == get.suit(trigger.card));\r\n\t\t\t\t\t\tconst {\r\n\t\t\t\t\t\t\tresult: { bool, links },\r\n\t\t\t\t\t\t} = await player.chooseCardButton(\"【秉烛】:你可以弃置其一张‘司’并令此牌对一名目标角色无效\", cards).set(\"ai\", () => {\r\n\t\t\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\t\t\tevent = _status.event.getTrigger(),\r\n\t\t\t\t\t\t\t\tfriend = game.filterPlayer(current => current == player || get.attitude(current, player) > 0);\r\n\t\t\t\t\t\t\tfor (var i of event.targets) {\r\n\t\t\t\t\t\t\t\tif (friend.includes(i)) return 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (!bool) return;\r\n\t\t\t\t\t\tconst {targets} = await player\r\n\t\t\t\t\t\t\t.chooseTarget(\"【秉烛】:请选择一名目标角色，然后此牌对该角色无效\", true)\r\n\t\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\treturn get.attitude(target, player) > 0;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\r\n\t\t\t\t\t\t\t\tvar targets = _status.event.targets;\r\n\t\t\t\t\t\t\t\treturn targets.includes(target);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"targets\", trigger.targets)\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (!targets) return;\r\n\t\t\t\t\t\ttrigger.getParent().excluded.add(targets[0]);\r\n\t\t\t\t\t\ttrigger.player.loseToDiscardpile(links);\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\tplayer.logSkill(\"bingzhumrfz\", targets[0]);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"dieAfter\" },\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\tfor (var i of game.players) {\r\n\t\t\t\t\t\t\tvar cards = i.getExpansions(\"bingzhumrfz\");\r\n\t\t\t\t\t\t\tif (cards.length) i.loseToDiscardpile(cards);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//新山\r\n\t\tzhefumrfz: {\r\n\t\t\taudio: \"zhuangtimrfz\",\r\n\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"h\", card => get.tag(card, \"damage\")) > 0;\r\n\t\t\t},\r\n\t\t\tprompt(event, player) {\r\n\t\t\t\treturn `【蛰伏】:是否将手牌中所有带有伤害类标签的牌置入弃牌堆或牌堆顶并摸等量的牌？`;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet cards = player.getCards(\"h\", card => get.tag(card, \"damage\"));\r\n\t\t\t\tif (!cards.length) return;\r\n\t\t\t\tconst {moved} = await player\r\n\t\t\t\t\t.chooseToMove()\r\n\t\t\t\t\t.set(\"list\", [[\"牌堆底\", cards], [\"弃牌堆\"]])\r\n\t\t\t\t\t.set(\"processAI\", list => {\r\n\t\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\t\tcards = list[0][1],\r\n\t\t\t\t\t\t\tcanUse = cards.filter(i => player.canUseToAnyone(i)),\r\n\t\t\t\t\t\t\tbottom = [],\r\n\t\t\t\t\t\t\tdisPile = [];\r\n\t\t\t\t\t\tvar red = 0,\r\n\t\t\t\t\t\t\tblack = 0;\r\n\t\t\t\t\t\tfor (var i of canUse) {\r\n\t\t\t\t\t\t\tvar color = get.color(i);\r\n\t\t\t\t\t\t\tif (!color) continue;\r\n\t\t\t\t\t\t\telse if (color == \"red\") red += get.value(i);\r\n\t\t\t\t\t\t\telse black += get.value(i);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (red > black) bottom = canUse.slice().filter(i => get.color(i) == \"red\");\r\n\t\t\t\t\t\telse bottom = canUse.slice().filter(i => get.color(i) == \"black\");\r\n\t\t\t\t\t\tbottom.sort(function (a, b) {\r\n\t\t\t\t\t\t\treturn get.value(b, player) - get.value(a, player);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tdisPile = cards.slice().filter(i => !bottom.includes(i));\r\n\t\t\t\t\t\treturn [bottom, disPile];\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!moved) return;\r\n\t\t\t\tvar bottom = moved[0],\r\n\t\t\t\t\tdisPile = moved[1];\r\n\t\t\t\tconsole.log(moved);\r\n\t\t\t\tif (disPile.length) player.loseToDiscardpile(disPile);\r\n\t\t\t\tif (bottom.length) {\r\n\t\t\t\t\tgame.log(player, \"将\", get.cnNumber(bottom.length), \"置入了牌堆底\");\r\n\t\t\t\t\tfor (var i of bottom) ui.cardPile.appendChild(i);\r\n\t\t\t\t\tplayer.$throw(bottom.length, 1000);\r\n\t\t\t\t}\r\n\t\t\t\tawait player.draw(cards.length);\r\n\t\t\t},\r\n\t\t},\r\n\t\tyubianmrfz: {\r\n\t\t\taudio: \"julimrfz\",\r\n\t\t\ttrigger: { player: \"phaseJieshuBegin\" },\r\n\t\t\tprompt(event, player) {\r\n\t\t\t\treturn `【狱变】:你可以使用牌堆顶的牌（目标必须合法），若你因此使用的牌颜色均相同，你重复这个流程`;\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn current != player && player.canUse(\"sha\", current) && get.attitude(player, current) < 0;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet cardx = [],\r\n\t\t\t\t\tcolor;\r\n\t\t\t\twhile (true) {\r\n\t\t\t\t\tvar card = get.bottomCards()[0];\r\n\t\t\t\t\tplayer.$throw(card, null);\r\n\t\t\t\t\tif (!player.hasUseTarget(card)) return;\r\n\t\t\t\t\tconst result = await player.chooseUseTarget(card, `【狱变】:请选择${get.translation(card)}的目标`);\r\n\t\t\t\t\tif (!result) return;\r\n\t\t\t\t\tvar cards = result.cards;\r\n\t\t\t\t\tfor (var i of cards) cardx.push(i);\r\n\t\t\t\t\tcolor = get.color(cards[0]);\r\n\t\t\t\t\tfor (var i of cardx) {\r\n\t\t\t\t\t\tif (get.color(i) != color) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcolor = get.color(i);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//新空弦\r\n\t\tsanyimrfz: {\r\n\t\t\taudio: \"lieshimrfz\",\r\n\t\t\ttrigger: { player: \"useCard2\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (!event.card) return false;\r\n\t\t\t\tif (get.name(event.card) != \"sha\" || get.number(event.card) == null) return false;\r\n\t\t\t\treturn event.targets && event.targets.length == 1;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst {targets} = await player\r\n\t\t\t\t\t.chooseTarget()\r\n\t\t\t\t\t.set(\"forced\", true)\r\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\r\n\t\t\t\t\t\tif (target == player || _status.event.targets.includes(target) || !player.canUse(_status.event.cardx, target, false)) return false;\r\n\t\t\t\t\t\tvar selected = ui.selected.targets,\r\n\t\t\t\t\t\t\tbase = _status.event.targetx.hp;\r\n\t\t\t\t\t\tvar total = Object.values(selected).reduce((accumulator, currentValue) => {\r\n\t\t\t\t\t\t\tif (currentValue.hasOwnProperty(\"hp\")) {\r\n\t\t\t\t\t\t\t\treturn accumulator + currentValue.hp;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn accumulator;\r\n\t\t\t\t\t\t}, 0);\r\n\t\t\t\t\t\treturn target.hp + total + base <= _status.event.cardx.number;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"prompt\", `【散逸】:你可以额外指定任意名体力值之和不超过${trigger.card.number - trigger.targets[0].hp}的角色`)\r\n\t\t\t\t\t.set(\"selectTarget\", [0, Infinity])\r\n\t\t\t\t\t.set(\"complexTarget\", true)\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\treturn get.effect(target, _status.event.cardx, _status.event.player, _status.event.player) > 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"targets\", trigger.targets)\r\n\t\t\t\t\t.set(\"targetx\", trigger.targets[0])\r\n\t\t\t\t\t.set(\"cardx\", trigger.card)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!targets) return false;\r\n\t\t\t\tfor (var i of targets) {\r\n\t\t\t\t\ttrigger.targets.push(i);\r\n\t\t\t\t\tplayer.line(i);\r\n\t\t\t\t}\r\n\t\t\t\tplayer.logSkill(\"sanyimrfz\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tbaofengmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.card && get.name(event.card) == \"sha\" && get.color(event.card) != \"none\";\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst {bool} = await player\r\n\t\t\t\t\t.chooseUseTarget(\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\t\tsuit: \"none\",\r\n\t\t\t\t\t\t\tnumber: trigger.card.number,\r\n\t\t\t\t\t\t\tnature: trigger.card.nature,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfalse,\r\n\t\t\t\t\t\tfalse\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"prompt\", `【追矢】:你可以视为使用一张无色且点数为${trigger.card.number}的${get.translation(trigger.card.nature)}【杀】`)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!bool) return;\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//ela 艾拉\r\n\t\tzuzhimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.card && get.color(event.card) != \"none\" && event.player && event.player.isIn() && (!event.player.storage.zuzhimrfz || !event.player.storage.zuzhimrfz.includes(get.color(event.card)));\r\n\t\t\t},\r\n\t\t\tprompt(event, player) {\r\n\t\t\t\treturn `【阻滞】:是否令${event.player == player ? \"你\" : get.translation(event.player)}本回合无法使用或打出${get.translation(get.color(event.card))}的牌？`;\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\treturn get.attitude(event.player, player) < 0;\r\n\t\t\t},\r\n\t\t\tcontent() {\r\n\t\t\t\tvar target = trigger.player;\r\n\t\t\t\tif (!target.storage.zuzhimrfz_ban) target.storage.zuzhimrfz_ban = [];\r\n\t\t\t\ttarget.storage.zuzhimrfz_ban.add(get.color(trigger.card));\r\n\t\t\t\ttarget.addTempSkill(\"zuzhimrfz_ban\", {\r\n\t\t\t\t\tglobal: \"phaseEnd\",\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\t\t\treturn `本回合不能使用或打出${get.translation(player.storage.zuzhimrfz_ban)}的牌`;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardEnabled: function (card, player) {\r\n\t\t\t\t\t\t\tif (player.getStorage(\"zuzhimrfz_ban\").includes(get.color(card))) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcardRespondable: function (card, player) {\r\n\t\t\t\t\t\t\tif (player.getStorage(\"zuzhimrfz_ban\").includes(get.color(card))) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcardSavable: function (card, player) {\r\n\t\t\t\t\t\t\tif (player.getStorage(\"zuzhimrfz_ban\").includes(get.color(card))) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tleimingmrfz: {\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\tif (game.me == player) {\r\n\t\t\t\t\t\treturn `记录的内容：${get.translation(player.storage.leimingmrfz)}`;\r\n\t\t\t\t\t} else return `有${player.storage.leimingmrfz.length}个记录的内容`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.storage.leimingmrfz = [];\r\n\t\t\t\tvar list1 = [],\r\n\t\t\t\t\tlist2 = [],\r\n\t\t\t\t\tlist3 = [],\r\n\t\t\t\t\tlist4 = [];\r\n\t\t\t\tfor (var i = 0; i < lib.inpile.length; i++) {\r\n\t\t\t\t\tvar type = get.type(lib.inpile[i]);\r\n\t\t\t\t\tif (type == \"basic\") {\r\n\t\t\t\t\t\tlist1.push([\"基本\", \"\", lib.inpile[i]]);\r\n\t\t\t\t\t} else if (type == \"trick\") {\r\n\t\t\t\t\t\tlist2.push([\"锦囊\", \"\", lib.inpile[i]]);\r\n\t\t\t\t\t} else if (type == \"delay\") {\r\n\t\t\t\t\t\tlist3.push([\"锦囊\", \"\", lib.inpile[i]]);\r\n\t\t\t\t\t} else if (type == \"equip\") {\r\n\t\t\t\t\t\tlist3.push([\"装备\", \"\", lib.inpile[i]]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconst {links} = await player\r\n\t\t\t\t\t.chooseButton([get.prompt(\"leimingmrfz\"), [list1.concat(list2).concat(list3).concat(list4), \"vcard\"]])\r\n\t\t\t\t\t.set(\"filterButton\", function (button) {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\tif (player.storage.leimingmrfz.includes(button.link[2])) return false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", function (button) {\r\n\t\t\t\t\t\tvar rand = _status.event.rand;\r\n\t\t\t\t\t\tswitch (button.link[2]) {\r\n\t\t\t\t\t\t\tcase \"sha\":\r\n\t\t\t\t\t\t\t\treturn 5 + rand[1];\r\n\t\t\t\t\t\t\tcase \"tao\":\r\n\t\t\t\t\t\t\t\treturn 4 + rand[2];\r\n\t\t\t\t\t\t\tcase \"lebu\":\r\n\t\t\t\t\t\t\t\treturn 3 + rand[3];\r\n\t\t\t\t\t\t\tcase \"shan\":\r\n\t\t\t\t\t\t\t\treturn 4.5 + rand[4];\r\n\t\t\t\t\t\t\tcase \"wuzhong\":\r\n\t\t\t\t\t\t\t\treturn 4 + rand[5];\r\n\t\t\t\t\t\t\tcase \"shunshou\":\r\n\t\t\t\t\t\t\t\treturn 3 + rand[6];\r\n\t\t\t\t\t\t\tcase \"nanman\":\r\n\t\t\t\t\t\t\t\treturn 2 + rand[7];\r\n\t\t\t\t\t\t\tcase \"wanjian\":\r\n\t\t\t\t\t\t\t\treturn 2 + rand[8];\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\treturn rand[0];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"rand\", [Math.random(), Math.random(), Math.random(), Math.random(), Math.random(), Math.random(), Math.random(), Math.random(), Math.random()])\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!links) return;\r\n\t\t\t\tplayer.logSkill(\"leimingmrfz\");\r\n\t\t\t\tplayer.storage.leimingmrfz.add(links[0][2]);\r\n\t\t\t\tvar {control} = await player\r\n\t\t\t\t\t.chooseControl(lib.suit)\r\n\t\t\t\t\t.set(\"prompt\", \"【雷鸣】:请选择一种花色\")\r\n\t\t\t\t\t.set(\"ai\", () => lib.suit.randomGet())\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!control) return;\r\n\t\t\t\tplayer.storage.leimingmrfz.add(control);\r\n\t\t\t\tvar {control} = await player\r\n\t\t\t\t\t.chooseControl(\"basic\", \"trick\", \"equip\")\r\n\t\t\t\t\t.set(\"prompt\", \"【雷鸣】:请选择一种类型\")\r\n\t\t\t\t\t.set(\"ai\", () => [\"basic\", \"basic\", \"basic\", \"trick\", \"trick\", \"equip\"].randomGet())\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!control) return;\r\n\t\t\t\tplayer.storage.leimingmrfz.add(control);\r\n\t\t\t},\r\n\t\t\tgroup: \"leimingmrfz_eff\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\taudio: \"leimingmrfz\",\r\n\t\t\t\t\ttrigger: { global: \"useCard\" },\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tvar storage = player.storage.leimingmrfz,\r\n\t\t\t\t\t\t\tcard = event.card;\r\n\t\t\t\t\t\tif (player.storage.leimingmrfz_eff) return false;\r\n\t\t\t\t\t\tif (!storage || storage.length == 0) return false;\r\n\t\t\t\t\t\tif (player == event.player) return false;\r\n\t\t\t\t\t\treturn storage.includes(get.suit(card, event.player)) || storage.includes(get.name(card, event.player)) || storage.includes(get.type2(card, event.player));\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt(event, player) {\r\n\t\t\t\t\t\treturn `【雷鸣】:是否视为对${get.translation(event.player)}使用一张任意颜色的雷【杀】？`;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck(event, player) {\r\n\t\t\t\t\t\tif (get.attitude(event.player, player) > 0) return false;\r\n\t\t\t\t\t\treturn get.effect(event.player, { name: \"sha\", nature: \"thunder\" }, player, player) > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.leimingmrfz_eff = true;\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.when({\r\n\t\t\t\t\t\t\t\tplayer: \"leimingmrfz_effAfter\",\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\tdelete player.storage.leimingmrfz_eff;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// .emb({ firstDo: true });\r\n\t\t\t\t\t\tvar target = trigger.player;\r\n\t\t\t\t\t\t// if (target.countDiscardableCards(player, 'he')) player.discardPlayerCard('he', true, target)\r\n\t\t\t\t\t\t//     .set('target', target)\r\n\t\t\t\t\t\t//     .set('ai', lib.card.guohe.ai.button);\r\n\t\t\t\t\t\tif (player.canUse({ name: \"sha\", nature: \"thunder\" }, target, false)) {\r\n\t\t\t\t\t\t\tvar {control} = await player\r\n\t\t\t\t\t\t\t\t.chooseControl(\"red\", \"black\")\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", `【雷鸣】:请选择使用雷【杀】的颜色`)\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\t\t\t\t\ttarget = _status.event.target;\r\n\t\t\t\t\t\t\t\t\tvar red = get.effect(\r\n\t\t\t\t\t\t\t\t\t\t\ttarget,\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tnature: \"thunder\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor: \"red\",\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\tplayer,\r\n\t\t\t\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\tblack = get.effect(\r\n\t\t\t\t\t\t\t\t\t\t\ttarget,\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tnature: \"thunder\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor: \"black\",\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\tplayer,\r\n\t\t\t\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\tif (red > black) return 0;\r\n\t\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"target\", target)\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\tif (!control) return;\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tplayer.canUse(\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\t\t\t\t\tnature: \"thunder\",\r\n\t\t\t\t\t\t\t\t\t\tcolor: control,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\ttarget,\r\n\t\t\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tplayer.useCard(\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\t\t\t\t\tnature: \"thunder\",\r\n\t\t\t\t\t\t\t\t\t\tcolor: control,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\ttarget,\r\n\t\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar list = [],\r\n\t\t\t\t\t\t\tstorage = player.storage.leimingmrfz,\r\n\t\t\t\t\t\t\tcard = trigger.card;\r\n\t\t\t\t\t\tif (storage.includes(get.name(card, target))) list.push(get.name(card, target));\r\n\t\t\t\t\t\tif (storage.includes(get.suit(card, target))) list.push(get.suit(card, target));\r\n\t\t\t\t\t\tif (storage.includes(get.type2(card, target))) list.push(get.type2(card, target));\r\n\t\t\t\t\t\tvar {control} =\r\n\t\t\t\t\t\t\tlist.length == 1\r\n\t\t\t\t\t\t\t\t? {control:list[0]}\r\n\t\t\t\t\t\t\t\t: await player\r\n\t\t\t\t\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t\t\t\t\t.set(\"prompt\", `【雷鸣】:请选择清除一个记录`)\r\n\t\t\t\t\t\t\t\t\t\t.set(\"list\", list)\r\n\t\t\t\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\tvar list = _status.event.list;\r\n\t\t\t\t\t\t\t\t\t\t\treturn list.randomGet();\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (!control) return;\r\n\t\t\t\t\t\tplayer.storage.leimingmrfz.remove(control);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//阿斯卡纶\r\n\t\tdunyingmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tglobalTo(from, to, distance) {\r\n\t\t\t\t\tvar cards = to.getCards(\"s\", function (card) {\r\n\t\t\t\t\t\treturn card.hasGaintag(\"dunyingmrfz\");\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (cards.length) return distance + 1;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmarktext: \"影\",\r\n\t\t\tintro: {\r\n\t\t\t\tmark: function (dialog, storage, player) {\r\n\t\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\t\treturn card.hasGaintag(\"dunyingmrfz\");\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (game.me == player) dialog.addAuto(cards);\r\n\t\t\t\t\telse return `共有${cards.length}张牌`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tonremove: function (player, skill) {\r\n\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\treturn card.hasGaintag(\"dunyingmrfz\");\r\n\t\t\t\t});\r\n\t\t\t\tif (cards.length) {\r\n\t\t\t\t\tplayer.lose(cards, ui.discardPile);\r\n\t\t\t\t\tplayer.$throw(cards, 1000);\r\n\t\t\t\t\tgame.log(cards, \"进入了弃牌堆\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseJieshuBegin\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\treturn card.hasGaintag(\"dunyingmrfz\");\r\n\t\t\t\t});\r\n\t\t\t\tif (\r\n\t\t\t\t\tplayer.countCards(\"h\", card => {\r\n\t\t\t\t\t\treturn !card.hasGaintag(\"dunyingmrfz\");\r\n\t\t\t\t\t}) < 1\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\treturn cards.length < player.maxHp;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar num = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\treturn card.hasGaintag(\"dunyingmrfz\");\r\n\t\t\t\t}).length;\r\n\t\t\t\tconst {cards} =\r\n\t\t\t\t\tplayer.countCards(\"h\", card => {\r\n\t\t\t\t\t\treturn !card.hasGaintag(\"dunyingmrfz\");\r\n\t\t\t\t\t}) +\r\n\t\t\t\t\t\tnum <=\r\n\t\t\t\t\tplayer.maxHp\r\n\t\t\t\t\t\t? {cards:player.getCards(\"h\")}\r\n\t\t\t\t\t\t: await player\r\n\t\t\t\t\t\t\t\t.chooseCard(\"h\", get.prompt(\"dunyingmrfz\"), \"将所有手牌置于武将牌上，称之为“影”\", true)\r\n\t\t\t\t\t\t\t\t.set(\"selectCard\", () => {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\t\tvar num = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\t\t\t\t\t\treturn card.hasGaintag(\"dunyingmrfz\");\r\n\t\t\t\t\t\t\t\t\t}).length;\r\n\t\t\t\t\t\t\t\t\treturn player.maxHp - num;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"filterCard\", card => {\r\n\t\t\t\t\t\t\t\t\treturn !card.hasGaintag(\"dunyingmrfz\");\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\t\tif (player.hasUseTarget(card) && !player.hasValueTarget(card)) return 0;\r\n\t\t\t\t\t\t\t\t\tif ([\"sha\", \"shan\", \"wuxie\", \"caochuan\"].includes(card.name)) return 2 + Math.random();\r\n\t\t\t\t\t\t\t\t\treturn 1 + Math.random();\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\tgame.log(player, \"将\", cards.length, \"张牌置于在武将牌上\");\r\n\t\t\t\tplayer.loseToSpecial(cards, \"dunyingmrfz\");\r\n\t\t\t\tplayer.markSkill(\"dunyingmrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"dunyingmrfz_gain\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tgain: {\r\n\t\t\t\t\taudio: \"dunyingmrfz\",\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tusable: 1,\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\t\t\treturn card.hasGaintag(\"dunyingmrfz\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (!event.cards.length) return cards.length < player.maxHp;\r\n\t\t\t\t\t\tvar position = event.card.cards.map(i => i.original);\r\n\t\t\t\t\t\treturn position.every(item => item != \"h\") && cards.length < player.maxHp;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: \"【遁影】:你可以将牌堆顶的一张牌置于你的武将牌上，称之为“影”\",\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\tvar cards = get.cards();\r\n\t\t\t\t\t\tgame.log(player, \"将一张牌置于在武将牌上\");\r\n\t\t\t\t\t\tplayer.loseToSpecial(cards, \"dunyingmrfz\");\r\n\t\t\t\t\t\tplayer.markSkill(\"dunyingmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tniximrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"phaseJieshuBegin\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.player.isIn() && event.player != player && player.canUse(\"sha\", event.player, false);\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst {cards} = await player\r\n\t\t\t\t\t.chooseToUse(\r\n\t\t\t\t\t\tfunction (card, player, event) {\r\n\t\t\t\t\t\t\tif (get.name(card) != \"sha\") return false;\r\n\t\t\t\t\t\t\treturn lib.filter.filterCard.apply(this, arguments);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\"【匿袭】是否对\" + get.translation(trigger.player) + \"使用一张杀？\"\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"logSkill\", \"niximrfz\")\r\n\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\tif (target != _status.event.sourcex && !ui.selected.targets.includes(_status.event.sourcex)) return false;\r\n\t\t\t\t\t\treturn lib.filter.targetEnabled.apply(this, arguments);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"sourcex\", trigger.player)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\tvar isDamaged = player.hasHistory(\"useCard\", evt => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\tevt.getParent(2) == event &&\r\n\t\t\t\t\t\tevt.card &&\r\n\t\t\t\t\t\tevt.card.cardid &&\r\n\t\t\t\t\t\tplayer.hasHistory(\"sourceDamage\", evtx => {\r\n\t\t\t\t\t\t\treturn evtx.card && evt.card.cardid == evtx.card.cardid;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\t\t\t\tif (!isDamaged && player.isIn() && trigger.player.isIn()) {\r\n\t\t\t\t\tvar target = trigger.player,\r\n\t\t\t\t\t\ttargetx = trigger.player,\r\n\t\t\t\t\t\tlist = [];\r\n\t\t\t\t\tif (target.getNext() == player) return;\r\n\t\t\t\t\tconst {bool} = await player.chooseBool(`【匿袭】:是否将座位移到${get.translation(trigger.player)}下家？`).forResult();\r\n\t\t\t\t\tif (!bool) return;\r\n\t\t\t\t\twhile (targetx.getNext() != player) {\r\n\t\t\t\t\t\ttargetx = targetx.getNext();\r\n\t\t\t\t\t\tlist.push(targetx);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (list.length == 0) return;\r\n\t\t\t\t\tlist.reverse();\r\n\t\t\t\t\tfor (var i of list) {\r\n\t\t\t\t\t\tawait game.broadcastAll(\r\n\t\t\t\t\t\t\tfunction (target1, target2) {\r\n\t\t\t\t\t\t\t\tgame.swapSeat(target1, target2);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\ti,\r\n\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// logos 逻格斯 李狗剩\r\n\t\tbaidumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"damageEnd\",\r\n\t\t\t},\r\n\t\t\tusable: 1,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (!event.card) return false;\r\n\t\t\t\tvar num = get.cardNameLength(event.card);\r\n\t\t\t\tif (typeof num !== \"number\" || num < 1) return false;\r\n\t\t\t\treturn player.countCards(\"he\") > 0 && event.player.isIn();\r\n\t\t\t},\r\n\t\t\t// direct: true,\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tlet sourceCards = trigger.cards || undefined;\r\n\t\t\t\tconst { result } = await player\r\n\t\t\t\t\t.chooseToDiscard(\"he\")\r\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"baidumrfz\"))\r\n\t\t\t\t\t.set(\"prompt2\", `你可以弃置一张牌，${sourceCards === undefined ? \"(\" + get.translation(trigger.card) + \"无对应的实体牌)\" : \"你获得\" + get.translation(trigger.card) + \"(\" + get.translation(sourceCards) + \"),\"}然后${get.translation(trigger.player)}摸你弃置的牌与对其造成伤害的牌的字数之差的绝对值张牌。`)\r\n\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\t\ttarget = _status.event.targetx,\r\n\t\t\t\t\t\t\tcardx = trigger.card,\r\n\t\t\t\t\t\t\tatt = get.attitude(player, target);\r\n\t\t\t\t\t\tif (att > 0) {\r\n\t\t\t\t\t\t\treturn Math.abs(get.cardNameLength(cardx) - get.cardNameLength(card)) - Math.floor(get.value(card) / 10);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (Math.abs(get.cardNameLength(cardx) - get.cardNameLength(card)) > cardx.cards.length) return 0;\r\n\t\t\t\t\t\t\treturn get.value(cardx.cards) - get.value(card);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"targetx\", trigger.player)\r\n\t\t\t\t\t.set(\"cardx\", trigger.card);\r\n\t\t\t\tevent.result = result;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet sourceCards = trigger.cards || undefined;\r\n\t\t\t\tlet cards = event.cards;\r\n\t\t\t\tvar gaincard = [];\r\n\t\t\t\tfor (var i of sourceCards) {\r\n\t\t\t\t\tif (get.position(i, true) == \"o\") gaincard.push(i);\r\n\t\t\t\t}\r\n\t\t\t\tif (gaincard.length > 0) player.gain(gaincard, \"gain2\");\r\n\t\t\t\tvar num = Math.abs(get.cardNameLength(trigger.card) - get.cardNameLength(cards[0]));\r\n\t\t\t\tif (num > 0) trigger.player.draw(num);\r\n\t\t\t\tplayer.line(trigger.player);\r\n\t\t\t},\r\n\t\t},\r\n\t\tyuhuimrfz: {\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = {\r\n\t\t\t\t\tdel: false,\r\n\t\t\t\t\tnames: [],\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tmark(dialog, content, player) {\r\n\t\t\t\t\tvar names = player.storage.yuhuimrfz[\"names\"];\r\n\t\t\t\t\tdialog.addText(`本回合【语汇】使用过的牌:<br>${get.translation(names)}`);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"chooseToUse\",\r\n\t\t\thiddenCard: function (player, name) {\r\n\t\t\t\treturn player.countCards(\"hes\") > 0 && !player.storage.yuhuimrfz[\"names\"].includes(name);\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.countCards(\"hes\") < 1) return false;\r\n\t\t\t\tfor (var name of lib.inpile) {\r\n\t\t\t\t\tif (player.storage.yuhuimrfz[\"names\"].includes(name)) continue;\r\n\t\t\t\t\tif (event.filterCard({ name: name, isCard: true }, player, event)) return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tchooseButton: {\r\n\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\tvar list = [];\r\n\t\t\t\t\tfor (var name of lib.inpile) {\r\n\t\t\t\t\t\tif (player.storage.yuhuimrfz.names.includes(name)) {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (event.filterCard({ name: name }, player, event)) {\r\n\t\t\t\t\t\t\tif (name == \"sha\") {\r\n\t\t\t\t\t\t\t\tlist.push([\"基本\", \"\", \"sha\"]);\r\n\t\t\t\t\t\t\t\tfor (var j of lib.inpile_nature) {\r\n\t\t\t\t\t\t\t\t\tlist.push([\"基本\", \"\", \"sha\", j]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if (get.type(name) == \"trick\") {\r\n\t\t\t\t\t\t\t\tlist.push([\"锦囊\", \"\", name]);\r\n\t\t\t\t\t\t\t} else if (get.type(name) == \"basic\") {\r\n\t\t\t\t\t\t\t\tlist.push([\"基本\", \"\", name]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} //QQQ\r\n\t\t\t\t\treturn ui.create.dialog(\"语汇\", [list, \"vcard\"]);\r\n\t\t\t\t},\r\n\t\t\t\tfilter: function (button, player) {\r\n\t\t\t\t\tvar cards = player.getCards(\"hes\"),\r\n\t\t\t\t\t\tname = button.link[2],\r\n\t\t\t\t\t\tcardsx = [];\r\n\t\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\t\tif (get.cardNameLength(i) >= get.cardNameLength(name)) cardsx.push(name);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn _status.event.getParent().filterCard({ name: name }, player, _status.event.getParent()) && cardsx.includes(name);\r\n\t\t\t\t},\r\n\t\t\t\tcheck: function (button) {\r\n\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\tif (player.countCards(\"hs\", button.link[2]) > 0) return 0;\r\n\t\t\t\t\tif (button.link[2] == \"wugu\") return;\r\n\t\t\t\t\tvar effect = player.getUseValue(button.link[2]);\r\n\t\t\t\t\tif (effect > 0) return effect;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t},\r\n\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tfilterCard(card) {\r\n\t\t\t\t\t\t\tvar needNumber = get.cardNameLength(links[0][2]);\r\n\t\t\t\t\t\t\treturn get.cardNameLength(card) >= needNumber;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\taudio: \"yuhuimrfz\",\r\n\t\t\t\t\t\tselectCard: 1,\r\n\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t\tcheck: function (card) {\r\n\t\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tposition: \"hes\",\r\n\t\t\t\t\t\tviewAs: { name: links[0][2], nature: links[0][3] },\r\n\t\t\t\t\t\tprecontent() {\r\n\t\t\t\t\t\t\tif (!player.storage.yuhuimrfz)\r\n\t\t\t\t\t\t\t\tplayer.storage.yuhuimrfz = {\r\n\t\t\t\t\t\t\t\t\tdel: false,\r\n\t\t\t\t\t\t\t\t\tnames: [],\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tplayer.storage.yuhuimrfz[\"names\"].add(lib.skill.yuhuimrfz_backup.viewAs.name);\r\n\t\t\t\t\t\t\tif (player.storage.yuhuimrfz[\"del\"] != true) {\r\n\t\t\t\t\t\t\t\tplayer.storage.yuhuimrfz[\"del\"] = true;\r\n\t\t\t\t\t\t\t\tplayer.when({ global: \"phaseEnd\" }).then(() => {\r\n\t\t\t\t\t\t\t\t\tplayer.storage.yuhuimrfz = {\r\n\t\t\t\t\t\t\t\t\t\tdel: false,\r\n\t\t\t\t\t\t\t\t\t\tnames: [],\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\treturn \"将一张牌当做\" + (get.translation(links[0][3]) || \"\") + get.translation(links[0][2]) + \"使用\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tsave: true,\r\n\t\t\t\trespondSha: true,\r\n\t\t\t\trespondShan: true,\r\n\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\tif (!player.countCards(\"hes\")) return false;\r\n\t\t\t\t\tif (tag == \"respondSha\" || tag == \"respondShan\") {\r\n\t\t\t\t\t\tif (arg == \"respond\") return false;\r\n\t\t\t\t\t\treturn !player.storage.yuhuimrfz[\"names\"].includes(tag == \"respondSha\" ? \"sha\" : \"shan\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\torder: 4,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t\tthreaten: 2.8,\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 维什戴尔 异格w 益达\r\n\t\tyuximrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tglobalTo(from, to, distance) {\r\n\t\t\t\t\tvar cards = to.getCards(\"s\", function (card) {\r\n\t\t\t\t\t\treturn card.hasGaintag(\"yuximrfzx\");\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (cards.length) return distance + 2;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmarktext: \"死魂灵\",\r\n\t\t\tintro: {\r\n\t\t\t\tmark: function (dialog, storage, player) {\r\n\t\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\t\treturn card.hasGaintag(\"yuximrfzx\");\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (cards && cards.length > 0) dialog.addAuto(\"其他角色计算与你的距离+2\");\r\n\t\t\t\t\telse return `没有‘死魂灵’`;\r\n\t\t\t\t\tif (game.me == player) dialog.addAuto(cards);\r\n\t\t\t\t\telse dialog.addAuto(`共有${cards.length}张牌`);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tonremove: function (player, skill) {\r\n\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\treturn card.hasGaintag(\"yuximrfzx\");\r\n\t\t\t\t});\r\n\t\t\t\tif (cards.length) {\r\n\t\t\t\t\tgame.cardsGotoSpecial(cards);\r\n\t\t\t\t\tplayer.$throw(cards, 1000);\r\n\t\t\t\t\tgame.log(cards, \"被销毁\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlib.skill.yuximrfz.onremove(player, \"yuximrfz\");\r\n\t\t\t\tvar cards = [],\r\n\t\t\t\t\tnature = [\"fire\", \"thunder\"];\r\n\t\t\t\tfor (var i = 0; i < player.maxHp; i++) {\r\n\t\t\t\t\tvar name = lib.inpile\r\n\t\t\t\t\t\t.filter(name => {\r\n\t\t\t\t\t\t\treturn get.type(name) == \"trick\" || get.type(name) == \"basic\";\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.randomGet();\r\n\t\t\t\t\tcards.push(game.createCard(name, lib.suit.randomGet(), Math.floor(Math.random() * 13) + 1, name == \"sha\" ? nature.randomGet() : undefined));\r\n\t\t\t\t}\r\n\t\t\t\tcards.map(card => {\r\n\t\t\t\t\tcard.storage.yuximrfzx = true;\r\n\t\t\t\t});\r\n\t\t\t\tgame.log(player, \"将\", cards.length, \"张牌置于在武将牌上\");\r\n\t\t\t\tplayer.loseToSpecial(cards, \"yuximrfzx\");\r\n\t\t\t\tplayer.markSkill(\"yuximrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"yuximrfz_destroy\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdestroy: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"loseEnd\", \"equipEnd\", \"addJudgeEnd\", \"gainEnd\", \"loseAsyncEnd\", \"addToExpansionEnd\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar evt = event.getl(player);\r\n\t\t\t\t\t\tif (!evt || !evt.cards) return false;\r\n\t\t\t\t\t\tfor (var i of evt.cards) {\r\n\t\t\t\t\t\t\tif (i.storage.yuximrfzx == true) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar cards = [];\r\n\t\t\t\t\t\tvar evt = trigger.getl(player);\r\n\t\t\t\t\t\tif (evt && evt.cards) {\r\n\t\t\t\t\t\t\tfor (var i of evt.cards) {\r\n\t\t\t\t\t\t\t\tif (i.storage.yuximrfzx == true) cards.push(i);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgame.cardsGotoSpecial(cards);\r\n\t\t\t\t\t\tgame.log(cards, \"被销毁了\");\r\n\t\t\t\t\t\tif (Math.random() > 0.5) player.logSkill(\"yuximrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thaolimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tcompare(card1, card2) {\r\n\t\t\t\tif (get.suit(card1) == get.suit(card2)) return true;\r\n\t\t\t\tif (get.number(card1) == get.number(card2)) return true;\r\n\t\t\t\tif (get.name(card1) == get.name(card2)) return true;\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\treturn card.hasGaintag(\"yuximrfzx\");\r\n\t\t\t\t});\r\n\t\t\t\tif (cards.length < 1) return false;\r\n\t\t\t\tif (!player.isPhaseUsing()) return false;\r\n\t\t\t\tif (event.card.storage.yuximrfzx == true) return false;\r\n\t\t\t\tif (get.type(event.card) == \"equip\" || get.type(event.card) == \"delay\") return false;\r\n\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\tif (lib.skill.haolimrfz.compare(i, event.card)) return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst {cards} = await player\r\n\t\t\t\t\t.chooseCard(\"s\")\r\n\t\t\t\t\t.set(\"filterCard\", card => lib.skill.haolimrfz.compare(card, trigger.card))\r\n\t\t\t\t\t.set(\"prompt\", `【好礼】:你可以弃置一张‘死魂灵’，视为使用一张${get.translation(get.name(trigger.card))}`)\r\n\t\t\t\t\t.set(\"ai\", card => get.value(trigger.card) - get.value(card))\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\tplayer.discard(cards);\r\n\t\t\t\tplayer.chooseUseTarget({ name: get.name(trigger.card), isCard: true }, true, false);\r\n\t\t\t},\r\n\t\t},\r\n\t\tshezumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\treturn card.hasGaintag(\"yuximrfzx\");\r\n\t\t\t\t});\r\n\t\t\t\treturn (\r\n\t\t\t\t\tevent.getParent().name != \"shezumrfz\" &&\r\n\t\t\t\t\tevent.player.isIn() &&\r\n\t\t\t\t\tcards &&\r\n\t\t\t\t\tcards.length > 0 &&\r\n\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\treturn current != player && current != event.player && get.distance(event.player, current) <= 3;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tresult: { cards, targets },\r\n\t\t\t\t} = await player\r\n\t\t\t\t\t.chooseCardTarget({\r\n\t\t\t\t\t\tprompt: `【射祖】:你可以弃置一张‘死魂灵’并对一名距离${get.translation(trigger.player)}不大于3的角色（不能是你或${get.translation(trigger.player)}）造成一点火焰伤害`,\r\n\t\t\t\t\t\tfilterCard(card) {\r\n\t\t\t\t\t\t\treturn card.hasGaintag(\"yuximrfzx\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tposition: \"s\",\r\n\t\t\t\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\t\t\t\tvar damaged = _status.event.targetx;\r\n\t\t\t\t\t\t\treturn target != player && target != damaged && get.distance(damaged, target) <= 3;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tai1: card => 8 - get.value(card),\r\n\t\t\t\t\t\tai2: target => get.damageEffect(target, player, player, \"fire\") > 0,\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"targetx\", trigger.player);\r\n\t\t\t\tif (!cards || !targets) return;\r\n\t\t\t\tplayer.logSkill(\"shezumrfz\", targets[0]);\r\n\t\t\t\tplayer.discard(cards);\r\n\t\t\t\ttargets[0].damage(player, \"fire\");\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 魔王 小特同学 特蕾西娅\r\n\t\tduanzhangmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tmark: function (dialog, storage, player) {\r\n\t\t\t\t\tvar players = player.storage.duanzhangmrfz.slice().filter(target => target != player);\r\n\t\t\t\t\tif (players && players.length > 0) {\r\n\t\t\t\t\t\tdialog.addAuto(\"这一次我不会离开了...\");\r\n\t\t\t\t\t\tplayers = players.map(i => i.name);\r\n\t\t\t\t\t\tdialog.addSmall([players, \"character\"]);\r\n\t\t\t\t\t} else return \"没有【断章】角色\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tonremove: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => current != player) && (event.name != \"phase\" || game.phaseNumber == 0);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst {targets} = await player\r\n\t\t\t\t\t.chooseTarget(true)\r\n\t\t\t\t\t.set(\"prompt\", `【断章】:请选择【断章】目标`)\r\n\t\t\t\t\t.set(\"filterTarget\", lib.filter.notMe)\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\tvar att = get.attitude(_status.event.player, target);\r\n\t\t\t\t\t\tif (att > 0) return att + 1;\r\n\t\t\t\t\t\tif (att == 0) return Math.random();\r\n\t\t\t\t\t\treturn att;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!targets) return;\r\n\t\t\t\tvar target = targets[0];\r\n\t\t\t\tif (!player.storage.duanzhangmrfz) player.storage.duanzhangmrfz = [];\r\n\t\t\t\tif (!target.storage.duanzhangmrfz) target.storage.duanzhangmrfz = [];\r\n\t\t\t\tplayer.storage.duanzhangmrfz.addArray([target, player]);\r\n\t\t\t\ttarget.storage.duanzhangmrfz.addArray([target, player]);\r\n\t\t\t\tplayer.markSkill(\"duanzhangmrfz\");\r\n\t\t\t\tplayer.line(target);\r\n\t\t\t\tfor (var i of player.storage.duanzhangmrfz) {\r\n\t\t\t\t\tif (i != player) i.addSkill(\"canxiangmrfz_nodelay\");\r\n\t\t\t\t\ti.addSkill(\"duanzhangmrfz_eff1\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"duanzhangmrfz_clear\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"dieAfter\" },\r\n\t\t\t\t\tforceDie: true,\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn event.player.hasSkill(\"duanzhangmrfz_eff1\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\tfor (var i of game.players) {\r\n\t\t\t\t\t\t\tif (!i.storage.duanzhangmrfz) continue;\r\n\t\t\t\t\t\t\tif (i.storage.duanzhangmrfz.includes(trigger.player)) i.storage.duanzhangmrfz.remove(trigger.player);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff1: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: [\"loseEnd\", \"equipEnd\", \"addJudgeEnd\", \"gainEnd\", \"loseAsyncEnd\", \"addToExpansionEnd\", \"duanzhangmrfzAfter\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn (player.storage.duanzhangmrfz && player.storage.duanzhangmrfz.length > 1) ^ player.hasSkill(\"duanzhangmrfz_group\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (player.storage.duanzhangmrfz && player.storage.duanzhangmrfz.length > 1) {\r\n\t\t\t\t\t\t\tvar cards = [],\r\n\t\t\t\t\t\t\t\ttarget = game.findPlayer(current => {\r\n\t\t\t\t\t\t\t\t\treturn player.storage.duanzhangmrfz.includes(current);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tfor (var i of target.storage.duanzhangmrfz) {\r\n\t\t\t\t\t\t\t\tif (i.countCards(\"h\") == 0) continue;\r\n\t\t\t\t\t\t\t\tif (i == player) continue;\r\n\t\t\t\t\t\t\t\tfor (var j of i.getCards(\"h\")) cards.push(j);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar cardsx = cards.map(card => {\r\n\t\t\t\t\t\t\t\tvar cardx = ui.create.card();\r\n\t\t\t\t\t\t\t\tcardx.init(get.cardInfo(card));\r\n\t\t\t\t\t\t\t\tcardx._cardid = card.cardid;\r\n\t\t\t\t\t\t\t\treturn cardx;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif (cardsx.length < 1) return;\r\n\t\t\t\t\t\t\tplayer.directgains(cardsx, null, \"duanzhangmrfz\");\r\n\t\t\t\t\t\t\tplayer.addSkill(\"duanzhangmrfz_group\");\r\n\t\t\t\t\t\t} else player.removeSkill(\"duanzhangmrfz_group\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tgroup: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tgroup: [\"duanzhangmrfz_eff_use\", \"duanzhangmrfz_eff_lose\"],\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: [\"addJudgeAfter\", \"gainAfter\", \"loseAfter\", \"loseAsyncAfter\", \"cardsDiscardAfter\", \"equipAfter\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.name == \"gain\") return event.cards.length;\r\n\t\t\t\t\t\tvar cards = event.getd();\r\n\t\t\t\t\t\treturn cards.length;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: function (player) {\r\n\t\t\t\t\t\tvar cards2 = player.getCards(\"s\", card => {\r\n\t\t\t\t\t\t\treturn card.hasGaintag(\"duanzhangmrfz\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (player.isOnline2()) {\r\n\t\t\t\t\t\t\tplayer.send(\r\n\t\t\t\t\t\t\t\tfunction (cards, player) {\r\n\t\t\t\t\t\t\t\t\tcards.forEach(i => i.delete());\r\n\t\t\t\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcards2,\r\n\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcards2.forEach(i => i.delete());\r\n\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar cards = [];\r\n\t\t\t\t\t\tvar idList = player.getCards(\"s\", card => card.hasGaintag(\"duanzhangmrfz\")).map(i => i._cardid);\r\n\t\t\t\t\t\tvar target = game.findPlayer(current => {\r\n\t\t\t\t\t\t\treturn player.storage.duanzhangmrfz.includes(current);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tfor (var i of target.storage.duanzhangmrfz) {\r\n\t\t\t\t\t\t\tif (i.countCards(\"h\") == 0) continue;\r\n\t\t\t\t\t\t\tif (i == player) continue;\r\n\t\t\t\t\t\t\tfor (var j of i.getCards(\"h\")) {\r\n\t\t\t\t\t\t\t\tif (idList.includes(j.cardid)) continue;\r\n\t\t\t\t\t\t\t\tcards.push(j);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar cards2 = cards.map(card => {\r\n\t\t\t\t\t\t\tvar cardx = ui.create.card();\r\n\t\t\t\t\t\t\tcardx.init(get.cardInfo(card));\r\n\t\t\t\t\t\t\tcardx._cardid = card.cardid;\r\n\t\t\t\t\t\t\treturn cardx;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tplayer.directgains(cards2, null, \"duanzhangmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff_use: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"useCardBefore\", \"respondBefore\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar cards = player.getCards(\"s\", card => card.hasGaintag(\"duanzhangmrfz\") && card._cardid);\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.cards &&\r\n\t\t\t\t\t\t\tevent.cards.some(card => {\r\n\t\t\t\t\t\t\t\treturn cards.includes(card);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar idList = player.getCards(\"s\", card => card.hasGaintag(\"duanzhangmrfz\")).map(i => i._cardid);\r\n\t\t\t\t\t\tvar cards = [];\r\n\t\t\t\t\t\tvar target = game.findPlayer(current => {\r\n\t\t\t\t\t\t\treturn player.storage.duanzhangmrfz.includes(current);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tfor (var i of target.storage.duanzhangmrfz) {\r\n\t\t\t\t\t\t\tif (i.countCards(\"h\") == 0) continue;\r\n\t\t\t\t\t\t\tif (i == player) continue;\r\n\t\t\t\t\t\t\tfor (var j of i.getCards(\"h\")) {\r\n\t\t\t\t\t\t\t\tif (!idList.includes(j.cardid)) continue;\r\n\t\t\t\t\t\t\t\tcards.push(j);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar cards2 = [];\r\n\t\t\t\t\t\tfor (var card of trigger.cards) {\r\n\t\t\t\t\t\t\tvar cardx = cards.find(cardx => cardx.cardid == card._cardid);\r\n\t\t\t\t\t\t\tif (cardx) cards2.push(cardx);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar cards3 = trigger.cards.slice();\r\n\t\t\t\t\t\ttrigger.cards = cards2;\r\n\t\t\t\t\t\ttrigger.card.cards = cards2;\r\n\t\t\t\t\t\tif (player.isOnline2()) {\r\n\t\t\t\t\t\t\tplayer.send(\r\n\t\t\t\t\t\t\t\tfunction (cards, player) {\r\n\t\t\t\t\t\t\t\t\tcards.forEach(i => i.delete());\r\n\t\t\t\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcards3,\r\n\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcards3.forEach(i => i.delete());\r\n\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff_lose: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: [\"loseEnd\", \"equipEnd\", \"addJudgeEnd\", \"gainEnd\", \"loseAsyncEnd\", \"addToExpansionEnd\", \"cardsGotoOrderingBegin\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar idList = player.getCards(\"s\", card => card.hasGaintag(\"duanzhangmrfz\")).map(i => i._cardid);\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.cards &&\r\n\t\t\t\t\t\t\tevent.cards.some(card => {\r\n\t\t\t\t\t\t\t\treturn idList.includes(card.cardid);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar cards2;\r\n\t\t\t\t\t\tvar idList = [];\r\n\t\t\t\t\t\tvar target = game.findPlayer(current => {\r\n\t\t\t\t\t\t\treturn player.storage.duanzhangmrfz.includes(current);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tfor (var i of target.storage.duanzhangmrfz) {\r\n\t\t\t\t\t\t\tif (i.countCards(\"h\") == 0) continue;\r\n\t\t\t\t\t\t\tif (i == player) continue;\r\n\t\t\t\t\t\t\tfor (var j of i.getCards(\"h\")) {\r\n\t\t\t\t\t\t\t\tidList.add(j.cardid);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcards2 = player.getCards(\"s\", card => {\r\n\t\t\t\t\t\t\treturn card.hasGaintag(\"duanzhangmrfz\") && !idList.includes(card._cardid);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (player.isOnline2()) {\r\n\t\t\t\t\t\t\tplayer.send(\r\n\t\t\t\t\t\t\t\tfunction (cards, player) {\r\n\t\t\t\t\t\t\t\t\tcards.forEach(i => i.delete());\r\n\t\t\t\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcards2,\r\n\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcards2.forEach(i => i.delete());\r\n\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tchenaimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"useCardAfter\", \"respondAfter\"],\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (_status.currentPhase != player) return false;\r\n\t\t\t\tif (\r\n\t\t\t\t\tplayer.getHistory(\"custom\", function (evt) {\r\n\t\t\t\t\t\treturn evt.chenaimrfz_type == get.type2(event.card);\r\n\t\t\t\t\t}).length > 0\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\treturn event.cards.filterInD().length > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst {targets} = await player\r\n\t\t\t\t\t.chooseTarget(get.prompt(\"chenaimrfz\"), \"将\" + get.translation(trigger.cards) + \"交给一名其他角色\", function (card, player, target) {\r\n\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\tif (target.hasJudge(\"lebu\")) return 0;\r\n\t\t\t\t\t\tlet att = get.attitude(_status.event.player, target),\r\n\t\t\t\t\t\t\tname = _status.event.cards[0].name;\r\n\t\t\t\t\t\tif (att < 3) return 0;\r\n\t\t\t\t\t\tif (_status.event.player.storage.duanzhangmrfz && _status.event.player.storage.duanzhangmrfz.includes(target) && att > 0) att += 10;\r\n\t\t\t\t\t\tif (target.hasSkillTag(\"nogain\")) att /= 10;\r\n\t\t\t\t\t\tif (name === \"sha\" && target.hasSha()) att /= 5;\r\n\t\t\t\t\t\tif (name === \"wuxie\" && target.needsToDiscard(_status.event.cards)) att /= 5;\r\n\t\t\t\t\t\treturn att / (1 + get.distance(player, target, \"absolute\"));\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"cards\", trigger.cards)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!targets) return;\r\n\t\t\t\tplayer.logSkill(\"chenaimrfz\", targets[0]);\r\n\t\t\t\ttargets[0].gain(trigger.cards.filterInD(), \"gain2\");\r\n\t\t\t\tplayer.getHistory(\"custom\").push({ chenaimrfz_type: get.type2(trigger.card) });\r\n\t\t\t\tif (player.storage.duanzhangmrfz && player.storage.duanzhangmrfz.includes(targets[0])) targets[0].draw();\r\n\t\t\t},\r\n\t\t},\r\n\t\t/** @type { Skill } */\r\n\t\tcanxiangmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\ttargetEnabled: function (card, player, target) {\r\n\t\t\t\t\tif (get.type(card) == \"delay\") {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { global: \"damageBegin4\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tvar storage = player.storage.duanzhangmrfz;\r\n\t\t\t\tif (event.player != player && (!storage || !storage.includes(event.player))) return false;\r\n\t\t\t\treturn event.hasNature();\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t},\r\n\t\t\tgroup: \"canxiangmrfz_die\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdie: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"dieAfter\" },\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tforceDie: true,\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\tvar storage = player.storage.duanzhangmrfz;\r\n\t\t\t\t\t\tfor (var i of storage) {\r\n\t\t\t\t\t\t\tif (!i.storage.duanzhangmrfz) continue;\r\n\t\t\t\t\t\t\tif (i.storage.duanzhangmrfz.length <= 2) i.removeSkill(\"canxiangmrfz_nodelay\");\r\n\t\t\t\t\t\t\telse i.storage.duanzhangmrfz.remove(player);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tnodelay: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"属性伤害无效；无法成为延时锦囊牌的目标\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\ttargetEnabled: function (card, player, target) {\r\n\t\t\t\t\t\t\tif (get.type(card) == \"delay\") {\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tnofire: true,\r\n\t\t\t\t\t\tnothunder: true,\r\n\t\t\t\t\t\teffect: {\r\n\t\t\t\t\t\t\ttarget(card, player, target, current) {\r\n\t\t\t\t\t\t\t\tif (get.tag(card, \"natureDamage\")) {\r\n\t\t\t\t\t\t\t\t\treturn \"zeroplayertarget\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (get.type(card) == \"trick\" && get.tag(card, \"damage\")) {\r\n\t\t\t\t\t\t\t\t\treturn \"zeroplayertarget\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tnofire: true,\r\n\t\t\t\tnothunder: true,\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget(card, player, target, current) {\r\n\t\t\t\t\t\tif (get.tag(card, \"natureDamage\")) {\r\n\t\t\t\t\t\t\treturn \"zeroplayertarget\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (get.type(card) == \"trick\" && get.tag(card, \"damage\")) {\r\n\t\t\t\t\t\t\treturn \"zeroplayertarget\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 新多萝西\r\n\t\tnewgongzhenmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\taiOrder: function (player, card, num) {\r\n\t\t\t\t\tif (typeof card == \"object\" && player.isPhaseUsing()) {\r\n\t\t\t\t\t\tvar history = player.getAllHistory(\"useCard\");\r\n\t\t\t\t\t\tif (history.length < 1) return num;\r\n\t\t\t\t\t\tvar cardx = history[history.length - 1].card;\r\n\t\t\t\t\t\tif (cardx && get.type2(cardx) == get.type2(card)) {\r\n\t\t\t\t\t\t\treturn num + 10;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: \"gongzhenmrfz\",\r\n\t\t\ttrigger: { player: [\"useCardEnd\", \"respondEnd\"] },\r\n\t\t\tforced: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.getAllHistory(event.name).length > 1;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar history = player.getAllHistory(trigger.name);\r\n\t\t\t\tvar cardx = history[history.length - 2].card;\r\n\t\t\t\tif (!cardx) return;\r\n\t\t\t\tif (get.type2(cardx) == get.type2(trigger.card)) {\r\n\t\t\t\t\tvar cards = get.cards(2);\r\n\t\t\t\t\tgame.cardsGotoOrdering(cards);\r\n\t\t\t\t\tconst {links} = await player\r\n\t\t\t\t\t\t.chooseCardButton(`【共振】:请选择获得一张牌`, true, cards)\r\n\t\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\t\treturn get.value(button);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (!links) return;\r\n\t\t\t\t\tplayer.gain(links, \"gain2\");\r\n\t\t\t\t} else\r\n\t\t\t\t\tplayer.chooseToDiscard(true, `【共振】:请弃置区域内的一张牌`, \"hej\").set(\"ai\", card => {\r\n\t\t\t\t\t\tif (get.position(card) == \"j\") return 10;\r\n\t\t\t\t\t\treturn -get.value(card);\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t},\r\n\t\tnewmengxiangmrfz: {\r\n\t\t\tgetLastDiscard(event, player) {\r\n\t\t\t\tvar history = player.getAllHistory(\"lose\", evt => evt.type && evt.type == \"discard\");\r\n\t\t\t\tif (history.length < 1) return false;\r\n\t\t\t\tvar cards = history[history.length - 1].cards;\r\n\t\t\t\tif (!cards) return false;\r\n\t\t\t\treturn cards[cards.length - 1];\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player) {\r\n\t\t\t\t\tvar cardx = lib.skill.newmengxiangmrfz.getLastDiscard(_status.event, player);\r\n\t\t\t\t\tif (cardx && get.type2(cardx) == get.type2(card)) return Infinity;\r\n\t\t\t\t},\r\n\t\t\t\ttargetInRange: function (card, player) {\r\n\t\t\t\t\tvar cardx = lib.skill.newmengxiangmrfz.getLastDiscard(_status.event, player);\r\n\t\t\t\t\tif (cardx && get.type2(cardx) == get.type2(card)) return true;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: \"mengxiangmrfz\",\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"useCardBefore\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tvar cardx = lib.skill.newmengxiangmrfz.getLastDiscard(_status.event, player);\r\n\t\t\t\tif (!cardx) return false;\r\n\t\t\t\treturn !event.audioed && get.type2(cardx) == get.type2(event.card);\r\n\t\t\t},\r\n\t\t\tcontent() {\r\n\t\t\t\ttrigger.audioed = true;\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 新黑键\r\n\t\tnewhuangxiangmrfz: {\r\n\t\t\taudio: \"huangxiangmrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseDrawAfter\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tconst { result } = await player.chooseCard([1, 2], \"【荒响】:你可以选择两张手牌将其标记为‘残影’\").set(\"ai\", card => {\r\n\t\t\t\t\tvar num = get.value(card);\r\n\t\t\t\t\tif (get.name(card) == \"shan\" || get.name(card) == \"wuxie\") num += 10;\r\n\t\t\t\t\tif (get.type2(card) == \"equip\") num -= 2;\r\n\t\t\t\t\treturn num;\r\n\t\t\t\t});\r\n\t\t\t\tevent.result = result;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar cards = event.cards;\r\n\t\t\t\tawait player.removeGaintag(\"newhuangxiangmrfzx\");\r\n\t\t\t\tfor (var i of cards) i.addGaintag(\"newhuangxiangmrfzx\");\r\n\t\t\t},\r\n\t\t\tgroup: \"newhuangxiangmrfz_lose\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tlose: {\r\n\t\t\t\t\taudio: \"huangxiangmrfz\",\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"loseAfter\",\r\n\t\t\t\t\t\tglobal: [\"equipAfter\", \"addJudgeAfter\", \"gainAfter\", \"loseAsyncAfter\", \"addToExpansionAfter\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tif (_status.currentPhase == player) return false;\r\n\t\t\t\t\t\tvar evt = event.getl(player);\r\n\t\t\t\t\t\tif (!evt || !evt.hs || !evt.hs.length) return false;\r\n\t\t\t\t\t\tif (event.name == \"lose\") {\r\n\t\t\t\t\t\t\tfor (var i in event.gaintag_map) {\r\n\t\t\t\t\t\t\t\tif (event.gaintag_map[i].includes(\"newhuangxiangmrfzx\")) return true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn player.hasHistory(\"lose\", function (evt) {\r\n\t\t\t\t\t\t\tif (event != evt.getParent()) return false;\r\n\t\t\t\t\t\t\tfor (var i in evt.gaintag_map) {\r\n\t\t\t\t\t\t\t\tif (evt.gaintag_map[i].includes(\"newhuangxiangmrfzx\")) return true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\t\t\tvar list = [\"选项一\", \"选项二\", \"cancel2\"],\r\n\t\t\t\t\t\t\tchoicelist = [\"令一名你攻击范围内的角色选择弃置一张黑桃牌或受到一点伤害\", \"你摸一张牌且将此牌标记为‘残影’\"];\r\n\t\t\t\t\t\tif (!game.hasPlayer(current => current != player && player.inRange(current))) {\r\n\t\t\t\t\t\t\tlist.remove(\"选项一\");\r\n\t\t\t\t\t\t\tchoicelist[0] = '<span style=\"opacity:0.5; \">' + choicelist[0] + \"(没有满足条件的角色)</span>\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst {control} = await player\r\n\t\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t\t.set(\"choiceList\", choicelist)\r\n\t\t\t\t\t\t\t.set(\"prompt\", \"【荒响】:你可以选择一项\")\r\n\t\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\tif (!game.hasPlayer(current => current != player && player.inRange(current) && get.attitude(player, current) < 0)) return 1;\r\n\t\t\t\t\t\t\t\treturn [0, 1];\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tvar result = {};\r\n\t\t\t\t\t\tresult.bool = true;\r\n\t\t\t\t\t\tresult.cost_data = control;\r\n\t\t\t\t\t\tif (control == \"cancel2\") result.bool = false;\r\n\t\t\t\t\t\tevent.result = result;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar control = event.cost_data;\r\n\t\t\t\t\t\tif (control == \"选项一\") {\r\n\t\t\t\t\t\t\tconst {targets} = await player\r\n\t\t\t\t\t\t\t\t.chooseTarget()\r\n\t\t\t\t\t\t\t\t.set(\"forced\", true)\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", \"【荒响】:请选择一名攻击范围内的角色\")\r\n\t\t\t\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\r\n\t\t\t\t\t\t\t\t\treturn player != target && player.inRange(target);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\tconst {bool} = await targets[0]\r\n\t\t\t\t\t\t\t\t.chooseToDiscard(\"【荒响】:请弃置一张黑桃牌，否则受到一点伤害\", \"he\")\r\n\t\t\t\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\tplayer.hp < 2 &&\r\n\t\t\t\t\t\t\t\t\t\tplayer.countCards(\"hes\", card => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn get.name(card) == \"tao\" || get.name(card) == \"jiu\";\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\treturn 12 - get.value(card);\r\n\t\t\t\t\t\t\t\t\treturn 7 - get.value(card);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"filterCard\", card => get.suit(card) == \"spade\")\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\tif (bool) return;\r\n\t\t\t\t\t\t\ttargets[0].damage();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconst { result } = await player.draw();\r\n\t\t\t\t\t\t\tresult[0].addGaintag(\"newhuangxiangmrfzx\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tnewjiyinmrfz: {\r\n\t\t\taudio: \"jiyinmrfz\",\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCard2\",\r\n\t\t\t},\r\n\t\t\tgetMeetCondition(event, player, target) {\r\n\t\t\t\tlet num = 0;\r\n\t\t\t\tif (target.isMaxHandcard()) num++;\r\n\t\t\t\tif (target.isMaxHp()) num++;\r\n\t\t\t\tif (target.isMaxEquip()) num++;\r\n\t\t\t\treturn num;\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (event.card.name != \"sha\") return false;\r\n\t\t\t\tfor (var target of event.targets) {\r\n\t\t\t\t\tlet num = lib.skill.newjiyinmrfz.getMeetCondition(event, player, target);\r\n\t\t\t\t\tif (typeof num === \"number\") return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet targets = trigger.targets;\r\n\t\t\t\tfor (var target of targets) {\r\n\t\t\t\t\tlet num = lib.skill.newjiyinmrfz.getMeetCondition(event, player, target);\r\n\t\t\t\t\tif (typeof num !== \"number\") continue;\r\n\t\t\t\t\tplayer.line(target);\r\n\t\t\t\t\t// 加伤\r\n\t\t\t\t\tif (!target.storage.newjiyinmrfz_tmp) target.storage.newjiyinmrfz_tmp = [];\r\n\t\t\t\t\ttarget.storage.newjiyinmrfz_tmp.push(trigger.card);\r\n\t\t\t\t\ttarget\r\n\t\t\t\t\t\t.when({\r\n\t\t\t\t\t\t\tplayer: \"damageBegin3\",\r\n\t\t\t\t\t\t\tglobal: \"useCardAfter\",\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.filter((event, player) => {\r\n\t\t\t\t\t\t\tif (event.name == \"useCard\" && player.storage.newjiyinmrfz_tmp.filter(card => card == event.card).length > 0) return true;\r\n\t\t\t\t\t\t\tif (!player.storage.newjiyinmrfz_tmp) return false;\r\n\t\t\t\t\t\t\treturn event.card && event.card.name == \"sha\" && player.storage.newjiyinmrfz_tmp.filter(card => card == event.card).length > 0;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\tif (trigger.name == \"damage\") {\r\n\t\t\t\t\t\t\t\ttrigger.num += number;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tplayer.storage.newjiyinmrfz_tmp.remove(trigger.card);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.vars({ number: num });\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"newjiyinmrfz_sha\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tsha: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.card.name != \"sha\" || event.getParent().directHit.includes(event.target)) return false;\r\n\t\t\t\t\t\treturn lib.skill.newjiyinmrfz.getMeetCondition(event, player, event.target) > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlogTarget: \"target\",\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar id = trigger.target.playerid;\r\n\t\t\t\t\t\tvar map = trigger.getParent().customArgs;\r\n\t\t\t\t\t\tif (!map[id]) map[id] = {};\r\n\t\t\t\t\t\tif (typeof map[id].shanRequired == \"number\") {\r\n\t\t\t\t\t\t\tmap[id].shanRequired++;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmap[id].shanRequired = 1 + lib.skill.newjiyinmrfz.getMeetCondition(event, player, trigger.target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\tskillTagFilter(player, tag, arg) {\r\n\t\t\t\t\tlet num = lib.skill.newjiyinmrfz.getMeetCondition(_status.event, player, arg.target);\r\n\t\t\t\t\tif (arg.card.name != \"sha\" || arg.target.countCards(\"h\", \"shan\") > num) return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 乌尔比安\r\n\t\tpiweimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"turnOverAfter\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0 && player.hasUseTarget(\"chuqibuyi\");\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tconst { result } = await player\r\n\t\t\t\t\t.chooseControl(\"club\", \"spade\", \"diamond\", \"heart\", \"cancel2\")\r\n\t\t\t\t\t.set(\"prompt\", \"你可以将一种颜色的所有手牌当做任意花色且伤害基数为2的【出其不意】使用，若此牌造成伤害，受到伤害的角色依次弃置装备区和手牌区的一张牌。\")\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\tvar player = get.event().player;\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t!game.hasPlayer(current => {\r\n\t\t\t\t\t\t\t\treturn current != player && player.canUse(\"chuqibuyi\", current) && get.attitude(current, player) < 0;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\treturn \"cancel2\";\r\n\t\t\t\t\t\treturn lib.suit.randomGet();\r\n\t\t\t\t\t});\r\n\t\t\t\tevent.result = {};\r\n\t\t\t\tif (result.control === \"cancel2\") event.result.bool = false;\r\n\t\t\t\telse event.result.bool = true;\r\n\t\t\t\tevent.result.cost_data = result;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet suit = event.cost_data.control;\r\n\t\t\t\tlet color = new Set(player.getCards(\"h\").map(i => get.color(i)));\r\n\t\t\t\tconst {control} =\r\n\t\t\t\t\tcolor.size === 1\r\n\t\t\t\t\t\t? {control:player.getCards(\"h\")}\r\n\t\t\t\t\t\t: await player\r\n\t\t\t\t\t\t\t\t.chooseControl(\"red\", \"black\")\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", \"请选择一种颜色\")\r\n\t\t\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\t\t\tvar player = get.event().player,\r\n\t\t\t\t\t\t\t\t\t\tred = 0,\r\n\t\t\t\t\t\t\t\t\t\tblack = 0;\r\n\t\t\t\t\t\t\t\t\tfor (var i of player.getCards(\"h\", {\r\n\t\t\t\t\t\t\t\t\t\tcolor: \"red\",\r\n\t\t\t\t\t\t\t\t\t})) {\r\n\t\t\t\t\t\t\t\t\t\tred += get.value(i);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tfor (var i of player.getCards(\"h\", {\r\n\t\t\t\t\t\t\t\t\t\tcolor: \"black\",\r\n\t\t\t\t\t\t\t\t\t})) {\r\n\t\t\t\t\t\t\t\t\t\tblack += get.value(i);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn red > black ? \"black\" : \"red\";\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\tplayer.chooseUseTarget(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"chuqibuyi\",\r\n\t\t\t\t\t\tsuit: suit,\r\n\t\t\t\t\t\tpiweimrfz_chuqi: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttypeof control === \"string\" ? player.getCards(\"h\", { color: control }) : control\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tgroup: [\"piweimrfz_damage\", \"piweimrfz_discard\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdiscard: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn event.player && event.player.isIn() && event.card && event.card.piweimrfz_chuqi == true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet target = trigger.player;\r\n\t\t\t\t\t\ttarget\r\n\t\t\t\t\t\t\t.chooseToDiscard(true)\r\n\t\t\t\t\t\t\t.set(\"position\", \"he\")\r\n\t\t\t\t\t\t\t.set(\"prompt\", `【辟纬】:请选择弃置手牌区和装备区的各一张牌`)\r\n\t\t\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\t\t\tvar player = get.event().player;\r\n\t\t\t\t\t\t\t\treturn 7 - get.value(card);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"filterCard\", card => {\r\n\t\t\t\t\t\t\t\tvar player = get.event().player,\r\n\t\t\t\t\t\t\t\t\tcards = ui.selected.cards;\r\n\t\t\t\t\t\t\t\tif (cards.length == 0) return true;\r\n\t\t\t\t\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\t\t\t\t\tif (get.position(i) == get.position(card)) return false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"selectCard\", () => {\r\n\t\t\t\t\t\t\t\tvar player = get.event().player,\r\n\t\t\t\t\t\t\t\t\tpos = [];\r\n\t\t\t\t\t\t\t\tfor (var i of player.getCards(\"he\")) {\r\n\t\t\t\t\t\t\t\t\tif (get.position(i) == \"h\") pos.add(\"h\");\r\n\t\t\t\t\t\t\t\t\telse pos.add(\"e\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn [pos.length, pos.length];\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn event.card && event.card.piweimrfz_chuqi == true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\ttrigger.baseDamage = 2;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.2,\r\n\t\t\t},\r\n\t\t},\r\n\t\tguqianmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: [\"loseAfter\", \"loseAsyncAfter\"],\r\n\t\t\t},\r\n\t\t\tusable: 1,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (event.type != \"discard\" || event.position != ui.discardPile || event.player == player) return false;\r\n\t\t\t\tvar cards = event.getd();\r\n\t\t\t\tif (!cards.filter(card => get.position(card, true) == \"d\").length) return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\treturn `你可以摸一张牌，然后若你手牌中没有相同花色的牌，你重置此技能，反之，你将武将牌翻面。`;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tawait player.draw();\r\n\t\t\t\tlet suitCards = player.getCards(\"h\").map(card => get.suit(card));\r\n\t\t\t\tlet suitList = new Set(suitCards);\r\n\t\t\t\tif (suitCards.length != suitList.size) {\r\n\t\t\t\t\tplayer.turnOver();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tdelete player.getStat(\"skill\")[\"guqianmrfz\"];\r\n\t\t\t\tif (player.storage.counttrigger && player.storage.counttrigger[\"guqianmrfz\"]) delete player.storage.counttrigger[\"guqianmrfz\"];\r\n\t\t\t\tgame.log(player, \"重置了技能\", `#g【孤潜】`);\r\n\t\t\t},\r\n\t\t},\r\n\t\ttongmaimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\taudioname: [\"wuerbianmrfz\", \"spyoulingshamrfz\", \"sikadimrfz\", \"geleidiyamrfz\", \"anzhelamrfz\"],\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (Array.isArray(player.storage.tongmaimrfz) && player.storage.tongmaimrfz.length > 1) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\t_status.currentPhase != player &&\r\n\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\treturn current.hasClan(\"深海猎人\");\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tlet prompt2 = `你可以令一名深海猎人的角色回复一点体力或复原武将牌`,\r\n\t\t\t\t\tstorage = player.storage.tongmaimrfz;\r\n\t\t\t\tif (storage.includes(0)) prompt2 = prompt2.replace(\"回复一点体力或\", \"\");\r\n\t\t\t\tif (storage.includes(1)) prompt2 = prompt2.replace(\"或复原武将牌\", \"\");\r\n\t\t\t\tconst { result } = await player\r\n\t\t\t\t\t.chooseTarget()\r\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"tongmaimrfz\"))\r\n\t\t\t\t\t.set(\"prompt2\", prompt2)\r\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\r\n\t\t\t\t\t\tvar storage = _status.event.storage;\r\n\t\t\t\t\t\tif (!target.hasClan(\"深海猎人\") && target != player) return false;\r\n\t\t\t\t\t\tif (storage.includes(1)) return target.getDamagedHp() > 0;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\tvar player = get.event().player;\r\n\t\t\t\t\t\treturn get.attitude(target, player) > 0 && (target.getDamagedHp() > 0 || target.isTurnedOver() || target.isLinked());\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"storage\", storage);\r\n\t\t\t\tevent.result = result;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet target = event.targets[0];\r\n\t\t\t\tif (!Array.isArray(player.storage.tongmaimrfz)) player.storage.tongmaimrfz = [];\r\n\t\t\t\tif (player.storage.tongmaimrfz.includes(0)) {\r\n\t\t\t\t\ttarget.link(false);\r\n\t\t\t\t\ttarget.turnOver(false);\r\n\t\t\t\t\tplayer.storage.tongmaimrfz.add(1);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (player.storage.tongmaimrfz.includes(1)) {\r\n\t\t\t\t\ttarget.recover();\r\n\t\t\t\t\tplayer.storage.tongmaimrfz.add(0);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (target.getDamagedHp() == 0) {\r\n\t\t\t\t\ttarget.link(false);\r\n\t\t\t\t\ttarget.turnOver(false);\r\n\t\t\t\t\tplayer.storage.tongmaimrfz.add(1);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst {index} = await player\r\n\t\t\t\t\t.chooseControl()\r\n\t\t\t\t\t.set(\"choiceList\", [`令${get.translation(target)}回复一点体力`, `令${get.translation(target)}复原武将牌`])\r\n\t\t\t\t\t.set(\"prompt\", \"请选择一项\")\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\tvar target = _status.event.targetx,\r\n\t\t\t\t\t\t\tplayer = get.event().player;\r\n\t\t\t\t\t\tif (target.isTurnedOver()) return 1;\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"targetx\", target)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (index === 0) target.recover();\r\n\t\t\t\tif (index === 1) {\r\n\t\t\t\t\ttarget.link(false);\r\n\t\t\t\t\ttarget.turnOver(false);\r\n\t\t\t\t}\r\n\t\t\t\tplayer.storage.tongmaimrfz.add(index);\r\n\t\t\t},\r\n\t\t\tgroup: \"tongmaimrfz_clear\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\tplayer.storage.tongmaimrfz = [];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 新 斯卡蒂\r\n\t\tjingliemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseZhunbeiBegin\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn current != player && current.countCards(\"h\") > 0;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tconst { result } = await player\r\n\t\t\t\t\t.chooseTarget()\r\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"shulangmrfz\"))\r\n\t\t\t\t\t.set(\"prompt2\", `你可以观看一名其他角色的手牌并选择其中一张牌，然后该角色选择一项：<br>①失去一点体力，令你获得此牌。<br>②令你视为使用此牌，然后本回合结束阶段你发动一次【鲸猎】。<br>③对你使用一张【杀】，若此杀造成伤害，你翻面，反之执行其他两项。`)\r\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => player != target && target.countCards(\"h\") > 0)\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\tvar player = get.event().player;\r\n\t\t\t\t\t\tvar att = get.attitude(player, target),\r\n\t\t\t\t\t\t\tnum = 0;\r\n\t\t\t\t\t\tif (att >= 0) num += 2;\r\n\t\t\t\t\t\telse num += 5 + target.getDamagedHp();\r\n\t\t\t\t\t\treturn (num += target.countCards(\"h\") / 2);\r\n\t\t\t\t\t});\r\n\t\t\t\tevent.result = result;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet target = event.targets[0];\r\n\t\t\t\tif (target.countCards(\"h\") == 1) player.viewHandcards(target);\r\n\t\t\t\tconst {links} = await player\r\n\t\t\t\t\t.choosePlayerCard(target, true, \"visible\")\r\n\t\t\t\t\t.set(\"prompt\", \"【鲸猎】:请选择一张牌\")\r\n\t\t\t\t\t.set(\"position\", \"h\")\r\n\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\tvar player = get.event().player,\r\n\t\t\t\t\t\t\tnum = get.value(button);\r\n\t\t\t\t\t\tif (player.hasUseTarget(button, false)) num += 10;\r\n\t\t\t\t\t\tif (get.tag(button, \"damage\")) num += 2;\r\n\t\t\t\t\t\tif (get.type2(button) == \"equip\") num -= 10;\r\n\t\t\t\t\t\treturn num;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!links) return;\r\n\t\t\t\tlet choiceList = [`失去一点体力，令${get.translation(player)}获得${get.translation(links[0])}`, `令${get.translation(player)}视为使用${get.translation(links[0])}，若此牌不能被${get.translation(player)}使用，则改为摸一张牌，然后本回合结束阶段时${get.translation(player)}发动一次【鲸猎】`, `对${get.translation(player)}使用一张【杀】，若此杀造成伤害，${get.translation(player)}翻面，反之执行其他两项`],\r\n\t\t\t\t\tlist = [\"选项一\", \"选项二\"];\r\n\t\t\t\tif (target.hasSha() && target.canUse({ name: \"sha\" }, player, false)) list.push(\"选项三\");\r\n\t\t\t\telse choiceList[2] = '<span style=\"opacity:0.5\">' + choiceList[2] + \"（没有或无法使用【杀】）\" + \"</span>\";\r\n\t\t\t\tconst {index} = await target\r\n\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t.set(\"choiceList\", choiceList)\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\tvar player = get.event().player,\r\n\t\t\t\t\t\t\ttarget = _status.event.targetx,\r\n\t\t\t\t\t\t\tlist = _status.event.list,\r\n\t\t\t\t\t\t\tcard = _status.event.cardx;\r\n\t\t\t\t\t\tif (get.attitude(player, target) > 0) return 1;\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tif (!target.hasUseTarget(card, false)) return 1;\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tlist.length > 2 &&\r\n\t\t\t\t\t\t\t\ttarget.mayHaveShan(\r\n\t\t\t\t\t\t\t\t\tplayer,\r\n\t\t\t\t\t\t\t\t\t\"use\",\r\n\t\t\t\t\t\t\t\t\ttarget.getCards(\"h\", i => {\r\n\t\t\t\t\t\t\t\t\t\treturn i.hasGaintag(\"sha_notshan\");\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t) &&\r\n\t\t\t\t\t\t\t\tMath.random() > 0.5\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tfor (var i of player.getCards(\"h\", \"sha\")) {\r\n\t\t\t\t\t\t\t\t\tif (get.effect(target, i, player, player) > 0) return 2;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (player.hp == 1) return 1;\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"targetx\", player)\r\n\t\t\t\t\t.set(\"list\", list)\r\n\t\t\t\t\t.set(\"cardx\", links[0])\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (typeof index !== \"number\") return;\r\n\t\t\t\tvar next = game.createEvent(\"jingliemrfz_after\");\r\n\t\t\t\tnext.player = player;\r\n\t\t\t\tnext.target_jingliemrfz = target;\r\n\t\t\t\tnext.card_jingliemrfz = links[0];\r\n\t\t\t\tnext.setContent(lib.skill.jingliemrfz[\"index_\" + index]);\r\n\t\t\t},\r\n\t\t\tasync index_0(event, trigger, player) {\r\n\t\t\t\tlet target = event.target_jingliemrfz,\r\n\t\t\t\t\tcard = event.card_jingliemrfz;\r\n\t\t\t\tawait player.gain(card, \"gain2\");\r\n\t\t\t\ttarget.loseHp();\r\n\t\t\t},\r\n\t\t\tasync index_1(event, trigger, player) {\r\n\t\t\t\tlet target = event.target_jingliemrfz,\r\n\t\t\t\t\tcard = event.card_jingliemrfz;\r\n\t\t\t\tif (player.hasUseTarget(card, false))\r\n\t\t\t\t\tplayer.chooseUseTarget(\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tname: card.name,\r\n\t\t\t\t\t\t\tsuit: card.suit,\r\n\t\t\t\t\t\t\tnumber: card.number,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfalse\r\n\t\t\t\t\t);\r\n\t\t\t\telse player.draw();\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.when(\"phaseJieshuBegin\")\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tif (player.hasSkill(\"jingliemrfz_ban\") || !game.hasPlayer(current => lib.skill.jingliemrfz.filter(event, player))) return;\r\n\t\t\t\t\t\tplayer.addTempSkill(\"jingliemrfz_ban\", \"phaseJieshuEnd\");\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.chooseTarget()\r\n\t\t\t\t\t\t\t.set(\"prompt\", get.prompt(\"jingliemrfz\"))\r\n\t\t\t\t\t\t\t.set(\"prompt2\", `你可以观看一名其他角色的手牌并选择其中一张牌，然后该角色选择一项：<br>①失去一点体力，令你获得此牌。<br>②令你视为使用此牌，然后本回合结束阶段你发动一次【鲸猎】。<br>③对你使用一张【杀】，若此杀造成伤害，你翻面，反之执行其他两项。`)\r\n\t\t\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => player != target && target.countCards(\"h\") > 0)\r\n\t\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\t\tvar player = get.event().player;\r\n\t\t\t\t\t\t\t\tvar att = get.attitude(player, target),\r\n\t\t\t\t\t\t\t\t\tnum = 0;\r\n\t\t\t\t\t\t\t\tif (att >= 0) num += 2;\r\n\t\t\t\t\t\t\t\telse num += 5 + target.getDamagedHp();\r\n\t\t\t\t\t\t\t\treturn (num += target.countCards(\"h\") / 2);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\t\t\tplayer.logSkill(\"jingliemrfz\", target);\r\n\t\t\t\t\t\t\tvar next = game.createEvent(\"jingliemrfz_phaseJieshu\");\r\n\t\t\t\t\t\t\tnext.player = player;\r\n\t\t\t\t\t\t\tnext.targets = result.targets;\r\n\t\t\t\t\t\t\tnext.setContent(lib.skill.jingliemrfz.content);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync index_2(event, trigger, player) {\r\n\t\t\t\tlet target = event.target_jingliemrfz,\r\n\t\t\t\t\tcard = event.card_jingliemrfz;\r\n\t\t\t\tawait target\r\n\t\t\t\t\t.chooseToUse(\r\n\t\t\t\t\t\tfunction (card, player, event) {\r\n\t\t\t\t\t\t\tif (get.name(card) != \"sha\") return false;\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\"【鲸猎】:对\" + get.translation(player) + \"使用一张杀\"\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"forced\", true)\r\n\t\t\t\t\t.set(\"targetRequired\", true)\r\n\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\tif (target != _status.event.sourcex && !ui.selected.targets.includes(_status.event.sourcex)) return false;\r\n\t\t\t\t\t\treturn player.canUse({ name: \"sha\" }, target, false);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"sourcex\", player);\r\n\t\t\t\tif (\r\n\t\t\t\t\ttarget.hasHistory(\"useCard\", evt => {\r\n\t\t\t\t\t\treturn evt.getParent(2) == event && target.hasHistory(\"sourceDamage\", evtx => evt.card == evtx.card);\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t\tplayer.turnOver();\r\n\t\t\t\telse {\r\n\t\t\t\t\tfor (var i = 0; i < 2; i++) {\r\n\t\t\t\t\t\tvar next = game.createEvent(\"jingliemrfz_noDamage\");\r\n\t\t\t\t\t\tnext.player = player;\r\n\t\t\t\t\t\tnext.target_jingliemrfz = target;\r\n\t\t\t\t\t\tnext.card_jingliemrfz = card;\r\n\t\t\t\t\t\tnext.setContent(lib.skill.jingliemrfz[\"index_\" + i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshulangmrfz: {\r\n\t\t\taudio: \"zhangenmrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\ttarget: \"useCardToTargeted\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.card && event.card.name == \"sha\" && player.hasSha() && lib.filter.targetEnabled({ name: \"sha\" }, player, event.player);\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\tfor (var i of player.getCards(\"hes\", \"sha\")) {\r\n\t\t\t\t\tif (get.effect(event.player, i, player, player) > 0 && get.attitude(player, event.player) < 0) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} //QQQ\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\treturn \"你可以对\" + get.translation(event.player) + \"使用一张杀\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { result } = await player\r\n\t\t\t\t\t.chooseToUse(function (card, player, event) {\r\n\t\t\t\t\t\tif (get.name(card) != \"sha\") return false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}, \"请使用一张【杀】\")\r\n\t\t\t\t\t.set(\"forced\", true)\r\n\t\t\t\t\t.set(\"targetRequired\", true)\r\n\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t.set(\"shulangmrfz_card\", true)\r\n\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\tif (target != _status.event.sourcex && !ui.selected.targets.includes(_status.event.sourcex)) return false;\r\n\t\t\t\t\t\treturn player.canUse({ name: \"sha\" }, target, false);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"sourcex\", trigger.player);\r\n\t\t\t\tif (\r\n\t\t\t\t\tplayer.hasHistory(\"useCard\", evt => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevt &&\r\n\t\t\t\t\t\t\tevt.card &&\r\n\t\t\t\t\t\t\tevt.name == \"useCard\" &&\r\n\t\t\t\t\t\t\tplayer.hasHistory(\"sourceDamage\", evtx => {\r\n\t\t\t\t\t\t\t\treturn evt.card == evtx.card;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})\r\n\t\t\t\t) {\r\n\t\t\t\t\ttrigger.getParent().excluded.addArray(trigger.targets);\r\n\t\t\t\t\tif (trigger.player.countGainableCards(player, \"he\")) player.gainPlayerCard(\"he\", trigger.player, true).set(\"target\", trigger.player).set(\"complexSelect\", false).set(\"ai\", lib.card.shunshou.ai.button);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"shulangmrfz_need\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tneed: {\r\n\t\t\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn event.getParent(3).name == \"shulangmrfz\" && event.card && event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst id = trigger.target.playerid;\r\n\t\t\t\t\t\tconst map = trigger.getParent().customArgs;\r\n\t\t\t\t\t\tif (!map[id]) map[id] = {};\r\n\t\t\t\t\t\tif (typeof map[id].shanRequired == \"number\") {\r\n\t\t\t\t\t\t\tmap[id].shanRequired++;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmap[id].shanRequired = 2;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 新 歌蕾蒂娅\r\n\t\tquliemrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t\tmark: function (dialog, storage, player) {\r\n\t\t\t\t\tvar cards = player.getExpansions(\"quliemrfz\");\r\n\t\t\t\t\tif (player.isUnderControl(true)) dialog.addAuto(cards);\r\n\t\t\t\t\telse return \"共有\" + get.cnNumber(cards.length) + \"张牌\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tonremove(player) {\r\n\t\t\t\tgame.countPlayer(current => {\r\n\t\t\t\t\tvar cards = current.getExpansions(\"quliemrfz\");\r\n\t\t\t\t\tif (cards) current.loseToDiscardpile(cards);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\taudio: \"ronghangmrfz\",\r\n\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tget.tag(event.card, \"damage\") &&\r\n\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\treturn current != player && !current.hasMark(\"quliemrfz_eff\");\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn current != player && !current.hasMark(\"quliemrfz_eff\") && get.attitude(player, current) < 0;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tprompt2: \"当你使用带有伤害类标签的牌时，你可以令其他角色若在此牌结算完成前使用或打出牌后，其须将一半（向上取整）的牌置于武将牌上\",\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tgame.countPlayer(current => {\r\n\t\t\t\t\tif (current == player) return;\r\n\t\t\t\t\tcurrent.addMark(\"quliemrfz_eff\", 1, false);\r\n\t\t\t\t});\r\n\t\t\t\tif (!player.storage.newxunxiangmrfz) player.storage.newxunxiangmrfz = [];\r\n\t\t\t\tplayer.storage.newxunxiangmrfz.add(trigger.card);\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.when(\"useCardAfter\")\r\n\t\t\t\t\t.filter((event, player) => {\r\n\t\t\t\t\t\treturn player.storage.newxunxiangmrfz.includes(event.card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tgame.countPlayer(current => {\r\n\t\t\t\t\t\t\tcurrent.removeMark(\"quliemrfz_eff\", 1, false);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tplayer.storage.newxunxiangmrfz.remove(trigger.card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.assign({ lastDo: true });\r\n\t\t\t},\r\n\t\t\tgroup: [\"quliemrfz_eff\", \"quliemrfz_die\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdie: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"dieAfter\" },\r\n\t\t\t\t\tforceDie: true,\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn event.player.getExpansions(\"quliemrfz\").length;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\ttrigger.player.loseToDiscardpile(trigger.player.getExpansions(\"quliemrfz\"));\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: [\"useCardAfter\", \"respondAfter\", \"phaseZhunbeiBegin\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tif (event.name == \"phaseZhunbei\") {\r\n\t\t\t\t\t\t\treturn event.player.getExpansions(\"quliemrfz\").length > 0;\r\n\t\t\t\t\t\t} else return event.player.countCards(\"h\") > 0 && event.player != player && event.player.hasMark(\"quliemrfz_eff\");\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (trigger.name == \"phaseZhunbei\") {\r\n\t\t\t\t\t\t\tvar current = trigger.player;\r\n\t\t\t\t\t\t\tvar cards = current.getExpansions(\"quliemrfz\");\r\n\t\t\t\t\t\t\tconst {links} =\r\n\t\t\t\t\t\t\t\tnew Set(cards.map(i => get.type2(i, current))).size == 1\r\n\t\t\t\t\t\t\t\t\t? {links:[]}\r\n\t\t\t\t\t\t\t\t\t: await current\r\n\t\t\t\t\t\t\t\t\t\t\t.chooseCardButton(cards)\r\n\t\t\t\t\t\t\t\t\t\t\t.set(\"prompt\", `请选择至少两张不同类型的牌`)\r\n\t\t\t\t\t\t\t\t\t\t\t.set(\"selectButton\", [2, Infinity])\r\n\t\t\t\t\t\t\t\t\t\t\t.set(\"filterButton\", button => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar player = get.event().player,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcards = ui.selected.buttons;\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn !cards.some(cardx => get.type2(cardx, player) == get.type2(button, player));\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn get.value(button.link, _status.event.player);\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\tif (links.length > 0) {\r\n\t\t\t\t\t\t\t\tcurrent.gain(links, \"draw\");\r\n\t\t\t\t\t\t\t\tgame.log(current, \"收回了\" + get.cnNumber(links.length) + \"因【驱猎】而置于武将牌上的张牌\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (cards.length != links.length) current.discard(cards.removeArray(links));\r\n\t\t\t\t\t\t\tcurrent.unmarkSkill(\"quliemrfz\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlet current = trigger.player;\r\n\t\t\t\t\t\t\tvar num = Math.ceil(current.countCards(\"h\") / 2);\r\n\t\t\t\t\t\t\tconst {cards} = await current\r\n\t\t\t\t\t\t\t\t.chooseCard(true)\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", `请选择${get.cnNumber(num, false)}张牌`)\r\n\t\t\t\t\t\t\t\t.set(\"selectCard\", num)\r\n\t\t\t\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\t\t\t\tvar player = get.event().player;\r\n\t\t\t\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\tcurrent.addToExpansion(cards, \"giveAuto\", current).gaintag.add(\"quliemrfz\");\r\n\t\t\t\t\t\t\tcurrent.markSkill(\"quliemrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tnewxunxiangmrfz: {\r\n\t\t\taudio: \"xunxiangmrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseJieshuBegin\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tvar cards = lib.skill.zheqimrfz_eff2.getDiscard(event);\r\n\t\t\t\treturn cards.length > 0 && player.canCompare(event.player);\r\n\t\t\t},\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\treturn `你可以与${get.translation(event.player)}进行拼点，若你赢，你获得其本回合因弃置而进入弃牌堆的不同类型的牌各一张，并将拼点牌当雷【杀】对其使用`;\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\treturn get.attitude(player, event.player) < 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { result } = await player.chooseToCompare(trigger.player);\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar discards = lib.skill.zheqimrfz_eff2.getDiscard(trigger);\r\n\t\t\t\t\tconst {links} =\r\n\t\t\t\t\t\tnew Set(discards.map(i => get.type(i))).size <= 1\r\n\t\t\t\t\t\t\t? {links:discards}\r\n\t\t\t\t\t\t\t: await player\r\n\t\t\t\t\t\t\t\t\t.chooseCardButton(discards)\r\n\t\t\t\t\t\t\t\t\t.set(\"prompt\", `请选择不同类型的牌`)\r\n\t\t\t\t\t\t\t\t\t.set(\"selectButton\", [0, Infinity])\r\n\t\t\t\t\t\t\t\t\t.set(\"filterButton\", button => {\r\n\t\t\t\t\t\t\t\t\t\tvar player = get.event().player,\r\n\t\t\t\t\t\t\t\t\t\t\tcards = ui.selected.buttons;\r\n\t\t\t\t\t\t\t\t\t\treturn !cards.some(cardx => get.type(cardx, player) == get.type(button, player));\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\t\t\t\t\treturn get.value(button.link, _status.event.player);\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (links) player.gain(links, \"gain2\");\r\n\t\t\t\t\tvar cards = [result.player, result.target];\r\n\t\t\t\t\tcards = cards.filter(i => get.position(i) == \"d\");\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tcards.length > 0 &&\r\n\t\t\t\t\t\tplayer.canUse(\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\t\t\tcards: cards,\r\n\t\t\t\t\t\t\t\tnature: \"thunder\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\ttrigger.player,\r\n\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tplayer.useCard({ name: \"sha\", nature: \"thunder\" }, cards, trigger.player);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\txueshuomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tsource: \"damageBegin3\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") >= event.player.countCards(\"h\");\r\n\t\t\t},\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\treturn `你可以令${get.translation(event.player)}额外受到1点伤害`;\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\treturn get.attitude(player, event.player) < 0;\r\n\t\t\t},\r\n\t\t\tcontent() {\r\n\t\t\t\ttrigger.num++;\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 妮芙\r\n\t\txunxinmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn !current.hasCard(card => get.is.shownCard(card), \"h\") && current.countCards(\"h\") > 0;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\treturn !target.hasCard(card => get.is.shownCard(card), \"h\") && target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tprompt: \"【巡心】:请选择一名没有明置牌的角色\",\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst target = event.targets[0];\r\n\t\t\t\tconst {cards} = await player\r\n\t\t\t\t\t.choosePlayerCard(\"h\", target)\r\n\t\t\t\t\t.set(\"prompt\", `请选择明置${get.translation(target)}一张手牌`)\r\n\t\t\t\t\t.set(\"visible\", true)\r\n\t\t\t\t\t.set(\"filterButton\", button => {\r\n\t\t\t\t\t\treturn !get.is.shownCard(button);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\tlet target = get.event().target,\r\n\t\t\t\t\t\t\tplayer = get.player();\r\n\t\t\t\t\t\tlet value = get.value(button);\r\n\t\t\t\t\t\tif (get.attitude(player, target) < 0) {\r\n\t\t\t\t\t\t\tlet value = get.value(button);\r\n\t\t\t\t\t\t\treturn target.hasUseTarget(button) ? value - 10 : value;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"target\", target)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\tawait target.addShownCards(cards, \"visible_xunxinmrfz\");\r\n\r\n\t\t\t\tlet showncards = [];\r\n\t\t\t\tfor (let char of game.players) {\r\n\t\t\t\t\tlet shown = char.getCards(\"h\", card => get.is.shownCard(card));\r\n\t\t\t\t\tif (shown) showncards.push(...shown);\r\n\t\t\t\t}\r\n\t\t\t\tlet setShown = new Set(showncards.map(i => get.type2(i)));\r\n\t\t\t\tlet hasTarget = game.hasPlayer(current => {\r\n\t\t\t\t\treturn !current.hasCard(card => get.is.shownCard(card), \"h\") && current.countCards(\"h\") > 0;\r\n\t\t\t\t});\r\n\t\t\t\tif (setShown.size === showncards.map(i => get.type2(i)).length && hasTarget) {\r\n\t\t\t\t\tconst {targets} = await player\r\n\t\t\t\t\t\t.chooseTarget()\r\n\t\t\t\t\t\t.set(\"prompt\", `【巡心】:请选择一名没有明置牌的角色`)\r\n\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\t\treturn get.attitude(player, target) < 0;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\t\treturn !target.hasCard(card => get.is.shownCard(card), \"h\") && target.countCards(\"h\") > 0;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (!targets) return;\r\n\t\t\t\t\tplayer.logSkill(\"xunxinmrfz\", targets[0]);\r\n\t\t\t\t\tvar next = game.createEvent(\"xunxinmrfz_cycle\");\r\n\t\t\t\t\tnext.player = player;\r\n\t\t\t\t\tnext.target = targets[0];\r\n\t\t\t\t\tnext.targets = targets;\r\n\t\t\t\t\tnext.setContent(lib.skill.xunxinmrfz.content);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tchixinmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tglobal: \"chixinmrfz_eff\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\taiOrder(player, card, num) {\r\n\t\t\t\t\t\t\tif (!player.hasCard(card => get.is.shownCard(card), \"h\")) return;\r\n\t\t\t\t\t\t\tif (!get.is.shownCard(card)) {\r\n\t\t\t\t\t\t\t\tlet shown = player.getCards(\"h\", card => get.is.shownCard(card));\r\n\t\t\t\t\t\t\t\tif (shown.length > 1) return num - 10;\r\n\t\t\t\t\t\t\t\treturn num + get.value({ name: card.name }) - get.value(shown[0]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (get.name(card) == \"sha\" && player.getCardUsable(\"sha\") < 2) return num + 10;\r\n\t\t\t\t\t\t\tif (get.name(card) == \"tao\" && player.getDamagedHp() == 1) return num + 10;\r\n\t\t\t\t\t\t\tif (get.name(card) == \"jiu\" && player.getCardUsable(\"jiu\") < 2 && player.isPhaseUsing()) return num + 10;\r\n\t\t\t\t\t\t\tif (get.name(card) == \"wuxie\") return num + 10;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcardname(card, player, name) {\r\n\t\t\t\t\t\t\tlet shown = player.getCards(\"h\", card => get.is.shownCard(card));\r\n\t\t\t\t\t\t\tif (shown && shown.length == 1 && lib.card[shown[0].name].type != \"equip\") {\r\n\t\t\t\t\t\t\t\treturn shown[0].name;\r\n\t\t\t\t\t\t\t} else if (shown && (shown.length > 1 || (shown.length == 1 && lib.card[shown[0].name].type == \"equip\"))) {\r\n\t\t\t\t\t\t\t\treturn \"wuxie\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tkuixinmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tsource: \"damageEnd\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.player != player && event.player.isIn() && event.player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\tlet tran = get.translation(event.player);\r\n\t\t\t\treturn `是否令${tran}所有的[明置/暗置]牌[暗置/明置]，然后${tran}弃置两张暗置的牌？`;\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\treturn get.attitude(event.player, player) < 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst target = trigger.player;\r\n\t\t\t\tfor (let card of target.getCards(\"h\")) {\r\n\t\t\t\t\tif (get.is.shownCard(card)) target.hideShownCards(card);\r\n\t\t\t\t\telse target.addShownCards(card, \"visible_xunxinmrfz\");\r\n\t\t\t\t}\r\n\t\t\t\tlet { promise, resolve } = Promise.withResolvers();\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t}, 10);\r\n\t\t\t\tawait promise;\r\n\t\t\t\tif (target.countCards(\"h\", card => !get.is.shownCard(card)) > 0) {\r\n\t\t\t\t\ttarget\r\n\t\t\t\t\t\t.chooseToDiscard(true, 2)\r\n\t\t\t\t\t\t.set(\"prompt\", `【溃心】:请弃置两张暗置的牌`)\r\n\t\t\t\t\t\t.set(\"filterCard\", card => !get.is.shownCard(card))\r\n\t\t\t\t\t\t.set(\"ai\", card => get.value({ name: card.name }));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 娜仁图亚\r\n\t\t/** @type { Skill } */\r\n\t\teyanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardEnd\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tlet card = event.card;\r\n\t\t\t\treturn event.cards.someInD() && get.tag(card, \"damage\") && game.hasPlayer(current => player != current && current.inRangeOf(player));\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tevent.result = await player\r\n\t\t\t\t\t.chooseTarget()\r\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"eyanmrfz\"))\r\n\t\t\t\t\t.set(\"prompt2\", \"你可以将此牌交给攻击范围内的一名其他角色\")\r\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => player.inRange(target) && player != target)\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\tconst player = get.player();\r\n\t\t\t\t\t\tlet subtraction = player.maxHp - target.maxHp;\r\n\t\t\t\t\t\tlet num = get.attitude(player, target) > 0 ? 0 : -2;\r\n\t\t\t\t\t\tif (get.attitude(player, target) < 0 && subtraction - 1 >= target.countCards(\"h\")) return 114514;\r\n\t\t\t\t\t\treturn num - get.value(get.event().cardx) * 0.5 + Math.min(subtraction, target.countCards(\"h\")) * 2;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"cardx\", trigger.card)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst target = event.targets[0];\r\n\t\t\t\tawait player.give(trigger.cards.filterInD(), target);\r\n\r\n\t\t\t\tlet num = player.maxHp - target.maxHp;\r\n\t\t\t\tif (num < 1) return;\r\n\t\t\t\tconst {cards} =\r\n\t\t\t\t\tnum >= target.countCards(\"h\", card => !get.is.shownCard(card))\r\n\t\t\t\t\t\t? {cards:target.getCards(\"h\", card => !get.is.shownCard(card))}\r\n\t\t\t\t\t\t: await target\r\n\t\t\t\t\t\t\t\t.chooseCard()\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", `【恶魇】:请展示${num}张手牌`)\r\n\t\t\t\t\t\t\t\t.set(\"forced\", true)\r\n\t\t\t\t\t\t\t\t.set(\"ai\", card => -get.value(card))\r\n\t\t\t\t\t\t\t\t.set(\"filterCard\", card => !get.is.shownCard(card))\r\n\t\t\t\t\t\t\t\t.set(\"selectCard\", num)\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\ttarget.addShownCards(cards, \"visible_eyanmrfz\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tshafeimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"phaseZhunbeiBegin\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player != event.player && event.player.countCards(\"h\", card => get.is.shownCard(card)) > 0;\r\n\t\t\t},\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\tconst cards = event.player.getCards(\"h\", card => get.is.shownCard(card));\r\n\t\t\t\treturn `你可以获得${get.translation(event.player)}的${cards.length}张牌(${get.translation(cards)})`;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst cards = trigger.player.getCards(\"h\", card => get.is.shownCard(card));\r\n\t\t\t\tplayer.gain(cards, \"gain2\");\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 佩佩\r\n\t\tboqingmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"drawBegin\",\r\n\t\t\t\tglobal: \"judgeBegin\",\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet cards = get.cards(4);\r\n\t\t\t\tlet originalHandCards = player.getCards(\"h\");\r\n\t\t\t\tconst {moved} = await player\r\n\t\t\t\t\t.chooseToMove(\"【博青】:你可以交换牌堆顶和你的手牌并任意顺序放回牌堆顶或牌堆底\")\r\n\t\t\t\t\t.set(\"list\", [[\"牌堆顶\", cards], [\"牌堆底\"], [\"你的手牌\", player.getCards(\"h\")]])\r\n\t\t\t\t\t.set(\"processAI\", list => {\r\n\t\t\t\t\t\tlet moved = [[], [], []];\r\n\t\t\t\t\t\tlet top = list[0][1];\r\n\t\t\t\t\t\tlet originalHandCards = get.event().originalHandCards.slice();\r\n\t\t\t\t\t\tlet current = _status.currentPhase;\r\n\t\t\t\t\t\tlet evt = get.event().evt;\r\n\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\tlet all = [...top, ...list[2][1]];\r\n\t\t\t\t\t\tall.sort(function (a, b) {\r\n\t\t\t\t\t\t\treturn get.value(b, player) - get.value(a, player);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\tTODO 开摆！有缘再说！\r\n\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t// if(evt.name=='draw'){\r\n\t\t\t\t\t\tfor (let i = 0; i < originalHandCards.length; i++) {\r\n\t\t\t\t\t\t\tmoved[2].push(all.shift());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\twhile (all) {\r\n\t\t\t\t\t\t\tif (get.value(all[0], player) <= 5) break;\r\n\t\t\t\t\t\t\tmoved[1].push(all.shift());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tmoved[0].addArray(all);\r\n\t\t\t\t\t\t// } else{\r\n\t\t\t\t\t\t// \tconst evtx = evt.getParent('judge');\r\n\t\t\t\t\t\t// \tconst attitude = get.attitude(player, evtx.player);\r\n\t\t\t\t\t\t// \tlet reverseAll = all.reverse();\r\n\t\t\t\t\t\t// \tfor(let i of reverseAll){\r\n\t\t\t\t\t\t// \t\tconst result = evtx.judge(i) - evtx.judge(evtx.player.judging[0]);\r\n\t\t\t\t\t\t// \t\tif(result==0) continue;\r\n\t\t\t\t\t\t// \t\tif(originalHandCards.includes(i)&&(result - get.value(card) / 2)>0)\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t\treturn moved;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"filterOk\", moved => {\r\n\t\t\t\t\t\tlet originalHandCards = get.event().originalHandCards;\r\n\t\t\t\t\t\treturn moved[2].length == originalHandCards.length;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"evt\", event)\r\n\t\t\t\t\t.set(\"originalHandCards\", originalHandCards)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!moved) return;\r\n\t\t\t\tconst puts = player.getCards(\"h\", i => moved[0].includes(i) || moved[1].includes(i));\r\n\t\t\t\tconst gains = cards.filter(i => moved[2].includes(i));\r\n\t\t\t\tif (puts.length && gains.length) {\r\n\t\t\t\t\tplayer.$throw(puts.length, 1000);\r\n\t\t\t\t\tawait player.gain(gains, \"giveAuto\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst top = moved[0];\r\n\t\t\t\tconst bottom = moved[1];\r\n\t\t\t\ttop.reverse();\r\n\t\t\t\tfor (var i = 0; i < top.length; i++) {\r\n\t\t\t\t\tui.cardPile.insertBefore(top[i], ui.cardPile.firstChild);\r\n\t\t\t\t}\r\n\t\t\t\tfor (i = 0; i < bottom.length; i++) {\r\n\t\t\t\t\tui.cardPile.appendChild(bottom[i]);\r\n\t\t\t\t}\r\n\t\t\t\tgame.addCardKnower(top, player);\r\n\t\t\t\tgame.addCardKnower(bottom, player);\r\n\t\t\t\tplayer.popup(get.cnNumber(top.length) + \"上\" + get.cnNumber(bottom.length) + \"下\");\r\n\t\t\t\tgame.log(player, \"将\" + get.cnNumber(top.length) + \"张牌置于牌堆顶\");\r\n\t\t\t\tgame.updateRoundNumber();\r\n\t\t\t},\r\n\t\t},\r\n\t\tkuisuimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tusable: 1,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tgetLastAction(player) {\r\n\t\t\t\tconst cards = [];\r\n\t\t\t\tconst history = game.getAllGlobalHistory();\r\n\t\t\t\tif (history.length < 2) return [];\r\n\t\t\t\tconst last = history[history.length - 2];\r\n\t\t\t\tif (last[\"cardMove\"].length < 1) return [];\r\n\t\t\t\tfor (let evt of last[\"cardMove\"]) {\r\n\t\t\t\t\tif (!evt.cards) continue;\r\n\t\t\t\t\tfor (let card of evt.cards) {\r\n\t\t\t\t\t\tif (get.position(card, true) == \"d\" && get.type(card) != \"equip\" && player.hasUseTarget(card, false)) cards.push(card);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn cards;\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tconst cards = lib.skill.kuisuimrfz.getLastAction(player);\r\n\t\t\t\treturn player.countCards(\"he\") > 0 && cards.length > 0;\r\n\t\t\t},\r\n\t\t\tfilterCard: true,\r\n\t\t\tposition: \"he\",\r\n\t\t\tcheck(card) {\r\n\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t},\r\n\t\t\tdiscard: false,\r\n\t\t\tlose: false,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet card = event.cards[0];\r\n\t\t\t\tlet names = [...new Set(lib.skill.kuisuimrfz.getLastAction(player).map(i => i.name))];\r\n\t\t\t\tlet list = [];\r\n\t\t\t\tfor (var i = 0; i < names.length; i++) {\r\n\t\t\t\t\tvar name = names[i];\r\n\t\t\t\t\tif (get.type(name) == \"basic\") list.push([\"基本\", \"\", name]);\r\n\t\t\t\t\telse if (get.type(name) == \"trick\") list.push([\"锦囊\", \"\", name]);\r\n\t\t\t\t}\r\n\t\t\t\tconst {links} = await player\r\n\t\t\t\t\t.chooseButton([\"窥岁\", [list, \"vcard\"]])\r\n\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\tlet player = get.player(),\r\n\t\t\t\t\t\t\tcard = {\r\n\t\t\t\t\t\t\t\tname: button.link[2],\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\treturn player.getUseValue(card, null, true);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!links) return;\r\n\t\t\t\tplayer.chooseUseTarget({ name: links[0][2], isCard: true }, event.cards);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 5,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tlianwenmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"damageBegin4\" },\r\n\t\t\tusable: 1,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.num > 0;\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\tif (!event.source) return true;\r\n\t\t\t\treturn get.attitude(event.source, player) < 0 || player.hp == 1 || (event.card && get.type2(event.card) == \"trick\");\r\n\t\t\t},\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\treturn `你可以进行一次判定，若为红，此伤害-1${event.source ? `且${get.translation(event.source)}手牌上限-1直到其回合结束` : \"\"}`;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst next = player.judge(function (card) {\r\n\t\t\t\t\tconst color = get.color(card);\r\n\t\t\t\t\tif (color == \"red\") return 4;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t\tnext.judge2 = function (result) {\r\n\t\t\t\t\treturn result.bool == false;\r\n\t\t\t\t};\r\n\t\t\t\tconst { color } = await next.forResult();\r\n\t\t\t\tif (color == \"red\") {\r\n\t\t\t\t\ttrigger.num--;\r\n\t\t\t\t\ttrigger.source.addTempSkill(\"lianwenmrfz_eff\", { player: \"phaseEnd\" });\r\n\t\t\t\t\ttrigger.source.addMark(\"lianwenmrfz_eff\", 1, false);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\t\t\treturn `·手牌上限-${player.countMark(\"lianwenmrfz_eff\")}`;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn (num -= player.countMark(\"lianwenmrfz_eff\"));\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//玛露希尔\r\n\t\tkumomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardAfter\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (!player.isPhaseUsing()) return false;\r\n\t\t\t\treturn event.card && get.type(event.card) == \"trick\";\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (!player.getStat(\"card\").sha) player.getStat(\"card\").sha = 0;\r\n\t\t\t\tplayer.getStat(\"card\").sha++;\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tcardEnabled(card, player) {\r\n\t\t\t\t\tif (get.type(card) == \"trick\" && player.getCardUsable(\"sha\") < 1) return false;\r\n\t\t\t\t},\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tif (card.name != \"sha\") return;\r\n\t\t\t\t\tif (!_status.kumomrfz_tmp) {\r\n\t\t\t\t\t\t_status.kumomrfz_tmp = true;\r\n\t\t\t\t\t\tconst count = player.getCardUsable(\"sha\");\r\n\t\t\t\t\t\t_status.kumomrfz_tmp = false;\r\n\t\t\t\t\t\tif (player.isPhaseUsing() && count >= player.maxHp) {\r\n\t\t\t\t\t\t\treturn player.maxHp;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tcombo: \"cainvmrfz\",\r\n\t\t\t\tthreaten: 0.8,\r\n\t\t\t},\r\n\t\t},\r\n\t\tcainvmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (event.getParent().triggeredTargets3.length > 1) return false;\r\n\t\t\t\treturn event.card && get.type(event.card) == \"trick\" && player.getCardUsable(\"sha\") > 0;\r\n\t\t\t},\r\n\t\t\tprompt(event, player) {\r\n\t\t\t\treturn `【才女】:是否令${get.translation(event.card)}额外结算${Math.min(player.maxHp, player.getCardUsable(\"sha\"))}次？`;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst num = Math.min(player.getCardUsable(\"sha\"), player.maxHp);\r\n\t\t\t\ttrigger.getParent().effectCount += num;\r\n\t\t\t},\r\n\t\t\tgroup: \"cainvmrfz_trick\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\ttrick: {\r\n\t\t\t\t\thiddenCard: function (player, name) {\r\n\t\t\t\t\t\tif (player.getStat(\"skill\").cainvmrfz_trick && player.getStat(\"skill\").cainvmrfz_trick >= player.maxHp) return false;\r\n\t\t\t\t\t\treturn player.countCards(\"hes\", \"sha\") < 1 && !lib.inpile.includes(name) && get.type(name) != \"trick\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\taudio: \"cainvmrfz\",\r\n\t\t\t\t\tenable: \"chooseToUse\",\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.getStat(\"skill\").cainvmrfz_trick && player.getStat(\"skill\").cainvmrfz_trick >= player.maxHp) return false;\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tplayer.hasCard(card =>\r\n\t\t\t\t\t\t\t\tlib.inpile.some(name => {\r\n\t\t\t\t\t\t\t\t\tif (get.name(card) != \"sha\") return false;\r\n\t\t\t\t\t\t\t\t\tif (get.type(name) != \"trick\") return false;\r\n\t\t\t\t\t\t\t\t\tif (event.filterCard({ name: name, isCard: true, cards: [card] }, player, event)) return true;\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t}, \"hes\")\r\n\t\t\t\t\t\t\t) > 0\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tchooseButton: {\r\n\t\t\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\t\t\tvar list = [];\r\n\t\t\t\t\t\t\tfor (var name of lib.inpile) {\r\n\t\t\t\t\t\t\t\tif (get.type(name) == \"trick\") {\r\n\t\t\t\t\t\t\t\t\tlist.push([get.translation(get.type(name)), \"\", name]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn ui.create.dialog(\"才女\", [list, \"vcard\"]);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfilter: function (button, player) {\r\n\t\t\t\t\t\t\treturn _status.event.getParent().filterCard({ name: button.link[2] }, player, _status.event.getParent());\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcheck: function (button) {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tvar card = { name: button.link[2], nature: button.link[3] };\r\n\t\t\t\t\t\t\tif (player.countCards(\"hes\", cardx => cardx.name == card.name)) return 0;\r\n\t\t\t\t\t\t\treturn _status.event.getParent().type == \"phase\" ? player.getUseValue(card) : 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\taudio: \"cainvmrfz\",\r\n\t\t\t\t\t\t\t\tfilterCard(card) {\r\n\t\t\t\t\t\t\t\t\treturn card.name == \"sha\";\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t\t\t\tcheck: function (card) {\r\n\t\t\t\t\t\t\t\t\treturn 7 - get.value(card);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tposition: \"hes\",\r\n\t\t\t\t\t\t\t\tviewAs: { name: links[0][2], nature: links[0][3] },\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\t\t\treturn \"将一张牌当做\" + (get.translation(links[0][3]) || \"\") + get.translation(links[0][2]) + \"使用\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\torder: 13,\r\n\t\t\t\t\t\tthreaten: 1.8,\r\n\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tcangshumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: [\"phaseUseEnd\", \"phaseUseBegin\"] },\r\n\t\t\tintro: {\r\n\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\tconst storage = player.storage.cangshumrfz;\r\n\t\t\t\t\tif (storage.index == 0) return `下个出牌阶段开始时摸${storage.num}张牌`;\r\n\t\t\t\t\treturn `下个出牌阶段阶段使用【杀】的次数+1`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn get.is.object(player.storage.cangshumrfz) || player.getCardUsable(\"sha\") > 0;\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tif (event.triggername == \"phaseUseBegin\") {\r\n\t\t\t\t\tif (!event.result) event.result = {};\r\n\t\t\t\t\tevent.result.bool = get.is.object(player.storage.cangshumrfz);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else if (player.getCardUsable(\"sha\") < 1) {\r\n\t\t\t\t\tif (!event.result) event.result = {};\r\n\t\t\t\t\tevent.result.bool = false;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tevent.result = await player\r\n\t\t\t\t\t.chooseControl(\"选项一\", \"选项二\", \"cancel2\")\r\n\t\t\t\t\t.set(\"choiceList\", [`摸${Math.min(player.getCardUsable(\"sha\"), player.maxHp)}张牌`, `使用【杀】的次数+1`])\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\tconst player = get.player();\r\n\t\t\t\t\t\tconst num = player.getCardUsable(\"sha\");\r\n\t\t\t\t\t\treturn num > 1 ? 0 : 1;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tevent.result.cost_data = event.result.index;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (event.triggername == \"phaseUseBegin\") {\r\n\t\t\t\t\tconst result = player.storage.cangshumrfz;\r\n\t\t\t\t\tif (result[\"index\"] == 0) {\r\n\t\t\t\t\t\tplayer.draw(result[\"num\"]);\r\n\t\t\t\t\t} else player.addTempSkill(\"cangshumrfz_sha\", { player: \"phaseUseEnd\" });\r\n\t\t\t\t\tdelete player.storage.cangshumrfz;\r\n\t\t\t\t\tplayer.unmarkSkill(\"cangshumrfz\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst index = event.cost_data;\r\n\t\t\t\tplayer.storage.cangshumrfz = {\r\n\t\t\t\t\tindex: index,\r\n\t\t\t\t\tnum: index === 0 ? Math.min(player.getCardUsable(\"sha\"), player.maxHp) : 1,\r\n\t\t\t\t};\r\n\t\t\t\tplayer.markSkill(\"cangshumrfz\");\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tsha: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable(card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num + 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 新霍尔海雅\r\n\t\txinkuangyumrfz: {\r\n\t\t\taudio: \"kuangyumrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCard2\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (get.type(event.card) == \"delay\" || get.type(event.card) == \"equip\") return false;\r\n\t\t\t\treturn game.hasPlayer(function (target) {\r\n\t\t\t\t\tif (event.targets.includes(target)) return false;\r\n\t\t\t\t\tif (!player.canUse(event.card, target)) return false;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tif (event.result) event.result = {};\r\n\t\t\t\tevent.result = await player\r\n\t\t\t\t\t.chooseTarget(get.prompt2(\"xinkuangyumrfz\"), [1, Infinity], function (card, player, target) {\r\n\t\t\t\t\t\tvar cardx = _status.event.cardx;\r\n\t\t\t\t\t\tif (!player.canUse(cardx, target)) return false;\r\n\t\t\t\t\t\tvar targets = _status.event.targets.slice(0).concat(ui.selected.targets);\r\n\t\t\t\t\t\tif (targets.includes(target)) return false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"promptbar\", \"none\")\r\n\t\t\t\t\t.set(\"cardx\", trigger.card)\r\n\t\t\t\t\t.set(\"targets\", trigger.targets)\r\n\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\treturn get.effect(target, _status.event.cardx, player, player);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst targets = event.targets;\r\n\t\t\t\tif (!player.storage.xinkuangyumrfz_trigger) player.storage.xinkuangyumrfz_trigger = [];\r\n\t\t\t\tplayer.storage.xinkuangyumrfz_trigger.add(trigger.card);\r\n\t\t\t\ttrigger.targets.addArray(targets);\r\n\t\t\t\tplayer.addTempSkill(\"xinkuangyumrfz_trigger\");\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\ttrigger: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"shaMiss\", \"eventNeutralized\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn player.storage.xinkuangyumrfz_trigger && player.storage.xinkuangyumrfz_trigger.includes(event.card);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\ttrigger.getParent().excluded.addArray(trigger.getParent().targets);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgroup: \"xinkuangyumrfz_remove\",\r\n\t\t\t\t},\r\n\t\t\t\tremove: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"useCardAfter\", \"useCardCancelled\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.storage.xinkuangyumrfz_trigger && player.storage.xinkuangyumrfz_trigger.includes(event.card);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.xinkuangyumrfz_trigger.remove(trigger.card);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txinchuanzhongmrfz: {\r\n\t\t\taudio: \"chuangzhongmrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseZhunbeiBegin\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.storage.xinchuanzhongmrfz_mark && player.storage.xinchuanzhongmrfz_mark.length > 0;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet nums = player.storage.xinchuanzhongmrfz_mark.length;\r\n\t\t\t\tconst indexs = [];\r\n\t\t\t\twhile (nums > 0) {\r\n\t\t\t\t\tlet list = Array.from({ length: nums + 1 }, (_, index) => index);\r\n\t\t\t\t\tlet prompt = `请为%%%选择一个自然数`;\r\n\t\t\t\t\tif (indexs.length == 0) prompt = prompt.replace(\"%%%\", \"X(摸牌数)\");\r\n\t\t\t\t\telse if (indexs.length == 1) prompt = prompt.replace(\"%%%\", \"Y(额外使用杀)\");\r\n\t\t\t\t\telse if (indexs.length == 2) prompt = prompt.replace(\"%%%\", \"Z(计算与其他角色的距离)\");\r\n\t\t\t\t\tconst { result } = await player\r\n\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t.set(\"prompt\", prompt)\r\n\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\tlet player = get.player(),\r\n\t\t\t\t\t\t\t\tnums = get.event().nums,\r\n\t\t\t\t\t\t\t\tindexs = get.event().indexs;\r\n\t\t\t\t\t\t\tswitch (indexs.length) {\r\n\t\t\t\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\t\t\t\treturn player.countCards(\"hs\", card => get.tag(card, \"damage\") > 0 || get.type(card) == \"trick\") > 1 ? 0 : nums;\r\n\t\t\t\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\t\t\t\treturn player.countCards(\"e\", \"sha\") > 1 ? 1 : 0;\r\n\t\t\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\t\t\treturn game.hasPlayer(current => get.attitude2(current) < 0) ? 0 : nums;\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\treturn nums;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"nums\", nums)\r\n\t\t\t\t\t\t.set(\"indexs\", indexs);\r\n\t\t\t\t\tnums -= result.index;\r\n\t\t\t\t\tindexs.push(result.index);\r\n\t\t\t\t}\r\n\t\t\t\tif (indexs[0] && indexs[0] > 0) player.draw(indexs[0]);\r\n\t\t\t\tif (indexs[1] && indexs[1] > 0) player.addMark(\"xinchuanzhongmrfz_sha\", indexs[1], false);\r\n\t\t\t\tif (indexs[2] && indexs[2] > 0) player.addMark(\"xinchuanzhongmrfz_distance\", indexs[2], false);\r\n\t\t\t\tplayer.addTempSkill(\"xinchuanzhongmrfz_sha\", { player: \"phaseEnd\" });\r\n\t\t\t\tplayer.addTempSkill(\"xinchuanzhongmrfz_distance\", { player: \"phaseEnd\" });\r\n\t\t\t},\r\n\t\t\tgroup: \"xinchuanzhongmrfz_mark\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdistance: {\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tglobalFrom(from, to, distance) {\r\n\t\t\t\t\t\t\treturn distance - from.countMark(\"xinchuanzhongmrfz_distance\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tsha: {\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable(card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num + player.countMark(\"xinchuanzhongmrfz_sha\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tmark: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"phaseEnd\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.xinchuanzhongmrfz_mark = [];\r\n\t\t\t\t\t\tplayer.getHistory(\"useCard\", function (evt) {\r\n\t\t\t\t\t\t\tplayer.storage.xinchuanzhongmrfz_mark.add(get.type2(evt.card));\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//异格推王 维娜维多利亚\r\n\t\tzhongyuanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn Object.keys(window.whichWaySave.weinaData.HMS).filter(i => !player.hasSkill(i)).length > 0;\r\n\t\t\t},\r\n\t\t\tfrequent: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst data = window.whichWaySave.weinaData;\r\n\t\t\t\tlet tmp = {\r\n\t\t\t\t\ttriggers: Object.keys(data.trigger.get().translation).randomGets(3),\r\n\t\t\t\t\tfilter: Object.keys(data.filter).randomGets(3),\r\n\t\t\t\t\tcontent: Object.keys(data.content.get()).randomGets(3),\r\n\t\t\t\t};\r\n\t\t\t\tlet random = {\r\n\t\t\t\t\tnum: data.x[Object.keys(data.x).randomGet()],\r\n\t\t\t\t\tphase: data.getPhase(),\r\n\t\t\t\t\tname: data.getName(),\r\n\t\t\t\t};\r\n\t\t\t\tlet info = { ...data.getInfo(data, null, {}, random), ...data.trigger.get().translation };\r\n\t\t\t\tlet result = {};\r\n\t\t\t\tfor (let i of Object.keys(tmp)) {\r\n\t\t\t\t\tlet values = tmp[i];\r\n\t\t\t\t\tconst {index} = await player\r\n\t\t\t\t\t\t.chooseControl()\r\n\t\t\t\t\t\t.set(\"choiceList\", [...values.map(i => info[i])])\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tlet key = values[index];\r\n\t\t\t\t\tresult[i] = {\r\n\t\t\t\t\t\ttrans: info[key],\r\n\t\t\t\t\t\teffect: data.findKey(i, key),\r\n\t\t\t\t\t\tkey: key,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tlet skillname = Object.keys(data.HMS)\r\n\t\t\t\t\t.filter(i => !player.hasSkill(i))\r\n\t\t\t\t\t.randomGet();\r\n\t\t\t\tlib.translate[skillname] = data.HMS[skillname];\r\n\t\t\t\tlib.translate[skillname + \"_info\"] = \"每回合限一次，\" + result.triggers.trans + \",若\" + result.filter.trans + \",你可以\" + result.content.trans;\r\n\r\n\t\t\t\tif (!_status.weinaData) _status.weinaData = {};\r\n\t\t\t\t_status.weinaData[skillname] = {\r\n\t\t\t\t\tresult: result,\r\n\t\t\t\t\tdata: data,\r\n\t\t\t\t\trandom: random,\r\n\t\t\t\t\ttmp: tmp,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tlib.skill[skillname] = {\r\n\t\t\t\t\tonremove(player, skill) {\r\n\t\t\t\t\t\tdelete _status.weinaData[skill];\r\n\t\t\t\t\t},\r\n\t\t\t\t\tusable: 1,\r\n\t\t\t\t\ttrigger: { player: Object.keys(result.triggers.effect[0])[0] },\r\n\t\t\t\t\tweinaName: skillname,\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tlet name = this.weinaName;\r\n\t\t\t\t\t\tlet filter = _status.weinaData[name].data.findKey(_status.weinaData[name].result.filter, Object.keys(_status.weinaData[name].tmp)[1])[0].filter;\r\n\t\t\t\t\t\treturn filter(event, player, name);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet name = event.name;\r\n\t\t\t\t\t\tlet contents = _status.weinaData[name].data.findKey(_status.weinaData[name].result.content, _status.weinaData[name].result.content.key)[0][_status.weinaData[name].result.content.key].content;\r\n\t\t\t\t\t\tvar next = game.createEvent(\"weinaNext\");\r\n\t\t\t\t\t\tnext.player = player;\r\n\t\t\t\t\t\tnext.name = name;\r\n\t\t\t\t\t\tnext.weinaData = {\r\n\t\t\t\t\t\t\tnum: _status.weinaData[name].random.num.num(event, player),\r\n\t\t\t\t\t\t\tname: _status.weinaData[name].random.name,\r\n\t\t\t\t\t\t\tphase: _status.weinaData[name].random.phase,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tnext.setContent(contents);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tthreaten: 0.8,\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t\tplayer.addSkill(skillname);\r\n\t\t\t},\r\n\t\t},\r\n\t\tfutumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCard\",\r\n\t\t\t},\r\n\t\t\tgetSkillsTrigger(target) {\r\n\t\t\t\tlet skills = target.getSkills(null, false, false).filter(skill => {\r\n\t\t\t\t\tvar info = get.info(skill);\r\n\t\t\t\t\tif (get.skillInfoTranslation(skill, target).length == 0) return false;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t});\r\n\t\t\t\tlet triggers = [];\r\n\t\t\t\tlet suffixes = [\"Begin\", \"End\", \"After\", \"Start\", \"Before\"];\r\n\t\t\t\tfor (let skill of skills) {\r\n\t\t\t\t\tlet trigger = get.info(skill).trigger;\r\n\t\t\t\t\tfor (let key in trigger) {\r\n\t\t\t\t\t\tif (!Array.isArray(trigger[key])) {\r\n\t\t\t\t\t\t\tfor (let suffix of suffixes) {\r\n\t\t\t\t\t\t\t\tif (trigger[key].includes(suffix)) triggers.add(trigger[key].replace(suffix, \"\"));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t\ttriggers.addArray(\r\n\t\t\t\t\t\t\t\ttrigger[key].map(i => {\r\n\t\t\t\t\t\t\t\t\tfor (let suffix of suffixes) {\r\n\t\t\t\t\t\t\t\t\t\ti = i.replace(suffix, \"\");\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn triggers;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tevent.card &&\r\n\t\t\t\t\t(get.type(event.card) == \"trick\" || (get.type(event.card) == \"basic\" && ![\"shan\", \"tao\", \"jiu\", \"du\"].includes(event.card.name))) &&\r\n\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && lib.skill.futumrfz.getSkillsTrigger(current).some(i => lib.skill.futumrfz.getSkillsTrigger(player).includes(i));\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && lib.skill.futumrfz.getSkillsTrigger(current).some(i => lib.skill.futumrfz.getSkillsTrigger(player).includes(i));\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\twangximrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"damageBegin3\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.player === player || get.distance(player, event.player) < 2;\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tlet skillList = player.getSkills(null, false, false).filter(skill => {\r\n\t\t\t\t\tlet info = get.info(skill);\r\n\t\t\t\t\tif (get.skillInfoTranslation(skill, player).length === 0 || !info || info.charlotte) return false;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t});\r\n\t\t\t\tevent.result = await player\r\n\t\t\t\t\t.chooseControl(skillList, \"cancel2\")\r\n\t\t\t\t\t.set(\"prompt\", `你可以失去一个技能令此伤害对${trigger.player === player ? \"你\" : get.translation(trigger.player)}无效并令其摸两张牌`)\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\tlet event = get.event();\r\n\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\tlet target = get.event().target;\r\n\t\t\t\t\t\tlet skillList = get.event().skillList;\r\n\t\t\t\t\t\tif (get.attitude2(target) < 0) return \"cancel2\";\r\n\t\t\t\t\t\tif (target.hp - event.num < 1)\r\n\t\t\t\t\t\t\treturn skillList.sort((a, b) => {\r\n\t\t\t\t\t\t\t\treturn get.skillthreaten(b) - get.skillthreaten(a);\r\n\t\t\t\t\t\t\t})[0];\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tskillList\r\n\t\t\t\t\t\t\t\t.filter(skill => get.skillthreaten(skill) < 1)\r\n\t\t\t\t\t\t\t\t.sort((a, b) => {\r\n\t\t\t\t\t\t\t\t\treturn get.skillthreaten(b) - get.skillthreaten(a);\r\n\t\t\t\t\t\t\t\t})[0] || \"cancel2\"\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"target\", trigger.player)\r\n\t\t\t\t\t.set(\"skillList\", skillList)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tevent.result.cost_data = event.result.control;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet skill = event.cost_data;\r\n\t\t\t\tgame.log(player, \"失去了\", `#g【${get.translation(skill)}】`);\r\n\t\t\t\tplayer.removeSkill(skill);\r\n\t\t\t\ttrigger.player.draw(2);\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.1,\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 荒芜拉普兰德\r\n\t\tshilangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.storage.phaseHistory;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst phaseHistory = player.storage.phaseHistory;\r\n\t\t\t\tif (lib.phaseName.isSubset(Object.keys(phaseHistory))) player.draw();\r\n\t\t\t\telse player.loseHp();\r\n\t\t\t},\r\n\t\t},\r\n\t\ttoulangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: [\"damageEnd\", \"useSkill\", \"logSkillBegin\", \"useCard\", \"respond\"],\r\n\t\t\t},\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tgame.broadcastAll(() => {\r\n\t\t\t\t\tlib.translate[\"visible_toulangmrfz\"] = \"明置\";\r\n\t\t\t\t});\r\n\t\t\t\tplayer.storage[skill] = {\r\n\t\t\t\t\tdamage: false,\r\n\t\t\t\t\tuseSkill: false,\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tforced: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (event.name == \"damage\") {\r\n\t\t\t\t\treturn !player.storage.toulangmrfz[event.name] && event.player && event.player.isIn() && event.player.countCards(\"h\", card => !get.is.shownCard(card)) > 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif ([\"global\", \"equip\"].includes(event.type)) return false;\r\n\t\t\t\t\tlet skill = get.sourceSkillFor(event);\r\n\t\t\t\t\tif (!skill || skill === \"toulangmrfz\") return false;\r\n\t\t\t\t\tlet info = get.info(skill);\r\n\t\t\t\t\twhile (true) {\r\n\t\t\t\t\t\tif (!info || info.charlotte || info.equipSkill) return false;\r\n\t\t\t\t\t\tif (info && !info.sourceSkill) break;\r\n\t\t\t\t\t\tskill = info.sourceSkill;\r\n\t\t\t\t\t\tinfo = get.info(skill);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn !player.storage.toulangmrfz[\"useSkill\"] && event.player && event.player.isIn() && event.player.countCards(\"h\", card => !get.is.shownCard(card)) > 0;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet target = trigger.player;\r\n\t\t\t\tplayer.storage.toulangmrfz[trigger.name === \"damage\" ? trigger.name : \"useSkill\"] = true;\r\n\t\t\t\tconst {cards} = await target\r\n\t\t\t\t\t.chooseCard(true, \"h\", card => !get.is.shownCard(card), [1, 2])\r\n\t\t\t\t\t.set(\"prompt\", `【头狼】:请明置1-2张手牌`)\r\n\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\treturn -get.value(card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\ttarget.addShownCards(cards, \"visible_toulangmrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: \"toulangmrfz_clear\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\tplayer.storage[\"toulangmrfz\"] = {\r\n\t\t\t\t\t\t\tdamage: false,\r\n\t\t\t\t\t\t\tuseSkill: false,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t/** @type { Skill } */\r\n\t\tkuanglangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"chooseToUse\",\r\n\t\t\thiddenCard(player, name) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tget\r\n\t\t\t\t\t\t.inpileVCardList(info => {\r\n\t\t\t\t\t\t\tconst name = info[2];\r\n\t\t\t\t\t\t\treturn get.type(name) === \"basic\" || (get.type(name) === \"trick\" && get.isSingle(name));\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.map(i => i[2])\r\n\t\t\t\t\t\t.includes(name) &&\r\n\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\treturn current.countCards(\"ej\") > 0 || current.countCards(\"h\", card => get.is.shownCard(card)) > 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tonChooseToUse(event) {\r\n\t\t\t\tlet player = get.player();\r\n\t\t\t\tevent.kuanglangmrfz_list = get\r\n\t\t\t\t\t.inpileVCardList(info => {\r\n\t\t\t\t\t\tconst name = info[2];\r\n\t\t\t\t\t\treturn get.type(name) === \"basic\" || (get.type(name) === \"trick\" && get.isSingle(name));\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.filter(card => event.filterCard({ name: card[2], nature: card[3] }, player, event));\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\treturn current.countCards(\"ej\") > 0 || current.countCards(\"h\", card => get.is.shownCard(card)) > 0;\r\n\t\t\t\t\t}) && event.kuanglangmrfz_list.length > 0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\treturn target.countCards(\"ej\") > 0 || target.countCards(\"h\", card => get.is.shownCard(card)) > 0;\r\n\t\t\t},\r\n\t\t\tprompt(event, player) {\r\n\t\t\t\treturn `你可以将场上或明置的牌当作一张基本牌或单一目标的普通锦囊`;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst target = event.targets[0];\r\n\t\t\t\tif (!target.countGainableCards(player, \"hej\", card => get.is.shownCard(card) || get.position(card) === \"e\" || get.position(card) === \"j\")) return;\r\n\t\t\t\tconst {links:links2} = await player\r\n\t\t\t\t\t.choosePlayerCard(\"hej\", target, true)\r\n\t\t\t\t\t.set(\"filterButton\", button => {\r\n\t\t\t\t\t\treturn get.position(button.link) === \"e\" || get.position(button.link) === \"j\" || get.is.shownCard(button.link);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"target\", target)\r\n\t\t\t\t\t.set(\"complexSelect\", false)\r\n\t\t\t\t\t.set(\"ai\", lib.card.shunshou.ai.button)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tconst list = event.getParent(2).kuanglangmrfz_list;\r\n\t\t\t\tconst {links} = await player\r\n\t\t\t\t\t.chooseButton([\"狂狼\", [list, \"vcard\"]], true)\r\n\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\treturn get.event().player.getUseValue({\r\n\t\t\t\t\t\t\tname: button.link[2],\r\n\t\t\t\t\t\t\tnature: button.link[3],\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\tconst evt = event.getParent(2);\r\n\t\t\t\tlet name = links[0][2],\r\n\t\t\t\t\tnature = links[0][3];\r\n\t\t\t\tgame.broadcastAll(\r\n\t\t\t\t\tfunction (result, name, nature) {\r\n\t\t\t\t\t\tlib.skill.kuanglangmrfz_backup.viewAs = {\r\n\t\t\t\t\t\t\tname: name,\r\n\t\t\t\t\t\t\tnature: nature,\r\n\t\t\t\t\t\t\tcards: result,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tlib.skill.kuanglangmrfz_backup.prompt = \"选择\" + get.translation(name) + \"（\" + get.translation(result) + \"）的目标\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlinks2,\r\n\t\t\t\t\tname,\r\n\t\t\t\t\tnature\r\n\t\t\t\t);\r\n\t\t\t\tevt.set(\"_backupevent\", \"kuanglangmrfz_backup\");\r\n\t\t\t\tevt.backup(\"kuanglangmrfz_backup\");\r\n\t\t\t\tevt.set(\"openskilldialog\", \"选择\" + get.translation(name) + \"（\" + get.translation(links2) + \"）的目标\");\r\n\t\t\t\tevt.set(\"norestore\", true);\r\n\t\t\t\tevt.set(\"custom\", {\r\n\t\t\t\t\tadd: {},\r\n\t\t\t\t\treplace: { window() {} },\r\n\t\t\t\t});\r\n\t\t\t\tevt.goto(0);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 2,\r\n\t\t\t\torder: 6,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer(player, target) {\r\n\t\t\t\t\t\tlet val = 1,\r\n\t\t\t\t\t\t\tatt = get.attitude(player, target);\r\n\t\t\t\t\t\tif (player.countCards(\"j\") > 0 && target === player) return 114514;\r\n\t\t\t\t\t\tif (att > 0 && target.countCards(\"j\") > 0) val += 5;\r\n\t\t\t\t\t\tif (att <= 0 && target.countCards(\"j\") > 0 && target.countCards(\"e\") < 1 && target.countCards(\"h\", card => get.is.shownCard(card)) < 1) val -= 5;\r\n\t\t\t\t\t\tif (att > 0) val -= 0.5;\r\n\t\t\t\t\t\tif (att <= 0) val += 1;\r\n\t\t\t\t\t\tif (target === player) val -= 0.9;\r\n\t\t\t\t\t\treturn val;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tkuanglangmrfz_backup: {\r\n\t\t\tsourceSkill: \"kuanglangmrfz\",\r\n\t\t\tprecontent() {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tdelete event.result.skill;\r\n\t\t\t\tvar cards = event.result.card.cards;\r\n\t\t\t\tevent.result.cards = cards;\r\n\t\t\t\tvar owner = get.owner(cards[0]);\r\n\t\t\t\tevent.target = owner;\r\n\t\t\t\towner.$give(cards[0], player, false);\r\n\t\t\t\tplayer.popup(event.result.card.name, \"metal\");\r\n\t\t\t\tgame.delayx();\r\n\t\t\t},\r\n\t\t\tfilterCard() {\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tprompt: \"114514\",\r\n\t\t\tselectCard: -1,\r\n\t\t},\r\n\r\n\t\t// 忍冬\r\n\t\t/** @type { Skill } */\r\n\t\tyinhumrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tignoredHandcard: function (card, player) {\r\n\t\t\t\t\tif (card.hasGaintag(\"yinhumrfz\") && get.name(card) === \"sha\") {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcardDiscardable: function (card, player, name) {\r\n\t\t\t\t\tif (name == \"phaseDiscard\" && card.hasGaintag(\"yinhumrfz\") && get.name(card) === \"sha\") return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\tforced: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"连续#个回合没有造成伤害\",\r\n\t\t\t},\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"phaseZhunbeiBegin\", \"phaseEnd\"],\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.name === \"phase\" ? true : player.countMark(\"yinhumrfz\") + 1 > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (trigger.name === \"phase\") {\r\n\t\t\t\t\tif (player.getHistory(\"sourceDamage\").length < 1) player.addMark(\"yinhumrfz\", 1, false);\r\n\t\t\t\t\telse player.removeMark(\"yinhumrfz\", player.countMark(\"yinhumrfz\"), false);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"yinhumrfz\");\r\n\t\t\t\t\tlet num = player.countMark(\"yinhumrfz\") + 1;\r\n\t\t\t\t\tswitch (num) {\r\n\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t\tplayer.addTempSkill(\"yinhumrfz_addcount\", { player: \"phaseZhunbeiBegin\" });\r\n\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\tplayer.addTempSkill(\"reweimu\", { player: \"phaseZhunbeiBegin\" });\r\n\t\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\t\tconst { result } = await player.draw(num);\r\n\t\t\t\t\t\t\tfor (let card of result) {\r\n\t\t\t\t\t\t\t\tif (get.name(card) === \"sha\") card.addGaintag(\"yinhumrfz\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\taddcount: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhuixiongmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 2,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tlet count = Object.keys(player.getStat(\"skill\")).includes(\"zhuixiongmrfz\") ? player.getStat(\"skill\").zhuixiongmrfz : 0;\r\n\t\t\t\tif (count > 0 && !player.hasSkill(\"yinhumrfz_addcount\")) return false;\r\n\t\t\t\treturn game.hasPlayer(current => player.canUse(\"juedou\", current) && player.inRange(current));\r\n\t\t\t},\r\n\t\t\tfilterTarget(card, target, player) {\r\n\t\t\t\treturn target != player && player.canUse(\"juedou\", target) && player.inRange(target);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.useCard({ name: \"juedou\", zhuixiongmrfz: true }, true, event.targets[0]);\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhuixiongmrfz_nowuxie\", \"zhuixiongmrfz_damage\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tnowuxie: {\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCard\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfilter: function (event) {\r\n\t\t\t\t\t\treturn event.card && event.card.zhuixiongmrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.nowuxie = true;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"damageBegin3\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tlet evt = event.getParent();\r\n\t\t\t\t\t\treturn event.card && event.card.zhuixiongmrfz && evt && [...evt.targetCards, ...evt.playerCards].length > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet evt = trigger.getParent();\r\n\t\t\t\t\t\tlet num = [...evt.targetCards, ...evt.playerCards].length;\r\n\t\t\t\t\t\ttrigger.num += num;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 6,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget(player, target) {\r\n\t\t\t\t\t\tif (get.attitude2(target) > 0) return 0;\r\n\t\t\t\t\t\treturn target.countCards(\"h\", \"sha\") > player.countCards(\"h\", \"sha\") ? 0 : -1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 弑君者\r\n\t\tfengyanmrfz: {\r\n\t\t\tonremove(player) {\r\n\t\t\t\tfor (let i of game.players) {\r\n\t\t\t\t\ti.removeSkill(\"xingxingmrfz\");\r\n\t\t\t\t}\r\n\t\t\t\tgame.broadcastAll(function () {\r\n\t\t\t\t\t// whitherHelm.setBgI();\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tderivation: [\"xingxingmrfz\"],\r\n\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"he\", card => get.type(card) != \"basic\") > 0;\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tevent.result = await player\r\n\t\t\t\t\t.chooseCardTarget({\r\n\t\t\t\t\t\tprompt: \"是否发动【烽烟】？\",\r\n\t\t\t\t\t\tprompt2: \"你可以弃置一张非基本牌并选择至多三名角色，令其获得【行刑】\",\r\n\t\t\t\t\t\tfilterCard(card) {\r\n\t\t\t\t\t\t\treturn get.type(card) != \"basic\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfilterTarget: true,\r\n\t\t\t\t\t\tselectTarget: [1, 3],\r\n\t\t\t\t\t\tposition: \"he\",\r\n\t\t\t\t\t\tai1(card) {\r\n\t\t\t\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tai2(target) {\r\n\t\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\t\treturn get.attitude(player, target) > 0;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tevent.result.cost_data = {\r\n\t\t\t\t\tcards: event.result.cards,\r\n\t\t\t\t\ttargets: event.result.targets,\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { cards, targets } = event.cost_data;\r\n\t\t\t\tawait player.discard(cards);\r\n\t\t\t\tfor (let target of targets) {\r\n\t\t\t\t\ttarget.addSkill(\"xingxingmrfz\");\r\n\t\t\t\t}\r\n\t\t\t\tplayer.addTempSkill(\"fengyanmrfz_expire\", { player: \"phaseUseBegin\" });\r\n\t\t\t\tgame.broadcastAll(function () {\r\n\t\t\t\t\tui.background.setBackgroundImage(\"extension/WhichWay/image/skill/fengyanmrfz.jpg\");\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\texpire: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tonremove(player) {\r\n\t\t\t\t\t\tfor (let i of game.players) {\r\n\t\t\t\t\t\t\ti.removeSkill(\"xingxingmrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgame.broadcastAll(function () {\r\n\t\t\t\t\t\t\t// whitherHelm.setBgI();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txingxingmrfz: {\r\n\t\t\tglobal: \"xingxingmrfz_effect\",\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.player && event.player.isIn() && !event.player.hasSkill(\"xingxingmrfz\");\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseToUse(\r\n\t\t\t\t\t\tfunction (card, player, event) {\r\n\t\t\t\t\t\t\tif (get.name(card) != \"sha\") return false;\r\n\t\t\t\t\t\t\treturn lib.filter.filterCard.apply(this, arguments);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\"【行刑】:是否对\" + get.translation(trigger.player) + \"使用一张杀？\"\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"logSkill\", \"xingxingmrfz\")\r\n\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\tif (target != _status.event.sourcex && !ui.selected.targets.includes(_status.event.sourcex)) return false;\r\n\t\t\t\t\t\treturn lib.filter.targetEnabled.apply(this, arguments);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"sourcex\", trigger.player);\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teffect: {\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"damageBegin3\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn !event.source || !event.source.hasSkill(\"xingxingmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.logSkill(\"xingxingmrfz\");\r\n\t\t\t\t\t\tconst {color} = await player\r\n\t\t\t\t\t\t\t.judge(function (card) {\r\n\t\t\t\t\t\t\t\tvar color = get.color(card);\r\n\t\t\t\t\t\t\t\tif (color == \"black\") return -4;\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (color !== \"black\") trigger.cancel();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tweimingmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\ttargetEnabled(card, player, target) {\r\n\t\t\t\t\tif (!player.getEquip(1) && get.tag(card, \"damage\") && get.type(card) === \"trick\") return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tevent.card &&\r\n\t\t\t\t\t(get.type(event.card) == \"trick\" || (get.type(event.card) == \"basic\" && ![\"shan\", \"tao\", \"jiu\", \"du\"].includes(event.card.name))) &&\r\n\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && !current.getEquip(2);\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tcontent() {\r\n\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && !current.getEquip(2);\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tgroup: [\"weimingmrfz_get\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tget: {\r\n\t\t\t\t\taudio: \"weimingmrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn event.player && event.player.isIn() && event.player.countCards(\"he\") > 0 && !event.player.getEquip(3) && !event.player.getEquip(4);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst {cards} = await trigger.player\r\n\t\t\t\t\t\t\t.chooseCard(\"he\", true)\r\n\t\t\t\t\t\t\t.set(\"prompt\", `请交给${get.translation(player)}一张牌`)\r\n\t\t\t\t\t\t\t.set(\"ai\", card => -get.value(card))\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (!cards) return;\r\n\t\t\t\t\t\tplayer.gain(cards);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 新风笛\r\n\t\tnewjuntongmrfz: {\r\n\t\t\taudio: \"juntongmrfz\",\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"phaseDrawBegin\", \"useCard\"],\r\n\t\t\t\tglobal: \"roundStart\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (event.name === \"useCard\") {\r\n\t\t\t\t\tconst cards = player.storage.newjuntongmrfz;\r\n\t\t\t\t\treturn !cards.includes(get.name(event.card)) && (get.type(event.card) === \"basic\" || (get.isSingle(event.card) && get.type(event.card) === \"trick\"));\r\n\t\t\t\t} else return true;\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (trigger.name === \"useCard\") {\r\n\t\t\t\t\tplayer.storage.newjuntongmrfz.push(get.name(trigger.card));\r\n\t\t\t\t} else if (trigger.name === \"phaseDraw\") trigger.cancel();\r\n\t\t\t\telse player.draw(3);\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\ttargetInRange: function (card, player, target, now) {\r\n\t\t\t\t\tif (!player.storage.newjuntongmrfz.includes(get.name(card)) && (get.type(card) === \"basic\" || (get.isSingle(card) && get.type(card) === \"trick\"))) return true;\r\n\t\t\t\t},\r\n\t\t\t\tselectTarget: function (card, player, range) {\r\n\t\t\t\t\tif (!player.storage.newjuntongmrfz.includes(get.name(card)) && range[1] != -1 && (get.type(card) === \"basic\" || (get.isSingle(card) && get.type(card) === \"trick\"))) range[1]++;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tnewpochengmrfz: {\r\n\t\t\taudio: \"pochengmrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCard2\",\r\n\t\t\t\tsource: \"dieAfter\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (event.name === \"useCard\") return get.name(event.card) === \"sha\";\r\n\t\t\t\telse return true;\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tevent.result = {};\r\n\t\t\t\tif (trigger.name === \"useCard\") {\r\n\t\t\t\t\tlet list = [\"额外目标\", \"额外结算\", \"cancel2\"];\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t!game.hasPlayer(current => {\r\n\t\t\t\t\t\t\treturn player.canUse(trigger.card, current) && !trigger.targets.includes(current);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t)\r\n\t\t\t\t\t\tlist.remove(\"额外目标\");\r\n\t\t\t\t\tlet prompt = \"【破城】:你可以令此杀额外结算一次或额外指定一个目标\";\r\n\t\t\t\t\tif (!list.includes(\"额外目标\")) prompt.replace(\"或额外指定一个目标\", \"\");\r\n\t\t\t\t\tconst {control} = await player\r\n\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t.set(\"prompt\", prompt)\r\n\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\tlet list = get.event().list,\r\n\t\t\t\t\t\t\t\tcard = get.event().card,\r\n\t\t\t\t\t\t\t\ttargets = get.event().targets,\r\n\t\t\t\t\t\t\t\tplayer = get.player();\r\n\t\t\t\t\t\t\tif (!list.includes(\"额外目标\") || !game.hasPlayer(current => get.attitude2(current) < 0 && !targets.includes(current) && player.canUse(card, current))) return \"额外结算\";\r\n\t\t\t\t\t\t\tif (targets.some(i => i.hp < 2)) return \"额外结算\";\r\n\t\t\t\t\t\t\treturn Math.random() > 0.5 ? \"额外结算\" : \"额外目标\";\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"list\", list)\r\n\t\t\t\t\t\t.set(\"targets\", trigger.targets)\r\n\t\t\t\t\t\t.set(\"card\", trigger.card)\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (control === \"cancel2\") return (event.result.bool = false);\r\n\t\t\t\t\telse if (control === \"额外结算\")\r\n\t\t\t\t\t\tevent.result = {\r\n\t\t\t\t\t\t\tbool: true,\r\n\t\t\t\t\t\t\tcost_data: control,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tconst {targets} = await player\r\n\t\t\t\t\t\t\t.chooseTarget(true)\r\n\t\t\t\t\t\t\t.set(\"prompt\", `请额外选择一个目标`)\r\n\t\t\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\r\n\t\t\t\t\t\t\t\tlet targets = get.event().targets,\r\n\t\t\t\t\t\t\t\t\tcardx = get.event().cardx;\r\n\t\t\t\t\t\t\t\treturn player != target && player.canUse(cardx, target) && !targets.includes(target);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"ai\", target => get.attitude2(target) < 0)\r\n\t\t\t\t\t\t\t.set(\"targets\", trigger.targets)\r\n\t\t\t\t\t\t\t.set(\"cardx\", trigger.card)\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tevent.result = {\r\n\t\t\t\t\t\t\tbool: true,\r\n\t\t\t\t\t\t\tcost_data: targets,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst {control} = await player\r\n\t\t\t\t\t\t.chooseControl(\"cancel2\")\r\n\t\t\t\t\t\t.set(\"prompt\", `请选择一个选项`)\r\n\t\t\t\t\t\t.set(\"choiceList\", [\"发动一次【军统①】\", \"重置【军统②】\"])\r\n\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\t\treturn player.storage.newjuntongmrfz.length > 4 ? \"选项二\" : \"选项一\";\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tevent.result = {\r\n\t\t\t\t\t\tbool: true,\r\n\t\t\t\t\t\tcost_data: control,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (trigger.name === \"useCard\") {\r\n\t\t\t\t\tconsole.log(event.cost_data);\r\n\t\t\t\t\tif (event.cost_data === \"额外结算\") trigger.effectCount++;\r\n\t\t\t\t\telse trigger.targets.push(event.cost_data[0]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet control = event.cost_data;\r\n\t\t\t\t\tif (control === \"选项一\") {\r\n\t\t\t\t\t\tlet next = game.createEvent(\"roundStart\", false, { next: [] });\r\n\t\t\t\t\t\tawait game.createTrigger(\"roundStart\", \"newjuntongmrfz\", player, next);\r\n\t\t\t\t\t} else player.storage.newjuntongmrfz = [];\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 引星棘刺\r\n\t\txinxiangmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\treturn (num = lib.skill.xinxiangmrfz.getLim(player));\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tmark: true,\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.addMark(skill, 5, null);\r\n\t\t\t},\r\n\t\t\tonremove(player, skill) {\r\n\t\t\t\tdelete player.storage.xinxiangmrfz;\r\n\t\t\t\tdelete player.storage.xinxiangmrfz_tmp;\r\n\t\t\t},\r\n\t\t\tgetLim(player) {\r\n\t\t\t\treturn player.countMark(\"xinxiangmrfz\") + player.countMark(\"xinxiangmrfz_tmp\");\r\n\t\t\t},\r\n\t\t\tintro: {\r\n\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\treturn `当前手牌区上限:${lib.skill.xinxiangmrfz.getLim(player)}<br>临时上限:${player.countMark(\"xinxiangmrfz_tmp\")}`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseEnd\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") < lib.skill.xinxiangmrfz.getLim(player);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.drawTo(lib.skill.xinxiangmrfz.getLim(player));\r\n\t\t\t},\r\n\t\t\tgroup: [\"xinxiangmrfz_lim\", \"xinxiangmrfz_start\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\ttmp: {\r\n\t\t\t\t\tonremove(player, skill) {\r\n\t\t\t\t\t\tdelete player.storage.xinxiangmrfz_tmp;\r\n\t\t\t\t\t\tif (player.countCards(\"h\") > player.countMark(\"xinxiangmrfz\")) {\r\n\t\t\t\t\t\t\tplayer.chooseToDiscard(true, \"【心相】：请弃置超出上限的手牌\").set(\"selectCard\", () => {\r\n\t\t\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\t\t\treturn player.countCards(\"h\") - player.countMark(\"xinxiangmrfz\");\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\tstart: {\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"gameDrawBegin\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn lib.skill.xinxiangmrfz.getLim(player) < event.num;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar me = player;\r\n\t\t\t\t\t\tvar numx = trigger.num;\r\n\t\t\t\t\t\ttrigger.num =\r\n\t\t\t\t\t\t\ttypeof numx == \"function\"\r\n\t\t\t\t\t\t\t\t? function (player) {\r\n\t\t\t\t\t\t\t\t\t\tif (player == me) {\r\n\t\t\t\t\t\t\t\t\t\t\treturn lib.skill.xinxiangmrfz.getLim(player);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\treturn numx(player);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t: function (player) {\r\n\t\t\t\t\t\t\t\t\t\tif (player == me) {\r\n\t\t\t\t\t\t\t\t\t\t\treturn lib.skill.xinxiangmrfz.getLim(player);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\treturn numx;\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tlim: {\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"drawBegin\", \"gainBegin\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tconst cards = event.name === \"draw\" ? event.result : event.cards;\r\n\t\t\t\t\t\tconst nums = lib.skill.xinxiangmrfz.getLim(player);\r\n\t\t\t\t\t\treturn player.countCards(\"h\") + cards.length > nums;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst cards = trigger.name === \"draw\" ? trigger.result : trigger.cards;\r\n\t\t\t\t\t\tconst nums = lib.skill.xinxiangmrfz.getLim(player);\r\n\t\t\t\t\t\tif (player.countCards(\"h\") >= nums) {\r\n\t\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconst {links:gaincards} = await player\r\n\t\t\t\t\t\t\t\t.chooseButton([\"心相:请选择你要获得的牌\", cards], true)\r\n\t\t\t\t\t\t\t\t.set(\"ai\", button => get.value(button.link))\r\n\t\t\t\t\t\t\t\t.set(\"selectButton\", () => {\r\n\t\t\t\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\t\t\t\treturn lib.skill.xinxiangmrfz.getLim(player) - player.countCards(\"h\");\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t\t\tif (!gaincards) return;\r\n\t\t\t\t\t\t\tplayer.gain(gaincards, event.name === \"draw\" ? \"draw2\" : \"gain2\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tnogain: true,\r\n\t\t\t\tskillTagFilter: function (player) {\r\n\t\t\t\t\tconsole.log(arguments);\r\n\t\t\t\t\treturn player.countCards(\"h\") >= lib.skill.xinxiangmrfz.getLim(player);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thaijiangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseJieshuBegin\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0 && game.hasPlayer(current => player.canCompare(current) && current != player && player.inRange(current));\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn get.attitude2(current) < 0 && player.canCompare(current) && current != player && player.inRange(current);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst {targets} = await player\r\n\t\t\t\t\t.chooseTarget(true, [1, Infinity])\r\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\r\n\t\t\t\t\t\treturn player.canCompare(target) && player != target && player.inRange(target);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", target => get.attitude2(target) < 0)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (targets.length) {\r\n\t\t\t\t\tplayer.chooseToCompare(targets).callback = function () {\r\n\t\t\t\t\t\tif (event.winner != player) {\r\n\t\t\t\t\t\t\tplayer.chooseToDiscard(true);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tevent.target.damage();\r\n\t\t\t\t\t\t\tplayer.addMark(\"xinxiangmrfz_tmp\", 1, false);\r\n\t\t\t\t\t\t\tplayer.addTempSkill(\"xinxiangmrfz_tmp\", { player: \"phaseJieshuBegin\" });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tfanyangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"你计算与其他角色的距离-#<br>其他角色计算与你的距离+#\",\r\n\t\t\t},\r\n\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0 && event.num > 0;\r\n\t\t\t},\r\n\t\t\tgetIndex(event, player, triggername) {\r\n\t\t\t\treturn event.num;\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tconst {bool} = await player\r\n\t\t\t\t\t.chooseToDiscard(\"he\")\r\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"fanyangmrfz\"))\r\n\t\t\t\t\t.set(\"prompt2\", `你可以弃置一张手牌，然后直到你的回合结束时，[你/其他角色]计算与[其他角色/你]的距离[-1/+1]`)\r\n\t\t\t\t\t.set(\"ai\", card => get.value(card) < 8)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tevent.result = {\r\n\t\t\t\t\tbool: bool,\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.addMark(\"fanyangmrfz\", 1, false);\r\n\t\t\t\tplayer.addTempSkill(\"fanyangmrfz_eff\", { player: \"phaseEnd\" });\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tonremove(player) {\r\n\t\t\t\t\t\tdelete player.storage.fanyangmrfz;\r\n\t\t\t\t\t\tplayer.unmarkSkill(\"fanyangmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tglobalFrom(from, to, distance) {\r\n\t\t\t\t\t\t\treturn distance - from.countMark(\"fanyangmrfz\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tglobalTo(from, to, distance) {\r\n\t\t\t\t\t\t\treturn distance + to.countMark(\"fanyangmrfz\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 余\r\n\t\tzhonglemrfz: {\r\n\t\t\tinit(player) {\r\n\t\t\t\tgame.broadcastAll(() => {\r\n\t\t\t\t\tlib.translate[\"zhonglemrfz_tag\"] = \"判定区\";\r\n\t\t\t\t\tlib.card.wugu.content = function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tfor (var i = 0; i < ui.dialogs.length; i++) {\r\n\t\t\t\t\t\t\tif (ui.dialogs[i].videoId == event.preResult) {\r\n\t\t\t\t\t\t\t\tevent.dialog = ui.dialogs[i];\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!event.dialog || event.dialog.buttons.length == 0) {\r\n\t\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (event.dialog.buttons.length > 1) {\r\n\t\t\t\t\t\t\tlet num = 1;\r\n\t\t\t\t\t\t\tif (card.storage && typeof card.storage.extraChooseNum === \"number\") {\r\n\t\t\t\t\t\t\t\tnum += card.storage.extraChooseNum;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar next = target.chooseButton(true);\r\n\t\t\t\t\t\t\tnext.set(\"ai\", button => {\r\n\t\t\t\t\t\t\t\tlet player = _status.event.player,\r\n\t\t\t\t\t\t\t\t\tcard = button.link,\r\n\t\t\t\t\t\t\t\t\tval = get.value(card, player);\r\n\t\t\t\t\t\t\t\tif (get.tag(card, \"recover\")) {\r\n\t\t\t\t\t\t\t\t\tval += game.countPlayer(target => {\r\n\t\t\t\t\t\t\t\t\t\treturn target.hp < 2 && get.attitude(player, target) > 0 && lib.filter.cardSavable(card, player, target);\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tif (player.hp <= 2 && game.checkMod(card, player, \"unchanged\", \"cardEnabled2\", player)) val *= 2;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn val;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tnext.set(\"selectButton\", num);\r\n\t\t\t\t\t\t\tnext.set(\"dialog\", event.preResult);\r\n\t\t\t\t\t\t\tnext.set(\"closeDialog\", false);\r\n\t\t\t\t\t\t\tnext.set(\"dialogdisplay\", true);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tevent.directButton = event.dialog.buttons;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tvar dialog = event.dialog;\r\n\t\t\t\t\t\tvar cards = [];\r\n\t\t\t\t\t\tif (event.directButton) {\r\n\t\t\t\t\t\t\tcards = event.directButton.map(i => i.link);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfor (var i of dialog.buttons) {\r\n\t\t\t\t\t\t\t\tif (result.links.includes(i.link)) {\r\n\t\t\t\t\t\t\t\t\tcards.push(i.link);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (!cards) cards = event.dialog.buttons.map(i => i.link);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar button,\r\n\t\t\t\t\t\t\tbuttons = [];\r\n\t\t\t\t\t\tfor (var i = 0; i < dialog.buttons.length; i++) {\r\n\t\t\t\t\t\t\tif (cards.includes(dialog.buttons[i].link)) {\r\n\t\t\t\t\t\t\t\tbutton = dialog.buttons[i];\r\n\t\t\t\t\t\t\t\tbutton.querySelector(\".info\").innerHTML = (function (target) {\r\n\t\t\t\t\t\t\t\t\tif (target._tempTranslate) return target._tempTranslate;\r\n\t\t\t\t\t\t\t\t\tvar name = target.name;\r\n\t\t\t\t\t\t\t\t\tif (lib.translate[name + \"_ab\"]) return lib.translate[name + \"_ab\"];\r\n\t\t\t\t\t\t\t\t\treturn get.translation(name);\r\n\t\t\t\t\t\t\t\t})(target);\r\n\t\t\t\t\t\t\t\tbuttons.push(button);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdialog.buttons.remove(...buttons);\r\n\t\t\t\t\t\tvar capt = get.translation(target) + \"选择了\" + get.translation(buttons.map(i => i.link));\r\n\t\t\t\t\t\tif (cards) {\r\n\t\t\t\t\t\t\ttarget.gain(cards, \"visible\");\r\n\t\t\t\t\t\t\ttarget.$gain2(cards);\r\n\t\t\t\t\t\t\tgame.broadcast(\r\n\t\t\t\t\t\t\t\tfunction (cards, id, name, capt) {\r\n\t\t\t\t\t\t\t\t\tvar dialog = get.idDialog(id);\r\n\t\t\t\t\t\t\t\t\tif (dialog) {\r\n\t\t\t\t\t\t\t\t\t\tdialog.content.firstChild.innerHTML = capt;\r\n\t\t\t\t\t\t\t\t\t\tfor (var i = 0; i < dialog.buttons.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (cards.includes(dialog.buttons[i].link)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tdialog.buttons[i].querySelector(\".info\").innerHTML = name;\r\n\t\t\t\t\t\t\t\t\t\t\t\tdialog.buttons.splice(i--, 1);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcards,\r\n\t\t\t\t\t\t\t\tdialog.videoId,\r\n\t\t\t\t\t\t\t\t(function (target) {\r\n\t\t\t\t\t\t\t\t\tif (target._tempTranslate) return target._tempTranslate;\r\n\t\t\t\t\t\t\t\t\tvar name = target.name;\r\n\t\t\t\t\t\t\t\t\tif (lib.translate[name + \"_ab\"]) return lib.translate[name + \"_ab\"];\r\n\t\t\t\t\t\t\t\t\treturn get.translation(name);\r\n\t\t\t\t\t\t\t\t})(target),\r\n\t\t\t\t\t\t\t\tcapt\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdialog.content.firstChild.innerHTML = capt;\r\n\t\t\t\t\t\tgame.addVideo(\"dialogCapt\", null, [dialog.videoId, dialog.content.firstChild.innerHTML]);\r\n\t\t\t\t\t\tgame.log(\r\n\t\t\t\t\t\t\ttarget,\r\n\t\t\t\t\t\t\t\"选择了\",\r\n\t\t\t\t\t\t\tbuttons.map(i => i.link)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tgame.delay();\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseZhunbeiBegin\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"j\") > 0 && player.hasUseTarget({ name: \"wugu\" });\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tif (player.isUnderControl(true) && !_status.auto) {\r\n\t\t\t\t\tvar cards = player.getCards(\"j\");\r\n\t\t\t\t\tvar cardsx = cards.map(card => {\r\n\t\t\t\t\t\tvar cardx = ui.create.card();\r\n\t\t\t\t\t\tcardx.init(get.cardInfo(card));\r\n\t\t\t\t\t\tcardx._cardid = card.cardid;\r\n\t\t\t\t\t\treturn cardx;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tawait player.directgains(cardsx, null, \"zhonglemrfz_tag\");\r\n\t\t\t\t\tconst { result } = await player.chooseCardTarget({\r\n\t\t\t\t\t\tprompt: \"是否要发动【众乐】？\",\r\n\t\t\t\t\t\tprompt2: \"你可以将你判定区内任意牌当作至多指定相同目标数的【五谷丰登】使用\",\r\n\t\t\t\t\t\tfilterCard(card) {\r\n\t\t\t\t\t\t\treturn card.hasGaintag(\"zhonglemrfz_tag\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tselectCard: [1, Infinity],\r\n\t\t\t\t\t\tselectTarget: [1, Infinity],\r\n\t\t\t\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\t\t\t\treturn player.canUse(\"wugu\", target);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfilterOk() {\r\n\t\t\t\t\t\t\treturn ui.selected.targets.length === ui.selected.cards.length;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tposition: \"s\",\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvar cards2 = player.getCards(\"s\", card => card.hasGaintag(\"zhonglemrfz_tag\"));\r\n\t\t\t\t\tif (player.isOnline2()) {\r\n\t\t\t\t\t\tplayer.send(\r\n\t\t\t\t\t\t\tfunction (cards, player) {\r\n\t\t\t\t\t\t\t\tcards.forEach(i => i.delete());\r\n\t\t\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tcards2,\r\n\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcards2.forEach(i => i.delete());\r\n\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\tevent.result = result;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet cards = player.getCards(\"j\");\r\n\t\t\t\t\tlet targets = game.filterPlayer(target => get.attitude(player, target) > 0);\r\n\t\t\t\t\tcards.sort((a, b) => {\r\n\t\t\t\t\t\treturn player.getUseValue(a) - player.getUseValue(b);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (targets.length > cards.length) {\r\n\t\t\t\t\t\ttargets = targets.splice(0, cards.length);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet result = {\r\n\t\t\t\t\t\ttargets: targets,\r\n\t\t\t\t\t\tcards: cards.slice(0, targets.length),\r\n\t\t\t\t\t\tbool: true,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tevent.result = result;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet { targets, cards } = event;\r\n\t\t\t\tif (player.isUnderControl(true) && !_status.auto)\r\n\t\t\t\t\tcards = cards.map(card => {\r\n\t\t\t\t\t\tlet j = player.getCards(\"j\");\r\n\t\t\t\t\t\treturn j.find(i => i.cardid === card._cardid);\r\n\t\t\t\t\t});\r\n\t\t\t\tconsole.log(cards);\r\n\t\t\t\tawait player.useCard(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"wugu\",\r\n\t\t\t\t\t\tstorage: {\r\n\t\t\t\t\t\t\textraCardsNum: targets.length,\r\n\t\t\t\t\t\t\textraChooseNum: 1,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttargets,\r\n\t\t\t\t\tcards,\r\n\t\t\t\t\tfalse\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\tqizaomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardAfter\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn !player\r\n\t\t\t\t\t.getCards(\"j\")\r\n\t\t\t\t\t.map(i => get.suit(i))\r\n\t\t\t\t\t.includes(get.suit(event.card));\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tawait player.draw();\r\n\t\t\t\tconst {cards} = await player\r\n\t\t\t\t\t.chooseCard(true, \"【起灶】:请蓄谋一次\")\r\n\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\tconst player = get.player();\r\n\t\t\t\t\t\tif (player.hasValueTarget(card)) return player.getUseValue(card);\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"tipText\", true)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tplayer.addJudge({ name: \"xumou_jsrg\" }, cards);\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 烛煌 顾烛煌\r\n\t\tchongrangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseBegin\",\r\n\t\t\t\tsource: \"damageEnd\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (event.name == \"damage\") {\r\n\t\t\t\t\tif (event.parent.name == \"_lianhuan\" || event.parent.name == \"_lianhuan2\") return false;\r\n\t\t\t\t\treturn event.hasNature(\"fire\");\r\n\t\t\t\t}\r\n\t\t\t\treturn player.hujia > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (trigger.name == \"damage\") {\r\n\t\t\t\t\tplayer.changeHujia(1);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tawait player.recover(Math.min(player.hujia, 2));\r\n\t\t\t\t\tplayer.changeHujia(-player.hujia);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhuoyanmrfz: {\r\n\t\t\tinit(player) {\r\n\t\t\t\tlib.skill[\"_lianhuan4\"].content = function () {\r\n\t\t\t\t\tif (!trigger.getParent().noCharReset) player.link();\r\n\t\t\t\t\tif (trigger.getParent().notLink()) trigger.getParent().lianhuanable = true;\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardToPlayer\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (!event.isFirstTarget) return false;\r\n\t\t\t\treturn event.card && get.tag(event.card, \"fireDamage\") && event.targets.some(target => target.isIn() && !target.isLinked());\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.targets.forEach(target => {\r\n\t\t\t\t\tif (target.isIn() && !target.isLinked()) target.link();\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhuoyanmrfz_nolink\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tnolink: {\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tsource: \"damageBegin\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card && event.player.isIn();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.noCharReset = true;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tliaoyuanmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tselectTarget(card, player, range) {\r\n\t\t\t\t\tif (card.storage && card.storage.liaoyuanmrfz && range[1] != -1) range[1] += Math.max(1, player.getDamagedHp());\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = {};\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tprompt(event) {\r\n\t\t\t\tlet player = get.player();\r\n\t\t\t\treturn `流失一点体力并视为使用目标数+${Math.max(1, player.getDamagedHp())}的【火攻】`;\r\n\t\t\t},\r\n\t\t\tviewAs: {\r\n\t\t\t\tname: \"huogong\",\r\n\t\t\t\tstorage: {\r\n\t\t\t\t\tliaoyuanmrfz: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tselectCard: -1,\r\n\t\t\tfilterCard: () => false,\r\n\t\t\tasync precontent(event, trigger, player) {\r\n\t\t\t\tplayer.loseHp();\r\n\t\t\t},\r\n\t\t\tgroup: [\"liaoyuanmrfz_after\", \"liaoyuanmrfz_recorder\", \"liaoyuanmrfz_fire\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\trecorder: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"showCardsEnd\",\r\n\t\t\t\t\t\tplayer: \"useCardAfter\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tif (event.name === \"useCard\") return event.card && event.card.storage.liaoyuanmrfz;\r\n\t\t\t\t\t\tlet evt = event.getParent();\r\n\t\t\t\t\t\treturn event.cards && evt.name === \"huogong\" && evt.card && evt.card.storage && evt.card.storage.liaoyuanmrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (trigger.name === \"useCard\") {\r\n\t\t\t\t\t\t\tdelete player.storage.liaoyuanmrfz[trigger.card.storage.randomId];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlet cards = trigger.cards;\r\n\t\t\t\t\t\t\tlet evt = trigger.getParent();\r\n\t\t\t\t\t\t\tlet id = evt.card.cardid;\r\n\t\t\t\t\t\t\tif (!Array.isArray(player.storage.liaoyuanmrfz[id])) player.storage.liaoyuanmrfz[id] = [];\r\n\t\t\t\t\t\t\tplayer.storage.liaoyuanmrfz[id].push(...cards);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tfire: {\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"damageBegin\" },\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn event.card && event.card.name === \"wanjian\" && event.card.nature === \"fire\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.nature = \"fire\";\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tafter: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tif (!event.card || !event.card.storage || !event.card.storage.liaoyuanmrfz) return false;\r\n\t\t\t\t\t\tlet damaged = player.getHistory(\"sourceDamage\", evt => evt.card.storage && evt.card.id === event.card.id);\r\n\t\t\t\t\t\tlet showCards = (player.storage.liaoyuanmrfz[event.card.id] || []).filter(card => get.position(card) === \"h\");\r\n\t\t\t\t\t\treturn damaged.length > 0 && showCards.length > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet showCards = player.storage.liaoyuanmrfz[trigger.card.id].filter(card => get.position(card) === \"h\");\r\n\t\t\t\t\t\tawait player.gain(showCards, \"gain2\");\r\n\t\t\t\t\t\tif (player.isUnderControl(true) && !_status.auto) {\r\n\t\t\t\t\t\t\tconst {\r\n\t\t\t\t\t\t\t\tresult: { targets, cards },\r\n\t\t\t\t\t\t\t} = await player.chooseCardTarget({\r\n\t\t\t\t\t\t\t\tshowCards: showCards,\r\n\t\t\t\t\t\t\t\tprompt: \"【燎原】:你可以将其中任意张牌当作指定等量目标的【火·万箭齐发】使用\",\r\n\t\t\t\t\t\t\t\tprompt2: \"请选择目标和牌\",\r\n\t\t\t\t\t\t\t\tfilterCard(card) {\r\n\t\t\t\t\t\t\t\t\treturn get.event().showCards.includes(card);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tselectCard: [1, Infinity],\r\n\t\t\t\t\t\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\t\t\t\t\t\treturn player.canUse(\"wanjian\", target);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tselectTarget: [1, Infinity],\r\n\t\t\t\t\t\t\t\tfilterOk() {\r\n\t\t\t\t\t\t\t\t\treturn ui.selected.targets.length === ui.selected.cards.length;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif (!(targets && cards)) return;\r\n\t\t\t\t\t\t\tplayer.useCard(\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tname: \"wanjian\",\r\n\t\t\t\t\t\t\t\t\tnature: \"fire\",\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\ttargets,\r\n\t\t\t\t\t\t\t\tcards,\r\n\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlet cards = showCards,\r\n\t\t\t\t\t\t\t\ttargets = game.filterPlayer(i => get.attitude(player, i) < 0);\r\n\t\t\t\t\t\t\tcards.forEach(card => {\r\n\t\t\t\t\t\t\t\tif (get.value(card) >= 8) cards.remove(card);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif (targets.length > cards.length) {\r\n\t\t\t\t\t\t\t\ttargets = targets.slice(0, cards.length);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (!(targets && cards)) return;\r\n\t\t\t\t\t\t\tplayer.useCard(\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tname: \"wanjian\",\r\n\t\t\t\t\t\t\t\t\tnature: \"fire\",\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\ttargets,\r\n\t\t\t\t\t\t\t\tcards.slice(0, targets.length),\r\n\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 9.5,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer(player, target) {\r\n\t\t\t\t\t\tif (player.hp < 3 || player.countCards(\"h\") < 1) return -1;\r\n\t\t\t\t\t\tif (player.getUseValue({ name: \"huogong\" }) <= 0) return -1;\r\n\t\t\t\t\t\treturn 1 + player.countCards(\"h\") * 0.1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 新温蒂\r\n\t\tnewdanpaomrfz: {\r\n\t\t\taudio: \"danpaomrfz\",\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0 && game.hasPlayer(current => current != player && current.countCards(\"hej\") > 0);\r\n\t\t\t},\r\n\t\t\tfilterCard: true,\r\n\t\t\tselectCard: [1, Infinity],\r\n\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\tif (ui.selected.targets.length === 0) return target.countCards(\"hje\") > 0 && target !== player;\r\n\t\t\t\treturn get.distance(ui.selected.targets[0], target) <= ui.selected.cards.length;\r\n\t\t\t},\r\n\t\t\ttargetprompt: [\"被移牌\", \"收到牌\"],\r\n\t\t\tselectTarget: 2,\r\n\t\t\tposition: \"he\",\r\n\t\t\tmultitarget: true,\r\n\t\t\tmultiline: true,\r\n\t\t\tcheck(card) {\r\n\t\t\t\tlet player = get.player();\r\n\t\t\t\tif (game.hasPlayer(current => current != player && get.attitude2(current) > 0 && current.countCards(\"j\") > 0) && ui.selected.cards.length > 0) return false;\r\n\t\t\t\tlet getTarget = get.result(\"newdanpaomrfz\").target;\r\n\t\t\t\tlet targets = [];\r\n\t\t\t\tgame.players.forEach(char => {\r\n\t\t\t\t\tif (char !== player && char.countCards(\"hej\") > 0) {\r\n\t\t\t\t\t\ttargets.push([char, getTarget(player, char)]);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tlet target = [undefined, -114514];\r\n\t\t\t\ttargets.forEach(char => {\r\n\t\t\t\t\tif (char[1] > target[1]) target = [char[0], char[1]];\r\n\t\t\t\t});\r\n\t\t\t\ttarget = target[0];\r\n\t\t\t\tif (ui.selected.cards.length >= Math.max(target.countCards(\"h\"), target.countCards(\"e\"))) return false;\r\n\t\t\t\treturn get.value(card, player) < 6;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { targets } = event;\r\n\t\t\t\tconst {links} = await player\r\n\t\t\t\t\t.choosePlayerCard(\"hej\", targets[0], true, [1, event.cards.length])\r\n\t\t\t\t\t.set(\"prompt\", \"请选择你要移动的牌<br>（必须选择同一区域的牌）\")\r\n\t\t\t\t\t.set(\"filterOk\", () => {\r\n\t\t\t\t\t\treturn new Set(ui.selected.buttons.map(i => get.position(i.link))).size === 1;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\tlet target = get.event().targets[0];\r\n\t\t\t\t\t\tlet cards = get.event().cards;\r\n\t\t\t\t\t\tif (get.attitude2(target) > 0 && target.countCards(\"j\") > 0) return target.getCards(\"j\").includes(button.link);\r\n\r\n\t\t\t\t\t\tlet h = target.getCards(\"h\");\r\n\t\t\t\t\t\tlet e = target.getCards(\"e\");\r\n\r\n\t\t\t\t\t\tlet sort = [h, e, cards].sort((a, b) => {\r\n\t\t\t\t\t\t\treturn b.length - a.length;\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tsort.forEach((arr, index) => {\r\n\t\t\t\t\t\t\tif (cards.some(i => arr.includes(i))) delete sort[index];\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tsort = sort.filter(arr => arr.length > 0);\r\n\r\n\t\t\t\t\t\treturn sort[0].includes(button.link) ? get.value(button.link, get.player()) + 10 : 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"targets\", targets)\r\n\t\t\t\t\t.set(\"cards\", event.cards)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!links) return;\r\n\t\t\t\tswitch (get.position(links[0])) {\r\n\t\t\t\t\tcase \"h\":\r\n\t\t\t\t\t\ttargets[1].gain(links);\r\n\t\t\t\t\t\ttargets[0].$give(links.length, targets[1]);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"e\":\r\n\t\t\t\t\t\tfor (let card of links) {\r\n\t\t\t\t\t\t\tif (targets[1].canEquip(card)) {\r\n\t\t\t\t\t\t\t\ttargets[1].equip(card);\r\n\t\t\t\t\t\t\t\ttargets[0].$give(card, targets[1]);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttargets[0].discard(card);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"j\":\r\n\t\t\t\t\t\tfor (let card of links) {\r\n\t\t\t\t\t\t\tif (!card.cards?.length) targets[0].removeVirtualJudge(card);\r\n\t\t\t\t\t\t\ttargets[1].addJudge(card, card?.cards);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 8,\r\n\t\t\t\tthreaten: 1.5,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget(player, target) {\r\n\t\t\t\t\t\tlet att = get.attitude(player, target);\r\n\t\t\t\t\t\tif (ui.selected.targets.length === 0) {\r\n\t\t\t\t\t\t\tif (target.countCards(\"j\") > 0 && att > 0) return 100;\r\n\t\t\t\t\t\t\treturn att - target.countCards(\"hej\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlet last = ui.selected.targets[0];\r\n\t\t\t\t\t\t\tif (last.countCards(\"j\") > 0 && att > 0) return -1;\r\n\t\t\t\t\t\t\treturn att > 0 ? 1 : 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tjiangpaomrfz: {\r\n\t\t\taudio: \"shuipaomrfz\",\r\n\t\t\tfrequent: true,\r\n\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn !event.numFixed;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.num += [\"h\", \"e\", \"j\"].filter(pos => player.countCards(pos) > 0).length;\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.5,\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n};\r\n"],"names":["card","player","target","targets","event","i","skills","trigger","cards","cards2","result","source","targetx","hs","j","att","num","list","suit","links","hd","evt","name","bottom","disPile","target2","cardx","storage","current","value","moved","top","originalHandCards","color","nums","indexs","skillList","nature","button","capt","dialog"],"mappings":"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"}