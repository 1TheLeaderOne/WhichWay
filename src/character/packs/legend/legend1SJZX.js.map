{"version":3,"file":"legend1SJZX.js","sources":["../../../../../../../../packages/extension/WhichWay/src/character/packs/legend/legend1SJZX.js"],"sourcesContent":["import { lib, game, ui, get, ai, _status } from \"noname\";\r\n\r\n/**\r\n * 六星武将第一部分\r\n * (都是牢武将了)\r\n * @type {WhichWayCharacterPack}\r\n */\r\nexport default {\r\n\tcharacter: {\r\n\t\tailinimrfz: [\"female\", \"yimrfz\", 3, [\"zhidengmrfz\", \"shenpanmrfz\", \"liechaomrfz\"], []],\r\n\t\thongxuemrfz: [\"female\", \"luomrfz\", 4, [\"ruibimrfz\", \"sujimrfz\"], []],\r\n\t\txiaoyangmrfz: [\"female\", \"laimrfz\", 3, [\"qingyanmrfz\", \"luanhuomrfz\"], []],\r\n\t\tyinhuimrfz: [\"male\", \"xiemrfz\", 4, [\"xuebianmrfz\", \"tonghemrfz\"], []],\r\n\t\tlingzhimrfz: [\"male\", \"xiemrfz\", 4, [\"siyongmrfz\"], []],\r\n\t\tliumingmrfz: [\"male\", \"yimrfz\", 4, [\"fanyuanmrfz\", \"yingjimrfz\", \"new_weiguangmrfz\"], []],\r\n\t\tchizuimrfz: [\"female\", \"xumrfz\", 4, [\"newzhidianmrfz\", \"newpijimrfz\"], []],\r\n\t\tniyanmrfz: [\"female\", \"luomrfz\", 4, [\"sutumrfz\", \"wotumrfz\"], []],\r\n\t\tchengshanmrfz: [\"female\", \"luomrfz\", 3, [\"dianshanmrfz\", \"shidemrfz\"], []],\r\n\t\twmrfz: [\"female\", \"bamrfz\", 3, [\"fukemrfz\", \"zhumengmrfz3\"], []],\r\n\t\tsikadimrfz: [\"female\", \"liemrfz\", 4, [\"jingliemrfz\", \"shulangmrfz\", \"tongmaimrfz\"], [\"clan:深海猎人\"]],\r\n\t\tspdegoumrfz: [\"female\", \"qimrfz\", 4, [\"laoyingmrfz\", \"yushimrfz\"], []],\r\n\t\tmaennamrfz: [\"male\", \"kamrfz\", 4, [\"lianmangmrfz\", \"zhanmangmrfz\", \"xingyimrfz\"], []],\r\n\t\tsplinguangmrfz: [\"female\", \"kamrfz\", 4, [\"zhuguangmrfz\", \"kuanmrfz\", \"shuoguangmrfz\"], []],\r\n\t\tkaierximrfz: [\"female\", \"luomrfz\", 3, [\"yuanlvemrfz\", \"chonggoumrfz\", \"yuanshimrfz\", \"m3mrfz\"], [\"zhu\"]],\r\n\t\tshanmrfz: [\"male\", \"gemrfz\", 4, [\"zhefumrfz\", \"yubianmrfz\"], []],\r\n\t\tgeleidiyamrfz: [\"female\", \"liemrfz\", \"3/4\", [\"quliemrfz\", \"newxunxiangmrfz\", \"xueshuomrfz\", \"tongmaimrfz\"], [\"clan:深海猎人\"]],\r\n\t\tchenmrfz: [\"female\", \"longmrfz\", 4, [\"danweimrfz\", \"hechimrfz\", \"jueyingmrfz\", \"newjingsimrfz\"], [\"zhu\"]],\r\n\t\txingxiongmrfz: [\"female\", \"longmrfz\", \"4/5\", [\"xinboremrfz\", \"xinyizhongmrfz\"], []],\r\n\t\tkanielianmrfz: [\"female\", \"laimrfz\", 3, [\"shazhenmrfz\", \"shacanmrfz\", \"shahuanmrfz\"], []],\r\n\t\tkuiyingmrfz: [\"male\", \"weimrfz\", 3, [\"xuyingmrfz\", \"xuegemrfz\", \"huanxiangmrfz\"], []],\r\n\t\tmositimamrfz: [\"female\", \"lamrfz\", 3, [\"shishimrfz\", \"huanshimrfz\"], []],\r\n\t\tkeebomrfz: [\"female\", \"luomrfz\", 3, [\"jiemimrfz\", \"shihuangmrfz\", \"baokemrfz\"], []],\r\n\t\tfeiyameitamrfz: [\"female\", \"lamrfz\", 4, [\"shunanmrfz\"], []],\r\n\t\tjicimrfz: [\"male\", \"yimrfz\", 4, [\"jihumrfz\", \"re_jianshumrfz\"], []],\r\n\t\thelagemrfz: [\"male\", \"wumrfz\", 4, [\"yingkuimrfz\", \"cangfengmrfz\", \"yuexiangmrfz\"], []],\r\n\t\twendimrfz: [\"female\", \"luomrfz\", 4, [\"jiangpaomrfz\", \"newdanpaomrfz\"], []],\r\n\t\tsenranmrfz: [\"female\", \"samrfz\", \"3/5\", [\"juezhanmrfz\", \"shanxiemrfz\", \"tieyimrfz\"], []],\r\n\t\tashmrfz: [\"female\", \"othermrfz\", \"3/3/1\", [\"baigeimrfz\", \"wusumrfz\", \"wutoumrfz\"], []],\r\n\t\tkamimrfz: [\"male\", \"samrfz\", 3, [\"dianlianmrfz\", \"shazumrfz\", \"leibaomrfz\"], []],\r\n\t\tnianmrfz: [\"female\", \"suimrfz\", 4, [\"zhujimrfz\", \"tongyinmrfz\", \"tieyumrfz\"], []],\r\n\t\tlingmrfz: [\"female\", \"suimrfz\", 3, [\"shixingmrfz\", \"zuimengmrfz\", \"haojiumrfz\"], []],\r\n\t\tfengdimrfz: [\"female\", \"weimrfz\", 4, [\"newjuntongmrfz\", \"newpochengmrfz\"], []],\r\n\t\tqinliumrfz: [\"female\", \"weimrfz\", 3, [\"junqimrfz\", \"butuimrfz\", \"zhiqimrfz\"], []],\r\n\t\tlaolimrfz: [\"male\", \"limrfz\", 3, [\"linhuamrfz\", \"mingshimrfz\", \"jixiongmrfz\"], []],\r\n\t\tamrfz: [\"male\", \"limrfz\", \"3/4/1\", [\"guaijiemrfz\", \"guaiyaomrfz\", \"qizhenmrfz\"], []],\r\n\t\theimrfz: [\"female\", \"ximrfz\", 4, [\"heishimrfz\", \"ruitongmrfz\", \"junumrfz\"], []],\r\n\t\tchongyuemrfz: [\"male\", \"suimrfz\", 3, [\"shubianmrfz\", \"wubenmrfz\", \"wowumrfz\"], []],\r\n\t\tanjielinamrfz: [\"female\", \"xumrfz\", 3, [\"xinshimrfz\", \"fanzhongmrfz\"], []],\r\n\t\thaojiaomrfz: [\"female\", \"weimrfz\", 4, [\"xuezhanmrfz\", \"dunpaomrfz\", \"biaohaomrfz\"], []],\r\n\t\txigymrfz: [\"female\", \"suimrfz\", 3, [\"huijuanmrfz\", \"dianjingmrfz\", \"cangjuanmrfz\"], []],\r\n\t\tyanweimrfz: [\"female\", \"hongmrfz\", 4, [\"fengjianmrfz\", \"hongsongmrfz\"], []],\r\n\t\tnengtianshimrfz: [\"female\", \"qimrfz\", \"3/3/1\", [\"lianshemrfz\", \"guozaimrfz\"], []],\r\n\t\tyuanyamrfz: [\"female\", \"hongmrfz\", 4, [\"bingximrfz\", \"ningshenmrfz\", \"yuanmengmrfz\"], []],\r\n\t\tmidiexiangmrfz: [\"female\", \"luomrfz\", 3, [\"zhangyimrfz\", \"chongjimrfz\", \"nianshoumrfz\"], []],\r\n\t\tspzzxpmrfz: [\"female\", \"luomrfz\", 3, [\"yuyunmrfz\", \"shuiqiangmrfz\", \"jianfengmrfz\"], []],\r\n\t\tshuiyuemrfz: [\"male\", \"dongmrfz\", 3, [\"liqunmrfz\", \"chuangshangmrfz\", \"jinghuamrfz\"], []],\r\n\t\tspyoulingshamrfz: [\"female\", \"liemrfz\", 3, [\"xinyongwomrfz\", \"douzhengmrfz\", \"shensuimrfz\", \"tongmaimrfz\"], [\"clan:深海猎人\"]],\r\n\t\tqiubaimrfz: [\"female\", \"yanmrfz\", 4, [\"ruximrfz\", \"wenxuemrfz\"], []],\r\n\t\tbaitiemrfz: [\"male\", \"weimrfz\", 4, [\"jigongmrfz\", \"jiefeimrfz\"], []],\r\n\t\tweinamrfz: [\"female\", \"weimrfz\", 4, [\"fensuimrfz\", \"yuechuimrfz\"], []],\r\n\t\tsiyemrfz: [\"male\", \"xumrfz\", 1, [\"qunxingmrfz\", \"langqunmrfz\"], []],\r\n\t\tspjiaweiermrfz: [\"female\", \"luomrfz\", 4, [\"yixuemrfz\", \"juximrfz\", \"conghunmrfz\"], []],\r\n\t\tsemrfz: [\"female\", \"luomrfz\", 4, [\"mojianmrfz\", \"huanghunmrfz\", \"yujinmrfz\"], []],\r\n\t\tlinmrfz: [\"female\", \"yanmrfz\", 3, [\"zhenzamrfz\", \"liuliemrfz\", \"yinbimrfz\"], []],\r\n\t\tduoluoximrfz: [\"female\", \"lymrfz\", 3, [\"newgongzhenmrfz\", \"newmengxiangmrfz\"], []],\r\n\t\tkongxianmrfz: [\"female\", \"lamrfz\", \"3/3/1\", [\"sanyimrfz\", \"baofengmrfz\", \"tiexianmrfz\"], []],\r\n\t\tspyedaomrfz: [\"female\", \"othermrfz\", \"3/4\", [\"luanwumrfz\"], []],\r\n\t\tyineisimrfz: [\"female\", \"luomrfz\", 3, [\"yingzhimrfz\", \"yingshaomrfz\"], []],\r\n\t\tmiumiumrfz: [\"female\", \"lymrfz\", 3, [\"yuanliumrfz\", \"shuilingmrfz\", \"xinjingshuimrfz\"], []],\r\n\t\theijianmrfz: [\"male\", \"laimrfz\", 3, [\"newhuangxiangmrfz\", \"newjiyinmrfz\"], []],\r\n\t\tyifulitemrfz: [\"female\", \"lymrfz\", 3, [\"yanmomrfz\", \"yanbaomrfz\", \"huishenmrfz\"], []],\r\n\t\tsphemomrfz: [\"female\", \"lymrfz\", 3, [\"renbenmrfz\", \"dizhumrfz\"], []],\r\n\t\tsaileiyamrfz: [\"female\", \"lymrfz\", \"3/4\", [\"panshimrfz\", \"newgaihuamrfz\"], []],\r\n\t\thuangmrfz: [\"female\", \"luomrfz\", 4, [\"newyanxunmrfz\", \"newfeixuemrfz\"], []],\r\n\t\tlinglanmrfz: [\"female\", \"xumrfz\", 3, [\"newhualaomrfz\", \"newhemingmrfz\", \"wuyuemrfz\"], []],\r\n\t\tshanlingmrfz: [\"female\", \"shimrfz\", 4, [\"yubimrfz\", \"jiushumrfz\", \"lichangmrfz\"], []],\r\n\t\tmaluxiermrfz: [\"female\", \"othermrfz\", 3, [\"kumomrfz\", \"cainvmrfz\", \"cangshumrfz\"], []],\r\n\t\tspweinamrfz: [\"female\", \"weimrfz\", 4, [\"zhongyuanmrfz\", \"futumrfz\", \"wangximrfz\"], []],\r\n\t\tsplapulandemrfz: [\"female\", \"xumrfz\", 3, [\"shilangmrfz\", \"toulangmrfz\", \"kuanglangmrfz\"], []],\r\n\t\trendongmrfz: [\"female\", \"xumrfz\", 4, [\"yinhumrfz\", \"zhuixiongmrfz\"], []],\r\n\t\tshijunzhemrfz: [\"female\", \"xumrfz\", 4, [\"fengyanmrfz\", \"weimingmrfz\"], []],\r\n\t\tspjicimrfz: [\"male\", \"yimrfz\", 3, [\"xinxiangmrfz\", \"haijiangmrfz\", \"fanyangmrfz\"], []],\r\n\t\tyumrfz: [\"male\", \"suimrfz\", 4, [\"qizaomrfz\", \"zhonglemrfz\"], []],\r\n\t\tzhuhuangmrfz: [\"female\", \"yanmrfz\", \"4/5\", [\"chongrangmrfz\", \"zhuoyanmrfz\", \"liaoyuanmrfz\"], []],\r\n\t},\r\n\tskill: {\r\n\t\t//艾丽妮\r\n\t\tzhidengmrfz: {\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseZhunbeiBegin\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tevent.result = await player\r\n\t\t\t\t\t.chooseTarget(get.prompt2(\"zhidengmrfz\"), [0, player.hp], function (card, player, target) {\r\n\t\t\t\t\t\treturn target.hp <= player.hp;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", target => get.attitude2(target) > 0)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { targets } = event;\r\n\t\t\t\tgame.asyncDraw(targets);\r\n\r\n\t\t\t\t//成就\r\n\t\t\t\tif (!player.storage._sjzxAch_denghuoweimingmrfz) player.storage._sjzxAch_denghuoweimingmrfz = 0;\r\n\t\t\t\tif (targets.length >= 2) player.storage._sjzxAch_denghuoweimingmrfz++;\r\n\t\t\t},\r\n\t\t},\r\n\t\tshenpanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn player.canCompare(target);\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { target } = event;\r\n\t\t\t\tconst result = await player.chooseToCompare(target).forResult();\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\ttarget.addTempSkill(\"shenpanmrfz2\");\r\n\t\t\t\t\tplayer.addTempSkill(\"shenpanmrfz3\");\r\n\t\t\t\t\tplayer.storage.shenpanmrfz3 = target;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 10,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: function (player) {\r\n\t\t\t\t\t\tif (player.countCards(\"h\", \"sha\") > 0) return 0.6;\r\n\t\t\t\t\t\tvar num = player.countCards(\"h\");\r\n\t\t\t\t\t\tif (num > player.hp) return 0;\r\n\t\t\t\t\t\tif (num == 1) return -2;\r\n\t\t\t\t\t\tif (num == 2) return -1;\r\n\t\t\t\t\t\treturn -0.7;\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tvar num = target.countCards(\"h\");\r\n\t\t\t\t\t\tif (num == 1) return -1;\r\n\t\t\t\t\t\tif (num == 2) return -0.7;\r\n\t\t\t\t\t\treturn -0.5;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tthreaten: 1.3,\r\n\t\t\t},\r\n\t\t},\r\n\t\tshenpanmrfz2: {\r\n\t\t\tcharlotte: true,\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"伊比利亚审判庭裁决你为异端\",\r\n\t\t\t},\r\n\t\t},\r\n\t\tshenpanmrfz3: {\r\n\t\t\tmod: {\r\n\t\t\t\tglobalFrom: function (from, to) {\r\n\t\t\t\t\tif (to == from.storage.shenpanmrfz3) {\r\n\t\t\t\t\t\treturn -Infinity;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tcharlotte: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.target.hasSkill(\"shenpanmrfz2\") && event.target.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.player) < 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst result = await trigger.target.chooseToDiscard(\"he\", true, 1).forResult();\r\n\t\t\t\tif (result.cards && result.cards.length > 0) player.gain(result.cards, \"gain2\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tliechaomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tsource: \"damageBegin3\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event) {\r\n\t\t\t\tif (event.parent === undefined || event.parent.name == \"_lianhuan\" || event.parent.name == \"_lianhuan2\") return false;\r\n\t\t\t\tif (event.card) {\r\n\t\t\t\t\tif (event.player.countCards(\"he\") == 0) return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.num++;\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\teffect: {\r\n\t\t\t\t\tplayer: function (card, player, target, current) {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tcard.name == \"sha\" &&\r\n\t\t\t\t\t\t\ttarget.countCards(\"h\") == 0 &&\r\n\t\t\t\t\t\t\t!target.hasSkillTag(\"filterDamage\", null, {\r\n\t\t\t\t\t\t\t\tplayer: player,\r\n\t\t\t\t\t\t\t\tcard: card,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\treturn [1, 0, 1, -3];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//鸿雪\r\n\t\truibimrfz: {\r\n\t\t\taudio: 3,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tderivation: [\"dazijimrfzskill\"],\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.countCards(\"he\") > 0 &&\r\n\t\t\t\t\t!player.isDisabled(1) &&\r\n\t\t\t\t\t!player.hasCard(function (card) {\r\n\t\t\t\t\t\treturn card.name == \"dazijimrfz\";\r\n\t\t\t\t\t}, \"e\")\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tfilterCard: true,\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst card = game.createCard(\"dazijimrfz\", \"heart\", 2);\r\n\t\t\t\tplayer.$gain2(card);\r\n\t\t\t\tgame.delayx();\r\n\t\t\t\tplayer.equip(card);\r\n\t\t\t},\r\n\t\t\tgroup: \"ruibimrfz2\",\r\n\t\t\tai: {\r\n\t\t\t\torder: 12,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\truibimrfz2: {\r\n\t\t\taudio: \"ruibimrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.isDisabled(1) && (event.name != \"phase\" || game.phaseNumber == 0);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst card = game.createCard(\"dazijimrfz\", \"heart\", 2);\r\n\t\t\t\tplayer.$gain2(card);\r\n\t\t\t\tgame.delayx();\r\n\t\t\t\tplayer.equip(card);\r\n\t\t\t\tplayer.removeSkill(\"ruibimrfz2\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tsujimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tsource: \"damageSource\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.player == player) return false;\r\n\t\t\t\tif (event.card.name != \"sha\" || !player.isPhaseUsing()) return false;\r\n\t\t\t\treturn event.player.isAlive();\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.player.addSkill(\"sujimrfz2\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"sujimrfz_damage\"],\r\n\t\t},\r\n\t\tsujimrfz2: {\r\n\t\t\tcharlotte: true,\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"鸿雪记住了你的弱点\",\r\n\t\t\t},\r\n\t\t},\r\n\t\tsujimrfz_damage: {\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!event.card || event.card.name != \"sha\" || player.hasSkill(\"sujimrfz_damage_ban\")) return false;\r\n\t\t\t\tfor (var i = 0; i < event.targets.length; i++) {\r\n\t\t\t\t\tvar target = event.targets[i];\r\n\t\t\t\t\tif (target.hasSkill(\"sujimrfz2\")) return true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tfor (var i = 0; i < trigger.targets.length; i++) {\r\n\t\t\t\t\tvar target = trigger.targets[i];\r\n\t\t\t\t\tif (target.hasSkill(\"sujimrfz2\")) {\r\n\t\t\t\t\t\ttarget.addTempSkill(\"qinggang2\");\r\n\t\t\t\t\t\ttarget.storage.qinggang2.add(trigger.card);\r\n\t\t\t\t\t\ttarget.markSkill(\"qinggang2\");\r\n\t\t\t\t\t\ttarget.addTempSkill(\"sujimrfz_damage_add\");\r\n\t\t\t\t\t\ttarget.storage.sujimrfz_damage = {\r\n\t\t\t\t\t\t\tcard: trigger.card,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tplayer.addTempSkill(\"sujimrfz_damage_ban\", \"phaseEnd\");\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tadd: {\r\n\t\t\t\t\tonremove: function (player) {\r\n\t\t\t\t\t\tdelete player.storage.sujimrfz_damage;\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"damageBegin3\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar info = player.storage.sujimrfz_damage;\r\n\t\t\t\t\t\treturn event.card && event.card == info.card;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"sujimrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//艾雅法拉\r\n\t\tcuofengmrfz: {\r\n\t\t\tgroup: [\"cuofengmrfz_mark1\", \"cuofengmrfz_mark2\"],\r\n\t\t\taudio: 2,\r\n\t\t\tpreHidden: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"damageEnd\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar num = player.countMark(\"cuofengmrfz_mark1\") + player.countMark(\"cuofengmrfz_mark2\");\r\n\t\t\t\tif (num >= player.maxHp - 1) return false;\r\n\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar list = [\"摸牌阶段\", \"结束阶段\"];\r\n\t\t\t\tconst result = await player.chooseControl(list).forResult();\r\n\t\t\t\tif (result.control == \"摸牌阶段\") {\r\n\t\t\t\t\tplayer.addMark(\"cuofengmrfz_mark1\", 1, false);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.addMark(\"cuofengmrfz_mark2\", 1, false);\r\n\t\t\t\t}\r\n\t\t\t\tplayer.chooseToDiscard(\"he\", true, 1);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tmaixie: true,\r\n\t\t\t\tmaixie_hp: true,\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget: function (card, player, target) {\r\n\t\t\t\t\t\tif (player.hasSkillTag(\"jueqing\", false, target)) return [1, -1];\r\n\t\t\t\t\t\tif (get.tag(card, \"damage\")) return [1, 0.55];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tcuofengmrfz_mark1: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"摸牌阶段额外摸#张牌\",\r\n\t\t\t},\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseDrawBegin2\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"cuofengmrfz_mark1\") > 0;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar num = player.countMark(\"cuofengmrfz_mark1\");\r\n\t\t\t\ttrigger.num += num;\r\n\t\t\t},\r\n\t\t},\r\n\t\tcuofengmrfz_mark2: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"结束阶段摸#张牌\",\r\n\t\t\t},\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseJieshuBegin\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"cuofengmrfz_mark2\") > 0;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar num = player.countMark(\"cuofengmrfz_mark2\");\r\n\t\t\t\tplayer.draw(num);\r\n\t\t\t},\r\n\t\t},\r\n\t\tchengzhimrfz: {\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationColor: \"wood\",\r\n\t\t\taudio: 2,\r\n\t\t\tjuexingji: true,\r\n\t\t\tunique: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseZhunbeiBegin\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar num = player.countMark(\"cuofengmrfz_mark1\") + player.countMark(\"cuofengmrfz_mark2\");\r\n\t\t\t\tif (num != player.maxHp - 1) return false;\r\n\t\t\t\treturn !player.storage.chengzhimrfz;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.loseMaxHp();\r\n\t\t\t\tplayer.addSkill(\"zhuzhimrfz\");\r\n\t\t\t\tgame.log(player, \"获得了技能\", \"#g【逐志】\");\r\n\t\t\t\tplayer.awakenSkill(event.name);\r\n\t\t\t\tplayer.storage[event.name] = true;\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhuzhimrfz: {\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseZhunbeiBegin\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.hp == 1 && player.countCards(\"he\") <= 0) return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (player.hp > 1) {\r\n\t\t\t\t\tawait player.damage(\"fire\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tawait player.chooseToDiscard(\"he\", true, 1);\r\n\t\t\t\t}\r\n\t\t\t\tvar num1 = player.countMark(\"cuofengmrfz_mark1\") + player.countMark(\"cuofengmrfz_mark2\");\r\n\t\t\t\tvar num2 = Math.floor(num1 / 2);\r\n\t\t\t\tplayer.addTempSkill(\"zhuzhimrfz_mark\", {\r\n\t\t\t\t\tplayer: \"phaseAfter\",\r\n\t\t\t\t});\r\n\t\t\t\tplayer.draw(num2);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tbasic: {\r\n\t\t\t\t\torder: 1,\r\n\t\t\t\t},\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: function (player) {\r\n\t\t\t\t\t\tif (player.hp < 2) return -1;\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhuzhimrfz_mark: {\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"黑暗追着她，她追着光。\",\r\n\t\t\t},\r\n\t\t\tinit: function (player, skill) {\r\n\t\t\t\tif (!player.storage[skill]) player.storage[skill] = 0;\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\tvar n = player.countMark(\"cuofengmrfz_mark1\") + player.countMark(\"cuofengmrfz_mark2\");\r\n\t\t\t\t\treturn num + n;\r\n\t\t\t\t},\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tvar n = player.countMark(\"cuofengmrfz_mark1\") + player.countMark(\"cuofengmrfz_mark2\");\r\n\t\t\t\t\tif (card.name == \"sha\") return num - 1 + n;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//银灰\r\n\t\tmoucunmrfz: {\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"roundStart\",\r\n\t\t\t},\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"【鹰视】中的X为#。\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.removeMark(\"moucunmrfz2\", player.countMark(\"moucunmrfz2\"));\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseCardTarget({\r\n\t\t\t\t\t\tprompt: \"请交给一名其他角色一至两张牌\",\r\n\t\t\t\t\t\tfilterCard: true,\r\n\t\t\t\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\t\t\t\tvar group = game.me.group;\r\n\t\t\t\t\t\t\treturn player != target && target.group !== group;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tai1: function (card) {\r\n\t\t\t\t\t\t\treturn 10 - get.value(card);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tai2: function (target) {\r\n\t\t\t\t\t\t\tif (get.attitude(player, target) <= 0) return get.attitude(player, target);\r\n\t\t\t\t\t\t\treturn get.attitude(player, target) > 0;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tselectCard: [1, 2],\r\n\t\t\t\t\t\tposition: \"he\",\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (result.bool && result.targets) {\r\n\t\t\t\t\tresult.targets[0].gain(result.cards, player, \"giveAuto\");\r\n\t\t\t\t\tresult.targets[0].addSkill(\"moucunmrfz3\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"moucunmrfz2\",\r\n\t\t},\r\n\t\tyingshimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\treturn game.hasPlayer(current => lib.skill.yingshimrfz.filterTarget(null, player, current));\r\n\t\t\t},\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { target } = event;\r\n\t\t\t\tvar num = player.countMark(\"moucunmrfz\");\r\n\t\t\t\tif (num < 1) {\r\n\t\t\t\t\tplayer.viewHandcards(target);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar max = target.countCards(\"h\");\r\n\t\t\t\t\tif (max > num) return player.gainPlayerCard(num, target, \"h\", true, \"visible\");\r\n\t\t\t\t\tif (num >= max) return player.gainPlayerCard(max, target, \"h\", true, \"visible\");\r\n\t\t\t\t}\r\n\t\t\t\tgame.log(player, \"观看了\", target, \"的手牌\");\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 6,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 0.5,\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tif (target.hasSkillTag(\"noh\")) return 0;\r\n\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tmoucunmrfz2: {\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseUseEnd\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!event.player.hasSkill(\"moucunmrfz3\")) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tevent.player.getHistory(\"useCard\", function (evt) {\r\n\t\t\t\t\t\treturn evt.getParent(\"phaseUse\") == event;\r\n\t\t\t\t\t}).length > 0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar list = [];\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.logSkill(\"moucunmrfz\");\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\ttrigger.player.getHistory(\"useCard\", function (evt) {\r\n\t\t\t\t\tif (evt.getParent(\"phaseUse\") == trigger) list.add(get.type2(evt.card));\r\n\t\t\t\t});\r\n\t\t\t\tplayer.draw(list.length);\r\n\t\t\t\tif (list.length > 2) {\r\n\t\t\t\t\tplayer.addMark(\"moucunmrfz\", 1, false);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tmoucunmrfz3: {\r\n\t\t\tcharlotte: true,\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"银灰前来求学\",\r\n\t\t\t},\r\n\t\t},\r\n\t\t//灵知\r\n\t\tsiyongmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"loseEnd\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.getParent()?.name != \"useCard\" || player != _status.currentPhase) return false;\r\n\t\t\t\tvar list = player.getStorage(\"siyongmrfz2\");\r\n\t\t\t\tfor (var i of event.cards) {\r\n\t\t\t\t\tif (!list.includes(get.suit(i, player))) return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (!player.storage.siyongmrfz2) player.storage.siyongmrfz2 = [];\r\n\t\t\t\tfor (var i of trigger.cards) player.storage.siyongmrfz2.add(get.suit(i, player));\r\n\t\t\t\tplayer.storage.siyongmrfz2.sort();\r\n\t\t\t\tplayer.addTempSkill(\"siyongmrfz2\");\r\n\t\t\t\tplayer.markSkill(\"siyongmrfz2\");\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && current.countCards(\"he\") > 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t) {\r\n\t\t\t\t\tconst result = await player\r\n\t\t\t\t\t\t.chooseTarget(\"请选择一名其他角色获得其一张牌\", true, function (card, player, target) {\r\n\t\t\t\t\t\t\treturn target != player && target.countCards(\"he\") > 0;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\tvar att = get.attitude(player, target);\r\n\t\t\t\t\t\t\tif (att >= 0) return 0;\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\ttarget.countCards(\"he\", function (card) {\r\n\t\t\t\t\t\t\t\t\treturn get.value(card) > 5;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn -att;\r\n\t\t\t\t\t\t\treturn Math.random();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\t\tplayer.gainPlayerCard(1, target, \"he\", true);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.draw();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t},\r\n\t\tsiyongmrfz2: {\r\n\t\t\tonremove: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"当前已使用花色：$\",\r\n\t\t\t},\r\n\t\t},\r\n\t\t//旧流明\r\n\t\tyijianmrfz: {\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"damageBegin\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\tusable: 1,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.num--;\r\n\t\t\t},\r\n\t\t},\r\n\t\tweiguangmrfz: {\r\n\t\t\taudio: \"new_weiguangmrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseZhunbeiBegin\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tglobal: [\"weiguangmrfz_mark\", \"weiguangmrfz_losemark\"],\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.hasMark(\"weiguangmrfz_mark\");\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.addMark(\"weiguangmrfz_mark\", 1);\r\n\t\t\t},\r\n\t\t\tgroup: \"weiguangmrfz2\",\r\n\t\t},\r\n\t\tweiguangmrfz_mark: {\r\n\t\t\tmarktext: \"火光\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"火光\",\r\n\t\t\t\tcontent: \"流明希望人们能有余力擦去脸上的灰尘\",\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tif (card.name == \"sha\") return num + player.countMark(\"weiguangmrfz_mark\");\r\n\t\t\t\t},\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\treturn num + player.countMark(\"weiguangmrfz_mark\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseDrawBegin2\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.hasMark(\"weiguangmrfz_mark\");\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.num += player.countMark(\"weiguangmrfz_mark\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tweiguangmrfz_losemark: {\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseJieshuBegin\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tcharlotte: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.hasMark(\"weiguangmrfz_mark\");\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.drawTo(Math.min(5, player.getHandcardLimit()));\r\n\t\t\t\tplayer.removeMark(\"weiguangmrfz_mark\", 1);\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.logSkill(\"new_weiguangmrfz\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tweiguangmrfz2: {\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilterTarget: true,\r\n\t\t\tprompt: \"选择一名角色令其获得一个“火光”标记并对自己造成一点伤害，若该角色是你，你流失一点体力\",\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { target } = event;\r\n\t\t\t\tif (target == player) {\r\n\t\t\t\t\tplayer.loseHp();\r\n\t\t\t\t}\r\n\t\t\t\tplayer.damage();\r\n\t\t\t\ttarget.addMark(\"weiguangmrfz_mark\");\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.logSkill(\"new_weiguangmrfz\");\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 9,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tif (target.countCards(\"h\") > 2) return 5;\r\n\t\t\t\t\t\tif (player == target && player.getDamagedHp() == 0) return 5;\r\n\t\t\t\t\t\treturn 2;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tthreaten: 2,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//斥罪\r\n\t\tzhidianmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"roundStart\",\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar list = lib.inpile;\r\n\t\t\t\tvar list2 = [];\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\t\t\tvar name = list[i];\r\n\t\t\t\t\tif (name == \"shan\" || name == \"wuxie\") continue;\r\n\t\t\t\t\tvar type = get.type(name);\r\n\t\t\t\t\tif (name == \"sha\") {\r\n\t\t\t\t\t\tlist2.push([\"基本\", \"\", \"sha\"]);\r\n\t\t\t\t\t\tlist2.push([\"基本\", \"\", \"sha\", \"fire\"]);\r\n\t\t\t\t\t\tlist2.push([\"基本\", \"\", \"sha\", \"thunder\"]);\r\n\t\t\t\t\t} else if (type == \"basic\") {\r\n\t\t\t\t\t\tlist2.push([\"基本\", \"\", list[i]]);\r\n\t\t\t\t\t} else if (type == \"trick\") {\r\n\t\t\t\t\t\tlist2.push([\"锦囊\", \"\", list[i]]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!list.length) return;\r\n\t\t\t\telse\r\n\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t.chooseButton([get.prompt(\"zhidianmrfz\"), [list, \"vcard\"]])\r\n\t\t\t\t\t\t.set(\"ai\", function (button) {\r\n\t\t\t\t\t\t\tswitch (button.link[2]) {\r\n\t\t\t\t\t\t\t\tcase \"wuxie\":\r\n\t\t\t\t\t\t\t\t\treturn 0.6 + Math.random();\r\n\t\t\t\t\t\t\t\tcase \"wuzhong\":\r\n\t\t\t\t\t\t\t\tcase \"dongzhuxianji\":\r\n\t\t\t\t\t\t\t\t\treturn 0.5 + Math.random();\r\n\t\t\t\t\t\t\t\tcase \"guohe\":\r\n\t\t\t\t\t\t\t\tcase \"zhujinqiyuan\":\r\n\t\t\t\t\t\t\t\t\treturn 0.4 + Math.random();\r\n\t\t\t\t\t\t\t\tcase \"sha\":\r\n\t\t\t\t\t\t\t\t\treturn 1 + Math.random();\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\treturn Math.random();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\tif (result.bool === true && result.links) {\r\n\t\t\t\t\tvar name = result.links[0][2];\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"zhidianmrfz\");\r\n\t\t\t\t\tplayer.storage.zhidianmrfz = name;\r\n\t\t\t\t\tplayer.markSkill(\"zhidianmrfz\");\r\n\t\t\t\t\tgame.log(player, \"声明了\", \"#g\" + get.translation(name));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"已声明【$】\",\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhidianmrfz_use\"],\r\n\t\t},\r\n\t\tzhidianmrfz_use: {\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"useCard1\",\r\n\t\t\t},\r\n\t\t\tsilent: true,\r\n\t\t\tforced: true,\r\n\t\t\tcharlotte: true,\r\n\t\t\tpopup: false,\r\n\t\t\tfirstDo: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.card.name == player.storage.zhidianmrfz;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar target = trigger.player;\r\n\t\t\t\tif (target == player) {\r\n\t\t\t\t\tplayer.chooseToDiscard(\"he\", true, 1);\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"zhidianmrfz\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (target.countCards(\"he\") == 0) event._result = { index: 1 };\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tvar str = get.translation(player);\r\n\t\t\t\t\t\tconst { index } = await target\r\n\t\t\t\t\t\t\t.chooseControl()\r\n\t\t\t\t\t\t\t.set(\"choiceList\", [\"交给\" + str + \"一张牌\", \"失去一点体力\"])\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\tif (target !== player) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"zhidianmrfz\");\r\n\t\t\t\t\t\t\tif (index === 0) {\r\n\t\t\t\t\t\t\t\tconst { cards } = await target.chooseCard(\"he\", true);\r\n\t\t\t\t\t\t\t\tif (cards) target.give(cards, player, true);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttarget.loseHp();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tpijimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"damageEnd\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.source == player) return false;\r\n\t\t\t\treturn event.source != undefined;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tlogTarget: \"source\",\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar num = player.maxHp - player.hp;\r\n\t\t\t\tif (num < 2) trigger.source.damage();\r\n\t\t\t\tif (num > 1) trigger.source.damage(2);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tmaixie_defend: true,\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget: function (card, player, target) {\r\n\t\t\t\t\t\tif (player.hasSkillTag(\"jueqing\", false, target)) return [1, -1];\r\n\t\t\t\t\t\treturn 0.8;\r\n\t\t\t\t\t\t// if(get.tag(card,'damage')&&get.damageEffect(target,player,player)>0) return [1,0,0,-1.5];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//泥岩\r\n\t\twotumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCard2\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!event.cards) return false;\r\n\t\t\t\treturn event.cards.length == 0 && !player.hasSkill(\"wotumrfz_ban\");\r\n\t\t\t},\r\n\t\t\tfrequent: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.changeHujia();\r\n\t\t\t\tplayer.addTempSkill(\"wotumrfz_ban\", {\r\n\t\t\t\t\tglobal: \"roundStart\",\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tsutumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardAfter\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!event.card.isCard) return false;\r\n\t\t\t\tif (player.countCards(\"h\") !== player.hp) return false;\r\n\t\t\t\treturn event.cards && event.cards.length == 1;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar list = [];\r\n\t\t\t\tfor (var i = 0; i < lib.inpile.length; i++) {\r\n\t\t\t\t\tvar name = lib.inpile[i];\r\n\t\t\t\t\tif (name == \"sha\") {\r\n\t\t\t\t\t\tlist.push([\"基本\", \"\", \"sha\"]);\r\n\t\t\t\t\t\tfor (var j of lib.inpile_nature) list.push([\"基本\", \"\", \"sha\", j]);\r\n\t\t\t\t\t} else if (get.type(name) == \"basic\") list.push([\"基本\", \"\", name]);\r\n\t\t\t\t\telse if (get.type(name) == \"trick\") list.push([\"锦囊\", \"\", name]);\r\n\t\t\t\t}\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseButton([\"塑土\", [list, \"vcard\"]], true)\r\n\t\t\t\t\t.set(\"ai\", function (button) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tvar player = _status.event.getParent().player,\r\n\t\t\t\t\t\t\tcard = {\r\n\t\t\t\t\t\t\t\tname: button.link[2],\r\n\t\t\t\t\t\t\t\tnature: button.link[3],\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\tcurrent != player &&\r\n\t\t\t\t\t\t\t\t\tget.attitude(player, current) < 0 &&\r\n\t\t\t\t\t\t\t\t\tcurrent.countCards(\"he\") > 0 &&\r\n\t\t\t\t\t\t\t\t\tget.distance(player, current) < 2\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\treturn \"shunshou\";\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\tcurrent != player && get.attitude(player, current) < 0 && current.countCards(\"he\") == 0 && player.inRange(current)\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\treturn \"sha\";\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn player.getUseValue(card, null, true) * _status.event.att;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"att\", get.attitude(event.target, player) > 0 ? 1 : -1)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (result.links) {\r\n\t\t\t\t\tvar name = result.links[0][2];\r\n\t\t\t\t\tplayer.chooseUseTarget({ name: name, isCard: true }, true);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\t//澄闪\r\n\t\tdianyongmrfz: { audio: 2 },\r\n\t\tfuxiemrfz: { audio: 2 },\r\n\t\tdianshanmrfz: {\r\n\t\t\tmark: true,\r\n\t\t\tlocked: true,\r\n\t\t\tzhuanhuanji: true,\r\n\t\t\tmarktext: \"☯\",\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (storage, player, skill) {\r\n\t\t\t\t\tif (player.storage.dianshanmrfz !== true)\r\n\t\t\t\t\t\treturn \"锁定技，当你成为其他角色使用的黑色牌的目标时,你对一名其他角色造成一点雷属性伤害\";\r\n\t\t\t\t\treturn \"锁定技，当你成为其他角色使用的黑色牌的目标时,你弃置一名其他角色一张牌。\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: \"dianyongmrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\ttarget: \"useCardToTargeted\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && !current.countCards(\"he\");\r\n\t\t\t\t\t}) &&\r\n\t\t\t\t\tplayer.storage.dianshanmrfz !== true\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\treturn player != event.player && get.color(event.card) == \"black\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\t\t\t\tplayer.changeZhuanhuanji(\"dianshanmrfz\");\r\n\t\t\t\tif (player.storage.dianshanmrfz == true) {\r\n\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t.chooseTarget(get.prompt(\"dianshanmrfz\"), \"对一名其他角色造成一点雷属性伤害\", true, function (card, player, target) {\r\n\t\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"ai\", target => -get.attitude(player, target))\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t.chooseTarget(get.prompt(\"dianshanmrfz\"), \"弃置一名其他角色一张牌\", true, function (card, player, target) {\r\n\t\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"ai\", target => -get.attitude(player, target))\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t}\r\n\t\t\t\tif (result.bool && result.targets) {\r\n\t\t\t\t\tif (player.storage.dianshanmrfz == true) {\r\n\t\t\t\t\t\tresult.targets[0].damage(\"thunder\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tplayer.discardPlayerCard(result.targets[0], 1, \"he\", true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tshidemrfz: {\r\n\t\t\taudio: \"fuxiemrfz\",\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"useCard\", \"respond\", \"loseAfter\"],\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.name != \"lose\") return true;\r\n\t\t\t\tif (event.type != \"discard\") return false;\r\n\t\t\t\tif (event.cards2) {\r\n\t\t\t\t\tfor (var i = 0; i < event.cards2.length; i++) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (player.isLinked()) player.link(false);\r\n\t\t\t\telse player.link();\r\n\t\t\t},\r\n\t\t\tgroup: \"shidemrfz_draw\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\taudio: \"shidemrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"linkAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn !player.isLinked();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//w\r\n\t\tfukemrfz: {\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"gainAfter\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (\r\n\t\t\t\t\t!game.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && current.countCards(\"he\") > 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\treturn event.getParent(3).name != \"fukemrfz\";\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar num = trigger.cards.length;\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseTarget(\r\n\t\t\t\t\t\tget.prompt(\"fukemrfz\"),\r\n\t\t\t\t\t\t\"获得至多\" + get.translation(num) + \"名角色的各一张牌，然后弃置等量的牌\",\r\n\t\t\t\t\t\t[1, num],\r\n\t\t\t\t\t\tfunction (card, player, target) {\r\n\t\t\t\t\t\t\treturn target.countCards(\"he\") > 0 && player != target;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfunction (target) {\r\n\t\t\t\t\t\t\tvar att = get.attitude(_status.event.player, target);\r\n\t\t\t\t\t\t\tif (target.hasSkill(\"tuntian\")) return att / 10;\r\n\t\t\t\t\t\t\treturn 1 - att;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (result.bool && result.targets) {\r\n\t\t\t\t\tvar num2 = result.targets.length;\r\n\t\t\t\t\tresult.targets.sortBySeat();\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"fukemrfz\", result.targets);\r\n\t\t\t\t\tplayer.chooseToDiscard(num2, true, \"he\");\r\n\t\t\t\t\tplayer.gainMultiple(result.targets, \"he\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.6,\r\n\t\t\t\texpose: 0.2,\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhumengmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"roundStart\",\r\n\t\t\t},\r\n\t\t\tfirstDo: true,\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.removeMark(\"zhumengmrfz3\", player.countMark(\"zhumengmrfz3\"));\r\n\t\t\t\tplayer.unmarkSkill(\"zhumengmrfz2\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhumengmrfz2: {\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"roundStart\",\r\n\t\t\t},\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (storage) {\r\n\t\t\t\t\treturn get.translation(storage) + \"牌\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst result = await player.judge().forResult();\r\n\t\t\t\tif (!result.card) return;\r\n\t\t\t\tconst card = result.card;\r\n\t\t\t\tplayer.markSkill(\"zhumengmrfz2\");\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (get.type(card) !== \"delay\") {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.storage.zhumengmrfz2 = get.type(card);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.storage.zhumengmrfz2 = \"trick\";\r\n\t\t\t\t}\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.addMark(\"zhumengmrfz3\", get.number(card));\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.logSkill(\"zhumengmrfz\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhumengmrfz3: {\r\n\t\t\tmarktext: \"梦\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"梦\",\r\n\t\t\t\tcontent: \"萨卡兹的命运应该掌握在自己手中\",\r\n\t\t\t},\r\n\t\t\taudio: \"zhumengmrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"useCard\", \"respond\"],\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (player.storage.zhumengmrfz2 == \"trick\" && get.type(event.card) == \"delay\") return true;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\treturn get.type(event.card) == player.storage.zhumengmrfz2 && player.countMark(\"zhumengmrfz3\") > 0;\r\n\t\t\t},\r\n\t\t\tfrequent: true,\r\n\t\t\tprompt: \"是否摸一张牌\",\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.removeMark(\"zhumengmrfz3\");\r\n\t\t\t\tplayer.draw();\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhumengmrfz2\", \"zhumengmrfz\"],\r\n\t\t},\r\n\t\t//浊心斯卡蒂\r\n\t\t/**\r\n\t\t * @description\r\n\t\t */\r\n\t\tqianximrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t},\r\n\t\t\tderivation: [\"qianximrfz_ban\"],\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar characterlist = [];\r\n\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\tvar players = game.players[i];\r\n\t\t\t\t\tif (players == player) continue;\r\n\t\t\t\t\tcharacterlist.push(players.name);\r\n\t\t\t\t}\r\n\t\t\t\tif (!lib.config.isNoLimted_mrfz) {\r\n\t\t\t\t\tcharacterlist.remove(\"amiyamrfz\");\r\n\t\t\t\t\tcharacterlist.remove(\"baocunzhemrfz\");\r\n\t\t\t\t}\r\n\t\t\t\tvar skills = [];\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tfor (var i of characterlist) {\r\n\t\t\t\t\tskills.addArray(lib.character[i][3]);\r\n\t\t\t\t}\r\n\t\t\t\tif (!characterlist.length || !skills.length) {\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (player.isUnderControl()) {\r\n\t\t\t\t\tgame.swapPlayerAuto(player);\r\n\t\t\t\t}\r\n\t\t\t\tvar switchToAuto = function () {\r\n\t\t\t\t\t_status.imchoosing = false;\r\n\t\t\t\t\tevent._result = {\r\n\t\t\t\t\t\tbool: true,\r\n\t\t\t\t\t\tskills: skills.randomGets(2),\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (event.dialog) event.dialog.close();\r\n\t\t\t\t\tif (event.control) event.control.close();\r\n\t\t\t\t};\r\n\t\t\t\tvar chooseButton = function (list, skills) {\r\n\t\t\t\t\tvar event = _status.event;\r\n\t\t\t\t\tif (!event._result) event._result = {};\r\n\t\t\t\t\tevent._result.skills = [];\r\n\t\t\t\t\tvar rSkill = event._result.skills;\r\n\t\t\t\t\tvar dialog = ui.create.dialog(\"请获得两个技能\", [list, \"character\"], \"hidden\");\r\n\t\t\t\t\tevent.dialog = dialog;\r\n\t\t\t\t\tvar table = document.createElement(\"div\");\r\n\t\t\t\t\ttable.classList.add(\"add-setting\");\r\n\t\t\t\t\ttable.style.margin = \"0\";\r\n\t\t\t\t\ttable.style.width = \"100%\";\r\n\t\t\t\t\ttable.style.position = \"relative\";\r\n\t\t\t\t\tfor (var i = 0; i < skills.length; i++) {\r\n\t\t\t\t\t\tvar td = ui.create.div(\".shadowed.reduce_radius.pointerdiv.tdnode\");\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttd.link = skills[i];\r\n\t\t\t\t\t\ttable.appendChild(td);\r\n\t\t\t\t\t\ttd.innerHTML = \"<span>\" + get.translation(skills[i]) + \"</span>\";\r\n\t\t\t\t\t\ttd.addEventListener(lib.config.touchscreen ? \"touchend\" : \"click\", function () {\r\n\t\t\t\t\t\t\tif (_status.dragged) return;\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tif (_status.justdragged) return;\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t_status.tempNoButton = true;\r\n\t\t\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t_status.tempNoButton = false;\r\n\t\t\t\t\t\t\t}, 500);\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tvar link = this.link;\r\n\t\t\t\t\t\t\tif (!this.classList.contains(\"bluebg\")) {\r\n\t\t\t\t\t\t\t\tif (rSkill.length >= 2) return;\r\n\t\t\t\t\t\t\t\trSkill.add(link);\r\n\t\t\t\t\t\t\t\tthis.classList.add(\"bluebg\");\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.classList.remove(\"bluebg\");\r\n\t\t\t\t\t\t\t\trSkill.remove(link);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdialog.content.appendChild(table);\r\n\t\t\t\t\tdialog.add(\"　　\");\r\n\t\t\t\t\tdialog.open();\r\n\r\n\t\t\t\t\tevent.switchToAuto = function () {\r\n\t\t\t\t\t\tevent.dialog.close();\r\n\t\t\t\t\t\tevent.control.close();\r\n\t\t\t\t\t\tgame.resume();\r\n\t\t\t\t\t\t_status.imchoosing = false;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tevent.control = ui.create.control(\"ok\", function (link) {\r\n\t\t\t\t\t\tevent.dialog.close();\r\n\t\t\t\t\t\tevent.control.close();\r\n\t\t\t\t\t\tgame.resume();\r\n\t\t\t\t\t\t_status.imchoosing = false;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tfor (var i = 0; i < event.dialog.buttons.length; i++) {\r\n\t\t\t\t\t\tevent.dialog.buttons[i].classList.add(\"selectable\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgame.pause();\r\n\t\t\t\t\tgame.countChoose();\r\n\t\t\t\t};\r\n\t\t\t\tif (event.isMine()) {\r\n\t\t\t\t\tchooseButton(characterlist, skills);\r\n\t\t\t\t} else if (event.isOnline()) {\r\n\t\t\t\t\tevent.player.send(chooseButton, characterlist, skills);\r\n\t\t\t\t\tevent.player.wait();\r\n\t\t\t\t\tgame.pause();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tswitchToAuto();\r\n\t\t\t\t}\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tvar map = event.result || result;\r\n\t\t\t\tif (map && map.skills && map.skills.length) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tfor (var i of map.skills) player.addSkillLog(i);\r\n\t\t\t\t}\r\n\t\t\t\tgame.broadcastAll(function (list) {\r\n\t\t\t\t\tgame.expandSkills(list);\r\n\t\t\t\t\tfor (var i of list) {\r\n\t\t\t\t\t\tvar info = lib.skill[i];\r\n\t\t\t\t\t\tif (!info) continue;\r\n\t\t\t\t\t\tif (!info.audioname2) info.audioname2 = {};\r\n\t\t\t\t\t\tinfo.audioname2.old_yuanshu = \"weidi\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}, map.skills);\r\n\t\t\t},\r\n\t\t},\r\n\t\t//斯卡蒂\r\n\t\tgeyaomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseZhunbeiBegin\",\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst result = await player.draw(\"visible\").forResult();\r\n\t\t\t\tif (!result.cards) return;\r\n\t\t\t\tvar card = result.cards[0];\r\n\t\t\t\tif (get.type(card) == \"equip\") {\r\n\t\t\t\t\tplayer.addTempSkill(\"geyaomrfz_e\");\r\n\t\t\t\t}\r\n\t\t\t\tif (get.type(card) == \"trick\" || get.type(card) == \"delay\") {\r\n\t\t\t\t\tplayer.addTempSkill(\"geyaomrfz_t\");\r\n\t\t\t\t}\r\n\t\t\t\tif (get.type(card) == \"basic\") {\r\n\t\t\t\t\tplayer.addTempSkill(\"geyaomrfz_b\");\r\n\t\t\t\t}\r\n\t\t\t\tgame.log(player, \"展示了一张\", get.type(card), \"牌\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tgeyaomrfz_e: {\r\n\t\t\tmod: {\r\n\t\t\t\ttargetInRange: function (card, player, target, now) {\r\n\t\t\t\t\tif (card.name == \"sha\") return true;\r\n\t\t\t\t},\r\n\t\t\t\tselectTarget: function (card, player, range) {\r\n\t\t\t\t\tif (card.name == \"sha\" && range[1] != -1) range[1] = Infinity;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tcharlotte: true,\r\n\t\t},\r\n\t\tgeyaomrfz_t: {\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCard\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tcharlotte: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tdirectHit_ai: true,\r\n\t\t\t},\r\n\t\t},\r\n\t\tgeyaomrfz_b: {\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t},\r\n\t\t\tfrequent: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.card.name == \"sha\" && event.target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.target) < 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar color = get.color(trigger.card);\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.gainPlayerCard(trigger.target, \"h\", \"visible\")\r\n\t\t\t\t\t.set(\"color\", color)\r\n\t\t\t\t\t.set(\"filterButton\", function (button) {\r\n\t\t\t\t\t\tvar evt = _status.event;\r\n\t\t\t\t\t\treturn get.color(button.link, evt.target) != evt.color;\r\n\t\t\t\t\t});\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.logSkill(\"geyaomrfz\", trigger.target);\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhangenmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardAfter\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.countCards(\"h\") == 0) return false;\r\n\t\t\t\treturn event.card.name == \"sha\" && player.getHistory(\"sourceDamage\").length > 0;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.getCardUsable(\"sha\") == 0 &&\r\n\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\treturn card.name == \"sha\";\r\n\t\t\t\t\t}) > 0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.chooseToDiscard(\"h\", 1, true);\r\n\t\t\t\ttrigger.addCount = false;\r\n\t\t\t\tif (player.stat[player.stat.length - 1].card.sha > 0) {\r\n\t\t\t\t\tplayer.stat[player.stat.length - 1].card.sha--;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\t//缄默德克萨斯\r\n\t\tyushimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar num = 8 - game.roundNumber;\r\n\t\t\t\ttrigger.num = Math.max(3, num);\r\n\t\t\t},\r\n\t\t},\r\n\t\tlaoyingmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tusable: 1,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tevent.card &&\r\n\t\t\t\t\tevent.getParent(\"phaseUse\") &&\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tevent.getParent(\"phaseUse\").player == player &&\r\n\t\t\t\t\tget.itemtype(event.cards) == \"cards\" &&\r\n\t\t\t\t\tget.position(event.cards[0], true) == \"o\"\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.gain(trigger.cards, \"gain2\");\r\n\t\t\t\tvar cardu = { name: trigger.card.name, isCard: true };\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (get.type(cardu) == \"basic\") player.addTempSkill(\"laoyingmrfz_basic\");\r\n\t\t\t\telse player.addTempSkill(\"laoyingmrfz_trick\");\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tbasic: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num + 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttrick: {\r\n\t\t\t\t\taudio: \"laoyingmrfz\",\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn get.type2(event.card) == \"trick\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current != player;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tplayer.removeSkill(\"laoyingmrfz_trick\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t\t\treturn get.type2(arg.card) == \"trick\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//玛恩纳\r\n\t\txunlumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tgroup: [\"xunlumrfz_draw\", \"xunlumrfz_sha\", \"xunlumrfz_h\"],\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (storage, player, skill) {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\"数字：<span class=thundertext>\" +\r\n\t\t\t\t\t\tplayer.storage.xunlumrfz_draw +\r\n\t\t\t\t\t\t\"</span> <span class=firetext>\" +\r\n\t\t\t\t\t\tplayer.storage.xunlumrfz_sha +\r\n\t\t\t\t\t\t\"</span> <span class=greentext>\" +\r\n\t\t\t\t\t\tplayer.storage.xunlumrfz_h +\r\n\t\t\t\t\t\t\"</span></br>本回合杀的数量：\" +\r\n\t\t\t\t\t\tplayer.storage.xunlumrfz_sha2 +\r\n\t\t\t\t\t\t\"</br>本回合手牌上限：\" +\r\n\t\t\t\t\t\tplayer.storage.xunlumrfz_h2 +\r\n\t\t\t\t\t\t(player.storage.xunlumrfz2 ? \"</br>已修改【寻路】\" : \"\")\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tonremove: true,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.storage.xunlumrfz_draw + player.storage.xunlumrfz_sha + player.storage.xunlumrfz_h < 12) return true;\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar list = [\"蓝色\", \"红色\", \"绿色\"];\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseControl(list, \"cancel2\")\r\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"xunlumrfz\"))\r\n\t\t\t\t\t.set(\r\n\t\t\t\t\t\t\"prompt2\",\r\n\t\t\t\t\t\t\"令〖寻路〗中的一个数字+1</br>数字：<span class=thundertext>\" +\r\n\t\t\t\t\t\t\tplayer.storage.xunlumrfz_draw +\r\n\t\t\t\t\t\t\t\"</span> <span class=firetext>\" +\r\n\t\t\t\t\t\t\tplayer.storage.xunlumrfz_sha +\r\n\t\t\t\t\t\t\t\"</span> <span class=greentext>\" +\r\n\t\t\t\t\t\t\tplayer.storage.xunlumrfz_h +\r\n\t\t\t\t\t\t\t\"</span>\"\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\tif (player.storage.xunlumrfz_draw < 4) return 0;\r\n\t\t\t\t\t\tif (player.storage.xunlumrfz_draw == 4 && player.storage.xunlumrfz_sha < 4) return 1;\r\n\t\t\t\t\t\tif (player.storage.xunlumrfz_h < 4) return 2;\r\n\t\t\t\t\t\treturn 3;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (result.control != \"cancel2\") {\r\n\t\t\t\t\tif (result.control == \"蓝色\") {\r\n\t\t\t\t\t\tif (player.storage.xunlumrfz_draw < 4) {\r\n\t\t\t\t\t\t\tplayer.storage.xunlumrfz_draw++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (result.control == \"红色\") {\r\n\t\t\t\t\t\tif (player.storage.xunlumrfz_sha < 4) {\r\n\t\t\t\t\t\t\tplayer.storage.xunlumrfz_sha++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (result.control == \"绿色\") {\r\n\t\t\t\t\t\tif (player.storage.xunlumrfz_h < 4) {\r\n\t\t\t\t\t\t\tplayer.storage.xunlumrfz_h++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (result.control == \"修改【寻路】\") {\r\n\t\t\t\t\t\tif (!player.storage.xunlumrfz2) {\r\n\t\t\t\t\t\t\tplayer.storage.xunlumrfz2 = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplayer.markSkill(\"xunlumrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\t//m-n\r\n\t\t//Math.random()*(n-m)+m;\r\n\t\txunlumrfz_draw: {\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.xunlumrfz_draw = 1;\r\n\t\t\t\tplayer.syncStorage(\"xunlumrfz_draw\");\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tvar num = game.RDNbet(player.storage.xunlumrfz_draw, 6);\r\n\t\t\t\ttrigger.num = Math.min(num, 6);\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.logSkill(\"xunlumrfz\");\r\n\t\t\t\tplayer.chat(\"可出\" + player.storage.xunlumrfz_sha2 + \"张杀</br>手牌上限为：\" + player.storage.xunlumrfz_h2);\r\n\t\t\t},\r\n\t\t},\r\n\t\txunlumrfz_sha: {\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.xunlumrfz_sha = 0;\r\n\t\t\t\tplayer.syncStorage(\"xunlumrfz_sha\");\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tforced: true,\r\n\t\t\tcharlotte: true,\r\n\t\t\tfirstDo: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.addTempSkill(\"xunlumrfz_sha2\", {\r\n\t\t\t\t\tplayer: \"phaseZhunbeiBegin\",\r\n\t\t\t\t});\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.storage.xunlumrfz_sha2 = game.RDNbet(player.storage.xunlumrfz_sha, 5);\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.logSkill(\"xunlumrfz\");\r\n\t\t\t},\r\n\t\t},\r\n\t\txunlumrfz_sha2: {\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.xunlumrfz_sha2 = 0;\r\n\t\t\t\tplayer.syncStorage(\"xunlumrfz_sha2\");\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tif (card.name == \"sha\") return (num = Math.min(player.storage.xunlumrfz_sha2, 5));\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txunlumrfz_h: {\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.xunlumrfz_h = 3;\r\n\t\t\t\tplayer.syncStorage(\"xunlumrfz_h\");\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tforced: true,\r\n\t\t\tcharlotte: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.addTempSkill(\"xunlumrfz_h2\", {\r\n\t\t\t\t\tplayer: \"phaseZhunbeiBegin\",\r\n\t\t\t\t});\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.storage.xunlumrfz_h2 = game.RDNbet(player.storage.xunlumrfz_h, 8);\r\n\t\t\t},\r\n\t\t},\r\n\t\txunlumrfz_h2: {\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.xunlumrfz_h2 = 0;\r\n\t\t\t\tplayer.syncStorage(\"xunlumrfz_h2\");\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\treturn (num = player.storage.xunlumrfz_h2);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txunlumrfz2: {\r\n\t\t\tcharlotte: true,\r\n\t\t},\r\n\t\t//耀骑士临光\r\n\t\tzhuguangmrfz: {\r\n\t\t\tderivation: \"zhuguangmrfz_rewrite\",\r\n\t\t\taudio: 2,\r\n\t\t\taudioname: [\"linguangmrfz\"],\r\n\t\t\ttrigger: { player: \"phaseZhunbeiAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.zhuguangmrfz_change;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseTarget(\"选择一名其他角色，视为对其使用【决斗】\", function (card, player, target) {\r\n\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\treturn -get.attitude(_status.event.player, target);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tplayer.addSkill(\"zhuguangmrfz2\");\r\n\t\t\t\tif (result.bool && result.targets) {\r\n\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\tawait player.useCard({ name: \"juedou\" }, true, target);\r\n\t\t\t\t}\r\n\t\t\t\tif (player.hasSkill(\"zhuguangmrfz2\")) player.removeSkill(\"zhuguangmrfz2\");\r\n\t\t\t},\r\n\t\t\tgroup: \"zhuguangmrfz_change\",\r\n\t\t},\r\n\t\tzhuguangmrfz2: {\r\n\t\t\taudio: false,\r\n\t\t\tsilent: true,\r\n\t\t\ttrigger: { source: \"damageBegin2\" },\r\n\t\t\tfilter: function (event, player, card) {\r\n\t\t\t\treturn event.card.name == \"juedou\";\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\tif (!player.storage.zhuguangmrfz_change) return \"是否防止此伤害并选择一项\";\r\n\t\t\t\treturn \"是否发动【逐光】\";\r\n\t\t\t},\r\n\t\t\tfrequent: function (event, player) {\r\n\t\t\t\tif (!player.storage.zhuguangmrfz_change) return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (!player.storage.zhuguangmrfz_change) trigger.cancel();\r\n\t\t\t\tvar list = [];\r\n\t\t\t\tif (!player.storage.kuanmrfz && player.hasSkill(\"kuanmrfz\")) list.add(\"修改【苦暗】\");\r\n\t\t\t\tif (!player.storage.zhuguangmrfz_change) list.add(\"修改【逐光】\");\r\n\t\t\t\tif (!player.storage.zhuguangmrfz_change) list.add(\"摸一张牌\");\r\n\t\t\t\tif (player.storage.zhuguangmrfz_change) list.add(\"摸两张牌\");\r\n\r\n\t\t\t\t//判断是否只剩余一个选项\r\n\t\t\t\tif (list.length == 1) {\r\n\t\t\t\t\tplayer.draw(player.storage.zhuguangmrfz_change ? 2 : 1);\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"zhuguangmrfz\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlist.add(\"cancel2\");\r\n\t\t\t\t\tconst result = await player\r\n\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t.set(\"prompt\", get.prompt(\"zhuguangmrfz\"))\r\n\t\t\t\t\t\t.set(\"prompt2\", \"选择一项\")\r\n\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\tif (!player.storage.zhuguangmrfz_change) return 1;\r\n\t\t\t\t\t\t\tif (!player.storage.kuanmrfz && player.hasSkill(\"kuanmrfz\")) return 0;\r\n\t\t\t\t\t\t\treturn [0, 1].randomGet();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (result.control != \"cancel2\") {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"zhuguangmrfz\");\r\n\t\t\t\t\t\tif (result.control == \"修改【苦暗】\") {\r\n\t\t\t\t\t\t\tplayer.storage.kuanmrfz = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (result.control == \"修改【逐光】\") {\r\n\t\t\t\t\t\t\tplayer.storage.zhuguangmrfz_change = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (result.control == \"摸一张牌\") {\r\n\t\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (result.control == \"摸两张牌\") {\r\n\t\t\t\t\t\t\tplayer.draw(2);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhuguangmrfz_change: {\r\n\t\t\taudio: \"zhuguangmrfz\",\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.storage.zhuguangmrfz_change;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseTarget(\"选择一名其他角色，视为对其使用【决斗】，且此决斗不可响应\", function (card, player, target) {\r\n\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\treturn -get.attitude(_status.event.player, target);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tplayer.addSkill([\"zhuguangmrfz2\", \"zhuguangmrfz3\"]);\r\n\t\t\t\tif (result.bool && result.targets) {\r\n\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\tawait player.useCard({ name: \"juedou\", zhuguangmrfz: true }, true, target);\r\n\t\t\t\t}\r\n\t\t\t\tif (player.hasSkill(\"zhuguangmrfz2\")) player.removeSkill(\"zhuguangmrfz2\");\r\n\t\t\t\tif (player.hasSkill(\"zhuguangmrfz3\")) player.removeSkill(\"zhuguangmrfz3\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhuguangmrfz3: {\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCard\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tcharlotte: true,\r\n\t\t\tsilent: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\treturn event.card.name == \"juedou\" && event.card.zhuguangmrfz == true;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tdirectHit_ai: true,\r\n\t\t\t},\r\n\t\t},\r\n\t\tkuanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"gameDrawAfter\" },\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.disableEquip(\"equip1\");\r\n\t\t\t\tplayer.disableEquip(\"equip2\");\r\n\t\t\t\tplayer.disableEquip(\"equip3\");\r\n\t\t\t\tplayer.disableEquip(\"equip4\");\r\n\t\t\t\tplayer.disableEquip(\"equip5\");\r\n\t\t\t\tplayer.disableJudge();\r\n\t\t\t\tplayer.draw(3);\r\n\t\t\t},\r\n\t\t\tgroup: [\"kuanmrfz2\", \"kuanmrfz5\"],\r\n\t\t\tmod: {\r\n\t\t\t\tignoredHandcard: function (card, player) {\r\n\t\t\t\t\tif (get.type(card) == \"equip\") return true;\r\n\t\t\t\t},\r\n\t\t\t\tcardDiscardable: function (card, player, name) {\r\n\t\t\t\t\tif (name == \"phaseDiscard\" && get.type(card) == \"equip\") return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tkuanmrfz2: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseJudgeBefore\" },\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.kuanmrfz;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.judge(function (card) {\r\n\t\t\t\t\t\tif (get.suit(card) == \"heart\") return -2;\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (result.suit !== \"heart\") {\r\n\t\t\t\t\tplayer.skip(\"phaseUse\");\r\n\t\t\t\t\tgame.log(player, \"的<span class=thundertext>【乐不思蜀】</span>判定结果为\", result.suit, \",\", player, \"跳过出牌阶段\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgame.log(player, \"的<span class=thundertext>【乐不思蜀】</span>判定结果为\", result.suit, \",判定失败\");\r\n\t\t\t\t}\r\n\t\t\t\tconst result_bingliang = await player\r\n\t\t\t\t\t.judge(function (card) {\r\n\t\t\t\t\t\tif (get.suit(card) == \"club\") return -2;\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (result_bingliang.suit !== \"club\") {\r\n\t\t\t\t\tplayer.skip(\"phaseDraw\");\r\n\t\t\t\t\tgame.log(player, \"的<span class=thundertext>【兵粮寸断】</span>判定结果为\", result_bingliang.suit, \",\", player, \"跳过摸牌阶段\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgame.log(player, \"的<span class=thundertext>【兵粮寸断】</span>判定结果为\", result_bingliang.suit, \",判定失败\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tkuanmrfz5: {\r\n\t\t\taudio: \"kuanmrfz\",\r\n\t\t\tenable: [\"chooseToRespond\", \"chooseToUse\"],\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tevent.type == \"wuxie\" ||\r\n\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\treturn get.type(card) == \"equip\";\r\n\t\t\t\t\t}) == 0\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\tfor (var name of [\"sha\", \"shan\", \"jiu\"]) {\r\n\t\t\t\t\tif (event.filterCard({ name: name, isCard: true }, player, event)) return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tchooseButton: {\r\n\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\tvar vcards = [];\r\n\t\t\t\t\tfor (var name of [\"sha\", \"shan\", \"jiu\"]) {\r\n\t\t\t\t\t\tvar card = { name: name, isCard: true };\r\n\t\t\t\t\t\tif (event.filterCard(card, player, event)) vcards.push([\"基本\", \"\", name]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar dialog = ui.create.dialog(\"苦暗\", [vcards, \"vcard\"], \"hidden\");\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tdialog.direct = true;\r\n\t\t\t\t\treturn dialog;\r\n\t\t\t\t},\r\n\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tfilterCard: function (card) {\r\n\t\t\t\t\t\t\treturn get.type(card) == \"equip\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tselectCard: 1,\r\n\t\t\t\t\t\tviewAs: {\r\n\t\t\t\t\t\t\tname: links[0][2],\r\n\t\t\t\t\t\t\tisCard: false,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t\tasync precontent(event, trigger, player) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"kuanmrfz\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\treturn \"【苦暗】：使用一张【\" + get.translation(links[0][2]) + \"】\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 3,\r\n\t\t\t\trespondSha: true,\r\n\t\t\t\trespondShan: true,\r\n\t\t\t},\r\n\t\t},\r\n\t\tshuoguangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseDiscardBefore\" },\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.shuoguangmrfz;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t\tplayer.storage.shuoguangmrfz = true;\r\n\t\t\t},\r\n\t\t},\r\n\t\t//凯尔希\r\n\t\tyuanlvemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"drawBegin\" },\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\treturn event.getParent(1) && event.getParent(1).name != \"yuanlvemrfz\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet num = 0;\r\n\t\t\t\tif (!player.storage.yuanshimrfz || player.storage.yuanshimrfz_gain) {\r\n\t\t\t\t\tnum = trigger.num;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnum = trigger.num + 1;\r\n\t\t\t\t}\r\n\t\t\t\tif (trigger.parent && trigger.parent.name !== \"phaseDraw\") {\r\n\t\t\t\t\tplayer.chooseToGuanxing(num);\r\n\t\t\t\t\tplayer.draw(num);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.chooseToGuanxing(num + 1);\r\n\t\t\t\t\tplayer.draw(num + 1);\r\n\t\t\t\t}\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t},\r\n\t\t},\r\n\t\tchonggoumrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"已修改【重构】。\",\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.getDamagedHp() == 0 && !player.storage.chonggoumrfz) return false;\r\n\t\t\t\treturn player.countCards(\"h\") >= player.hp;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.chooseToDiscard(\"h\", player.countCards(\"h\"), true);\r\n\t\t\t\tif (!player.storage.chonggoumrfz) {\r\n\t\t\t\t\tplayer.draw(player.countCards(\"h\") - player.getDamagedHp());\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.draw(player.countCards(\"h\"));\r\n\t\t\t\t}\r\n\t\t\t\tplayer.recover();\r\n\t\t\t},\r\n\t\t},\r\n\t\tyuanshimrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"令【远略】中的X+1。\",\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\taudio: 3,\r\n\t\t\tdirect: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (event.name != \"phase\" || game.phaseNumber == 0) && player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar hs = player.getCards(\"h\");\r\n\t\t\t\tif (hs.length) player.addGaintag(hs, \"yuanshimrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"yuanshimrfz_basic\", \"yuanshimrfz_equip\", \"yuanshimrfz_trick\", \"yuanshimrfz_gain\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tbasic: {\r\n\t\t\t\t\taudio: \"yuanshimrfz\",\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCard\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: \"是否令此牌不可响应\",\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\tif (event.card.name == \"sha\") return true;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (get.type(event.card) !== \"basic\") return false;\r\n\t\t\t\t\t\treturn player.hasHistory(\"lose\", function (evt) {\r\n\t\t\t\t\t\t\tif (event != evt.getParent()) return false;\r\n\t\t\t\t\t\t\tfor (var i in evt.gaintag_map) {\r\n\t\t\t\t\t\t\t\tif (evt.gaintag_map[i].includes(\"yuanshimrfz\")) return true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (!player.storage.yuanshimrfz_gain) player.storage.yuanshimrfz_gain = true;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current != player;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tequip: {\r\n\t\t\t\t\taudio: \"yuanshimrfz\",\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tprompt: \"是否摸一张牌\",\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (get.type(event.card) !== \"equip\" && get.type(event.card) !== \"delay\") return false;\r\n\t\t\t\t\t\treturn player.hasHistory(\"lose\", function (evt) {\r\n\t\t\t\t\t\t\tif (event != evt.getParent()) return false;\r\n\t\t\t\t\t\t\tfor (var i in evt.gaintag_map) {\r\n\t\t\t\t\t\t\t\tif (evt.gaintag_map[i].includes(\"yuanshimrfz\")) return true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (!player.storage.yuanshimrfz_gain) player.storage.yuanshimrfz_gain = true;\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttrick: {\r\n\t\t\t\t\taudio: \"yuanshimrfz\",\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tprompt: function (event, player) {\r\n\t\t\t\t\t\treturn \"是否令\" + get.translation(event.card) + \"的目标+1/-1\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (get.type(event.card) !== \"trick\") return false;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn player.hasHistory(\"lose\", function (evt) {\r\n\t\t\t\t\t\t\tif (event != evt.getParent()) return false;\r\n\t\t\t\t\t\t\tfor (var i in evt.gaintag_map) {\r\n\t\t\t\t\t\t\t\tif (evt.gaintag_map[i].includes(\"yuanshimrfz\")) return true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (!player.storage.yuanshimrfz_gain) player.storage.yuanshimrfz_gain = true;\r\n\t\t\t\t\t\tvar prompt2 = \"为\" + get.translation(trigger.card) + \"增加或减少一个目标\";\r\n\t\t\t\t\t\tconst result = await player\r\n\t\t\t\t\t\t\t.chooseTarget(get.prompt(\"yuanshimrfz\"), function (card, player, target) {\r\n\t\t\t\t\t\t\t\tvar playerx = get.player();\r\n\t\t\t\t\t\t\t\tif (_status.event.targets.includes(target)) return true;\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\tlib.filter.targetEnabled2(_status.event.card, playerx, target) &&\r\n\t\t\t\t\t\t\t\t\tlib.filter.targetInRange(_status.event.card, playerx, target)\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"prompt2\", prompt2)\r\n\t\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\tvar trigger = _status.event.getTrigger();\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\treturn get.effect(target, trigger.card, player, player) * (_status.event.targets.includes(target) ? -1 : 1);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"targets\", trigger.targets)\r\n\t\t\t\t\t\t\t.set(\"card\", trigger.card)\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\tplayer.line(result.targets);\r\n\t\t\t\t\t\t\tif (trigger.targets.includes(event.targets[0])) trigger.targets.removeArray(event.targets);\r\n\t\t\t\t\t\t\telse trigger.targets.addArray(event.targets);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tgain: {\r\n\t\t\t\t\taudio: \"yuanshimrfz\",\r\n\t\t\t\t\ttrigger: { player: \"loseAfter\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.storage.yuanshimrfz || player.storage.chonggoumrfz) return false;\r\n\t\t\t\t\t\treturn !player.hasCard(function (card) {\r\n\t\t\t\t\t\t\treturn card.hasGaintag(\"yuanshimrfz\");\r\n\t\t\t\t\t\t}, \"h\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (!player.storage.yuanshimrfz_gain) {\r\n\t\t\t\t\t\t\tplayer.storage.yuanshimrfz = true;\r\n\t\t\t\t\t\t\tplayer.markSkill(\"yuanshimrfz\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tplayer.storage.chonggoumrfz = true;\r\n\t\t\t\t\t\t\tplayer.markSkill(\"chonggoumrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tm3mrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"dying\",\r\n\t\t\t},\r\n\t\t\tzhuSkill: true,\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationColor: \"red\",\r\n\t\t\tmark: true,\r\n\t\t\tunique: true,\r\n\t\t\tlimited: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.hp > 0) return false;\r\n\t\t\t\treturn !player.storage.m3mrfz;\r\n\t\t\t},\r\n\t\t\tinit: (player, skill) => (player.storage[skill] = false),\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tvar num = player.countCards(\"h\", function (card) {\r\n\t\t\t\t\treturn card.name == \"tao\" || card.name == \"jiu\";\r\n\t\t\t\t});\r\n\t\t\t\treturn player.hp + num <= 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.awakenSkill(\"m3mrfz\");\r\n\t\t\t\tplayer.removeSkill(\"chonggoumrfz\");\r\n\t\t\t\tplayer.discard(player.getCards(\"hej\"));\r\n\t\t\t\tplayer.recoverTo(2);\r\n\t\t\t\tplayer.storage.m3mrfz = true;\r\n\t\t\t\tplayer.loseMaxHp();\r\n\t\t\t\tplayer.turnOver(false);\r\n\t\t\t\tplayer.link(false);\r\n\r\n\t\t\t\tlet targets = game.players.slice().remove(player);\r\n\r\n\t\t\t\tfor (let target of targets) {\r\n\t\t\t\t\tconst result = await target\r\n\t\t\t\t\t\t.chooseToDiscard(`【m3】:你可以弃置一张牌并令${get.translation(player)}摸一张牌`)\r\n\t\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\t\tconst player = get.player();\r\n\t\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t\t * @type {Player}\r\n\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tconst targetx = get.event().targetx;\r\n\t\t\t\t\t\t\tif (get.attitude(player, targetx) < 0) return -1;\r\n\t\t\t\t\t\t\treturn 114514 - get.value(card);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"targetx\", player)\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (result.cards) {\r\n\t\t\t\t\t\ttarget.line(player);\r\n\t\t\t\t\t\tawait player.draw();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\t//山\r\n\t\tzhuangtimrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"已造成#点伤害\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.maxHp < 15;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tawait player.addMark(\"zhuangtimrfz\", trigger.num);\r\n\t\t\t\tvar damage = player.countMark(\"zhuangtimrfz\");\r\n\t\t\t\tif (damage > 1) {\r\n\t\t\t\t\tplayer.gainMaxHp(Math.floor(damage / 2));\r\n\t\t\t\t\tplayer.removeMark(\"zhuangtimrfz\", Math.floor(damage / 2) * 2);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhuangtimrfz_use\", \"zhuangtimrfz_draw\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tuse: {\r\n\t\t\t\t\taudio: \"zhuangtimrfz\",\r\n\t\t\t\t\tusable: 1,\r\n\t\t\t\t\tenable: \"phaseUse\",\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tfor (var i of lib.inpile) {\r\n\t\t\t\t\t\t\tif (get.type(i) == \"trick\" && event.filterCard({ name: i, isCard: true }, player, event)) return true;\r\n\t\t\t\t\t\t\tif (get.type(i) == \"basic\" && event.filterCard({ name: i, isCard: true }, player, event)) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tchooseButton: {\r\n\t\t\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\t\t\tvar list = [];\r\n\t\t\t\t\t\t\tfor (var i of lib.inpile) {\r\n\t\t\t\t\t\t\t\tif (get.type(i) == \"trick\" && event.filterCard({ name: i, isCard: true }, player, event)) list.push([\"锦囊\", \"\", i]);\r\n\t\t\t\t\t\t\t\tif (get.type(i) == \"basic\" && event.filterCard({ name: i, isCard: true }, player, event)) list.push([\"基本\", \"\", i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn ui.create.dialog(\"壮体\", [list, \"vcard\"]);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcheck: function (button) {\r\n\t\t\t\t\t\t\treturn _status.event.player.getUseValue({\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tname: button.link[2],\r\n\t\t\t\t\t\t\t\tisCard: true,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tviewAs: {\r\n\t\t\t\t\t\t\t\t\tname: links[0][2],\r\n\t\t\t\t\t\t\t\t\tisCard: true,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfilterCard: () => false,\r\n\t\t\t\t\t\t\t\tselectCard: -1,\r\n\t\t\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t\t\t\tasync precontent(event, trigger, player) {\r\n\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\tplayer.logSkill(\"zhuangtimrfz\");\r\n\t\t\t\t\t\t\t\t\tplayer.loseMaxHp();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\t\t\treturn \"请选择\" + get.translation(links[0][2]) + \"的目标\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: { order: 1, result: { player: 1 } },\r\n\t\t\t\t},\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\taudio: \"zhuangtimrfz\",\r\n\t\t\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\treturn player.hp < 3;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tpromt: function (event, player) {\r\n\t\t\t\t\t\treturn \"是否失去\" + player.getDamagedHp() + \"点体力上限，摸\" + Math.ceil(player.getDamagedHp() / 2) + \"张牌。\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar num = player.getDamagedHp();\r\n\t\t\t\t\t\tplayer.loseMaxHp(num);\r\n\t\t\t\t\t\tplayer.draw(Math.ceil(num / 2));\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tjulimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.getDamagedHp() >= event.player.hp;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.player) < 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.num++;\r\n\t\t\t\tvar card = trigger.player.countCards(\"he\");\r\n\t\t\t\tif (player.maxHp >= card) {\r\n\t\t\t\t\tconst result = await player\r\n\t\t\t\t\t\t.chooseControl(\"确定\", \"cancel2\")\r\n\t\t\t\t\t\t.set(\"prompt\", \"是否失去两点体力上限，令此伤害+1\")\r\n\t\t\t\t\t\t.set(\"ai\", function (event, player) {\r\n\t\t\t\t\t\t\tif (get.attitude(player, event.player) < 0 && player.maxHp >= 3) return 0;\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (result.control !== \"cancel2\") {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t\tplayer.loseMaxHp(2);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//歌蕾蒂亚\r\n\t\txunxiangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tusable: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.hasSkill(\"xunxiangmrfz2\")) return false;\r\n\t\t\t\treturn game.hasPlayer(current => current.countCards(\"h\") > 0);\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tselectTarget: -1,\r\n\t\t\tmultitarget: true,\r\n\t\t\tmultiline: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { targets } = event;\r\n\t\t\t\tvar num = [3, 1, 2].randomGet();\r\n\t\t\t\tif (num == 1) player.storage.xunxiangmrfz = \"basic\";\r\n\t\t\t\tif (num == 2) player.storage.xunxiangmrfz = \"trick\";\r\n\t\t\t\tif (num == 3) player.storage.xunxiangmrfz = \"equip\";\r\n\t\t\t\tgame.log(\"<span class=thundertext>【寻相】</span>随机的类型为<span class=firetext>\", player.storage.xunxiangmrfz, \"牌</span>\");\r\n\t\t\t\tplayer.popup(get.translation(player.storage.xunxiangmrfz) + \"牌\");\r\n\t\t\t\ttargets.sortBySeat();\r\n\t\t\t\tvar next = player\r\n\t\t\t\t\t.chooseCardOL(targets, \"请选择要展示的牌\", true)\r\n\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\treturn -get.value(card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"source\", player);\r\n\t\t\t\tnext.aiCard = function (target) {\r\n\t\t\t\t\tvar hs = target.getCards(\"h\");\r\n\t\t\t\t\treturn { bool: true, cards: [hs.randomGet()] };\r\n\t\t\t\t};\r\n\t\t\t\tnext._args.remove(\"glow_result\");\r\n\r\n\t\t\t\tawait next;\r\n\r\n\t\t\t\tvar cards = [];\r\n\t\t\t\tvar num = 0;\r\n\t\t\t\tconst result = next.forResult();\r\n\t\t\t\tevent.videoId = lib.status.videoId++;\r\n\t\t\t\tfor (var i = 0; i < targets.length; i++) {\r\n\t\t\t\t\tcards.push(result[i].cards[0]);\r\n\t\t\t\t}\r\n\t\t\t\tevent.cards = cards;\r\n\t\t\t\tgame.log(player, \"展示了\", targets, \"的\", cards);\r\n\t\t\t\tgame.broadcastAll(\r\n\t\t\t\t\tfunction (targets, cards, id, player) {\r\n\t\t\t\t\t\tvar dialog = ui.create.dialog(\r\n\t\t\t\t\t\t\tget.translation(player) +\r\n\t\t\t\t\t\t\t\t\"发动了【寻相】</br><span class=firetext>【寻相】随机声明的类型为\" +\r\n\t\t\t\t\t\t\t\tget.translation(player.storage.xunxiangmrfz) +\r\n\t\t\t\t\t\t\t\t\"牌</span>\",\r\n\t\t\t\t\t\t\tcards\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tdialog.videoId = id;\r\n\t\t\t\t\t\tvar getName = function (target) {\r\n\t\t\t\t\t\t\tif (target._tempTranslate) return target._tempTranslate;\r\n\t\t\t\t\t\t\tvar name = target.name;\r\n\t\t\t\t\t\t\tif (lib.translate[name + \"_ab\"]) return lib.translate[name + \"_ab\"];\r\n\t\t\t\t\t\t\treturn get.translation(name);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tfor (var i = 0; i < targets.length; i++) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tdialog.buttons[i].querySelector(\".info\").innerHTML = getName(targets[i]);\r\n\t\t\t\t\t\t\tif (get.type(result[i].cards[0]) == player.storage.xunxiangmrfz) num++;\r\n\t\t\t\t\t\t\tif (get.type(result[i].cards[0]) == \"delay\" && player.storage.xunxiangmrfz == \"trick\") num++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttargets,\r\n\t\t\t\t\tcards,\r\n\t\t\t\t\tevent.videoId,\r\n\t\t\t\t\tplayer\r\n\t\t\t\t);\r\n\t\t\t\tgame.delay(4);\r\n\t\t\t\tif (num == 0) {\r\n\t\t\t\t\tconst result = await player\r\n\t\t\t\t\t\t.chooseTarget(\"选择一名其他角色，你与其各流失一点体力\", true, function (card, player, target) {\r\n\t\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"ai\", target => get.attitude(player, target) < 2)\r\n\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\tplayer.loseHp();\r\n\t\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\t\ttarget.loseHp();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.addTempSkill(\"xunxiangmrfz2\", \"phaseUseEnd\");\r\n\t\t\t\t\tplayer.draw(num);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tgame.broadcastAll(\"closeDialog\", event.videoId);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 12,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 5,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txunxiangmrfz2: {\r\n\t\t\t//检测用技能，无实际意义。\r\n\t\t},\r\n\t\tronghangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\tforced: true,\r\n\t\t\tgetLastUsed: function (player, event) {\r\n\t\t\t\tvar history = player.getAllHistory(\"useCard\");\r\n\t\t\t\tvar index;\r\n\t\t\t\tif (event) index = history.indexOf(event) - 1;\r\n\t\t\t\telse index = history.length - 1;\r\n\t\t\t\tif (index >= 0) return history[index];\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar evtcard = event.card;\r\n\t\t\t\tvar evt = lib.skill.ronghangmrfz.getLastUsed(player, event);\r\n\t\t\t\tif (!evt.card || !evt) return false;\r\n\t\t\t\treturn get.tag(evtcard, \"damage\") > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar lastcard = lib.skill.ronghangmrfz.getLastUsed(player, trigger);\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (get.cardNameLength(lastcard.card) < get.cardNameLength(trigger.card)) {\r\n\t\t\t\t\ttrigger.baseDamage++;\r\n\t\t\t\t\tplayer.popup(\"伤害基数+1\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar name = get.name(trigger.card);\r\n\t\t\t\t\tif (name == \"sha\") {\r\n\t\t\t\t\t\ttrigger.addCount = false;\r\n\t\t\t\t\t\tif (player.stat[player.stat.length - 1].card.sha > 0) {\r\n\t\t\t\t\t\t\tplayer.stat[player.stat.length - 1].card.sha--;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (name == \"jiu\") {\r\n\t\t\t\t\t\ttrigger.addCount = false;\r\n\t\t\t\t\t\tif (player.stat[player.stat.length - 1].card.jiu > 0) {\r\n\t\t\t\t\t\t\tplayer.stat[player.stat.length - 1].card.jiu--;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn current != player;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t);\r\n\t\t\t\t\tplayer.popup(\"强中且无限制\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\tvar evtcard = lib.skill.ronghangmrfz.getLastUsed(player, event);\r\n\t\t\t\t\treturn get.cardNameLength(evtcard) >= get.cardNameLength(arg.card);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tjingsimrfz: {\r\n\t\t\tonremove: true,\r\n\t\t\tintro: { content: \"已使用的牌：$\" },\r\n\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\taudio: 2,\r\n\t\t\tfrequent: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.getStorage(\"jingsimrfz\").includes(event.card.name);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.draw();\r\n\t\t\t\tplayer.markAuto(\"jingsimrfz\", [trigger.card.name]);\r\n\t\t\t},\r\n\t\t},\r\n\t\t//旧星熊\r\n\t\tbanruomrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\tonremove: true,\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.banruomrfz = true;\r\n\t\t\t\tplayer.syncStorage(\"banruomrfz\");\r\n\t\t\t},\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (storage, player, skill) {\r\n\t\t\t\t\tif (player.storage.banruomrfz) return \"星熊的巨盾将会保护她和她想保护的人\";\r\n\t\t\t\t\treturn \"盾牌破损，但她并未后退\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\ttrigger: { player: \"damageBegin3\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.storage.banruomrfz;\r\n\t\t\t},\r\n\t\t\tprompt: \"是否取消此次伤害\",\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcardBase: function (player, num) {\r\n\t\t\t\t\tif (player.storage.banruomrfz) return player.maxHp;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"banruomrfz_lose\", \"banruomrfz_draw\", \"banruomrfz_round\", \"banruomrfz_atk\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tlose: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.storage.banruomrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.banruomrfz = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.storage.banruomrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num--;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tround: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn game.roundNumber > player.maxHp && player.storage.banruomrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.banruomrfz = false;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"banruomrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tatk: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn !player.storage.banruomrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeSkill(\"banruomrfz_atk\");\r\n\t\t\t\t\t\tplayer.addSkill(\"banruomrfz2\");\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"banruomrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget: function (card, player, target, current) {\r\n\t\t\t\t\t\tif (!player.storage.banruomrfz) return;\r\n\t\t\t\t\t\tif (get.tag(card, \"damage\")) return \"zerotarget\";\r\n\t\t\t\t\t\tif (get.type(card) == \"trick\" && get.tag(card, \"damage\")) {\r\n\t\t\t\t\t\t\treturn \"zeroplayertarget\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tbanruomrfz2: {\r\n\t\t\tmark: true,\r\n\t\t\tonremove: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"星熊放下了她的盾\",\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tif (card.name == \"sha\") return (num += 1);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"banruomrfz2_damage\", \"banruomrfz2_lose\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tusable: 1,\r\n\t\t\t\t\ttrigger: { source: \"damageBegin\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"banruomrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tlose: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeSkill(\"banruomrfz2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tyizhongmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"damageBegin3\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn get.distance(player, event.player) <= 1 && event.player != player && player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.player) > 0;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"是否弃置一张牌并为\" + get.translation(event.player) + \"承担伤害\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.chooseToDiscard(true, \"he\");\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t\tplayer.damage(trigger.num, trigger.source || \"nosource\", \"nocard\");\r\n\t\t\t},\r\n\t\t\tgroup: \"yizhongmrfz2\",\r\n\t\t},\r\n\t\tyizhongmrfz2: {\r\n\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\tfirstDo: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.parent && event.parent.name == \"yizhongmrfz\";\r\n\t\t\t},\r\n\t\t\tprompt: \"是否摸两张牌\",\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.draw(2);\r\n\t\t\t},\r\n\t\t},\r\n\t\t//卡涅利安\r\n\t\tshazhenmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\tmark: true,\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.shazhenmrfz = false;\r\n\t\t\t\tplayer.syncStorage(\"shazhenmrfz\");\r\n\t\t\t},\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (storage, player, skill) {\r\n\t\t\t\t\tif (!player.storage.shazhenmrfz || game.roundNumber == 1)\r\n\t\t\t\t\t\treturn \"沙暴环绕着卡涅利安</br>【沙阵】剩余次数：\" + (2 - player.countMark(\"shazhenmrfz_damage\"));\r\n\t\t\t\t\treturn \"沙暴散去\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\ttrigger: { player: \"damageBegin3\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (game.roundNumber == 1 || !player.storage.shazhenmrfz) && player.countMark(\"shazhenmrfz_damage\") < 2;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.num--;\r\n\t\t\t\tplayer.addMark(\"shazhenmrfz_damage\", 1);\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcardBase: function (player, num) {\r\n\t\t\t\t\tif (!player.storage.shazhenmrfz) return (num += 2);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"shazhenmrfz_damage\", \"shazhenmrfz_clear\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn !event.player.hasMark(\"shacanmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.shazhenmrfz = true;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.storage.shazhenmrfz || player.countMark(\"shazhenmrfz_damage\") > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.shazhenmrfz = false;\r\n\t\t\t\t\t\tplayer.removeMark(\"shazhenmrfz_damage\", player.countMark(\"shazhenmrfz_damage\"));\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshacanmrfz: {\r\n\t\t\tmarktext: \"噬\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"噬\",\r\n\t\t\t\tcontent: function (storage, player, skill) {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\"<span class=firetext>食噬之印</span></br>还需交给卡涅利安\" +\r\n\t\t\t\t\t\t(2 - player.countMark(\"shacanmrfz2\")) +\r\n\t\t\t\t\t\t\"张牌即可消除一个‘噬’标记\"\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\taudio: 2,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.player.isAlive() && event.player.countMark(\"shacanmrfz\") < 2;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"是否令\" + get.translation(event.player) + \"获得一个‘噬’标记\";\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.player) <= 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.player.addMark(\"shacanmrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"shacanmrfz_remove\", \"shacanmrfz_gain\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tremove: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"gainEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.source && event.source.isAlive() && event.source != player && event.source.hasMark(\"shacanmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlogTarget: \"source\",\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar target = trigger.source;\r\n\t\t\t\t\t\tvar num = target.countMark(\"shacanmrfz2\");\r\n\t\t\t\t\t\ttarget.addMark(\"shacanmrfz2\", trigger.cards.length, false);\r\n\t\t\t\t\t\tif (num > 1) {\r\n\t\t\t\t\t\t\ttarget.removeMark(\"shacanmrfz\", Math.floor(num / 2));\r\n\t\t\t\t\t\t\ttarget.removeMark(\"shacanmrfz2\", Math.floor(num / 2) * 2);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tgain: {\r\n\t\t\t\t\ttrigger: { global: \"phaseUseBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.hasMark(\"shacanmrfz\") && (player.getDamagedHp() > 0 || event.player.countCards(\"he\") > 0);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar target = trigger.player;\r\n\t\t\t\t\t\tvar list = [];\r\n\t\t\t\t\t\tif (player.getDamagedHp() > 0) list.add(\"回血\");\r\n\t\t\t\t\t\tif (target.countCards(\"he\") > 0) list.add(\"交牌\");\r\n\t\t\t\t\t\tconst result = await target\r\n\t\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t\t.set(\"prompt\", \"选择一项\")\r\n\t\t\t\t\t\t\t.set(\"ai\", function (player) {\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (result.control == \"cancel2\") event.finish();\r\n\t\t\t\t\t\tif (result.control == \"回血\") {\r\n\t\t\t\t\t\t\tplayer.recover();\r\n\t\t\t\t\t\t\ttarget.removeMark(\"shacanmrfz\");\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"shacanmrfz\");\r\n\t\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (result.control == \"交牌\") {\r\n\t\t\t\t\t\t\tconst resultx = await target\r\n\t\t\t\t\t\t\t\t.chooseCard(target.countCards(\"he\") > 1 ? 2 : 1, \"展示两张牌\", true, \"he\")\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\t\t\treturn get.value(card);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\tif (resultx.bool && resultx.cards && resultx.cards.length) {\r\n\t\t\t\t\t\t\t\tif (resultx.cards.length == 1) {\r\n\t\t\t\t\t\t\t\t\tplayer.gain(resultx.cards, target, \"give\");\r\n\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\tplayer.logSkill(\"shacanmrfz\");\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tconst resulty = await player\r\n\t\t\t\t\t\t\t\t\t\t.chooseButton([\"选择获得其中的一张牌\", result.cards], true)\r\n\t\t\t\t\t\t\t\t\t\t.set(\"ai\", button => get.value(button.link))\r\n\t\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\t\t\tplayer.gain(result.links, target, \"give\");\r\n\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\tplayer.logSkill(\"shacanmrfz\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshacanmrfz2: {\r\n\t\t\t//检测用技能，无实际意义\r\n\t\t},\r\n\t\tshahuanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && target.countMark(\"shacanmrfz\") < 1;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tevent.target.addMark(\"shacanmrfz\");\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 10,\r\n\t\t\t\texpose: 0.4,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: -1,\r\n\t\t\t\t},\r\n\t\t\t\tthreaten: 2,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//陈\r\n\t\tdanweimrfz: {\r\n\t\t\tonremove: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"已有#个胆\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tusable: 2,\r\n\t\t\ttrigger: { global: [\"respond\", \"useCard\"] },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!event.respondTo) return false;\r\n\t\t\t\tif (player != event.respondTo[0]) return false;\r\n\t\t\t\treturn event.cards.filterInD(\"o\").filterInD(\"d\").length > 0;\r\n\t\t\t},\r\n\t\t\tlogTarget: \"player\",\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar cards = trigger.cards.filterInD(\"o\").filterInD(\"d\");\r\n\t\t\t\tplayer.gain(cards, \"log\", \"gain2\");\r\n\t\t\t\tplayer.addMark(\"danweimrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"danweimrfz_use\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tuse: {\r\n\t\t\t\t\taudio: \"danweimrfz\",\r\n\t\t\t\t\ttrigger: { player: [\"respond\", \"useCard\"] },\r\n\t\t\t\t\tusable: 2,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!event.respondTo) return false;\r\n\t\t\t\t\t\treturn event.cards.filterInD(\"o\").filterInD(\"d\").length > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlogTarget: \"player\",\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar cards = [];\r\n\t\t\t\t\t\tif (get.itemtype(trigger.respondTo[1]) == \"card\") cards.push(trigger.respondTo[1]);\r\n\t\t\t\t\t\telse if (trigger.respondTo[1].cards) cards.addArray(trigger.respondTo[1].cards);\r\n\t\t\t\t\t\tcards = cards.filterInD(\"o\").filterInD(\"d\");\r\n\t\t\t\t\t\tplayer.gain(cards, \"gain2\", \"log\");\r\n\t\t\t\t\t\tplayer.addMark(\"danweimrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thechimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tselectTarget: 1,\r\n\t\t\tfilterTarget: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"danweimrfz\") > 0 || player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { target } = event;\r\n\r\n\t\t\t\tlet result;\r\n\t\t\t\tif (player.countCards(\"h\") == 0) result = { index: 1 };\r\n\t\t\t\tif (player.countMark(\"danweimrfz\") == 0) result = { index: 0 };\r\n\t\t\t\tif (player.countMark(\"danweimrfz\") > 0 && player.countCards(\"h\") > 0)\r\n\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t.chooseControl()\r\n\t\t\t\t\t\t.set(\"choiceList\", [\r\n\t\t\t\t\t\t\t\"弃置一张手牌\", //0\r\n\t\t\t\t\t\t\t\"失去一个‘胆’\", //1\r\n\t\t\t\t\t\t])\r\n\t\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tplayer.hasCard(function (card) {\r\n\t\t\t\t\t\t\t\t\treturn get.value(card) < 7;\r\n\t\t\t\t\t\t\t\t}, \"h\")\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\tif (result && result.index == 0) {\r\n\t\t\t\t\tawait player.chooseToDiscard(true, \"h\", \"弃置一张手牌\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.removeMark(\"danweimrfz\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!target.hasSkill(\"hechimrfz2\")) target.addSkill(\"hechimrfz2\");\r\n\t\t\t\ttarget.addMark(\"hechimrfz2\");\r\n\t\t\t\ttarget.draw(2);\r\n\t\t\t\tif (target != player) player.draw();\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t},\r\n\t\t},\r\n\t\thechimrfz2: {\r\n\t\t\tonremove: true,\r\n\t\t\tmark: true,\r\n\t\t\tmarktext: \"斥\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"呵斥\",\r\n\t\t\t\tcontent: \"受到了陈的*龙门粗口*，手牌上限-#\",\r\n\t\t\t},\r\n\t\t\ttrigger: { player: \"phaseDiscardEnd\" },\r\n\t\t\tforced: true,\r\n\t\t\tcharlotte: true,\r\n\t\t\tsilent: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.removeMark(\"hechimrfz2\", player.countMark(\"hechimrfz2\"));\r\n\t\t\t\tplayer.removeSkill(\"hechimrfz2\");\r\n\t\t\t\t//@ts-ignore 彩蛋\r\n\t\t\t\tif (Math.random() < 0.1) player.logSkill(\"chencaidanmrfz\");\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcardBase: function (player, num) {\r\n\t\t\t\t\treturn (num -= player.countMark(\"hechimrfz2\"));\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tjueyingmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"danweimrfz\") >= 5;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.removeMark(\"danweimrfz\", 5);\r\n\r\n\t\t\t\tlet num = 0;\r\n\t\t\t\twhile (num < 2) {\r\n\t\t\t\t\tawait player.chooseUseTarget(\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\t\tnature: \"thunder\",\r\n\t\t\t\t\t\t\tisCard: true,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\"请选择雷【杀】的目标（雷【杀】：\" + num + \"/2；普通【杀】:0/1）\",\r\n\t\t\t\t\t\tfalse,\r\n\t\t\t\t\t\t\"nodistance\"\r\n\t\t\t\t\t);\r\n\t\t\t\t\tnum++;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tplayer.chooseUseTarget(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\tisCard: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"请选择【杀】的目标（雷【杀】：2/2；普通【杀】:1/1）\",\r\n\t\t\t\t\tfalse,\r\n\t\t\t\t\t\"nodistance\"\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\tchencaidanmrfz: {\r\n\t\t\t//彩蛋\r\n\t\t\taudio: 3,\r\n\t\t},\r\n\t\tnewjingsimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tzhuSkill: true,\r\n\t\t\ttrigger: { global: \"useCardToTarget\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.hasSkill(\"newjingsimrfz_ban\")) return false;\r\n\t\t\t\tif (event.targets.length > 1) return false;\r\n\t\t\t\tif (event.player == player || event.target == player || event.source == player || player == _status.currentPhase) return false;\r\n\t\t\t\treturn event.card.name == \"sha\" || event.card.name == \"juedou\";\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar target = trigger.target,\r\n\t\t\t\t\tcard = trigger.card;\r\n\t\t\t\tconst result = await target\r\n\t\t\t\t\t.chooseBool(\"【警司】：是否请求将此\" + get.translation(trigger.card) + \"的目标改为\" + get.translation(player) + \"?\")\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\t\ttarget = _status.event.getTrigger().player;\r\n\t\t\t\t\t\treturn get.attitude(player, target) > 2;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tconst { bool } = await player\r\n\t\t\t\t\t\t.chooseBool(\r\n\t\t\t\t\t\t\t\"【警司】：是否接受\" + get.translation(trigger.player) + \"的请求，令\" + get.translation(trigger.card) + \"的目标改为你？\"\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\t\t\ttarget = _status.event.getTrigger().player;\r\n\t\t\t\t\t\t\tvar nametmp = _status.event.name;\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tnametmp == \"sha\" &&\r\n\t\t\t\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\t\t\treturn card.name == \"shan\";\r\n\t\t\t\t\t\t\t\t}) < 1\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tnametmp == \"juedou\" &&\r\n\t\t\t\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\t\t\treturn card.name == \"sha\";\r\n\t\t\t\t\t\t\t\t}) < 2\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\tif (player.hp < 3) return false;\r\n\t\t\t\t\t\t\treturn get.attitude(player, target) > 2;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"name\", trigger.card.name)\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (bool === true) {\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\tplayer.addMark(\"danweimrfz\");\r\n\t\t\t\t\t\tplayer.addTempSkill(\"newjingsimrfz_ban\", \"phaseEnd\");\r\n\t\t\t\t\t\tvar target = trigger.target;\r\n\t\t\t\t\t\ttrigger.targets.remove(target);\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttrigger.getParent().triggeredTargets1.remove(target);\r\n\t\t\t\t\t\ttrigger.untrigger();\r\n\t\t\t\t\t\tgame.delayx();\r\n\t\t\t\t\t\ttrigger.targets.push(player);\r\n\t\t\t\t\t\ttrigger.player.line(player, \"fire\");\r\n\t\t\t\t\t\tgame.log(trigger.card, \"的目标被改为\", player);\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"newjingsimrfz\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//新艾雅法拉\r\n\t\tluanhuomrfz: {\r\n\t\t\tonremove: true,\r\n\t\t\tmarktext: \"火\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"乱火\",\r\n\t\t\t\tcontent: \"本轮已执行回合数：#\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"damageBegin2\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.nature == \"fire\";\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tnofire: true,\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget: function (card, player, target, current) {\r\n\t\t\t\t\t\tif (get.tag(card, \"fireDamage\")) return \"zerotarget\";\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"luanhuomrfz_fire\", \"luanhuomrfz_times\", \"luanhuomrfz_clear\", \"luanhuomrfz_damage\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tfire: {\r\n\t\t\t\t\taudio: \"luanhuomrfz\",\r\n\t\t\t\t\ttrigger: { source: \"damageBegin\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.nature != \"fire\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t\ttrigger.player.damage(trigger.num, player, \"fire\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttimes: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addMark(\"luanhuomrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.countMark(\"luanhuomrfz\") > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeMark(\"luanhuomrfz\", player.countMark(\"luanhuomrfz\"));\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\taudio: \"luanhuomrfz\",\r\n\t\t\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar num = player.countMark(\"luanhuomrfz\");\r\n\t\t\t\t\t\tvar str1 = \"对至多\" + get.cnNumber(num, true) + \"名其他角色造成一点伤害\";\r\n\t\t\t\t\t\tvar str2 = \"对一名其他角色造成\" + get.cnNumber(num, true) + \"点伤害\";\r\n\t\t\t\t\t\tif (num == 1) {\r\n\t\t\t\t\t\t\tconst { targets } = await player\r\n\t\t\t\t\t\t\t\t.chooseTarget(get.prompt2(\"luanhuomrfz\"), function (card, player, target) {\r\n\t\t\t\t\t\t\t\t\treturn player != target;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\t\treturn get.damageEffect(target, player, player);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\tif (targets) targets[0].damage();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconst { control } = await player\r\n\t\t\t\t\t\t\t\t.chooseControl(str1, str2)\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function (event, player) {\r\n\t\t\t\t\t\t\t\t\tif (num > 2) return 0;\r\n\t\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\tif (control === str1 && num > 1) {\r\n\t\t\t\t\t\t\t\tplayer.storage.luanhuomrfz_damage = true;\r\n\t\t\t\t\t\t\t\tlet { targets } = await player\r\n\t\t\t\t\t\t\t\t\t.chooseTarget(\r\n\t\t\t\t\t\t\t\t\t\t[1, num],\r\n\t\t\t\t\t\t\t\t\t\t\"对至多\" + get.cnNumber(num, true) + \"名其他角色造成一点伤害\",\r\n\t\t\t\t\t\t\t\t\t\tfunction (card, player, target) {\r\n\t\t\t\t\t\t\t\t\t\t\treturn player != target;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\t\t\treturn get.damageEffect(target, player, player);\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\t\tif (!targets) return;\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < targets.length; i++) targets[i].damage(player);\r\n\t\t\t\t\t\t\t} else if (control === str2 && num > 1) {\r\n\t\t\t\t\t\t\t\tplayer.storage.luanhuomrfz_damage = false;\r\n\t\t\t\t\t\t\t\tlet { targets } = await player\r\n\t\t\t\t\t\t\t\t\t.chooseTarget(\"对一名其他角色造成\" + get.cnNumber(num, true) + \"点伤害\", function (card, player, target) {\r\n\t\t\t\t\t\t\t\t\t\treturn player != target;\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\t\t\treturn get.damageEffect(target, player, player);\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\t\tif (!targets) return;\r\n\t\t\t\t\t\t\t\ttargets[0].damage(num);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tqingyanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseUseEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.hasMark(\"qingyanmrfz\")) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.getHistory(\"useCard\", function (evt) {\r\n\t\t\t\t\t\treturn evt.getParent(\"phaseUse\") == event;\r\n\t\t\t\t\t}).length > 0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar list = [];\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.getHistory(\"useCard\", function (evt) {\r\n\t\t\t\t\tif (evt.getParent(\"phaseUse\") == trigger) list.add(get.type2(evt.card));\r\n\t\t\t\t});\r\n\t\t\t\tif (list.length >= 3) {\r\n\t\t\t\t\tconst result = await player.chooseBool(\"【勤研】：是否于本回合结束后额外执行一个回合？\").forResult();\r\n\t\t\t\t\tif (!result.bool) return;\r\n\t\t\t\t\tplayer.insertPhase();\r\n\t\t\t\t\tplayer.addMark(\"qingyanmrfz\", 1);\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"qingyanmrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"qingyanmrfz_clear\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"qingyanmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeMark(\"qingyanmrfz\", player.countMark(\"qingyanmrfz\"));\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//傀影\r\n\t\txuyingmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"expansion\",\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t},\r\n\t\t\tonremove: function (player, skill) {\r\n\t\t\t\tvar cards = player.getExpansions(skill);\r\n\t\t\t\tif (cards.length) player.loseToDiscardpile(cards);\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\tdirect: true,\r\n\t\t\tnotemp: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.xuyingmrfz_buff || !event.targets.length || player.hasSkill(\"xuyingmrfz_buff\")) return false;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tvar type = get.type(event.card, false);\r\n\t\t\t\tif (type != \"basic\" && type != \"trick\" && player.getExpansions(\"xuyingmrfz\").length > 0) return false;\r\n\t\t\t\treturn player.getExpansions(\"xuyingmrfz\").filter(function (magic) {\r\n\t\t\t\t\treturn get.type2(magic) != get.type2(event.card);\r\n\t\t\t\t}).length;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar cards = player.getExpansions(\"xuyingmrfz\").filter(function (magic) {\r\n\t\t\t\t\treturn get.type2(magic) != get.type2(trigger.card);\r\n\t\t\t\t});\r\n\t\t\t\tif (!cards.length) return;\r\n\t\t\t\tconst { links } = await player.chooseButton([\"你可以选择移去一张与你使用的牌类型不同的“虚影”，令此牌结算两次\", cards]).forResult();\r\n\t\t\t\tif (links) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"xuyingmrfz\");\r\n\t\t\t\t\tplayer.loseToDiscardpile(links);\r\n\t\t\t\t\tplayer.addTempSkill(\"xuyingmrfz_buff\", \"phaseUseAfter\");\r\n\t\t\t\t\ttrigger.xuyingmrfz_buff = player;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"xuyingmrfz_discard\", \"xuyingmrfz_judge\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdiscard: {\r\n\t\t\t\t\taudio: \"xuyingmrfz\",\r\n\t\t\t\t\ttrigger: { global: \"loseAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.type != \"discard\" || event.getlx === false) return false;\r\n\t\t\t\t\t\tif (player.getExpansions(\"xuyingmrfz\").length >= 3) return false;\r\n\t\t\t\t\t\tvar cards = event.cards.slice(0);\r\n\t\t\t\t\t\tvar evt = event.getl(player);\r\n\t\t\t\t\t\tfor (var i = 0; i < cards.length; i++) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tif (cards[i].original != \"j\" && get.suit(cards[i], event.player) == \"spade\" && get.position(cards[i], true) == \"d\") {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (trigger.delay == false) game.delay();\r\n\r\n\t\t\t\t\t\tvar cards = [],\r\n\t\t\t\t\t\t\tcards2 = trigger.cards.slice(0),\r\n\t\t\t\t\t\t\tevt = trigger.getl(player);\r\n\t\t\t\t\t\tvar num = player.getExpansions(\"xuyingmrfz\").length;\r\n\t\t\t\t\t\tfor (var i = 0; i < cards2.length; i++) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tif (cards2[i].original != \"j\" && get.suit(cards2[i], trigger.player) == \"spade\" && get.position(cards2[i], true) == \"d\") {\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tcards.push(cards2[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tlet result;\r\n\r\n\t\t\t\t\t\tif (cards.length && num + cards.length <= 3) {\r\n\t\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t\t.chooseButton([\"虚影：选择置于武将牌上的牌\", cards], [1, cards.length])\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function (button) {\r\n\t\t\t\t\t\t\t\t\treturn get.value(button.link, _status.event.player, \"raw\");\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t} else if (cards.length) {\r\n\t\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t\t.chooseButton([\"虚影：选择置于武将牌上的牌\", cards], [1, 3 - num])\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function (button) {\r\n\t\t\t\t\t\t\t\t\treturn get.value(button.link, _status.event.player, \"raw\");\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (result && result.bool && result.links && result.links.length) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"xuyingmrfz\");\r\n\t\t\t\t\t\t\tplayer.addToExpansion(result.links, player, \"giveAuto\").gaintag.add(\"xuyingmrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tjudge: {\r\n\t\t\t\t\taudio: 2,\r\n\t\t\t\t\ttrigger: { global: \"cardsDiscardAfter\" },\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tvar evt = event.getParent().relatedEvent;\r\n\t\t\t\t\t\tif (!evt || evt.name != \"judge\") return;\r\n\t\t\t\t\t\tif (player.getExpansions(\"xuyingmrfz\").length >= 3) return false;\r\n\t\t\t\t\t\tif (get.position(event.cards[0], true) != \"d\") return false;\r\n\t\t\t\t\t\treturn get.suit(event.cards[0]) == \"spade\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar card = trigger.cards.length;\r\n\t\t\t\t\t\tvar num = player.getExpansions(\"xuyingmrfz\").length;\r\n\r\n\t\t\t\t\t\tlet result;\r\n\t\t\t\t\t\tif (card + num <= 3)\r\n\t\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t\t.chooseButton([\"虚影：选择置于武将牌上的牌\", trigger.cards], [1, card])\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function (button) {\r\n\t\t\t\t\t\t\t\t\treturn get.value(button.link, _status.event.player, \"raw\");\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t\t.chooseButton([\"虚影：选择置于武将牌上的牌\", trigger.cards], [1, 3 - num])\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function (button) {\r\n\t\t\t\t\t\t\t\t\treturn get.value(button.link, _status.event.player, \"raw\");\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\tif (result && result.links && result.bool && result.links.length) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"xuyingmrfz\");\r\n\t\t\t\t\t\t\tplayer.addToExpansion(result.links, player, \"giveAuto\").gaintag.add(\"xuyingmrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tbuff: {\r\n\t\t\t\t\ttrigger: { global: \"useCardToTargeted\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.parent && event.parent.xuyingmrfz_buff == player && event.targets.length == event.parent.triggeredTargets4.length\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (!trigger.parent) return;\r\n\t\t\t\t\t\ttrigger.parent.targets = trigger.parent.targets.concat(trigger.targets);\r\n\t\t\t\t\t\ttrigger.parent.triggeredTargets4 = trigger.parent.triggeredTargets4.concat(trigger.targets);\r\n\t\t\t\t\t\tplayer.removeSkill(\"xuyingmrfz_buff\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txuegemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(function (target) {\r\n\t\t\t\t\treturn target != player && player.inRange(target);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(function (target) {\r\n\t\t\t\t\treturn target != player && get.attitude(player, target) < 2 && player.inRange(target);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseTarget(\"请选择【血歌】的目标\", \"对一名你的攻击范围内其他角色造成一点伤害\", true, function (card, player, target) {\r\n\t\t\t\t\t\treturn target != player && player.inRange(target);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", target => -get.attitude(player, target))\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\tif (result.targets) {\r\n\t\t\t\t\tplayer.line(result.targets);\r\n\t\t\t\t\tresult.targets[0].damage();\r\n\t\t\t\t\tif (result.targets[0].hp > player.hp || player.getExpansions(\"xuyingmrfz\").length >= 3) event.finish();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (player.countCards(\"he\") && player.getExpansions(\"xuyingmrfz\").length >= 3) return;\r\n\r\n\t\t\t\tconst { cards } = await player\r\n\t\t\t\t\t.chooseCard(\"你可以将一张牌置于武将牌上作为“虚影”\", \"he\")\r\n\t\t\t\t\t.set(\"ai\", card => 6 - get.value(card))\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (cards && cards.length) {\r\n\t\t\t\t\tplayer.addToExpansion(cards, player, \"giveAuto\").gaintag.add(\"xuyingmrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\thuanxiangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.card && (event.card.name == \"shan\" || event.card.name == \"wuxie\");\r\n\t\t\t},\r\n\t\t\tfrequent: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.draw();\r\n\t\t\t},\r\n\t\t},\r\n\t\t//莫斯提马\r\n\t\thuanshimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\tgetNum: function () {\r\n\t\t\t\tvar num = 0;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tgame.getGlobalHistory(\"cardMove\", function (evt) {\r\n\t\t\t\t\tif (evt.name == \"lose\" && evt.type == \"discard\") num += evt.cards2.length;\r\n\t\t\t\t});\r\n\t\t\t\treturn num;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tlib.skill.huanshimrfz.getNum() > 0 &&\r\n\t\t\t\t\tgame.hasPlayer(function (target) {\r\n\t\t\t\t\t\treturn target != player && !player.hasSkill(\"huanshimrfz_buff1\");\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar num = lib.skill.huanshimrfz.getNum();\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseTarget(\r\n\t\t\t\t\t\tget.prompt(\"huanshimrfz\"),\r\n\t\t\t\t\t\t\"你可以选择至多\" +\r\n\t\t\t\t\t\t\tget.cnNumber(num) +\r\n\t\t\t\t\t\t\t\"名角色令其下个回合内：①其使用的第一张【杀】指定目标时，取消之，然后其获得这张【杀】。\",\r\n\t\t\t\t\t\t[1, num],\r\n\t\t\t\t\t\tfunction (card, player, target) {\r\n\t\t\t\t\t\t\treturn target != player && !player.hasSkill(\"huanshimrfz_buff1\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"ai\", target => -get.attitude(player, target))\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (result.targets) {\r\n\t\t\t\t\tfor (var i of result.targets) {\r\n\t\t\t\t\t\ti.addSkill([\"huanshimrfz_buff1\", \"huanshimrfz_buff2\"]);\r\n\t\t\t\t\t\tplayer.line(i);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"huanshimrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\ttmp: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\tbuff1: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.hasSkill(\"huanshimrfz_tmp\")) return false;\r\n\t\t\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar cards = [];\r\n\t\t\t\t\t\tfor (var i = 0; i < trigger.cards.length; i++) {\r\n\t\t\t\t\t\t\tif (get.position(trigger.cards[i], true) == \"o\") {\r\n\t\t\t\t\t\t\t\tcards.push(trigger.cards[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tplayer.gain(cards, \"gain2\");\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttrigger.getParent().excluded.addArray(trigger.targets);\r\n\t\t\t\t\t\tplayer.addTempSkill(\"huanshimrfz_tmp\", \"phaseEnd\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tbuff2: {\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tmarktext: \"缓\",\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tname: \"主观缓时\",\r\n\t\t\t\t\t\tcontent: \"行动受到限制\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasSkill(\"huanshimrfz_buff1\") || player.hasSkill(\"huanshimrfz_buff2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeSkill(\"huanshimrfz_buff1\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"huanshimrfz_buff2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshishimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"drawBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t(event.getParent(\"phaseDraw\") && event.getParent(\"phaseDraw\").player == player) ||\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t(event.getParent(\"phaseUse\") && event.getParent(\"phaseUse\").player == player)\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.num += player.countMark(\"shishimrfz\") + 1;\r\n\t\t\t\tplayer.addMark(\"shishimrfz\", 1);\r\n\t\t\t},\r\n\t\t\tgroup: \"shishimrfz_discard\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdiscard: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDiscardBefore\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"shishimrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar num = player.countMark(\"shishimrfz\");\r\n\t\t\t\t\t\tplayer.chooseToDiscard(get.prompt(\"shishimrfz\"), \"弃置\" + get.cnNumber(num) + \"张牌\", \"he\", true, num);\r\n\t\t\t\t\t\tplayer.removeMark(\"shishimrfz\", num, false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tjiemimrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar num = player.countMark(\"jiemimrfz\") + 1;\r\n\t\t\t\t\tif (player != _status.currentPhase && player.countMark(\"jiemimrfz\") % 2 == 1) return \"弃置\" + get.cnNumber(num) + \"张牌\";\r\n\t\t\t\t\tif (player != _status.currentPhase && player.countMark(\"jiemimrfz\") % 2 != 1) return \"摸\" + get.cnNumber(num) + \"张牌\";\r\n\t\t\t\t\tif (player == _status.currentPhase && player.countMark(\"jiemimrfz\") % 2 == 1) return \"摸\" + get.cnNumber(num) + \"张牌\";\r\n\t\t\t\t\tif (player == _status.currentPhase && player.countMark(\"jiemimrfz\") % 2 != 1) return \"弃置\" + get.cnNumber(num) + \"张牌\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tcharlotte: true,\r\n\t\t\tonremove: true,\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.hasMark(\"jiemimrfz\");\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.removeMark(\"jiemimrfz\", player.countMark(\"jiemimrfz\"));\r\n\t\t\t},\r\n\t\t\tgroup: [\"jiemimrfz_cw\", \"jiemimrfz_zd\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tcw: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { target: \"useCardToTargeted\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player != _status.currentPhase;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tawait player.addMark(\"jiemimrfz\");\r\n\r\n\t\t\t\t\t\tif (player.countMark(\"jiemimrfz\") % 2 == 1) player.draw(player.countMark(\"jiemimrfz\"));\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tplayer.chooseToDiscard(\r\n\t\t\t\t\t\t\t\t\"弃置\" + get.cnNumber(player.countMark(\"jiemimrfz\")) + \"张手牌\",\r\n\t\t\t\t\t\t\t\tplayer.countMark(\"jiemimrfz\"),\r\n\t\t\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t\t\t\"h\"\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"jiemimrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tzd: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"useCardToTargeted\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player != _status.currentPhase) return false;\r\n\t\t\t\t\t\treturn event.target != player && event.targets.length == 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tawait player.addMark(\"jiemimrfz\");\r\n\r\n\t\t\t\t\t\tif (player.countMark(\"jiemimrfz\") % 2 == 1)\r\n\t\t\t\t\t\t\tplayer.chooseToDiscard(\r\n\t\t\t\t\t\t\t\t\"弃置\" + get.cnNumber(player.countMark(\"jiemimrfz\")) + \"张手牌\",\r\n\t\t\t\t\t\t\t\tplayer.countMark(\"jiemimrfz\"),\r\n\t\t\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t\t\t\"h\"\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\telse player.draw(player.countMark(\"jiemimrfz\"));\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"jiemimrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshihuangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tusable: 2,\r\n\t\t\ttrigger: { player: \"loseAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.type != \"discard\" || event.getlx === false) return false;\r\n\t\t\t\tif (event.name.indexOf(\"lose\") != 0) return event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t\tvar evt = event.getl(player);\r\n\t\t\t\tvar num = 0;\r\n\t\t\t\tfor (var i = 0; i < evt.cards2.length; i++) {\r\n\t\t\t\t\tnum += evt.cards2[i].number;\r\n\t\t\t\t}\r\n\t\t\t\treturn num > player.hp * 2 && !player.hasSkill(\"shihuangmrfz2\");\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar num = 0;\r\n\t\t\t\tfor (var i = 0; i < trigger.cards.length; i++) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tnum += trigger.cards[i].number;\r\n\t\t\t\t}\r\n\t\t\t\tplayer.addSkill(\"shihuangmrfz2\");\r\n\t\t\t\tplayer.gain(trigger.cards, \"gain2\", \"log\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tshihuangmrfz2: {\r\n\t\t\tdirect: true,\r\n\t\t\tsilent: true,\r\n\t\t\tcharlotte: true,\r\n\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.removeSkill(\"shihuangmrfz2\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tbaokemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tusable: 1,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (event.getParent(\"phaseUse\") && event.getParent(\"phaseUse\").player != player) return false;\r\n\t\t\t\tif (event.player == player) return false;\r\n\t\t\t\tif (!event.player.isAlive()) return false;\r\n\t\t\t\tif (event.nature) return true;\r\n\t\t\t\treturn event.player.getEquip(2);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.player.damage();\r\n\t\t\t},\r\n\t\t},\r\n\t\t//菲亚梅塔\r\n\t\tnanjiaomrfz: {\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.nanjiaomrfz = 0;\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tlet target;\r\n\t\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\t\tif (game.players[i].isOut() || game.players[i] == player) continue;\r\n\t\t\t\t\t\tif (game.players[i].storage.nanjiaomrfz && game.players[i].storage.nanjiaomrfz != 0) {\r\n\t\t\t\t\t\t\ttarget = game.players[i];\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!target) return \"这是一个占位符\";\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\"你的手牌上限\" +\r\n\t\t\t\t\t\t(player.storage.nanjiaomrfz > 0 ? \"+\" : \"\") +\r\n\t\t\t\t\t\tMath.floor(player.storage.nanjiaomrfz / 2) +\r\n\t\t\t\t\t\t\"</br>\" +\r\n\t\t\t\t\t\tget.translation(target) +\r\n\t\t\t\t\t\t\"的手牌上限\" +\r\n\t\t\t\t\t\t(target.storage.nanjiaomrfz > 0 ? \"+\" : \" \") +\r\n\t\t\t\t\t\tMath.floor(target.storage.nanjiaomrfz / 2)\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\tif (current.storage.nanjiaomrfz) {\r\n\t\t\t\t\t\tcurrent.storage.nanjiaomrfz = 0;\r\n\t\t\t\t\t\tif (current != player) current.removeSkill(\"nanjiaomrfz_eff\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (!player.isMaxHandCardLimit(true)) {\r\n\t\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\t\tif (game.players[i].isOut() || game.players[i] == player) continue;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (game.players[i].isMaxHandCardLimit()) {\r\n\t\t\t\t\t\t\tplayer.storage.nanjiaomrfz = game.players[i].getHandcardLimit();\r\n\t\t\t\t\t\t\tgame.players[i].storage.nanjiaomrfz = -(game.players[i].getHandcardLimit() - 1);\r\n\t\t\t\t\t\t\tgame.players[i].addSkill(\"nanjiaomrfz_eff\");\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\t\tif (game.players[i].isOut() || game.players[i] == player) continue;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (game.players[i].isMinHandCardLimit()) {\r\n\t\t\t\t\t\t\tgame.players[i].storage.nanjiaomrfz = player.getHandcardLimit();\r\n\t\t\t\t\t\t\tplayer.storage.nanjiaomrfz = -(player.getHandcardLimit() - 1);\r\n\t\t\t\t\t\t\tgame.players[i].addSkill(\"nanjiaomrfz_eff\");\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"nanjiaomrfz_eff\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn num + Math.floor(player.storage.nanjiaomrfz / 2);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshunanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.hp > 1 && !player.hasSkill(\"lvwaimrfz_ban\");\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.loseHp();\r\n\t\t\t},\r\n\t\t\tgroup: [\"shunanmrfz_damage\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tsource: \"damageBegin3\",\r\n\t\t\t\t\t\tplayer: \"phaseDrawBegin2\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.countCards(\"h\") >= player.hp;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (player.getDamagedHp() <= player.maxHp / 2) trigger.num += 2;\r\n\t\t\t\t\t\telse trigger.num++;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"shunanmrfza\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.2,\r\n\t\t\t},\r\n\t\t},\r\n\t\tshunanmrfza: {\r\n\t\t\taudio: 2,\r\n\t\t},\r\n\t\tlvwaimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tunique: true,\r\n\t\t\tmark: true,\r\n\t\t\tlimited: true,\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationStr: \"律外\",\r\n\t\t\tanimationColor: \"fire\",\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.lvwaimrfz = false;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.lvwaimrfz;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.awakenSkill(event.name);\r\n\t\t\t\tplayer.addSkill([\"lvwaimrfz_damage\", \"lvwaimrfz_ban\", \"lvwaimrfz_clear\", \"lvwaimrfz_sha\"]);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tplayer.chooseUseTarget({ name: \"sha\", isCard: true }, true, \"nodistance\");\r\n\t\t\t\tplayer.storage.lvwaimrfz = true;\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.draw(trigger.num);\r\n\t\t\t\t\t\tplayer.recover(trigger.num);\r\n\t\t\t\t\t\tplayer.removeSkill(\"lvwaimrfz_damage\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tban: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseBegin\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeSkill(\"lvwaimrfz_ban\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"shaAfter\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeSkill(\"lvwaimrfz_clear\");\r\n\t\t\t\t\t\tif (player.hasSkill(\"lvwaimrfz_damage\")) player.removeSkill(\"lvwaimrfz_damage\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tsha: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tfilter: function (event, card) {\r\n\t\t\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttrigger.directHit.addArray(game.players);\r\n\t\t\t\t\t\tplayer.removeSkill(\"lvwaimrfz_sha\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//棘刺\r\n\t\tchaoshengmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\treturn player.countMark(\"chaoshengmrfz\") + \"/\" + player.countMark(\"chaoshengmrfz2\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\tfrequent: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"chaoshengmrfz\") >= player.countMark(\"chaoshengmrfz2\");\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.removeMark(\"chaoshengmrfz\", player.countMark(\"chaoshengmrfz\"));\r\n\t\t\t\tif (player.countMark(\"jianshumrfz\") < 15) {\r\n\t\t\t\t\tplayer.chooseDrawRecover(2, true, function (event, player) {\r\n\t\t\t\t\t\tif (player.hp == 1 && player.isDamaged()) return \"recover_hp\";\r\n\t\t\t\t\t\treturn \"draw_card\";\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.draw(2);\r\n\t\t\t\t\tplayer.recover();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"chaoshengmrfz_limite\", \"chaoshengmrfz_gain\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tlimite: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addMark(\"chaoshengmrfz2\", 3, false);\r\n\t\t\t\t\t\tplayer.removeSkill(\"chaoshengmrfz_limite\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tgain: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (!player.getStat(\"damage\")) player.addMark(\"chaoshengmrfz\");\r\n\t\t\t\t\t\telse player.removeMark(\"chaoshengmrfz\", player.countMark(\"chaoshengmrfz\"));\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tjianshumrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar num = player.countMark(\"jianshumrfz\");\r\n\t\t\t\t\tif (num == 15) return \"【潮声】已修改</br>摸牌阶段摸牌数+1;攻击距离和【杀】的使用次数各+2\";\r\n\t\t\t\t\tif (num < 15 && num > 9) return \"已累计指定\" + num + \"次</br>摸牌阶段摸牌数+1;攻击距离和【杀】的使用次数各+2\";\r\n\t\t\t\t\tif (num < 10 && num > 4) return \"已累计指定\" + num + \"次</br>摸牌阶段摸牌数、攻击距离和【杀】的使用次数各+1\";\r\n\t\t\t\t\treturn \"已累计指定\" + num + \"次\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 3,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { player: \"useCardToTargeted\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"jianshumrfz\") < 15;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tawait player.addMark(\"jianshumrfz\");\r\n\t\t\t\tvar num = player.countMark(\"jianshumrfz\");\r\n\t\t\t\tif (num % 5 == 0) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"jianshumrfz\");\r\n\t\t\t\t\tif (num == 5 || num == 15) player.removeMark(\"chaoshengmrfz2\");\r\n\t\t\t\t\tif (num == 10) player.addSkill(\"jianshumrfz_usesha\");\r\n\t\t\t\t\tif (num == 5 || num === 10) player.addMark(\"jianshumrfz_time\");\r\n\t\t\t\t\tif (num == 5) player.addMark(\"jianshumrfz_draw\");\r\n\t\t\t\t\tif (num == 5 || num === 10) player.addMark(\"jianshumrfz_range\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"jianshumrfz_time\", \"jianshumrfz_range\", \"jianshumrfz_draw\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\ttime: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num + player.countMark(\"jianshumrfz_time\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\trange: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tattackRange: function (player, num) {\r\n\t\t\t\t\t\t\treturn num + player.countMark(\"jianshumrfz_range\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"jianshumrfz_draw\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"jianshumrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tusesha: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst result = await player\r\n\t\t\t\t\t\t\t.chooseTarget(\"选择一名其他角色视为对其使用一张【杀】\", function (card, player, target) {\r\n\t\t\t\t\t\t\t\treturn target != player && player.inRange(target);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"ai\", target => -get.attitude(player, target))\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\t\t\tplayer.useCard({ name: \"sha\" }, true, false, target);\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"jianshumrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//夜莺\r\n\t\tqiulongmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"笼\",\r\n\t\t\t\tcontent: \"你获得了白恶魔的庇护\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseTarget(\"你可以选择一名角色，令其获得‘笼’标记\", function (card, player, target) {\r\n\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", target => get.attitude(player, target))\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\tif (result.targets) {\r\n\t\t\t\t\tresult.targets[0].addMark(\"qiulongmrfz\");\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"qiulongmrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"qiulongmrfz_damage\", \"qiulongmrfz_huan\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tremove: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"qiulongmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeMark(\"qiulongmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.hasMark(\"qiulongmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar num = trigger.num;\r\n\t\t\t\t\t\ttrigger.player.recover(num);\r\n\t\t\t\t\t\tplayer.damage(num, \"nosource\");\r\n\t\t\t\t\t\tplayer.addMark(\"qiulongmrfz_huan\", num * 2);\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"qiulongmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\thuan: {\r\n\t\t\t\t\tmarktext: \"幻影\",\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tname: \"幻\",\r\n\t\t\t\t\t\tcontent: \"幻影\",\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tbihumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"damageBegin3\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.nature;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t},\r\n\t\t\tgroup: \"bihumrfz_damage\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.source != undefined;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addMark(\"qiulongmrfz_huan\", trigger.num);\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"bihumrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tnofire: true,\r\n\t\t\t\tnothunder: true,\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget: function (card, player, target, current) {\r\n\t\t\t\t\t\tif (get.tag(card, \"natureDamage\")) return \"zerotarget\";\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshengyumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tforced: true,\r\n\t\t\tmark: true,\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.shengyumrfz = false;\r\n\t\t\t},\r\n\t\t\tderivation: [\"polongmrfz\"],\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.shengyumrfz;\r\n\t\t\t},\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tif (!player.storage.shengyumrfz) return \"圣域已准备就绪\";\r\n\t\t\t\t\treturn \"圣域充能中:\" + player.countMark(\"shengyumrfz_cd\") + \"/4\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tfilterTarget: true,\r\n\t\t\tselectTarget: [1, 3],\r\n\t\t\tmultitarget: true,\r\n\t\t\tmultiline: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { targets } = event;\r\n\t\t\t\tfor (var i of targets) i.addSkill(\"polongmrfz\");\r\n\t\t\t\tplayer.storage.shengyumrfz = true;\r\n\t\t\t\tplayer.recover(2);\r\n\t\t\t},\r\n\t\t\tgroup: \"shengyumrfz_cd\",\r\n\t\t\tai: {\r\n\t\t\t\torder: 10,\r\n\t\t\t\tthreaten: 2,\r\n\t\t\t\texpose: 0.8,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 10,\r\n\t\t\t\t\ttarget: 10,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tcd: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.storage.shengyumrfz == true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tawait player.addMark(\"shengyumrfz_cd\", 1);\r\n\r\n\t\t\t\t\t\tif (player.countMark(\"shengyumrfz_cd\") >= 4) {\r\n\t\t\t\t\t\t\tplayer.storage.shengyumrfz = false;\r\n\t\t\t\t\t\t\tplayer.removeMark(\"shengyumrfz_cd\", player.countMark(\"shengyumrfz_cd\"));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tpolongmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"破笼\",\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tif (player.countMark(\"polongmrfz_round\") >= 3)\r\n\t\t\t\t\t\treturn \"圣域持续时间:\" + player.countMark(\"polongmrfz_round\") + \"/3</br><span class=firetext>最后一轮</span>\";\r\n\t\t\t\t\treturn \"圣域持续时间:\" + player.countMark(\"polongmrfz_round\") + \"/3\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 5,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.getDamagedHp() == 0 && player.countMark(\"polongmrfz_mark1\") >= 3) return false;\r\n\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\treturn current.countMark(\"qiulongmrfz_huan\") > 0;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar list = [];\r\n\t\t\t\tif (player.countMark(\"polongmrfz_mark1\") < 3) list.add(\"摸牌\");\r\n\t\t\t\tif (player.countMark(\"polongmrfz_mark2\") < 2) list.add(\"回血\");\r\n\t\t\t\tif (player.getDamagedHp() != 0) {\r\n\t\t\t\t\tconst result = await player\r\n\t\t\t\t\t\t.chooseControl(list, \"cancel2\")\r\n\t\t\t\t\t\t.set(\"prompt\", get.prompt(\"polongmrfz\"))\r\n\t\t\t\t\t\t.set(\"prompt2\", \"回复一点体力或摸一张牌\")\r\n\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\t\tif (player.hp == 1 && player.isDamaged()) return \"回血\";\r\n\t\t\t\t\t\t\treturn \"摸牌\";\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (result.control != \"cancel2\") {\r\n\t\t\t\t\t\tgame.countPlayer(current => {\r\n\t\t\t\t\t\t\tcurrent.removeMark(\"qiulongmrfz_huan\");\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"polongmrfz\");\r\n\t\t\t\t\t\tif (result.control == \"摸牌\") {\r\n\t\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\t\tplayer.addMark(\"polongmrfz_mark1\", 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (result.control == \"回血\") {\r\n\t\t\t\t\t\t\tplayer.recover();\r\n\t\t\t\t\t\t\tplayer.addMark(\"polongmrfz_mark2\", 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"polongmrfz\");\r\n\t\t\t\t\tplayer.addMark(\"polongmrfz_mark1\", 1);\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\tcurrent.removeMark(\"qiulongmrfz_huan\");\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"polongmrfz_damage\", \"polongmrfz_remove\", \"polongmrfz_round\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\ttrigger: { player: \"damageBegin3\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn current.countMark(\"qiulongmrfz_huan\") > 0;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current.countMark(\"qiulongmrfz_huan\") > 3;\r\n\t\t\t\t\t\t\t}) || player.hp <= 2\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num--;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\t\tcurrent.removeMark(\"qiulongmrfz_huan\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tremove: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseUseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"polongmrfz_mark1\") || player.hasMark(\"polongmrfz_mark2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeMark(\"polongmrfz_mark1\", player.countMark(\"polongmrfz_mark1\"));\r\n\t\t\t\t\t\tplayer.removeMark(\"polongmrfz_mark2\", player.countMark(\"polongmrfz_mark2\"));\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tround: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tawait player.addMark(\"polongmrfz_round\", 1);\r\n\t\t\t\t\t\tif (player.countMark(\"polongmrfz_round\") > 3) player.removeSkill(\"polongmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tmark1: {},\r\n\t\t\t\tmark2: {},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 12,\r\n\t\t\t\tthreaten: 2,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 10,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//赫拉格\r\n\t\tyingkuimrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tcardname: function (card, player) {\r\n\t\t\t\t\tif (card.name == \"tao\") return \"sha\";\r\n\t\t\t\t},\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\treturn (num += 2);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\tfirstDo: true,\r\n\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (get.name(event.card) != \"sha\") return false;\r\n\t\t\t\treturn event.card && event.card.cards && event.card.cards.length == 1 && event.card.cards[0].name == \"tao\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\tskillTagFilter(player, tag, arg) {\r\n\t\t\t\t\tvar cards = arg.card.cards;\r\n\t\t\t\t\tif (get.name(arg.card) != \"sha\" || !cards || cards.length != 1) return false;\r\n\t\t\t\t\tif (cards[0].name != \"tao\") return false;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tyingkuimrfza: {\r\n\t\t\taudio: 2,\r\n\t\t},\r\n\t\tcangfengmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"#/2\",\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\tvar mark = player.countMark(\"cangfengmrfz\");\r\n\r\n\t\t\t\tawait player.addMark(\"cangfengmrfz\", trigger.num, false);\r\n\r\n\t\t\t\tif (mark / 2 >= 1 && player.getDamagedHp() > 0) {\r\n\t\t\t\t\tresult = await player.chooseControl(\"摸牌\", \"回血\").set(\"prompt\", \"摸一张牌或回一点血\").forResult();\r\n\t\t\t\t} else if (mark / 2 < 1) return;\r\n\t\t\t\tif (result && result.control == \"回血\") player.recover();\r\n\t\t\t\telse player.draw();\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.logSkill(\"cangfengmrfz\");\r\n\t\t\t\tawait player.removeMark(\"cangfengmrfz\", 2);\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (mark / 2 >= 1) await lib.skill.cangfengmrfz.content(event, trigger, player);\r\n\t\t\t},\r\n\t\t},\r\n\t\tyuexiangmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tif (player.getDamagedHp() >= 3) {\r\n\t\t\t\t\t\treturn \"<span class=firetext>满月</span> <span class=thundertext>弦月 新月</span></br>·你使用【杀】的次数+X（X=本阶段你使用杀的次数/2+1，向下取整）；出牌阶段限一次，你第一次使用【杀】造成的伤害+1</br>·出牌阶段使用的第一张【杀】结算两次</br>·出牌阶段你使用的第一张【杀】目标+1；攻击距离+2\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (player.getDamagedHp() == 2) {\r\n\t\t\t\t\t\treturn \"满月 <span class=firetext>弦月</span> <span class=thundertext>新月</span></br>·你使用【杀】的次数+X（X=本阶段你使用杀的次数/2+1，向下取整）；出牌阶段限一次，你第一次使用【杀】造成的伤害+1</br>·出牌阶段使用的第一张【杀】结算两次\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (player.getDamagedHp() == 1) {\r\n\t\t\t\t\t\treturn \"满月 弦月 <span class=firetext>新月</span></br>·你使用【杀】的次数+X（X=本阶段你使用杀的次数/2+1，向下取整）；出牌阶段限一次，你第一次使用【杀】造成的伤害+1\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn \"满月 弦月 新月\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 3,\r\n\t\t\ttrigger: { player: [\"phaseBefore\", \"changeHp\"] },\r\n\t\t\tdirect: true,\r\n\t\t\tpopup: false,\r\n\t\t\tmark: true,\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tif (game.online) return;\r\n\t\t\t\tplayer.removeAdditionalSkill(\"yuexiangmrfz\");\r\n\t\t\t\tvar list = [];\r\n\t\t\t\tif (player.getDamagedHp() >= 3) {\r\n\t\t\t\t\tlist.push(\"yuexiangmrfz_man\");\r\n\t\t\t\t}\r\n\t\t\t\tif (player.getDamagedHp() >= 2) {\r\n\t\t\t\t\tlist.push(\"yuexiangmrfz_xian\");\r\n\t\t\t\t}\r\n\t\t\t\tif (player.getDamagedHp() >= 1) {\r\n\t\t\t\t\tlist.push(\"yuexiangmrfz_xin\");\r\n\t\t\t\t}\r\n\t\t\t\tif (list.length) {\r\n\t\t\t\t\tplayer.addAdditionalSkill(\"yuexiangmrfz\", list);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.removeAdditionalSkill(\"yuexiangmrfz\");\r\n\t\t\t\tvar list = [];\r\n\t\t\t\tif (player.getDamagedHp() >= 3) {\r\n\t\t\t\t\tlist.push(\"yuexiangmrfz_man\");\r\n\t\t\t\t}\r\n\t\t\t\tif (player.getDamagedHp() >= 2) {\r\n\t\t\t\t\tlist.push(\"yuexiangmrfz_xian\");\r\n\t\t\t\t}\r\n\t\t\t\tif (player.getDamagedHp() >= 1) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (trigger.num != undefined && trigger.num < 0 && player.getDamagedHp() - trigger.num > 1) player.logSkill(\"yingkuimrfza\");\r\n\t\t\t\t\tlist.push(\"yuexiangmrfz_xin\");\r\n\t\t\t\t}\r\n\t\t\t\tif (list.length) {\r\n\t\t\t\t\tplayer.addAdditionalSkill(\"yuexiangmrfz\", list);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tmaixie: true,\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget: function (card, player, target) {\r\n\t\t\t\t\t\tif (get.tag(card, \"damage\")) {\r\n\t\t\t\t\t\t\tif (!target.hasFriend()) return;\r\n\t\t\t\t\t\t\tif (target.hp >= 4) return [0, 1];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (get.tag(card, \"recover\") && player.hp >= player.maxHp - 2) return [0, 0];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: \"yuexiangmrfz_clear\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseUseEnd\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.yuexiangmrfz_man = false;\r\n\t\t\t\t\t\tif (player.hasMark(\"yuexiangmrfz_xin\")) {\r\n\t\t\t\t\t\t\tplayer.removeMark(\"yuexiangmrfz_xin\", player.countMark(\"yuexiangmrfz_xin\"));\r\n\t\t\t\t\t\t\tplayer.unmarkSkill(\"yuexiangmrfz_xin\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tman: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { player: \"shaAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn !player.storage.yuexiangmrfz_man;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.yuexiangmrfz_man = true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tselectTarget: function (card, player, range) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\" && range[1] != -1 && !player.storage.yuexiangmrfz_man) range[1]++;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tattackRange: function (player, num) {\r\n\t\t\t\t\t\t\treturn (num += 2);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\txian: {\r\n\t\t\t\t\ttrigger: { player: \"useCardToTargeted\" },\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\tusable: 1,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card.name == \"sha\" && event.parent && event.targets.length == event.parent.triggeredTargets4.length;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (!trigger.parent) return;\r\n\t\t\t\t\t\ttrigger.parent.targets = trigger.parent.targets.concat(trigger.targets);\r\n\t\t\t\t\t\ttrigger.parent.triggeredTargets4 = trigger.parent.triggeredTargets4.concat(trigger.targets);\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"yuexiangmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\txin: {\r\n\t\t\t\t\tgroup: \"yuexiangmrfz_xin2\",\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return (num += Math.floor(player.countMark(\"yuexiangmrfz_xin\") / 2) + 1);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\t\t\treturn \"本回合使用【杀】的次数+\" + (Math.floor(player.countMark(\"yuexiangmrfz_xin\") / 2) + 1);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"shaAfter\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addMark(\"yuexiangmrfz_xin\");\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (player.countMark(\"yuexiangmrfz_xin\") % 2 == 0) player.logSkill(\"yuexiangmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\txin2: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { source: \"damageBegin3\" },\r\n\t\t\t\t\tusable: 1,\r\n\t\t\t\t\tfilter: function (event) {\r\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//温蒂\r\n\t\tdanpaomrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"【氮炮】剩余次数：#\",\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.addMark(\"danpaomrfz\", 2);\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player;\r\n\t\t\t},\r\n\t\t\tselectTarget: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"danpaomrfz\") > 0 && player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { target } = event;\r\n\r\n\t\t\t\tif (player.countCards(\"h\") > 0) await player.chooseToDiscard(\"h\", true, player.countCards(\"h\"));\r\n\t\t\t\telse await player.chooseToDiscard(\"he\", true, player.countCards(\"he\"));\r\n\t\t\t\ttarget.damage();\r\n\t\t\t\tif (player.hasMark(\"shuipaomrfz\")) {\r\n\t\t\t\t\tplayer.removeMark(\"shuipaomrfz\");\r\n\t\t\t\t\ttarget.addSkill(\"danpaomrfz_plus\");\r\n\t\t\t\t} else target.addSkill(\"danpaomrfz_nor\");\r\n\t\t\t\tplayer.removeMark(\"danpaomrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: \"danpaomrfz_damage\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tplus: {\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"计算与其他角色距离+4；每使用一张牌受到一点伤害\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tglobalFrom: function (from, to, distance) {\r\n\t\t\t\t\t\t\treturn distance + 4;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeSkill(\"danpaomrfz_plus\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tnor: {\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"计算与其他角色距离+2；每使用两张牌受到一点伤害\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tglobalFrom: function (from, to, distance) {\r\n\t\t\t\t\t\t\treturn distance + 2;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeSkill(\"danpaomrfz_nor\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { global: \"useCard\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.hasSkill(\"danpaomrfz_nor\") || event.player.hasSkill(\"danpaomrfz_plus\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar target = trigger.player;\r\n\t\t\t\t\t\tif (target.hasSkill(\"danpaomrfz_nor\")) {\r\n\t\t\t\t\t\t\tawait target.addMark(\"danpaomrfz_nor\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"danpaomrfz\", target);\r\n\t\t\t\t\t\t\tawait target.damage(\"player\");\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (target.countMark(\"danpaomrfz_nor\") >= 2) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"danpaomrfz\", target);\r\n\t\t\t\t\t\t\ttarget.damage(\"player\");\r\n\t\t\t\t\t\t\ttarget.removeMark(\"danpaomrfz_nor\", 2);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: function (event, player) {\r\n\t\t\t\t\t\tvar cardh = player.getCards(\"h\"),\r\n\t\t\t\t\t\t\tcarde = player.getCards(\"e\");\r\n\t\t\t\t\t\tif (cardh.length == 0 && carde.length && carde.length < 2) return 1;\r\n\t\t\t\t\t\tif (cardh.length > 3) return -1;\r\n\t\t\t\t\t\tfor (var i = 0; i < cardh.length; i++) {\r\n\t\t\t\t\t\t\tif (get.value(cardh[i]) > 8) return 0.5;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\treturn get.damageEffect(target, player);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshuipaomrfz: {\r\n\t\t\tmarktext: \"蓄水\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"蓄水\",\r\n\t\t\t\tcontent: \"蓄水炮蓄水完毕</br>·【氮炮】中蓝色数字翻倍，红色数字-1</br>·【水炮①】中‘+1’改为‘+2’\",\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.shuipaomrfz = true;\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { source: \"damageBegin3\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.getEquip(1) && !player.hasMark(\"shuipaomrfz\") && event.parent && event.parent.name != \"danpaomrfz\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.addMark(\"shuipaomrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: \"shuipaomrfz_j\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tj: {\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\t\t\tif (player.hasSkill(\"shuipaomrfz_j2\")) return \"计算与其他角色的距离+2\";\r\n\t\t\t\t\t\t\treturn \"计算与其他角色的距离+1\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn !event.player.hasMark(\"shuipaomrfz_j\") && event.player != player && event.parent && event.parent.name != \"danpaomrfz\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (player.hasMark(\"shuipaomrfz\")) trigger.player.addSkill(\"shuipaomrfz_j2\");\r\n\t\t\t\t\t\telse trigger.player.addSkill(\"shuipaomrfz_j3\");\r\n\t\t\t\t\t\ttrigger.player.addMark(\"shuipaomrfz_j\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tj2: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeMark(\"shuipaomrfz_j\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"shuipaomrfz_j2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tglobalFrom: function (from, to, distance) {\r\n\t\t\t\t\t\t\treturn distance + 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tj3: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeMark(\"shuipaomrfz_j\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"shuipaomrfz_j3\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tglobalFrom: function (from, to, distance) {\r\n\t\t\t\t\t\t\treturn distance + 2;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tjiepimrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tcanBeDiscarded: function (card) {\r\n\t\t\t\t\tif (get.position(card) == \"e\") return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tglobal: \"jiepimrfz2\",\r\n\t\t},\r\n\t\tjiepimrfz2: {\r\n\t\t\tmod: {\r\n\t\t\t\tcanBeDiscarded: function (card) {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tget.position(card) == \"e\" &&\r\n\t\t\t\t\t\t_status.currentPhase &&\r\n\t\t\t\t\t\t_status.currentPhase.isAlive() &&\r\n\t\t\t\t\t\t_status.currentPhase.hasSkill(\"jiepimrfz\")\r\n\t\t\t\t\t)\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//森蚺\r\n\t\tjuezhanmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tselectTarget: function (card, player, range) {\r\n\t\t\t\t\tif (lib.skill.juezhanmrfz.isJuezhan(card) && card.name != \"jiedao\") range[1] = 1;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tisJuezhan: function (card) {\r\n\t\t\t\tvar info = lib.card[card.name];\r\n\t\t\t\tif (!info || (info.type != \"trick\" && info.type != \"delay\")) return false;\r\n\t\t\t\tif (info.notarget) return false;\r\n\t\t\t\tif (info.selectTarget != undefined) {\r\n\t\t\t\t\tif (Array.isArray(info.selectTarget)) {\r\n\t\t\t\t\t\tif (info.selectTarget[0] < 0) return !info.toself;\r\n\t\t\t\t\t\treturn info.selectTarget[0] != 1 || info.selectTarget[1] != 1;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (info.selectTarget < 0) return !info.toself;\r\n\t\t\t\t\t\treturn info.selectTarget != 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tmarktext: \"单挑\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"单挑\",\r\n\t\t\t\tcontent: \"和森蚺决一死战吧！\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { target: \"useCardToTargeted\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.card.name == \"sha\" && !event.player.hasMark(\"juezhanmrfz\");\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.player.addMark(\"juezhanmrfz\");\r\n\t\t\t\ttrigger.player.addSkill(\"juezhanmrfz_ta\");\r\n\t\t\t},\r\n\t\t\tgroup: \"juezhanmrfz_pl\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tta: {\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tplayerEnabled: function (card, player, target) {\r\n\t\t\t\t\t\t\tif (!target.hasSkill(\"juezhanmrfz\") && target != player) {\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tinRangeOf: function (from, to) {\r\n\t\t\t\t\t\t\tif (from.hasSkill(\"juezhanmrfz\")) return true;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: [\"phaseEnd\", \"die\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.hasSkill(\"juezhanmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeMark(\"juezhanmrfz\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"juezhanmrfz_ta\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tpl: {\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tplayerEnabled: function (card, player, target) {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t!target.hasMark(\"juezhanmrfz\") &&\r\n\t\t\t\t\t\t\t\ttarget != player &&\r\n\t\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\t\treturn current.countMark(\"juezhanmrfz\") > 0;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tinRangeOf: function (from, to) {\r\n\t\t\t\t\t\t\tif (from.hasMark(\"juezhanmrfz\")) return true;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshanxiemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"loseAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.countMark(\"shanxiemrfz\") > player.countCards(\"h\")) return false;\r\n\t\t\t\tif (event.type != \"discard\" || event.getlx === false) return false;\r\n\t\t\t\tvar cards = event.cards.slice(0);\r\n\t\t\t\tvar evt = event.getl(player);\r\n\t\t\t\tif (evt && evt.cards) cards.removeArray(evt.cards);\r\n\t\t\t\tfor (var i = 0; i < cards.length; i++) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (cards[i].original != \"j\" && get.type(cards[i], event.player) == \"equip\" && get.position(cards[i], true) == \"d\") {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\twhile (true) {\r\n\t\t\t\t\t// step 0\r\n\t\t\t\t\tlet skipStep1 = false;\r\n\t\t\t\t\tif (player.countCards(\"h\") >= player.countMark(\"shanxiemrfz\") && player.countMark(\"shanxiemrfz\") > 0) {\r\n\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t.chooseToDiscard(\r\n\t\t\t\t\t\t\t\tget.prompt(\"shanxiemrfz\"),\r\n\t\t\t\t\t\t\t\t\"你可以弃置\" + get.cnNumber(player.countMark(\"shanxiemrfz\")) + \"张牌获得此装备牌\",\r\n\t\t\t\t\t\t\t\tfalse,\r\n\t\t\t\t\t\t\t\tplayer.countMark(\"shanxiemrfz\")\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t} else if (player.countMark(\"shanxiemrfz\") === 0) {\r\n\t\t\t\t\t\tskipStep1 = true; // goto 2: 跳过 step 1 直接执行 step 2\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// step 1 (可能被 goto(2) 跳过)\r\n\t\t\t\t\tif (!skipStep1) {\r\n\t\t\t\t\t\tif (trigger.delay === false) {\r\n\t\t\t\t\t\t\tawait game.delay();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!result?.cards) {\r\n\t\t\t\t\t\t\tbreak; // event.finish()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// step 2\r\n\t\t\t\t\tconst equipCards = [];\r\n\t\t\t\t\tconst cards2 = trigger.cards.slice(0);\r\n\t\t\t\t\tconst evt = trigger.getl(player);\r\n\t\t\t\t\tif (evt?.cards) {\r\n\t\t\t\t\t\tcards2.removeArray(evt.cards);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (const card of cards2) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (card.original !== \"j\" && get.type(card, trigger.player) === \"equip\" && get.position(card, true) === \"d\") {\r\n\t\t\t\t\t\t\tequipCards.push(card);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tevent.num = equipCards.length;\r\n\r\n\t\t\t\t\tif (equipCards.length > 0) {\r\n\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t.chooseButton([\"擅械：请选择获得一张牌\", equipCards], 1)\r\n\t\t\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\t\t\treturn get.value(button.link, _status.event.player, \"raw\");\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// step 3\r\n\t\t\t\t\tif (result?.bool) {\r\n\t\t\t\t\t\tevent.num--;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"shanxiemrfz\");\r\n\t\t\t\t\t\tawait player.gain(result.links, \"gain2\", \"log\");\r\n\t\t\t\t\t\tplayer.addMark(\"shanxiemrfz\", 1);\r\n\r\n\t\t\t\t\t\tif (event.num > 0) {\r\n\t\t\t\t\t\t\tcontinue; // goto 0: 回到循环开头\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak; // 流程正常结束\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"shanxiemrfz_sha\", \"shanxiemrfz_usesha\", \"shanxiemrfz_remove\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tsha: {\r\n\t\t\t\t\taudio: \"shanxiemrfz\",\r\n\t\t\t\t\tenable: [\"chooseToRespond\", \"chooseToUse\"],\r\n\t\t\t\t\tfilterCard: function (card, player) {\r\n\t\t\t\t\t\treturn get.type(card) == \"equip\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tposition: \"hes\",\r\n\t\t\t\t\tviewAs: { name: \"sha\" },\r\n\t\t\t\t\tprompt: \"将一张装备牌当杀使用或打出\",\r\n\t\t\t\t\tcheck: function (card) {\r\n\t\t\t\t\t\tvar val = get.value(card);\r\n\t\t\t\t\t\tif (_status.event.name == \"chooseToRespond\") return 1 / Math.max(0.1, val);\r\n\t\t\t\t\t\treturn 10 - val;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tif (!get.type(arg.card) == \"equip\") return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\trespondSha: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tusesha: {\r\n\t\t\t\t\ttrigger: { source: \"damageBegin3\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.card &&\r\n\t\t\t\t\t\t\tevent.card.name == \"sha\" &&\r\n\t\t\t\t\t\t\tevent.player.hasMark(\"juezhanmrfz\") &&\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tget.type(event.cards[0], \"equip\") == \"equip\"\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"shanxiemrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tremove: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeMark(\"shanxiemrfz\", player.countMark(\"shanxiemrfz\"));\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 2,\r\n\t\t\t},\r\n\t\t},\r\n\t\ttieyimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tmark: true,\r\n\t\t\tlimited: true,\r\n\t\t\tselectCard: [0, 3],\r\n\t\t\tfilterCard: true,\r\n\t\t\tposition: \"h\",\r\n\t\t\tprompt: \"弃置至多三张手牌，摸两倍于你弃置牌的牌\",\r\n\t\t\tdelay: 0,\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\treturn 6 - get.value(card) && get.name(card) != \"sha\" && get.type(card) != \"equip\";\r\n\t\t\t},\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.tieyimrfz = false;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.tieyimrfz;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { cards } = event;\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tplayer.awakenSkill(event.name);\r\n\t\t\t\tplayer.node.avatar.setBackgroundImage(\"extension/WhichWay/image/skill/senrantieyumrfz.jpg\");\r\n\t\t\t\tplayer.node.name.innerHTML = get.translation(\"senrantieyumrfz\");\r\n\t\t\t\tawait player.draw(cards.length * 2);\r\n\t\t\t\tawait player.recover(2);\r\n\t\t\t\tawait player.turnOver();\r\n\t\t\t\tplayer.storage.tieyimrfz = true;\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tlet skipStep2 = false;\r\n\t\t\t\tif (\r\n\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\treturn current !== player && !current.hasMark(\"juezhanmrfz\");\r\n\t\t\t\t\t})\r\n\t\t\t\t) {\r\n\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t.chooseTarget(true, (card, player, target) => {\r\n\t\t\t\t\t\t\treturn target !== player && !target.hasMark(\"juezhanmrfz\");\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\treturn -get.attitude(player, target);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tskipStep2 = true; // goto 3: 跳过 step 2\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 2 (可能被 goto(3) 跳过)\r\n\t\t\t\tif (!skipStep2 && result && result.targets) {\r\n\t\t\t\t\tconst target = result.targets[0];\r\n\t\t\t\t\ttarget.addSkill(\"juezhanmrfz_ta\");\r\n\t\t\t\t\ttarget.addMark(\"juezhanmrfz\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 3\r\n\t\t\t\tplayer.addTempSkill(\"tieyimrfz_use\");\r\n\t\t\t\tplayer.addTempSkill(\"tieyimrfz_discard\");\r\n\t\t\t\tplayer.addSkill(\"tieyimrfz_back\");\r\n\t\t\t},\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"limited\",\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tback: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: [\"dying\", \"phaseEnd\"] },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.node.avatar.setBackgroundImage(\"extension/WhichWay/image/senranmrfz.jpg\");\r\n\t\t\t\t\t\tplayer.node.name.innerHTML = get.translation(\"senranmrfz\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"tieyimrfz_back\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdiscard: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.countCards(\"h\") > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.chooseToDiscard(true, player.countCards(\"h\"));\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tuse: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsableTarget: function (card, player, target) {\r\n\t\t\t\t\t\t\tif (target.hasMark(\"juezhanmrfz\")) return true;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\tthreaten: 3,\r\n\t\t\t\texpose: 0.9,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tvar hs1 = player.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\treturn card.name == \"sha\";\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvar hs2 = player.countCards(\"he\", function (card) {\r\n\t\t\t\t\t\t\treturn get.type(card) == \"equip\";\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (hs1 + 2 * hs2 > 4) return -1;\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//ASH灰烬\r\n\t\twusumrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tif (player.countMark(\"wusumrfz\") == 0) return \"Ash已化身监控室大爷\";\r\n\t\t\t\t\treturn \"FBI突击中</br>距离ASH白给还剩\" + (5 - player.countMark(\"wusumrfz\")) + \"个阶段\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"phaseZhunbeiBefore\", \"phaseJudgeBefore\", \"phaseDrawBefore\", \"phaseDiscardBefore\", \"phaseJieshuBefore\"],\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.getParent(\"phase\");\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t\tvar next = trigger.player.phaseUse();\r\n\t\t\t\tevent.next.remove(next);\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\ttrigger.getParent(\"phase\").next.push(next);\r\n\t\t\t\tplayer.addMark(\"wusumrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: \"wusumrfz_draw\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget: function (card, player, target, current) {\r\n\t\t\t\t\t\tif (get.type(card) == \"delay\") return \"zeroplayertarget\";\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\twutoumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\tusable: 1,\r\n\t\t\ttrigger: { player: \"damageBegin3\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.num === player.hp;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t},\r\n\t\t},\r\n\t\tbaigeimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"phaseUseEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"wusumrfz\") >= 5;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (player.countMark(\"wusumrfz\") >= 5) {\r\n\t\t\t\t\tvar num = player.countCards(\"h\") - player.getHandcardLimit();\r\n\t\t\t\t\tvar chattext = [\r\n\t\t\t\t\t\t\"窗下怎么会有个夹子？\",\r\n\t\t\t\t\t\t\"为什么会有人放站位edd！\",\r\n\t\t\t\t\t\t\"（Ash听到的敌方干员的声音）call a pizza！\",\r\n\t\t\t\t\t\t'（狼人手枪的枪声）女鬼:\"talk\"',\r\n\t\t\t\t\t\t\"(剃刀花的声音)\",\r\n\t\t\t\t\t\t\"(两个蛊声，三条枪线)\",\r\n\t\t\t\t\t\t\"(发射祖母榴弹->rush->火山盾炸裂的声音)\",\r\n\t\t\t\t\t\t\"“友军已将你击杀”\",\r\n\t\t\t\t\t].randomGet();\r\n\t\t\t\t\tif (num > 0) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"baigeimrfz\");\r\n\t\t\t\t\t\tplayer.chooseToDiscard(\"h\", num, true, \"弃置\" + get.cnNumber(num) + \"张手牌\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplayer.removeMark(\"wusumrfz\", 5);\r\n\t\t\t\t\tplayer.chat(chattext);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\t//异客\r\n\t\tshazumrfz: {\r\n\t\t\tmarktext: \"仇敌\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"仇敌\",\r\n\t\t\t\tcontent: \"沙卒盯上你了\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target.countCards(\"he\") > 0 && target != player;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { target } = event;\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tresult = await player.chooseCard(\"he\", true).forResult();\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tif (!result.cards) return;\r\n\t\t\t\tconst cardp = result.cards[0];\r\n\t\t\t\tlet next;\r\n\t\t\t\tif (target.countCards(\"e\") > 0) {\r\n\t\t\t\t\tnext = target.chooseCard(\"e\", true);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnext = target.chooseCard(\"h\", true);\r\n\t\t\t\t}\r\n\t\t\t\tresult = await next.forResult();\r\n\r\n\t\t\t\t// step 2\r\n\t\t\t\tif (!result.bool) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!result.cards) return;\r\n\t\t\t\t\tconst cardt = result.cards[0];\r\n\r\n\t\t\t\t\t// step 3\r\n\t\t\t\t\tplayer.swapHandcards(target, [cardp], [cardt]);\r\n\r\n\t\t\t\t\t// step 4\r\n\t\t\t\t\tconst numt = target.countCards(\"h\");\r\n\t\t\t\t\tconst nump = player.countCards(\"h\");\r\n\t\t\t\t\tif (numt === nump) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (numt > nump) {\r\n\t\t\t\t\t\tawait player.draw();\r\n\t\t\t\t\t} else if (nump > numt) {\r\n\t\t\t\t\t\tawait target.draw();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"shazumrfz_damage\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\taudio: \"shazumrfz\",\r\n\t\t\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.source != undefined && !event.source.hasMark(\"shazumrfz\") && event.source != player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlogTarget: \"source\",\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current.hasMark(\"shazumrfz\");\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current.removeMark(\"shazumrfz\");\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\ttrigger.source.addMark(\"shazumrfz\");\r\n\t\t\t\t\t\t} else trigger.source.addMark(\"shazumrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.1,\r\n\t\t\t\torder: 8,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: function (player, target) {\r\n\t\t\t\t\t\tif (get.attitude(player, target) > 0) return 1.5;\r\n\t\t\t\t\t\treturn 0.5;\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tif (get.attitude(player, target) < 2 && target.countCards(\"e\") > 0 && target.countCards(\"h\") > player.countCards(\"h\"))\r\n\t\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t\treturn 0.5;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tdianlianmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageSource\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.num <= 1) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tevent.player != player &&\r\n\t\t\t\t\tevent.player.isAlive() &&\r\n\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != event.player && get.distance(event.player, current) <= 1 && current != player;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && get.attitude(player, current) < 0 && current != event.player;\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t\treturn true;\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tresult = await player\r\n\t\t\t\t\t.chooseTarget(\r\n\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t\"选择一名与\" + get.translation(trigger.player) + \"距离为 1 的角色并对其造成\" + (trigger.num - 1) + \"点伤害\",\r\n\t\t\t\t\t\t(card, player, target) => {\r\n\t\t\t\t\t\t\tconst damaged = trigger.player;\r\n\t\t\t\t\t\t\treturn get.distance(damaged, target) <= 1 && target !== damaged && target !== player;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\treturn -get.attitude(player, target);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tconst num = trigger.num - 1;\r\n\t\t\t\tif (result.targets) {\r\n\t\t\t\t\tconst target = result.targets[0];\r\n\t\t\t\t\tawait target.damage(\"player\", num);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"dianlianmrfz_damage\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\taudio: \"dianlianmrfz\",\r\n\t\t\t\t\ttrigger: { source: \"damageBegin3\" },\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\treturn get.attitude(player, event.player) < 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.nature == \"thunder\" && !player.storage.dianlianmrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: \"是否令此伤害+1\",\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t\tplayer.storage.dianlianmrfz = true;\r\n\t\t\t\t\t\tplayer.addSkill(\"dianlianmrfz_remove\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tremove: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.dianlianmrfz = false;\r\n\t\t\t\t\t\tplayer.removeSkill(\"dianlianmrfz_remove\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tleibaomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tselectTarget: 1,\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\tif (target == player) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\t!game.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && current.hp > target.hp;\r\n\t\t\t\t\t}) || target.hasMark(\"shazumrfz\")\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.getCards(\"he\", function (card) {\r\n\t\t\t\t\t\treturn get.type(card) == \"equip\";\r\n\t\t\t\t\t}).length >= 2 || player.countCards(\"h\", \"shandian\")\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { target } = event;\r\n\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseToDiscard(\"he\", true, function (card, player) {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tplayer.getCards(\"he\", function (card) {\r\n\t\t\t\t\t\t\t\treturn get.type(card) == \"equip\";\r\n\t\t\t\t\t\t\t}).length >= 2\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\treturn get.type(card) == \"equip\" || card.name == \"shandian\";\r\n\t\t\t\t\t\treturn card.name == \"shandian\";\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"prompt\", \"请弃置一张【闪电】，或依次弃置两张装备牌。\")\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (result.cards && result.cards[0].name != \"shandian\") {\r\n\t\t\t\t\tawait player\r\n\t\t\t\t\t\t.chooseToDiscard(\"he\", true, function (card, player) {\r\n\t\t\t\t\t\t\treturn get.type(card) == \"equip\";\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"prompt\", \"请弃置一张装备牌。\");\r\n\t\t\t\t\ttarget.damage(\"player\", 2);\r\n\t\t\t\t} else target.damage(\"player\", 2, \"thunder\");\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.2,\r\n\t\t\t\torder: 13,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: -1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//年\r\n\t\tzhujimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"phaseDrawAfter\", \"phaseJieshuAfter\"],\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\t\t\t\tresult = await player\r\n\t\t\t\t\t.chooseToDiscard(\"he\", get.prompt(\"zhujimrfz\"), \"【铸极】:你可以重铸一张牌\")\r\n\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (result.cards) player.draw();\r\n\t\t\t\tif (result.cards && get.type(result.cards[0]) == \"equip\") {\r\n\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"zhujimrfz\");\r\n\t\t\t\t} else if (result.cards) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"zhujimrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\ttongyinmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.source != undefined && event.source != player;\r\n\t\t\t},\r\n\t\t\tusable: 1,\r\n\t\t\tlogTarget: \"source\",\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.source) < 2;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\t\t\t\tif (!trigger.source.hasSkill(\"fengyin\")) {\r\n\t\t\t\t\ttrigger.source.addTempSkill(\"fengyin\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tresult = await trigger.source\r\n\t\t\t\t\t.chooseToDiscard(\r\n\t\t\t\t\t\t\"he\",\r\n\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t\"【铜印】:请选择弃置一张非基本或\" + get.translation(Math.min(player.getDamagedHp() + 1, 1)) + \"张基本牌\"\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (player.getDamagedHp() < 2) event.finish();\r\n\r\n\t\t\t\tif (result && result.cards && get.type(result.cards[0]) == \"basic\") {\r\n\t\t\t\t\ttrigger.source\r\n\t\t\t\t\t\t.chooseToDiscard(\r\n\t\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t\t\"【铜印】:请选择弃置\" + get.translation(player.getDamagedHp() - 1) + \"张基本牌\",\r\n\t\t\t\t\t\t\t[1, player.getDamagedHp() - 1],\r\n\t\t\t\t\t\t\tfunction (card) {\r\n\t\t\t\t\t\t\t\treturn get.type(card) == \"basic\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 0.5,\r\n\t\t\t\texpose: 0.4,\r\n\t\t\t},\r\n\t\t},\r\n\t\ttieyumrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"使用【杀】的次数+#；可令大于一的伤害改为一#次\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"useCard\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\treturn player.countMark(\"tieyumrfz_clear2\") < 2 && get.type(event.card) == \"equip\";\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.player) > 2;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (trigger.player.getDamagedHp() > 0) trigger.player.recover();\r\n\t\t\t\telse trigger.player.changeHujia();\r\n\t\t\t\ttrigger.player.addSkill([\"tieyumrfz_sha\", \"tieyumrfz_damage\", \"tieyumrfz_clear\"]);\r\n\t\t\t\ttrigger.player.addMark(\"tieyumrfz\");\r\n\t\t\t\tplayer.addMark(\"tieyumrfz_clear2\", 1);\r\n\t\t\t},\r\n\t\t\tgroup: \"tieyumrfz_clear2\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tsha: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num + player.countMark(\"tieyumrfz\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"damageBegin3\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.num > 1 && player.countMark(\"tieyumrfz_damage\") < player.countMark(\"tieyumrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num = 1;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"tieyumrfz\");\r\n\t\t\t\t\t\tplayer.addMark(\"tieyumrfz_damage\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeSkill(\"tieyumrfz_damage\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"tieyumrfz_sha\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"tieyumrfz_clear\");\r\n\t\t\t\t\t\tplayer.removeMark(\"tieyumrfz\", player.countMark(\"tieyumrfz\"));\r\n\t\t\t\t\t\tplayer.removeMark(\"tieyumrfz_damage\", player.countMark(\"tieyumrfz_damage\"));\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear2: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"tieyumrfz_clear2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeMark(\"tieyumrfz_clear2\", player.countMark(\"tieyumrfz_clear2\"));\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.2,\r\n\t\t\t\texpose: 0.8,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//令\r\n\t\tshixingmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"expansion\",\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t},\r\n\t\t\tonremove: function (player, skill) {\r\n\t\t\t\tvar cards = player.getExpansions(skill);\r\n\t\t\t\tif (cards.length) player.loseToDiscardpile(cards);\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\taudio: 6,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tplayer.getExpansions(\"shixingmrfz\").filter(function (magic) {\r\n\t\t\t\t\t\treturn get.type2(magic) == \"equip\";\r\n\t\t\t\t\t}).length &&\r\n\t\t\t\t\tplayer.hasCard(function (card) {\r\n\t\t\t\t\t\treturn get.type(card) == \"equip\";\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t\treturn true;\r\n\t\t\t\tif (player.countCards(\"h\") < 3 && player.getExpansions(\"shixingmrfz\").length) return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tlet skipToStep4 = false;\r\n\t\t\t\tif (player.getExpansions(\"shixingmrfz\").length <= 1 && player.getExpansions(\"shixingmrfz\").length) {\r\n\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t.chooseControl(\"弃置\", \"增加\")\r\n\t\t\t\t\t\t.set(\"prompt\", \"选择弃置所有置于武将牌上的牌或往武将牌上放置牌\")\r\n\t\t\t\t\t\t.set(\"ai\", (event, player) => {\r\n\t\t\t\t\t\t\tconst num = Math.random();\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tplayer.getExpansions(\"shixingmrfz\").filter(magic => {\r\n\t\t\t\t\t\t\t\t\treturn get.type2(magic) === \"equip\";\r\n\t\t\t\t\t\t\t\t}).length &&\r\n\t\t\t\t\t\t\t\tplayer.countCards(\"h\") < 4\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\tif (num <= 0.6) return 0;\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t} else if (player.getExpansions(\"shixingmrfz\").length === 0) {\r\n\t\t\t\t\tskipToStep4 = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 1 (可能被 goto(4) 跳过)\r\n\t\t\t\tif (!skipToStep4) {\r\n\t\t\t\t\tif (result?.control === \"弃置\" || player.getExpansions(\"shixingmrfz\").length > 1) {\r\n\t\t\t\t\t\tevent.num = 0;\r\n\t\t\t\t\t\t// 清平弃置：basic 类型 expansion → 摸基本牌\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tplayer.getExpansions(\"shixingmrfz\").filter(magic => {\r\n\t\t\t\t\t\t\t\treturn get.type2(magic) === \"basic\";\r\n\t\t\t\t\t\t\t}).length\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tawait player.gain(\r\n\t\t\t\t\t\t\t\tget.cardPile(card => {\r\n\t\t\t\t\t\t\t\t\treturn get.type(card) === \"basic\";\r\n\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t\"gain2\"\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// 弦惊选角色：equip 类型 expansion → 弃置其他角色牌\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tplayer.getExpansions(\"shixingmrfz\").filter(magic => {\r\n\t\t\t\t\t\t\t\treturn get.type2(magic) === \"equip\";\r\n\t\t\t\t\t\t\t}).length\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tevent.num++;\r\n\t\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t\t.chooseTarget(\"【诗型】:弃置一名其他角色的一张牌\", false, (card, target, player) => {\r\n\t\t\t\t\t\t\t\t\treturn target !== player;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\t\t\treturn -get.attitude(_status.event.player, target);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// 逍遥弃置：trick 类型 expansion → 摸牌+回复\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tplayer.getExpansions(\"shixingmrfz\").filter(magic => {\r\n\t\t\t\t\t\t\t\treturn get.type2(magic) === \"trick\";\r\n\t\t\t\t\t\t\t}).length\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tawait player.draw();\r\n\t\t\t\t\t\t\tawait player.recover();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (result?.control === \"增加\") {\r\n\t\t\t\t\t\tskipToStep4 = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 2 (可能被跳过)\r\n\t\t\t\tif (!skipToStep4 && result && result.targets && event.num === 1) {\r\n\t\t\t\t\tawait player.discardPlayerCard(result.targets[0], \"he\", true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 3 (可能被跳过)\r\n\t\t\t\tif (!skipToStep4) {\r\n\t\t\t\t\tplayer.loseToDiscardpile(player.getExpansions(\"shixingmrfz\"));\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 4-5 loop (step 5 可能 goto 4)\r\n\t\t\t\twhile (!skipToStep4) {\r\n\t\t\t\t\t// step 4\r\n\t\t\t\t\tlet hasValidCard = false;\r\n\t\t\t\t\tif (!player.getExpansions(\"shixingmrfz\").length) {\r\n\t\t\t\t\t\thasValidCard = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\thasValidCard = player.hasCard(card => {\r\n\t\t\t\t\t\t\treturn player.getExpansions(\"shixingmrfz\").filter(magic => {\r\n\t\t\t\t\t\t\t\treturn get.type2(magic) === get.type2(card);\r\n\t\t\t\t\t\t\t}).length;\r\n\t\t\t\t\t\t}, \"he\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (hasValidCard) {\r\n\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t.chooseCard(\"he\", \"依次将最多两张牌至于武将牌上\", (card, player) => {\r\n\t\t\t\t\t\t\t\tif (player.getExpansions(\"shixingmrfz\").length) {\r\n\t\t\t\t\t\t\t\t\treturn player.getExpansions(\"shixingmrfz\").filter(magic => {\r\n\t\t\t\t\t\t\t\t\t\treturn get.type2(magic) === get.type2(card);\r\n\t\t\t\t\t\t\t\t\t}).length;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tbreak; // event.finish()\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// step 5\r\n\t\t\t\t\tif (result?.cards?.length) {\r\n\t\t\t\t\t\tconst next = player.addToExpansion(result.cards, player, \"giveAuto\");\r\n\t\t\t\t\t\tnext.gaintag.add(\"shixingmrfz\");\r\n\t\t\t\t\t\tawait next;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (result?.cards && player.getExpansions(\"shixingmrfz\").length < 1) {\r\n\t\t\t\t\t\tcontinue; // goto 4\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"shixingmrfz_basic\", \"shixingmrfz_trick\", \"shixingmrfz_equip\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\t//清平\r\n\t\t\t\tbasic: {\r\n\t\t\t\t\taudio: \"shixingmrfz\",\r\n\t\t\t\t\ttrigger: { player: \"damageBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.getExpansions(\"shixingmrfz\").filter(function (magic) {\r\n\t\t\t\t\t\t\treturn get.type2(magic) == \"basic\";\r\n\t\t\t\t\t\t}).length;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst cards = player.getExpansions(\"shixingmrfz\");\r\n\t\t\t\t\t\tlet result;\r\n\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\tif (cards.length) {\r\n\t\t\t\t\t\t\tresult = await player.chooseButton([`选择移去一张\"清平\"`, cards], true).forResult();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 1\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tawait player.loseToDiscardpile(result.links);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttrigger.num--;\r\n\t\t\t\t\t\tplayer.popup(\"清平\");\r\n\t\t\t\t\t\tgame.log(player, \"移去了一张'清平'\");\r\n\r\n\t\t\t\t\t\t// step 2\r\n\t\t\t\t\t\tconst card = get.cardPile(card => {\r\n\t\t\t\t\t\t\treturn get.type(card) === \"basic\";\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tplayer.getExpansions(\"shixingmrfz\").filter(magic => {\r\n\t\t\t\t\t\t\t\treturn get.type2(magic) === \"basic\";\r\n\t\t\t\t\t\t\t}).length < 1\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tawait player.gain(card, \"gain2\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t//弦惊\r\n\t\t\t\tequip: {\r\n\t\t\t\t\taudio: \"shixingmrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tplayer.getExpansions(\"shixingmrfz\").filter(function (magic) {\r\n\t\t\t\t\t\t\t\treturn get.type2(magic) == \"equip\";\r\n\t\t\t\t\t\t\t}).length > 1\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num += 2;\r\n\t\t\t\t\t\tplayer.popup(\"弦惊\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tplayer.getExpansions(\"shixingmrfz\").filter(function (magic) {\r\n\t\t\t\t\t\t\t\t\treturn get.type2(magic) == \"equip\";\r\n\t\t\t\t\t\t\t\t}).length\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn num + 2;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tcard.name == \"sha\" &&\r\n\t\t\t\t\t\t\t\tplayer.getExpansions(\"shixingmrfz\").filter(function (magic) {\r\n\t\t\t\t\t\t\t\t\treturn get.type2(magic) == \"equip\";\r\n\t\t\t\t\t\t\t\t}).length > 1\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn num + 2;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t//逍遥\r\n\t\t\t\ttrick: {\r\n\t\t\t\t\taudio: \"shixingmrfz\",\r\n\t\t\t\t\tenable: \"phaseUse\",\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tplayer.getExpansions(\"shixingmrfz\").filter(function (magic) {\r\n\t\t\t\t\t\t\t\treturn get.type2(magic) == \"trick\";\r\n\t\t\t\t\t\t\t}).length > 0 && event.filterCard({ name: \"sha\" }, player, event)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tchooseButton: {\r\n\t\t\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\t\t\treturn ui.create.dialog(\"逍遥\", player.getExpansions(\"shixingmrfz\"), \"hidden\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tfilterCard: function () {\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tselectCard: -1,\r\n\t\t\t\t\t\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\t\t\t\t\t\treturn target != player && player.inRange(target);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcard: links[0],\r\n\t\t\t\t\t\t\t\tcontent: lib.skill.shixingmrfz_trick.contentx,\r\n\t\t\t\t\t\t\t\tai: {\r\n\t\t\t\t\t\t\t\t\torder: 8,\r\n\t\t\t\t\t\t\t\t\trespondSha: true,\r\n\t\t\t\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\t\t\t\ttarget: -1,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tprompt: function () {\r\n\t\t\t\t\t\t\treturn \"请选择【杀】的目标\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync contentx(event, trigger, player) {\r\n\t\t\t\t\t\tconst { target } = event;\r\n\t\t\t\t\t\tconst card = lib.skill.shixingmrfz_trick_backup.card;\r\n\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\tplayer.addTempSkill(\"shixingmrfz_damage\", \"shaEnd\");\r\n\t\t\t\t\t\tplayer.addTempSkill(\"shixingmrfz_sha\", \"useCardAfter\");\r\n\r\n\t\t\t\t\t\t// step 1\r\n\t\t\t\t\t\tawait player.useCard({ name: \"sha\", isCard: true }, true, target);\r\n\t\t\t\t\t\tgame.log(player, \"视为对\", target, \"使用【杀】\");\r\n\t\t\t\t\t\tplayer.logSkill(\"shixingmrfz\");\r\n\r\n\t\t\t\t\t\t// step 2\r\n\t\t\t\t\t\tif (!player.storage.shixingmrfz_damage) {\r\n\t\t\t\t\t\t\tawait player.loseToDiscardpile(card);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tawait player.gain(card, \"gain2\");\r\n\t\t\t\t\t\t\tplayer.storage.shixingmrfz_damage = false;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 3\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tplayer.getExpansions(\"shixingmrfz\").filter(magic => {\r\n\t\t\t\t\t\t\t\treturn get.type2(magic) === \"trick\";\r\n\t\t\t\t\t\t\t}).length < 1\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tawait player.recover();\r\n\t\t\t\t\t\t\tawait player.draw();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\trespondSha: true,\r\n\t\t\t\t\t\torder: 4,\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tplayer.getExpansions(\"shixingmrfz\").filter(function (magic) {\r\n\t\t\t\t\t\t\t\t\treturn get.type2(magic) == \"trick\";\r\n\t\t\t\t\t\t\t\t}).length < 1\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\tif (arg != \"use\") return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"shaMiss\" },\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.shixingmrfz_damage = true;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tsha: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (trigger.addCount !== false) {\r\n\t\t\t\t\t\t\ttrigger.addCount = false;\r\n\t\t\t\t\t\t\tplayer.getStat().card.sha--;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: function (player) {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tplayer.getExpansions(\"shixingmrfz\").filter(function (magic) {\r\n\t\t\t\t\t\t\treturn get.type2(magic) == \"basic\";\r\n\t\t\t\t\t\t}).length > 0\r\n\t\t\t\t\t)\r\n\t\t\t\t\t\treturn 0.8;\r\n\t\t\t\t\treturn 1.2;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzuimengmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tunique: true,\r\n\t\t\tmark: true,\r\n\t\t\tlimited: true,\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationStr: \"醉梦\",\r\n\t\t\tanimationColor: \"fire\",\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.zuimengmrfz = false;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.zuimengmrfz && player.countCards(\"h\", \"jiu\") > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tplayer.awakenSkill(event.name);\r\n\t\t\t\tplayer.storage.zuimengmrfz = true;\r\n\t\t\t\tawait player.chooseToUse(\r\n\t\t\t\t\ttrue,\r\n\t\t\t\t\t(card, player, event) => {\r\n\t\t\t\t\t\treturn get.name(card) === \"jiu\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"使用一张【酒】\"\r\n\t\t\t\t);\r\n\t\t\t\tevent.num = 0;\r\n\r\n\t\t\t\t// step 1-2 loop (原 event.goto(1) 转换为 continue)\r\n\t\t\t\twhile (event.num < game.players.length) {\r\n\t\t\t\t\t// step 1\r\n\t\t\t\t\tevent.num++;\r\n\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t.chooseTarget(\r\n\t\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t\t\"【醉梦\" + event.num + \"/\" + game.players.length + \"】：选择一名角色，获得其区域内一张牌\",\r\n\t\t\t\t\t\t\t(card, player, target) => {\r\n\t\t\t\t\t\t\t\treturn target.countMark(\"zuimengmrfz_remove\") < 2;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\t\tconst att = get.attitude(aiPlayer, target);\r\n\t\t\t\t\t\t\tif (att < 0) {\r\n\t\t\t\t\t\t\t\treturn -Math.sqrt(-att);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn Math.sqrt(att);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t// step 2\r\n\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\tconst target = result.targets[0];\r\n\t\t\t\t\t\tif (!target.hasSkill(\"zuimengmrfz_remove\")) {\r\n\t\t\t\t\t\t\ttarget.addTempSkill(\"zuimengmrfz_remove\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tawait player.gainPlayerCard(\"hej\", target, true);\r\n\t\t\t\t\t\ttarget.addMark(\"zuimengmrfz_remove\", 1);\r\n\t\t\t\t\t\tcontinue; // goto 1: 回到循环开头\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tbreak; // result.bool 为 false 时退出循环\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 原 step 1 的 else 分支（循环条件不满足时执行）\r\n\t\t\t\tif (player.countCards(\"h\") < game.players.length) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tawait player.drawTo(game.players.length);\r\n\t\t\t\t}\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (event.getParent(\"phaseUse\")) event.getParent(\"phaseUse\").skipped = true;\r\n\t\t\t\tplayer.addTempSkill(\"zuimengmrfz_skip\");\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tremove: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeMark(\"zuimengmrfz_remove\", player.countMark(\"zuimengmrfz_remove\"));\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tskip: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDiscardBefore\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 6,\r\n\t\t\t\tthreaten: 0.6,\r\n\t\t\t\texpose: 0.6,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thaojiumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.card.name == \"jiu\" && player.getDamagedHp() > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.recover();\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tif (card.name == \"jiu\") return Infinity;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//风笛\r\n\t\tjuntongmrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.draw(3);\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\treturn num - 1;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"juntongmrfz_ban\", \"juntongmrfz_sha\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"phaseJudgeBefore\", \"phaseDrawBefore\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tsha: {\r\n\t\t\t\t\taudio: \"juntongmrfz\",\r\n\t\t\t\t\ttrigger: { player: \"useCard2\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet result;\r\n\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t.judge(card => {\r\n\t\t\t\t\t\t\t\tconst suit = get.suit(card);\r\n\t\t\t\t\t\t\t\tif (suit === \"heart\" || suit === \"diamond\" || suit === \"spade\") return -4;\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"judge2\", result => {\r\n\t\t\t\t\t\t\t\treturn result.bool === false;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t// step 1\r\n\t\t\t\t\t\tif (result.suit === \"diamond\") {\r\n\t\t\t\t\t\t\tif (trigger.addCount !== false) {\r\n\t\t\t\t\t\t\t\ttrigger.addCount = false;\r\n\t\t\t\t\t\t\t\tplayer.getStat().card.sha--;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (result.suit === \"heart\") {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\t\t\t\treturn !trigger.targets.includes(current) && !!player.canUse(trigger.card, current);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t\t\t.chooseTarget(\r\n\t\t\t\t\t\t\t\t\t\tget.prompt(\"juntongmrfz\"),\r\n\t\t\t\t\t\t\t\t\t\t\"为\" + get.translation(trigger.card) + \"增加一个目标\",\r\n\t\t\t\t\t\t\t\t\t\t(card, player, target) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn !_status.event.sourcex.includes(target) && player.canUse(_status.event.card, target);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t.set(\"sourcex\", trigger.targets)\r\n\t\t\t\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\t\t\t\t\treturn get.effect(target, _status.event.card, aiPlayer, aiPlayer);\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.set(\"card\", trigger.card)\r\n\t\t\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t\t\t// step 2 (内联到 heart 分支，因原流程中 step 2 仅在 heart 且选择目标后执行)\r\n\t\t\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\t\t\ttrigger.targets.push(result.targets[0]);\r\n\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\tplayer.logSkill(\"juntongmrfz\", result.targets[0]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (result.suit === \"spade\") {\r\n\t\t\t\t\t\t\tawait player.draw();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// club 或其他情况，直接结束流程\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget: function (card, player, target, current) {\r\n\t\t\t\t\t\tif (get.type(card) == \"delay\") return \"zeroplayertarget\";\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tpochengmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardToTargeted\" },\r\n\t\t\tonremove: true,\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.target) < 0;\r\n\t\t\t},\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.pochengmrfz = false;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.card.name == \"sha\" && game.roundNumber != 1 && !player.storage.pochengmrfz;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t// step 0\r\n\t\t\t\tplayer.storage.pochengmrfz = true;\r\n\t\t\t\tevent.num = 2;\r\n\r\n\t\t\t\t// step 1 loop (原 event.goto(1) 转换为 while 循环)\r\n\t\t\t\twhile (event.num > 0) {\r\n\t\t\t\t\tevent.num--;\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\ttrigger.getParent().targets = trigger.getParent().targets.concat(trigger.targets);\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\ttrigger.getParent().triggeredTargets4 = trigger.getParent().triggeredTargets4.concat(trigger.targets);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 2\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tevent.getParent(\"phaseUse\").skipped = true;\r\n\t\t\t\tplayer.addTempSkill(\"pochengmrfz_one\");\r\n\t\t\t},\r\n\t\t\tgroup: \"pochengmrfz_clear\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.storage.pochengmrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addMark(\"pochengmrfz_clear\", 1);\r\n\t\t\t\t\t\tif (player.countMark(\"pochengmrfz_clear\") >= 3) {\r\n\t\t\t\t\t\t\tplayer.storage.pochengmrfz = false;\r\n\t\t\t\t\t\t\tplayer.removeMark(\"pochengmrfz_clear\", player.countMark(\"pochengmrfz_clear\"));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tone: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn num + 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//琴柳\r\n\t\tjunqimrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\tgroup: [\"junqimrfz_reget\", \"junqimrfz_get\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\trem: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"die\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.hasSkill(\"junqimrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar isSkillandRemove = function (str, who) {\r\n\t\t\t\t\t\t\tif (who.hasSkill(str)) who.removeSkill(str);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tisSkillandRemove(\"junqimrfz_zhiyu\", player);\r\n\t\t\t\t\t\tisSkillandRemove(\"junqimrfz_zhiyuan\", player);\r\n\t\t\t\t\t\tisSkillandRemove(\"junqimrfz_jingong\", player);\r\n\t\t\t\t\t\tisSkillandRemove(\"butuimrfz\", player);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tzhiyu: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tmarktext: \"军旗\",\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tname: \"军旗（治愈之旗）\",\r\n\t\t\t\t\t\tcontent: \"出牌阶段开始时，其可弃置至多三张牌，然后其选择等量角色，然后其回复一点体力并令其中手牌数最少的角色摸一张牌\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.countCards(\"h\") > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: \"是否发动【军旗(治愈之旗)】\",\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet result;\r\n\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t.chooseToDiscard(\"he\", true, [1, 3], \"请弃置至多三张牌\")\r\n\t\t\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t// step 1\r\n\t\t\t\t\t\tif (result.cards) {\r\n\t\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t\t.chooseTarget(true, [1, result.cards.length], \"请选择至多\" + result.cards.length + \"名角色\")\r\n\t\t\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\t\t\treturn get.attitude(_status.event.player, target);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 2\r\n\t\t\t\t\t\tif (result.bool && result.targets) {\r\n\t\t\t\t\t\t\tlet min = player.countCards(\"h\");\r\n\t\t\t\t\t\t\tlet min_player = player;\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"junqimrfz\");\r\n\t\t\t\t\t\t\tfor (const target of result.targets) {\r\n\t\t\t\t\t\t\t\tawait target.recover();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tfor (const target of result.targets) {\r\n\t\t\t\t\t\t\t\tif (target === player) continue;\r\n\t\t\t\t\t\t\t\tconst num = target.countCards(\"h\");\r\n\t\t\t\t\t\t\t\tif (num < min) {\r\n\t\t\t\t\t\t\t\t\tmin = num;\r\n\t\t\t\t\t\t\t\t\tmin_player = target;\r\n\t\t\t\t\t\t\t\t} else if (num === min) {\r\n\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\tmin_player = undefined;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (min_player) {\r\n\t\t\t\t\t\t\t\tawait min_player.draw();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tawait game.delayx();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgroup: \"junqimrfz_rem\",\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\texpose: 0.6,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tjingong: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tmarktext: \"军旗\",\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tname: \"军旗（进攻之旗）\",\r\n\t\t\t\t\t\tcontent: \"当与你距离不大于2的其他角色受到伤害时，你可以弃置一张牌，令此伤害+1；使用【杀】的次数+1\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: { global: \"damageBegin3\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tget.distance(player, event.player) <= 2 && event.player.isIn() && event.player != player && player.countCards(\"he\") > 0\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: function (event, player) {\r\n\t\t\t\t\t\treturn \"【军旗(进攻之旗)】:是否弃置一张牌，令此伤害对\" + get.translation(event.player) + \"+1？\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\treturn get.attitude(player, event.player) < 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.chooseToDiscard(\"he\", true, \"弃置一张牌\");\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"junqimrfz\", trigger.player);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num + 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgroup: \"junqimrfz_rem\",\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\texpose: 0.8,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tzhiyuan: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tmarktext: \"军旗\",\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tname: \"军旗（支援之旗）\",\r\n\t\t\t\t\t\tcontent: \"与其距离不大于1的角色受到伤害后，其可摸一张牌，然后交给受伤角色一张牌；摸牌阶段摸牌数+1\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: { global: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn get.distance(player, event.player) <= 1 && event.player.isIn();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\treturn get.attitude(player, event.player) > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: function (event, player) {\r\n\t\t\t\t\t\tif (event.player == player) return \"【军旗(支援之旗)】:你是否摸一张牌？\";\r\n\t\t\t\t\t\treturn \"【军旗(支援之旗)】:是否摸一张牌并交给\" + get.translation(event.player) + \"一张牌？\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet result;\r\n\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"junqimrfz\", trigger.player);\r\n\t\t\t\t\t\tif (trigger.player != player) {\r\n\t\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t\t.chooseCard(true, \"he\", \"交给\" + get.translation(trigger.player) + \"一张牌\")\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\t\t\tif (get.position(card) == \"e\") return -1;\r\n\t\t\t\t\t\t\t\t\tif (card.name == \"shan\" || card.name == \"tao\" || card.name == \"jiu\") return 1;\r\n\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (result && result.cards) player.give(result.cards, trigger.player, \"give\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgroup: [\"junqimrfz_draw\", \"junqimrfz_rem\"],\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\texpose: 0.4,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\taudio: \"junqimrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tget: {\r\n\t\t\t\t\taudio: \"junqimrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst str1 = \"【支援之旗】:与其距离不大于 1 的角色受到伤害时，其可摸一张牌，然后交给受伤角色一张牌；摸牌阶段摸牌数 +1\";\r\n\t\t\t\t\t\tconst str2 =\r\n\t\t\t\t\t\t\t\"【治愈之旗】:出牌阶段开始时，其可弃置至多三张牌，然后其选择等量角色，然后其回复一点体力并令其中手牌数最少的角色摸至 4 张\";\r\n\t\t\t\t\t\tconst str3 = \"【进攻之旗】:当与你距离不大于 2 的角色受到伤害后，你可以弃置一张牌，令此伤害 +1；使用【杀】的次数 +1\";\r\n\t\t\t\t\t\tlet result;\r\n\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t.chooseControl(\"支援之旗\", \"治愈之旗\", \"进攻之旗\")\r\n\t\t\t\t\t\t\t.set(\"choiceList\", [str1, str2, str3])\r\n\t\t\t\t\t\t\t.set(\"ai\", (event, player) => {\r\n\t\t\t\t\t\t\t\treturn [0, 2].randomGet();\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t// step 1\r\n\t\t\t\t\t\tconst list = [\"junqimrfz_zhiyuan\", \"junqimrfz_zhiyu\", \"junqimrfz_jingong\"];\r\n\t\t\t\t\t\tfor (let i = 0; i < list.length; i++) {\r\n\t\t\t\t\t\t\tif (result.index === i) {\r\n\t\t\t\t\t\t\t\tplayer.addSkill(list[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tplayer.removeSkill(\"junqimrfz_get\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\treget: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst list = [\"junqimrfz_zhiyuan\", \"junqimrfz_zhiyu\", \"junqimrfz_jingong\"];\r\n\t\t\t\t\t\tlet result;\r\n\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"junqimrfz\");\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\tcurrent.hasSkill(\"junqimrfz_zhiyuan\") ||\r\n\t\t\t\t\t\t\t\t\tcurrent.hasSkill(\"junqimrfz_jingong\") ||\r\n\t\t\t\t\t\t\t\t\tcurrent.hasSkill(\"junqimrfz_zhiyu\")\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tgame.countPlayer(current => {\r\n\t\t\t\t\t\t\t\tfor (let i = 0; i < list.length; i++) {\r\n\t\t\t\t\t\t\t\t\tif (current.hasSkill(list[i]) && current !== player) {\r\n\t\t\t\t\t\t\t\t\t\tcurrent.removeSkill(list[i]);\r\n\t\t\t\t\t\t\t\t\t\tplayer.addSkill(list[i]);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 1\r\n\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t.chooseControl(\"确定\", \"cancel2\")\r\n\t\t\t\t\t\t\t.set(\"prompt\", get.prompt(\"junqimrfz\"))\r\n\t\t\t\t\t\t\t.set(\"prompt2\", \"是否更换‘军旗’类型\")\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t// step 2\r\n\t\t\t\t\t\tif (result.control === \"cancel2\") {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfor (let i = 0; i < list.length; i++) {\r\n\t\t\t\t\t\t\t\tif (player.hasSkill(list[i])) {\r\n\t\t\t\t\t\t\t\t\tplayer.removeSkill(list[i]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 3\r\n\t\t\t\t\t\tconst str1 = \"【支援之旗】:与其距离不大于 1 的角色受到伤害时，其可摸一张牌，然后交给受伤角色一张牌；摸牌阶段摸牌数 +1\";\r\n\t\t\t\t\t\tconst str2 =\r\n\t\t\t\t\t\t\t\"【治愈之旗】:出牌阶段开始时，其可弃置至多三张牌，然后其选择等量角色，然后其回复一点体力并令其中手牌数最少的角色摸至 4 张\";\r\n\t\t\t\t\t\tconst str3 = \"【进攻之旗】:当与你距离不大于 2 的角色受到伤害后，你可以弃置一张牌，令此伤害 +1；使用【杀】的次数 +1\";\r\n\r\n\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t.chooseControl(\"支援之旗\", \"治愈之旗\", \"进攻之旗\")\r\n\t\t\t\t\t\t\t.set(\"choiceList\", [str1, str2, str3])\r\n\t\t\t\t\t\t\t.set(\"ai\", (event, player) => {\r\n\t\t\t\t\t\t\t\tconst num = Math.random();\r\n\t\t\t\t\t\t\t\tif (player.hp <= 1) return 1;\r\n\t\t\t\t\t\t\t\tif (num > 0.6) return 2;\r\n\t\t\t\t\t\t\t\tif (num < 0.3) return 0;\r\n\t\t\t\t\t\t\t\telse return [0, 1, 2].randomGet();\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t// step 4\r\n\t\t\t\t\t\tfor (let i = 0; i < list.length; i++) {\r\n\t\t\t\t\t\t\tif (result.index === i) {\r\n\t\t\t\t\t\t\t\tplayer.addSkill(list[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhiqimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player;\r\n\t\t\t},\r\n\t\t\tselectTarget: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.hasSkill(\"junqimrfz_zhiyuan\") || player.hasSkill(\"junqimrfz_jingong\") || player.hasSkill(\"junqimrfz_zhiyu\");\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { target } = event;\r\n\t\t\t\tconst list = [\"junqimrfz_zhiyuan\", \"junqimrfz_zhiyu\", \"junqimrfz_jingong\"];\r\n\t\t\t\tfor (const skill of list) {\r\n\t\t\t\t\tif (player.hasSkill(skill)) {\r\n\t\t\t\t\t\ttarget.addSkill(skill);\r\n\t\t\t\t\t\tplayer.removeSkill(skill);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"junqimrfz_rem\",\r\n\t\t\tai: {\r\n\t\t\t\torder: 1,\r\n\t\t\t\texpose: 0.8,\r\n\t\t\t\tthreaten: 1.1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tif (get.attitude(player, target) < 0) return 0;\r\n\t\t\t\t\t\tif (get.attitude(player, target) > 0) return 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tbutuimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { global: \"phaseBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tevent.player.hasSkill(\"junqimrfz_zhiyuan\") ||\r\n\t\t\t\t\tevent.player.hasSkill(\"junqimrfz_jingong\") ||\r\n\t\t\t\t\tevent.player.hasSkill(\"junqimrfz_zhiyu\")\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst list = [\"摸一张牌\"];\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tif (trigger.player.countCards(\"he\") > 0) {\r\n\t\t\t\t\tlist.add(\"弃两张牌并跳过判定阶段\");\r\n\t\t\t\t}\r\n\t\t\t\tresult = await trigger.player\r\n\t\t\t\t\t.chooseControl(list, \"cancel2\")\r\n\t\t\t\t\t.set(\"prompt2\", get.prompt(\"butuimrfz\"))\r\n\t\t\t\t\t.set(\"prompt\", \"请选择一项\")\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\tconst aiPlayer = _status.event.playerx;\r\n\t\t\t\t\t\tif (aiPlayer.countCards(\"j\") > 0 && aiPlayer.countCards(\"he\") > 0) return 1;\r\n\t\t\t\t\t\telse return 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"playerx\", trigger.player)\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tif (result.control !== \"cancel2\") {\r\n\t\t\t\t\tif (result.control === \"摸一张牌\") {\r\n\t\t\t\t\t\tawait trigger.player.draw();\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttrigger.player.logSkill(\"butuimrfz\");\r\n\t\t\t\t\t} else if (trigger.player.countCards(\"he\") > 0) {\r\n\t\t\t\t\t\tawait trigger.player.chooseToDiscard(\"he\", true, \"弃置两张牌\", 2);\r\n\t\t\t\t\t\ttrigger.player.addTempSkill(\"butuimrfz_skip\", {\r\n\t\t\t\t\t\t\tglobal: \"phaseEnd\",\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"butuimrfz\", trigger.player);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tskip: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseJudgeBefore\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//老鲤\r\n\t\tlinhuamrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { source: \"damageBegin3\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.source != undefined;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t\ttrigger.player.damage(\"nosource\", trigger.num);\r\n\t\t\t},\r\n\t\t\tgroup: [\"linhuamrfz_anti\", \"linhuamrfz_skip\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tanti: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"damageBegin3\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!event.nature) return false;\r\n\t\t\t\t\t\treturn player.countCards(\"he\") >= 2 && event.source != undefined;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlogTarget: \"source\",\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst result = await player\r\n\t\t\t\t\t\t\t.chooseToDiscard(\"he\", false, 2, \"你可以弃置两张牌将此伤害转移给\" + get.translation(trigger.source))\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\tif (result.cards) {\r\n\t\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t\t\ttrigger.source.damage(trigger.num, trigger.nature);\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"linhuamrfz\", trigger.source);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tskip: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseJudgeBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.countCards(\"h\") >= 2 && player.countCards(\"j\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet result;\r\n\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t.chooseToDiscard(\"h\", false, 2, \"你可以弃置两张牌并移动一张你判定区内的一张牌\")\r\n\t\t\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t// step 1\r\n\t\t\t\t\t\tif (result.cards && result.cards.length) {\r\n\t\t\t\t\t\t\tconst cards = player.getCards(\"j\");\r\n\t\t\t\t\t\t\tresult = await player.chooseButton([\"将你判定区的一张牌移动至一名角色的判定区\", cards]).forResult();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 2\r\n\t\t\t\t\t\tif (result.links && result.links.length) {\r\n\t\t\t\t\t\t\tevent.card = result.links[0];\r\n\t\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t\t.chooseTarget(true, \"选择\" + get.translation(event.card) + \"的移动目标\", (card, player, target) => {\r\n\t\t\t\t\t\t\t\t\treturn target !== player && target.canAddJudge(event.card);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 3\r\n\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\tconst target = result.targets[0];\r\n\t\t\t\t\t\t\tplayer.$give(event.card, target);\r\n\t\t\t\t\t\t\tawait game.delayx();\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"linhuamrfz\");\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tconst name = event.card.viewAs || event.card.name;\r\n\t\t\t\t\t\t\tif (event.card.name !== name) {\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\ttarget.addJudge(name, event.card);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\ttarget.addJudge(event.card);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tmingshimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 2,\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && !target.hasSkill(\"mingshimrfz2\");\r\n\t\t\t},\r\n\t\t\tselectTarget: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { target } = event;\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tresult = await player\r\n\t\t\t\t\t.chooseCard(\"he\", \"请选择一张牌交给\" + get.translation(target), true)\r\n\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tplayer.addTempSkill(\"mingshimrfz2\");\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tif (result.cards && result.cards.length) {\r\n\t\t\t\t\tawait player.give(result.cards, target);\r\n\t\t\t\t\ttarget.addTempSkill(\"mingshimrfz2\");\r\n\t\t\t\t\tplayer.line(target);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 2\r\n\t\t\t\tplayer.viewHandcards(target);\r\n\t\t\t\tgame.log(player, \"观看了\", target, \"的手牌\");\r\n\t\t\t\tif (target.countCards(\"h\") > 3) {\r\n\t\t\t\t\tawait player.discardPlayerCard(target, \"h\", [1, 3]).set(\"forceAuto\", true);\r\n\t\t\t\t\ttarget.addSkill(\"mingshimrfz_draw1\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t.chooseControl(\"令其摸一张\", \"令其摸两张\")\r\n\t\t\t\t\t\t.set(\"prompt\", \"【明事】:请选择一项\")\r\n\t\t\t\t\t\t.set(\"prompt2\", \"你可以令其摸[2/1]张牌，然后于下一个准备阶段弃置[1/2]张牌\")\r\n\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\tconst att = get.attitude(target, player);\r\n\t\t\t\t\t\t\tif (att > 0) return 1;\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 3\r\n\t\t\t\tif (result.index === 0) {\r\n\t\t\t\t\tawait target.draw();\r\n\t\t\t\t\ttarget.addSkill(\"mingshimrfz_dis2\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tawait target.draw(2);\r\n\t\t\t\t\ttarget.addSkill(\"mingshimrfz_dis1\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"mingshimrfz_ed\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\ted: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseJieshuBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasSkill(\"mingshimrfz2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdraw1: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseJieshuBegin\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\tplayer.removeSkill(\"mingshimrfz_draw1\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdis1: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.chooseToDiscard(\"he\", true, \"【明事】:弃置一张牌\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"mingshimrfz_dis1\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdis2: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.chooseToDiscard(\"he\", true, 2, \"【明事】:弃置两张牌\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"mingshimrfz_dis2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 1,\r\n\t\t\t\texpose: 0.2,\r\n\t\t\t\tthreaten: 1.2,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tvar att = get.attitude(player, target);\r\n\t\t\t\t\t\tif (att > 0 && target.countCards(\"h\") < 3) return 1;\r\n\t\t\t\t\t\tif (att < 0) return -1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tmingshimrfz2: {},\r\n\t\tjixiongmrfz: {\r\n\t\t\tgroup: \"jixiongmrfz2\",\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { global: \"phaseZhunbeiBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.player.hasMark(\"jixiongxmrfz\");\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\twhile (true) {\r\n\t\t\t\t\t// step 0\r\n\t\t\t\t\tresult = await trigger.player\r\n\t\t\t\t\t\t.judge(card => {\r\n\t\t\t\t\t\t\tconst color = get.color(card);\r\n\t\t\t\t\t\t\tif (color === \"black\") return 4;\r\n\t\t\t\t\t\t\treturn -4;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\ttrigger.player.removeMark(\"jixiongxmrfz\");\r\n\r\n\t\t\t\t\t// step 1\r\n\t\t\t\t\tif (result.color === \"black\") {\r\n\t\t\t\t\t\tresult = await trigger.player.chooseToDiscard(\"he\", true, \"【吉凶】:请弃置一张牌\").forResult();\r\n\t\t\t\t\t\tawait trigger.player.loseHp();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// step 2 (仅当非黑色时执行)\r\n\t\t\t\t\t\tif (result.cards && result.cards.length) {\r\n\t\t\t\t\t\t\tawait player.gain(result.cards, \"gain2\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// event.goto(0) / event.finish() 由 while 循环条件控制\r\n\r\n\t\t\t\t\tif (!trigger.player.hasMark(\"jixiongxmrfz\")) break;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.9,\r\n\t\t\t},\r\n\t\t},\r\n\t\tjixiongmrfz2: {\r\n\t\t\ttrigger: { global: \"gainEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.source && event.source.hasSkill(\"jixiongmrfz\");\r\n\t\t\t},\r\n\t\t\tlogTarget: \"source\",\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseControl(\"确定\", \"取消\")\r\n\t\t\t\t\t.set(\"prompt\", \"是否发动【吉凶】？\")\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\tvar att = get.attitude(trigger.source, player);\r\n\t\t\t\t\t\tif (att > 0) return 1;\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (result.control == \"确定\") {\r\n\t\t\t\t\ttrigger.player.addMark(\"jixiongxmrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tjixiongxmrfz: {\r\n\t\t\tcharlotte: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"准备阶段，你进行一次判定，若判定结果为黑色，则你须弃置一张牌并流失一点体力，然后弃置‘符纸’标记\",\r\n\t\t\t},\r\n\t\t},\r\n\t\t//阿\r\n\t\tguaijiemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\tfirstDo: true,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.guaijiemrfz;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.loseHp();\r\n\t\t\t},\r\n\t\t\tgroup: \"guaijiemrfz_damage\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\taudio: \"guaijiemrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn !player.storage.guaijiemrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.guaijiemrfz = true;\r\n\t\t\t\t\t\tplayer.addSkill(\"guaijiemrfz_remove\");\r\n\t\t\t\t\t\tconst result = await player\r\n\t\t\t\t\t\t\t.chooseTarget(true, \"弃置一名角色区域内的一张牌\", function (card, player, target) {\r\n\t\t\t\t\t\t\t\treturn target.countCards(\"hej\") > 0;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\tvar att = get.attitude(player, target);\r\n\t\t\t\t\t\t\t\tif (att < 0) {\r\n\t\t\t\t\t\t\t\t\tatt = -Math.sqrt(-att);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tatt = Math.sqrt(att);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn att * lib.card.guohe.ai.result.target(player, target);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\t\t\tplayer.discardPlayerCard(target, \"hej\", true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tremove: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.guaijiemrfz = false;\r\n\t\t\t\t\t\tplayer.removeSkill(\"guaijiemrfz_remove\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tqizhenmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player;\r\n\t\t\t},\r\n\t\t\tselectTarget: 1,\r\n\t\t\tusable: 1,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { target } = event;\r\n\t\t\t\tlet result;\r\n\t\t\t\tlet skipStep1 = false;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tif (target.countCards(\"he\") === 0) {\r\n\t\t\t\t\tawait target.damage();\r\n\t\t\t\t\tskipStep1 = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst str1 = \"令\" + get.translation(target) + \"弃置两张牌\";\r\n\t\t\t\t\tconst str2 = \"对\" + get.translation(target) + \"造成一点伤害\";\r\n\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t.chooseControl(str1, str2)\r\n\t\t\t\t\t\t.set(\"prompt\", \"【奇针】:请选择一项\")\r\n\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\tif (target.hp > 2 && target.countCards(\"he\") < 4) return 1;\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 1 (可能被 goto(2) 跳过)\r\n\t\t\t\tif (!skipStep1) {\r\n\t\t\t\t\tif (result && result.index === 0) {\r\n\t\t\t\t\t\tawait target.chooseToDiscard(\"he\", true, 2, \"【奇针】:请弃置两张牌\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tawait target.damage();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 2\r\n\t\t\t\ttarget.addTempSkill(\"qizhenmrfz_effect\", {\r\n\t\t\t\t\tplayer: \"phaseEnd\",\r\n\t\t\t\t});\r\n\t\t\t\ttarget.changeHujia();\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teffect: {\r\n\t\t\t\t\taudio: \"qizhenmrfz\",\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card.name == \"sha\" || event.card.name == \"juedou\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.baseDamage++;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tguaiyaomrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { source: \"damageBegin3\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.player != player;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar target = trigger.player;\r\n\t\t\t\tvar num = Math.random();\r\n\t\t\t\tif (num < 0.1) {\r\n\t\t\t\t\ttarget.addTempSkill(\"guaiyaomrfz_skip\", {\r\n\t\t\t\t\t\tplayer: \"phaseEnd\",\r\n\t\t\t\t\t});\r\n\t\t\t\t\tplayer.popup(\"怪药·跳过\");\r\n\t\t\t\t\tgame.log(player, \"的【怪药】结果为<span class=thundertext>【怪药·跳过】</span>\");\r\n\t\t\t\t}\r\n\t\t\t\tif (num >= 0.1 && num < 0.325) {\r\n\t\t\t\t\tplayer.getDamagedHp() > 0 ? player.recover(2) : player.changeHujia();\r\n\t\t\t\t\tplayer.popup(\"怪药·回复\");\r\n\t\t\t\t\tgame.log(player, \"的【怪药】结果为<span class=thundertext>【怪药·回复】</span>\");\r\n\t\t\t\t}\r\n\t\t\t\tif (num >= 0.325 && num < 0.55) {\r\n\t\t\t\t\ttarget.chooseToDiscard(\"he\", true, \"【怪药】:请弃置一张牌\");\r\n\t\t\t\t\tplayer.popup(\"怪药·弃牌\");\r\n\t\t\t\t\tgame.log(player, \"的【怪药】结果为<span class=thundertext>【怪药·弃牌】</span>\");\r\n\t\t\t\t}\r\n\t\t\t\tif (num >= 0.55 && num < 0.775) {\r\n\t\t\t\t\ttarget.addTempSkill(\"guaiyaomrfz_decrease\", {\r\n\t\t\t\t\t\tplayer: \"phaseDrawAfter\",\r\n\t\t\t\t\t});\r\n\t\t\t\t\tplayer.popup(\"怪药·摸牌减少\");\r\n\t\t\t\t\tgame.log(player, \"的【怪药】结果为<span class=thundertext>【怪药·摸牌减少】</span>\");\r\n\t\t\t\t}\r\n\t\t\t\tif (num >= 0.775) {\r\n\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\tplayer.popup(\"怪药·摸牌\");\r\n\t\t\t\t\tgame.log(player, \"的【怪药】结果为<span class=thundertext>【怪药·摸牌】</span>\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tskip: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"跳过下个出牌和弃牌阶段\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\taudio: \"guaiyaomrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"phaseUseBegin\", \"phaseDiscardBefore\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdecrease: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"下个摸牌阶段摸牌数-1\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\taudio: \"guaiyaomrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num--;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//黑\r\n\t\theishimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { source: \"damageBegin3\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t(get.distance(player, event.player) <= (player.hasSkill(\"junumrfz_effect\") ? 3 : 1) || event.player.getEquip(2)) &&\r\n\t\t\t\t\tevent.card &&\r\n\t\t\t\t\tevent.card.name == \"sha\"\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (get.distance(player, trigger.player) <= (player.hasSkill(\"junumrfz_effect\") ? 3 : 1)) trigger.num++;\r\n\t\t\t\tif (trigger.player.getEquip(2)) trigger.num++;\r\n\t\t\t},\r\n\t\t\tgroup: \"heishimrfz_wushi\",\r\n\t\t\tmod: {\r\n\t\t\t\tplayerEnabled: function (card, player, target) {\r\n\t\t\t\t\tif (!player.hasSkill(\"junumrfz_effect\") && get.distance(player, target) > 2 && card.name == \"sha\") return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\twushi: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event) {\r\n\t\t\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tlogTarget: \"target\",\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (player.hasSkill(\"heishimrfz\")) player.logSkill(\"heishimrfz\");\r\n\t\t\t\t\t\ttrigger.target.addTempSkill(\"heishimrfz_wushi2\");\r\n\t\t\t\t\t\ttrigger.target.storage.heishimrfz_wushi2.add(trigger.card);\r\n\t\t\t\t\t\ttrigger.target.markSkill(\"heishimrfz_wushi2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tunequip_ai: true,\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t\t\tif (arg && arg.name == \"sha\") return true;\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\twushi2: {\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tai: { unequip2: true },\r\n\t\t\t\t\tinit: function (player, skill) {\r\n\t\t\t\t\t\tif (!player.storage[skill]) player.storage[skill] = [];\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"damage\", \"damageCancelled\", \"damageZero\"],\r\n\t\t\t\t\t\tsource: [\"damage\", \"damageCancelled\", \"damageZero\"],\r\n\t\t\t\t\t\ttarget: [\"shaMiss\", \"useCardToExcluded\", \"useCardToEnd\", \"eventNeutralized\"],\r\n\t\t\t\t\t\tglobal: [\"useCardEnd\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tplayer.storage.heishimrfz_wushi2 &&\r\n\t\t\t\t\t\t\tevent.card &&\r\n\t\t\t\t\t\t\tplayer.storage.heishimrfz_wushi2.includes(event.card) &&\r\n\t\t\t\t\t\t\t(event.name != \"damage\" || event.notLink())\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tpriority: 12,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.heishimrfz_wushi2.remove(trigger.card);\r\n\t\t\t\t\t\tif (!player.storage.heishimrfz_wushi2.length) player.removeSkill(\"heishimrfz_wushi2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmarktext: \"※\",\r\n\t\t\t\t\tintro: { content: \"当前防具技能已失效\" },\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.2,\r\n\t\t\t},\r\n\t\t},\r\n\t\truitongmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"useCardAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!player.hasSkill(\"junumrfz_effect\") && get.distance(player, event.player) > 2 && player.hasSkill(\"heishimrfz\")) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tevent.player &&\r\n\t\t\t\t\tevent.player.isAlive() &&\r\n\t\t\t\t\tevent.player != player &&\r\n\t\t\t\t\tget.subtype(event.card) == \"equip2\" &&\r\n\t\t\t\t\tplayer.inRange(event.player)\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"是否对\" + get.translation(event.player) + \"视为使用一张【杀】\";\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.player) < 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.useCard({ name: \"sha\", isCard: true }, true, trigger.player);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.9,\r\n\t\t\t\tthreaten: 0.8,\r\n\t\t\t},\r\n\t\t},\r\n\t\tjunumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tunique: true,\r\n\t\t\tmark: true,\r\n\t\t\tlimited: true,\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationStr: \"巨弩\",\r\n\t\t\tanimationColor: \"orange\",\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (\r\n\t\t\t\t\t!game.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && get.attitude(current, player) < 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\treturn player.countCards(\"h\", \"sha\") >= 2;\r\n\t\t\t},\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.junumrfz = false;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.junumrfz;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.storage.junumrfz = true;\r\n\t\t\t\tplayer.addTempSkill(\"junumrfz_effect\");\r\n\t\t\t\tplayer.awakenSkill(event.name);\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teffect: {\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\ttargetInRange: function (card, player, target, now) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return true;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tselectTarget: function (card, player, range) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\" && range[1] != -1) range[1]++;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num + 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.1,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//重岳\r\n\t\twubenmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\tfirstDo: true,\r\n\t\t\tdirect: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.countCards(\"h\") == 0) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\t!player.getEquip(1) &&\r\n\t\t\t\t\tgame.hasPlayer(function (target) {\r\n\t\t\t\t\t\treturn target != player && player.inRange(target);\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseCard(\"h\", \"你可以使用一张【杀】\")\r\n\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current != player && player.inRange(current) && get.attitude(player, current) < 0;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (result.cards) {\r\n\t\t\t\t\tplayer.chooseUseTarget({ name: \"sha\" }, result.cards, true, false);\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"wubenmrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tif (card.name == \"sha\" && !player.getEquip(1)) return num + 1;\r\n\t\t\t\t},\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\treturn (num += Math.floor((5 - player.countCards(\"e\")) / 2));\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\twowumrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tif (player.countMark(\"wowumrfz_time\") >= 5)\r\n\t\t\t\t\t\treturn \"<span class=firetext>【气收秋毫平】</span></br>已使用\" + player.countMark(\"wowumrfz\") + \"张牌\";\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\"<span class=firetext>【劲发江潮落】</span></br>已使用\" +\r\n\t\t\t\t\t\tplayer.countMark(\"wowumrfz\") +\r\n\t\t\t\t\t\t\"张牌</br>已发动\" +\r\n\t\t\t\t\t\tplayer.countMark(\"wowumrfz_time\") +\r\n\t\t\t\t\t\t\"次【我无】\"\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tderivation: \"wowumrfz_rewrite\",\r\n\t\t\taudio: 4,\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tdirect: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif ((player != _status.currentPhase || !player.isPhaseUsing()) && player.countMark(\"wowumrfz_time\") < 5) return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tplayer.addMark(\"wowumrfz\", 1, false);\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tif (player.countMark(\"wowumrfz\") >= 3 && !player.hasMark(\"shubianmrfz\")) {\r\n\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t.chooseTarget(false, get.prompt(\"wowumrfz\"), \"你可以对一名其他角色使用一张【杀】\", (card, player, target) => {\r\n\t\t\t\t\t\t\treturn player.countMark(\"wowumrfz_time\") >= 5 ? target !== player : target !== player && player.inRange(target);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\treturn -get.attitude(player, target);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tplayer.removeMark(\"wowumrfz\", 3, false);\r\n\t\t\t\t\tif (player.countMark(\"wowumrfz_time\") < 5) {\r\n\t\t\t\t\t\tplayer.addMark(\"wowumrfz_time\", 1, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (player.countMark(\"wowumrfz\") >= 3) {\r\n\t\t\t\t\tif (player.countMark(\"wowumrfz_time\") < 5) {\r\n\t\t\t\t\t\tplayer.addMark(\"wowumrfz_time\", 1, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplayer.removeMark(\"wowumrfz\", 3, false);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 2\r\n\t\t\t\tif (result?.bool && result?.targets) {\r\n\t\t\t\t\tawait player.useCard({ name: \"sha\", isCard: true }, true, false, result.targets);\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"wowumrfz\", result.targets);\r\n\t\t\t\t\tif (player.countMark(\"wowumrfz_time\") >= 5) {\r\n\t\t\t\t\t\tawait player.draw();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"wowumrfz_draw\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar evt = event.getParent(3);\r\n\t\t\t\t\t\tif (!event.card) return false;\r\n\t\t\t\t\t\tvar sha = event.card.name == \"sha\";\r\n\t\t\t\t\t\treturn player.countMark(\"wowumrfz_time\") < 5 && evt && evt.name == \"wowumrfz\" && evt.player == player && sha;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"wowumrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.3,\r\n\t\t\t\texpose: 0.2,\r\n\t\t\t},\r\n\t\t},\r\n\t\tshubianmrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.source != player && event.source.isAlive() && event.source != undefined;\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\treturn get.attitude(player, event.source) < 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet source = trigger.source;\r\n\t\t\t\tsource.addTempSkill(\"shubianmrfz_eff\", { global: \"phaseAfter\" });\r\n\t\t\t\tsource.markSkill(\"shubianmrfz_eff\");\r\n\t\t\t\tif (source.countDiscardableCards(player, \"e\")) {\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.discardPlayerCard(\"e\", source)\r\n\t\t\t\t\t\t.set(\"target\", source)\r\n\t\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t\t.set(\"ai\", lib.card.guohe.ai.button)\r\n\t\t\t\t\t\t.set(\"prompt\", `你可以弃置${get.translation(source)}装备区的一张牌`);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"·手牌上限+2<br>·无法使用手牌中的伤害类牌\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove(player) {\r\n\t\t\t\t\t\tplayer.unmarkSkill(\"shubianmrfz_eff\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn (num += 2);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcardEnabled2(card, player) {\r\n\t\t\t\t\t\t\tif (get.position(card) === \"h\" && get.tag(card, \"damage\")) {\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 0.8,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//安洁莉娜\r\n\t\tfanzhongmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"重力紊乱\",\r\n\t\t\t},\r\n\t\t\taudio: 4,\r\n\t\t\tglobal: [\"fanzhongmrfz2\", \"fanzhongmrfz_gain\", \"fanzhongmrfz_gain2\", \"fanzhongmrfz_lose\"],\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(function (target) {\r\n\t\t\t\t\treturn target != player && player.inRange(target) && target.countMark(\"fanzhongmrfz\") < 3;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseTarget(\r\n\t\t\t\t\t\tget.prompt(\"fanzhongmrfz\"),\r\n\t\t\t\t\t\t\"你可以选择攻击范围内的一名其他角色，令其获得‘反重’标记\",\r\n\t\t\t\t\t\tfunction (card, player, target) {\r\n\t\t\t\t\t\t\treturn target != player && player.inRange(target) && target.countMark(\"fanzhongmrfz\") < 3;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"ai\", target => -get.attitude2(target))\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (result.bool && result.targets) {\r\n\t\t\t\t\tresult.targets[0].addMark(\"fanzhongmrfz\");\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"fanzhongmrfz\", result.targets[0]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tgain: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"fanzhongmrfz\") && player.getExpansions(\"fanzhongmrfz2\").length > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet result;\r\n\t\t\t\t\t\tconst cards = player.getExpansions(\"fanzhongmrfz2\");\r\n\t\t\t\t\t\tif (cards.length) result = await player.chooseButton([\"获得一张牌\", cards], true).forResult();\r\n\t\t\t\t\t\telse return;\r\n\t\t\t\t\t\tif (result && result.links) player.gain(result.links, \"gain2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tgain2: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDiscardBefore\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"fanzhongmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst cards = player.getExpansions(\"fanzhongmrfz2\");\r\n\t\t\t\t\t\tif (cards) player.gain(cards, \"gain2\");\r\n\t\t\t\t\t\tplayer.removeMark(\"fanzhongmrfz\", player.countMark(\"fanzhongmrfz\"), false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tlose: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"die\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"fanzhongmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst cards = player.getExpansions(\"fanzhongmrfz2\");\r\n\t\t\t\t\t\tplayer.removeMark(\"fanzhongmrfz\", player.countMark(\"fanzhongmrfz\"), false);\r\n\t\t\t\t\t\tif (cards) player.loseToDiscardpile(cards);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.6,\r\n\t\t\t\tthreaten: 1.2,\r\n\t\t\t},\r\n\t\t},\r\n\t\tfanzhongmrfz2: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"expansion\",\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t},\r\n\t\t\tonremove: function (player, skill) {\r\n\t\t\t\tvar cards = player.getExpansions(skill);\r\n\t\t\t\tif (cards.length) player.loseToDiscardpile(cards);\r\n\t\t\t},\r\n\t\t\tcharlotte: true,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { player: \"gainEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.player.getExpansions(\"fanzhongmrfz2\").length >= 6) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.hasMark(\"fanzhongmrfz\") &&\r\n\t\t\t\t\tevent.parent &&\r\n\t\t\t\t\tevent.parent.name != \"fanzhongmrfz_gain\" &&\r\n\t\t\t\t\tevent.parent.name != \"fanzhongmrfz_gain2\"\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.addToExpansion(trigger.cards, player, \"give\").gaintag.add(\"fanzhongmrfz2\");\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.logSkill(\"fanzhongmrfz\");\r\n\t\t\t\t//var str='';\r\n\t\t\t\t//str+=get.translation(trigger)+'</br>';\r\n\t\t\t\t//for(var i=1;i<=10;i++) str+=get.translation(trigger.getParent(i))+'</br>';\r\n\t\t\t\t//game.log(str);\r\n\t\t\t\t//player.popup(str);\r\n\t\t\t},\r\n\t\t},\r\n\t\txinshimrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tignoredHandcard: function (card, player) {\r\n\t\t\t\t\tif (card.hasGaintag(\"xinshimrfz\")) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcardDiscardable: function (card, player, name) {\r\n\t\t\t\t\tif (name == \"phaseDiscard\" && card.hasGaintag(\"xinshimrfz\")) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 4,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tdiscard: false,\r\n\t\t\tlose: false,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && !target.tempSkills.xinshimrfz2 && !target.hasMark(\"xinshimrfz\");\r\n\t\t\t},\r\n\t\t\tfilterCard: function (card, player) {\r\n\t\t\t\treturn !player.storage.xinshimrfz || !player.storage.xinshimrfz.includes(get.type(card, \"trick\"));\r\n\t\t\t},\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\treturn 10 - get.value(card);\r\n\t\t\t},\r\n\t\t\tdelay: 0,\r\n\t\t\tprompt: \"你可以将一张本回合你未以此法交出过的类型的牌交给本回合你未以此法选择过的角色\",\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { cards, target } = event;\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tif (!player.storage.xinshimrfz) player.storage.xinshimrfz = [];\r\n\t\t\t\tplayer.storage.xinshimrfz.push(get.type(cards[0], \"trick\"));\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tawait player.give(cards, target);\r\n\t\t\t\ttarget.addTempSkill(\"xinshimrfz2\");\r\n\r\n\t\t\t\t// step 2\r\n\t\t\t\tconst mark = player.storage.xinshimrfz.length;\r\n\t\t\t\tif (mark === 1) {\r\n\t\t\t\t\tawait player.draw();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Step 3 & 4 (Executed if mark != 1 and mark != 3)\r\n\t\t\t\t// 原逻辑：mark==2 跳转至 3，其他情况顺延至 3；mark==3 跳转至 5\r\n\t\t\t\tif (mark !== 3) {\r\n\t\t\t\t\t// step 3\r\n\t\t\t\t\tif (target.countCards(\"h\") > 0) {\r\n\t\t\t\t\t\tresult = await target.chooseCard(\"h\", true).forResult();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// step 4\r\n\t\t\t\t\tif (result?.cards?.length) {\r\n\t\t\t\t\t\tawait target.give(result.cards, player);\r\n\t\t\t\t\t\tawait target.draw();\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Step 5 & 6 (Executed only if mark == 3)\r\n\t\t\t\t// step 5\r\n\t\t\t\tif (player.storage.xinshimrfz.length === 3) {\r\n\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t.chooseTarget(true, \"【信使】:请选择一名其他角色，令其获得‘反重’标记\", (card, player, target) => {\r\n\t\t\t\t\t\t\treturn target !== player && !target.hasMark(\"xinshimrfz\");\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\treturn -get.attitude(player, target);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"xinshimrfz\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 6\r\n\t\t\t\tif (result?.bool && result?.targets?.length) {\r\n\t\t\t\t\tresult.targets[0].addMark(\"fanzhongmrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 9,\r\n\t\t\t\texpose: 0.2,\r\n\t\t\t\tthreaten: 1.2,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tif (player.countCards(\"h\") > 2) return 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"xinshimrfz_clear\", \"xinshimrfz_give\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.xinshimrfz = [];\r\n\t\t\t\t\t\tplayer.removeGaintag(\"xinshimrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tgive: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"gainEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.source;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlogTarget: \"source\",\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet result;\r\n\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\tif (trigger.cards.length) {\r\n\t\t\t\t\t\t\tplayer.addMark(\"xinshimrfz_give\", trigger.cards.length, false);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 1 & 2 loop (original event.goto(1))\r\n\t\t\t\t\t\twhile (player.countMark(\"xinshimrfz_give\") >= 2) {\r\n\t\t\t\t\t\t\t// step 1\r\n\t\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t\t.chooseControl(\"basic\", \"trick\", \"equip\", \"cancel2\")\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", \"选择获得一种类型的牌\")\r\n\t\t\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\taiPlayer.hp <= 3 &&\r\n\t\t\t\t\t\t\t\t\t\t!aiPlayer.countCards(\"h\", {\r\n\t\t\t\t\t\t\t\t\t\t\tname: [\"shan\", \"tao\"],\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\treturn \"basic\";\r\n\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\taiPlayer.countCards(\"he\", {\r\n\t\t\t\t\t\t\t\t\t\t\ttype: \"equip\",\r\n\t\t\t\t\t\t\t\t\t\t}) < 2\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\treturn \"equip\";\r\n\t\t\t\t\t\t\t\t\treturn \"trick\";\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\tplayer.removeMark(\"xinshimrfz_give\", 2, false);\r\n\r\n\t\t\t\t\t\t\t// step 2\r\n\t\t\t\t\t\t\tif (result.control !== \"cancel2\") {\r\n\t\t\t\t\t\t\t\tconst card = get.cardPile2(c => {\r\n\t\t\t\t\t\t\t\t\treturn get.type(c, \"trick\") === result.control;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tif (card) {\r\n\t\t\t\t\t\t\t\t\tconst next = player.gain(card, \"gain2\", \"log\");\r\n\t\t\t\t\t\t\t\t\tnext.gaintag.add(\"xinshimrfz\");\r\n\t\t\t\t\t\t\t\t\tawait next;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tplayer.logSkill(\"xinshimrfz\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// event.goto(1) is handled by while loop condition\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txinshimrfz2: {},\r\n\t\t//号角\r\n\t\tdunpaomrfz: {\r\n\t\t\tderivation: \"dunpaomrfz_rewrite\",\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t(game.countPlayer() <= 4 &&\r\n\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn get.attitude(player, current) < 0 && get.distance(player, current) == 1;\r\n\t\t\t\t\t\t})) ||\r\n\t\t\t\t\t!game.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn get.attitude(player, current) >= 0 && current != player;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.dunpaomrfz;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.storage.dunpaomrfz = true;\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\tif (player.storage.dunpaomrfz) return num + 2;\r\n\t\t\t\t},\r\n\t\t\t\tplayerEnabled: function (card, player, target) {\r\n\t\t\t\t\tif (!player.storage.dunpaomrfz && get.distance(player, target) <= 1 && target != player) return false;\r\n\t\t\t\t},\r\n\t\t\t\tattackRange: function (player, num) {\r\n\t\t\t\t\tif (!player.storage.dunpaomrfz) return num + 5;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: \"dunpaomrfz_add\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tadd: {\r\n\t\t\t\t\taudio: \"biaohaomrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { source: \"damageBegin3\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.storage.dunpaomrfz) return false;\r\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\" && event.player != player && get.distance(player, event.player) > 1; //QQQ\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst target = trigger.player;\r\n\t\t\t\t\t\tconst result = await target\r\n\t\t\t\t\t\t\t.judge(function (card) {\r\n\t\t\t\t\t\t\t\tvar color = get.color(card);\r\n\t\t\t\t\t\t\t\tif (color == \"black\") return -4;\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"judge2\", result => (result.bool == false ? true : false))\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (result.color == \"black\") trigger.num++;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tbiaohaomrfz: {\r\n\t\t\taudio: 6,\r\n\t\t\tchargeSkill: true,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 2,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.countMark(\"charge\") < 4 &&\r\n\t\t\t\t\tplayer.hasCard(function (card) {\r\n\t\t\t\t\t\treturn get.tag(card, \"damage\");\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tfilterCard: function (card) {\r\n\t\t\t\treturn get.tag(card, \"damage\");\r\n\t\t\t},\r\n\t\t\tposition: \"he\",\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\tif (card.name == \"sha\") return 1;\r\n\t\t\t\tif (card.name == \"nanman\" || card.name == \"wanjian\") return -1;\r\n\t\t\t\treturn 10 - get.value(card);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.addMark(\"charge\");\r\n\t\t\t\tplayer.draw();\r\n\t\t\t},\r\n\t\t\tgroup: [\"biaohaomrfz_usesha\", \"biaohaomrfz_allin\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tusesha: {\r\n\t\t\t\t\taudio: \"biaohaomrfz\",\r\n\t\t\t\t\tenable: \"chooseToUse\",\r\n\t\t\t\t\tviewAs: { name: \"sha\", isCard: true },\r\n\t\t\t\t\tfilterCard: function () {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tviewAsFilter: function (player) {\r\n\t\t\t\t\t\tif (player.countMark(\"charge\") <= 0) return false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tselectCard: -1,\r\n\t\t\t\t\tprompt: \"视为使用一张杀\",\r\n\t\t\t\t\tasync precontent(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeMark(\"charge\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\torder: function () {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t!game.hasPlayer(current => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t!!player.canUse(\"sha\", current) && current.hp == 1 && get.effect(current, { name: \"sha\" }, player, player) > 0\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn 2.95;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t\t\tif (arg != \"use\") return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\trespondSha: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tallin: {\r\n\t\t\t\t\tenable: \"phaseUse\",\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.countMark(\"charge\") >= 4;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdelay: 0,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet result;\r\n\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t.chooseControl(\"确定\", \"取消\")\r\n\t\t\t\t\t\t\t.set(\"prompt\", get.prompt(\"biaohaomrfz\"))\r\n\t\t\t\t\t\t\t.set(\"prompt2\", \"你可以消耗 4 点蓄力值，视为使用三张【杀】和一张【万箭齐发】，然后失去 3 点体力。\")\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t// step 1\r\n\t\t\t\t\t\tif (result.control === \"取消\") {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"biaohaomrfz\");\r\n\t\t\t\t\t\t\tplayer.removeMark(\"charge\", 4);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 2 loop (original event.redo())\r\n\t\t\t\t\t\tlet num = 0;\r\n\t\t\t\t\t\twhile (num < 4) {\r\n\t\t\t\t\t\t\tnum++;\r\n\t\t\t\t\t\t\tawait player.chooseUseTarget(\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tname: num < 4 ? \"sha\" : \"wanjian\",\r\n\t\t\t\t\t\t\t\t\tisCard: true,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\"请选择【杀】的目标 (【杀】:\" + (num < 4 ? num : 3) + \"/3;【万箭齐发】:0/1)\",\r\n\t\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"biaohaomrfz\");\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 3\r\n\t\t\t\t\t\tawait player.loseHp(3);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\torder: 3,\r\n\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 10,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txuezhanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"dieBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.xuezhanmrfz;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.storage.xuezhanmrfz = true;\r\n\t\t\t\tawait player.chooseToDiscard(\"hej\", true, player.countCards(\"hej\"));\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t\tgame.log(player, \"复活\");\r\n\t\t\t\tif (player.getDamagedHp()) player.recover(player.maxHp);\r\n\t\t\t\tif (player.maxHp >= 2) player.loseMaxHp(player.maxHp - 2);\r\n\t\t\t\telse player.gainMaxHp(2 - player.maxHp);\r\n\t\t\t\tplayer.draw(4);\r\n\t\t\t\tplayer.link(false);\r\n\t\t\t\tplayer.turnOver(false);\r\n\t\t\t},\r\n\t\t},\r\n\t\t//焰尾\r\n\t\tfengjianmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"当你使用下一张非的【闪】基本牌后，你可以视为使用一张相同的基本牌。\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: [\"respond\", \"useCardAfter\"] },\r\n\t\t\tforced: true,\r\n\t\t\tfirstDo: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!event.respondTo) return false;\r\n\t\t\t\treturn !player.hasMark(\"fengjianmrfz\");\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.addMark(\"fengjianmrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: \"fengjianmrfz_use\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tuse: {\r\n\t\t\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.card.name == \"shan\") return false;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn player.hasMark(\"fengjianmrfz\") && get.type(event.card) == \"basic\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar cards = trigger.card;\r\n\t\t\t\t\t\tplayer.removeMark(\"fengjianmrfz\");\r\n\t\t\t\t\t\tif ((cards.name == \"tao\" && player.getDamagedHp() > 0) || cards.name != \"shan\") {\r\n\t\t\t\t\t\t\tplayer.chooseUseTarget(cards, false, get.prompt2(\"fengjianmrfz\"), \"你可以使用一张\" + get.translation(cards));\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"fengjianmrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thongsongmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent:\r\n\t\t\t\t\t\"你有#个‘红松’标记</br>·有‘红松’标记的角色需要使用或打出闪时可以进行判定，若不为♥，视为使用一张【闪】并获得此判定牌，然后移除一个‘红松’标记。\",\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: [\"respond\", \"useCardAfter\"] },\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar num = 0;\r\n\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\tif (game.players[i].hasMark(\"hongsongmrfz\")) num += game.players[i].countMark(\"hongsongmrfz\");\r\n\t\t\t\t}\r\n\t\t\t\tif (!event.respondTo) return false;\r\n\t\t\t\treturn num < 3;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.addMark(\"hongsongmrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"hongsongmrfz_shan\", \"hongsongmrfz_give\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tshan: {\r\n\t\t\t\t\taudio: \"hongsongmrfz\",\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: [\"chooseToRespondBegin\", \"chooseToUseBegin\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.responded) return false;\r\n\t\t\t\t\t\tif (!event.filterCard || !event.filterCard({ name: \"shan\" }, player, event)) return false;\r\n\t\t\t\t\t\tif (event.name == \"chooseToRespond\" && !lib.filter.cardRespondable({ name: \"shan\" }, player, event)) return false;\r\n\t\t\t\t\t\tif (event.player != player && !event.player.hasMark(\"hongsongmrfz\")) return false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet result;\r\n\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\tresult = await trigger.player\r\n\t\t\t\t\t\t\t.chooseControl(\"确定\", \"取消\")\r\n\t\t\t\t\t\t\t.set(\"prompt\", get.prompt(\"hongsongmrfz\"))\r\n\t\t\t\t\t\t\t.set(\"prompt2\", \"你可以进行判定，若不为♥，其视为使用或打出一张【闪】并获得判定牌\")\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t// step 1\r\n\t\t\t\t\t\tif (result.control === \"确定\") {\r\n\t\t\t\t\t\t\tconst next = trigger.player\r\n\t\t\t\t\t\t\t\t.judge(card => {\r\n\t\t\t\t\t\t\t\t\treturn get.suit(card) === \"heart\" ? -0.5 : 1.5;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"callback\", lib.skill.hongsongmrfz_shan.callback);\r\n\t\t\t\t\t\t\tnext.judge2 = result => {\r\n\t\t\t\t\t\t\t\treturn result.bool;\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tresult = await next.forResult();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 2\r\n\t\t\t\t\t\tif (result.judge > 0) {\r\n\t\t\t\t\t\t\ttrigger.untrigger();\r\n\t\t\t\t\t\t\ttrigger.set(\"responded\", true);\r\n\t\t\t\t\t\t\ttrigger.result = {\r\n\t\t\t\t\t\t\t\tbool: true,\r\n\t\t\t\t\t\t\t\tcard: { name: \"shan\", isCard: true },\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tif (trigger.player !== player) {\r\n\t\t\t\t\t\t\t\ttrigger.player.removeMark(\"hongsongmrfz\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync callback(event, trigger, player) {\r\n\t\t\t\t\t\tif (get.suit(event.card) != \"heart\") player.gain(event.card, \"gain2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\trespondShan: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tgive: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"hongsongmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet result;\r\n\r\n\t\t\t\t\t\t// step 0 loop (original event.goto(0))\r\n\t\t\t\t\t\twhile (player.hasMark(\"hongsongmrfz\")) {\r\n\t\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t\t.chooseTarget(get.prompt(\"hongsongmrfz\"), \"你可以将任意个'红松'标记交给任意名其他角色\", (card, player, target) => {\r\n\t\t\t\t\t\t\t\t\treturn target !== player;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\t\t\treturn get.attitude(player, target) > 0;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t\t// step 1\r\n\t\t\t\t\t\t\tif (result.bool && result.targets && result.targets.length) {\r\n\t\t\t\t\t\t\t\tconst target = result.targets[0];\r\n\t\t\t\t\t\t\t\ttarget.addMark(\"hongsongmrfz\");\r\n\t\t\t\t\t\t\t\tplayer.removeMark(\"hongsongmrfz\");\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tplayer.logSkill(\"hongsongmrfz\", target);\r\n\t\t\t\t\t\t\t\t// event.goto(0) is handled by while loop condition\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 0.5,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//夕\r\n\t\thuijuanmrfz: {\r\n\t\t\tintro: { content: \"记录的牌名:$\" },\r\n\t\t\tonremove: true,\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { global: \"useCard\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (get.type(event.card) == \"equip\") return false;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (get.type(event.card) == \"trick\" && player.hasSkill(\"huijuanmrfz_trick\")) return false;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (get.type(event.card) == \"basic\" && player.hasSkill(\"huijuanmrfz_basic\")) return false;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (get.type(event.card) == \"delay\" && player.hasSkill(\"huijuanmrfz_delay\")) return false;\r\n\t\t\t\treturn !player.getStorage(\"huijuanmrfz\").includes(event.card.name);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.markAuto(\"huijuanmrfz\", [trigger.card.name]);\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (get.type(trigger.card) == \"trick\") player.addSkill(\"huijuanmrfz_trick\");\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (get.type(trigger.card) == \"delay\") player.addSkill(\"huijuanmrfz_delay\");\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (get.type(trigger.card) == \"basic\") player.addSkill(\"huijuanmrfz_basic\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"huijuanmrfz_use\", \"huijuanmrfz_clear\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\t//检测技能\r\n\t\t\t\tbasic: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeSkill(\"huijuanmrfz_basic\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttrick: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeSkill(\"huijuanmrfz_trick\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdelay: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeSkill(\"huijuanmrfz_delay\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t//非检测技能\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.getStorage(\"huijuanmrfz\").length;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tfor (var i = 0; i < 2; i++) player.unmarkAuto(\"huijuanmrfz\", [player.getStorage(\"huijuanmrfz\")[0]]);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tuse: {\r\n\t\t\t\t\thiddenCard: function (player, name) {\r\n\t\t\t\t\t\tif (name == \"wuxie\") return player.getStorage(\"huijianmrfz\").includes(name);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tenable: [\"chooseToRespond\", \"chooseToUse\"],\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.getStorage(\"huijuanmrfz\").length == 0 || player.countCards(\"h\") == 0) return false;\r\n\t\t\t\t\t\tfor (var i = 0; i < player.getStorage(\"huijuanmrfz\").length; i++) {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tevent.filterCard(\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tname: player.getStorage(\"huijuanmrfz\")[i],\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tplayer,\r\n\t\t\t\t\t\t\t\t\tevent\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tchooseButton: {\r\n\t\t\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\t\t\tvar list = [];\r\n\t\t\t\t\t\t\tvar storage = player.getStorage(\"huijuanmrfz\");\r\n\t\t\t\t\t\t\tfor (var i of lib.inpile) {\r\n\t\t\t\t\t\t\t\tif (event.filterCard({ name: i }, player, event) && storage.includes(i))\r\n\t\t\t\t\t\t\t\t\tlist.push([get.type(i) == \"basic\" ? \"基本\" : \"锦囊\", \"\", i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn ui.create.dialog(\"绘卷\", [list, \"vcard\"], \"hidden\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfilter: function (button, player) {\r\n\t\t\t\t\t\t\treturn lib.filter.cardEnabled(\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\tname: button.link[2],\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tplayer,\r\n\t\t\t\t\t\t\t\t_status.event.getParent()\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcheck: function (button) {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tvar card = {\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tname: button.link[2],\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tif (player.getUseValue(card) > 0) return get.order(card);\r\n\t\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\taudio: \"huijuanmrfz\",\r\n\t\t\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t\t\t\tfilterCard: true,\r\n\t\t\t\t\t\t\t\tposition: \"hs\",\r\n\t\t\t\t\t\t\t\tviewAs: {\r\n\t\t\t\t\t\t\t\t\tname: links[0][2],\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcheck: function (card) {\r\n\t\t\t\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tasync precontent(event, trigger, player) {\r\n\t\t\t\t\t\t\t\t\tconst cards = event.result.card;\r\n\t\t\t\t\t\t\t\t\tif (!cards || !event.parent) return;\r\n\t\t\t\t\t\t\t\t\tif (cards.name == \"sha\" || cards.name == \"jiu\") event.parent.addCount = false;\r\n\t\t\t\t\t\t\t\t\tplayer.unmarkAuto(\"huijuanmrfz\", [cards.name]);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\t\t\treturn \"将一张手牌当做【\" + get.translation(links[0][2]) + \"】使用\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\torder: 13,\r\n\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.3,\r\n\t\t\t},\r\n\t\t},\r\n\t\tdianjingmrfz: {\r\n\t\t\tmark: true,\r\n\t\t\tlocked: false,\r\n\t\t\tzhuanhuanji: true,\r\n\t\t\tmarktext: \"☯\",\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\treturn !player.storage.dianjingmrfz\r\n\t\t\t\t\t\t? \"当你使用转化牌时，你可以从牌堆中获得与你使用的转化牌的牌名相同的牌。\"\r\n\t\t\t\t\t\t: \"当你使用转化牌时，你可以从牌堆中获得与你使用的转化牌的类型相同的牌。\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !event.card.isCard;\r\n\t\t\t},\r\n\t\t\tfrequent: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar cardt = get.cardPile2(function (card) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\treturn get.type(card, \"trick\") == get.type(trigger.card);\r\n\t\t\t\t});\r\n\t\t\t\tvar cardf = get.cardPile2(trigger.card.name);\r\n\t\t\t\tif (player.storage.dianjingmrfz == true) {\r\n\t\t\t\t\tif (cardt) player.gain(cardt, \"gain2\", \"log\");\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\telse player.chat(\"牌堆中没有\", cardt, \"牌\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (cardf) player.gain(cardf, \"gain2\", \"log\");\r\n\t\t\t\t\telse player.chat(\"牌堆中没有【\" + get.translation(trigger.card.name) + \"】\");\r\n\t\t\t\t}\r\n\t\t\t\tplayer.changeZhuanhuanji(\"dianjingmrfz\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tcangjuanmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tignoredHandcard: function (card, player) {\r\n\t\t\t\t\tif (card.hasGaintag(\"cangjuanmrfz\")) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcardDiscardable: function (card, player, name) {\r\n\t\t\t\t\tif (name == \"phaseDiscard\" && card.hasGaintag(\"cangjuanmrfz\")) return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"gainBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"cangjuanmrfz\") < 3;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.addMark(\"cangjuanmrfz\", 1, false);\r\n\t\t\t\ttrigger.gaintag.add(\"cangjuanmrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: \"cangjuanmrfz_remove\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tremove: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeMark(\"cangjuanmrfz\", 3);\r\n\t\t\t\t\t\tplayer.removeGaintag(\"cangjuanmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//能天使\r\n\t\tlianshemrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tif (card.name == \"sha\") return (num = player.maxHp);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\tforced: true,\r\n\t\t\tfirstDo: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !event.audioed && event.card.name == \"sha\" && event.parent && event.parent.type == \"phase\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.audioed = true;\r\n\t\t\t},\r\n\t\t},\r\n\t\tguozaimrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.getCardUsable(\"sha\") > 0;\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { target } = event;\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tconst cards = game.cardsGotoOrdering(get.cards(player.maxHp + 1)).cards;\r\n\t\t\t\tevent.cards = cards;\r\n\t\t\t\tevent.cards2 = [];\r\n\t\t\t\tevent.cards3 = [];\r\n\t\t\t\tevent.num = 0;\r\n\r\n\t\t\t\tif (!player.canUse(\"sha\", target, false)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (const card of event.cards) {\r\n\t\t\t\t\tif (card.name === \"sha\") {\r\n\t\t\t\t\t\tevent.cards2.push(card);\r\n\t\t\t\t\t\tevent.num++;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tevent.cards3.push(card);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgame.cardsGotoOrdering(event.cards);\r\n\t\t\t\tplayer.showCards(event.cards, get.translation(player) + \"发动了【过载】\");\r\n\r\n\t\t\t\t// step 1 loop (original event.redo())\r\n\t\t\t\tif (event.cards2.length > 0 && target.isAlive()) {\r\n\t\t\t\t\twhile (event.num > 0 && target.isAlive() && player.getCardUsable(\"sha\") > 0) {\r\n\t\t\t\t\t\tconst card = event.cards2[event.num - 1];\r\n\t\t\t\t\t\tplayer.showCards(card, get.translation(player) + \"发动了【过载】\");\r\n\t\t\t\t\t\tevent.num--;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"guozaimrfz\", target);\r\n\r\n\t\t\t\t\t\tif (target.isAlive()) {\r\n\t\t\t\t\t\t\tawait player\r\n\t\t\t\t\t\t\t\t.chooseUseTarget(card, true, \"nodistance\")\r\n\t\t\t\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\r\n\t\t\t\t\t\t\t\t\tlet evt = _status.event;\r\n\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\tif (_status.event.name === \"chooseTarget\") evt = evt.getParent();\r\n\t\t\t\t\t\t\t\t\tif (target !== player && target !== evt.guozaimrfz_target) return false;\r\n\t\t\t\t\t\t\t\t\treturn lib.filter.targetEnabledx(card, player, target);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"guozaimrfz_target\", target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 2\r\n\t\t\t\tif (event.cards3.length > 0) {\r\n\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t.chooseButton([\"过载：你可以获得一张牌\", event.cards3])\r\n\t\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\t\treturn get.value(button.link, _status.event.player);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 3\r\n\t\t\t\tif (result?.links?.length) {\r\n\t\t\t\t\tawait player.gain(result.links, \"gain2\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 10,\r\n\t\t\t\tthreaten: 1.1,\r\n\t\t\t\texpose: 0.6,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: -1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//远牙\r\n\t\tyuanmengmrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\ttrigger: { global: \"useCard\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.inRange(event.player)) return false;\r\n\t\t\t\tif (!player.hasSha()) return false;\r\n\t\t\t\treturn event.card.name == \"sha\" && event.player != player;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst target = trigger.targets[0];\r\n\t\t\t\tconst source = trigger.player;\r\n\t\t\t\tlet result;\r\n\t\t\t\tlet skipToStep2 = false;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tif (target === player) {\r\n\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t.chooseControl(\"确定\", \"cancel2\")\r\n\t\t\t\t\t\t.set(\"prompt\", get.prompt(\"yuanmengmrfz\"))\r\n\t\t\t\t\t\t.set(\"prompt2\", \"你可以对\" + get.translation(source) + \"使用【杀】\")\r\n\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\t\tconst aiTarget = _status.event.getTrigger().player;\r\n\t\t\t\t\t\t\tconst aiSource = _status.event.getTrigger().source;\r\n\t\t\t\t\t\t\tif (get.attitude(aiPlayer, aiTarget) > 2) return 1;\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tskipToStep2 = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 1 (only if target === player)\r\n\t\t\t\tif (!skipToStep2) {\r\n\t\t\t\t\tif (result && result.index === 0) {\r\n\t\t\t\t\t\tif (player.hasSha()) {\r\n\t\t\t\t\t\t\tawait player\r\n\t\t\t\t\t\t\t\t.chooseToUse(true, function (card, player, event) {\r\n\t\t\t\t\t\t\t\t\tif (get.name(card) !== \"sha\") return false;\r\n\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\treturn lib.filter.cardEnabled.apply(this, arguments);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\t\t\t\tif (target !== _status.event.targetx && !ui.selected.targets.includes(_status.event.targetx)) return false;\r\n\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\treturn lib.filter.targetEnabled.apply(this, arguments);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"targetx\", source);\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"yuanmengmrfz\", source);\r\n\t\t\t\t\t\t\tawait player.draw();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 2\r\n\t\t\t\tresult = await player\r\n\t\t\t\t\t.chooseControl(get.translation(target), get.translation(source), \"cancel2\")\r\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"yuanmengmrfz\"))\r\n\t\t\t\t\t.set(\"prompt2\", \"你可以对其中一名角色使用【杀】\")\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\tconst aiTarget = _status.event.getTrigger().player;\r\n\t\t\t\t\t\tconst aiSource = _status.event.getTrigger().source;\r\n\t\t\t\t\t\tif (get.attitude(aiPlayer, aiTarget) < 2) return 1;\r\n\t\t\t\t\t\tif (get.attitude(aiPlayer, aiSource) < 2) return 0;\r\n\t\t\t\t\t\treturn 2;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t// step 3\r\n\t\t\t\tif (result.index !== 2) {\r\n\t\t\t\t\tconst resulty = result.index === 1 ? target : source;\r\n\t\t\t\t\tconst resultx = result.index === 0 ? target : source;\r\n\t\t\t\t\tif (player.hasSha()) {\r\n\t\t\t\t\t\tawait player\r\n\t\t\t\t\t\t\t.chooseToUse(true, function (card, player, event) {\r\n\t\t\t\t\t\t\t\tif (get.name(card) !== \"sha\") return false;\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\treturn lib.filter.cardEnabled.apply(this, arguments);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\t\t\tif (target !== _status.event.targetx && !ui.selected.targets.includes(_status.event.targetx)) return false;\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\treturn lib.filter.targetEnabled.apply(this, arguments);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"targetx\", result.index === 0 ? target : source);\r\n\t\t\t\t\t\tawait player.draw();\r\n\t\t\t\t\t\tawait resulty.draw();\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"yuanmengmrfz\", resultx);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.5,\r\n\t\t\t\tthreaten: 1.2,\r\n\t\t\t},\r\n\t\t},\r\n\t\tningshenmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t(player.storage.ningshenmrfz_damage ? \"·本轮已受到过伤害</br>\" : \"\") +\r\n\t\t\t\t\t\t(player.countMark(\"ningshenmrfz\") == 0\r\n\t\t\t\t\t\t\t? \"·已连续0个回合没有成为其他角色使用牌的目标。\"\r\n\t\t\t\t\t\t\t: \"·已连续\" + player.countMark(\"ningshenmrfz\") + \"个回合没有成为其他角色使用牌的目标。\") +\r\n\t\t\t\t\t\t(player.storage.ningshenmrfz_mark != 0 ? \"</br>·下一张带有伤害类标签的牌伤害基数+\" + player.storage.ningshenmrfz_mark : \"\")\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!event.player.isAlive()) return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tconst history = trigger.player.getHistory(\"useCard\");\r\n\t\t\t\tif (trigger.player !== player) {\r\n\t\t\t\t\tfor (let i = 0; i < history.length; i++) {\r\n\t\t\t\t\t\tif (!history[i].targets) continue;\r\n\t\t\t\t\t\tfor (let j = 0; j < history[i].targets.length; j++) {\r\n\t\t\t\t\t\t\tif (history[i].targets[j] === player) {\r\n\t\t\t\t\t\t\t\tplayer.removeMark(\"ningshenmrfz\", player.countMark(\"ningshenmrfz\"));\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tplayer.addMark(\"ningshenmrfz\");\r\n\r\n\t\t\t\t// step 2\r\n\t\t\t\tif (player.countMark(\"ningshenmrfz\") >= 2) {\r\n\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t.chooseControl(\"摸牌\", \"获得杀\")\r\n\t\t\t\t\t\t.set(\"prompt\", get.prompt(\"ningshenmrfz\"))\r\n\t\t\t\t\t\t.set(\"prompt2\", \"请选择一项\")\r\n\t\t\t\t\t\t.set(\"ai\", (event, player) => {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tplayer.hp <= 2 ||\r\n\t\t\t\t\t\t\t\tplayer.hasCard(card => {\r\n\t\t\t\t\t\t\t\t\treturn card.name === \"sha\";\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tplayer.removeMark(\"ningshenmrfz\", player.countMark(\"ningshenmrfz\"));\r\n\t\t\t\t\tplayer.popup(\"ningshenmrfz\");\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"ningshenmrfz\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 3\r\n\t\t\t\tconst cards = get.cardPile2(\"sha\");\r\n\t\t\t\tif (result.index === 0) {\r\n\t\t\t\t\tawait player.draw();\r\n\t\t\t\t} else if (cards) {\r\n\t\t\t\t\tawait player.gain(cards, \"gain2\", \"log\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"ningshenmrfz_mark\", \"ningshenmrfz_damage\", \"ningshenmrfz_remove\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tmark: {\r\n\t\t\t\t\ttrigger: { player: \"useCard1\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn get.tag(event.card, \"damage\") && player.storage.ningshenmrfz_mark > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.baseDamage += player.storage.ningshenmrfz_mark;\r\n\t\t\t\t\t\tplayer.storage.ningshenmrfz_mark = 0;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"ningshenmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tinit: function (player) {\r\n\t\t\t\t\t\tplayer.storage.ningshenmrfz_mark = 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: function (player) {\r\n\t\t\t\t\t\tdelete player.storage.ningshenmrfz_mark;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tdamageBonus: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (!player.storage.ningshenmrfz_damage) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"ningshenmrfz\");\r\n\t\t\t\t\t\t\tplayer.storage.ningshenmrfz_mark++;\r\n\t\t\t\t\t\t} else player.storage.ningshenmrfz_damage = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tremove: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (!player.storage.ningshenmrfz_damage) player.storage.ningshenmrfz_damage = true;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.1,\r\n\t\t\t},\r\n\t\t},\r\n\t\tbingximrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tattackRangeBase: function (player, num) {\r\n\t\t\t\t\tif (player != _status.currentPhase && player.hp <= player.countCards(\"h\")) return (num = 0);\r\n\t\t\t\t\treturn num;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//迷迭香\r\n\t\tnianshoumrfz: {\r\n\t\t\tmarkimage: \"extension/WhichWay/image/skill/mdxnianshoumrfz.png\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"巨剑\",\r\n\t\t\t\tcontent: \"expansion\",\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t},\r\n\t\t\tonremove: function (player, skill) {\r\n\t\t\t\tvar cards = player.getExpansions(skill);\r\n\t\t\t\tif (cards.length) player.loseToDiscardpile(cards);\r\n\t\t\t},\r\n\t\t\taudio: 4,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.getExpansions(\"nianshoumrfz\").length >= 2) return false;\r\n\t\t\t\treturn player.hasCard(function (card) {\r\n\t\t\t\t\treturn get.subtype(card) == \"equip1\";\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tfilterCard: function (card) {\r\n\t\t\t\treturn get.subtype(card) == \"equip1\";\r\n\t\t\t},\r\n\t\t\tposition: \"he\",\r\n\t\t\tdiscard: false,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { cards } = event;\r\n\t\t\t\tplayer.addToExpansion(cards, player, \"give\").gaintag.add(\"nianshoumrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\r\n\t\t\t\t\"nianshoumrfz_disable\",\r\n\t\t\t\t\"nianshoumrfz_usesha\",\r\n\t\t\t\t\"nianshoumrfz_eff1\",\r\n\t\t\t\t\"nianshoumrfz_eff2\",\r\n\t\t\t\t\"nianshoumrfz_eff3\",\r\n\t\t\t\t\"nianshoumrfz_eff4\",\r\n\t\t\t\t\"nianshoumrfz_eff5\",\r\n\t\t\t],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdisable: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\tconst card = get.cardPile2(c => {\r\n\t\t\t\t\t\t\treturn get.subtype(c) === \"equip1\";\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"nianshoumrfz\");\r\n\t\t\t\t\t\tevent.num = 0;\r\n\t\t\t\t\t\tplayer.disableEquip(\"equip1\");\r\n\r\n\t\t\t\t\t\t// step 1 loop (original event.redo())\r\n\t\t\t\t\t\twhile (event.num < 2) {\r\n\t\t\t\t\t\t\tevent.num++;\r\n\t\t\t\t\t\t\tif (card) {\r\n\t\t\t\t\t\t\t\tawait player.gain(card, \"gain2\", \"log\");\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tplayer.chat(\"牌堆中没有武器牌了\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tusesha: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar targetx = event.targets,\r\n\t\t\t\t\t\t\tnum = 0;\r\n\t\t\t\t\t\tif (event.card.name != \"sha\" || player.getExpansions(\"nianshoumrfz\").length == 0) return false;\r\n\t\t\t\t\t\tif (!event.parent || event.parent.triggeredTargets3.length > 1) return false;\r\n\t\t\t\t\t\tfor (var i = 0; i < targetx.length; i++) {\r\n\t\t\t\t\t\t\tif (targetx[i].getExpansions(\"nianshoumrfz\").length < 2) num++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn num > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet result;\r\n\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t.chooseBool(\r\n\t\t\t\t\t\t\t\t\"是否将一个'巨剑'置于\" +\r\n\t\t\t\t\t\t\t\t\t(trigger.targets.length === 1 ? get.translation(trigger.targets[0]) : \"其中一个目标\") +\r\n\t\t\t\t\t\t\t\t\t\"的武将牌上\"\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\t\treturn trigger.targets.some(q => get.attitude(player, q) < 2);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t// step 1\r\n\t\t\t\t\t\tif (result.bool && trigger.targets.length === 1) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"nianshoumrfz\");\r\n\t\t\t\t\t\t\tconst cards = player.getExpansions(\"nianshoumrfz\");\r\n\t\t\t\t\t\t\tif (cards.length) {\r\n\t\t\t\t\t\t\t\tresult = await player.chooseButton([\"选择一个'巨剑'\", cards], true).forResult();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// goto 4: skip to multi-target branch\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 2 & 3 (single target branch)\r\n\t\t\t\t\t\tif (result.bool && trigger.targets.length === 1) {\r\n\t\t\t\t\t\t\t// step 2\r\n\t\t\t\t\t\t\tif (result.links && result.links.length) {\r\n\t\t\t\t\t\t\t\tconst next = player.gain(result.links, \"gain2\");\r\n\t\t\t\t\t\t\t\tnext.gaintag.add(\"nianshoumrfz2\");\r\n\t\t\t\t\t\t\t\tawait next;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// step 3\r\n\t\t\t\t\t\t\tif (result.cards && result.cards.length) {\r\n\t\t\t\t\t\t\t\tconst cards3 = player.getCards(\"h\", card => {\r\n\t\t\t\t\t\t\t\t\treturn card.hasGaintag(\"nianshoumrfz2\");\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\ttrigger.targets[0].addToExpansion(cards3, trigger.targets[0], \"give\").gaintag.add(\"nianshoumrfz\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 4 (multi-target branch)\r\n\t\t\t\t\t\tif (result.bool && trigger.targets.length > 1) {\r\n\t\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t\t.chooseTarget(true, (card, player, target) => {\r\n\t\t\t\t\t\t\t\t\treturn _status.event.targets.includes(target);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"targets\", trigger.targets)\r\n\t\t\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\t\t\treturn get.attitude(_status.event.player, target) < 2;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 5\r\n\t\t\t\t\t\tif (result.bool && result.targets && result.targets.length) {\r\n\t\t\t\t\t\t\tevent.target = result.targets[0];\r\n\t\t\t\t\t\t\tconst cards = player.getExpansions(\"nianshoumrfz\");\r\n\t\t\t\t\t\t\tif (cards.length) {\r\n\t\t\t\t\t\t\t\tresult = await player.chooseButton([\"选择一个'巨剑'\", cards], true).forResult();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 6\r\n\t\t\t\t\t\tif (result.links && result.links.length) {\r\n\t\t\t\t\t\t\tconst next = player.gain(result.links, \"gain2\");\r\n\t\t\t\t\t\t\tnext.gaintag.add(\"nianshoumrfz2\");\r\n\t\t\t\t\t\t\tawait next;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 7\r\n\t\t\t\t\t\tif (result.cards && result.cards.length) {\r\n\t\t\t\t\t\t\tconst cards3 = player.getCards(\"h\", card => {\r\n\t\t\t\t\t\t\t\treturn card.hasGaintag(\"nianshoumrfz2\");\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tevent.target.addToExpansion(cards3, event.target, \"give\").gaintag.add(\"nianshoumrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff1: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"loseAfter\", \"addToExpansionAfter\", \"cardsGotoSpecialAfter\", \"loseAsyncAfter\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player, name) {\r\n\t\t\t\t\t\tif (event.name == \"lose\" || event.name == \"loseAsync\") return event.getlx !== false && event.toStorage == true;\r\n\t\t\t\t\t\tif (event.name == \"cardGotoSpecial\") return !event.notrigger;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tfor (var i = 0; i < player.getExpansions(\"nianshoumrfz\").length; i++) {\r\n\t\t\t\t\t\t\tvar names = player.getExpansions(\"nianshoumrfz\")[i].name + \"_skill\";\r\n\t\t\t\t\t\t\tif (lib.skill[names]) {\r\n\t\t\t\t\t\t\t\tplayer.addSkill(names);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff2: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"gainAfter\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.fromStorage == true ||\r\n\t\t\t\t\t\t\tgame.hasPlayer2(function (current) {\r\n\t\t\t\t\t\t\t\tvar evt = event.getl(current);\r\n\t\t\t\t\t\t\t\treturn evt && evt.xs && evt.xs.length > 0;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (Array.isArray(trigger.cards))\r\n\t\t\t\t\t\t\tfor (var i of trigger.cards) {\r\n\t\t\t\t\t\t\t\tvar names = i.name + \"_skill\";\r\n\t\t\t\t\t\t\t\tif (lib.skill[names] && player.hasSkill(names)) {\r\n\t\t\t\t\t\t\t\t\tplayer.removeSkill(names);\r\n\t\t\t\t\t\t\t\t} //QQQ\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff3: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseDrawBegin2\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.getExpansions(\"nianshoumrfz\").length > 0 && event.player != player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar target = trigger.player;\r\n\t\t\t\t\t\ttrigger.num -= target.getExpansions(\"nianshoumrfz\").length;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"nianshoumrfz\", target);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff4: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"damageBegin3\" },\r\n\t\t\t\t\tusable: 1,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.source == undefined) return false;\r\n\t\t\t\t\t\treturn event.source.getExpansions(\"nianshoumrfz\").length > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num -= trigger.source.getExpansions(\"nianshoumrfz\").length;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"nianshoumrfz\", trigger.source);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff5: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn current.getExpansions(\"nianshoumrfz\").length > 0 && current != player;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar list = [\"e\", \"h\"];\r\n\t\t\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\t\t\tif (game.players[i].getExpansions(\"nianshoumrfz\").length > 0 && game.players[i] != player) {\r\n\t\t\t\t\t\t\t\tfor (var j = 0; j < 2; j++) {\r\n\t\t\t\t\t\t\t\t\tif (game.players[i].countCards(list[j]) > 0) {\r\n\t\t\t\t\t\t\t\t\t\tplayer.gain(game.players[i].getCards(list[j]).randomGet(), \"give\");\r\n\t\t\t\t\t\t\t\t\t\tgame.log(\r\n\t\t\t\t\t\t\t\t\t\t\tplayer,\r\n\t\t\t\t\t\t\t\t\t\t\t\"获得了\",\r\n\t\t\t\t\t\t\t\t\t\t\tgame.players[i],\r\n\t\t\t\t\t\t\t\t\t\t\t\"的\" + get.translation(game.players[i].getCards(list[j]).randomGet())\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tplayer.gain(game.players[i].getExpansions(\"nianshoumrfz\"), \"give\", \"log\");\r\n\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tplayer.logSkill(\"nianshoumrfz\", game.players[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhangyimrfz: {\r\n\t\t\tcharlotte: true,\r\n\t\t\tmod: {\r\n\t\t\t\tattackRange: function (player, num) {\r\n\t\t\t\t\tif (player.getExpansions(\"nianshoumrfz\").length) return num + player.getExpansions(\"nianshoumrfz\").length;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tchongjimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tdirect: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!event.parent || event.parent.name == \"_lianhuan\" || event.parent.name == \"_lianhuan2\") return false;\r\n\t\t\t\tif (event.card && event.card.name != \"sha\") return false;\r\n\t\t\t\tif (game.players.length <= 2) return false;\r\n\t\t\t\treturn event.parent && event.parent.name != \"chongjimrfz\" && event.num > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst targets = trigger.player;\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseTarget(\r\n\t\t\t\t\t\tget.prompt(\"chongjimrfz\"),\r\n\t\t\t\t\t\t\"你可以对\" + get.translation(targets) + \"的上家或下家造成一点伤害\",\r\n\t\t\t\t\t\tfunction (card, player, target) {\r\n\t\t\t\t\t\t\treturn (target == targets.getNext() || target == targets.getPrevious()) && target != player;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"ai\", target => -get.attitude(player, target))\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (result.bool && result.targets) {\r\n\t\t\t\t\tresult.targets[0].damage();\r\n\t\t\t\t\tif (trigger.num > 0)\r\n\t\t\t\t\t\tresult.targets[0].chooseToDiscard(\"h\", true, get.prompt(\"chongjimrfz\"), \"请选择弃置\" + trigger.num + \"张手牌\", trigger.num);\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"chongjimrfz\", result.targets[0]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\t//水陈 假日威龙陈\r\n\t\tyuyunmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tconst num = player.getCardUsable(\"sha\");\r\n\t\t\t\tconst history = player.getHistory(\"useCard\");\r\n\t\t\t\tfor (let i = 0; i < history.length; i++) {\r\n\t\t\t\t\tif (history[i].card?.name === \"sha\") {\r\n\t\t\t\t\t\tplayer.removeMark(\"yuyunmrfz\", player.countMark(\"yuyunmrfz\"));\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tresult = await player.chooseBool(\"是否发动【余韵】？\").forResult();\r\n\r\n\t\t\t\t// step 2\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tawait player.draw(Math.min(num, 3));\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"yuyunmrfz\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 3\r\n\t\t\t\tplayer.removeMark(\"yuyunmrfz\", player.countMark(\"yuyunmrfz\"));\r\n\t\t\t\tplayer.addMark(\"yuyunmrfz\", Math.min(num, 2));\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tif (card.name == \"sha\") return (num += player.countMark(\"yuyunmrfz\"));\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshuiqiangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.getParent()?.triggeredTargets3.length > 1) return false;\r\n\t\t\t\tif (event.card.name != \"sha\") return false;\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn !event.targets.includes(current) && !!player.canUse(event.card, current) && player.inRange(current);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tresult = await player\r\n\t\t\t\t\t.chooseTarget(\r\n\t\t\t\t\t\t[1, Infinity],\r\n\t\t\t\t\t\tget.prompt(\"shuiqiangmrfz\"),\r\n\t\t\t\t\t\t\"为\" + get.translation(trigger.card) + \"增加任意个目标\",\r\n\t\t\t\t\t\t(card, player, target) => {\r\n\t\t\t\t\t\t\treturn !_status.event.sourcex.includes(target) && player.inRange(target) && player.canUse(_status.event.card, target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"sourcex\", trigger.targets)\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\treturn get.effect(target, _status.event.card, aiPlayer, aiPlayer);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"card\", trigger.card)\r\n\t\t\t\t\t.setHiddenSkill(event.name)\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tif (result.targets) {\r\n\t\t\t\t\tif (!event.isMine() && !event.isOnline()) {\r\n\t\t\t\t\t\tawait game.delayx();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (const target of result.targets) {\r\n\t\t\t\t\t\ttrigger.targets.push(target);\r\n\t\t\t\t\t\tplayer.line(target);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"shuiqiangmrfz\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tjianfengmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t},\r\n\t\t\tfrequent: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tconst next = player.judge(card => {\r\n\t\t\t\t\tconst suit = get.suit(card);\r\n\t\t\t\t\tif (suit === \"spade\") return -4;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t\tnext.judge2 = result => {\r\n\t\t\t\t\treturn result.bool === false;\r\n\t\t\t\t};\r\n\t\t\t\tresult = await next.forResult();\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tif (result.suit === \"spade\") {\r\n\t\t\t\t\tconst list = [];\r\n\t\t\t\t\tfor (const card of trigger.cards) {\r\n\t\t\t\t\t\tif (get.position(card, true) === \"o\") {\r\n\t\t\t\t\t\t\tlist.push(card);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (trigger.addCount !== false) {\r\n\t\t\t\t\t\ttrigger.addCount = false;\r\n\t\t\t\t\t\ttrigger.player.getStat().card.sha--;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tawait player.gain(list, \"gain2\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\t//水月\r\n\t\tliqunmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { target: \"useCardToTargeted\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.player == player) return false;\r\n\t\t\t\treturn event.cards.length < 2 || get.distance(player, event.target) < 2;\r\n\t\t\t},\r\n\t\t\tusable: 1,\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (event.card.name == \"wugu\" || event.card.name == \"tao\") return false;\r\n\t\t\t\tif (get.attitude(player, event.target) > 2 && event.card.name == \"sha\") return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (trigger.parent) trigger.parent.excluded.add(player);\r\n\t\t\t},\r\n\t\t},\r\n\t\tchuangshangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.getParent()?.name == \"chuangshangmrfz\") return false;\r\n\t\t\t\tif (event.player == player) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tevent.player.isMinHp() ||\r\n\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && player.inRange(current) && current.maxHp / 2 >= current.hp;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst target = trigger.player;\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tconst str1 = \"摸两张牌\";\r\n\t\t\t\tconst str2 = \"对\" + get.translation(target) + \"造成一点伤害\";\r\n\t\t\t\tif (\r\n\t\t\t\t\ttarget.isMinHp() &&\r\n\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\treturn current !== player && player.inRange(current) && current.maxHp / 2 >= current.hp;\r\n\t\t\t\t\t})\r\n\t\t\t\t) {\r\n\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t.chooseControl(str1, str2)\r\n\t\t\t\t\t\t.set(\"prompt\", get.prompt(\"chuangshangmrfz\"))\r\n\t\t\t\t\t\t.set(\"prompt2\", \"请选择一项\")\r\n\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\t\tif (aiPlayer.hp < 2 && aiPlayer.countCards(\"h\") < 3) return 0;\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tawait player.draw();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tif (result.index === 0) {\r\n\t\t\t\t\tawait player.draw(2);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tawait target.damage();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tjinghuamrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.getParent()?.triggeredTargets3?.length > 1) return false;\r\n\t\t\t\tif (event.card.name != \"sha\") return false;\r\n\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\treturn current != player && current != event.target;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (player.hp < 3) return false;\r\n\t\t\t\tif (\r\n\t\t\t\t\t!game.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != event.target && current != player && current != event.player && get.attitude(player, current) < 2;\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tresult = await player\r\n\t\t\t\t\t.chooseTarget(\r\n\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t[1, 2],\r\n\t\t\t\t\t\tget.prompt(\"jinghuamrfz\"),\r\n\t\t\t\t\t\t\"为\" + get.translation(trigger.card) + \"增加至多两个目标\",\r\n\t\t\t\t\t\t(card, player, target) => {\r\n\t\t\t\t\t\t\treturn !_status.event.sourcex.includes(target) && player.canUse(_status.event.card, target, false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"sourcex\", trigger.targets)\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\treturn get.effect(target, _status.event.card, aiPlayer, aiPlayer);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"card\", trigger.card)\r\n\t\t\t\t\t.setHiddenSkill(event.name)\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tif (result.targets) {\r\n\t\t\t\t\tplayer.addTempSkill(\"jinghuamrfz2\", {\r\n\t\t\t\t\t\tplayer: \"useCardAfter\",\r\n\t\t\t\t\t});\r\n\t\t\t\t\tfor (const target of result.targets) {\r\n\t\t\t\t\t\ttrigger.targets.push(target);\r\n\t\t\t\t\t\tplayer.line(target);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tjinghuamrfz2: {\r\n\t\t\tcharlotte: true,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { player: \"useCardEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.card.name != \"sha\") return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.getHistory(\"sourceDamage\", function (evt) {\r\n\t\t\t\t\t\treturn evt.card == event.card;\r\n\t\t\t\t\t}).length <= 2\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.loseHp();\r\n\t\t\t},\r\n\t\t},\r\n\t\t//仇白\r\n\t\truximrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.target == player) return false;\r\n\t\t\t\tif (event.getParent()?.triggeredTargets3?.length > 1) return false;\r\n\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.target) < 2;\r\n\t\t\t},\r\n\t\t\tsubfrequent: [\"link\"],\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tconst next = player.judge(card => {\r\n\t\t\t\t\tconst suit = get.suit(card);\r\n\t\t\t\t\tif (suit === \"spade\") return -2;\r\n\t\t\t\t\tif (suit === \"club\") return -4;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t\tnext.judge2 = result => {\r\n\t\t\t\t\treturn result.bool === false;\r\n\t\t\t\t};\r\n\t\t\t\tresult = await next.forResult();\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tfor (const target of trigger.targets) {\r\n\t\t\t\t\tif (result.color === \"black\") {\r\n\t\t\t\t\t\ttarget.link(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (result.suit === \"club\") {\r\n\t\t\t\t\t\tplayer.addTempSkill(\"ruximrfz2\", \"phaseEnd\");\r\n\t\t\t\t\t\tplayer.addMark(\"ruximrfz2\", 1, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"ruximrfz_link\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tlink: {\r\n\t\t\t\t\ttrigger: { player: \"useCardToPlayer\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.target == player) return false;\r\n\t\t\t\t\t\tif (event.targets.length > 1) return false;\r\n\t\t\t\t\t\treturn event.target.isLinked() || event.target.countCards(\"j\") > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfrequent: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst target = trigger.targets[0];\r\n\t\t\t\t\t\tlet result;\r\n\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\tif (target.countCards(\"hej\") === 0) {\r\n\t\t\t\t\t\t\tawait player.draw();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 1\r\n\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t.chooseBool(\r\n\t\t\t\t\t\t\t\tget.prompt(\"ruximrfz\"),\r\n\t\t\t\t\t\t\t\t\"【入隙】:是否摸一张牌</br>选择取消则为弃置\" + get.translation(target) + \"的区域内一张牌\"\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\t\t\tconst att = get.attitude(aiPlayer, target);\r\n\t\t\t\t\t\t\t\tconst num = Math.random();\r\n\t\t\t\t\t\t\t\tif (att > 2 && target.countCards(\"j\") > 0) return false;\r\n\t\t\t\t\t\t\t\treturn num > 0.5;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t// step 2\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tawait player.draw();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tawait player.discardPlayerCard(target, \"hej\", true);\r\n\t\t\t\t\t\t\tplayer.line(target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\truximrfz2: {\r\n\t\t\tcharlotte: true,\r\n\t\t\tonremove: true,\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tif (card.name == \"sha\") return num + player.countMark(\"ruximrfz2\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\twenxuemrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\ttrigger: { player: \"useCard2\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.card.name != \"sha\") return false;\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t!event.targets.includes(current) &&\r\n\t\t\t\t\t\t!!player.canUse(event.card, current) &&\r\n\t\t\t\t\t\tplayer.inRange(current) &&\r\n\t\t\t\t\t\t(current.isLinked() || current.countCards(\"j\") > 0)\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseTarget(\r\n\t\t\t\t\t\t[1, 2],\r\n\t\t\t\t\t\tget.prompt(\"wenxuemrfz\"),\r\n\t\t\t\t\t\t\"为\" + get.translation(trigger.card) + \"增加至多两个目标\",\r\n\t\t\t\t\t\tfunction (card, player, target) {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t!_status.event.sourcex.includes(target) &&\r\n\t\t\t\t\t\t\t\tplayer.inRange(target) &&\r\n\t\t\t\t\t\t\t\tplayer.canUse(_status.event.card, target) &&\r\n\t\t\t\t\t\t\t\t(target.isLinked() || target.countCards(\"j\") > 0)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"sourcex\", trigger.targets)\r\n\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\treturn get.effect(target, _status.event.card, player, player);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"card\", trigger.card)\r\n\t\t\t\t\t.setHiddenSkill(event.name)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (result.targets) {\r\n\t\t\t\t\tfor (var i = 0; i < result.targets.length; i++) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"wenxuemrfz\", result.targets[i]);\r\n\t\t\t\t\t\ttrigger.targets.push(result.targets[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"wenxuemrfz_sha\", \"wenxuemrfz_count\", \"wenxuemrfz_clear\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tsha: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.card.name != \"sha\") return false;\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t!game.hasPlayer(current => {\r\n\t\t\t\t\t\t\t\treturn current != player && player.inRange(current) && !!player.canUse(\"sha\", current);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\tvar history = player.getHistory(\"useCard\", function (evt) {\r\n\t\t\t\t\t\t\treturn evt.card.name == \"sha\" && evt.cards && evt.cards.length == 1;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn history.length % 2 == 0 && event.cards && event.cards.length == 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet result;\r\n\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\tconst history = player.getHistory(\"useCard\", evt => {\r\n\t\t\t\t\t\t\treturn evt.card.name === \"sha\" && evt.cards && evt.cards.length === 1;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tevent.num = history.length / 2;\r\n\t\t\t\t\t\tresult = await player.chooseBool(get.prompt(\"wenxuemrfz\"), \"可以使用\" + event.num + \"张【杀】\").forResult();\r\n\r\n\t\t\t\t\t\t// step 1 loop (original event.redo())\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\twhile (event.num > 0) {\r\n\t\t\t\t\t\t\t\tawait player.chooseUseTarget(\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\t\t\t\t\tisCard: true,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\"请选择【杀】的目标 (还可使用\" + event.num + \"张【杀】)\",\r\n\t\t\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\tevent.num--;\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tplayer.logSkill(\"wenxuemrfz\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tcount: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player == _status.currentPhase) return false;\r\n\t\t\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addMark(\"wenxuemrfz_count\", 1, false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeMark(\"wenxuemrfz_count\", player.countMark(\"wenxuemrfz_count\"), false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//归溟幽灵鲨\r\n\t\tyongwomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"dying\" },\r\n\t\t\tforced: true,\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tif (player.isTurnedOver()) return \"复活不可用\";\r\n\t\t\t\t\tif (!player.storage.yongwomrfz2 && !player.isTurnedOver()) return \"复活未使用\";\r\n\t\t\t\t\treturn \"复活已使用\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.storage.yongwomrfz2) return false;\r\n\t\t\t\treturn !player.isTurnedOver();\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.storage.yongwomrfz2 = true;\r\n\t\t\t\tplayer.turnOver();\r\n\t\t\t\tif (player.hp <= 0) player.recover(1 - player.hp);\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tglobalTo: function (source, player, distance) {\r\n\t\t\t\t\tif (player.isTurnedOver()) return distance + 1;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"yongwomrfz_discard\", \"yongwomrfz_change1\", \"yongwomrfz_change2\", \"yongwomrfz2\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdiscard: {\r\n\t\t\t\t\ttrigger: { global: \"useCardAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!player.isTurnedOver()) return false;\r\n\t\t\t\t\t\tif (event.player == player) return false;\r\n\t\t\t\t\t\tif (event.player.countCards(\"he\") == 0) return false;\r\n\t\t\t\t\t\treturn event.player == player.getNext() || event.player == player.getPrevious();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst target = trigger.player;\r\n\t\t\t\t\t\tlet result;\r\n\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\tawait target.chooseToDiscard(\"he\", true, \"【拥我】:请弃置一张牌\");\r\n\t\t\t\t\t\ttarget.addMark(\"yongwomrfz2\", 1, false);\r\n\r\n\t\t\t\t\t\t// step 1\r\n\t\t\t\t\t\tif (target.countMark(\"yongwomrfz2\") >= 2) {\r\n\t\t\t\t\t\t\ttarget.removeMark(\"yongwomrfz2\", 2, false);\r\n\t\t\t\t\t\t\tawait target.damage();\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"yongwomrfz\", target);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 2\r\n\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t.chooseBool(\"【拥我】:是否翻面\")\r\n\t\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\t\t\tif (aiPlayer.hp < 2 && !aiPlayer.storage.yongwomrfz2) return true;\r\n\t\t\t\t\t\t\t\tif (get.attitude(aiPlayer, aiPlayer.getNext()) > 2 || get.attitude(aiPlayer, aiPlayer.getPrevious()) > 2) return true;\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t// step 3\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tawait player.turnOver();\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"yongwomrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tchange1: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"turnOverAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn !player.isTurnedOver();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.draw(2);\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"yongwomrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tchange2: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.isTurnedOver() || !event.player.isAlive()) return false;\r\n\t\t\t\t\t\treturn (player.getStat(\"damage\") || 0) > 0 || player.getHistory(\"damage\").length > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst result = await player\r\n\t\t\t\t\t\t\t.chooseBool(\"【拥我】:是否翻面\")\r\n\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\tvar num = 0.2,\r\n\t\t\t\t\t\t\t\t\tplayer = _status.event.player;\r\n\t\t\t\t\t\t\t\tif (player.countCards(\"h\") > 2) num + 0.3;\r\n\t\t\t\t\t\t\t\tif (player.hp > 1) num + 0.1;\r\n\t\t\t\t\t\t\t\tif (get.attitude(player, player.getNext()) < 2 || get.attitude(player, player.getPrevious()) < 2) num + 0.3;\r\n\t\t\t\t\t\t\t\tif (player.isTurnedOver()) num + 0.3;\r\n\t\t\t\t\t\t\t\treturn Math.random() + num > 0.6;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tplayer.turnOver();\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"yongwomrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tyongwomrfz2: {\r\n\t\t\tsilent: true,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.storage.yongwomrfz2;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.storage.yongwomrfz2 = false;\r\n\t\t\t},\r\n\t\t},\r\n\t\t//白铁\r\n\t\tjigongmrfz: {\r\n\t\t\tderivation: [\"jigongmrfz_card\"],\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tconst next = player\r\n\t\t\t\t\t.chooseControl()\r\n\t\t\t\t\t.set(\"choiceList\", [\r\n\t\t\t\t\t\t\"白铁多功能平台 - 攻击型：当你造成至少两点伤害时，你可以令此伤害 +1。\",\r\n\t\t\t\t\t\t\"白铁多功能平台 - 支援型：锁定技，弃牌阶段开始时，你摸一张牌并额外执行一个出牌阶段。\",\r\n\t\t\t\t\t\t\"铁钳号原型机：出牌阶段你可以弃置 X 张带有伤害类标签的牌，然后选择一名你攻击范围内的其他角色，对其造成一点伤害（X=此技能本回合使用数 +1）。\",\r\n\t\t\t\t\t])\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\treturn [0, 1, 2].randomGet();\r\n\t\t\t\t\t});\r\n\t\t\t\tnext.set(\"prompt\", get.prompt(\"jigongmrfz\")).set(\"prompt2\", \"请选择一项\");\r\n\t\t\t\tresult = await next.forResult();\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tconst list = [\"baitiemrfzcard1\", \"baitiemrfzcard2\", \"baitiemrfzcard3\"];\r\n\t\t\t\tfor (let i = 0; i < list.length; i++) {\r\n\t\t\t\t\tif (result.index === i) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tevent.card = game.createCard(list[i], [\"heart\", \"spade\"].randomGet(), [1, 2, 6, 8].randomGet());\r\n\t\t\t\t\t\tawait player.gain(event.card, \"gain2\");\r\n\t\t\t\t\t\tevent.card2 = list[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 2\r\n\t\t\t\tconst card = event.card;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (player.getCards(\"h\").includes(card) && get.name(card, player) === event.card2) {\r\n\t\t\t\t\tawait player.chooseUseTarget(card, \"nopopup\", true);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"jigongmrfz_gcard\", \"jigongmrfz_zb\", \"jigongmrfz_discard\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tgcard: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar list = [\"baitiemrfzcard1\", \"baitiemrfzcard2\", \"baitiemrfzcard3\"];\r\n\t\t\t\t\t\tfor (var i = 0; i < 3; i++) {\r\n\t\t\t\t\t\t\tif (player.countCards(\"e\", list[i])) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet result;\r\n\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t.chooseTarget(\"你可以将【支援装备】移动至一名其他角色的装备区\", (card, player, target) => {\r\n\t\t\t\t\t\t\t\treturn target !== player && !target.getEquip(5) && !target.isDisabled(5);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\t\treturn get.attitude(player, target);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t// step 1\r\n\t\t\t\t\t\tconst list = [\"baitiemrfzcard1\", \"baitiemrfzcard2\", \"baitiemrfzcard3\"];\r\n\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\tfor (let i = 0; i < list.length; i++) {\r\n\t\t\t\t\t\t\t\tif (player.countCards(\"e\", list[i])) {\r\n\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\tevent.card = player.getCards(\"e\", card => {\r\n\t\t\t\t\t\t\t\t\t\treturn card.name === list[i];\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tawait player.lose(event.card, ui.ordering, \"visible\");\r\n\t\t\t\t\t\t\t\t\tplayer.line(result.targets[0]);\r\n\t\t\t\t\t\t\t\t\tevent.target = result.targets[0];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 2\r\n\t\t\t\t\t\tevent.target.equip(event.card[0]);\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"jigongmrfz\", event.target);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tzb: {\r\n\t\t\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar list = [\"baitiemrfzcard1\", \"baitiemrfzcard2\", \"baitiemrfzcard3\"];\r\n\t\t\t\t\t\tfor (var i = 0; i < 3; i++) {\r\n\t\t\t\t\t\t\tif (player.countCards(\"e\", list[i])) return false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet result;\r\n\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\tconst next = player\r\n\t\t\t\t\t\t\t.chooseControl()\r\n\t\t\t\t\t\t\t.set(\"choiceList\", [\r\n\t\t\t\t\t\t\t\t\"白铁多功能平台 - 攻击型：当你造成至少两点伤害时，你可以令此伤害 +1。\",\r\n\t\t\t\t\t\t\t\t\"白铁多功能平台 - 支援型：锁定技，弃牌阶段开始时，你额外执行一个出牌阶段和摸牌阶段。\",\r\n\t\t\t\t\t\t\t\t\"铁钳号原型机：出牌阶段你可以弃置 X 张带有伤害类标签的牌，然后选择一名你攻击范围内的其他角色，对其造成一点伤害（X=此技能本回合使用数 +1）。\",\r\n\t\t\t\t\t\t\t])\r\n\t\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\t\treturn [0, 1, 2].randomGet();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tnext.set(\"prompt\", get.prompt(\"jigongmrfz\")).set(\"prompt2\", \"请选择一项\");\r\n\t\t\t\t\t\tresult = await next.forResult();\r\n\r\n\t\t\t\t\t\t// step 1\r\n\t\t\t\t\t\tconst list = [\"baitiemrfzcard1\", \"baitiemrfzcard2\", \"baitiemrfzcard3\"];\r\n\t\t\t\t\t\tfor (let i = 0; i < list.length; i++) {\r\n\t\t\t\t\t\t\tif (result.index === i) {\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tevent.card = game.createCard(list[i], [\"heart\", \"spade\"].randomGet(), [1, 2, 6, 8].randomGet());\r\n\t\t\t\t\t\t\t\tawait player.gain(event.card, \"gain2\");\r\n\t\t\t\t\t\t\t\tevent.card2 = list[i];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 2\r\n\t\t\t\t\t\tconst card = event.card;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (player.getCards(\"h\").includes(card) && get.name(card, player) === event.card2) {\r\n\t\t\t\t\t\t\tawait player.chooseUseTarget(card, \"nopopup\", true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"jigongmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdiscard: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar list = [\"baitiemrfzcard1\", \"baitiemrfzcard2\", \"baitiemrfzcard3\"];\r\n\t\t\t\t\t\tfor (var i = 0; i < 3; i++) {\r\n\t\t\t\t\t\t\tif (event.player.countCards(\"e\", list[i])) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar list = [\"baitiemrfzcard1\", \"baitiemrfzcard2\", \"baitiemrfzcard3\"];\r\n\t\t\t\t\t\tfor (var i = 0; i < 3; i++) {\r\n\t\t\t\t\t\t\tif (trigger.player.countCards(\"e\", list[i])) {\r\n\t\t\t\t\t\t\t\tlet card = trigger.player.getCards(\"e\", function (card) {\r\n\t\t\t\t\t\t\t\t\treturn card.name == list[i];\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\ttrigger.player.discard(card);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tjiefeimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: [\"loseEnd\", \"cardsDiscardEnd\"] },\r\n\t\t\tdirect: true,\r\n\t\t\tpopup: false,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar cs = event.cards;\r\n\t\t\t\tfor (var i = 0; i < cs.length; i++) {\r\n\t\t\t\t\tif (cs[i].name.indexOf(\"baitiemrfzcard\") == 0 && get.position(cs[i], true) == \"d\") return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tforceDie: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (!_status.jigongmrfz) _status.jigongmrfz = {};\r\n\t\t\t\tconst list = [];\r\n\t\t\t\tconst list2 = [\"baitiemrfzcard1\", \"baitiemrfzcard2\", \"baitiemrfzcard3\"];\r\n\t\t\t\tconst cs = trigger.cards;\r\n\t\t\t\tfor (let i = 0; i < cs.length; i++) {\r\n\t\t\t\t\tif (cs[i].name.indexOf(\"baitiemrfzcard\") === 0 && get.position(cs[i], true) === \"d\") {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t_status.jigongmrfz[cs[i].name] = false;\r\n\t\t\t\t\t\tlist.push(cs[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (let j = 0; j < list2.length; j++) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (cs[i].name === list2[j]) event.card = list2[j];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tgame.log(list, \"已被移出游戏\");\r\n\t\t\t\tgame.cardsGotoSpecial(list);\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tevent.card = game.createCard(list[0].name, [\"heart\", \"spade\"].randomGet(), [1, 2, 6, 8].randomGet());\r\n\t\t\t\tplayer.popup(\"jigongmrfz\");\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tresult = await player.chooseBool(get.prompt(\"jigongmrfz\")).forResult();\r\n\r\n\t\t\t\t// step 2\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"jiefeimrfz\");\r\n\t\t\t\t\tconst next = player.judge(card => {\r\n\t\t\t\t\t\tconst color = get.color(card);\r\n\t\t\t\t\t\tif (color === \"red\") return -4;\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.judge2 = result => {\r\n\t\t\t\t\t\treturn result.bool === false;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tresult = await next.forResult();\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 3\r\n\t\t\t\tif (result.color === \"red\") {\r\n\t\t\t\t\tawait player.draw();\r\n\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t.chooseTarget(\"你可以令一名角色装备【支援装备】\", (card, player, target) => {\r\n\t\t\t\t\t\t\treturn !target.getEquip(5) && !target.isDisabled(5);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\treturn get.attitude(player, target);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 4\r\n\t\t\t\tif (result.targets) {\r\n\t\t\t\t\tconst cards = game.createCard(event.card, [\"heart\", \"spade\"].randomGet(), [1, 2, 6, 8].randomGet());\r\n\t\t\t\t\tconst target = result.targets[0];\r\n\t\t\t\t\tawait target.gain(cards, \"gain2\");\r\n\t\t\t\t\ttarget.equip(cards);\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"jiefeimrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\t//推进之王 维纳\r\n\t\tyuechuimrfz: {\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.addMark(skill, 1, false);\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardAfter\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.card && event.card.name == \"sha\";\r\n\t\t\t},\r\n\t\t\tfrequent: true,\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\tlet num = player.countMark(\"yuechuimrfz\") > 0 ? player.countMark(\"yuechuimrfz\") : 1;\r\n\t\t\t\treturn `是否摸${num}张牌？`;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tawait player.draw(player.countMark(\"yuechuimrfz\") > 0 ? player.countMark(\"yuechuimrfz\") : 1);\r\n\t\t\t\tif (player.countMark(\"yuechuimrfz\") < 3 && player.countCards(\"he\", { type: \"equip\" }) > 0) {\r\n\t\t\t\t\tconst { cards } = await player\r\n\t\t\t\t\t\t.chooseToDiscard(\"he\", card => get.type(card) == \"equip\")\r\n\t\t\t\t\t\t.set(\r\n\t\t\t\t\t\t\t\"prompt\",\r\n\t\t\t\t\t\t\t`【跃锤】:你可以弃置一张装备牌令‘跃锤’中[]内的数字+1（当前：${player.countMark(\"yuechuimrfz\") > 0 ? player.countMark(\"yuechuimrfz\") : 1}）`\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\t\treturn get.value(card) < 8;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (cards) player.addMark(\"yuechuimrfz\", 1, false);\r\n\t\t\t\t}\r\n\t\t\t\tlet targets = trigger.targets,\r\n\t\t\t\t\ttargetx = game.players.slice().filter(i => {\r\n\t\t\t\t\t\tfor (var j of targets) {\r\n\t\t\t\t\t\t\tif (get.distance(j, i) == 1 && !targets.includes(i)) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t});\r\n\t\t\t\tif (targetx) {\r\n\t\t\t\t\tconst { targets: targetscs } = await player\r\n\t\t\t\t\t\t.chooseTarget()\r\n\t\t\t\t\t\t.set(\"prompt\", `【跃锤】:你可以对${get.translation(targetx)}其中一名角色造成一点伤害`)\r\n\t\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\r\n\t\t\t\t\t\t\treturn _status.event.targets.includes(target);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\treturn get.damageEffect(target, get.event().player, get.event().player) > 0;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"targets\", targetx)\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (targetscs) {\r\n\t\t\t\t\t\ttargetscs[0].damage(player);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tfensuimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"dying\" },\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.player != player && get.distance(player, event.player) <= 1;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.draw();\r\n\t\t\t\tplayer.line(trigger.player);\r\n\t\t\t},\r\n\t\t},\r\n\t\t//伺夜\r\n\t\tlangqunmrfz: {\r\n\t\t\tmark: true,\r\n\t\t\tmarktext: \"狼群\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"狼群\",\r\n\t\t\t\tcontent: \"有#个狼\",\r\n\t\t\t},\r\n\t\t\taudio: 4,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.addMark(\"langqunmrfz\", 2);\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\tif (player.hasMark(\"langqunmrfz\")) return num + 1;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"langqunmrfz_gainb\", \"langqunmrfz_damage\", \"langqunmrfz_discard\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tgainb: {\r\n\t\t\t\t\taudio: \"langqunmrfz\",\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"loseAfter\",\r\n\t\t\t\t\t\tglobal: \"loseAsyncAfter\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfrequent: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.getlx === false) return false;\r\n\t\t\t\t\t\tif (player.countMark(\"langqunmrfz\") > 2) return false;\r\n\t\t\t\t\t\treturn !player.hasSkill(\"langqunmrfz2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addMark(\"langqunmrfz\");\r\n\t\t\t\t\t\tplayer.addTempSkill(\"langqunmrfz2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\taudio: \"langqunmrfz\",\r\n\t\t\t\t\ttrigger: { target: \"useCardToTargeted\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.countMark(\"langqunmrfz\") > 0 && get.tag(event.card, \"damage\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\"你可以移去一个‘狼群’标记并令此牌(\" +\r\n\t\t\t\t\t\t\tget.translation(event.card) +\r\n\t\t\t\t\t\t\t\")取消你为目标(剩余‘狼群’数:\" +\r\n\t\t\t\t\t\t\tplayer.countMark(\"langqunmrfz\") +\r\n\t\t\t\t\t\t\t\")\"\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.targets.remove(player);\r\n\t\t\t\t\t\tif (trigger.parent) trigger.parent.triggeredTargets2.remove(player);\r\n\t\t\t\t\t\ttrigger.untrigger();\r\n\t\t\t\t\t\tplayer.removeMark(\"langqunmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdiscard: {\r\n\t\t\t\t\taudio: \"langqunmrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDiscardEnd\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar cards = [];\r\n\t\t\t\t\t\tgame.getGlobalHistory(\"cardMove\", evt => {\r\n\t\t\t\t\t\t\tif (evt.name == \"cardsDiscard\") {\r\n\t\t\t\t\t\t\t\tif (evt.getParent(\"phaseDiscard\") == trigger) {\r\n\t\t\t\t\t\t\t\t\tvar moves = evt.cards.filterInD(\"d\");\r\n\t\t\t\t\t\t\t\t\tcards.addArray(moves);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (evt.name == \"lose\") {\r\n\t\t\t\t\t\t\t\tif (evt.type != \"discard\" || evt.position != ui.discardPile || evt.getParent(\"phaseDiscard\") != trigger) return false;\r\n\t\t\t\t\t\t\t\tvar moves = evt.cards.filterInD(\"d\");\r\n\t\t\t\t\t\t\t\tcards.addArray(moves);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tplayer.draw(Math.floor(cards.length / 2) + 1);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tlangqunmrfz2: {},\r\n\t\tqunxingmrfz: {\r\n\t\t\tmarktext: \"群仇\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"群仇\",\r\n\t\t\t\tcontent: \"你被狼群盯上了\",\r\n\t\t\t},\r\n\t\t\taudio: 4,\r\n\t\t\ttrigger: { target: \"useCardToTarget\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.player != player && event.player.countMark(\"qunxingmrfz\") < 6;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"是否令\" + get.translation(event.player) + \"获得一个‘群仇’标记\";\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.player) < 2;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.player.addMark(\"qunxingmrfz\");\r\n\t\t\t\tplayer.line(trigger.player);\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\ttargetInRange: function (card, player, target) {\r\n\t\t\t\t\tif (target.hasMark(\"qunxingmrfz\")) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"qunxingmrfz_damage\", \"qunxingmrfz_dirhit\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\taudio: \"qunxingmrfz\",\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.hasMark(\"qunxingmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar target = trigger.player;\r\n\t\t\t\t\t\tplayer.draw(target.countMark(\"qunxingmrfz\"));\r\n\t\t\t\t\t\ttarget.removeMark(\"qunxingmrfz\", player.countMark(\"qunxingmrfz\"));\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdirhit: {\r\n\t\t\t\t\taudio: \"qunxingmrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.card &&\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t(get.type(event.card) == \"trick\" ||\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t(get.type(event.card) == \"basic\" && ![\"shan\", \"tao\", \"jiu\", \"du\"].includes(event.card.name))) &&\r\n\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current != player && current.hasMark(\"qunxingmrfz\");\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current != player && current.hasMark(\"qunxingmrfz\");\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tplayer.line(\r\n\t\t\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current != player && current.hasMark(\"qunxingmrfz\");\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t\t\treturn arg.target.hasMark(\"qunxingmrfz\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//百炼嘉维尔\r\n\t\tyixuemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"recoverBegin\" },\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.hasSkill(\"yixuemrfz2\");\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.num++;\r\n\t\t\t\tplayer.addSkill(\"yixuemrfz2\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tyixuemrfz2: {\r\n\t\t\tsilent: true,\r\n\t\t\tfirstDo: true,\r\n\t\t\tcharlotte: true,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.hasSkill(\"yixuemrfz2\");\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.removeSkill(\"yixuemrfz2\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tjuximrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.targets.length > 1) return false;\r\n\t\t\t\treturn event.card.name == \"sha\" && event.target.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tconst cards = trigger.target.getCards(\"hej\");\r\n\t\t\t\tconst list = [];\r\n\t\t\t\tlet num = 0;\r\n\t\t\t\tfor (const card of cards) {\r\n\t\t\t\t\tlist.add(get.suit(card, player));\r\n\t\t\t\t}\r\n\t\t\t\tfor (const suit of lib.suit) {\r\n\t\t\t\t\tif (list.includes(suit)) num++;\r\n\t\t\t\t}\r\n\t\t\t\tresult = await player\r\n\t\t\t\t\t.choosePlayerCard(\r\n\t\t\t\t\t\ttrigger.target,\r\n\t\t\t\t\t\t\"he\",\r\n\t\t\t\t\t\t[1, Math.min(trigger.target.countCards(\"he\"), num)],\r\n\t\t\t\t\t\tget.prompt(\"juximrfz\", trigger.target) + \"(可选\" + num + \"张牌)\"\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"forceAuto\", true)\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tif (result.links && result.links.length) {\r\n\t\t\t\t\tconst target = trigger.target;\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"juximrfz\", target);\r\n\t\t\t\t\tconst next = player.addToExpansion(result.cards, \"giveAuto\", player);\r\n\t\t\t\t\tnext.gaintag.add(\"juximrfz2\");\r\n\t\t\t\t\tawait next;\r\n\t\t\t\t\tplayer.addSkill(\"juximrfz2\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tunequip_ai: true,\r\n\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\tif (get.attitude(player, arg.target) > 0) return false;\r\n\t\t\t\t\tif (tag == \"directHit_ai\") return arg.target.countCards(\"h\") < 2;\r\n\t\t\t\t\tif (arg && arg.name == \"sha\" && arg.target.getEquip(2)) return true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tjuximrfz2: {\r\n\t\t\tintro: {\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t\tmark: function (dialog, storage, player) {\r\n\t\t\t\t\tvar cards = player.getExpansions(\"juximrfz2\");\r\n\t\t\t\t\tif (player.isUnderControl(true)) dialog.addAuto(cards);\r\n\t\t\t\t\telse return \"共有\" + get.cnNumber(cards.length) + \"张牌\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.card.name != \"sha\") return false;\r\n\t\t\t\treturn player.getExpansions(\"juximrfz2\").length > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst history = player.getHistory(\"sourceDamage\", function (evt) {\r\n\t\t\t\t\treturn evt.card == trigger.card;\r\n\t\t\t\t}).length;\r\n\t\t\t\tconst cards = player.getExpansions(\"juximrfz2\");\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\tif (history > 0) {\r\n\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t.chooseButton([\"你可以至多获得两张牌\", cards], [0, Math.min(2, cards.length)], true)\r\n\t\t\t\t\t\t.set(\"ai\", function (button) {\r\n\t\t\t\t\t\t\treturn get.value(button.link, _status.event.player);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = await trigger.targets[0]\r\n\t\t\t\t\t\t.chooseButton([\"你可以至多获得两张牌\", cards], [0, Math.min(2, cards.length)], true)\r\n\t\t\t\t\t\t.set(\"ai\", function (button) {\r\n\t\t\t\t\t\t\treturn get.value(button.link, _status.event.player);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t}\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tif (history > 0) await player.gain(result.links, \"gain2\");\r\n\t\t\t\t\telse await trigger.targets[0].gain(result.links, \"gain2\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tplayer.loseToDiscardpile(cards);\r\n\t\t\t\tplayer.removeSkill(\"juximrfz2\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tconghunmrfz: {\r\n\t\t\tmarktext: \"坚韧\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"坚韧\",\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tif (player.storage.conghunmrfz_lose) return \"已有\" + player.countMark(\"conghunmrfz\") + \"个坚韧标记</br>本轮已发动过【丛魂①】\";\r\n\t\t\t\t\treturn \"已有\" + player.countMark(\"conghunmrfz\") + \"个坚韧标记</br>本轮未发动过【丛魂①】\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.conghunmrfza = -10;\r\n\t\t\t},\r\n\t\t\tfirstDo: true,\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.hasMark(\"conghunmrfz\") && player.storage.conghunmrfza <= game.roundNumber - 2;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn player.hp < 3 || player.countCards(\"he\") < 4 || player.countCards(\"h\") == 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.storage.conghunmrfz_lose = true;\r\n\t\t\t\tplayer.storage.conghunmrfza = game.roundNumber;\r\n\t\t\t},\r\n\t\t\tgroup: [\"conghunmrfz_dam\", \"conghunmrfz_rem\", \"conghunmrfz_lose\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdam: {\r\n\t\t\t\t\taudio: \"conghunmrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"damageBegin3\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.storage.conghunmrfz_lose;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num--;\r\n\t\t\t\t\t\tplayer.addMark(\"conghunmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\trem: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.storage.conghunmrfz_lose && player.storage.conghunmrfza <= game.roundNumber - 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.conghunmrfz_lose = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tlose: {\r\n\t\t\t\t\taudio: \"conghunmrfza\",\r\n\t\t\t\t\ttrigger: { global: \"phaseBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"conghunmrfz\") && player.storage.conghunmrfza <= game.roundNumber - 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.loseHp();\r\n\t\t\t\t\t\tplayer.removeMark(\"conghunmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tconghunmrfza: { audio: 2 },\r\n\t\t//史尔特尔\r\n\t\tyujinmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"dying\" },\r\n\t\t\tunique: true,\r\n\t\t\tmark: true,\r\n\t\t\tlimited: true,\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationStr: \"余烬\",\r\n\t\t\tanimationColor: \"fire\",\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.yujinmrfz = false;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.yujinmrfz;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.storage.yujinmrfz = true;\r\n\t\t\t\tlet next = [\r\n\t\t\t\t\tplayer.phaseZhunbei(),\r\n\t\t\t\t\tplayer.phaseJudge(),\r\n\t\t\t\t\tplayer.phaseDraw(),\r\n\t\t\t\t\tplayer.phaseUse(),\r\n\t\t\t\t\tplayer.phaseDiscard(),\r\n\t\t\t\t\tplayer.phaseJieshu(),\r\n\t\t\t\t];\r\n\t\t\t\tfor (var i = 0; i < next.length; i++) {\r\n\t\t\t\t\tevent.next.remove(next[i]);\r\n\t\t\t\t\ttrigger.next.push(next[i]);\r\n\t\t\t\t}\r\n\t\t\t\tplayer.awakenSkill(event.name);\r\n\t\t\t},\r\n\t\t\tgroup: \"yujinmrfz_rec\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\trec: {\r\n\t\t\t\t\taudio: \"huanghunmrfza\",\r\n\t\t\t\t\ttrigger: { player: \"turnOverAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.storage.yujinmrfz == true && !player.isTurnedOver();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.yujinmrfz = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thuanghunmrfza: { audio: 2 },\r\n\t\thuanghunmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (player.countCards(\"he\") < 3) return false;\r\n\t\t\t\tif (\r\n\t\t\t\t\tplayer.countCards(\"j\") > 0 &&\r\n\t\t\t\t\t!player.hasCard(function (card) {\r\n\t\t\t\t\t\treturn card.name == \"wuxie\";\r\n\t\t\t\t\t}, \"h\")\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\treturn player.hasCard(function (card) {\r\n\t\t\t\t\treturn card.name == \"sha\";\r\n\t\t\t\t}, \"h\"); //QQQ\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseToDiscard(\"he\", \"【黄昏】:你可以至多弃置两张牌，然后增加等量的体力上限\", [0, 2])\r\n\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\tif (result.cards) {\r\n\t\t\t\t\tawait player.gainMaxHp(result.cards.length);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tplayer.addTempSkill(\"huanghunmrfz_lose\");\r\n\t\t\t\tplayer.addTempSkill(\"huanghunmrfz_dam\");\r\n\t\t\t\tplayer.turnOver();\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tlose: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn get.tag(event.card, \"damage\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.loseMaxHp();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdam: {\r\n\t\t\t\t\taudio: \"huanghunmrfz\",\r\n\t\t\t\t\ttrigger: { source: \"damageBegin\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tselectTarget: function (card, player, range) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\" && range[1] != -1) range[1] += 2;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tattackRange: function (player, num) {\r\n\t\t\t\t\t\t\treturn (num += 2);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tmojianmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tusable: 2,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.nature == \"fire\" && player.isPhaseUsing();\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.draw(2);\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tcardnature: function (card, player) {\r\n\t\t\t\t\tif (card.nature != \"thunder\" && card.name == \"sha\") return \"fire\";\r\n\t\t\t\t\tif (card.nature == \"thunder\" && card.name == \"sha\") return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//新流明\r\n\t\tfanyuanmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"凡人之愿\",\r\n\t\t\t\tcontent: \"“直到灯火明亮”\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"useCardToTargeted\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (get.type(event.card) != \"delay\") return false;\r\n\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\treturn current.hasMark(\"fanyuanmrfz\");\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.logSkill(\"fanyuanmrfz\");\r\n\t\t\t},\r\n\t\t\tglobal: \"fanyuanmrfz_eff\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"fanyuanmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeMark(\"fanyuanmrfz\", 1, false);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\ttargetEnabled: function (card, player, target) {\r\n\t\t\t\t\t\t\tif (get.type(card) == \"delay\" && target.hasMark(\"fanyuanmrfz\")) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tnew_weiguangmrfz: {\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"灯火不灭\",\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\treturn \"剩余次数:\" + (5 - player.countMark(\"new_weiguangmrfz\"));\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 4,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: [\"turnOverAfter\", \"linkAfter\", \"addJudgeBefore\"],\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.countMark(\"new_weiguangmrfz\") > 4) return false;\r\n\t\t\t\tif (event.name == \"link\") return event.player.isLinked();\r\n\t\t\t\tif (event.name == \"turnOver\") return event.player.isTurnedOver();\r\n\t\t\t\treturn event.name == \"addJudge\";\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"是否对\" + get.translation(event.player) + \"发动【微光】(\" + (5 - player.countMark(\"new_weiguangmrfz\")) + \"/5)？\";\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tvar att = get.attitude(player, event.player);\r\n\t\t\t\tif (event.player.hasSkill(\"xinfu_limu\") && att > 2 && event.name == \"addJudge\" && event.player.isPhaseUsing()) return false;\r\n\t\t\t\tif (event.player.hasSkill(\"xinfu_limu\") && att < 0 && event.name == \"addJudge\" && event.player.isPhaseUsing()) return true;\r\n\t\t\t\treturn att > 2;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst target = trigger.player;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tplayer.addMark(\"new_weiguangmrfz\", 1, false);\r\n\t\t\t\tif (!target.hasMark(\"fanyuanmrfz\")) {\r\n\t\t\t\t\ttarget.addMark(\"fanyuanmrfz\", 1, false);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tlet num = 3;\r\n\t\t\t\tif (target.isLinked()) {\r\n\t\t\t\t\ttarget.link(false);\r\n\t\t\t\t\tnum--;\r\n\t\t\t\t}\r\n\t\t\t\tif (target.isTurnedOver()) {\r\n\t\t\t\t\ttarget.turnOver(false);\r\n\t\t\t\t\tnum--;\r\n\t\t\t\t}\r\n\t\t\t\tif (trigger.name === \"addJudge\" || target.countCards(\"j\") > 0) {\r\n\t\t\t\t\tif (trigger.name === \"addJudge\") {\r\n\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tconst owner = get.owner(trigger.card);\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (owner && owner.getCards(\"hej\").includes(trigger.card)) {\r\n\t\t\t\t\t\t\tawait owner.lose(trigger.card, ui.discardPile);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tgame.cardsDiscard(trigger.card);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgame.log(trigger.card, \"进入了弃牌堆\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tawait target.chooseToDiscard(true, \"j\", target.countCards(\"j\"));\r\n\t\t\t\t\tnum--;\r\n\t\t\t\t}\r\n\t\t\t\tawait target.draw(num);\r\n\t\t\t},\r\n\t\t\tgroup: \"new_weiguangmrfz_rem\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\trem: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.countMark(\"new_weiguangmrfz\") > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeMark(\"new_weiguangmrfz\", player.countMark(\"new_weiguangmrfz\"), false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tyingjimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"useCardToTarget\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.target == player) return false;\r\n\t\t\t\tif (event.targets.length > 1) return false;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\treturn get.type(event.card) == \"delay\" && !player.hasMark(\"yingjimrfz\");\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"是否令\" + get.translation(event.target) + \"回复一点体力并摸一张牌\";\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.target) > 2;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.targets[0].recover();\r\n\t\t\t\ttrigger.targets[0].draw();\r\n\t\t\t\tplayer.addMark(\"yingjimrfz\", 1, false);\r\n\t\t\t},\r\n\t\t\tgroup: \"yingjimrfz_rem\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\trem: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"yingjimrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeMark(\"yingjimrfz\", 1, false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//林\r\n\t\tyinbimrfz: {\r\n\t\t\tmarktext: \"壁\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"壁\",\r\n\t\t\t\tcontent: \"·琉璃壁保护着你</br>·此琉璃壁来源【荫蔽】\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.liuliemrfz && !player.storage.yinbimrfz;\r\n\t\t\t},\r\n\t\t\tselectTarget: [1, 2],\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && !target.hasMark(\"yinbimrfz\") && !target.hasMark(\"zhenzamrfz\");\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { targets } = event;\r\n\r\n\t\t\t\tplayer.storage.yinbimrfz = true;\r\n\t\t\t\tif (!player.hasSkill(\"liuliemrfz_rem\")) player.addSkill(\"liuliemrfz_rem\");\r\n\t\t\t\tfor (var i = 0; i < targets.length; i++) {\r\n\t\t\t\t\tif (!targets[i].hasMark(\"yinbimrfz\")) targets[i].addMark(\"yinbimrfz\");\r\n\t\t\t\t\tif (!targets[i].hasSkill(\"yinbimrfz_rem\")) targets[i].addSkill(\"yinbimrfz_rem\");\r\n\t\t\t\t\tif (targets[i].hujia < 1) targets[i].changeHujia();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\trem: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (player.hasMark(\"yinbimrfz\")) {\r\n\t\t\t\t\t\t\tplayer.removeMark(\"yinbimrfz\");\r\n\t\t\t\t\t\t\tplayer.changeHujia(-1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tplayer.removeSkill(\"yinbimrfz_rem\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 10,\r\n\t\t\t\texpose: 0.3,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\ttarget: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tliuliemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\treturn current != player && get.attitude(player, current) > 2;\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t\treturn Math.random() > 0.85;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.storage.liuliemrfz = true;\r\n\t\t\t\tplayer.addSkill(\"liuliemrfz_rem\");\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\trem: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.liuliemrfz = false;\r\n\t\t\t\t\t\tplayer.storage.yinbimrfz = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhenzamrfz: {\r\n\t\t\tmarktext: \"壁\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"壁\",\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tif (player.storage.liuliemrfz) return \"·琉璃壁保护着你</br>·【缜匝②】已修改</br>·【荫蔽】已失效\";\r\n\t\t\t\t\treturn \"·琉璃壁保护着你\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 6,\r\n\t\t\tderivation: [\"zhenzamrfz_rewrite\"],\r\n\t\t\ttrigger: { global: \"damageEnd\" },\r\n\t\t\tdirect: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!event.player.hasMark(\"zhenzamrfz\") && !event.player.hasMark(\"yinbimrfz\")) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tevent.hujia &&\r\n\t\t\t\t\t!event.player.hujia &&\r\n\t\t\t\t\tevent.player.isIn() &&\r\n\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != event.player && event.player.inRangeOf(current);\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst playerx = trigger.player;\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tif (playerx.hasMark(\"zhenzamrfz\")) {\r\n\t\t\t\t\tplayerx.removeMark(\"zhenzamrfz\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayerx.removeMark(\"yinbimrfz\");\r\n\t\t\t\t}\r\n\t\t\t\tresult = await playerx\r\n\t\t\t\t\t.chooseTarget(\r\n\t\t\t\t\t\tget.prompt(\"zhenzamrfz\"),\r\n\t\t\t\t\t\t\"你可以随机获得攻击范围内一名其他角色的\" + (player.storage.liuliemrfz ? \"两张牌\" : \"一张牌\") + \"并对其造成一点伤害\",\r\n\t\t\t\t\t\t(card, player, target) => {\r\n\t\t\t\t\t\t\treturn target !== player && player.inRangeOf(target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\tconst aiTrigger = _status.event.getTrigger();\r\n\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\treturn -get.attitude(aiTrigger.player, target);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tif (result.targets) {\r\n\t\t\t\t\tconst target = result.targets[0];\r\n\t\t\t\t\tconst cardg = [];\r\n\t\t\t\t\tconst numCards = player.storage.liuliemrfz ? 2 : 1;\r\n\t\t\t\t\tfor (let i = 0; i < numCards; i++) {\r\n\t\t\t\t\t\tconst cardt = target.getCards(\"he\").randomGet();\r\n\t\t\t\t\t\tif (!cardg.includes(cardt)) {\r\n\t\t\t\t\t\t\tcardg.push(cardt);\r\n\t\t\t\t\t\t} else if (target.countCards(\"he\") > 1) {\r\n\t\t\t\t\t\t\ti--;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tawait playerx.gain(cardg, target, \"giveAuto\", \"bySelf\");\r\n\t\t\t\t\tawait target.damage(playerx || \"nosource\", \"nocard\");\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayerx.logSkill(\"zhenzamrfz\", target);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhenzamrfz_sta\", \"zhenzamrfz_gt\", \"zhenzamrfz_gt2\", \"zhenzamrfz_time1\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tsta: {\r\n\t\t\t\t\taudio: \"zhenzamrfz\",\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tlocked: false,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (event.name != \"phase\" || game.phaseNumber == 0) && player.countCards(\"h\") > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addMark(\"zhenzamrfz\");\r\n\t\t\t\t\t\tif (player.hujia < 1) player.changeHujia();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tgt: {\r\n\t\t\t\t\taudio: \"zhenzamrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseZhunbeiBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.countMark(\"zhenzamrfz_time1\") > 1) return false;\r\n\t\t\t\t\t\treturn !player.hasMark(\"zhenzamrfz\") && !player.hasMark(\"yinbimrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addMark(\"zhenzamrfz\");\r\n\t\t\t\t\t\tplayer.addMark(\"zhenzamrfz_time1\", 1, false);\r\n\t\t\t\t\t\tif (player.hujia < 1) player.changeHujia();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tgt2: {\r\n\t\t\t\t\taudio: \"zhenzamrfz\",\r\n\t\t\t\t\ttrigger: { global: \"dying\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.countMark(\"zhenzamrfz_time2\") > 1) return false;\r\n\t\t\t\t\t\tif (player.hasMark(\"zhenzamrfz\") || player.hasMark(\"yinbimrfz\")) return false;\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.player != player &&\r\n\t\t\t\t\t\t\tevent.parent &&\r\n\t\t\t\t\t\t\tevent.parent.name == \"damage\" &&\r\n\t\t\t\t\t\t\tevent.parent.source &&\r\n\t\t\t\t\t\t\tevent.parent.source == player\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addMark(\"zhenzamrfz\");\r\n\t\t\t\t\t\tplayer.addMark(\"zhenzamrfz_time2\", 1, false);\r\n\t\t\t\t\t\tif (player.hujia < 1) player.changeHujia();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttime1: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeMark(\"zhenzamrfz_time1\", player.countMark(\"zhenzamrfz_time1\"), false);\r\n\t\t\t\t\t\tplayer.removeMark(\"zhenzamrfz_time2\", player.countMark(\"zhenzamrfz_time2\"), false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttime2: {},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 0.8,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//多萝西\r\n\t\tgongzhenmrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: [\"useCardAfter\", \"respond\"] },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!player.isPhaseUsing()) return false;\r\n\t\t\t\tif (!event.card.isCard) return false;\r\n\t\t\t\treturn event.cards && event.cards.length == 1;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar cards = player.getCards(\"h\"),\r\n\t\t\t\t\tlist = [],\r\n\t\t\t\t\tnum = 0;\r\n\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\tlist.add(get.suit(i, player));\r\n\t\t\t\t}\r\n\t\t\t\tif (!list.includes(get.suit(trigger.card, player))) player.draw();\r\n\t\t\t\telse if (player.countCards(\"h\") > 0) player.chooseToDiscard(\"h\", true, \"【共振】:请弃置一张手牌\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tmengxiangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"drawAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!player.isPhaseUsing()) return false;\r\n\t\t\t\treturn event.parent && event.parent.name == \"gongzhenmrfz\";\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tawait player.addMark(\"mengxiangmrfz\", 1, false);\r\n\r\n\t\t\t\tif (player.countMark(\"mengxiangmrfz\") % 2 == 0 && player.hasMark(\"mengxiangmrfz\")) {\r\n\t\t\t\t\tplayer.addTempSkill(\"mengxiangmrfz_eff\", {\r\n\t\t\t\t\t\tplayer: \"phaseEnd\",\r\n\t\t\t\t\t});\r\n\t\t\t\t\tplayer.removeMark(\"mengxiangmrfz\", 2, false);\r\n\t\t\t\t\tif (player.countMark(\"mengxiangmrfz\") > 0) event.redo();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"mengxiangmrfz_rem\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\trem: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"mengxiangmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeMark(\"mengxiangmrfz\", player.countMark(\"mengxiangmrfz\"), false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff: {\r\n\t\t\t\t\taudio: \"mengxiangmrfz\",\r\n\t\t\t\t\ttrigger: { player: [\"useCard1\", \"respond\"] },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeSkill(\"mengxiangmrfz_eff\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable: function (card) {\r\n\t\t\t\t\t\t\treturn Infinity;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttargetInRange: function (card) {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"下一张使用或打出的牌无次数和距离限制\",\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tpaizhangmrfz: {\r\n\t\t\tglobal: \"paizhangmrfz_tag4\",\r\n\t\t\taudio: 4,\r\n\t\t\ttrigger: { player: \"loseAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (event.type != \"discard\" || event.getlx === false || event.getParent(3).name != \"gongzhenmrfz\") return false;\r\n\t\t\t\tfor (var card of event.cards) {\r\n\t\t\t\t\tif (get.position(card, true) == \"d\") return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tif (trigger.cards.length) {\r\n\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t.chooseTarget(get.prompt(\"paizhangmrfz\"), \"你可以将此牌交给一名其他角色\", (card, player, target) => {\r\n\t\t\t\t\t\t\treturn target !== player && !target.hasSkill(\"paizhangmrfz2\");\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\treturn -get.attitude(player, target);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tif (result && result.targets) {\r\n\t\t\t\t\tconst target = result.targets[0];\r\n\t\t\t\t\tconst next = target.gain(trigger.cards, \"gain2\");\r\n\t\t\t\t\tnext.gaintag = [\"paizhangmrfz\"];\r\n\t\t\t\t\tawait next;\r\n\t\t\t\t\ttarget.addTempSkill(\"paizhangmrfz2\");\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"paizhangmrfz\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 2\r\n\t\t\t\tfor (const card of trigger.cards) {\r\n\t\t\t\t\tcard.storage.paizhangmrfz = true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"paizhangmrfz_tag1\", \"paizhangmrfz_tag2\", \"paizhangmrfz_tag3\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\ttag1: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"useCard\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tfor (var i = 0; i < event.cards.length; i++) {\r\n\t\t\t\t\t\t\tif (event.cards[i].storage && event.cards[i].storage.paizhangmrfz) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst cards = trigger.cards[0];\r\n\t\t\t\t\t\tif (trigger.cards.length > 1 || cards.number === undefined) {\r\n\t\t\t\t\t\t\tawait trigger.player.damage();\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"paizhangmrfz\", trigger.player);\r\n\t\t\t\t\t\t} else if (cards.number > 8) {\r\n\t\t\t\t\t\t\tawait trigger.player.damage();\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"paizhangmrfz\", trigger.player);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tawait trigger.player.chooseToDiscard(\r\n\t\t\t\t\t\t\t\t\"he\",\r\n\t\t\t\t\t\t\t\tMath.floor(cards.number / 3),\r\n\t\t\t\t\t\t\t\t\"【排障】:请弃置\" + Math.floor(cards.number / 3) + \"张牌\",\r\n\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"paizhangmrfz\", trigger.player);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttag2: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\ttarget: \"useCardToTarget\",\r\n\t\t\t\t\t\tplayer: \"addJudgeBefore\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tfor (var i = 0; i < event.cards.length; i++) {\r\n\t\t\t\t\t\t\tif (event.cards[i].storage && event.cards[i].storage.paizhangmrfz) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\tif (trigger.name === \"addJudge\") {\r\n\t\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tconst owner = get.owner(trigger.card);\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tif (owner && owner.getCards(\"hej\").includes(trigger.card)) {\r\n\t\t\t\t\t\t\t\tawait owner.lose(trigger.card, ui.discardPile);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tgame.cardsDiscard(trigger.card);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tgame.log(trigger.card, \"进入了弃牌堆\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\ttrigger.getParent().targets.remove(player);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 1\r\n\t\t\t\t\t\tconst trgnext = trigger.player.getNext();\r\n\t\t\t\t\t\tconst trgprvs = trigger.player.getPrevious();\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\ttrgnext &&\r\n\t\t\t\t\t\t\ttrgnext !== player &&\r\n\t\t\t\t\t\t\ttrgnext.hasCard(card => {\r\n\t\t\t\t\t\t\t\treturn card.storage && card.storage.paizhangmrfz;\r\n\t\t\t\t\t\t\t}, \"h\")\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tconst cards = trgnext.getCards(\"h\", card => {\r\n\t\t\t\t\t\t\t\treturn card.storage && card.storage.paizhangmrfz;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"paizhangmrfz\", trgnext);\r\n\t\t\t\t\t\t\tawait trgnext.damage();\r\n\t\t\t\t\t\t\tgame.cardsDiscard(cards);\r\n\t\t\t\t\t\t\tgame.log(cards, \"进入了弃牌堆\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\ttrgprvs &&\r\n\t\t\t\t\t\t\ttrgprvs !== player &&\r\n\t\t\t\t\t\t\ttrgprvs.hasCard(card => {\r\n\t\t\t\t\t\t\t\treturn card.storage && card.storage.paizhangmrfz;\r\n\t\t\t\t\t\t\t}, \"h\")\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tconst cards = trgprvs.getCards(\"h\", card => {\r\n\t\t\t\t\t\t\t\treturn card.storage && card.storage.paizhangmrfz;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"paizhangmrfz\", trgprvs);\r\n\t\t\t\t\t\t\tawait trgprvs.damage();\r\n\t\t\t\t\t\t\tgame.cardsDiscard(cards);\r\n\t\t\t\t\t\t\tgame.log(cards, \"进入了弃牌堆\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttag3: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"useCardToPlayered\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.player == player) return false;\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t!event.player.hasCard(function (card) {\r\n\t\t\t\t\t\t\t\treturn card.storage && card.storage.paizhangmrfz;\r\n\t\t\t\t\t\t\t}, \"h\")\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\tfor (var i = 0; i < event.cards.length; i++) {\r\n\t\t\t\t\t\t\tif (event.cards[i].storage && event.cards[i].storage.paizhangmrfz) return false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var i = 0; i < event.targets.length; i++) {\r\n\t\t\t\t\t\t\tif (event.targets[i] == player) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\tconst cards = trigger.player.getCards(\"h\", card => {\r\n\t\t\t\t\t\t\treturn card.storage && card.storage.paizhangmrfz;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tevent.cards = cards;\r\n\t\t\t\t\t\tgame.cardsDiscard(cards);\r\n\t\t\t\t\t\tgame.log(cards, \"进入了弃牌堆\");\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"paizhangmrfz\", trigger.player);\r\n\t\t\t\t\t\tif (trigger.name === \"addJudge\") {\r\n\t\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tconst owner = get.owner(trigger.card);\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tif (owner && owner.getCards(\"hej\").includes(trigger.card)) {\r\n\t\t\t\t\t\t\t\tawait owner.lose(trigger.card, ui.discardPile);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tgame.cardsDiscard(trigger.card);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tgame.log(trigger.card, \"进入了弃牌堆\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\ttrigger.getParent().targets.remove(player);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 1\r\n\t\t\t\t\t\tconst number = Number(event.cards.map(card => get.number(card)).reduce((a, b) => Number(a || 0) + Number(b || 0), 0)) || 0;\r\n\t\t\t\t\t\tif (event.cards.length > 1 || number === 0) {\r\n\t\t\t\t\t\t\tawait trigger.player.damage();\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"paizhangmrfz\", trigger.player);\r\n\t\t\t\t\t\t} else if (number > 8) {\r\n\t\t\t\t\t\t\tawait trigger.player.damage();\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"paizhangmrfz\", trigger.player);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tawait trigger.player.chooseToDiscard(\r\n\t\t\t\t\t\t\t\t\"he\",\r\n\t\t\t\t\t\t\t\tMath.floor(number / 3),\r\n\t\t\t\t\t\t\t\t\"【排障】:请弃置\" + Math.floor(number / 3) + \"张牌\",\r\n\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"paizhangmrfz\", trigger.player);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 2\r\n\t\t\t\t\t\tconst trgnext = trigger.player.getNext();\r\n\t\t\t\t\t\tconst trgprvs = trigger.player.getPrevious();\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\ttrgnext &&\r\n\t\t\t\t\t\t\ttrgnext.hasCard(card => {\r\n\t\t\t\t\t\t\t\treturn card.storage && card.storage.paizhangmrfz;\r\n\t\t\t\t\t\t\t}, \"h\")\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tconst cards = trgnext.getCards(\"h\", card => {\r\n\t\t\t\t\t\t\t\treturn card.storage && card.storage.paizhangmrfz;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"paizhangmrfz\", trgnext);\r\n\t\t\t\t\t\t\tawait trgnext.damage();\r\n\t\t\t\t\t\t\tgame.cardsDiscard(cards);\r\n\t\t\t\t\t\t\tgame.log(cards, \"进入了弃牌堆\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\ttrgprvs &&\r\n\t\t\t\t\t\t\ttrgprvs.hasCard(card => {\r\n\t\t\t\t\t\t\t\treturn card.storage && card.storage.paizhangmrfz;\r\n\t\t\t\t\t\t\t}, \"h\")\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tconst cards = trgprvs.getCards(\"h\", card => {\r\n\t\t\t\t\t\t\t\treturn card.storage && card.storage.paizhangmrfz;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"paizhangmrfz\", trgprvs);\r\n\t\t\t\t\t\t\tawait trgprvs.damage();\r\n\t\t\t\t\t\t\tgame.cardsDiscard(cards);\r\n\t\t\t\t\t\t\tgame.log(cards, \"进入了弃牌堆\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttag4: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardDiscardable: function (card, player) {\r\n\t\t\t\t\t\t\tif (card.storage && card.storage.paizhangmrfz) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tpaizhangmrfz2: { charlotte: true },\r\n\t\t//空弦\r\n\t\ttiexianmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\tif (!player.hujia) return num + 1;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.hujia;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.draw(3);\r\n\t\t\t},\r\n\t\t\tgroup: [\"tiexianmrfz_draw\", \"tiexianmrfz_k\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\tk: {\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardnumber(card) {\r\n\t\t\t\t\t\t\tif (card.hasGaintag(\"tiexianmrfz\")) return 13;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"gainAfter\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn !player.hujia && !player.hasSkill(\"tiexianmrfz_ban\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addTempSkill(\"tiexianmrfz_ban\", {\r\n\t\t\t\t\t\t\tglobal: \"roundStart\",\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tfor (var i of trigger.cards) {\r\n\t\t\t\t\t\t\ti.addGaintag(\"tiexianmrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\taudio: \"tiexianmrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn !player.hujia;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tlieshimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tusable: 3,\r\n\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.card.name != \"sha\" || !event.targets || event.targets.length > 1) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.countCards(\"he\") > 0 &&\r\n\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && get.distance(event.targets[0], current) <= 1 && !event.targets.includes(current);\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\t\t\t\tconst target = trigger.targets[0];\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tresult = await player\r\n\t\t\t\t\t.chooseToDiscard(\r\n\t\t\t\t\t\t\"he\",\r\n\t\t\t\t\t\tget.prompt(\"lieshimrfz\"),\r\n\t\t\t\t\t\t\"你可以弃置一张牌并选择一名与\" + get.translation(target) + \"距离为 1 的其他角色视为使用一张【杀】\"\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\r\n\t\t\t\t\t\t\"goon\",\r\n\t\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\t\treturn get.distance(target, current) === 1 && get.attitude(player, current) < 2;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\tif (_status.event.goon) return 6 - get.value(card);\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tif (result.cards && result.cards.length) {\r\n\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t.chooseTarget(true, \"请选择一名与\" + get.translation(target) + \"距离为 1 的一名其他角色\", (card, player, target) => {\r\n\t\t\t\t\t\t\tconst evt = _status.event.getTrigger();\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\ttarget !== player &&\r\n\t\t\t\t\t\t\t\ttarget !== evt.targets[0] &&\r\n\t\t\t\t\t\t\t\tget.distance(evt.targets[0], target) <= 1 &&\r\n\t\t\t\t\t\t\t\tlib.filter.targetEnabled2(evt.card, player, target)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\treturn -get.attitude(player, target);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 2\r\n\t\t\t\tif (result.bool && result.targets && result.targets.length) {\r\n\t\t\t\t\tawait player.useCard({ name: \"sha\", isCard: true }, result.targets[0]);\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"lieshimrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\t//麒麟夜刀\r\n\t\tguirenmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardToTargeted\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!player.isPhaseUsing()) return false;\r\n\t\t\t\tif (player.getHandcardLimit() == 0) return false;\r\n\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"你可以令此【杀】额外结算一次，然后本回合的手牌上限-1。(当前手牌上限:\" + player.getHandcardLimit() + \")\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\ttrigger.getParent().targets = trigger.getParent().targets.concat(trigger.targets);\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\ttrigger.getParent().triggeredTargets4 = trigger.getParent().triggeredTargets4.concat(trigger.targets);\r\n\t\t\t\tif (!player.hasSkill(\"guirenmrfz2\")) player.addTempSkill(\"guirenmrfz2\");\r\n\t\t\t\tif (!player.hasSkill(\"guirenmrfz_lose\")) player.addTempSkill(\"guirenmrfz_lose\");\r\n\t\t\t\tplayer.storage.guirenmrfz2++;\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tlose: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseUseEnd\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeSkill(\"guirenmrfz\");\r\n\t\t\t\t\t\tplayer.addSkill(\"guiqiangmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tguirenmrfz2: {\r\n\t\t\tsilent: true,\r\n\t\t\tcharlotte: true,\r\n\t\t\tfirstDo: true,\r\n\t\t\ttrigger: { player: \"phaseAfter\" },\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.guirenmrfz2 = 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.storage.guirenmrfz2 = 0;\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\treturn num - player.storage.guirenmrfz2;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tguiqiangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tfrequent: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.drawTo(Math.min(player.maxHp, 4));\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseToDiscard(get.prompt(\"guiqiangmrfz\"), \"你可以弃置一张牌并失去此技能，然后获得【鬼人】\", \"he\")\r\n\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (result.cards) {\r\n\t\t\t\t\tplayer.removeSkill(\"guiqiangmrfz\");\r\n\t\t\t\t\tplayer.addSkill(\"guirenmrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tluanwumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tderivation: [\"guiqiangmrfz\", \"guirenmrfz\"],\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\treturn get.type2(card) == \"trick\" || get.tag(card, \"damage\");\r\n\t\t\t\t\t}) > 2\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\tif (player.getHandcardLimit() > 2) return false;\r\n\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\treturn current != player && player.inRange(current) && get.attitude(player, current) < 0;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (\r\n\t\t\t\t\t!game.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && player.inRange(current);\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\treturn player.hasSkill(\"guirenmrfz\");\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tresult = await player\r\n\t\t\t\t\t.chooseTarget(true, \"【乱舞】:请选择一名其他角色，视为对其使用一张结算三次的【杀】\", (card, player, target) => {\r\n\t\t\t\t\t\treturn target !== player && player.inRange(target);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\treturn -get.attitude(player, target);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tif (result.targets) {\r\n\t\t\t\t\tconst target = result.targets[0];\r\n\t\t\t\t\tplayer.addTempSkill(\"luanwumrfza\", {\r\n\t\t\t\t\t\tplayer: \"shaAfter\",\r\n\t\t\t\t\t});\r\n\t\t\t\t\tawait player.useCard({ name: \"sha\", isCard: true }, target);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 2\r\n\t\t\t\tplayer.skip(\"phaseUse\");\r\n\t\t\t\tplayer.skip(\"phaseDraw\");\r\n\t\t\t\tplayer.skip(\"phaseJudge\");\r\n\t\t\t\tif (!player.hasSkill(\"luanwumrfz_dam\")) {\r\n\t\t\t\t\tplayer.addSkill(\"luanwumrfz_dam\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"luanwumrfz_add\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdam: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"受到的伤害+1\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"damageBegin\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t\tplayer.removeSkill(\"luanwumrfz_dam\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tadd: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addSkill(\"guirenmrfz\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"luanwumrfz_add\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tluanwumrfza: {\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { player: \"useCardToTargeted\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t// step 0\r\n\t\t\t\tevent.num = 2;\r\n\r\n\t\t\t\t// step 1 loop (original event.redo())\r\n\t\t\t\twhile (event.num > 0) {\r\n\t\t\t\t\tevent.num--;\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"luanwumrfza\");\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\ttrigger.getParent().targets = trigger.getParent().targets.concat(trigger.targets);\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\ttrigger.getParent().triggeredTargets4 = trigger.getParent().triggeredTargets4.concat(trigger.targets);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 2\r\n\t\t\t\tplayer.removeSkill(\"luanwumrfza\");\r\n\t\t\t},\r\n\t\t},\r\n\t\t//土豆雷（划掉） 伊内丝\r\n\t\tyingzhimrfz: {\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar str = \"·摸牌阶段摸牌数+\" + player.countMark(\"yingzhimrfz_draw\") + \"</br>·手牌上限+\" + player.countMark(\"yingzhimrfz_mhand\");\r\n\t\t\t\t\tstr = str + \"</br>·使用【杀】的次数+\" + player.countMark(\"yingzhimrfz_sha\");\r\n\t\t\t\t\tif (!player.hasMark(\"yingzhimrfz_dying\")) return str;\r\n\t\t\t\t\treturn str + \"</br>·下次造成的伤害+1\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 6,\r\n\t\t\tsilent: true,\r\n\t\t\tfirstDo: true,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tgame.countPlayer(current => {\r\n\t\t\t\t\tif (current != player) current.storage.yingzhimrfz_draw = false;\r\n\t\t\t\t\tif (current != player) current.storage.yingzhimrfz_mhand = false;\r\n\t\t\t\t\tif (current != player) current.storage.yingzhimrfz_sha = false;\r\n\t\t\t\t\tif (current != player) current.storage.yingzhimrfz_dying = false;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgroup: [\"yingzhimrfz_draw\", \"yingzhimrfz_drbuff\", \"yingzhimrfz_mhand\", \"yingzhimrfz_sha\", \"yingzhimrfz_dying\", \"yingzhimrfz_dybuff\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\t//标记\r\n\t\t\t\tmark: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\t\t\tvar str =\r\n\t\t\t\t\t\t\t\t\"·摸牌阶段摸牌数-\" +\r\n\t\t\t\t\t\t\t\tplayer.countMark(\"yingzhimrfz_drdebuff\") +\r\n\t\t\t\t\t\t\t\t\"</br>·手牌上限-\" +\r\n\t\t\t\t\t\t\t\tplayer.countMark(\"yingzhimrfz_mhddebuff\");\r\n\t\t\t\t\t\t\tstr = str + \"</br>·使用【杀】的次数-\" + player.countMark(\"yingzhimrfz_shadebuff\");\r\n\t\t\t\t\t\t\tif (!player.hasSkill(\"yingzhimrfz_dydebuff\")) return str;\r\n\t\t\t\t\t\t\treturn str + \"</br>·下次造成的伤害-1\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t//非延时锦囊牌 摸牌阶段摸牌数\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\taudio: \"yingzhimrfz\",\r\n\t\t\t\t\ttrigger: { player: \"useCardToTargeted\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.targets.length > 1) return false;\r\n\t\t\t\t\t\tif (event.target.storage.yingzhimrfz_draw) return false;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn get.type(event.card) == \"trick\" && event.target != player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\treturn get.attitude(player, event.target) < 2;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: function (event, player) {\r\n\t\t\t\t\t\treturn \"是否令\" + get.translation(event.target) + \"下个摸牌阶段摸牌数-1且你摸牌阶段摸牌数+1？\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (player.countMark(\"yingzhimrfz_draw\") < 2) player.addMark(\"yingzhimrfz_draw\", 1, false);\r\n\t\t\t\t\t\ttrigger.targets[0].storage.yingzhimrfz_draw = true;\r\n\t\t\t\t\t\ttrigger.targets[0].addSkill(\"yingzhimrfz_drdebuff\");\r\n\t\t\t\t\t\ttrigger.targets[0].addMark(\"yingzhimrfz_drdebuff\", 1, false);\r\n\t\t\t\t\t\ttrigger.targets[0].addSkill(\"yingzhimrfz_mark\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdrbuff: {\r\n\t\t\t\t\taudio: \"yingzhimrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDrawBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"yingzhimrfz_draw\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num += player.countMark(\"yingzhimrfz_draw\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdrdebuff: {\r\n\t\t\t\t\taudio: \"yingzhimrfz\",\r\n\t\t\t\t\ttrigger: { player: \"phaseDrawBegin\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"yingzhimrfz_drdebuff\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num -= player.countMark(\"yingzhimrfz_drdebuff\");\r\n\t\t\t\t\t\tplayer.removeMark(\"yingzhimrfz_drdebuff\", player.countMark(\"yingzhimrfz_drdebuff\"), false);\r\n\t\t\t\t\t\tplayer.removeSkill(\"yingzhimrfz_drdebuff\");\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t!player.hasMark(\"yingzhimrfz_mhddebuff\") &&\r\n\t\t\t\t\t\t\t!player.hasMark(\"yingzhimrfz_shadebuff\") &&\r\n\t\t\t\t\t\t\t!player.hasSkill(\"yingzhimrfz_dydebuff\")\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\tplayer.removeSkill(\"yingzhimrfz_mark\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t//其他角色响应你的牌 手牌上限\r\n\t\t\t\tmhand: {\r\n\t\t\t\t\taudio: \"yingzhimrfz\",\r\n\t\t\t\t\ttrigger: { global: [\"respond\", \"useCard\"] },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!event.respondTo) return false;\r\n\t\t\t\t\t\tif (event.player == player) return false;\r\n\t\t\t\t\t\tif (player != event.respondTo[0]) return false;\r\n\t\t\t\t\t\treturn !event.player.storage.yingzhimrfz_mhand;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\treturn get.attitude(player, event.player) < 2;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: function (event, player) {\r\n\t\t\t\t\t\treturn \"是否令\" + get.translation(event.player) + \"的下个回合手牌上限-1且你的手牌上限+1？\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (player.countMark(\"yingzhimrfz_mhand\") < 3) player.addMark(\"yingzhimrfz_mhand\", 1, false);\r\n\t\t\t\t\t\ttrigger.player.addMark(\"yingzhimrfz_mhddebuff\", 1, false);\r\n\t\t\t\t\t\ttrigger.player.storage.yingzhimrfz_mhand = true;\r\n\t\t\t\t\t\ttrigger.player.addSkill(\"yingzhimrfz_mhddebuff\");\r\n\t\t\t\t\t\ttrigger.player.addSkill(\"yingzhimrfz_mark\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn num + player.countMark(\"yingzhimrfz_mhand\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tmhddebuff: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"yingzhimrfz_mhddebuff\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeMark(\"yingzhimrfz_mhddebuff\", player.countMark(\"yingzhimrfz_mhddebuff\"), false);\r\n\t\t\t\t\t\tplayer.removeSkill(\"yingzhimrfz_mhddebuff\");\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t!player.hasMark(\"yingzhimrfz_drdebuff\") &&\r\n\t\t\t\t\t\t\t!player.hasMark(\"yingzhimrfz_shadebuff\") &&\r\n\t\t\t\t\t\t\t!player.hasSkill(\"yingzhimrfz_dydebuff\")\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\tplayer.removeSkill(\"yingzhimrfz_mark\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn num - player.countMark(\"yingzhimrfz_mhddebuff\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t//进入濒死 伤害+1\r\n\t\t\t\tdying: {\r\n\t\t\t\t\taudio: \"yingzhimrfz\",\r\n\t\t\t\t\ttrigger: { global: \"dying\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.player.storage.yingzhimrfz_dying) return false;\r\n\t\t\t\t\t\tif (event.player.hasSkill(\"yingzhimrfz_dydebuff\") && player.hasMark(\"yingzhimrfz_dying\")) return false;\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.player != player &&\r\n\t\t\t\t\t\t\tevent.parent &&\r\n\t\t\t\t\t\t\tevent.parent.name == \"damage\" &&\r\n\t\t\t\t\t\t\tevent.parent.source &&\r\n\t\t\t\t\t\t\tevent.parent.source == player\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\treturn get.attitude(player, event.player) < 2;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: function (event, player) {\r\n\t\t\t\t\t\treturn \"是否令\" + get.translation(event.player) + \"下次造成的伤害-1且你下次造成的伤害+1？\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (!player.hasMark(\"yingzhimrfz_dying\")) player.addMark(\"yingzhimrfz_dying\", 1, false);\r\n\t\t\t\t\t\tif (!trigger.player.hasSkill(\"yingzhimrfz_dydebuff\")) {\r\n\t\t\t\t\t\t\ttrigger.player.addSkill(\"yingzhimrfz_dydebuff\", false);\r\n\t\t\t\t\t\t\ttrigger.player.addSkill(\"yingzhimrfz_mark\");\r\n\t\t\t\t\t\t\ttrigger.player.storage.yingzhimrfz_dying = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdybuff: {\r\n\t\t\t\t\taudio: \"yingzhimrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { source: \"damageBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"yingzhimrfz_dying\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t\tplayer.removeMark(\"yingzhimrfz_dying\", 1, false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdydebuff: {\r\n\t\t\t\t\taudio: \"yingzhimrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { source: \"damageBegin\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num--;\r\n\t\t\t\t\t\tplayer.removeSkill(\"yingzhimrfz_dydebuff\");\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t!player.hasMark(\"yingzhimrfz_drdebuff\") &&\r\n\t\t\t\t\t\t\t!player.hasMark(\"yingzhimrfz_mhddebuff\") &&\r\n\t\t\t\t\t\t\t!player.hasMark(\"yingzhimrfz_shadebuff\")\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\tplayer.removeSkill(\"yingzhimrfz_mark\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t//你响应其他角色牌 使用杀的次数\r\n\t\t\t\tsha: {\r\n\t\t\t\t\taudio: \"yingzhimrfz\",\r\n\t\t\t\t\ttrigger: { player: [\"useCard\", \"respond\"] },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!Array.isArray(event.respondTo)) return false;\r\n\t\t\t\t\t\tif (player == event.respondTo[0]) return false;\r\n\t\t\t\t\t\treturn !event.player.storage.sha;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\treturn get.attitude(player, event.respondTo[0]) < 2;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: function (event, player) {\r\n\t\t\t\t\t\treturn \"是否令\" + get.translation(event.respondTo[0]) + \"的下个回合使用【杀】的次数-1且你使用【杀】的次数+1？\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst target = trigger.respondTo[0];\r\n\t\t\t\t\t\ttarget.addMark(\"yingzhimrfz_shadebuff\", 1, false);\r\n\t\t\t\t\t\ttarget.addSkill(\"yingzhimrfz_shadebuff\");\r\n\t\t\t\t\t\ttarget.addSkill(\"yingzhimrfz_mark\");\r\n\t\t\t\t\t\ttarget.storage.yingzhimrfz_sha = true;\r\n\t\t\t\t\t\tplayer.addMark(\"yingzhimrfz_sha\", 1, false);\r\n\t\t\t\t\t\tplayer.addSkill(\"yingzhimrfz_sharem\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num + player.countMark(\"yingzhimrfz_sha\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tsharem: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseUseEnd\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeMark(\"yingzhimrfz_sha\", player.countMark(\"yingzhimrfz_sha\"), false);\r\n\t\t\t\t\t\tplayer.removeSkill(\"yingzhimrfz_sharem\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tshadebuff: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"yingzhimrfz_shadebuff\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeMark(\"yingzhimrfz_shadebuff\", player.countMark(\"yingzhimrfz_shadebuff\"), false);\r\n\t\t\t\t\t\tplayer.removeSkill(\"yingzhimrfz_shadebuff\");\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t!player.hasMark(\"yingzhimrfz_drdebuff\") &&\r\n\t\t\t\t\t\t\t!player.hasMark(\"yingzhimrfz_mhddebuff\") &&\r\n\t\t\t\t\t\t\t!player.hasSkill(\"yingzhimrfz_dydebuff\")\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\tplayer.removeSkill(\"yingzhimrfz_mark\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num - player.countMark(\"yingzhimrfz_shadebuff\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.1,\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t},\r\n\t\t},\r\n\t\tyingshaomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"dyingAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.parent && event.parent.name == \"damage\" && event.parent.source;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn (get.attitude(player, event.parent?.source) || 0) < 2;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"是否令\" + get.translation(event?.parent?.source) + \"获得‘影哨’标记？\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (!trigger.parent) return;\r\n\t\t\t\ttrigger.parent.source.addSkill(\"yingshaomrfz_ban\");\r\n\t\t\t},\r\n\t\t\tgroup: \"yingshaomrfz_dying\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban2: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardEnabled: function (card) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tban: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\t\t\tif (player.hasSkill(\"yingshaomrfz_ban2\")) return \"·手牌上限-1</br>·本出牌阶段不能使用【杀】\";\r\n\t\t\t\t\t\t\treturn \"·手牌上限-1</br>·使用【杀】的次数至多为1\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!player.isPhaseUsing()) return false;\r\n\t\t\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addTempSkill(\"yingshaomrfz_ban2\", {\r\n\t\t\t\t\t\t\tplayer: \"phaseUseEnd\",\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn num - 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdying: {\r\n\t\t\t\t\taudio: \"yingshaomrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"dying\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn current.hasSkill(\"yingshaomrfz_ban\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tgame.countPlayer(current => {\r\n\t\t\t\t\t\t\tif (current.hasSkill(\"yingshaomrfz_ban\")) {\r\n\t\t\t\t\t\t\t\tcurrent.removeSkill(\"yingshaomrfz_ban\");\r\n\t\t\t\t\t\t\t\tif (current.hasSkill(\"yingshaomrfz_ban2\")) current.removeSkill(\"yingshaomrfz_ban2\");\r\n\t\t\t\t\t\t\t\tcurrent.damage(player);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tplayer.recover(2 - player.hp);\r\n\t\t\t\t\t\tplayer.removeSkill(\"yingshaomrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.2,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//缪尔赛思\r\n\t\tkaiyuanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"roundStart\",\r\n\t\t\t},\r\n\t\t\tfirstDo: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn game.roundNumber == 1;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tresult = await player\r\n\t\t\t\t\t.chooseTarget(\"【开源】:请选择一名角色令其摸两张牌且本局游戏使用【杀】的次数 +1，若该角色是你，你摸一张牌\", true)\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\treturn get.attitude(player, target) > 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tif (result.targets) {\r\n\t\t\t\t\tconst target = result.targets[0];\r\n\t\t\t\t\tawait target.draw(2);\r\n\t\t\t\t\ttarget.addSkill(\"kaiyuanmrfz_buff\");\r\n\t\t\t\t\tif (target === player) {\r\n\t\t\t\t\t\tawait player.draw();\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"kaiyuanmrfz\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"kaiyuanmrfz\", target);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tbuff: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"使用【杀】的次数+1\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num + 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tjingshuimrfz: {\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\"·你的攻击范围:\" +\r\n\t\t\t\t\t\tplayer.getAttackRange(false) +\r\n\t\t\t\t\t\t\"</br>·你使用【杀】的次数:\" +\r\n\t\t\t\t\t\tplayer.getCardUsable(\"sha\") +\r\n\t\t\t\t\t\t\"</br>·你的手牌上限:\" +\r\n\t\t\t\t\t\tplayer.getHandcardLimit()\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 3,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst str = \"【净水】:你可选择一名其他角色，你将你的手牌数、手牌上限、攻击范围和使用【杀】的次数调整至与其一致\";\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseTarget(get.prompt(\"jingshuimrfz\"), str, function (card, player, target) {\r\n\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", target => target.isMaxHandcard())\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\tif (result.targets) {\r\n\t\t\t\t\tconst target = result.targets[0];\r\n\t\t\t\t\tvar numsha = target.getCardUsable(\"sha\");\r\n\t\t\t\t\tvar numatt = target.getAttackRange(false);\r\n\t\t\t\t\tvar numhand = target.getHandcardLimit();\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"jingshuimrfz\", target);\r\n\t\t\t\t\t//@ts-ignore 摸牌\r\n\t\t\t\t\tif (player.countCards(\"h\") <= target.countCards(\"h\")) player.drawTo(target.countCards(\"h\"));\r\n\t\t\t\t\t//杀\r\n\t\t\t\t\tplayer.removeMark(\"jingshuimrfz_sha\", player.countMark(\"jingshuimrfz_sha\"), false);\r\n\t\t\t\t\tplayer.addMark(\"jingshuimrfz_sha\", numsha, false);\r\n\t\t\t\t\t//攻击距离\r\n\t\t\t\t\tplayer.removeMark(\"jingshuimrfz_att\", player.countMark(\"jingshuimrfz_att\"), false);\r\n\t\t\t\t\tplayer.addMark(\"jingshuimrfz_att\", numatt, false);\r\n\t\t\t\t\t//手牌上限\r\n\t\t\t\t\tplayer.removeMark(\"jingshuimrfz_maxhand\", player.countMark(\"jingshuimrfz_maxhand\"), false);\r\n\t\t\t\t\tplayer.addMark(\"jingshuimrfz_maxhand\", numhand, false);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tif (card.name == \"sha\" && player.hasMark(\"jingshuimrfz_sha\")) return (num = player.countMark(\"jingshuimrfz_sha\"));\r\n\t\t\t\t},\r\n\t\t\t\tattackRangeBase: function (player, num) {\r\n\t\t\t\t\tif (player.hasMark(\"jingshuimrfz_att\")) return (num = player.countMark(\"jingshuimrfz_att\"));\r\n\t\t\t\t},\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\tif (player.hasMark(\"jingshuimrfz_maxhand\")) return (num = player.countMark(\"jingshuimrfz_maxhand\"));\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tsha: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\tatt: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\tmaxhand: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tliuxingmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"damageBegin\",\r\n\t\t\t},\r\n\t\t\tusable: 1,\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") >= player.hp && event.nature != \"thunder\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t},\r\n\t\t},\r\n\t\t//黑键\r\n\t\tyiyinmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tchargeSkill: true,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.countMark(\"charge\") > 2) return false;\r\n\t\t\t\treturn player.hasCard(function (card) {\r\n\t\t\t\t\treturn get.tag(card, \"damage\");\r\n\t\t\t\t}, \"h\");\r\n\t\t\t},\r\n\t\t\tfilterCard: function (card) {\r\n\t\t\t\treturn get.tag(card, \"damage\");\r\n\t\t\t},\r\n\t\t\tselectCard: function () {\r\n\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\treturn [1, 3 - player.countMark(\"charge\")];\r\n\t\t\t},\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\tif (player.countCards(\"h\", card => card.name === \"sha\") > player.getCardUsable(\"sha\") + 1) return true;\r\n\t\t\t\treturn card.name != \"sha\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { cards } = event;\r\n\t\t\t\tplayer.addMark(\"charge\", cards.length);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: function (event, player) {\r\n\t\t\t\t\treturn 0.85 + player.countMark(\"charge\") * 0.1;\r\n\t\t\t\t},\r\n\t\t\t\torder: 13,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"yiyinmrfz_sha\", \"yiyinmrfz_get\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tsha: {\r\n\t\t\t\t\taudio: \"yiyinmrfz\",\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.countMark(\"charge\") == 0) return false;\r\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\" && !player.storage.jiyinmrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: \"你可以消耗一点蓄力值令此【杀】的伤害基数+1\",\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (!trigger.baseDamage) trigger.baseDamage = 1;\r\n\t\t\t\t\t\ttrigger.baseDamage++;\r\n\t\t\t\t\t\tplayer.removeMark(\"charge\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tget: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addMark(\"charge\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thuangxiangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseDiscardEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tplayer.hasCard(function (card) {\r\n\t\t\t\t\t\treturn card.hasGaintag(\"huangxiangmrfzx\");\r\n\t\t\t\t\t}, \"h\")\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\treturn player.countMark(\"charge\") > 0 && player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseCard(get.prompt(\"huangxiangmrfz\"), \"你可以消耗一点蓄力值并标记一张手牌\", \"h\")\r\n\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\tif (card.name == \"shan\" && card.name == \"wuxie\") return 6;\r\n\t\t\t\t\t\tif (card.name == \"sha\" && card.name == \"tao\" && card.name == \"jiu\") return 5;\r\n\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\tif (result.cards) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"huangxiangmrfz\");\r\n\t\t\t\t\tplayer.addGaintag(result.cards, \"huangxiangmrfzx\");\r\n\t\t\t\t\tplayer.removeMark(\"charge\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"huangxiangmrfz_lose\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tlose: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"loseAfter\", \"damageEnd\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.name == \"damage\")\r\n\t\t\t\t\t\t\treturn player.hasCard(function (card) {\r\n\t\t\t\t\t\t\t\treturn card.hasGaintag(\"huangxiangmrfzx\");\r\n\t\t\t\t\t\t\t}, \"h\");\r\n\t\t\t\t\t\tif (event.name == \"lose\") {\r\n\t\t\t\t\t\t\tfor (var i in event.gaintag_map) {\r\n\t\t\t\t\t\t\t\tif (event.gaintag_map[i].includes(\"huangxiangmrfzx\")) return true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet result;\r\n\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\tconst history = game.getAllGlobalHistory(\"useCard\");\r\n\t\t\t\t\t\tfor (let i = history.length - 1; i > 0; i--) {\r\n\t\t\t\t\t\t\tif (!history[i].targets) continue;\r\n\t\t\t\t\t\t\tif (history[i].targets.includes(player) && history[i].player !== player) {\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tevent.targets = history[i].player;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t.chooseControl(\r\n\t\t\t\t\t\t\t\tevent.targets ? [\"摸牌\", \"对\" + get.translation(event.targets) + \"造成一点伤害\", \"cancel2\"] : [\"摸牌\", \"cancel2\"]\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\t\t\tif (event.targets) {\r\n\t\t\t\t\t\t\t\t\tif (get.damageEffect(event.targets, aiPlayer, aiPlayer) > 0) return 1;\r\n\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"prompt\", \"【荒响】:请选择一项\")\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t// step 1\r\n\t\t\t\t\t\tif (result.control !== \"cancel2\") {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"huangxiangmrfz\");\r\n\t\t\t\t\t\t\tif (result.control === \"摸牌\") {\r\n\t\t\t\t\t\t\t\tawait player.draw();\r\n\t\t\t\t\t\t\t\tif (player.countMark(\"charge\") < 3) {\r\n\t\t\t\t\t\t\t\t\tplayer.addMark(\"charge\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tawait event.targets.damage();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 2\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t!player.hasCard(card => {\r\n\t\t\t\t\t\t\t\treturn card.hasGaintag(\"huangxiangmrfzx\");\r\n\t\t\t\t\t\t\t}, \"h\") &&\r\n\t\t\t\t\t\t\tplayer.countMark(\"charge\") > 0\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t\t.chooseCard(get.prompt(\"huangxiangmrfz\"), \"你可以消耗一点蓄力值并标记一张手牌\", \"h\")\r\n\t\t\t\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\t\t\t\tif (card.name === \"shan\" || card.name === \"wuxie\") return 6;\r\n\t\t\t\t\t\t\t\t\tif (card.name === \"sha\" || card.name === \"tao\" || card.name === \"jiu\") return 5;\r\n\t\t\t\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 3\r\n\t\t\t\t\t\tif (result?.cards) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"huangxiangmrfz\");\r\n\t\t\t\t\t\t\tplayer.addGaintag(result.cards, \"huangxiangmrfzx\");\r\n\t\t\t\t\t\t\tplayer.removeMark(\"charge\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tjiyinmrfz: {\r\n\t\t\taudio: 3,\r\n\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"charge\") > 0;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.player().hasCard(function (card) {\r\n\t\t\t\t\treturn card.name == \"sha\";\r\n\t\t\t\t}, \"h\");\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar list = [\"jiyinmrfz_eff1\", \"jiyinmrfz_lose\", \"jiyinmrfz_eff4\", \"jiyinmrfz_eff2\", \"jiyinmrfz_eff3\"];\r\n\t\t\t\tplayer.storage.jiyinmrfz = true;\r\n\t\t\t\tfor (const i of list) player.addTempSkill(i);\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tlose: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.jiyinmrfz = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t//伤害基数 目标\r\n\t\t\t\teff1: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!event.card) return false;\r\n\t\t\t\t\t\treturn event.card.name == \"sha\" && event.targets.length == 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst target = trigger.targets[0];\r\n\t\t\t\t\t\tlet buff = 0;\r\n\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t!game.hasPlayer(current => {\r\n\t\t\t\t\t\t\t\treturn current !== target && current.countCards(\"h\") > target.countCards(\"h\");\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tbuff++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t!game.hasPlayer(current => {\r\n\t\t\t\t\t\t\t\treturn current !== target && current.hp > target.hp;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tbuff++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t!game.hasPlayer(current => {\r\n\t\t\t\t\t\t\t\treturn current !== target && current.countCards(\"e\") > target.countCards(\"e\");\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tbuff++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (buff === 3) {\r\n\t\t\t\t\t\t\tplayer.storage.jiyinmrfz_eff1 = true;\r\n\t\t\t\t\t\t\tplayer.addTempSkill(\"jiyinmrfz_eff1_buff2\", \"shaAfter\");\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 1\r\n\t\t\t\t\t\tplayer.addTempSkill(\"jiyinmrfz_eff1_buff\", \"shaAfter\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tplayerEnabled: function (card, player, target) {\r\n\t\t\t\t\t\t\tif ((target.isMaxHp() || target.isMaxHandcard() || target.isMaxEquip()) && card.name == \"sha\") return true;\r\n\t\t\t\t\t\t\telse if (card.name == \"sha\") return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff1_buff: {\r\n\t\t\t\t\taudio: \"huangxiangmrfz\",\r\n\t\t\t\t\ttrigger: { source: \"damageBegin3\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst target = trigger.player;\r\n\t\t\t\t\t\tif (player.storage.jiyinmrfz_eff1) {\r\n\t\t\t\t\t\t\ttrigger.num = target.hp;\r\n\t\t\t\t\t\t} else trigger.num = Math.max(Math.min(target.hp - 1, player.countMark(\"charge\")), 1);\r\n\t\t\t\t\t\tplayer.removeSkill(\"jiyinmrfz_eff1_buff\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff1_buff2: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"shaEnd\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.jiyinmrfz_eff1 = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t//闪的次数\r\n\t\t\t\teff2: {\r\n\t\t\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn event.card.name == \"sha\" && !event.getParent().directHit.includes(event.target);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlogTarget: \"target\",\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet targets = trigger.target;\r\n\t\t\t\t\t\tlet id = trigger.target.playerid;\r\n\t\t\t\t\t\tlet map = trigger?.parent?.customArgs;\r\n\r\n\t\t\t\t\t\tif (!id || !map) return;\r\n\r\n\t\t\t\t\t\tif (!map[id]) map[id] = {};\r\n\t\t\t\t\t\tif (typeof map[id].shanRequired == \"number\") {\r\n\t\t\t\t\t\t\tmap[id].shanRequired += targets.hp - 1;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmap[id].shanRequired = targets.hp;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t\t\tif (arg.card.name != \"sha\" || arg.target.countCards(\"h\", \"shan\") > player.countMark(\"charge\")) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t//提示\r\n\t\t\t\teff3: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\t\t\tvar list = [];\r\n\t\t\t\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\t\t\t\tif (game.players[i].isMaxHp() && game.players[i].isMaxHandcard() && game.players[i].isMaxEquip())\r\n\t\t\t\t\t\t\t\t\tlist.add(get.translation(game.players[i]));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn \"手牌最多或之一且体力值最多或之一且装备数最多或之一的角色有:</br>\" + (list.length ? list : \"没有满足条件的角色！\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t//消耗蓄力值\r\n\t\t\t\teff4: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeMark(\"charge\", trigger.num);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//伊芙利特 小火龙\r\n\t\tyanmomrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\tmod: {\r\n\t\t\t\tattackRange: function (player, num) {\r\n\t\t\t\t\treturn num + 2;\r\n\t\t\t\t},\r\n\t\t\t\tplayerEnabled: function (card, player, target) {\r\n\t\t\t\t\tvar gone = [];\r\n\t\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\t\tvar players = game.players[i];\r\n\t\t\t\t\t\tif (players.isAction()) gone.add(players);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (target != player && _status.currentPhase == player) {\r\n\t\t\t\t\t\tif (!gone.includes(target) && player.storage.yanmomrfz == true) return false;\r\n\t\t\t\t\t\tif (gone.includes(target) && player.storage.yanmomrfz == false) return false;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tlet num = 0;\r\n\t\t\t\tconst gone = [];\r\n\t\t\t\tconst wlgo = [];\r\n\t\t\t\tfor (const players of game.players) {\r\n\t\t\t\t\tif (players.isAction()) {\r\n\t\t\t\t\t\tgone.add(players);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\twlgo.add(players);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tresult = await player\r\n\t\t\t\t\t.chooseControl()\r\n\t\t\t\t\t.set(\"choiceList\", [\r\n\t\t\t\t\t\t\"只能指定本轮<font color=#f61e46>已进行</font>回合的其他角色<br>(\" + get.translation(gone) + \")\",\r\n\t\t\t\t\t\t\"只能指定本轮<font color=#f61e46>未进行</font>回合的其他角色<br>(\" + get.translation(wlgo) + \")\",\r\n\t\t\t\t\t])\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\tif (num > game.players.length - num) return 0;\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tif (result.index === 0) {\r\n\t\t\t\t\tplayer.storage.yanmomrfz = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.storage.yanmomrfz = false;\r\n\t\t\t\t}\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.logSkill(\"yanmomrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"yanmomrfz_add\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tgone: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\teff: {\r\n\t\t\t\t\tinit: function (player) {\r\n\t\t\t\t\t\tplayer.storage.yanmomrfz_eff = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.yanmomrfz_eff = true;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tgame.players.forEach(i => (i.storage.yanmomrfz_eff = false));\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tadd: {\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (get.type(event.card) == \"delay\") return false;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (get.type(event.card) == \"equip\") return false;\r\n\t\t\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn !event.targets.includes(current) && !!player.canUse(event.card, current) && current != player;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\tvar num = 0;\r\n\t\t\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\t\t\tif (game.players[i] == player || event.targets.includes(game.players[i])) continue;\r\n\t\t\t\t\t\t\tif (!player.inRange(game.players[i])) continue;\r\n\t\t\t\t\t\t\tif (player.canUse(event.card, game.players[i])) {\r\n\t\t\t\t\t\t\t\tnum = num + get.attitude(player, game.players[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn num > -1;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: function (event, player) {\r\n\t\t\t\t\t\tvar list = [];\r\n\t\t\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\t\t\tif (game.players[i] == player || event.targets.includes(game.players[i])) continue;\r\n\t\t\t\t\t\t\tif (!player.inRange(game.players[i])) continue;\r\n\t\t\t\t\t\t\tif (player.canUse(event.card, game.players[i])) list.add(get.translation(game.players[i]));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn \"是否增加\" + list + \"为\" + get.translation(event.card) + \"的目标？\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\tconst targets = [];\r\n\t\t\t\t\t\tfor (const current of game.players) {\r\n\t\t\t\t\t\t\tif (current === player || trigger.targets.includes(current)) continue;\r\n\t\t\t\t\t\t\tif (!player.inRange(current)) continue;\r\n\t\t\t\t\t\t\tif (player.canUse(trigger.card, current)) {\r\n\t\t\t\t\t\t\t\ttargets.push(current);\r\n\t\t\t\t\t\t\t\tplayer.line(current);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (targets.length > 0) {\r\n\t\t\t\t\t\t\tif (!event.isMine() && !event.isOnline()) {\r\n\t\t\t\t\t\t\t\tawait game.delayx();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tevent.targets = targets;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 1\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"yanmomrfz\");\r\n\t\t\t\t\t\tgame.log(event.targets, \"成为了\", trigger.card, \"的目标\");\r\n\t\t\t\t\t\ttrigger.targets.addArray(event.targets);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tyanbaomrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: '<span style=\"text-decoration:line-through\">防御力-100</span></br>本轮下次因【杀】受到的伤害+1',\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tglobal: [\"yanbaomrfz_eff\", \"yanbaomrfz_clear\"],\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!event.player.isAlive()) return false;\r\n\t\t\t\treturn !event.player.hasMark(\"yanbaomrfz\") && event.player != player && !event.player.storage.yanbaomrfz2;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.player) < 2;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.player.addMark(\"yanbaomrfz\", 1, false);\r\n\t\t\t\ttrigger.player.storage.yanbaomrfz2 = true;\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeMark(\"yanbaomrfz\", 1, false);\r\n\t\t\t\t\t\tplayer.storage.yanbaomrfz2 = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"damageBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!player.hasMark(\"yanbaomrfz\")) return false;\r\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t\tplayer.removeMark(\"yanbaomrfz\", 1, false);\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"yanbaomrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t},\r\n\t\t},\r\n\t\tyanbaomrfz2: {\r\n\t\t\tcharlotte: true,\r\n\t\t},\r\n\t\thuishenmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tusable: 1,\r\n\t\t\ttrigger: { player: \"useCardToPlayer\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.target != player;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.addTempSkill(\"huishenmrfz_eff\", \"useCardAfter\");\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.target != player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst result = await trigger.target\r\n\t\t\t\t\t\t\t.chooseToDiscard(\"弃置一张手牌，或令\" + get.translation(player) + \"摸一张牌\")\r\n\t\t\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\t\tvar trigger = _status.event.getTrigger();\r\n\t\t\t\t\t\t\t\treturn -get.attitude(trigger.target, trigger.player) - get.value(card);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\tif (result.bool == false) player.draw();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//淬羽赫默\r\n\t\trenbenmrfz: {\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"《特里蒙科学伦理宣言》\",\r\n\t\t\t\tcontent: \"本轮游戏不能使用、打出或弃置【$】\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t//priority:-100,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tfor (const char of game.players) {\r\n\t\t\t\t\tif (char.hasSkill(\"renbenmrfz2\")) char.removeSkill(\"renbenmrfz2\");\r\n\t\t\t\t\tif (char.hasSkill(\"renbenmrfz3\")) char.removeSkill(\"renbenmrfz3\");\r\n\t\t\t\t}\r\n\t\t\t\tconst list = lib.inpile;\r\n\t\t\t\tconst list2 = [];\r\n\t\t\t\tfor (const name of list) {\r\n\t\t\t\t\tconst type = get.type(name);\r\n\t\t\t\t\tif (name === \"sha\") {\r\n\t\t\t\t\t\tlist2.push([\"基本\", \"\", \"sha\"]);\r\n\t\t\t\t\t} else if (type === \"basic\") {\r\n\t\t\t\t\t\tlist2.push([\"基本\", \"\", name]);\r\n\t\t\t\t\t} else if (type === \"trick\") {\r\n\t\t\t\t\t\tlist2.push([\"锦囊\", \"\", name]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!list.length) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tevent.cards = list2;\r\n\t\t\t\t\tevent.cards2 = [];\r\n\t\t\t\t\tevent.num = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 1 & 2 loop (original event.goto(1))\r\n\t\t\t\twhile (event.num < game.players.length) {\r\n\t\t\t\t\tresult = await game.players[event.num]\r\n\t\t\t\t\t\t.chooseButton(true, [\"【人本】:请声明一张牌</br>科学理应注视每一个人\", [event.cards, \"vcard\"]])\r\n\t\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\t\tswitch (button.link[2]) {\r\n\t\t\t\t\t\t\t\tcase \"wuxie\":\r\n\t\t\t\t\t\t\t\t\treturn 0.5 + Math.random();\r\n\t\t\t\t\t\t\t\tcase \"wuzhong\":\r\n\t\t\t\t\t\t\t\tcase \"dongzhuxianji\":\r\n\t\t\t\t\t\t\t\t\treturn 0.3 + Math.random();\r\n\t\t\t\t\t\t\t\tcase \"guohe\":\r\n\t\t\t\t\t\t\t\tcase \"zhujinqiyuan\":\r\n\t\t\t\t\t\t\t\t\treturn 0.3 + Math.random();\r\n\t\t\t\t\t\t\t\tcase \"sha\":\r\n\t\t\t\t\t\t\t\t\treturn 0.3 + Math.random();\r\n\t\t\t\t\t\t\t\tcase \"tao\":\r\n\t\t\t\t\t\t\t\t\treturn 0.4 + Math.random();\r\n\t\t\t\t\t\t\t\tcase \"shan\":\r\n\t\t\t\t\t\t\t\t\treturn 0.3 + Math.random();\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\treturn Math.random();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t// step 2 logic\r\n\t\t\t\t\tif (result.links) {\r\n\t\t\t\t\t\tevent.cards2.add2(result.links[0][2]);\r\n\t\t\t\t\t\tgame.log(game.players[event.num], \"声明了\", result.links[0][2]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tevent.num++;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 3\r\n\t\t\t\tconst maxCard = game.mostStr(event.cards2);\r\n\t\t\t\tif (maxCard.length === 1) {\r\n\t\t\t\t\tgame.log(\"本轮游戏不能使用、打出或弃置\", maxCard);\r\n\t\t\t\t\tplayer.popup(maxCard);\r\n\t\t\t\t\tplayer.storage.renbenmrfz = maxCard;\r\n\t\t\t\t\tfor (const p of game.players) {\r\n\t\t\t\t\t\tif (p.storage.renbenmrfz !== maxCard) p.storage.renbenmrfz = maxCard;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// goto 6: skip to compliance loop\r\n\t\t\t\t} else {\r\n\t\t\t\t\tevent.cards3 = maxCard;\r\n\t\t\t\t\t// step 4\r\n\t\t\t\t\tresult = await player.chooseButton([true, \"【人本】:请选择一张牌</br>科学理应注视每一个人\", [event.cards3, \"vcard\"]]).forResult();\r\n\r\n\t\t\t\t\t// step 5\r\n\t\t\t\t\tif (result.links) {\r\n\t\t\t\t\t\tgame.log(\"本轮游戏不能使用、打出或弃置\", result.links[0][2]);\r\n\t\t\t\t\t\tplayer.popup(result.links[0][2]);\r\n\t\t\t\t\t\tplayer.storage.renbenmrfz = result.links[0][2];\r\n\t\t\t\t\t\tfor (const p of game.players) {\r\n\t\t\t\t\t\t\tif (p.storage.renbenmrfz !== result.links[0][2]) p.storage.renbenmrfz = result.links[0][2];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 6\r\n\t\t\t\tevent.num2 = 0;\r\n\r\n\t\t\t\t// step 7 & 8 loop (original event.goto(7)/redo())\r\n\t\t\t\twhile (event.num2 < game.players.length) {\r\n\t\t\t\t\tconst currentPlayer = game.players[event.num2];\r\n\t\t\t\t\tif (currentPlayer !== player) {\r\n\t\t\t\t\t\tresult = await currentPlayer\r\n\t\t\t\t\t\t\t.chooseControl(\"是\", \"否\")\r\n\t\t\t\t\t\t\t.set(\"prompt\", \"【人本】:是否遵守协议？(不能使用或打出\" + get.translation(player.storage.renbenmrfz) + \")\")\r\n\t\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\t\t\tif (!aiPlayer.getEquip(1)) return 0;\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\t\t\t\t\treturn get.distance(aiPlayer, current) <= 1 && aiPlayer !== current && get.attitude(aiPlayer, current) < 0;\r\n\t\t\t\t\t\t\t\t\t}) ||\r\n\t\t\t\t\t\t\t\t\t(aiPlayer.storage.renbenmrfz === \"sha\" && Math.random() > 0.4)\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t// step 8 logic\r\n\t\t\t\t\t\tif (result.index === 0) {\r\n\t\t\t\t\t\t\tcurrentPlayer.addSkill(\"renbenmrfz2\");\r\n\t\t\t\t\t\t} else if (result.index === 1) {\r\n\t\t\t\t\t\t\tcurrentPlayer.addSkill(\"renbenmrfz3\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tevent.num2++;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tglobal: \"renbenmrfz_use\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tuse: {\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardDiscardable: function (card, player) {\r\n\t\t\t\t\t\t\tif (get.name(card) == player.storage.renbenmrfz && (player.hasSkill(\"renbenmrfz2\") || player.hasSkill(\"renbenmrfz\")))\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcardEnabled2: function (card, player) {\r\n\t\t\t\t\t\t\tif (get.name(card) == player.storage.renbenmrfz && (player.hasSkill(\"renbenmrfz2\") || player.hasSkill(\"renbenmrfz\")))\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tignoredHandcard: function (card, player) {\r\n\t\t\t\t\t\t\tif (get.name(card) == player.storage.renbenmrfz && player.hasSkill(\"renbenmrfz\")) {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\trenbenmrfz2: {\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"接受《特里蒙科学伦理宣言》\",\r\n\t\t\t},\r\n\t\t\taudio: \"renbenmrfz\",\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilterCard: function (card, player) {\r\n\t\t\t\treturn card.name == player.storage.renbenmrfz;\r\n\t\t\t},\r\n\t\t\tdiscard: false,\r\n\t\t\tlose: false,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.hasCard(function (card) {\r\n\t\t\t\t\treturn card.name == player.storage.renbenmrfz;\r\n\t\t\t\t}, \"h\");\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && target.hasSkill(\"renbenmrfz\");\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tawait player.draw();\r\n\t\t\t\tplayer.give(event.cards, event.target);\r\n\t\t\t},\r\n\t\t\tgroup: \"renbenmrfz2_lose\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tlose: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tpriority: 50,\r\n\t\t\t\t\ttrigger: { global: \"die\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.hasSkill(\"renbenmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeSkill(\"renbenmrfz2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: function (player, target) {\r\n\t\t\t\t\t\tif (get.attitude(player, target) > 0) return 1;\r\n\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\trenbenmrfz3: {\r\n\t\t\tmark: true,\r\n\t\t\tmarkimage: \"extension/WhichWay/image/skill/rejecthmmrfz.png\",\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\treturn \"不接受《特里蒙科学伦理宣言》</br>当前攻击距离为\" + player.getAttackRange(false);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tattackRange: function (player, num) {\r\n\t\t\t\t\tvar atk = 0;\r\n\t\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\t\tif (game.players[i] == player) continue;\r\n\t\t\t\t\t\tif (game.players[i].hasSkill(\"renbenmrfz2\")) atk++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn num - Math.max(2, atk);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tdizhumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tgame.players.forEach(char => char.removeSkill(\"dizhumrfzx\"));\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseTarget(\"【砥柱】:你可以选择至多两名角色，令其获得‘夜灯’标记\", [0, 2])\r\n\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\treturn get.attitude(_status.event.player, target) > 2;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\tif (result.targets) {\r\n\t\t\t\t\tvar targets = result.targets;\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"dizhumrfz\");\r\n\t\t\t\t\tfor (const i of targets) {\r\n\t\t\t\t\t\ti.addSkill(\"dizhumrfzx\");\r\n\t\t\t\t\t\ti.storage.dizhumrfz = true;\r\n\t\t\t\t\t\tplayer.line(i);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tdizhumrfzx: {\r\n\t\t\tmark: true,\r\n\t\t\tmarkimage: \"extension/WhichWay/image/skill/yedengmrfz.png\",\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\treturn \"受到的伤害-1，若为致命伤害，则防止之\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"damageBegin3\" },\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (trigger.num < player.hp) trigger.num--;\r\n\t\t\t\telse trigger.num = 0;\r\n\t\t\t\tplayer.removeMark(\"dizhumrfz\");\r\n\t\t\t\tplayer.removeSkill(\"dizhumrfzx\");\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.logSkill(\"dizhumrfz\");\r\n\t\t\t},\r\n\t\t},\r\n\t\t//塞雷娅\r\n\t\tfuyuanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"recoverEnd\" },\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.source == player && event.player != player;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.player.draw();\r\n\t\t\t},\r\n\t\t},\r\n\t\tgaihuamrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"damageBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.player == player) return false;\r\n\t\t\t\treturn event.nature && player.inRange(event.player);\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tif (trigger.card) {\r\n\t\t\t\t\tconst cards = trigger.card;\r\n\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t.chooseToDiscard(\r\n\t\t\t\t\t\t\t\"he\",\r\n\t\t\t\t\t\t\tget.prompt(\"gaihuamrfz\"),\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\"是否弃置一张非\" + get.translation(get.type(cards)) + \"牌令此伤害 +1\",\r\n\t\t\t\t\t\t\tcard => {\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\treturn get.type(card) !== get.type(cards);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t.set(\"goon\", get.attitude(player, trigger.player) < 0)\r\n\t\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\t\tif (!_status.event.goon) return 0;\r\n\t\t\t\t\t\t\treturn 7 - get.value(card);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t.chooseToDiscard(get.prompt(\"gaihuamrfz\"), \"是否弃置一张牌令此伤害 +1\")\r\n\t\t\t\t\t\t.set(\"goon\", get.attitude(player, trigger.player) < 0)\r\n\t\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\t\tif (!_status.event.goon) return 0;\r\n\t\t\t\t\t\t\treturn 7 - get.value(card);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"gaihuamrfz\", trigger.player);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tyaopeimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.getCardUsable(\"sha\") > 0 && player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tfilterCard: true,\r\n\t\t\tposition: \"he\",\r\n\t\t\tprompt: \"请弃置一张牌\",\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tlet num = 0;\r\n\t\t\t\tlet go = false;\r\n\t\t\t\tif (\r\n\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\treturn get.distance(player, current) <= 1 && get.attitude(player, current) > 2 && current.getDamagedHp() > 2;\r\n\t\t\t\t\t})\r\n\t\t\t\t) {\r\n\t\t\t\t\tgo = true;\r\n\t\t\t\t} else if (\r\n\t\t\t\t\t!game.hasPlayer(current => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tget.distance(player, current) <= 1 &&\r\n\t\t\t\t\t\t\tget.attitude(player, current) > 0 &&\r\n\t\t\t\t\t\t\tcurrent.getDamagedHp() > 0 &&\r\n\t\t\t\t\t\t\tcurrent !== player\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}) &&\r\n\t\t\t\t\tplayer.getDamagedHp() > 0\r\n\t\t\t\t) {\r\n\t\t\t\t\tgo = true;\r\n\t\t\t\t}\r\n\t\t\t\tplayer.addTempSkill(\"yaopeimrfz2\", \"phaseUseAfter\");\r\n\t\t\t\tresult = await player\r\n\t\t\t\t\t.chooseTarget(\r\n\t\t\t\t\t\t\"【药配】:选择一名与你距离不大于 1 的角色令其回血，或选择'取消'令攻击范围内的所有角色回复一点体力\",\r\n\t\t\t\t\t\t(card, target, player) => {\r\n\t\t\t\t\t\t\treturn get.distance(player, target) <= 1 && target.getDamagedHp() > 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"go\", go)\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\tif (go) return get.attitude(aiPlayer, target) > 2;\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tif (result.targets) {\r\n\t\t\t\t\tconst targets = result.targets[0];\r\n\t\t\t\t\tawait targets.recover();\r\n\t\t\t\t\tif (targets.getDamagedHp() >= 3) {\r\n\t\t\t\t\t\tawait targets.recover();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor (let i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\t\tif (player.inRange(game.players[i]) || game.players[i] === player) {\r\n\t\t\t\t\t\t\tawait game.players[i].recover();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tthreaten: 1.5,\r\n\t\t\t\torder: 13,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: function (player) {\r\n\t\t\t\t\t\tvar num = 0,\r\n\t\t\t\t\t\t\tplayer = _status.event.player;\r\n\t\t\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\t\t\tvar targetx = game.players;\r\n\t\t\t\t\t\t\tif (!player.inRange(targetx[i])) continue;\r\n\t\t\t\t\t\t\tif (get.attitude(player, targetx[i]) > 0 && targetx[i].getDamagedHp() > 0) num++;\r\n\t\t\t\t\t\t\tif (get.attitude(player, targetx[i]) <= 0 && targetx[i].getDamagedHp() > 0) num--;\r\n\t\t\t\t\t\t\tif (player.getDamagedHp() > 0) {\r\n\t\t\t\t\t\t\t\tnum = 1;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (num > 0) return 1;\r\n\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tyaopeimrfz2: {\r\n\t\t\tcharlotte: true,\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tif (card.name == \"sha\") return num - 1;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//焰影苇草\r\n\t\tminghuomrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (player.hasSkill(\"minghuomrfz_buff1\")) player.removeSkill(\"minghuomrfz_buff1\");\r\n\t\t\t\tif (player.hasSkill(\"minghuomrfz_buff2\")) player.removeSkill(\"minghuomrfz_buff2\");\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseControl()\r\n\t\t\t\t\t.set(\"choiceList\", [\r\n\t\t\t\t\t\t\"每回合你使用的第一张单一目标的普通锦囊或【杀】可以额外指定一个目标\",\r\n\t\t\t\t\t\t\"当有‘灼痕’标记的角色进入濒死状态时，你可以令其上家或下家获得一个‘灼痕’标记\",\r\n\t\t\t\t\t\t'<span style=\"text-decoration:line-through\">真的会有人选这个选项吗？</span>不发动此技能',\r\n\t\t\t\t\t])\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\t\t\tvar curnext = current.getNext(),\r\n\t\t\t\t\t\t\t\t\tcurpre = current.getPrevious();\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\tcurrent != player &&\r\n\t\t\t\t\t\t\t\t\tcurrent.hasMark(\"zhuohenmrfz\") &&\r\n\t\t\t\t\t\t\t\t\tcurrent.hp < 2 &&\r\n\t\t\t\t\t\t\t\t\t(get.attitude(player, curnext) || get.attitude(player, curpre))\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}) > 0\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\tif (result.index !== 2) {\r\n\t\t\t\t\tif (result.index == 0) player.addSkill(\"minghuomrfz_buff1\");\r\n\t\t\t\t\telse player.addSkill(\"minghuomrfz_buff2\");\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"minghuomrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tbuff1: {\r\n\t\t\t\t\ttrigger: { player: \"useCard2\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.hasSkill(\"minghuomrfz_mark\")) return false;\r\n\t\t\t\t\t\tif (event.targets.length > 1) return false;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (get.type(event.card) != \"trick\" && event.card.name != \"sha\") return false;\r\n\t\t\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn !event.targets.includes(current) && !!player.canUse(event.card, current);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet result;\r\n\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t.chooseTarget(\r\n\t\t\t\t\t\t\t\tget.prompt(\"minghuomrfz\"),\r\n\t\t\t\t\t\t\t\t\"为\" + get.translation(trigger.card) + \"增加一个目标\",\r\n\t\t\t\t\t\t\t\t(card, player, target) => {\r\n\t\t\t\t\t\t\t\t\treturn !_status.event.sourcex.includes(target) && player.canUse(_status.event.card, target);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t.set(\"sourcex\", trigger.targets)\r\n\t\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\t\t\treturn get.effect(target, _status.event.card, aiPlayer, aiPlayer);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"card\", trigger.card)\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t// step 1\r\n\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\tif (!event.isMine() && !event.isOnline()) {\r\n\t\t\t\t\t\t\t\tawait game.delayx();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tevent.target = result.targets[0];\r\n\t\t\t\t\t\t\tplayer.addTempSkill(\"minghuomrfz_mark\", \"phaseEnd\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 2\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"minghuomrfz\", event.target);\r\n\t\t\t\t\t\ttrigger.targets.push(event.target);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tbuff2: {\r\n\t\t\t\t\ttrigger: { global: \"dying\" },\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.player.getNext()?.hasMark(\"zhuohenmrfz\") && event.player.getPrevious()?.hasMark(\"zhuohenmrfz\")) return false;\r\n\t\t\t\t\t\treturn game.players.length > 2 && event.player.hasMark(\"zhuohenmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst target = trigger.player;\r\n\t\t\t\t\t\tconst result = await player\r\n\t\t\t\t\t\t\t.chooseTarget(\r\n\t\t\t\t\t\t\t\tget.prompt(\"minghuomrfz\"),\r\n\t\t\t\t\t\t\t\t\"你可以令\" + get.translation(target) + \"的上家或下家（不能是你）获得一个‘灼痕’标记\",\r\n\t\t\t\t\t\t\t\tfunction (card, player, target) {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t!target.hasMark(\"zhuohenmrfz\") &&\r\n\t\t\t\t\t\t\t\t\t\ttarget != player &&\r\n\t\t\t\t\t\t\t\t\t\t(target == _status.event.TriPlayer.getNext() || target == _status.event.TriPlayer.getPrevious())\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t.set(\"TriPlayer\", trigger.player)\r\n\t\t\t\t\t\t\t.set(\"ai\", function (player, target) {\r\n\t\t\t\t\t\t\t\t/** @type {Player} */\r\n\t\t\t\t\t\t\t\tconst targetx = get.event().targetx;\r\n\t\t\t\t\t\t\t\tif (get.attitude(player, targetx.getNext()) > 2 && get.attitude(player, targetx.getNext()) > 2) return 0;\r\n\t\t\t\t\t\t\t\treturn get.attitude(player, target) < 2;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"targetx\", trigger.player)\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\tconst targetx = result.targets[0];\r\n\t\t\t\t\t\t\ttargetx.addMark(\"zhuohenmrfz\");\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"zhuohenmrfz\", targetx);\r\n\t\t\t\t\t\t\tif (targetx.countCards(\"h\") > 0) targetx.chooseToDiscard(\"h\", true, \"【灼痕】:请选择弃置一张手牌\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tmark: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tyingyaomrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\treturn \"剩余使用次数:\" + (game.totalmark(\"zhuohenmrfz\") - player.countMark(\"yingyaomrfz\"));\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (game.totalmark(\"zhuohenmrfz\") <= player.countMark(\"yingyaomrfz\")) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tevent.player != player &&\r\n\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && player.inRange(current);\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseTarget(\r\n\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\tget.prompt(\"yingyaomrfz\"),\r\n\t\t\t\t\t\t\"你可以选择一名在你攻击范围内的角色，令其回复一点体力，若其为你，你摸一张牌\",\r\n\t\t\t\t\t\tfunction (card, player, target) {\r\n\t\t\t\t\t\t\treturn (player.inRange(target) && target.getDamagedHp() > 0) || target == player;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\treturn get.attitude(_status.event.player, target) > 2;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\tif (result.targets) {\r\n\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\ttarget.recover();\r\n\t\t\t\t\tplayer.addMark(\"yingyaomrfz\", 1, false);\r\n\t\t\t\t\tif (target == player) player.draw();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"yingyaomrfz_clear\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeMark(\"yingyaomrfz\", player.countMark(\"yingyaomrfz\"), false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhuohenmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"·被德拉克的火焰灼伤</br>·手牌上限-1</br>·受到伤害时需弃置一张手牌\",\r\n\t\t\t},\r\n\t\t\tglobal: \"zhuohenmrfz_debuff2\",\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.target != player && !event.target.hasMark(\"zhuohenmrfz\") && !event.target.hasSkill(\"zhuohenmrfz2\");\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.target) < 0;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"是否令\" + get.translation(event.target) + \"获得一个‘灼痕’标记？\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst target = trigger.target;\r\n\t\t\t\ttarget.addMark(\"zhuohenmrfz\");\r\n\t\t\t\ttarget.addSkill(\"zhuohenmrfz_clear\");\r\n\t\t\t\ttarget.addTempSkill(\"zhuohenmrfz2\");\r\n\t\t\t\tif (target.countCards(\"h\") > 0) target.chooseToDiscard(\"h\", true, \"【灼痕】:请选择弃置一张手牌\");\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\treturn num + game.totalmark(\"zhuohenmrfz\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhuohenmrfz_debuff\", \"zhuohenmrfz_draw\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\taudio: \"zhuohenmrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.hasMark(\"zhuohenmrfz\") && !player.isMaxHandcard(true);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeMark(\"zhuohenmrfz\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"zhuohenmrfz_clear\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdebuff: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"damageBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player != player && event.player.hasMark(\"zhuohenmrfz\") && event.player.countCards(\"h\") > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.player.chooseToDiscard(\"h\", true, \"【灼痕】:请选择弃置一张手牌\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdebuff2: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\tif (player.hasMark(\"zhuohenmrfz\")) return num - 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhuohenmrfz2: {\r\n\t\t\tcharlotte: true,\r\n\t\t},\r\n\t\t//霍尔海雅\r\n\t\tchuangzhongmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tfor (var i = 0; i < event.targets.length; i++) {\r\n\t\t\t\t\tif (event.targets[i].hasMark(\"kuangyumrfz\")) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tfor (var i = 0; i < trigger.targets.length; i++) {\r\n\t\t\t\t\tif (trigger.targets[i].hasMark(\"kuangyumrfz\")) {\r\n\t\t\t\t\t\ttrigger.targets[i].addTempSkill(\"fengyin\");\r\n\t\t\t\t\t\ttrigger.targets[i].addSkill(\"chuangzhongmrfz_eff\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDiscardEnd\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeSkill(\"chuangzhongmrfz_eff\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\tif (player.hasMark(\"kuangyumrfz\")) return num - player.hp;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tkuangyumrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"风起\",\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tif (player.hasSkill(\"chuangzhongmrfz_eff\")) return \"·回合开始时，随机跳过两个阶段</br>·手牌上限-\" + player.hp;\r\n\t\t\t\t\treturn \"·回合开始时，随机跳过两个阶段\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 4,\r\n\t\t\tderivation: [\"kuangyumrfz_rewirte\"],\r\n\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\tfirstDo: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tvar nost = get.type(event.card) != \"trick\" && get.type(event.card) != \"delay\";\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tvar hast = get.type(event.card) != \"trick\" && event.card.name != \"sha\";\r\n\t\t\t\tif (!event.targets || event.targets.length > 1) return false;\r\n\t\t\t\tif (event.cards && (player.storage.kuangyumrfz ? nost : hast)) return false;\r\n\t\t\t\treturn event.target != player && !event.target.hasMark(\"kuangyumrfz\");\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"是否令\" + get.translation(event.target) + \"获得一个‘风起’标记？\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst target = trigger.target;\r\n\t\t\t\ttarget.addMark(\"kuangyumrfz\");\r\n\t\t\t\ttarget.addSkill(\"kuangyumrfz_clear\");\r\n\t\t\t\ttarget.addTempSkill(\"kuangyumrfz2\");\r\n\t\t\t\ttarget.addSkill(\"kuangyumrfz_skip\");\r\n\t\t\t\tif (player.inRange(target)) player.addTempSkill(\"kuangyumrfz_damage\", \"useCardAfter\");\r\n\t\t\t},\r\n\t\t\tgroup: \"kuangyumrfz_clear2\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear2: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.storage.kuangyumrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.kuangyumrfz = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeMark(\"kuangyumrfz\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"kuangyumrfz_clear\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tskip: {\r\n\t\t\t\t\taudio: \"kuangyumrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar phase = [\"phaseBegin\", \"phaseJudge\", \"phaseDraw\", \"phaseUse\", \"phaseDiscard\", \"phaseJieshu\"].randomGets(2);\r\n\t\t\t\t\t\tfor (var i = 0; i < phase.length; i++) {\r\n\t\t\t\t\t\t\tplayer.skip(phase[i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgame.log(player, \"因【狂语】将会跳过\", get.tranPhase(phase[0]), \"和\", get.tranPhase(phase[1]));\r\n\t\t\t\t\t\tplayer.removeSkill(\"kuangyumrfz_skip\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\taudio: \"kuangyumrfz\",\r\n\t\t\t\t\ttrigger: { source: \"damageBegin\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.hasMark(\"kuangyumrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t\tplayer.storage.kuangyumrfz = true;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tkuangyumrfz2: {\r\n\t\t\tcharlotte: true,\r\n\t\t},\r\n\t\t//新棘刺\r\n\t\tjihumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"荆棘护身\",\r\n\t\t\t},\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\treturn get.tag(card, \"damage\") || (get.type(card) == \"trick\" && !get.tag(card, \"damage\")) || get.type(card) == \"delay\";\r\n\t\t\t\t\t}) > 1\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (!player.hasMark(\"jihumrfz\")) player.addMark(\"jihumrfz\", 1, false);\r\n\t\t\t\tplayer.addTempSkill(\"zishou2\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"jihumrfz_clear\", \"jihumrfz_buff\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"jihumrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeMark(\"jihumrfz\", 1, false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tbuff: {\r\n\t\t\t\t\ttrigger: { target: \"useCardToTargeted\" },\r\n\t\t\t\t\tusable: 1,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (get.type(event.card) == \"delay\" || get.type(event.card) == \"equip\") return false;\r\n\t\t\t\t\t\tif (!player.hasMark(\"jihumrfz\")) return false;\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.player != player &&\r\n\t\t\t\t\t\t\t(player.canUse(event.card, event.player, false) ||\r\n\t\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\t\tcurrent != player && get.distance(player, current) <= 1 && !!player.canUse(event.card, current, true)\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}))\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet result;\r\n\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t.chooseTarget((card, player, target) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\tplayer.canUse(trigger.card, target, false) &&\r\n\t\t\t\t\t\t\t\t\ttarget !== player &&\r\n\t\t\t\t\t\t\t\t\t(get.distance(player, target) <= 1 || target === _status.event.TriPlayer)\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"TriPlayer\", trigger.player)\r\n\t\t\t\t\t\t\t.set(\"prompt\", get.prompt(\"jihumrfz\"))\r\n\t\t\t\t\t\t\t.set(\"prompt2\", \"【棘护】:你可以使用一张【\" + get.translation(trigger.card.name) + \"】\")\r\n\t\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\t\treturn -get.attitude(player, target);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t// step 1\r\n\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\tawait player.useCard({ name: trigger.card.name, isCard: true }, result.targets[0], false);\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"jihumrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tre_jianshumrfz: {\r\n\t\t\taudio: \"jianshumrfz\",\r\n\t\t\tderivation: [\"re_chaoshengmrfz\"],\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar num = player.countMark(\"re_jianshumrfz\");\r\n\t\t\t\t\tif (num == 20) return \"出牌阶段开始时可以使用一张【杀】</br>摸牌阶段摸牌数+1;攻击距离和【杀】的使用次数各+2\";\r\n\t\t\t\t\telse if (num >= 10)\r\n\t\t\t\t\t\treturn \"已累计指定\" + num + \"次</br>出牌阶段开始时可以使用一张【杀】</br>摸牌阶段摸牌数、攻击距离和【杀】的使用次数各+1\";\r\n\t\t\t\t\treturn \"已累计指定\" + num + \"次\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { player: \"useCardToTargeted\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"re_jianshumrfz\") < 20;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tawait player.addMark(\"re_jianshumrfz\", 1, false);\r\n\r\n\t\t\t\tconst num = player.countMark(\"re_jianshumrfz\");\r\n\t\t\t\tif (num % 10 == 0) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"jianshumrfz\");\r\n\t\t\t\t\t//--第一次使用至高之术--//\r\n\t\t\t\t\tif (num == 10) {\r\n\t\t\t\t\t\tplayer.addSkill(\"re_jianshumrfz_usesha\");\r\n\t\t\t\t\t\tplayer.addMark(\"re_jianshumrfz_time\", 1, false);\r\n\t\t\t\t\t\tplayer.addMark(\"re_jianshumrfz_draw\", 1, false);\r\n\t\t\t\t\t\tplayer.addMark(\"re_jianshumrfz_range\", 1, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//--第二次使用至高之术--//\r\n\t\t\t\t\tif (num == 20) {\r\n\t\t\t\t\t\tplayer.addMark(\"re_jianshumrfz_time\", 1, false);\r\n\t\t\t\t\t\tplayer.addMark(\"re_jianshumrfz_range\", 1, false);\r\n\t\t\t\t\t\tplayer.removeSkill(\"jihumrfz\");\r\n\t\t\t\t\t\tplayer.addSkill(\"re_chaoshengmrfz\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"re_jianshumrfz_time\", \"re_jianshumrfz_range\", \"re_jianshumrfz_draw\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\ttime: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num + player.countMark(\"re_jianshumrfz_time\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\trange: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tattackRange: function (player, num) {\r\n\t\t\t\t\t\t\treturn num + player.countMark(\"re_jianshumrfz_range\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"re_jianshumrfz_draw\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"jianshumrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tusesha: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst result = await player\r\n\t\t\t\t\t\t\t.chooseTarget(\"选择一名其他角色视为对其使用一张【杀】\", function (card, player, target) {\r\n\t\t\t\t\t\t\t\treturn target != player && player.inRange(target);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"ai\", target => -get.attitude(player, target))\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\tconst target = result.targets[0];\r\n\t\t\t\t\t\t\tplayer.useCard({ name: \"sha\" }, true, false, target);\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"jianshumrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tre_chaoshengmrfz: {\r\n\t\t\taudio: \"chaoshengmrfz\",\r\n\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.getStat(\"damage\");\r\n\t\t\t},\r\n\t\t\tfrequent: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.draw(2);\r\n\t\t\t\tplayer.recover();\r\n\t\t\t},\r\n\t\t},\r\n\t\t//煌\r\n\t\tyanxunmrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\ttrigger: { player: \"damageBegin\" },\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.parent && (event.parent.name === \"_lianhuan\" || event.parent.name === \"_lianhuan2\");\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.num--;\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\treturn num + 2;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"yanxunmrfz_kaishi\", \"yanxunmrfz_draw\", \"yanxunmrfz_use\", \"yanxunmrfz_judge\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tjudge: {\r\n\t\t\t\t\taudio: \"yanxunmrfz\",\r\n\t\t\t\t\ttrigger: { player: \"damageBegin\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn event.getParent(\"phaseJudge\") && event.getParent(\"phaseJudge\").player == player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num -= 2;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tkaishi: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (player.isLinked()) {\r\n\t\t\t\t\t\t\tplayer.link();\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"yanxunmrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (player.isTurnedOver()) {\r\n\t\t\t\t\t\t\tconst result = await player\r\n\t\t\t\t\t\t\t\t.chooseBool()\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", get.prompt(\"yanxunmrfz\"))\r\n\t\t\t\t\t\t\t\t.set(\"prompt2\", \"【严训】:是否翻面并跳过下个出牌阶段？\")\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\t\treturn player.countCards(\"h\") < player.getHandcardLimit() * 2;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\t\tplayer.turnOver();\r\n\t\t\t\t\t\t\t\tplayer.addSkill(\"yanxunmrfz_skipped\");\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tplayer.logSkill(\"yanxunmrfz\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tskipped: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"跳过下个出牌阶段\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.skip(\"phaseUse\");\r\n\t\t\t\t\t\tgame.log(player, \"的出牌阶段将被跳过\");\r\n\t\t\t\t\t\tplayer.removeSkill(\"yanxunmrfz_skipped\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\taudio: \"yanxunmrfz\",\r\n\t\t\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player\r\n\t\t\t\t\t\t\t.getHistory(\"skipped\")\r\n\t\t\t\t\t\t\t.map(i => i.name)\r\n\t\t\t\t\t\t\t.includes(\"phaseDraw\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfrequent: true,\r\n\t\t\t\t\tprompt: \"【严训】:是否摸一张牌?\",\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tuse: {\r\n\t\t\t\t\taudio: \"yanxunmrfz\",\r\n\t\t\t\t\ttrigger: { player: \"phaseDiscardBefore\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar cardh = player.getCards(\"h\"),\r\n\t\t\t\t\t\t\tcanuse = false;\r\n\t\t\t\t\t\tfor (var i = 0; i < cardh.length; i++) {\r\n\t\t\t\t\t\t\tif (player.hasUseTarget(cardh[i])) {\r\n\t\t\t\t\t\t\t\tcanuse = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t.getHistory(\"skipped\")\r\n\t\t\t\t\t\t\t\t.map(i => i.name)\r\n\t\t\t\t\t\t\t\t.includes(\"phaseUse\") && canuse == true\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: \"【严训】:是否使用至多两张手牌?\",\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet result;\r\n\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\tevent.num = 0;\r\n\r\n\t\t\t\t\t\t// step 1 & 2 loop (original event.goto(1))\r\n\t\t\t\t\t\twhile (event.num < 2) {\r\n\t\t\t\t\t\t\t// step 1\r\n\t\t\t\t\t\t\tevent.num++;\r\n\t\t\t\t\t\t\tconst cardh = player.getCards(\"h\");\r\n\t\t\t\t\t\t\tconst cards = [];\r\n\t\t\t\t\t\t\tfor (const card of cardh) {\r\n\t\t\t\t\t\t\t\tcards.push(card.name);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tconst list = [];\r\n\t\t\t\t\t\t\tfor (const name of lib.inpile) {\r\n\t\t\t\t\t\t\t\tif (!cards.includes(name)) continue;\r\n\t\t\t\t\t\t\t\tconst card = { name: name, isCard: true };\r\n\t\t\t\t\t\t\t\tif (!player.hasUseTarget(card)) continue;\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tconst type = get.type(card);\r\n\t\t\t\t\t\t\t\tif (type === \"basic\") {\r\n\t\t\t\t\t\t\t\t\tlist.push([\"基本\", \"\", name]);\r\n\t\t\t\t\t\t\t\t} else if (type === \"trick\" || type === \"delay\") {\r\n\t\t\t\t\t\t\t\t\tlist.push([\"锦囊\", \"\", name]);\r\n\t\t\t\t\t\t\t\t} else if (type === \"equip\") {\r\n\t\t\t\t\t\t\t\t\tlist.push([\"装备\", \"\", name]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (list.length) {\r\n\t\t\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t\t\t.chooseButton([\"【严训】:请选择你要使用的手牌 (\" + event.num + \"/2)\", [list, \"vcard\"]], \"hidden\")\r\n\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// step 2\r\n\t\t\t\t\t\t\tif (result.links) {\r\n\t\t\t\t\t\t\t\tconst name = result.links[0][2];\r\n\t\t\t\t\t\t\t\tawait player.chooseToUse(\r\n\t\t\t\t\t\t\t\t\t(card, player, event) => {\r\n\t\t\t\t\t\t\t\t\t\treturn get.name(card) === name;\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\"【严训】:你可以使用一张\" + get.translation(name)\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t// event.goto(1) is handled by while loop condition\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tchuchanmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tif (!player.storage.chuchanmrfz) return \"未发动\";\r\n\t\t\t\t\tif (player.storage.chuchanmrfz && player.hasSkill(\"chuchanmrfz_buff1\")) return \"本轮受到伤害后回复一点体力\";\r\n\t\t\t\t\treturn \"已发动\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"changeHp\" },\r\n\t\t\tforced: true,\r\n\t\t\tunique: true,\r\n\t\t\tmark: true,\r\n\t\t\tlimited: true,\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationStr: \"除颤\",\r\n\t\t\tanimationColor: \"fire\",\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.chuchanmrfz = false;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.chuchanmrfz && player.hp < 2;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.storage.chuchanmrfz = true;\r\n\t\t\t\tplayer.recoverTo(2);\r\n\t\t\t\tplayer.addSkill(\"chuchanmrfz_buff1\");\r\n\t\t\t\tplayer.addSkill(\"chuchanmrfz_buff2\");\r\n\t\t\t\tplayer.awakenSkill(event.name);\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tbuff1: {\r\n\t\t\t\t\taudio: \"chuchanmrfz\",\r\n\t\t\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.recover();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\teffect: {\r\n\t\t\t\t\t\t\ttarget: function (card, player, target, current) {\r\n\t\t\t\t\t\t\t\tif (get.tag(card, \"damage\")) return \"zerotarget\";\r\n\t\t\t\t\t\t\t\tif (get.type(card) == \"trick\" && get.tag(card, \"damage\")) {\r\n\t\t\t\t\t\t\t\t\treturn \"zeroplayertarget\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tbuff2: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeSkill([\"chuchanmrfz_buff1\", \"chuchanmrfz_buff2\"]);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tfeixuemrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tif (card.name == \"sha\") return num + player.storage.feixuemrfz;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.feixuemrfz = 0;\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\taudio: 4,\r\n\t\t\ttrigger: { player: [\"loseHpEnd\", \"damageEnd\"] },\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t// step 0\r\n\t\t\t\tevent.num = trigger.num;\r\n\r\n\t\t\t\t// step 1 & 2 loop (original event.goto(1))\r\n\t\t\t\twhile (event.num > 0) {\r\n\t\t\t\t\t// step 1\r\n\t\t\t\t\tevent.num--;\r\n\t\t\t\t\tconst card = get.cardPile2(c => {\r\n\t\t\t\t\t\treturn get.name(c) === \"sha\" && c.nature === \"fire\";\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (card) {\r\n\t\t\t\t\t\tawait player.gain(card, \"gain2\", \"log\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tawait player.draw();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// step 2\r\n\t\t\t\t\tif (trigger.source && trigger.source.countCards(\"e\") > 0) {\r\n\t\t\t\t\t\tplayer.storage.feixuemrfz += 1;\r\n\t\t\t\t\t\tconst next = player.discardPlayerCard(trigger.source, \"e\", false).set(\"forceAuto\", true);\r\n\t\t\t\t\t\tnext.boolline = true;\r\n\t\t\t\t\t\tawait next;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"feixuemrfz_clear\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.feixuemrfz = 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tthreaten: 0.8,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//铃兰\r\n\t\thualaomrfz: {\r\n\t\t\tmarktext: \"脆弱\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"脆弱\",\r\n\t\t\t\tcontent: \"下次受到的伤害+#\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.player != player;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (get.attitude(player, event.player) > 0) return false;\r\n\t\t\t\tif (event.num + event.player.countMark(\"hualaomrfz\") - event.player.hp >= 0) return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst target = trigger.player;\r\n\t\t\t\ttarget.addMark(\"hualaomrfz\", trigger.num + 1, false);\r\n\t\t\t\ttarget.addSkill(\"hualaomrfz_eff\");\r\n\t\t\t\ttrigger.num = 0;\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\ttrigger: { player: \"damageBegin2\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"hualaomrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num += player.countMark(\"hualaomrfz\");\r\n\t\t\t\t\t\tplayer.removeMark(\"hualaomrfz\", player.countMark(\"hualaomrfz\"), false);\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"hualaomrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tthreaten: 1.2,\r\n\t\t\t},\r\n\t\t},\r\n\t\thuhuomrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"摸牌阶段摸牌数-#,出牌阶段结束时摸#张牌\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageZero\" },\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.player.addMark(\"huhuomrfz\", 1, false);\r\n\t\t\t\ttrigger.player.addSkill(\"huhuomrfz2\");\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasMark(\"huhuomrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeMark(\"huhuomrfz\", player.countMark(\"huhuomrfz\"), false);\r\n\t\t\t\t\t\ttrigger.player.removeSkill(\"huhuomrfz2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thuhuomrfz2: {\r\n\t\t\tdirect: true,\r\n\t\t\tcharlotte: true,\r\n\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.num -= player.countMark(\"huhuomrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"huhuomrfz2_draw\", \"huhuomrfz_clear\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseUseEnd\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.draw(player.countMark(\"huhuomrfz\"));\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\twuyuemrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\ttargetInRange: function (card, player, target, now) {\r\n\t\t\t\t\tif (card.name == \"sha\" && get.color(card) == \"black\") return true;\r\n\t\t\t\t},\r\n\t\t\t\tselectTarget: function (card, player, range) {\r\n\t\t\t\t\tif (card.name == \"sha\" && range[1] != -1 && get.color(card) == \"red\") range[1]++;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//闪灵\r\n\t\tlichangmrfz: {\r\n\t\t\tmarktext: \"屏障\",\r\n\t\t\tmarkimage: \"extension/WhichWay/image/skill/slmrfzimage.png\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"屏障\",\r\n\t\t\t\tcontent: \"expansion\",\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t},\r\n\t\t\tonremove: function (player, skill) {\r\n\t\t\t\tvar cards = player.getExpansions(skill);\r\n\t\t\t\tif (cards.length) player.loseToDiscardpile(cards);\r\n\t\t\t},\r\n\t\t\taudio: 6,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.countCards(\"h\") > 0 &&\r\n\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn !current.hasSkill(\"lichangmrfz2\");\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn !target.hasSkill(\"lichangmrfz2\");\r\n\t\t\t},\r\n\t\t\tfilterCard: true,\r\n\t\t\tlose: false,\r\n\t\t\tdiscard: false,\r\n\t\t\tdelay: 0,\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\tif (\r\n\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\treturn get.type(card) == \"equip\";\r\n\t\t\t\t\t}) > 0\r\n\t\t\t\t)\r\n\t\t\t\t\treturn get.type(card) == \"equip\";\r\n\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t},\r\n\t\t\tprompt: `请选择一张牌`,\r\n\t\t\tposition: \"he\",\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { target, cards } = event;\r\n\r\n\t\t\t\ttarget.addTempSkill(\"lichangmrfz2\");\r\n\t\t\t\ttarget.addToExpansion(cards, target, \"giveAuto\").gaintag.add(\"lichangmrfz\");\r\n\t\t\t\tif (get.type(cards[0]) == \"equip\" && target.hujia < 5) target.changeHujia();\r\n\t\t\t\tif (target.hujia < 5) target.changeHujia();\r\n\t\t\t},\r\n\t\t\tgroup: [\"lichangmrfz_rem\", \"lichangmrfz_dam\", \"lichangmrfz_da\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\trem: {\r\n\t\t\t\t\taudio: \"lichangmrfz\",\r\n\t\t\t\t\tchargeSkill: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { global: \"gainAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (event.getParent(1).name != \"lichangmrfz_dam\") return false;\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.fromStorage == true ||\r\n\t\t\t\t\t\t\tgame.hasPlayer2(function (current) {\r\n\t\t\t\t\t\t\t\tvar evt = event.getl(current);\r\n\t\t\t\t\t\t\t\treturn evt && evt.xs && evt.xs.length > 0;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addMark(\"charge\");\r\n\t\t\t\t\t\t//var str='';\r\n\t\t\t\t\t\t//str+=get.translation(event)+'</br>';\r\n\t\t\t\t\t\t//for(var i=1;i<=10;i++) str+=get.translation(event.getParent(i))+'</br>';\r\n\t\t\t\t\t\t//game.log(str);\r\n\t\t\t\t\t\t//player.popup(str);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdam: {\r\n\t\t\t\t\taudio: \"lichangmrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { global: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.hujia && event.player.getExpansions(\"lichangmrfz\").length > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar cards = trigger.player.getExpansions(\"lichangmrfz\");\r\n\t\t\t\t\t\ttrigger.player.gain(cards, \"gain2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tda: {\r\n\t\t\t\t\ttrigger: { global: \"phaseBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.countMark(\"charge\") >= 3;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet result;\r\n\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t.chooseTarget(get.prompt(\"lichangmrfz\"), \"【力场】:你可以选择三名角色，令其各从牌堆或弃牌堆中获得一张装备牌\", [1, 3])\r\n\t\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\t\treturn get.attitude(player, target) > 0;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t// step 1\r\n\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\tplayer.removeMark(\"charge\", player.countMark(\"charge\"));\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"lichangmrfz\");\r\n\t\t\t\t\t\t\tevent.targets = result.targets;\r\n\t\t\t\t\t\t\tevent.num = 0;\r\n\t\t\t\t\t\t\tevent.num2 = result.targets.length;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 2 & 3 loop (original event.goto(2))\r\n\t\t\t\t\t\twhile (event.num < event.num2) {\r\n\t\t\t\t\t\t\t// step 2\r\n\t\t\t\t\t\t\tconst card = get.cardPile(c => {\r\n\t\t\t\t\t\t\t\treturn get.type(c) === \"equip\";\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tevent.card = card;\r\n\t\t\t\t\t\t\tconst list = game.filterPlayer(target => {\r\n\t\t\t\t\t\t\t\treturn target !== player && target.hasSkill(\"lichangmrfz\");\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tlet str = \"【力场】:你可以将此牌交给\" + get.translation(list);\r\n\t\t\t\t\t\t\tif (list.length > 1) str += \"其中一人\";\r\n\t\t\t\t\t\t\tstr += \",或取消自己装备此牌\";\r\n\r\n\t\t\t\t\t\t\tconst currentTarget = event.targets[event.num];\r\n\r\n\t\t\t\t\t\t\tawait currentTarget.gain(card, \"gain\");\r\n\r\n\t\t\t\t\t\t\tresult = await currentTarget\r\n\t\t\t\t\t\t\t\t.chooseTarget(str, (card, player, target) => {\r\n\t\t\t\t\t\t\t\t\treturn target !== currentTarget && target.hasSkill(\"lichangmrfz\");\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\t\t\tif (get.attitude(currentTarget, target) <= 0) return 0;\r\n\t\t\t\t\t\t\t\t\treturn get.attitude(currentTarget, target) >= 0;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t\t// step 3\r\n\t\t\t\t\t\t\tconst hasCard = currentTarget.hasCard(c => {\r\n\t\t\t\t\t\t\t\treturn c === event.card;\r\n\t\t\t\t\t\t\t}, \"h\");\r\n\r\n\t\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\t\tif (hasCard) {\r\n\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\tawait currentTarget.give(event.card, player);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tawait currentTarget.recover();\r\n\t\t\t\t\t\t\t} else if (hasCard) {\r\n\t\t\t\t\t\t\t\tawait currentTarget.chooseUseTarget(event.card, true);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tevent.num++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.2,\r\n\t\t\t\torder: function () {\r\n\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\tif (player.hp <= 2) return 13;\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t},\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\ttarget: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tlichangmrfz2: {\r\n\t\t\tcharlotte: true,\r\n\t\t},\r\n\t\tjiushumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"chooseToUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tplayer.countCards(\"he\", function (card) {\r\n\t\t\t\t\t\treturn get.color(card) == \"black\";\r\n\t\t\t\t\t}) == 0\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\treturn player.isPhase(\"phaseJudge\", false) || player.isPhase(\"phaseZhunbei\", false);\r\n\t\t\t},\r\n\t\t\tfilterCard: function (card) {\r\n\t\t\t\treturn get.color(card) == \"black\";\r\n\t\t\t},\r\n\t\t\tviewAsFilter: function (player) {\r\n\t\t\t\tif (!player.isPhase(\"phaseJudge\", false) && !player.isPhase(\"phaseZhunbei\", false)) return false;\r\n\t\t\t\treturn player.countCards(\"he\", { color: \"black\" }) > 0;\r\n\t\t\t},\r\n\t\t\tviewAs: { name: \"wuxie\" },\r\n\t\t\tposition: \"he\",\r\n\t\t\tprompt: \"将一张黑色牌当无懈可击使用\",\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\tvar tri = _status.event.getTrigger();\r\n\t\t\t\tif (tri && tri.card && tri.card.name == \"chiling\") return -1;\r\n\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t},\r\n\t\t},\r\n\t\tyubimrfz: {\r\n\t\t\tglobal: \"yubimrfz_eff\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn num + Math.min(player.hujia, 5);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//玛露希尔\r\n\t\tkumomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardAfter\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (!player.isPhaseUsing()) return false;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\treturn event.card && get.type(event.card) == \"trick\";\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (!player.getStat(\"card\").sha) player.getStat(\"card\").sha = 0;\r\n\t\t\t\tplayer.getStat(\"card\").sha++;\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tcardEnabled(card, player) {\r\n\t\t\t\t\tif (get.type(card) == \"trick\" && player.getCardUsable(\"sha\") < 1) return false;\r\n\t\t\t\t},\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tif (card.name != \"sha\") return;\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (!_status.kumomrfz_tmp) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t_status.kumomrfz_tmp = true;\r\n\t\t\t\t\t\tconst count = player.getCardUsable(\"sha\");\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t_status.kumomrfz_tmp = false;\r\n\t\t\t\t\t\tif (player.isPhaseUsing() && count >= player.maxHp) {\r\n\t\t\t\t\t\t\treturn player.maxHp;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tcombo: \"cainvmrfz\",\r\n\t\t\t\tthreaten: 0.8,\r\n\t\t\t},\r\n\t\t},\r\n\t\tcainvmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (event.getParent().triggeredTargets3.length > 1) return false;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\treturn event.card && get.type(event.card) == \"trick\" && player.getCardUsable(\"sha\") > 0;\r\n\t\t\t},\r\n\t\t\tprompt(event, player) {\r\n\t\t\t\treturn `【才女】:是否令${get.translation(event.card)}额外结算${Math.min(player.maxHp, player.getCardUsable(\"sha\"))}次？`;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst num = Math.min(player.getCardUsable(\"sha\"), player.maxHp);\r\n\t\t\t\tif (trigger.parent) trigger.parent.effectCount += num;\r\n\t\t\t},\r\n\t\t\tgroup: \"cainvmrfz_trick\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\ttrick: {\r\n\t\t\t\t\thiddenCard: function (player, name) {\r\n\t\t\t\t\t\tif (player.getStat(\"skill\").cainvmrfz_trick && player.getStat(\"skill\").cainvmrfz_trick >= player.maxHp) return false;\r\n\t\t\t\t\t\treturn player.countCards(\"hes\", \"sha\") < 1 && !lib.inpile.includes(name) && get.type(name) != \"trick\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\taudio: \"cainvmrfz\",\r\n\t\t\t\t\tenable: \"chooseToUse\",\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.getStat(\"skill\").cainvmrfz_trick && player.getStat(\"skill\").cainvmrfz_trick >= player.maxHp) return false;\r\n\t\t\t\t\t\treturn player.hasCard(card =>\r\n\t\t\t\t\t\t\tlib.inpile.some(name => {\r\n\t\t\t\t\t\t\t\tif (get.name(card) != \"sha\") return false;\r\n\t\t\t\t\t\t\t\tif (get.type(name) != \"trick\") return false;\r\n\t\t\t\t\t\t\t\tif (event.filterCard({ name: name, isCard: true, cards: [card] }, player, event)) return true;\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}, \"hes\")\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tchooseButton: {\r\n\t\t\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\t\t\tvar list = [];\r\n\t\t\t\t\t\t\tfor (var name of lib.inpile) {\r\n\t\t\t\t\t\t\t\tif (get.type(name) == \"trick\") {\r\n\t\t\t\t\t\t\t\t\tlist.push([get.translation(get.type(name)), \"\", name]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn ui.create.dialog(\"才女\", [list, \"vcard\"]);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfilter: function (button, player) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\treturn _status.event.getParent().filterCard({ name: button.link[2] }, player, _status.event.getParent());\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcheck: function (button) {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tvar card = { name: button.link[2], nature: button.link[3] };\r\n\t\t\t\t\t\t\tif (player.countCards(\"hes\", cardx => cardx.name == card.name)) return 0;\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\treturn _status.event.getParent().type == \"phase\" ? player.getUseValue(card) : 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\taudio: \"cainvmrfz\",\r\n\t\t\t\t\t\t\t\tfilterCard(card) {\r\n\t\t\t\t\t\t\t\t\treturn card.name == \"sha\";\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t\t\t\tcheck: function (card) {\r\n\t\t\t\t\t\t\t\t\treturn 7 - get.value(card);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tposition: \"hes\",\r\n\t\t\t\t\t\t\t\tviewAs: { name: links[0][2], nature: links[0][3] },\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\t\t\treturn \"将一张牌当做\" + (get.translation(links[0][3]) || \"\") + get.translation(links[0][2]) + \"使用\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\torder: 13,\r\n\t\t\t\t\t\tthreaten: 1.8,\r\n\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tcangshumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: [\"phaseUseEnd\", \"phaseUseBegin\"] },\r\n\t\t\tintro: {\r\n\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\tconst storage = player.storage.cangshumrfz;\r\n\t\t\t\t\tif (storage.index == 0) return `下个出牌阶段开始时摸${storage.num}张牌`;\r\n\t\t\t\t\treturn `下个出牌阶段阶段使用【杀】的次数+1`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn get.is.object(player.storage.cangshumrfz) || player.getCardUsable(\"sha\") > 0;\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tif (event.triggername == \"phaseUseBegin\") {\r\n\t\t\t\t\tif (!event.result) event.result = {};\r\n\t\t\t\t\tevent.result.bool = get.is.object(player.storage.cangshumrfz);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else if (player.getCardUsable(\"sha\") < 1) {\r\n\t\t\t\t\tif (!event.result) event.result = {};\r\n\t\t\t\t\tevent.result.bool = false;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tevent.result = await player\r\n\t\t\t\t\t.chooseControl(\"选项一\", \"选项二\", \"cancel2\")\r\n\t\t\t\t\t.set(\"choiceList\", [`摸${Math.min(player.getCardUsable(\"sha\"), player.maxHp)}张牌`, `使用【杀】的次数+1`])\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\tconst player = get.player();\r\n\t\t\t\t\t\tconst num = player.getCardUsable(\"sha\");\r\n\t\t\t\t\t\treturn num > 1 ? 0 : 1;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tevent.result.cost_data = event.result.index;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (event.triggername == \"phaseUseBegin\") {\r\n\t\t\t\t\tconst result = player.storage.cangshumrfz;\r\n\t\t\t\t\tif (result[\"index\"] == 0) {\r\n\t\t\t\t\t\tplayer.draw(result[\"num\"]);\r\n\t\t\t\t\t} else player.addTempSkill(\"cangshumrfz_sha\", { player: \"phaseUseEnd\" });\r\n\t\t\t\t\tdelete player.storage.cangshumrfz;\r\n\t\t\t\t\tplayer.unmarkSkill(\"cangshumrfz\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst index = event.cost_data;\r\n\t\t\t\tplayer.storage.cangshumrfz = {\r\n\t\t\t\t\tindex: index,\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tnum: index === 0 ? Math.min(player.getCardUsable(\"sha\"), player.maxHp) : 1,\r\n\t\t\t\t};\r\n\t\t\t\tplayer.markSkill(\"cangshumrfz\");\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tsha: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable(card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num + 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 新霍尔海雅\r\n\t\txinkuangyumrfz: {\r\n\t\t\taudio: \"kuangyumrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCard2\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (get.type(event.card) == \"delay\" || get.type(event.card) == \"equip\") return false;\r\n\t\t\t\treturn game.hasPlayer(function (target) {\r\n\t\t\t\t\tif (event.targets.includes(target)) return false;\r\n\t\t\t\t\tif (!player.canUse(event.card, target)) return false;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tif (event.result) event.result = {};\r\n\t\t\t\tevent.result = await player\r\n\t\t\t\t\t.chooseTarget(get.prompt2(\"xinkuangyumrfz\"), [1, Infinity], function (card, player, target) {\r\n\t\t\t\t\t\tvar cardx = _status.event.cardx;\r\n\t\t\t\t\t\tif (!player.canUse(cardx, target)) return false;\r\n\t\t\t\t\t\tvar targets = _status.event.targets.slice(0).concat(ui.selected.targets);\r\n\t\t\t\t\t\tif (targets.includes(target)) return false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"promptbar\", \"none\")\r\n\t\t\t\t\t.set(\"cardx\", trigger.card)\r\n\t\t\t\t\t.set(\"targets\", trigger.targets)\r\n\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\treturn get.effect(target, _status.event.cardx, player, player);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst targets = event.targets;\r\n\t\t\t\tif (!player.storage.xinkuangyumrfz_trigger) player.storage.xinkuangyumrfz_trigger = [];\r\n\t\t\t\tplayer.storage.xinkuangyumrfz_trigger.add(trigger.card);\r\n\t\t\t\ttrigger.targets.addArray(targets);\r\n\t\t\t\tplayer.addTempSkill(\"xinkuangyumrfz_trigger\");\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\ttrigger: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"shaMiss\", \"eventNeutralized\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn player.storage.xinkuangyumrfz_trigger && player.storage.xinkuangyumrfz_trigger.includes(event.card);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\ttrigger.getParent().excluded.addArray(trigger.getParent().targets);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgroup: \"xinkuangyumrfz_remove\",\r\n\t\t\t\t},\r\n\t\t\t\tremove: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"useCardAfter\", \"useCardCancelled\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.storage.xinkuangyumrfz_trigger && player.storage.xinkuangyumrfz_trigger.includes(event.card);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.xinkuangyumrfz_trigger.remove(trigger.card);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txinchuanzhongmrfz: {\r\n\t\t\taudio: \"chuangzhongmrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseZhunbeiBegin\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.storage.xinchuanzhongmrfz_mark && player.storage.xinchuanzhongmrfz_mark.length > 0;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet nums = player.storage.xinchuanzhongmrfz_mark.length;\r\n\t\t\t\tconst indexs = [];\r\n\t\t\t\twhile (nums > 0) {\r\n\t\t\t\t\tlet list = Array.from({ length: nums + 1 }, (_, index) => index);\r\n\t\t\t\t\tlet prompt = `请为%%%选择一个自然数`;\r\n\t\t\t\t\tif (indexs.length == 0) prompt = prompt.replace(\"%%%\", \"X(摸牌数)\");\r\n\t\t\t\t\telse if (indexs.length == 1) prompt = prompt.replace(\"%%%\", \"Y(额外使用杀)\");\r\n\t\t\t\t\telse if (indexs.length == 2) prompt = prompt.replace(\"%%%\", \"Z(计算与其他角色的距离)\");\r\n\t\t\t\t\tconst { result } = await player\r\n\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t.set(\"prompt\", prompt)\r\n\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\tlet player = get.player(),\r\n\t\t\t\t\t\t\t\tnums = get.event().nums,\r\n\t\t\t\t\t\t\t\tindexs = get.event().indexs;\r\n\t\t\t\t\t\t\tswitch (indexs.length) {\r\n\t\t\t\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\t\t\t\treturn player.countCards(\"hs\", card => get.tag(card, \"damage\") > 0 || get.type(card) == \"trick\") > 1 ? 0 : nums;\r\n\t\t\t\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\t\t\t\treturn player.countCards(\"e\", \"sha\") > 1 ? 1 : 0;\r\n\t\t\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\t\t\treturn game.hasPlayer(current => get.attitude2(current) < 0) ? 0 : nums;\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\treturn nums;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"nums\", nums)\r\n\t\t\t\t\t\t.set(\"indexs\", indexs);\r\n\t\t\t\t\tnums -= result.index;\r\n\t\t\t\t\tindexs.push(result.index);\r\n\t\t\t\t}\r\n\t\t\t\tif (indexs[0] && indexs[0] > 0) player.draw(indexs[0]);\r\n\t\t\t\tif (indexs[1] && indexs[1] > 0) player.addMark(\"xinchuanzhongmrfz_sha\", indexs[1], false);\r\n\t\t\t\tif (indexs[2] && indexs[2] > 0) player.addMark(\"xinchuanzhongmrfz_distance\", indexs[2], false);\r\n\t\t\t\tplayer.addTempSkill(\"xinchuanzhongmrfz_sha\", { player: \"phaseEnd\" });\r\n\t\t\t\tplayer.addTempSkill(\"xinchuanzhongmrfz_distance\", { player: \"phaseEnd\" });\r\n\t\t\t},\r\n\t\t\tgroup: \"xinchuanzhongmrfz_mark\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdistance: {\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tglobalFrom(from, to, distance) {\r\n\t\t\t\t\t\t\treturn distance - from.countMark(\"xinchuanzhongmrfz_distance\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tsha: {\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable(card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num + player.countMark(\"xinchuanzhongmrfz_sha\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tmark: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"phaseEnd\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.xinchuanzhongmrfz_mark = [];\r\n\t\t\t\t\t\tplayer.getHistory(\"useCard\", function (evt) {\r\n\t\t\t\t\t\t\tplayer.storage.xinchuanzhongmrfz_mark.add(get.type2(evt.card));\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//异格推王 维娜维多利亚\r\n\t\tzhongyuanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn Object.keys(window.whichWaySave.weinaData.HMS).filter(i => !player.hasSkill(i)).length > 0;\r\n\t\t\t},\r\n\t\t\tfrequent: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst data = window.whichWaySave.weinaData;\r\n\t\t\t\tlet tmp = {\r\n\t\t\t\t\ttriggers: Object.keys(data.trigger.get().translation).randomGets(3),\r\n\t\t\t\t\tfilter: Object.keys(data.filter).randomGets(3),\r\n\t\t\t\t\tcontent: Object.keys(data.content.get()).randomGets(3),\r\n\t\t\t\t};\r\n\t\t\t\tlet random = {\r\n\t\t\t\t\tnum: data.x[Object.keys(data.x).randomGet()],\r\n\t\t\t\t\tphase: data.getPhase(),\r\n\t\t\t\t\tname: data.getName(),\r\n\t\t\t\t};\r\n\t\t\t\tlet info = { ...data.getInfo(data, null, {}, random), ...data.trigger.get().translation };\r\n\t\t\t\tlet result = {};\r\n\t\t\t\tfor (let i of Object.keys(tmp)) {\r\n\t\t\t\t\tlet values = tmp[i];\r\n\t\t\t\t\tconst { index } = await player\r\n\t\t\t\t\t\t.chooseControl()\r\n\t\t\t\t\t\t.set(\"choiceList\", [...values.map(i => info[i])])\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tlet key = values[index];\r\n\t\t\t\t\tresult[i] = {\r\n\t\t\t\t\t\ttrans: info[key],\r\n\t\t\t\t\t\teffect: data.findKey(i, key),\r\n\t\t\t\t\t\tkey: key,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tlet skillname = Object.keys(data.HMS)\r\n\t\t\t\t\t.filter(i => !player.hasSkill(i))\r\n\t\t\t\t\t.randomGet();\r\n\t\t\t\tlib.translate[skillname] = data.HMS[skillname];\r\n\t\t\t\tlib.translate[skillname + \"_info\"] =\r\n\t\t\t\t\t\"每回合限一次，\" + result.triggers.trans + \",若\" + result.filter.trans + \",你可以\" + result.content.trans;\r\n\r\n\t\t\t\tif (!_status.weinaData) _status.weinaData = {};\r\n\t\t\t\t_status.weinaData[skillname] = {\r\n\t\t\t\t\tresult: result,\r\n\t\t\t\t\tdata: data,\r\n\t\t\t\t\trandom: random,\r\n\t\t\t\t\ttmp: tmp,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tlib.skill[skillname] = {\r\n\t\t\t\t\tonremove(player, skill) {\r\n\t\t\t\t\t\tdelete _status.weinaData[skill];\r\n\t\t\t\t\t},\r\n\t\t\t\t\tusable: 1,\r\n\t\t\t\t\ttrigger: { player: Object.keys(result.triggers.effect[0])[0] },\r\n\t\t\t\t\tweinaName: skillname,\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tlet name = this.weinaName;\r\n\t\t\t\t\t\tlet filter = _status.weinaData[name].data.findKey(\r\n\t\t\t\t\t\t\t_status.weinaData[name].result.filter,\r\n\t\t\t\t\t\t\tObject.keys(_status.weinaData[name].tmp)[1]\r\n\t\t\t\t\t\t)[0].filter;\r\n\t\t\t\t\t\treturn filter(event, player, name);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet name = event.name;\r\n\t\t\t\t\t\tlet contents = _status.weinaData[name].data.findKey(\r\n\t\t\t\t\t\t\t_status.weinaData[name].result.content,\r\n\t\t\t\t\t\t\t_status.weinaData[name].result.content.key\r\n\t\t\t\t\t\t)[0][_status.weinaData[name].result.content.key].content;\r\n\t\t\t\t\t\tvar next = game.createEvent(\"weinaNext\");\r\n\t\t\t\t\t\tnext.player = player;\r\n\t\t\t\t\t\tnext.name = name;\r\n\t\t\t\t\t\tnext.weinaData = {\r\n\t\t\t\t\t\t\tnum: _status.weinaData[name].random.num.num(event, player),\r\n\t\t\t\t\t\t\tname: _status.weinaData[name].random.name,\r\n\t\t\t\t\t\t\tphase: _status.weinaData[name].random.phase,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tnext.setContent(contents);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tthreaten: 0.8,\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t\tplayer.addSkill(skillname);\r\n\t\t\t},\r\n\t\t},\r\n\t\tfutumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCard\",\r\n\t\t\t},\r\n\t\t\tgetSkillsTrigger(target) {\r\n\t\t\t\tlet skills = target.getSkills(null, false, false).filter(skill => {\r\n\t\t\t\t\tvar info = get.info(skill);\r\n\t\t\t\t\tif (get.skillInfoTranslation(skill, target).length == 0) return false;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t});\r\n\t\t\t\tlet triggers = [];\r\n\t\t\t\tlet suffixes = [\"Begin\", \"End\", \"After\", \"Start\", \"Before\"];\r\n\t\t\t\tfor (let skill of skills) {\r\n\t\t\t\t\tlet trigger = get.info(skill).trigger;\r\n\t\t\t\t\tfor (let key in trigger) {\r\n\t\t\t\t\t\tif (!Array.isArray(trigger[key])) {\r\n\t\t\t\t\t\t\tfor (let suffix of suffixes) {\r\n\t\t\t\t\t\t\t\tif (trigger[key].includes(suffix)) triggers.add(trigger[key].replace(suffix, \"\"));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t\ttriggers.addArray(\r\n\t\t\t\t\t\t\t\ttrigger[key].map(i => {\r\n\t\t\t\t\t\t\t\t\tfor (let suffix of suffixes) {\r\n\t\t\t\t\t\t\t\t\t\ti = i.replace(suffix, \"\");\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn triggers;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tevent.card &&\r\n\t\t\t\t\t(get.type(event.card) == \"trick\" ||\r\n\t\t\t\t\t\t(get.type(event.card) == \"basic\" && ![\"shan\", \"tao\", \"jiu\", \"du\"].includes(event.card.name))) &&\r\n\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tcurrent != player &&\r\n\t\t\t\t\t\t\tlib.skill.futumrfz.getSkillsTrigger(current).some(i => lib.skill.futumrfz.getSkillsTrigger(player).includes(i))\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tcurrent != player &&\r\n\t\t\t\t\t\t\tlib.skill.futumrfz.getSkillsTrigger(current).some(i => lib.skill.futumrfz.getSkillsTrigger(player).includes(i))\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\twangximrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"damageBegin3\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.player === player || get.distance(player, event.player) < 2;\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tlet skillList = player.getSkills(null, false, false).filter(skill => {\r\n\t\t\t\t\tlet info = get.info(skill);\r\n\t\t\t\t\tif (get.skillInfoTranslation(skill, player).length === 0 || !info || info.charlotte) return false;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t});\r\n\t\t\t\tevent.result = await player\r\n\t\t\t\t\t.chooseControl(skillList, \"cancel2\")\r\n\t\t\t\t\t.set(\r\n\t\t\t\t\t\t\"prompt\",\r\n\t\t\t\t\t\t`你可以失去一个技能令此伤害对${trigger.player === player ? \"你\" : get.translation(trigger.player)}无效并令其摸两张牌`\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\tlet event = get.event();\r\n\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\tlet target = get.event().target;\r\n\t\t\t\t\t\tlet skillList = get.event().skillList;\r\n\t\t\t\t\t\tif (get.attitude2(target) < 0) return \"cancel2\";\r\n\t\t\t\t\t\tif (target.hp - event.num < 1)\r\n\t\t\t\t\t\t\treturn skillList.sort((a, b) => {\r\n\t\t\t\t\t\t\t\treturn get.skillthreaten(b) - get.skillthreaten(a);\r\n\t\t\t\t\t\t\t})[0];\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tskillList\r\n\t\t\t\t\t\t\t\t.filter(skill => get.skillthreaten(skill) < 1)\r\n\t\t\t\t\t\t\t\t.sort((a, b) => {\r\n\t\t\t\t\t\t\t\t\treturn get.skillthreaten(b) - get.skillthreaten(a);\r\n\t\t\t\t\t\t\t\t})[0] || \"cancel2\"\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"target\", trigger.player)\r\n\t\t\t\t\t.set(\"skillList\", skillList)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tevent.result.cost_data = event.result.control;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet skill = event.cost_data;\r\n\t\t\t\tgame.log(player, \"失去了\", `#g【${get.translation(skill)}】`);\r\n\t\t\t\tplayer.removeSkill(skill);\r\n\t\t\t\ttrigger.player.draw(2);\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.1,\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 荒芜拉普兰德\r\n\t\tshilangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.storage.phaseHistory;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst phaseHistory = player.storage.phaseHistory;\r\n\t\t\t\tif (lib.phaseName.isSubset(Object.keys(phaseHistory))) player.draw();\r\n\t\t\t\telse player.loseHp();\r\n\t\t\t},\r\n\t\t},\r\n\t\ttoulangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: [\"damageEnd\", \"useSkill\", \"logSkillBegin\", \"useCard\", \"respond\"],\r\n\t\t\t},\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tgame.broadcastAll(() => {\r\n\t\t\t\t\tlib.translate[\"visible_toulangmrfz\"] = \"明置\";\r\n\t\t\t\t});\r\n\t\t\t\tplayer.storage[skill] = {\r\n\t\t\t\t\tdamage: false,\r\n\t\t\t\t\tuseSkill: false,\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tforced: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (event.name == \"damage\") {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t!player.storage.toulangmrfz[event.name] &&\r\n\t\t\t\t\t\tevent.player &&\r\n\t\t\t\t\t\tevent.player.isIn() &&\r\n\t\t\t\t\t\tevent.player.countCards(\"h\", card => !get.is.shownCard(card)) > 0\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif ([\"global\", \"equip\"].includes(event.type)) return false;\r\n\t\t\t\t\tlet skill = get.sourceSkillFor(event);\r\n\t\t\t\t\tif (!skill || skill === \"toulangmrfz\") return false;\r\n\t\t\t\t\tlet info = get.info(skill);\r\n\t\t\t\t\twhile (true) {\r\n\t\t\t\t\t\tif (!info || info.charlotte || info.equipSkill) return false;\r\n\t\t\t\t\t\tif (info && !info.sourceSkill) break;\r\n\t\t\t\t\t\tskill = info.sourceSkill;\r\n\t\t\t\t\t\tinfo = get.info(skill);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t!player.storage.toulangmrfz[\"useSkill\"] &&\r\n\t\t\t\t\t\tevent.player &&\r\n\t\t\t\t\t\tevent.player.isIn() &&\r\n\t\t\t\t\t\tevent.player.countCards(\"h\", card => !get.is.shownCard(card)) > 0\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet target = trigger.player;\r\n\t\t\t\tplayer.storage.toulangmrfz[trigger.name === \"damage\" ? trigger.name : \"useSkill\"] = true;\r\n\t\t\t\tconst { cards } = await target\r\n\t\t\t\t\t.chooseCard(true, \"h\", card => !get.is.shownCard(card), [1, 2])\r\n\t\t\t\t\t.set(\"prompt\", `【头狼】:请明置1-2张手牌`)\r\n\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\treturn -get.value(card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\ttarget.addShownCards(cards, \"visible_toulangmrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: \"toulangmrfz_clear\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\tplayer.storage[\"toulangmrfz\"] = {\r\n\t\t\t\t\t\t\tdamage: false,\r\n\t\t\t\t\t\t\tuseSkill: false,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t/** @type { Skill } */\r\n\t\tkuanglangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"chooseToUse\",\r\n\t\t\thiddenCard(player, name) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tget\r\n\t\t\t\t\t\t.inpileVCardList(info => {\r\n\t\t\t\t\t\t\tconst name = info[2];\r\n\t\t\t\t\t\t\treturn get.type(name) === \"basic\" || (get.type(name) === \"trick\" && get.isSingle(name));\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.map(i => i[2])\r\n\t\t\t\t\t\t.includes(name) &&\r\n\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\treturn current.countCards(\"ej\") > 0 || current.countCards(\"h\", card => get.is.shownCard(card)) > 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tonChooseToUse(event) {\r\n\t\t\t\tlet player = get.player();\r\n\t\t\t\tevent.kuanglangmrfz_list = get\r\n\t\t\t\t\t.inpileVCardList(info => {\r\n\t\t\t\t\t\tconst name = info[2];\r\n\t\t\t\t\t\treturn get.type(name) === \"basic\" || (get.type(name) === \"trick\" && get.isSingle(name));\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.filter(card => event.filterCard({ name: card[2], nature: card[3] }, player, event));\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\treturn current.countCards(\"ej\") > 0 || current.countCards(\"h\", card => get.is.shownCard(card)) > 0;\r\n\t\t\t\t\t}) && event.kuanglangmrfz_list.length > 0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\treturn target.countCards(\"ej\") > 0 || target.countCards(\"h\", card => get.is.shownCard(card)) > 0;\r\n\t\t\t},\r\n\t\t\tprompt(event, player) {\r\n\t\t\t\treturn `你可以将场上或明置的牌当作一张基本牌或单一目标的普通锦囊`;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst target = event.targets[0];\r\n\t\t\t\tif (\r\n\t\t\t\t\t!target.countGainableCards(\r\n\t\t\t\t\t\tplayer,\r\n\t\t\t\t\t\t\"hej\",\r\n\t\t\t\t\t\tcard => get.is.shownCard(card) || get.position(card) === \"e\" || get.position(card) === \"j\"\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tconst { links: links2 } = await player\r\n\t\t\t\t\t.choosePlayerCard(\"hej\", target, true)\r\n\t\t\t\t\t.set(\"filterButton\", button => {\r\n\t\t\t\t\t\treturn get.position(button.link) === \"e\" || get.position(button.link) === \"j\" || get.is.shownCard(button.link);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"target\", target)\r\n\t\t\t\t\t.set(\"complexSelect\", false)\r\n\t\t\t\t\t.set(\"ai\", lib.card.shunshou.ai.button)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tconst list = event.getParent(2)?.kuanglangmrfz_list;\r\n\t\t\t\tconst { links } = await player\r\n\t\t\t\t\t.chooseButton([\"狂狼\", [list, \"vcard\"]], true)\r\n\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\treturn get.event().player.getUseValue({\r\n\t\t\t\t\t\t\tname: button.link[2],\r\n\t\t\t\t\t\t\tnature: button.link[3],\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\tconst evt = event.getParent(2);\r\n\r\n\t\t\t\tif (!links || !evt) return;\r\n\r\n\t\t\t\tlet name = links[0][2],\r\n\t\t\t\t\tnature = links[0][3];\r\n\t\t\t\tgame.broadcastAll(\r\n\t\t\t\t\tfunction (result, name, nature) {\r\n\t\t\t\t\t\tlib.skill.kuanglangmrfz_backup.viewAs = {\r\n\t\t\t\t\t\t\tname: name,\r\n\t\t\t\t\t\t\tnature: nature,\r\n\t\t\t\t\t\t\tcards: result,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tlib.skill.kuanglangmrfz_backup.prompt = \"选择\" + get.translation(name) + \"（\" + get.translation(result) + \"）的目标\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlinks2,\r\n\t\t\t\t\tname,\r\n\t\t\t\t\tnature\r\n\t\t\t\t);\r\n\t\t\t\tevt.set(\"_backupevent\", \"kuanglangmrfz_backup\");\r\n\t\t\t\tevt.backup(\"kuanglangmrfz_backup\");\r\n\t\t\t\tevt.set(\"openskilldialog\", \"选择\" + get.translation(name) + \"（\" + get.translation(links2) + \"）的目标\");\r\n\t\t\t\tevt.set(\"norestore\", true);\r\n\t\t\t\tevt.set(\"custom\", {\r\n\t\t\t\t\tadd: {},\r\n\t\t\t\t\treplace: { window() {} },\r\n\t\t\t\t});\r\n\t\t\t\tevt.goto(0);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 2,\r\n\t\t\t\torder: 6,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer(player, target) {\r\n\t\t\t\t\t\tlet val = 1,\r\n\t\t\t\t\t\t\tatt = get.attitude(player, target);\r\n\t\t\t\t\t\tif (player.countCards(\"j\") > 0 && target === player) return 114514;\r\n\t\t\t\t\t\tif (att > 0 && target.countCards(\"j\") > 0) val += 5;\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tatt <= 0 &&\r\n\t\t\t\t\t\t\ttarget.countCards(\"j\") > 0 &&\r\n\t\t\t\t\t\t\ttarget.countCards(\"e\") < 1 &&\r\n\t\t\t\t\t\t\ttarget.countCards(\"h\", card => get.is.shownCard(card)) < 1\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\tval -= 5;\r\n\t\t\t\t\t\tif (att > 0) val -= 0.5;\r\n\t\t\t\t\t\tif (att <= 0) val += 1;\r\n\t\t\t\t\t\tif (target === player) val -= 0.9;\r\n\t\t\t\t\t\treturn val;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tkuanglangmrfz_backup: {\r\n\t\t\tsourceSkill: \"kuanglangmrfz\",\r\n\t\t\tasync precontent(event, trigger, player) {\r\n\t\t\t\tdelete event.result.skill;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tvar cards = event.result.card.cards;\r\n\t\t\t\tevent.result.cards = cards;\r\n\t\t\t\tvar owner = get.owner(cards[0]);\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tevent.target = owner;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\towner.$give(cards[0], player, false);\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.popup(event.result.card.name, \"metal\");\r\n\t\t\t\tgame.delayx();\r\n\t\t\t},\r\n\t\t\tfilterCard() {\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tprompt: \"114514\",\r\n\t\t\tselectCard: -1,\r\n\t\t},\r\n\r\n\t\t// 忍冬\r\n\t\tyinhumrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tignoredHandcard: function (card, player) {\r\n\t\t\t\t\tif (card.hasGaintag(\"yinhumrfz\") && get.name(card) === \"sha\") {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcardDiscardable: function (card, player, name) {\r\n\t\t\t\t\tif (name == \"phaseDiscard\" && card.hasGaintag(\"yinhumrfz\") && get.name(card) === \"sha\") return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\tforced: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"连续#个回合没有造成伤害\",\r\n\t\t\t},\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"phaseZhunbeiBegin\", \"phaseEnd\"],\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.name === \"phase\" ? true : player.countMark(\"yinhumrfz\") + 1 > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (trigger.name === \"phase\") {\r\n\t\t\t\t\tif (player.getHistory(\"sourceDamage\").length < 1) player.addMark(\"yinhumrfz\", 1, false);\r\n\t\t\t\t\telse player.removeMark(\"yinhumrfz\", player.countMark(\"yinhumrfz\"), false);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"yinhumrfz\");\r\n\t\t\t\t\tlet num = player.countMark(\"yinhumrfz\") + 1;\r\n\t\t\t\t\tswitch (num) {\r\n\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t\tplayer.addTempSkill(\"yinhumrfz_addcount\", { player: \"phaseZhunbeiBegin\" });\r\n\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\tplayer.addTempSkill(\"reweimu\", { player: \"phaseZhunbeiBegin\" });\r\n\t\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\t\tconst result = await player.draw(num).forResult();\r\n\t\t\t\t\t\t\tif (result.cards) {\r\n\t\t\t\t\t\t\t\tfor (let card of result.cards) {\r\n\t\t\t\t\t\t\t\t\tif (get.name(card) === \"sha\") card.addGaintag(\"yinhumrfz\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\taddcount: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhuixiongmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 2,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tlet count = Object.keys(player.getStat(\"skill\")).includes(\"zhuixiongmrfz\") ? player.getStat(\"skill\").zhuixiongmrfz : 0;\r\n\t\t\t\tif (count > 0 && !player.hasSkill(\"yinhumrfz_addcount\")) return false;\r\n\t\t\t\treturn game.hasPlayer(current => !!player.canUse(\"juedou\", current) && player.inRange(current));\r\n\t\t\t},\r\n\t\t\tfilterTarget(card, target, player) {\r\n\t\t\t\treturn target != player && !!player.canUse(\"juedou\", target) && player.inRange(target);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.useCard({ name: \"juedou\", zhuixiongmrfz: true }, true, event.targets[0]);\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhuixiongmrfz_nowuxie\", \"zhuixiongmrfz_damage\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tnowuxie: {\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCard\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfilter: function (event) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn event.card && event.card.zhuixiongmrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.nowuxie = true;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"damageBegin3\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tlet evt = event.getParent();\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn event.card && event.card.zhuixiongmrfz && evt && [...evt.targetCards, ...evt.playerCards].length > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet evt = trigger.getParent();\r\n\t\t\t\t\t\tif (!evt) return;\r\n\t\t\t\t\t\tlet num = [...evt.targetCards, ...evt.playerCards].length;\r\n\t\t\t\t\t\ttrigger.num += num;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 6,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget(player, target) {\r\n\t\t\t\t\t\tif (get.attitude2(target) > 0) return 0;\r\n\t\t\t\t\t\treturn target.countCards(\"h\", \"sha\") > player.countCards(\"h\", \"sha\") ? 0 : -1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 弑君者\r\n\t\tfengyanmrfz: {\r\n\t\t\tonremove(player) {\r\n\t\t\t\tfor (let i of game.players) {\r\n\t\t\t\t\ti.removeSkill(\"xingxingmrfz\");\r\n\t\t\t\t}\r\n\t\t\t\tgame.broadcastAll(function () {\r\n\t\t\t\t\t// whitherHelm.setBgI();\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tderivation: [\"xingxingmrfz\"],\r\n\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"he\", card => get.type(card) != \"basic\") > 0;\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tevent.result = await player\r\n\t\t\t\t\t.chooseCardTarget({\r\n\t\t\t\t\t\tprompt: \"是否发动【烽烟】？\",\r\n\t\t\t\t\t\tprompt2: \"你可以弃置一张非基本牌并选择至多三名角色，令其获得【行刑】\",\r\n\t\t\t\t\t\tfilterCard(card) {\r\n\t\t\t\t\t\t\treturn get.type(card) != \"basic\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfilterTarget: true,\r\n\t\t\t\t\t\tselectTarget: [1, 3],\r\n\t\t\t\t\t\tposition: \"he\",\r\n\t\t\t\t\t\tai1(card) {\r\n\t\t\t\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tai2(target) {\r\n\t\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\t\treturn get.attitude(player, target) > 0;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tevent.result.cost_data = {\r\n\t\t\t\t\tcards: event.result.cards,\r\n\t\t\t\t\ttargets: event.result.targets,\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { cards, targets } = event.cost_data;\r\n\t\t\t\tawait player.discard(cards);\r\n\t\t\t\tfor (let target of targets) {\r\n\t\t\t\t\ttarget.addSkill(\"xingxingmrfz\");\r\n\t\t\t\t}\r\n\t\t\t\tplayer.addTempSkill(\"fengyanmrfz_expire\", { player: \"phaseUseBegin\" });\r\n\t\t\t\tgame.broadcastAll(function () {\r\n\t\t\t\t\tui.background.setBackgroundImage(\"extension/WhichWay/image/skill/fengyanmrfz.jpg\");\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\texpire: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tonremove(player) {\r\n\t\t\t\t\t\tfor (let i of game.players) {\r\n\t\t\t\t\t\t\ti.removeSkill(\"xingxingmrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgame.broadcastAll(function () {\r\n\t\t\t\t\t\t\t// whitherHelm.setBgI();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txingxingmrfz: {\r\n\t\t\tglobal: \"xingxingmrfz_effect\",\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.player && event.player.isIn() && !event.player.hasSkill(\"xingxingmrfz\");\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseToUse(\r\n\t\t\t\t\t\tfunction (card, player, event) {\r\n\t\t\t\t\t\t\tif (get.name(card) != \"sha\") return false;\r\n\t\t\t\t\t\t\treturn lib.filter.filterCard.apply(this, arguments);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\"【行刑】:是否对\" + get.translation(trigger.player) + \"使用一张杀？\"\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"logSkill\", \"xingxingmrfz\")\r\n\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\tif (target != _status.event.sourcex && !ui.selected.targets.includes(_status.event.sourcex)) return false;\r\n\t\t\t\t\t\treturn lib.filter.targetEnabled.apply(this, arguments);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"sourcex\", trigger.player);\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teffect: {\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"damageBegin3\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn !event.source || !event.source.hasSkill(\"xingxingmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.logSkill(\"xingxingmrfz\");\r\n\t\t\t\t\t\tconst { color } = await player\r\n\t\t\t\t\t\t\t.judge(function (card) {\r\n\t\t\t\t\t\t\t\tvar color = get.color(card);\r\n\t\t\t\t\t\t\t\tif (color == \"black\") return -4;\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (color !== \"black\") trigger.cancel();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tweimingmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\ttargetEnabled(card, player, target) {\r\n\t\t\t\t\tif (!player.getEquip(1) && get.tag(card, \"damage\") && get.type(card) === \"trick\") return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tevent.card &&\r\n\t\t\t\t\t(get.type(event.card) == \"trick\" ||\r\n\t\t\t\t\t\t(get.type(event.card) == \"basic\" && ![\"shan\", \"tao\", \"jiu\", \"du\"].includes(event.card.name))) &&\r\n\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && !current.getEquip(2);\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tcontent() {\r\n\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\treturn current != player && !current.getEquip(2);\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tgroup: [\"weimingmrfz_get\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tget: {\r\n\t\t\t\t\taudio: \"weimingmrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.player &&\r\n\t\t\t\t\t\t\tevent.player.isIn() &&\r\n\t\t\t\t\t\t\tevent.player.countCards(\"he\") > 0 &&\r\n\t\t\t\t\t\t\t!event.player.getEquip(3) &&\r\n\t\t\t\t\t\t\t!event.player.getEquip(4)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst { cards } = await trigger.player\r\n\t\t\t\t\t\t\t.chooseCard(\"he\", true)\r\n\t\t\t\t\t\t\t.set(\"prompt\", `请交给${get.translation(player)}一张牌`)\r\n\t\t\t\t\t\t\t.set(\"ai\", card => -get.value(card))\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (!cards) return;\r\n\t\t\t\t\t\tplayer.gain(cards);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 新风笛\r\n\t\tnewjuntongmrfz: {\r\n\t\t\taudio: \"juntongmrfz\",\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"phaseDrawBegin\", \"useCard\"],\r\n\t\t\t\tglobal: \"roundStart\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (event.name === \"useCard\") {\r\n\t\t\t\t\tconst cards = player.storage.newjuntongmrfz;\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t!cards.includes(get.name(event.card)) &&\r\n\t\t\t\t\t\t(get.type(event.card) === \"basic\" || (get.isSingle(event.card) && get.type(event.card) === \"trick\"))\r\n\t\t\t\t\t);\r\n\t\t\t\t} else return true;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (trigger.name === \"useCard\") {\r\n\t\t\t\t\tplayer.storage.newjuntongmrfz.push(get.name(trigger.card));\r\n\t\t\t\t} else if (trigger.name === \"phaseDraw\") trigger.cancel();\r\n\t\t\t\telse player.draw(3);\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\ttargetInRange: function (card, player, target, now) {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t!player.storage.newjuntongmrfz.includes(get.name(card)) &&\r\n\t\t\t\t\t\t(get.type(card) === \"basic\" || (get.isSingle(card) && get.type(card) === \"trick\"))\r\n\t\t\t\t\t)\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\tselectTarget: function (card, player, range) {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t!player.storage.newjuntongmrfz.includes(get.name(card)) &&\r\n\t\t\t\t\t\trange[1] != -1 &&\r\n\t\t\t\t\t\t(get.type(card) === \"basic\" || (get.isSingle(card) && get.type(card) === \"trick\"))\r\n\t\t\t\t\t)\r\n\t\t\t\t\t\trange[1]++;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tnewpochengmrfz: {\r\n\t\t\taudio: \"pochengmrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCard2\",\r\n\t\t\t\tsource: \"dieAfter\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (event.name === \"useCard\") return get.name(event.card) === \"sha\";\r\n\t\t\t\telse return true;\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tevent.result = {};\r\n\t\t\t\tif (trigger.name === \"useCard\") {\r\n\t\t\t\t\tlet list = [\"额外目标\", \"额外结算\", \"cancel2\"];\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t!game.hasPlayer(current => {\r\n\t\t\t\t\t\t\treturn !!player.canUse(trigger.card, current) && !trigger.targets.includes(current);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t)\r\n\t\t\t\t\t\tlist.remove(\"额外目标\");\r\n\t\t\t\t\tlet prompt = \"【破城】:你可以令此杀额外结算一次或额外指定一个目标\";\r\n\t\t\t\t\tif (!list.includes(\"额外目标\")) prompt.replace(\"或额外指定一个目标\", \"\");\r\n\t\t\t\t\tconst { control } = await player\r\n\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t.set(\"prompt\", prompt)\r\n\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\tlet list = get.event().list,\r\n\t\t\t\t\t\t\t\tcard = get.event().card,\r\n\t\t\t\t\t\t\t\ttargets = get.event().targets,\r\n\t\t\t\t\t\t\t\tplayer = get.player();\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t!list.includes(\"额外目标\") ||\r\n\t\t\t\t\t\t\t\t!game.hasPlayer(current => get.attitude2(current) < 0 && !targets.includes(current) && !!player.canUse(card, current))\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn \"额外结算\";\r\n\t\t\t\t\t\t\tif (targets.some(i => i.hp < 2)) return \"额外结算\";\r\n\t\t\t\t\t\t\treturn Math.random() > 0.5 ? \"额外结算\" : \"额外目标\";\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"list\", list)\r\n\t\t\t\t\t\t.set(\"targets\", trigger.targets)\r\n\t\t\t\t\t\t.set(\"card\", trigger.card)\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (control === \"cancel2\") return (event.result.bool = false);\r\n\t\t\t\t\telse if (control === \"额外结算\")\r\n\t\t\t\t\t\tevent.result = {\r\n\t\t\t\t\t\t\tbool: true,\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tcost_data: control,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tconst { targets } = await player\r\n\t\t\t\t\t\t\t.chooseTarget(true)\r\n\t\t\t\t\t\t\t.set(\"prompt\", `请额外选择一个目标`)\r\n\t\t\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\r\n\t\t\t\t\t\t\t\tlet targets = get.event().targets,\r\n\t\t\t\t\t\t\t\t\tcardx = get.event().cardx;\r\n\t\t\t\t\t\t\t\treturn player != target && player.canUse(cardx, target) && !targets.includes(target);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"ai\", target => get.attitude2(target) < 0)\r\n\t\t\t\t\t\t\t.set(\"targets\", trigger.targets)\r\n\t\t\t\t\t\t\t.set(\"cardx\", trigger.card)\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tevent.result = {\r\n\t\t\t\t\t\t\tbool: true,\r\n\t\t\t\t\t\t\tcost_data: targets,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst { control } = await player\r\n\t\t\t\t\t\t.chooseControl(\"cancel2\")\r\n\t\t\t\t\t\t.set(\"prompt\", `请选择一个选项`)\r\n\t\t\t\t\t\t.set(\"choiceList\", [\"发动一次【军统①】\", \"重置【军统②】\"])\r\n\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\t\treturn player.storage.newjuntongmrfz.length > 4 ? \"选项二\" : \"选项一\";\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tevent.result = {\r\n\t\t\t\t\t\tbool: true,\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tcost_data: control,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (trigger.name === \"useCard\") {\r\n\t\t\t\t\tconsole.log(event.cost_data);\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (event.cost_data === \"额外结算\") trigger.effectCount++;\r\n\t\t\t\t\telse trigger.targets.push(event.cost_data[0]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet control = event.cost_data;\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (control === \"选项一\") {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tlet next = game.createEvent(\"roundStart\", false, { next: [] });\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tawait game.createTrigger(\"roundStart\", \"newjuntongmrfz\", player, next);\r\n\t\t\t\t\t} else player.storage.newjuntongmrfz = [];\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 引星棘刺\r\n\t\txinxiangmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\treturn (num = lib.skill.xinxiangmrfz.getLim(player));\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tmark: true,\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.addMark(skill, 5, false);\r\n\t\t\t},\r\n\t\t\tonremove(player, skill) {\r\n\t\t\t\tdelete player.storage.xinxiangmrfz;\r\n\t\t\t\tdelete player.storage.xinxiangmrfz_tmp;\r\n\t\t\t},\r\n\t\t\tgetLim(player) {\r\n\t\t\t\treturn player.countMark(\"xinxiangmrfz\") + player.countMark(\"xinxiangmrfz_tmp\");\r\n\t\t\t},\r\n\t\t\tintro: {\r\n\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\treturn `当前手牌区上限:${lib.skill.xinxiangmrfz.getLim(player)}<br>临时上限:${player.countMark(\"xinxiangmrfz_tmp\")}`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseEnd\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") < lib.skill.xinxiangmrfz.getLim(player);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.drawTo(lib.skill.xinxiangmrfz.getLim(player));\r\n\t\t\t},\r\n\t\t\tgroup: [\"xinxiangmrfz_lim\", \"xinxiangmrfz_start\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\ttmp: {\r\n\t\t\t\t\tonremove(player, skill) {\r\n\t\t\t\t\t\tdelete player.storage.xinxiangmrfz_tmp;\r\n\t\t\t\t\t\tif (player.countCards(\"h\") > player.countMark(\"xinxiangmrfz\")) {\r\n\t\t\t\t\t\t\tplayer.chooseToDiscard(true, \"【心相】：请弃置超出上限的手牌\").set(\"selectCard\", () => {\r\n\t\t\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\t\t\treturn player.countCards(\"h\") - player.countMark(\"xinxiangmrfz\");\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\tstart: {\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"gameDrawBegin\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn lib.skill.xinxiangmrfz.getLim(player) < event.num;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar me = player;\r\n\t\t\t\t\t\tvar numx = trigger.num;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttrigger.num =\r\n\t\t\t\t\t\t\ttypeof numx == \"function\"\r\n\t\t\t\t\t\t\t\t? function (player) {\r\n\t\t\t\t\t\t\t\t\t\tif (player == me) {\r\n\t\t\t\t\t\t\t\t\t\t\treturn lib.skill.xinxiangmrfz.getLim(player);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\t\treturn numx(player);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t: function (player) {\r\n\t\t\t\t\t\t\t\t\t\tif (player == me) {\r\n\t\t\t\t\t\t\t\t\t\t\treturn lib.skill.xinxiangmrfz.getLim(player);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\treturn numx;\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tlim: {\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"drawBegin\", \"gainBegin\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tconst cards = event.name === \"draw\" ? event.result : event.cards;\r\n\t\t\t\t\t\tconst nums = lib.skill.xinxiangmrfz.getLim(player);\r\n\t\t\t\t\t\treturn player.countCards(\"h\") + cards.length > nums;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst cards = trigger.name === \"draw\" ? trigger.result : trigger.cards;\r\n\t\t\t\t\t\tconst nums = lib.skill.xinxiangmrfz.getLim(player);\r\n\t\t\t\t\t\tif (player.countCards(\"h\") >= nums) {\r\n\t\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconst { links: gaincards } = await player\r\n\t\t\t\t\t\t\t\t.chooseButton([\"心相:请选择你要获得的牌\", cards], true)\r\n\t\t\t\t\t\t\t\t.set(\"ai\", button => get.value(button.link))\r\n\t\t\t\t\t\t\t\t.set(\"selectButton\", () => {\r\n\t\t\t\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\t\t\t\treturn lib.skill.xinxiangmrfz.getLim(player) - player.countCards(\"h\");\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t\t\tif (!gaincards) return;\r\n\t\t\t\t\t\t\tplayer.gain(gaincards, event.name === \"draw\" ? \"draw2\" : \"gain2\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tnogain: true,\r\n\t\t\t\tskillTagFilter: function (player) {\r\n\t\t\t\t\tconsole.log(arguments);\r\n\t\t\t\t\treturn player.countCards(\"h\") >= lib.skill.xinxiangmrfz.getLim(player);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thaijiangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseJieshuBegin\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.countCards(\"h\") > 0 &&\r\n\t\t\t\t\tgame.hasPlayer(current => player.canCompare(current) && current != player && player.inRange(current))\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn get.attitude2(current) < 0 && player.canCompare(current) && current != player && player.inRange(current);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { targets } = await player\r\n\t\t\t\t\t.chooseTarget(true, [1, Infinity])\r\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\r\n\t\t\t\t\t\treturn player.canCompare(target) && player != target && player.inRange(target);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", target => get.attitude2(target) < 0)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (targets && targets.length) {\r\n\t\t\t\t\tplayer.chooseToCompare(targets).callback = function () {\r\n\t\t\t\t\t\tif (event.winner != player) {\r\n\t\t\t\t\t\t\tplayer.chooseToDiscard(true);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tevent.target.damage();\r\n\t\t\t\t\t\t\tplayer.addMark(\"xinxiangmrfz_tmp\", 1, false);\r\n\t\t\t\t\t\t\tplayer.addTempSkill(\"xinxiangmrfz_tmp\", { player: \"phaseJieshuBegin\" });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tfanyangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"你计算与其他角色的距离-#<br>其他角色计算与你的距离+#\",\r\n\t\t\t},\r\n\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0 && event.num > 0;\r\n\t\t\t},\r\n\t\t\tgetIndex(event, player, triggername) {\r\n\t\t\t\treturn event.num;\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tconst { bool } = await player\r\n\t\t\t\t\t.chooseToDiscard(\"he\")\r\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"fanyangmrfz\"))\r\n\t\t\t\t\t.set(\"prompt2\", `你可以弃置一张手牌，然后直到你的回合结束时，[你/其他角色]计算与[其他角色/你]的距离[-1/+1]`)\r\n\t\t\t\t\t.set(\"ai\", card => get.value(card) < 8)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tevent.result = {\r\n\t\t\t\t\tbool: bool,\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.addMark(\"fanyangmrfz\", 1, false);\r\n\t\t\t\tplayer.addTempSkill(\"fanyangmrfz_eff\", { player: \"phaseEnd\" });\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tonremove(player) {\r\n\t\t\t\t\t\tdelete player.storage.fanyangmrfz;\r\n\t\t\t\t\t\tplayer.unmarkSkill(\"fanyangmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tglobalFrom(from, to, distance) {\r\n\t\t\t\t\t\t\treturn distance - from.countMark(\"fanyangmrfz\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tglobalTo(from, to, distance) {\r\n\t\t\t\t\t\t\treturn distance + to.countMark(\"fanyangmrfz\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 余\r\n\t\tzhonglemrfz: {\r\n\t\t\tinit(player) {\r\n\t\t\t\tgame.broadcastAll(() => {\r\n\t\t\t\t\tlib.translate[\"zhonglemrfz_tag\"] = \"判定区\";\r\n\t\t\t\t\tlib.card.wugu.content = async function (event, trigger, player) {\r\n\t\t\t\t\t\tlet result;\r\n\t\t\t\t\t\tconst target = event.target;\r\n\t\t\t\t\t\tconst card = event.card;\r\n\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\tfor (let i = 0; i < ui.dialogs.length; i++) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tif (ui.dialogs[i].videoId === event.preResult) {\r\n\t\t\t\t\t\t\t\tevent.dialog = ui.dialogs[i];\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!event.dialog || event.dialog.buttons.length === 0) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (event.dialog.buttons.length > 1) {\r\n\t\t\t\t\t\t\tlet num = 1;\r\n\t\t\t\t\t\t\tif (card.storage && typeof card.storage.extraChooseNum === \"number\") {\r\n\t\t\t\t\t\t\t\tnum += card.storage.extraChooseNum;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tconst next = target.chooseButton(true);\r\n\t\t\t\t\t\t\tnext.set(\"ai\", button => {\r\n\t\t\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\t\t\tconst btnCard = button.link;\r\n\t\t\t\t\t\t\t\tlet val = get.value(btnCard, aiPlayer);\r\n\t\t\t\t\t\t\t\tif (get.tag(btnCard, \"recover\")) {\r\n\t\t\t\t\t\t\t\t\tval += game.countPlayer(t => {\r\n\t\t\t\t\t\t\t\t\t\treturn t.hp < 2 && get.attitude(aiPlayer, t) > 0 && lib.filter.cardSavable(btnCard, aiPlayer, t);\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\tif (aiPlayer.hp <= 2 && game.checkMod(btnCard, aiPlayer, \"unchanged\", \"cardEnabled2\", aiPlayer)) val *= 2;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn val;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tnext.set(\"selectButton\", num);\r\n\t\t\t\t\t\t\tnext.set(\"dialog\", event.preResult);\r\n\t\t\t\t\t\t\tnext.set(\"closeDialog\", false);\r\n\t\t\t\t\t\t\tnext.set(\"dialogdisplay\", true);\r\n\t\t\t\t\t\t\tresult = await next.forResult();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tevent.directButton = event.dialog.buttons;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 1\r\n\t\t\t\t\t\tconst dialog = event.dialog;\r\n\t\t\t\t\t\tlet cards = [];\r\n\t\t\t\t\t\tif (event.directButton) {\r\n\t\t\t\t\t\t\tcards = event.directButton.map(i => i.link);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfor (const i of dialog.buttons) {\r\n\t\t\t\t\t\t\t\tif (result.links.includes(i.link)) {\r\n\t\t\t\t\t\t\t\t\tcards.push(i.link);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (!cards.length) cards = event.dialog.buttons.map(i => i.link);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet button;\r\n\t\t\t\t\t\tconst buttons = [];\r\n\t\t\t\t\t\tfor (let i = 0; i < dialog.buttons.length; i++) {\r\n\t\t\t\t\t\t\tif (cards.includes(dialog.buttons[i].link)) {\r\n\t\t\t\t\t\t\t\tbutton = dialog.buttons[i];\r\n\t\t\t\t\t\t\t\tbutton.querySelector(\".info\").innerHTML = (t => {\r\n\t\t\t\t\t\t\t\t\tif (t._tempTranslate) return t._tempTranslate;\r\n\t\t\t\t\t\t\t\t\tconst name = t.name;\r\n\t\t\t\t\t\t\t\t\tif (lib.translate[name + \"_ab\"]) return lib.translate[name + \"_ab\"];\r\n\t\t\t\t\t\t\t\t\treturn get.translation(name);\r\n\t\t\t\t\t\t\t\t})(target);\r\n\t\t\t\t\t\t\t\tbuttons.push(button);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdialog.buttons.remove(...buttons);\r\n\t\t\t\t\t\tconst capt = get.translation(target) + \"选择了\" + get.translation(buttons.map(i => i.link));\r\n\t\t\t\t\t\tif (cards && cards.length > 0) {\r\n\t\t\t\t\t\t\tawait target.gain(cards, \"visible\");\r\n\t\t\t\t\t\t\ttarget.$gain2(cards);\r\n\t\t\t\t\t\t\tgame.broadcast(\r\n\t\t\t\t\t\t\t\tfunction (cards, id, name, capt) {\r\n\t\t\t\t\t\t\t\t\tvar dialog = get.idDialog(id);\r\n\t\t\t\t\t\t\t\t\tif (dialog) {\r\n\t\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\t\tdialog.content.firstChild.innerHTML = capt;\r\n\t\t\t\t\t\t\t\t\t\tfor (var i = 0; i < dialog.buttons.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\t\t\tif (cards.includes(dialog.buttons[i].link)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\t\t\t\tdialog.buttons[i].querySelector(\".info\").innerHTML = name;\r\n\t\t\t\t\t\t\t\t\t\t\t\tdialog.buttons.splice(i--, 1);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcards,\r\n\t\t\t\t\t\t\t\tdialog.videoId,\r\n\t\t\t\t\t\t\t\t(t => {\r\n\t\t\t\t\t\t\t\t\tif (t._tempTranslate) return t._tempTranslate;\r\n\t\t\t\t\t\t\t\t\tconst name = t.name;\r\n\t\t\t\t\t\t\t\t\tif (lib.translate[name + \"_ab\"]) return lib.translate[name + \"_ab\"];\r\n\t\t\t\t\t\t\t\t\treturn get.translation(name);\r\n\t\t\t\t\t\t\t\t})(target),\r\n\t\t\t\t\t\t\t\tcapt\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdialog.content.firstChild.innerHTML = capt;\r\n\t\t\t\t\t\tgame.addVideo(\"dialogCapt\", null, [dialog.videoId, dialog.content.firstChild.innerHTML]);\r\n\t\t\t\t\t\tgame.log(\r\n\t\t\t\t\t\t\ttarget,\r\n\t\t\t\t\t\t\t\"选择了\",\r\n\t\t\t\t\t\t\tbuttons.map(i => i.link)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tawait game.delay();\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseZhunbeiBegin\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"j\") > 0 && player.hasUseTarget({ name: \"wugu\" });\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tif (player.isUnderControl(true) && !_status.auto) {\r\n\t\t\t\t\tvar cards = player.getCards(\"j\");\r\n\t\t\t\t\tvar cardsx = cards.map(card => {\r\n\t\t\t\t\t\tvar cardx = ui.create.card();\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tcardx.init(get.cardInfo(card));\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tcardx._cardid = card.cardid;\r\n\t\t\t\t\t\treturn cardx;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tawait player.directgains(cardsx, null, \"zhonglemrfz_tag\");\r\n\t\t\t\t\tconst { result } = await player.chooseCardTarget({\r\n\t\t\t\t\t\tprompt: \"是否要发动【众乐】？\",\r\n\t\t\t\t\t\tprompt2: \"你可以将你判定区内任意牌当作至多指定相同目标数的【五谷丰登】使用\",\r\n\t\t\t\t\t\tfilterCard(card) {\r\n\t\t\t\t\t\t\treturn card.hasGaintag(\"zhonglemrfz_tag\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tselectCard: [1, Infinity],\r\n\t\t\t\t\t\tselectTarget: [1, Infinity],\r\n\t\t\t\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\t\t\t\treturn player.canUse(\"wugu\", target);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfilterOk() {\r\n\t\t\t\t\t\t\treturn ui.selected.targets.length === ui.selected.cards.length;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tposition: \"s\",\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvar cards2 = player.getCards(\"s\", card => card.hasGaintag(\"zhonglemrfz_tag\"));\r\n\t\t\t\t\tif (player.isOnline2()) {\r\n\t\t\t\t\t\tplayer.send(\r\n\t\t\t\t\t\t\tfunction (cards, player) {\r\n\t\t\t\t\t\t\t\tcards.forEach(i => i.delete());\r\n\t\t\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tcards2,\r\n\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcards2.forEach(i => i.delete());\r\n\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\tevent.result = result;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet cards = player.getCards(\"j\");\r\n\t\t\t\t\tlet targets = game.filterPlayer(target => get.attitude(player, target) > 0);\r\n\t\t\t\t\tcards.sort((a, b) => {\r\n\t\t\t\t\t\treturn player.getUseValue(a) - player.getUseValue(b);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (targets.length > cards.length) {\r\n\t\t\t\t\t\ttargets = targets.splice(0, cards.length);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet result = {\r\n\t\t\t\t\t\ttargets: targets,\r\n\t\t\t\t\t\tcards: cards.slice(0, targets.length),\r\n\t\t\t\t\t\tbool: true,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tevent.result = result;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet { targets, cards } = event;\r\n\t\t\t\tif (player.isUnderControl(true) && !_status.auto)\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tcards = cards.map(card => {\r\n\t\t\t\t\t\tlet j = player.getCards(\"j\");\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn j.find(i => i.cardid === card._cardid);\r\n\t\t\t\t\t});\r\n\t\t\t\tconsole.log(cards);\r\n\t\t\t\tawait player.useCard(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"wugu\",\r\n\t\t\t\t\t\tstorage: {\r\n\t\t\t\t\t\t\textraCardsNum: targets.length,\r\n\t\t\t\t\t\t\textraChooseNum: 1,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttargets,\r\n\t\t\t\t\tcards,\r\n\t\t\t\t\tfalse\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\tqizaomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardAfter\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn !player\r\n\t\t\t\t\t.getCards(\"j\")\r\n\t\t\t\t\t.map(i => get.suit(i))\r\n\t\t\t\t\t.includes(get.suit(event.card));\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tawait player.draw();\r\n\t\t\t\tconst { cards } = await player\r\n\t\t\t\t\t.chooseCard(true, \"【起灶】:请蓄谋一次\")\r\n\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\tconst player = get.player();\r\n\t\t\t\t\t\tif (player.hasValueTarget(card)) return player.getUseValue(card);\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"tipText\", true)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.addJudge({ name: \"xumou_jsrg\" }, cards);\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 烛煌 顾烛煌\r\n\t\tchongrangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseBegin\",\r\n\t\t\t\tsource: \"damageEnd\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (event.name == \"damage\") {\r\n\t\t\t\t\tif (event.parent && (event.parent.name == \"_lianhuan\" || event.parent.name == \"_lianhuan2\")) return false;\r\n\t\t\t\t\treturn event.hasNature(\"fire\");\r\n\t\t\t\t}\r\n\t\t\t\treturn player.hujia > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (trigger.name == \"damage\") {\r\n\t\t\t\t\tplayer.changeHujia(1);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tawait player.recover(Math.min(player.hujia, 2));\r\n\t\t\t\t\tplayer.changeHujia(-player.hujia);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhuoyanmrfz: {\r\n\t\t\tinit(player) {\r\n\t\t\t\tlib.skill[\"_lianhuan4\"].content = function () {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (!trigger.getParent().noCharReset) player.link();\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (trigger.getParent().notLink()) trigger.getParent().lianhuanable = true;\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardToPlayer\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (!event.isFirstTarget) return false;\r\n\t\t\t\treturn event.card && get.tag(event.card, \"fireDamage\") && event.targets.some(target => target.isIn() && !target.isLinked());\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.targets.forEach(target => {\r\n\t\t\t\t\tif (target.isIn() && !target.isLinked()) target.link();\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhuoyanmrfz_nolink\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tnolink: {\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tsource: \"damageBegin\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card && event.player.isIn();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.noCharReset = true;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tliaoyuanmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tselectTarget(card, player, range) {\r\n\t\t\t\t\tif (card.storage && card.storage.liaoyuanmrfz && range[1] != -1) range[1] += Math.max(1, player.getDamagedHp());\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = {};\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tprompt(event) {\r\n\t\t\t\tlet player = get.player();\r\n\t\t\t\treturn `流失一点体力并视为使用目标数+${Math.max(1, player.getDamagedHp())}的【火攻】`;\r\n\t\t\t},\r\n\t\t\tviewAs: {\r\n\t\t\t\tname: \"huogong\",\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tstorage: {\r\n\t\t\t\t\tliaoyuanmrfz: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tselectCard: -1,\r\n\t\t\tfilterCard: () => false,\r\n\t\t\tasync precontent(event, trigger, player) {\r\n\t\t\t\tplayer.loseHp();\r\n\t\t\t},\r\n\t\t\tgroup: [\"liaoyuanmrfz_after\", \"liaoyuanmrfz_recorder\", \"liaoyuanmrfz_fire\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\trecorder: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"showCardsEnd\",\r\n\t\t\t\t\t\tplayer: \"useCardAfter\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tif (event.name === \"useCard\") return event.card && event.card.storage.liaoyuanmrfz;\r\n\t\t\t\t\t\tlet evt = event.getParent();\r\n\t\t\t\t\t\treturn event.cards && evt && evt.name === \"huogong\" && evt.card && evt.card.storage && evt.card.storage.liaoyuanmrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (trigger.name === \"useCard\") {\r\n\t\t\t\t\t\t\tdelete player.storage.liaoyuanmrfz[trigger.card.storage.randomId];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlet cards = trigger.cards;\r\n\t\t\t\t\t\t\tlet evt = trigger.getParent();\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tlet id = evt.card.cardid;\r\n\t\t\t\t\t\t\tif (!Array.isArray(player.storage.liaoyuanmrfz[id])) player.storage.liaoyuanmrfz[id] = [];\r\n\t\t\t\t\t\t\tplayer.storage.liaoyuanmrfz[id].push(...cards);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tfire: {\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"damageBegin\" },\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn event.card && event.card.name === \"wanjian\" && event.card.nature === \"fire\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.nature = \"fire\";\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tafter: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tif (!event.card || !event.card.storage || !event.card.storage.liaoyuanmrfz) return false;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tlet damaged = player.getHistory(\"sourceDamage\", evt => evt.card.storage && evt.card.id === event.card.id);\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tlet showCards = (player.storage.liaoyuanmrfz[event.card.id] || []).filter(card => get.position(card) === \"h\");\r\n\t\t\t\t\t\treturn damaged.length > 0 && showCards.length > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tlet showCards = player.storage.liaoyuanmrfz[trigger.card.id].filter(card => get.position(card) === \"h\");\r\n\t\t\t\t\t\tawait player.gain(showCards, \"gain2\");\r\n\t\t\t\t\t\tif (player.isUnderControl(true) && !_status.auto) {\r\n\t\t\t\t\t\t\tconst {\r\n\t\t\t\t\t\t\t\tresult: { targets, cards },\r\n\t\t\t\t\t\t\t} = await player.chooseCardTarget({\r\n\t\t\t\t\t\t\t\tshowCards: showCards,\r\n\t\t\t\t\t\t\t\tprompt: \"【燎原】:你可以将其中任意张牌当作指定等量目标的【火·万箭齐发】使用\",\r\n\t\t\t\t\t\t\t\tprompt2: \"请选择目标和牌\",\r\n\t\t\t\t\t\t\t\tfilterCard(card) {\r\n\t\t\t\t\t\t\t\t\treturn get.event().showCards.includes(card);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tselectCard: [1, Infinity],\r\n\t\t\t\t\t\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\t\t\t\t\t\treturn player.canUse(\"wanjian\", target);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tselectTarget: [1, Infinity],\r\n\t\t\t\t\t\t\t\tfilterOk() {\r\n\t\t\t\t\t\t\t\t\treturn ui.selected.targets.length === ui.selected.cards.length;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif (!(targets && cards)) return;\r\n\t\t\t\t\t\t\tplayer.useCard(\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tname: \"wanjian\",\r\n\t\t\t\t\t\t\t\t\tnature: \"fire\",\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\ttargets,\r\n\t\t\t\t\t\t\t\tcards,\r\n\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlet cards = showCards,\r\n\t\t\t\t\t\t\t\ttargets = game.filterPlayer(i => get.attitude(player, i) < 0);\r\n\t\t\t\t\t\t\tcards.forEach(card => {\r\n\t\t\t\t\t\t\t\tif (get.value(card) >= 8) cards.remove(card);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif (targets.length > cards.length) {\r\n\t\t\t\t\t\t\t\ttargets = targets.slice(0, cards.length);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (!(targets && cards)) return;\r\n\t\t\t\t\t\t\tplayer.useCard(\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tname: \"wanjian\",\r\n\t\t\t\t\t\t\t\t\tnature: \"fire\",\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\ttargets,\r\n\t\t\t\t\t\t\t\tcards.slice(0, targets.length),\r\n\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 9.5,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer(player, target) {\r\n\t\t\t\t\t\tif (player.hp < 3 || player.countCards(\"h\") < 1) return -1;\r\n\t\t\t\t\t\tif (player.getUseValue({ name: \"huogong\" }) <= 0) return -1;\r\n\t\t\t\t\t\treturn 1 + player.countCards(\"h\") * 0.1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 新温蒂\r\n\t\tnewdanpaomrfz: {\r\n\t\t\taudio: \"danpaomrfz\",\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0 && game.hasPlayer(current => current != player && current.countCards(\"hej\") > 0);\r\n\t\t\t},\r\n\t\t\tfilterCard: true,\r\n\t\t\tselectCard: [1, Infinity],\r\n\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\tif (ui.selected.targets.length === 0) return target.countCards(\"hje\") > 0 && target !== player;\r\n\t\t\t\treturn get.distance(ui.selected.targets[0], target) <= ui.selected.cards.length;\r\n\t\t\t},\r\n\t\t\ttargetprompt: [\"被移牌\", \"收到牌\"],\r\n\t\t\tselectTarget: 2,\r\n\t\t\tposition: \"he\",\r\n\t\t\tmultitarget: true,\r\n\t\t\tmultiline: true,\r\n\t\t\tcheck(card) {\r\n\t\t\t\tlet player = get.player();\r\n\t\t\t\tif (\r\n\t\t\t\t\tgame.hasPlayer(current => current != player && get.attitude2(current) > 0 && current.countCards(\"j\") > 0) &&\r\n\t\t\t\t\tui.selected.cards.length > 0\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\tlet getTarget = get.result(\"newdanpaomrfz\").target;\r\n\t\t\t\tlet targets = [];\r\n\t\t\t\tgame.players.forEach(char => {\r\n\t\t\t\t\tif (char !== player && char.countCards(\"hej\") > 0) {\r\n\t\t\t\t\t\ttargets.push([char, getTarget(player, char)]);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tlet target = [undefined, -114514];\r\n\t\t\t\ttargets.forEach(char => {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (char[1] > target[1]) target = [char[0], char[1]];\r\n\t\t\t\t});\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\ttarget = target[0];\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (ui.selected.cards.length >= Math.max(target.countCards(\"h\"), target.countCards(\"e\"))) return false;\r\n\t\t\t\treturn get.value(card, player) < 6;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { targets } = event;\r\n\t\t\t\tconst { links } = await player\r\n\t\t\t\t\t.choosePlayerCard(\"hej\", targets[0], true, [1, event.cards.length])\r\n\t\t\t\t\t.set(\"prompt\", \"请选择你要移动的牌<br>（必须选择同一区域的牌）\")\r\n\t\t\t\t\t.set(\"filterOk\", () => {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn new Set(ui.selected.buttons.map(i => get.position(i.link))).size === 1;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\tlet target = get.event().targets[0];\r\n\t\t\t\t\t\tlet cards = get.event().cards;\r\n\t\t\t\t\t\tif (get.attitude2(target) > 0 && target.countCards(\"j\") > 0) return target.getCards(\"j\").includes(button.link);\r\n\r\n\t\t\t\t\t\tlet h = target.getCards(\"h\");\r\n\t\t\t\t\t\tlet e = target.getCards(\"e\");\r\n\r\n\t\t\t\t\t\tlet sort = [h, e, cards].sort((a, b) => {\r\n\t\t\t\t\t\t\treturn b.length - a.length;\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tsort.forEach((arr, index) => {\r\n\t\t\t\t\t\t\tif (cards.some(i => arr.includes(i))) delete sort[index];\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tsort = sort.filter(arr => arr.length > 0);\r\n\r\n\t\t\t\t\t\treturn sort[0].includes(button.link) ? get.value(button.link, get.player()) + 10 : 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"targets\", targets)\r\n\t\t\t\t\t.set(\"cards\", event.cards)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!links) return;\r\n\t\t\t\tswitch (get.position(links[0])) {\r\n\t\t\t\t\tcase \"h\":\r\n\t\t\t\t\t\ttargets[1].gain(links);\r\n\t\t\t\t\t\ttargets[0].$give(links.length, targets[1]);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"e\":\r\n\t\t\t\t\t\tfor (let card of links) {\r\n\t\t\t\t\t\t\tif (targets[1].canEquip(card)) {\r\n\t\t\t\t\t\t\t\ttargets[1].equip(card);\r\n\t\t\t\t\t\t\t\ttargets[0].$give(card, targets[1]);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttargets[0].discard(card);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"j\":\r\n\t\t\t\t\t\tfor (let card of links) {\r\n\t\t\t\t\t\t\tif (!card.cards?.length) targets[0].removeVirtualJudge(card);\r\n\t\t\t\t\t\t\ttargets[1].addJudge(card, card?.cards);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 8,\r\n\t\t\t\tthreaten: 1.5,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget(player, target) {\r\n\t\t\t\t\t\tlet att = get.attitude(player, target);\r\n\t\t\t\t\t\tif (ui.selected.targets.length === 0) {\r\n\t\t\t\t\t\t\tif (target.countCards(\"j\") > 0 && att > 0) return 100;\r\n\t\t\t\t\t\t\treturn att - target.countCards(\"hej\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlet last = ui.selected.targets[0];\r\n\t\t\t\t\t\t\tif (last.countCards(\"j\") > 0 && att > 0) return -1;\r\n\t\t\t\t\t\t\treturn att > 0 ? 1 : 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tjiangpaomrfz: {\r\n\t\t\taudio: \"shuipaomrfz\",\r\n\t\t\tfrequent: true,\r\n\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn !event.numFixed;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.num += [\"h\", \"e\", \"j\"].filter(pos => player.countCards(pos) > 0).length;\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.5,\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n};\r\n"],"names":["event","trigger","player","result","target","skills","i","targets","cards","card","nums","indexs","skillList","name","nature","color","list","button","capt","dialog"],"mappings":"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"}