{"version":3,"file":"epic1.js","sources":["../../../../../../../../packages/extension/WhichWay/src/character/packs/epic/epic1.js"],"sourcesContent":["import { lib, game, ui, get, ai, _status } from \"noname\";\r\n\r\n/**\r\n * 五星武将的第一部分\r\n */\r\n/**\r\n * @type { WhichWayCharacterPack }\r\n */\r\nexport default {\r\n\tcharacter: {\r\n\t\tfulankamrfz: [\"female\", \"gemrfz\", 3, [\"jifengmrfz\", \"xiqiaomrfz\"], []],\r\n\t\txingjimrfz: [\"female\", \"gemrfz\", 4, [\"tianyimrfz\", \"huijianmrfz\", \"bingmingmrfz\"], []],\r\n\t\txingyuanmrfz: [\"female\", \"lymrfz\", 4, [\"daoliumrfz\", \"gewumrfz\"], []],\r\n\t\tzhanchemrfz: [\"male\", \"othermrfz\", \"4/4/2\", [\"jiqiangmrfz\", \"qingxiemrfz\"], []],\r\n\t\tshanjimrfz: [\"male\", \"othermrfz\", 4, [\"shandunmrfz\", \"xuanmumrfz\", \"chuandunmrfz\"], []],\r\n\t\tshuanghuamrfz: [\"female\", \"othermrfz\", 3, [\"tadianmrfz\", \"xinjimrfz\"], []],\r\n\t\tbohuimrfz: [\"female\", \"samimrfz\", 4, [\"shehunmrfz\", \"yirenmrfz\"], []],\r\n\t\tbaimianxiaomrfz: [\"female\", \"lymrfz\", 3, [\"jinaomrfz\", \"wutaimrfz\"], []],\r\n\t\tcimeimrfz: [\"female\", \"weimrfz\", 3, [\"huabumrfz\", \"shixinmrfz\"], []],\r\n\t\thongmrfz: [\"female\", \"luomrfz\", 4, [\"qunlangmrfz\", \"cigumrfz\", \"qingchumrfz\"], [\"hiddenSkill\"]],\r\n\t\tdekesasimrfz: [\"female\", \"qimrfz\", 4, [\"sudimrfz\", \"jianyumrfz\"], []],\r\n\t\tbaijinmrfz: [\"female\", \"kamrfz\", 3, [\"xujimrfz\", \"shiyumrfz\"], []],\r\n\t\tyintuoluomrfz: [\"female\", \"weimrfz\", 4, [\"suijiamrfz\", \"huquanmrfz\"], []],\r\n\t\twenmimrfz: [\"female\", \"leimrfz\", 3, [\"baiweimrfz\", \"nuanxiangmrfz\"], []],\r\n\t\tmeiermrfz: [\"female\", \"lymrfz\", 3, [\"shuitamrfz\"], []],\r\n\t\tlindongmrfz: [\"female\", \"wumrfz\", 4, [\"xianlingmrfz\", \"dongjiangmrfz\"], []],\r\n\t\tyunxingmrfz: [\"female\", \"luomrfz\", 4, [\"yxliumingmrfz\", \"dingyuanmrfz\"], []],\r\n\t\tyumaobimrfz: [\"female\", \"bomrfz\", 4, [\"tiaojiumrfz\", \"rujingmrfz\"], []],\r\n\t\tailisimrfz: [\"female\", \"weimrfz\", 3, [\"rumianmrfz\", \"alsmengxiangmrfz\"], []],\r\n\t\ttianhuomrfz: [\"female\", \"weimrfz\", 3, [\"zhuihuomrfz\", \"yihuomrfz\"], []],\r\n\t\tlinguangmrfz: [\"female\", \"shimrfz\", \"3/4/3\", [\"anranmrfz\", \"huchimrfz\", \"chongyaomrfz\"], []],\r\n\t\thaimomrfz: [\"female\", \"yimrfz\", 4, [\"xunchaomrfz\", \"paoyingmrfz\"], []],\r\n\t\txiaomanmrfz: [\"female\", \"yanmrfz\", 4, [\"mushoumrfz\"], []],\r\n\t\twanqingmrfz: [\"male\", \"yanmrfz\", 4, [\"guantianmrfz\", \"yingfengmrfz\"], []],\r\n\t\tgelaokesimrfz: [\"female\", \"yimrfz\", 4, [\"cichongmrfz\", \"ganraomrfz\"], []],\r\n\t\thaidimrfz: [\"female\", \"weimrfz\", 3, [\"anxinmrfz\", \"gongchoumrfz\", \"yinshimrfz\"], []],\r\n\t\tyaxinmrfz: [\"female\", \"xiemrfz\", 4, [\"lingdingmrfz\", \"yabengmrfz\"], []],\r\n\t\tchuxuemrfz: [\"female\", \"xiemrfz\", 3, [\"shengnvmrfz\", \"shenshemrfz\"], []],\r\n\t\tshixiemrfz: [\"female\", \"samrfz\", 3, [\"qianzongmrfz\", \"xiedumrfz\", \"lijimrfz\"], [\"hiddenSkill\"]],\r\n\t\thongsunmrfz: [\"female\", \"samrfz\", 4, [\"chihenmrfz\", \"haomingmrfz\"], []],\r\n\t\txiyinmrfz: [\"female\", \"samrfz\", 3, [\"sheyingmrfz\", \"chaozaimrfz\"], []],\r\n\t\tyemomrfz: [\"female\", \"weimrfz\", 3, [\"biaolimrfz\", \"ymkongwomrfz\"], []],\r\n\t\tjingzhemrfz: [\"female\", \"yanmrfz\", 3, [\"chunleimrfz\", \"zheqimrfz\"], []],\r\n\t\tlongshelanmrfz: [\"male\", \"bomrfz\", 4, [\"tiaojiumrfz\", \"pianfengmrfz\"], []],\r\n\t\tspamiyamrfz: [\"female\", \"luomrfz\", 4, [\"chenxianmrfz\", \"benyemrfz\", \"newjueyingmrfz\"], []],\r\n\t\tamiyamrfz: [\"female\", \"luomrfz\", 3, [\"newtongganmrfz\", \"shijiemrfz\", \"qinghemrfz\"], [\"zhu\"]],\r\n\t\tdocmrfz: [\"male\", \"othermrfz\", 4, [\"yizhemrfz\", \"zhulimrfz\"], []],\r\n\t\t// innamrfz: ['female', 'othermrfz', 4, ['shuangzimrfz'], []],\r\n\t\tlinshimrfz: [\"female\", \"samimrfz\", 3, [\"jiangtumrfz\", \"jieshimrfz\"], []],\r\n\t\tmedical_amiyamrfz: [\"female\", \"luomrfz\", 3, [\"tongqingmrfz\", \"cibeimrfz\"], []],\r\n\t\tspfenmrfz: [\"female\", \"luomrfz\", 4, [\"xiaozhimrfz\", \"zhishoumrfz\"], []],\r\n\t\thainimrfz: [\"female\", \"a_groupmrfz\", 3, [\"jingchaomrfz\", \"cehuimrfz\"], []],\r\n\t\tshenxunmrfz: [\"female\", \"a_groupmrfz\", 5, [\"yuchaomrfz\", \"yanhuimrfz\"], []],\r\n\t\tmingjiaomrfz: [\"female\", \"luomrfz\", 3, [\"suozemrfz\", \"youyimrfz\"], []],\r\n\t\tdaifeienmrfz: [\"female\", \"weimrfz\", 3, [\"zhuofengmrfz\", \"qianggongmrfz\"], []],\r\n\t\txirenmrfz: [\"male\", \"gemrfz\", 4, [\"suximrfz\", \"sanzhongmrfz\"], []],\r\n\t\tsuocaomrfz: [\"female\", \"samrfz\", 3, [\"lanjuanmrfz\", \"xinglumrfz\"], []],\r\n\t\tlaiousimrfz: [\"male\", \"othermrfz\", 4, [\"shijianmrfz\", \"shimomrfz\"], []],\r\n\t\tsenximrfz: [\"male\", \"othermrfz\", 4, [\"micaimrfz\", \"beicaimrfz\", \"pengcaimrfz\"], []],\r\n\t\tqierchakemrfz: [\"male\", \"othermrfz\", 3, [\"tangongmrfz\", \"ruiganmrfz\"], []],\r\n\t\tkaiselinmrfz: [\"female\", \"weimrfz\", 3, [\"ksl_zhuzhimrfz\", \"duantiemrfz\"], []],\r\n\t\tbobumrfz: [\"male\", \"gemrfz\", 4, [\"qingtingmrfz\", \"qingtanmrfz\"], []],\r\n\t\tfeilaimrfz: [\"female\", \"samrfz\", 5, [\"qianxiumrfz\", \"mingzhoumrfz\"], []],\r\n\t\tcaidumrfz: [\"male\", \"xumrfz\", 4, [\"caiyimrfz\", \"mingjiangmrfz\"], []],\r\n\t\ttekenuomrfz: [\"female\", \"bomrfz\", 4, [\"suoumrfz\"], []],\r\n\t\tguiyanmrfz: [\"female\", \"yimrfz\", 3, [\"qiyimrfz\", \"guiyaomrfz\", \"xiadumrfz\"], []],\r\n\t\txingzhumrfz: [\"female\", \"yanmrfz\", 3, [\"xingzhumrfz\", \"zhizhumrfz\"], []],\r\n\t\txunlanmrfz: [\"female\", \"gemrfz\", 4, [\"tanxunmrfz\", \"dongximrfz\"], []],\r\n\t\tnuoweiermrfz: [\"male\", \"weimrfz\", 3, [\"butingmrfz\", \"buximrfz\"], []],\r\n\t\tspfurongmrfz: [\"female\", \"luomrfz\", 3, [\"dichenmrfz\", \"zhuoxinmrfz\"], []],\r\n\t\tanzhelamrfz: [\"female\", \"liemrfz\", 3, [\"jianmomrfz\", \"zhishemrfz\", \"ruijuemrfz\", \"tongmaimrfz\"], [\"clan:深海猎人\"]],\r\n\r\n\t\t//————测试————//\r\n\t\t//ceshisjzx:['female','shen',5,['diymengxian','diyfujing','diyhesheng'],[]],\r\n\t},\r\n\tskill: {\r\n\t\t// 安哲拉\r\n\t\tzhishemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0 && game.hasPlayer(current => current.countCards(\"h\") > 0 && current !== player);\r\n\t\t\t},\r\n\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\treturn target !== player && target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tfilterCard: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { targets, cards } = event;\r\n\t\t\t\tlet target = targets[0];\r\n\t\t\t\tconst { cards: card2 } = await player\r\n\t\t\t\t\t.discardPlayerCard(\"h\", target, true)\r\n\t\t\t\t\t.set(\"target\", target)\r\n\t\t\t\t\t.set(\"complexSelect\", false)\r\n\t\t\t\t\t.set(\"ai\", lib.card.guohe.ai.button)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (card2) player.draw(new Set([].concat(cards, card2).map(i => get.type2(i, player))).size);\r\n\t\t\t\telse player.draw();\r\n\t\t\t\tif (target.countCards(\"h\") === 0 && card2) player.getStat(\"skill\").zhishemrfz = 0;\r\n\t\t\t},\r\n\t\t},\r\n\t\tjianmomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tmod: {\r\n\t\t\t\ttargetEnabled(card) {\r\n\t\t\t\t\tif (get.type(card) == \"trick\" || get.type(card) == \"delay\") return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfirstDo: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (event.player == player) return false;\r\n\t\t\t\tif (get.color(event.card) != \"black\" || get.type(event.card) != \"trick\") return false;\r\n\t\t\t\tvar info = lib.card[event.card.name];\r\n\t\t\t\treturn info && info.selectTarget && info.selectTarget == -1 && !info.toself;\r\n\t\t\t},\r\n\t\t\tasync content(event,trigger,player) {},\r\n\t\t},\r\n\t\truijuemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"loseAfter\", \"gainAfter\"],\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (player.countCards(\"he\") < 1) return false;\r\n\t\t\t\tif (event.name === \"lose\") return event.type === \"discard\" && event.getl(player).cards2.length > 0;\r\n\t\t\t\telse {\r\n\t\t\t\t\tconst evt = event.getParent(\"phaseDraw\");\r\n\t\t\t\t\tif (evt?.player == player) return false;\r\n\t\t\t\t\treturn event.getg(player).length > 0 && player.getCards(\"h\").some(card => player.hasUseTarget(card, false));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tif (trigger.name === \"lose\") {\r\n\t\t\t\t\tevent.result = await player\r\n\t\t\t\t\t\t.chooseCard(\"he\", [1, player.countCards(\"he\")])\r\n\t\t\t\t\t\t.set(\"prompt\", `【锐觉】:你可以重铸任意张牌`)\r\n\t\t\t\t\t\t.set(\"ai\", card => get.value(card, player) < 7)\r\n\t\t\t\t\t\t.set(\"filterCard\", (card, player) => player.canRecast(card))\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tevent.result = await player\r\n\t\t\t\t\t\t.chooseBool()\r\n\t\t\t\t\t\t.set(\"prompt\", `【锐觉】:你可以使用一张牌（无距离限制且不计入次数限制）`)\r\n\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\t\treturn player.getCards(\"h\").some(card => {\r\n\t\t\t\t\t\t\t\treturn player.hasUseTarget(card, false) && game.hasPlayer(char => get.effect(char, card, player, player) > 0);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (trigger.name === \"lose\") {\r\n\t\t\t\t\tplayer.recast(event.cards);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.chooseToUse().set(\"prompt\", `【锐觉】:请使用一张手牌`).set(\"addCount\", false).set(\"nodistance\", true);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\ttargetInRange(card, player, target, now) {\r\n\t\t\t\t\tlet event = get.event();\r\n\t\t\t\t\tif (event.nodistance) return true;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//剑兔 近卫阿米娅\r\n\t\tamy_qingyanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseUseEnd\" },\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar str = \"\";\r\n\t\t\t\t\tvar list = [\r\n\t\t\t\t\t\tplayer.hasSkill(\"amy_qingyanmrfz_damage\"),\r\n\t\t\t\t\t\tplayer.hasSkill(\"amy_qingyanmrfz_time\"),\r\n\t\t\t\t\t\tplayer.hasSkill(\"amy_qingyanmrfz_direct\"),\r\n\t\t\t\t\t];\r\n\t\t\t\t\tvar text = [\r\n\t\t\t\t\t\t\"·你每回合使用的第一张【杀】的伤害基数+1</br>\",\r\n\t\t\t\t\t\t\"·你使用【杀】的次数+1</br>\",\r\n\t\t\t\t\t\t\"·你使用的【杀】需要两张【闪】才可抵消</br>\",\r\n\t\t\t\t\t];\r\n\t\t\t\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\t\t\t\tif (list[i]) str = str + text[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn str;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.amy_qingyanmrfz_time || !player.storage.amy_qingyanmrfz_damage || !player.storage.amy_qingyanmrfz_direct;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\treturn current != player && get.attitude(current, player) > 2;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tresult = await player\r\n\t\t\t\t\t.chooseTarget(\"【青焱】：请选择一名其他角色\", true, (card, player, target) => {\r\n\t\t\t\t\t\treturn target !== player;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\tconst att = get.attitude(aiPlayer, target);\r\n\t\t\t\t\t\treturn att > 2;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tif (result.targets) {\r\n\t\t\t\t\tconst target = result.targets[0];\r\n\t\t\t\t\tevent.target = target;\r\n\t\t\t\t\tconst list = [];\r\n\r\n\t\t\t\t\tif (!player.storage.amy_qingyanmrfz_time) list.push(\"你使用【杀】的次数 +1\");\r\n\t\t\t\t\tif (!player.storage.amy_qingyanmrfz_damage) list.push(\"你每回合使用的第一张【杀】的伤害基数 +1\");\r\n\t\t\t\t\tif (!player.storage.amy_qingyanmrfz_direct) list.push(\"你使用的【杀】需要两张【闪】才可抵消\");\r\n\r\n\t\t\t\t\tif (list.length === 1) {\r\n\t\t\t\t\t\tif (!player.storage.amy_qingyanmrfz_time) {\r\n\t\t\t\t\t\t\tplayer.storage.amy_qingyanmrfz_time = true;\r\n\t\t\t\t\t\t\ttarget.addSkill(\"amy_qingyanmrfz_time\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!player.storage.amy_qingyanmrfz_damage) {\r\n\t\t\t\t\t\t\tplayer.storage.amy_qingyanmrfz_damage = true;\r\n\t\t\t\t\t\t\ttarget.addSkill(\"amy_qingyanmrfz_damage\", false);\r\n\t\t\t\t\t\t\ttarget.addMark(\"amy_qingyanmrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!player.storage.amy_qingyanmrfz_direct) {\r\n\t\t\t\t\t\t\tplayer.storage.amy_qingyanmrfz_direct = true;\r\n\t\t\t\t\t\t\ttarget.addSkill(\"amy_qingyanmrfz_direct\", false);\r\n\t\t\t\t\t\t\ttarget.addMark(\"amy_qingyanmrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t\t.set(\"prompt\", \"请选择删除一句话并令\" + get.translation(target) + \"获得该效果\")\r\n\t\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\t\treturn [0, 1, 2].randomGet();\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t// step 2 logic\r\n\t\t\t\t\t\tif (result.control === \"你使用【杀】的次数 +1\") {\r\n\t\t\t\t\t\t\tevent.target.addMark(\"amy_qingyanmrfz\", 1, false);\r\n\t\t\t\t\t\t\tplayer.storage.amy_qingyanmrfz_time = true;\r\n\t\t\t\t\t\t\tevent.target.addSkill(\"amy_qingyanmrfz_time\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (result.control === \"你每回合使用的第一张【杀】的伤害基数 +1\") {\r\n\t\t\t\t\t\t\tevent.target.addMark(\"amy_qingyanmrfz\", 1, false);\r\n\t\t\t\t\t\t\tplayer.storage.amy_qingyanmrfz_damage = true;\r\n\t\t\t\t\t\t\tevent.target.addSkill(\"amy_qingyanmrfz_damage\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (result.control === \"你使用的【杀】需要两张【闪】才可抵消\") {\r\n\t\t\t\t\t\t\tevent.target.addMark(\"amy_qingyanmrfz\", 1, false);\r\n\t\t\t\t\t\t\tplayer.storage.amy_qingyanmrfz_direct = true;\r\n\t\t\t\t\t\t\tevent.target.addSkill(\"amy_qingyanmrfz_direct\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tthreaten: 1.1,\r\n\t\t\t},\r\n\t\t\tgroup: [\"amy_qingyanmrfz_damage\", \"amy_qingyanmrfz_time\", \"amy_qingyanmrfz_direct\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdirect: {\r\n\t\t\t\t\taudio: \"amy_qingyanmrfz\",\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.storage.amy_qingyanmrfz_direct == true && player.hasSkill(\"amy_qingyanmrfz_mark\")) return false;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.card.name == \"sha\" && !event.getParent().directHit.includes(event.target) && get.distance(player, event.target) <= 1\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlogTarget: \"target\",\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst id = trigger.target.playerid;\r\n\t\t\t\t\t\tconst map = trigger.getParent()?.customArgs;\r\n\t\t\t\t\t\tif (!map || !id) return;\r\n\t\t\t\t\t\tif (!map[id]) map[id] = {};\r\n\t\t\t\t\t\tif (typeof map[id].shanRequired == \"number\") {\r\n\t\t\t\t\t\t\tmap[id].shanRequired++;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmap[id].shanRequired = 2;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t\t\tif (arg.card.name != \"sha\" || arg.target.countCards(\"h\", \"shan\") > 1 || get.distance(player, arg.target) > 1)\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgroup: \"amy_qingyanmrfz_remove2\",\r\n\t\t\t\t},\r\n\t\t\t\tremove2: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn !player.hasSkill(\"amy_qingyanmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeSkill(\"amy_qingyanmrfz_direct\");\r\n\t\t\t\t\t\tplayer.removeMark(\"amy_qingyanmrfz\", 1, false);\r\n\t\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\t\tif (current.hasSkill(\"amy_qingyanmrfz\")) current.storage.amy_qingyanmrfz_direct = false;\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttime: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn !player.hasSkill(\"amy_qingyanmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeMark(\"amy_qingyanmrfz\", 1, false);\r\n\t\t\t\t\t\tplayer.removeSkill(\"amy_qingyanmrfz_time\");\r\n\t\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\t\tif (current.hasSkill(\"amy_qingyanmrfz\")) current.storage.amy_qingyanmrfz_time = false;\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\" && (!player.storage.amy_qingyanmrfz || player.hasMark(\"amy_qingyanmrfz\"))) return num + 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\taudio: \"amy_qingyanmrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.storage.amy_qingyanmrfz_damage && player.hasSkill(\"amy_qingyanmrfz_mark\")) return false;\r\n\t\t\t\t\t\tif (player.hasSkill(\"amy_qingyanmrfz_mark\")) return false;\r\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (!trigger.baseDamage) trigger.baseDamage = 1;\r\n\t\t\t\t\t\ttrigger.baseDamage++;\r\n\t\t\t\t\t\tplayer.addTempSkill(\"amy_qingyanmrfz_mark\", \"phaseEnd\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tdamageBonus: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgroup: \"amy_qingyanmrfz_remove1\",\r\n\t\t\t\t},\r\n\t\t\t\tremove1: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn !player.hasSkill(\"amy_qingyanmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.removeSkill(\"amy_qingyanmrfz_damage\");\r\n\t\t\t\t\t\tplayer.removeMark(\"amy_qingyanmrfz\", 1, false);\r\n\t\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\t\tif (current.hasSkill(\"amy_qingyanmrfz\")) current.storage.amy_qingyanmrfz_damage = false;\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tmark: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tyingxiaomrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tif (player.storage.yingxiaomrfz) return \"已发动\";\r\n\t\t\t\t\tif (!player.storage.yingxiaomrfz) {\r\n\t\t\t\t\t\tif (player.countMark(\"yingxiaomrfz_mark\") < 5)\r\n\t\t\t\t\t\t\treturn \"未发动（不满足发动条件）</br>已累计使用\" + player.countMark(\"yingxiaomrfz_mark\") + \"张【杀】\";\r\n\t\t\t\t\t\telse return \"未发动（已满足发动条件）\";\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tlimited: true,\r\n\t\t\tanimationStr: \"影宵\",\r\n\t\t\tanimationColor: \"gold\",\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\treturn current != player && get.attitude(current, player) < 0 && player.inRange(current);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.yingxiaomrfz = false;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.yingxiaomrfz && player.countMark(\"yingxiaomrfz_mark\") >= 5;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t// step 0\r\n\t\t\t\tplayer.storage.yingxiaomrfz = true;\r\n\t\t\t\tplayer.awakenSkill(event.name);\r\n\t\t\t\tevent.num = 0;\r\n\r\n\t\t\t\t// step 1 loop (original event.redo())\r\n\t\t\t\twhile (event.num < 3) {\r\n\t\t\t\t\tif (event.num === 2) {\r\n\t\t\t\t\t\tplayer.addTempSkill(\"yingxiaomrfz_damage\", \"useCardAfter\");\r\n\t\t\t\t\t\tplayer.addTempSkill(\"yingxiaomrfz_wushi\", \"useCardAfter\");\r\n\t\t\t\t\t\tplayer.addTempSkill(\"yingxiaomrfz_total\", \"useCardAfter\");\r\n\t\t\t\t\t\tawait player.chooseUseTarget(\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\t\t\tisCard: true,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\"请选择【杀】的目标\",\r\n\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tplayer.addTempSkill(\"yingxiaomrfz_total\", \"useCardAfter\");\r\n\t\t\t\t\t\tawait player.chooseUseTarget(\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\t\t\tnature: event.num === 0 ? \"thunder\" : \"fire\",\r\n\t\t\t\t\t\t\t\tisCard: true,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\"请选择\" +\r\n\t\t\t\t\t\t\t\t(event.num === 0 ? \"雷【杀】\" : \"火【杀】\") +\r\n\t\t\t\t\t\t\t\t\"的目标 (下一张使用的牌为：\" +\r\n\t\t\t\t\t\t\t\t(event.num === 0 ? \"火【杀】\" : \"伤害基数为翻倍且无视防具的【杀】\") +\r\n\t\t\t\t\t\t\t\t\")\",\r\n\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"yingxiaomrfz\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tevent.num++;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 2\r\n\t\t\t\tawait player.draw(player.countMark(\"yingxiaomrfz_total\"));\r\n\t\t\t\tplayer.addSkill(\"yingxiaomrfz_handlit\");\r\n\t\t\t\tplayer.addSkill(\"yingxiaomrfz_round2\");\r\n\t\t\t},\r\n\t\t\tgroup: \"yingxiaomrfz_time\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tmark: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\ttime: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\" && player.countMark(\"yingxiaomrfz_mark\") < 5;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addMark(\"yingxiaomrfz_mark\", 1, false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard2\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (!trigger.baseDamage) trigger.baseDamage = 1;\r\n\t\t\t\t\t\ttrigger.baseDamage += 2;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tdamageBonus: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\twushi: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event) {\r\n\t\t\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tlogTarget: \"target\",\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.target.addTempSkill(\"qinggang2\");\r\n\t\t\t\t\t\ttrigger.target.storage.qinggang2.add(trigger.card);\r\n\t\t\t\t\t\ttrigger.target.markSkill(\"qinggang2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tunequip_ai: true,\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t\t\tif (arg && arg.name == \"sha\") return true;\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttotal: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addMark(\"yingxiaomrfz_total\", trigger.num, false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\thandlit: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn num + player.countMark(\"yingxiaomrfz_total\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tround1: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"roundStart\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addMark(\"yingxiaomrfz_round1\", 1, false);\r\n\t\t\t\t\t\tif (player.countMark(\"yingxiaomrfz_round1\") > 2) {\r\n\t\t\t\t\t\t\tplayer.removeSkill(\"yingxiaomrfz_round2\");\r\n\t\t\t\t\t\t\tplayer.removeMark(\"yingxiaomrfz_round1\", player.countMark(\"yingxiaomrfz_round1\"), false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tround2: {\r\n\t\t\t\t\taudio: \"yingxiaomrfz\",\r\n\t\t\t\t\ttrigger: { source: \"damageBefore\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\t\t\treturn \"你造成的伤害均视为体力流失</br>效果剩余时间：\" + (2 - player.countMark(\"yingxiaomrfz_round1\")) + \"轮\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck: function () {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t\ttrigger.player.loseHp(trigger.num);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tjueqing: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgroup: \"yingxiaomrfz_round1\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//芙兰卡\r\n\t\tjifengmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCard2\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.targets && event.targets.length > 1) return false;\r\n\t\t\t\treturn event.cards && event.card.name == \"sha\";\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.targets[0]) < 0;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\tvar target = event.targets[0],\r\n\t\t\t\t\tlist = [];\r\n\t\t\t\tif (!target.hasEmptySlot(2)) list.push(\"无视防具\");\r\n\t\t\t\tif (target.countCards(\"h\") > 0) list.push(\"此【杀】需要两张闪才可抵消\");\r\n\t\t\t\tif (target.hujia > 0) list.push(\"无视护甲\");\r\n\t\t\t\treturn \"【极锋】:是否对\" + get.translation(target) + \"发动‘极锋’？（\" + list + \"）\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar target = trigger.targets[0],\r\n\t\t\t\t\tnum = 0;\r\n\t\t\t\tif (!target.hasEmptySlot(2)) {\r\n\t\t\t\t\tnum++;\r\n\t\t\t\t\ttarget.addTempSkill(\"qinggang2\");\r\n\t\t\t\t\ttarget.storage.qinggang2.add(trigger.card);\r\n\t\t\t\t\ttarget.markSkill(\"qinggang2\");\r\n\t\t\t\t}\r\n\t\t\t\tif (target.countCards(\"h\") > 0) {\r\n\t\t\t\t\tnum++;\r\n\t\t\t\t\tplayer.addTempSkill(\"jifengmrfz_sha\");\r\n\t\t\t\t\tplayer.storage.jifengmrfz = {\r\n\t\t\t\t\t\tcard: trigger.card,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tif (target.hujia > 0) {\r\n\t\t\t\t\ttarget.addTempSkill(\"jifengmrfz_ighujia\");\r\n\t\t\t\t\ttarget.storage.jifengmrfz_ighujia.add(trigger.card);\r\n\t\t\t\t\ttarget.markSkill(\"jifengmrfz_ighujia\");\r\n\t\t\t\t\tnum++;\r\n\t\t\t\t}\r\n\t\t\t\tif (!player.hasSkill(\"jifengmrfz_used\")) {\r\n\t\t\t\t\tplayer.addTempSkill(\"jifengmrfz_used\", \"phaseEnd\");\r\n\t\t\t\t\tplayer.draw(3 - num);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tsha: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar info = player.storage.jifengmrfz;\r\n\t\t\t\t\t\tif (!event.card || event.card != info.card) return false;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn event.card.name == \"sha\" && !event.getParent().directHit.includes(event.target);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlogTarget: \"target\",\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst id = trigger.target.playerid;\r\n\t\t\t\t\t\tconst map = trigger.getParent()?.customArgs;\r\n\r\n\t\t\t\t\t\tif (!map || !id) return;\r\n\r\n\t\t\t\t\t\tif (!map[id]) map[id] = {};\r\n\t\t\t\t\t\tif (typeof map[id].shanRequired == \"number\") {\r\n\t\t\t\t\t\t\tmap[id].shanRequired++;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmap[id].shanRequired = 2;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdelete player.storage.jifengmrfz;\r\n\t\t\t\t\t\tplayer.removeSkill(\"jifengmrfz_sha\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t\t\tif (arg.card.name != \"sha\" || arg.target.countCards(\"h\", \"shan\") > 1 || get.distance(player, arg.target) > 1)\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tused: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\tighujia: {\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tnohujia: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tinit: function (player, skill) {\r\n\t\t\t\t\t\tif (!player.storage[skill]) player.storage[skill] = [];\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"damage\", \"damageCancelled\", \"damageZero\"],\r\n\t\t\t\t\t\tsource: [\"damage\", \"damageCancelled\", \"damageZero\"],\r\n\t\t\t\t\t\ttarget: [\"shaMiss\", \"useCardToExcluded\", \"useCardToEnd\", \"eventNeutralized\"],\r\n\t\t\t\t\t\tglobal: [\"useCardEnd\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tplayer.storage.jifengmrfz_ighujia &&\r\n\t\t\t\t\t\t\tevent.card &&\r\n\t\t\t\t\t\t\tplayer.storage.jifengmrfz_ighujia.includes(event.card) &&\r\n\t\t\t\t\t\t\t(event.name != \"damage\" || event.notLink())\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tpriority: 12,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.jifengmrfz_ighujia.remove(trigger.card);\r\n\t\t\t\t\t\tif (!player.storage.jifengmrfz_ighujia.length) player.removeSkill(\"jifengmrfz_ighujia\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmarktext: \"✘\",\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tname: \"✘\",\r\n\t\t\t\t\t\tcontent: \"当前护甲已失效\",\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.2,\r\n\t\t\t},\r\n\t\t},\r\n\t\txiqiaomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"chooseToRespondBegin\", \"chooseToUseBegin\"],\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.hasSkill(\"xiqiaomrfz_used\")) return false;\r\n\t\t\t\tif (event.responded) return false;\r\n\t\t\t\tif (!event.filterCard || !event.filterCard({ name: \"shan\" }, player, event)) return false;\r\n\t\t\t\tif (event.name == \"chooseToRespond\" && !lib.filter.cardRespondable({ name: \"shan\" }, player, event)) return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tcheck: () => true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.addTempSkill(\"xiqiaomrfz_used\", \"phaseEnd\");\r\n\t\t\t\tconst next = player.chooseToDiscard(\"he\", true);\r\n\t\t\t\tnext.set(\"prompt\", \"【细巧】:你可以弃置一张牌，然后摸一张牌并展示之，若类型不同，视为使用或打出一张【闪】\");\r\n\r\n\t\t\t\tconst result = await next.forResult();\r\n\r\n\t\t\t\tif (!result.cards) return;\r\n\r\n\t\t\t\tlet cardl = result.cards[0];\r\n\r\n\t\t\t\tconst { cards } = await player.draw(\"visible\").forResult();\r\n\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\tlet card = cards[0];\r\n\r\n\t\t\t\tif (get.type2(card) != get.type2(cardl)) {\r\n\t\t\t\t\ttrigger.untrigger();\r\n\t\t\t\t\ttrigger.set(\"responded\", true);\r\n\t\t\t\t\ttrigger.result = { bool: true, card: { name: \"shan\", isCard: true } };\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tused: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\trespondShan: true,\r\n\t\t\t\tthreaten: 0.8,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//D32 星极\r\n\t\ttianyimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tmark: true,\r\n\t\t\tlocked: false,\r\n\t\t\tzhuanhuanji: true,\r\n\t\t\tmarktext: \"☯\",\r\n\t\t\tinit: function (player, skill) {\r\n\t\t\t\tplayer.storage[skill] = true;\r\n\t\t\t},\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (storage, player, skill) {\r\n\t\t\t\t\tif (player.storage.tianyimrfz == true) return \"观看牌堆顶两张牌，并将其置于牌堆顶或牌堆底\"; //阳\r\n\t\t\t\t\treturn \"进行一次判定，并获得判定牌，本回合此牌视为【闪】，若判定结果为♣，你本局游戏使用【杀】的次数+1（至多+3）\"; //阴\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttrigger: { global: \"phaseJudgeBegin\" },\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\tif (player.storage.tianyimrfz == true)\r\n\t\t\t\t\tvar str = \"观看牌堆顶两张牌，并将其置于牌堆顶或牌堆底\"; //阳\r\n\t\t\t\telse var str = \"进行一次判定，并获得判定牌，本回合此牌视为【闪】，若判定结果为♣，你本局游戏使用【杀】的次数+1（至多+3）\"; //阴\r\n\t\t\t\treturn \"【天仪】:你可以\" + str;\r\n\t\t\t},\r\n\t\t\tasync callback(event, trigger, player) {\r\n\t\t\t\tif (event.judgeResult.suit == \"club\") {\r\n\t\t\t\t\tif (player.countMark(\"tianyimrfz_shacount\") < 3) player.addMark(\"tianyimrfz_shacount\", 1, false);\r\n\t\t\t\t}\r\n\t\t\t\tplayer.gain(event.card, \"gain2\").gaintag.add(\"tianyimrfz\");\r\n\t\t\t\tplayer.addTempSkill(\"tianyimrfz_remove\", \"phaseEnd\");\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (player.storage.tianyimrfz) await player.chooseToGuanxing(2);\r\n\t\t\t\telse\r\n\t\t\t\t\tawait player\r\n\t\t\t\t\t\t.judge(function (card) {\r\n\t\t\t\t\t\t\tif (get.suit(card) == \"club\") return 0;\r\n\t\t\t\t\t\t\treturn -4;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"callback\", lib.skill.tianyimrfz.callback);\r\n\t\t\t\tplayer.changeZhuanhuanji(\"tianyimrfz\");\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tif (card.name == \"sha\") return num + player.countMark(\"tianyimrfz_shacount\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tshacount: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"使用【杀】的次数+#\",\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tremove: {\r\n\t\t\t\t\tonremove: function (player) {\r\n\t\t\t\t\t\tplayer.removeGaintag(\"tianyimrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardname: function (card, player, name) {\r\n\t\t\t\t\t\t\tif (card.hasGaintag(\"tianyimrfz\")) return \"shan\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thuijianmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCard2\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!event.targets || event.targets.length > 1) return false;\r\n\t\t\t\tif (!player.hasUseTarget(event.card, true, false)) return false;\r\n\t\t\t\tif (!player.isPhaseUsing()) return false;\r\n\t\t\t\tif (player.getCardUsable(\"sha\") < 1) return false;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\treturn get.type(event.card) == \"trick\" || get.type(event.card) == \"basic\";\r\n\t\t\t},\r\n\t\t\tusable: 1,\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseTarget(\r\n\t\t\t\t\t\t[1, player.getCardUsable(\"sha\")],\r\n\t\t\t\t\t\tget.prompt(\"huijianmrfz\"),\r\n\t\t\t\t\t\t\"为\" + get.translation(trigger.card) + \"增加至多\" + player.getCardUsable(\"sha\") + \"个目标\",\r\n\t\t\t\t\t\tfunction (card, player, target) {\r\n\t\t\t\t\t\t\treturn !_status.event.sourcex.includes(target) && player.canUse(_status.event.card, target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"sourcex\", trigger.targets)\r\n\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\treturn get.effect(target, _status.event.card, player, player);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"card\", trigger.card)\r\n\t\t\t\t\t.setHiddenSkill(event.name)\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\tif (result.targets) {\r\n\t\t\t\t\tif (!event.isMine() && !event.isOnline()) game.delayx();\r\n\t\t\t\t\tfor (var i = 0; i < result.targets.length; i++) {\r\n\t\t\t\t\t\ttrigger.targets.push(result.targets[i]);\r\n\t\t\t\t\t\tplayer.line(result.targets[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"huijianmrfz\");\r\n\t\t\t\t\tplayer.addMark(\"huijianmrfz_minus\", result.targets.length, false);\r\n\t\t\t\t\tplayer.addTempSkill(\"huijianmrfz_minus\", \"phaseUseAfter\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.storage.counttrigger.huijianmrfz--;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tminus: {\r\n\t\t\t\t\tonremove: function (player) {\r\n\t\t\t\t\t\tplayer.removeMark(\"huijuanmrfz_minus\", player.countMark(\"huijuanmrfz_minus\"), false);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num - player.countMark(\"huijianmrfz_minus\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tbingmingmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (\r\n\t\t\t\t\t!game.findPlayer(function (current) {\r\n\t\t\t\t\t\treturn current.name == \"xingyuanmrfz\";\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\treturn game.roundNumber == 2;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst target = game.findPlayer(function (current) {\r\n\t\t\t\t\treturn current.name == \"xingyuanmrfz\";\r\n\t\t\t\t});\r\n\t\t\t\tif (!target) return;\r\n\t\t\t\tconst num1 = player.countCards(\"h\") - target.countCards(\"h\");\r\n\t\t\t\tconst num2 = player.getHandcardLimit() - target.getHandcardLimit();\r\n\t\t\t\tif (num1 > 0) {\r\n\t\t\t\t\tplayer.chooseToDiscard(true, \"【病鸣】:请将手牌调整至\" + num1, num1);\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t} else if (num1 < 0) player.drawTo(-num1);\r\n\t\t\t\tif (num2 != 0) {\r\n\t\t\t\t\tplayer.addMark(\"bingmingmrfz\", Math.abs(num2), false);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\treturn num + player.countMark(\"bingmingmrfz\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//星源\r\n\t\tdaoliumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 2,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t},\r\n\t\t\tfilterCard: true,\r\n\t\t\tselectCard: 1,\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player;\r\n\t\t\t},\r\n\t\t\tselectTarget: 1,\r\n\t\t\tlose: false,\r\n\t\t\tdiscard: false,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst target = event.target;\r\n\t\t\t\tconst cards = event.cards;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tevent.targetx = target;\r\n\t\t\t\tevent.targets = [];\r\n\t\t\t\tevent.discard = [];\r\n\t\t\t\tevent.discard.push(target);\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (target.getNext()) event.targets.push(target.getNext());\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (target.getPrevious()) event.targets.push(target.getPrevious());\r\n\t\t\t\tif (event.targets.includes(player)) event.targets.remove(player);\r\n\t\t\t\tawait player.give(cards, target);\r\n\r\n\t\t\t\t// step 1 & 2 loop (original event.goto(1))\r\n\t\t\t\twhile (event.targets.length && event.targetx.countCards(\"he\") > 0) {\r\n\t\t\t\t\tconst currentTarget = event.target[0];\r\n\t\t\t\t\tconst result = await event.targetx\r\n\t\t\t\t\t\t.chooseCard(\"【导流】:请交给\" + get.translation(currentTarget) + \"一张牌\", \"he\")\r\n\t\t\t\t\t\t.set(\"forced\", true)\r\n\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\tif (result.cards && result.cards.length) {\r\n\t\t\t\t\t\tconst card = result.cards[0];\r\n\t\t\t\t\t\tawait event.targetx.give(card, currentTarget);\r\n\t\t\t\t\t\tevent.discard.push(currentTarget);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tevent.targets.shift();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 3 loop (original event.redo())\r\n\t\t\t\twhile (event.discard.length) {\r\n\t\t\t\t\tconst discardTarget = event.discard[0];\r\n\t\t\t\t\tif (discardTarget.countCards(\"he\") > 0) {\r\n\t\t\t\t\t\tawait discardTarget.chooseToDiscard(\"he\", true, \"【导流】:请弃置一张牌\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tevent.discard.shift();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 4,\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tvar pre = target.getPrevious(),\r\n\t\t\t\t\t\t\tnet = target.getNext(),\r\n\t\t\t\t\t\t\tnum = 0;\r\n\t\t\t\t\t\tif (game.players.length == 2) return 0;\r\n\t\t\t\t\t\tif (get.attitude(pre, player) > 2 && get.attitude(net, player) > 2) return 0;\r\n\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tgewumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"gainEnd\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.source && event.source.isIn() && event.source == player && event.cards.length >= 1;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tlogTarget: \"source\",\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (player.countMark(\"gewumrfz\") < 5) {\r\n\t\t\t\t\tplayer.addMark(\"gewumrfz\", 1, false);\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"gewumrfz\");\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0; i < trigger.cards.length; i++) {\r\n\t\t\t\t\tif (!player.getStorage(\"gewumrfz_mark\").includes(trigger.cards[i].name)) {\r\n\t\t\t\t\t\tplayer.markAuto(\"gewumrfz_mark\", [trigger.cards[i].name]);\r\n\t\t\t\t\t\tif (player.storage.gewumrfz_mark.length % 2 == 0) {\r\n\t\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"gewumrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (player.storage.gewumrfz_mark.length % 4 == 0) {\r\n\t\t\t\t\t\t\tplayer.addMark(\"gewumrfz_draw\", 1, false);\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"gewumrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\treturn num + player.countMark(\"gewumrfz\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"gewumrfz_mark\", \"gewumrfz_draw\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tmark: {\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\"记录的牌名：\" +\r\n\t\t\t\t\t\t\t\tget.translation(player.storage.gewumrfz_mark) +\r\n\t\t\t\t\t\t\t\t\"</br>\" +\r\n\t\t\t\t\t\t\t\t(player.countMark(\"gewumrfz_draw\") > 0 ? \"额定摸牌数+\" + player.countMark(\"gewumrfz_draw\") : \"\")\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\taudio: \"gewumrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.countMark(\"gewumrfz_draw\") > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num += player.countMark(\"gewumrfz_draw\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//战车\r\n\t\tjiqiangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tderivation: [\"DP27mrfz\"],\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.isDisabled(1) && (event.name != \"phase\" || game.phaseNumber == 0);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst card = game.createCard(\"DP27mrfz\", \"diamond\", 13);\r\n\t\t\t\tplayer.$gain2(card);\r\n\t\t\t\tgame.delayx();\r\n\t\t\t\tplayer.equip(card);\r\n\t\t\t},\r\n\t\t\tgroup: \"jiqiangmrfz_get\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tget: {\r\n\t\t\t\t\taudio: \"jiqiangmrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t!player.isDisabled(1) &&\r\n\t\t\t\t\t\t\tplayer.getCards(\"e\", function (card) {\r\n\t\t\t\t\t\t\t\treturn get.name(card) == \"DP27mrfz\";\r\n\t\t\t\t\t\t\t}).length == 0\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst card = game.createCard(\"DP27mrfz\", \"diamond\", 13);\r\n\t\t\t\t\t\tplayer.$gain2(card);\r\n\t\t\t\t\t\tgame.delayx();\r\n\t\t\t\t\t\tplayer.equip(card);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tqingxiemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseDrawEnd\" },\r\n\t\t\tfirstDo: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.skipList.includes(\"phaseUse\")) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\treturn player.inRangeOf(current) && current != player;\r\n\t\t\t\t\t}) > 0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (get.value(player.getCards(\"h\")) >= 10) return false;\r\n\t\t\t\tif (\r\n\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\treturn player.inRangeOf(current) && current != player && get.attitude(player, current) < 0;\r\n\t\t\t\t\t}) < 1\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tconst next = player.chooseTarget(\"【倾泻】:请选择一名攻击范围内的其他角色\", true, (card, target, player) => {\r\n\t\t\t\t\treturn target !== player && player.inRangeOf(target);\r\n\t\t\t\t});\r\n\t\t\t\tnext.ai = target => {\r\n\t\t\t\t\treturn get.effect(target, { name: \"sha\" }, _status.event.player);\r\n\t\t\t\t};\r\n\t\t\t\tresult = await next.forResult();\r\n\r\n\t\t\t\tevent.num = 0;\r\n\t\t\t\tevent.skip = 0;\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tif (result.targets && result.targets.length) {\r\n\t\t\t\t\tevent.target = result.targets[0];\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 2 & 3 loop (original event.goto(2))\r\n\t\t\t\twhile (event.num < 3) {\r\n\t\t\t\t\t// step 2\r\n\t\t\t\t\tif (!event.target.isAlive()) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst judgeEvent = player.judge(card => {\r\n\t\t\t\t\t\tconst color = get.color(card);\r\n\t\t\t\t\t\tif (color === \"red\") return 4;\r\n\t\t\t\t\t\treturn -4;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tresult = await judgeEvent.forResult();\r\n\r\n\t\t\t\t\t// step 3\r\n\t\t\t\t\tif (result.color === \"red\") {\r\n\t\t\t\t\t\tawait player.useCard({ name: \"sha\", isCard: true }, false, event.target);\r\n\t\t\t\t\t\tevent.skip++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tevent.num++;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 4\r\n\t\t\t\tif (event.skip > 1) {\r\n\t\t\t\t\tplayer.skip(\"phaseUse\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\t//闪盾 闪击\r\n\t\tshandunmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tglobalFrom: function (from, to, distance) {\r\n\t\t\t\t\tif (from.isAction()) return distance - 1;\r\n\t\t\t\t\treturn distance + 1;\r\n\t\t\t\t},\r\n\t\t\t\tglobalTo: function (from, to, distance) {\r\n\t\t\t\t\tif (!to.isAction()) return distance + 1;\r\n\t\t\t\t\treturn distance - 1;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txuanmumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCard2\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.storage.xuanmumrfz_roundcount >= 4) return false;\r\n\t\t\t\tif (!event.targets || event.targets.length > 1) return false;\r\n\t\t\t\tif (get.distance(player, event.targets[0]) > 1) return false;\r\n\t\t\t\tif (event.targets[0].countCards(\"h\") < 1) return false;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tconst type = get.type(event.card);\r\n\t\t\t\treturn event.targets[0] != player && (type == \"basic\" || type == \"trick\");\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(event.targets[0], player) < 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (!player.storage.xuanmumrfz_roundcount) player.storage.xuanmumrfz_roundcount = 0;\r\n\t\t\t\tplayer.storage.xuanmumrfz_roundcount++;\r\n\t\t\t\tconst result = await player.choosePlayerCard(trigger.targets[0], true, \"h\").forResult();\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.cards) {\r\n\t\t\t\t\tconst card = result.cards[0];\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.showCards(card, get.translation(player) + \"对\" + get.translation(trigger.target) + \"发动了【炫目】\");\r\n\r\n\t\t\t\t\tif (!canRespond(trigger.card, card)) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current != player && current == trigger.targets[0];\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tif (trigger.targets[0].countGainableCards(player, \"h\")) {\r\n\t\t\t\t\t\t\tplayer.gainPlayerCard(\"h\", trigger.targets[0], true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (Math.random() < 0.25) trigger.targets[0].chat(\"有闪盾！\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction canRespond(card1, card2) {\r\n\t\t\t\t\t/**@ts-ignore */\r\n\t\t\t\t\tvar info1 = get.name(card1),\r\n\t\t\t\t\t\t/** @ts-ignore */\r\n\t\t\t\t\t\tinfo2 = get.name(card2);\r\n\t\t\t\t\tvar tmp_bool = false;\r\n\t\t\t\t\tif ((info1 == \"sha\" || info1 == \"wanjian\") && info2 == \"shan\") tmp_bool = true;\r\n\t\t\t\t\tif ((info1 == \"juedou\" || info1 == \"nanman\") && info2 == \"sha\") tmp_bool = true;\r\n\t\t\t\t\t/**@ts-ignore */\r\n\t\t\t\t\tif (get.type(card1) == \"trick\" && info2 == \"wuxie\") tmp_bool = true;\r\n\t\t\t\t\tvar str = (tmp_bool == true ? \"\" : \"不\") + \"能响应\";\r\n\t\t\t\t\tinfo1 = \"<font color=rgb(255,255,122)>【\" + get.translation(info1) + \"】</font>\";\r\n\t\t\t\t\tinfo2 = \"<font color=rgb(255,255,122)>【\" + get.translation(info2) + \"】</font>\";\r\n\t\t\t\t\tgame.log(info2, str, info1);\r\n\t\t\t\t\treturn tmp_bool;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"xuanmumrfz_roundcount\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\troundcount: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tinit: player => {\r\n\t\t\t\t\t\tplayer.storage.xuanmumrfz_roundcount = 0;\r\n\t\t\t\t\t\tplayer.markSkill(\"xuanmumrfz_roundcount\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\t\t\treturn player.storage.xuanmumrfz_roundcount + \"/4\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tmarkcount: function (event, player) {\r\n\t\t\t\t\t\t\tif (!player.storage.xuanmumrfz_roundcount) return 4;\r\n\t\t\t\t\t\t\treturn 4 - player.storage.xuanmumrfz_roundcount;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"roundStart\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.xuanmumrfz_roundcount = 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tchuandunmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst result = await player.draw(\"visible\").forResult();\r\n\r\n\t\t\t\tif (result.cards) {\r\n\t\t\t\t\tvar card = result.cards[0];\r\n\t\t\t\t\tif ((card.suit == \"heart\" || card.suit == \"spade\") && card.number == 6) {\r\n\t\t\t\t\t\tplayer.loseHp(player.hp);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//霜华 夹子妹\r\n\t\ttadianmrfz: {\r\n\t\t\tmarkimage: \"extension/WhichWay/image/orther/shuanghuajiazimrfz.png\",\r\n\t\t\tintro: {\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t\tmark: function (dialog, content, player) {\r\n\t\t\t\t\tcontent = player.getExpansions(\"tadianmrfz\");\r\n\t\t\t\t\tif (content && content.length) {\r\n\t\t\t\t\t\tif (player == game.me || player.isUnderControl()) {\r\n\t\t\t\t\t\t\tdialog.addAuto(content);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn \"共有\" + get.cnNumber(content.length) + \"张踏垫\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcontent: function (content, player) {\r\n\t\t\t\t\tcontent = player.getExpansions(\"tadianmrfz\");\r\n\t\t\t\t\tif (content && content.length) {\r\n\t\t\t\t\t\tif (player == game.me || player.isUnderControl()) {\r\n\t\t\t\t\t\t\treturn get.translation(content);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn \"共有\" + get.cnNumber(content.length) + \"张踏垫\";\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tonremove: function (player, skill) {\r\n\t\t\t\tvar cards = player.getExpansions(skill);\r\n\t\t\t\tif (cards.length) player.loseToDiscardpile(cards);\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (player.getExpansions(\"tadianmrfz\").length > 0) {\r\n\t\t\t\t\tawait player.gain(player.getExpansions(\"tadianmrfz\"), \"gain2\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tawait player.draw(3);\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseCard(true, 3, \"【踏垫】:请选择将三张手牌置于你武将牌上\")\r\n\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\tif (result.cards) {\r\n\t\t\t\t\tplayer.addToExpansion(result.cards, player, \"giveAuto\").gaintag.add(\"tadianmrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"tadianmrfz_tri\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\trec: {\r\n\t\t\t\t\ttrigger: { player: \"dyingAfter\" },\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.recover();\r\n\t\t\t\t\t\tplayer.removeSkill(\"tadianmrfz_rec\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttri: {\r\n\t\t\t\t\taudio: \"tadianmrfz\",\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\ttarget: \"useCardToTargeted\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!event.card || player.getExpansions(\"tadianmrfz\").length < 1) return false;\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tplayer.getExpansions(\"tadianmrfz\").filter(function (magic) {\r\n\t\t\t\t\t\t\t\treturn magic.name == event.card.name;\r\n\t\t\t\t\t\t\t}).length > 0\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\treturn get.attitude(player, event.player) < 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: function (event, player) {\r\n\t\t\t\t\t\treturn \"【踏垫】:是否弃置一张‘踏垫’，令\" + get.translation(event.player) + \"流失所有体力？\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tconst cards = player.getExpansions(\"tadianmrfz\").filter(function (magic) {\r\n\t\t\t\t\t\t\treturn get.name(magic) == get.name(trigger.card);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (!cards.length) return;\r\n\t\t\t\t\t\tconst result = await player\r\n\t\t\t\t\t\t\t.chooseButton([\"你可以选择移去一张与其使用的牌的牌名相同的“踏垫”，令其流失所有体力\", cards])\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\tif (result.links) {\r\n\t\t\t\t\t\t\tplayer.loseToDiscardpile(result.links);\r\n\t\t\t\t\t\t\tplayer.draw(3);\r\n\t\t\t\t\t\t\ttrigger.player.loseHp(trigger.player.hp);\r\n\t\t\t\t\t\t\ttrigger.player.addSkill(\"tadianmrfz_rec\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txinjimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseZhunbeiBegin\",\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.getExpansions(\"tadianmrfz\").length > 0 && player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst cards = player.getExpansions(\"tadianmrfz\");\r\n\t\t\t\tif (!cards.length || !player.countCards(\"h\")) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst next = player.chooseToMove(\"【踏垫】：是否交换“踏垫”和手牌？\");\r\n\t\t\t\tnext.set(\"list\", [\r\n\t\t\t\t\t[get.translation(player) + \"（你）的‘踏垫’\", cards],\r\n\t\t\t\t\t[\"手牌区\", player.getCards(\"h\")],\r\n\t\t\t\t]);\r\n\t\t\t\tnext.set(\"filterMove\", function (from, to) {\r\n\t\t\t\t\treturn typeof to != \"number\";\r\n\t\t\t\t});\r\n\t\t\t\tnext.set(\"processAI\", function (list) {\r\n\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\tcards = list[0][1].concat(list[1][1]).sort(function (a, b) {\r\n\t\t\t\t\t\t\treturn get.value(a) - get.value(b);\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\tcards2 = cards.splice(0, player.getExpansions(\"tadianmrfz\").length);\r\n\t\t\t\t\treturn [cards2, cards];\r\n\t\t\t\t});\r\n\r\n\t\t\t\tconst result = await next.forResult();\r\n\r\n\t\t\t\tif (result.moved) {\r\n\t\t\t\t\tvar pushs = result.moved[0],\r\n\t\t\t\t\t\tgains = result.moved[1];\r\n\t\t\t\t\tpushs.removeArray(player.getExpansions(\"tadianmrfz\"));\r\n\t\t\t\t\tgains.removeArray(player.getCards(\"h\"));\r\n\t\t\t\t\tif (!pushs.length || pushs.length != gains.length) return;\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"tadianmrfz\");\r\n\t\t\t\t\tplayer.addToExpansion(pushs, player, \"giveAuto\").gaintag.add(\"tadianmrfz\");\r\n\t\t\t\t\tgame.log(player, \"交换了手牌区与‘踏垫’的牌\");\r\n\t\t\t\t\tplayer.gain(gains, \"draw\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\t//柏喙\r\n\t\tyirenmrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\tchargeGet: 1,\r\n\t\t\tchargeSkill: true,\r\n\t\t\tforced: true,\r\n\t\t\tonremove: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseJieshuBegin\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar num = 0;\r\n\t\t\t\tvar history = player.getHistory(\"useCard\");\r\n\t\t\t\tfor (var i = 0; i < history.length; i++) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (history[i].card.name == \"sha\" && history[i].isPhaseUsing()) {\r\n\t\t\t\t\t\tnum++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (player.countMark(\"charge\") + player.getCardUsable(\"sha\") - num >= 15) return false;\r\n\t\t\t\treturn player.getCardUsable(\"sha\") - num > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar num = 0;\r\n\t\t\t\tvar history = player.getHistory(\"useCard\");\r\n\t\t\t\tfor (var i = 0; i < history.length; i++) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (history[i].card.name == \"sha\" && history[i].isPhaseUsing()) {\r\n\t\t\t\t\t\tnum++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tnum = player.getCardUsable(\"sha\") - num;\r\n\t\t\t\tnum = Math.min(num, 15 - player.countMark(\"charge\"));\r\n\t\t\t\tplayer.addMark(\"charge\", num);\r\n\t\t\t},\r\n\t\t\tgroup: \"yirenmrfz_use\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tlim: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"下回合使用【杀】的次数-#\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num - player.countMark(\"yirenmrfz_lim\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tuse: {\r\n\t\t\t\t\tinit: (player, skill) => (player.storage[skill] = 1),\r\n\t\t\t\t\taudio: \"yirenmrfz\",\r\n\t\t\t\t\tenable: \"phaseUse\",\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.countMark(\"charge\") < player.storage.yirenmrfz_use) return false;\r\n\t\t\t\t\t\tif (player.countCards(\"h\") < 2) return false;\r\n\t\t\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn current != player && !!player.canUse(\"sha\", current);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tselectCard: 2,\r\n\t\t\t\t\tposition: \"h\",\r\n\t\t\t\t\tfilterCard: true,\r\n\t\t\t\t\tselectTarget: [1, 2],\r\n\t\t\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\t\t\treturn player.canUse(\"sha\", target) === true && target != player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmultitarget: true,\r\n\t\t\t\t\tmultiline: true,\r\n\t\t\t\t\tcheck: function (card) {\r\n\t\t\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: \"【异刃】：请弃置两张手牌并选择至多两名角色\",\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tfor (let i of event.targets) {\r\n\t\t\t\t\t\t\tif (player.canUse(\"sha\", i)) player.useCard({ name: \"sha\", isCard: true }, i, false);\r\n\t\t\t\t\t\t\ti.addTempSkill(\"yirenmrfz_lim\", { player: \"phaseEnd\" });\r\n\t\t\t\t\t\t\ti.addMark(\"yirenmrfz_lim\", 1, false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tplayer.removeMark(\"charge\", player.storage.yirenmrfz_use);\r\n\t\t\t\t\t\tplayer.storage.yirenmrfz_use++;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\torder: function (item, player) {\r\n\t\t\t\t\t\t\tif (player.hasSkillTag(\"presha\", true, null, true)) return 10;\r\n\t\t\t\t\t\t\tif (game.hasNature(item, \"linked\")) {\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\tcurrent != player &&\r\n\t\t\t\t\t\t\t\t\t\t\tcurrent.isLinked() &&\r\n\t\t\t\t\t\t\t\t\t\t\tplayer.canUse(item, current, undefined, true) &&\r\n\t\t\t\t\t\t\t\t\t\t\tget.effect(current, item, player, player) > 0 &&\r\n\t\t\t\t\t\t\t\t\t\t\tlib.card.sha.ai.canLink(player, current, item)\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t}) &&\r\n\t\t\t\t\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\t\treturn current.isLinked() && get.damageEffect(current, player, player, get.nature(item)) > 0;\r\n\t\t\t\t\t\t\t\t\t}) > 1\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\treturn 3.1;\r\n\t\t\t\t\t\t\t\treturn 3;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn 3.05;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\t\t\tvar enemyIR = game.filterPlayer(function (current) {\r\n\t\t\t\t\t\t\t\t\treturn current != player && get.attitude(player, current) < 0 && !!player.canUse(\"sha\", current);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tif (enemyIR.length < 1) return 0;\r\n\t\t\t\t\t\t\t\telse if (enemyIR.length == 1) {\r\n\t\t\t\t\t\t\t\t\tif (target.hp <= 2) return -4;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshehunmrfz: {\r\n\t\t\ttrigger: {\r\n\t\t\t\tsource: \"damageEnd\",\r\n\t\t\t},\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"使用【杀】的次数+#\",\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tforced: true,\r\n\t\t\tpopup: false,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"shehunmrfz\") < 5;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar mark = player.countMark(\"shehunmrfz\");\r\n\t\t\t\tvar num = trigger.num;\r\n\t\t\t\tif (mark + num > 5) var add = 5 - mark;\r\n\t\t\t\telse var add = num;\r\n\t\t\t\tplayer.addMark(\"shehunmrfz\", add, false);\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tif (card.name == \"sha\") return num + player.countMark(\"shehunmrfz\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//白面鸮\r\n\t\tjinaomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tmark: true,\r\n\t\t\tmarktext: \"机脑\",\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar storage = player.storage.jinaomrfz;\r\n\t\t\t\t\tif (storage == true) return \"递增\";\r\n\t\t\t\t\tif (storage == false) return \"递减\";\r\n\t\t\t\t\treturn \"无限制\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar history = player.getHistory(\"useCard\");\r\n\t\t\t\tif (history.indexOf(event) != 1) return false;\r\n\t\t\t\treturn history[0].card.number != undefined && history[1].card.number != undefined;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar history = player.getHistory(\"useCard\");\r\n\t\t\t\tif (history[0].card.number < history[1].card.number) {\r\n\t\t\t\t\tplayer.storage.jinaomrfz = true;\r\n\t\t\t\t\tplayer.marks.jinaomrfz.innerText = \"递增\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.storage.jinaomrfz = false;\r\n\t\t\t\t\tplayer.marks.jinaomrfz.innerText = \"递减\";\r\n\t\t\t\t}\r\n\t\t\t\tplayer.storage.jinaomrfz_lim = history[1].card.number;\r\n\t\t\t\tplayer.addTempSkill(\"jinaomrfz_lim\", \"phaseEnd\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"jinaomrfz_draw\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\thandlit: {\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"手牌上限+#\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn num + player.countMark(\"jinaomrfz_handlit\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\taudio: \"jinaomrfz\",\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar history = player.getHistory(\"useCard\");\r\n\t\t\t\t\t\tif (history.length < 2) return false;\r\n\t\t\t\t\t\tif (!history[history.length - 2].card.color || get.color(event.card) == \"none\") return false;\r\n\t\t\t\t\t\t//console.log(history[history.length-2].card.color);console.log(get.color(event.card));\r\n\t\t\t\t\t\treturn history[history.length - 2].card.color == get.color(event.card);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar color = get.color(trigger.card);\r\n\t\t\t\t\t\tif (color == \"red\") player.draw(2);\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tplayer.addTempSkill(\"jinaomrfz_handlit\", \"phaseEnd\");\r\n\t\t\t\t\t\t\tplayer.addMark(\"jinaomrfz_handlit\", 1, false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tlim: {\r\n\t\t\t\t\tonremove: function (player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (player.marks?.jinaomrfz?.text?.innerText) player.marks.jinaomrfz.text.innerText = \"机脑\";\r\n\t\t\t\t\t\tdelete player.storage.jinaomrfz;\r\n\t\t\t\t\t\tdelete player.storage.jinaomrfz_lim;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!event.card.number) return false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.jinaomrfz_lim = trigger.card.number;\r\n\t\t\t\t\t\tvar cards = player.getCards(\"h\");\r\n\t\t\t\t\t\tlet max = 0,\r\n\t\t\t\t\t\t\tmin = 0,\r\n\t\t\t\t\t\t\tnum = 0;\r\n\t\t\t\t\t\tfor (var i = 0; i < cards.length; i++) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tif (typeof cards[i].number === \"number\") num = cards[i].number;\r\n\t\t\t\t\t\t\tif (i == 0) {\r\n\t\t\t\t\t\t\t\tmax = num;\r\n\t\t\t\t\t\t\t\tmin = num;\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (num > max) max = num;\r\n\t\t\t\t\t\t\tif (min > num) min = num;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (trigger.card.number >= max) {\r\n\t\t\t\t\t\t\tplayer.storage.jinaomrfz = false;\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.marks.jinaomrfz.text.innerText = \"递减\";\r\n\t\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"jinaomrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (trigger.card.number <= min) {\r\n\t\t\t\t\t\t\tplayer.storage.jinaomrfz = true;\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.marks.jinaomrfz.text.innerText = \"递增\";\r\n\t\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"jinaomrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardEnabled2: function (card, player) {\r\n\t\t\t\t\t\t\tif (player.storage.jinaomrfz == true) {\r\n\t\t\t\t\t\t\t\tif (card.number && card.number <= player.storage.jinaomrfz_lim) return false;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (card.number && card.number >= player.storage.jinaomrfz_lim) return false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\twutaimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\tdirect: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar cards = player.getCards(\"h\");\r\n\t\t\t\tif (cards.length < 2) return false;\r\n\t\t\t\tfor (var i = 0; i < cards.length; i++) {\r\n\t\t\t\t\tif (i == 0) {\r\n\t\t\t\t\t\tvar tmp_cards = cards[i];\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (get.type2(tmp_cards) != get.type2(cards[i])) return true;\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (get.color(tmp_cards) != get.color(cards[i])) return true;\r\n\t\t\t\t\ttmp_cards = cards[i];\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseToDiscard(\r\n\t\t\t\t\t\t2,\r\n\t\t\t\t\t\t\"h\",\r\n\t\t\t\t\t\tfalse,\r\n\t\t\t\t\t\t\"【五肽】：你可以弃置两张类型或颜色不相同的手牌并选择一名角色，直到你的下个回合开始，其每回合第一次受到的伤害-1\",\r\n\t\t\t\t\t\tfunction (card) {\r\n\t\t\t\t\t\t\tif (ui.selected.cards.length == 0) return true;\r\n\t\t\t\t\t\t\tif (ui.selected.cards.length) {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\tget.type2(card, player) != get.type2(ui.selected.cards[0], player) ||\r\n\t\t\t\t\t\t\t\t\tget.color(card, player) != get.color(ui.selected.cards[0], player)\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"complexCard\", true)\r\n\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\treturn 10 - get.value(card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tconst { targets } = await player\r\n\t\t\t\t\t\t.chooseTarget(\"【五肽】：请选择一名角色\", true, function (card, player, target) {\r\n\t\t\t\t\t\t\treturn !target.hasSkill(\"wutaimrfz_eff\");\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\tlet att = get.attitude(get.player(), target);\r\n\t\t\t\t\t\t\tif (target.hp < 3) att /= 1.5;\r\n\t\t\t\t\t\t\treturn att;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (targets) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"wutaimrfz_eff\", targets[0]);\r\n\t\t\t\t\t\tplayer.addTempSkill(\"wutaimrfz_eff\", { player: \"phaseBegin\" });\r\n\t\t\t\t\t\tplayer.storage.wutaimrfz_eff = targets[0];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tmark: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\teff: {\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\taudio: \"wutaimrfz\",\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\t\t\tvar char = get.translation(player.storage.wutaimrfz_eff);\r\n\t\t\t\t\t\t\tif (player.hasSkill(\"wutaimrfz_mark\")) return \"本回合\" + char + \"已触发过此效果\";\r\n\t\t\t\t\t\t\treturn char + \"受到的伤害-1\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"damageBegin\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tlogTarget: \"player\",\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.hasSkill(\"wutaimrfz_mark\")) return false;\r\n\t\t\t\t\t\treturn event.player == player.storage.wutaimrfz_eff;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addTempSkill(\"wutaimrfz_mark\", \"phaseEnd\");\r\n\t\t\t\t\t\ttrigger.num--;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//刺玫\r\n\t\thuabumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tglobal: \"huabumrfz_eff\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tenable: \"phaseUse\",\r\n\t\t\t\t\tusable: 1,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t!player.hasSkill(\"huabumrfz\") &&\r\n\t\t\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\t\t\treturn current.hasSkill(\"huabumrfz\");\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet result, target;\r\n\r\n\t\t\t\t\t\t// step 0\r\n\t\t\t\t\t\tconst targets = game.filterPlayer(current => {\r\n\t\t\t\t\t\t\treturn current.hasSkill(\"huabumrfz\");\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif (targets.length === 1) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"huabumrfz\", targets);\r\n\t\t\t\t\t\t\ttarget = targets[0];\r\n\t\t\t\t\t\t\t// goto 2: skip target selection, proceed to draw\r\n\t\t\t\t\t\t} else if (targets.length > 1) {\r\n\t\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t\t.chooseTarget(true, \"选择【花卜】的目标\", (card, player, target) => {\r\n\t\t\t\t\t\t\t\t\treturn _status.event.list.includes(target);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"list\", targets)\r\n\t\t\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\t\t\t\treturn get.attitude(aiPlayer, target);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t\t// step 1\r\n\t\t\t\t\t\t\tif (result.targets && result.targets.length) {\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tplayer.logSkill(\"huabumrfz\", result.targets);\r\n\t\t\t\t\t\t\t\ttarget = result.targets[0];\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 2\r\n\t\t\t\t\t\tif (target) {\r\n\t\t\t\t\t\t\tresult = await target.draw().forResult();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 3\r\n\t\t\t\t\t\tif (result && result.cards && result.cards.length) {\r\n\t\t\t\t\t\t\tconst card = result.cards[0];\r\n\t\t\t\t\t\t\tconst cards = player.getCards(\"h\");\r\n\t\t\t\t\t\t\tlet bool = false;\r\n\t\t\t\t\t\t\tfor (const c of cards) {\r\n\t\t\t\t\t\t\t\tif (get.type2(c) === get.type2(card)) {\r\n\t\t\t\t\t\t\t\t\tbool = true;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tevent.is = bool;\r\n\r\n\t\t\t\t\t\t\tresult = await target\r\n\t\t\t\t\t\t\t\t.chooseControl(\"有\", \"没有\")\r\n\t\t\t\t\t\t\t\t.set(\r\n\t\t\t\t\t\t\t\t\t\"prompt\",\r\n\t\t\t\t\t\t\t\t\t\"【花卜】:\" +\r\n\t\t\t\t\t\t\t\t\t\tget.translation(player) +\r\n\t\t\t\t\t\t\t\t\t\t\"手牌中是否有与\" +\r\n\t\t\t\t\t\t\t\t\t\tget.translation(card) +\r\n\t\t\t\t\t\t\t\t\t\t\"(\" +\r\n\t\t\t\t\t\t\t\t\t\tget.translation(get.type2(card)) +\r\n\t\t\t\t\t\t\t\t\t\t\")\" +\r\n\t\t\t\t\t\t\t\t\t\t\"类型相同的牌？\"\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\t\t\t\tconst is = _status.event.is;\r\n\t\t\t\t\t\t\t\t\tconst aiTarget = _status.event.target;\r\n\t\t\t\t\t\t\t\t\tconst answer = is === true ? \"有\" : \"没有\";\r\n\t\t\t\t\t\t\t\t\tif (get.attitude(aiPlayer, aiTarget) > 0 && aiTarget.hasSkill(\"shixinmrfz\")) return answer;\r\n\t\t\t\t\t\t\t\t\telse if (aiTarget.hasSkill(\"shixinmrfz\")) return answer === \"有\" ? \"没有\" : \"有\";\r\n\t\t\t\t\t\t\t\t\treturn [\"有\", \"没有\"].randomGet();\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"is\", event.is)\r\n\t\t\t\t\t\t\t\t.set(\"target\", target)\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 4\r\n\t\t\t\t\t\tif (result.control) {\r\n\t\t\t\t\t\t\tconst bool = result.control === \"有\";\r\n\t\t\t\t\t\t\tif (event.is === bool) {\r\n\t\t\t\t\t\t\t\tawait player.draw();\r\n\t\t\t\t\t\t\t\tawait target.draw();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tawait target.chooseToDiscard(\"【花卜】:请选择弃置一张牌\", true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\torder: 13,\r\n\t\t\t\t\t\tthreaten: 1.5,\r\n\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\tplayer: function (player, target) {\r\n\t\t\t\t\t\t\t\ttarget =\r\n\t\t\t\t\t\t\t\t\tgame.findPlayer(function (current) {\r\n\t\t\t\t\t\t\t\t\t\treturn current.hasSkill(\"huabumrfz\");\r\n\t\t\t\t\t\t\t\t\t}) || target;\r\n\t\t\t\t\t\t\t\tif (target) {\r\n\t\t\t\t\t\t\t\t\treturn get.attitude(player, target);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshixinmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"gainAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!_status.currentPhase) return false;\r\n\t\t\t\tif (player.hasSkill(\"shixinmrfz_ban\")) return false;\r\n\t\t\t\tif (_status.currentPhase.countCards(\"h\") == 0) return false;\r\n\t\t\t\treturn _status.currentPhase != player;\r\n\t\t\t},\r\n\t\t\tprompt: \"【识心】:是否观看当前回合角色的手牌？\",\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (!_status.currentPhase) return;\r\n\t\t\t\tplayer.viewHandcards(_status.currentPhase);\r\n\t\t\t\tplayer.addTempSkill(\"shixinmrfz_ban\", \"phaseEnd\");\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//红\r\n\t\tqunlangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"showCharacterAfter\",\r\n\t\t\t},\r\n\t\t\thiddenSkill: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!event.toShow || !event.toShow.includes(\"hongmrfz\")) return false;\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn current != player && player.inRangeOf(current);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn current != player && player.inRangeOf(current) && get.attitude(current, player) < 0;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tprompt: \"【群狼】:你可以对你攻击范围内的一名其他角色造成一点伤害\",\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseTarget(true, \"【群狼】:请选择一名其他角色并对其造成一点伤害\", function (card, player, target) {\r\n\t\t\t\t\t\treturn target != player && player.inRangeOf(target);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\treturn get.damageEffect(target, player, player);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\tif (result.targets) {\r\n\t\t\t\t\tconst target = result.targets[0];\r\n\t\t\t\t\ttarget.damage(\"player\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tcigumrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tcardnature: function (card, player) {\r\n\t\t\t\t\tif (!card.nature && card.name == \"sha\") return \"stab\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: [\"respond\", \"useCard\"],\r\n\t\t\t},\r\n\t\t\tfrequent: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!event.respondTo) return false;\r\n\t\t\t\tif (event.player == player) return false;\r\n\t\t\t\tif (player != event.respondTo[0]) return false;\r\n\t\t\t\telse return event.cards.filterInD(\"o\").filterInD(\"d\").length > 0;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\tvar cards = event.cards.filterInD(\"o\").filterInD(\"d\");\r\n\t\t\t\treturn \"【刺骨】:是否获得\" + get.translation(cards) + \"?\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar cards = trigger.cards.filterInD(\"o\").filterInD(\"d\");\r\n\t\t\t\tplayer.gain(cards, \"log\", \"gain2\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tqingchumrfz: {\r\n\t\t\tgroup: [\"qingchumrfz_sha\", \"qingchumrfz_shan\"],\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: [\"useCard\", \"respond\"] },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar target = _status.currentPhase;\r\n\t\t\t\tif (!target || target.countCards(\"he\") == 0) return false;\r\n\t\t\t\treturn event.card && event.card.name == \"sha\" && target != player;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tvar target = _status.currentPhase;\r\n\t\t\t\treturn get.attitude(target, player) < 0;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\tvar target = _status.currentPhase;\r\n\t\t\t\treturn \"【清处】:是否弃置当前回合角色（\" + get.translation(target) + \"）一张牌？\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst target = _status.currentPhase;\r\n\t\t\t\tlet result;\r\n\t\t\t\tif (!target || target.countCards(\"he\") == 0) event.finish();\r\n\t\t\t\telse result = await player.discardPlayerCard(target, \"he\", true).forResult();\r\n\r\n\t\t\t\tif (result?.cards) {\r\n\t\t\t\t\tif (get.suit(result.cards[0]) == get.suit(trigger.card)) {\r\n\t\t\t\t\t\tevent.goto(0);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tshan: {\r\n\t\t\t\t\taudio: \"qingchumrfz\",\r\n\t\t\t\t\tenable: [\"chooseToRespond\", \"chooseToUse\"],\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn _status.currentPhase != player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilterCard: {\r\n\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tviewAs: {\r\n\t\t\t\t\t\tname: \"shan\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: \"将一张杀当闪使用或打出\",\r\n\t\t\t\t\tcheck: function () {\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tposition: \"hs\",\r\n\t\t\t\t\tviewAsFilter: function (player) {\r\n\t\t\t\t\t\tif (!player.countCards(\"hs\", \"sha\")) return false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\trespondShan: true,\r\n\t\t\t\t\t\tskillTagFilter: function (player) {\r\n\t\t\t\t\t\t\tif (!player.countCards(\"hs\", \"sha\") || _status.currentPhase != player) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\teffect: {\r\n\t\t\t\t\t\t\ttarget: function (card, player, target, current) {\r\n\t\t\t\t\t\t\t\tif (get.tag(card, \"respondShan\") && current < 0) return 0.6;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\torder: 4,\r\n\t\t\t\t\t\tuseful: -1,\r\n\t\t\t\t\t\tvalue: -1,\r\n\t\t\t\t\t\tbasic: {\r\n\t\t\t\t\t\t\tuseful: [7, 5.1, 2],\r\n\t\t\t\t\t\t\tvalue: [7, 5.1, 2],\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tsha: {\r\n\t\t\t\t\taudio: \"qingchumrfz\",\r\n\t\t\t\t\tenable: [\"chooseToUse\", \"chooseToRespond\"],\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn _status.currentPhase != player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilterCard: {\r\n\t\t\t\t\t\tname: \"shan\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tviewAs: {\r\n\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tviewAsFilter: function (player) {\r\n\t\t\t\t\t\tif (!player.countCards(\"hs\", \"shan\")) return false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tposition: \"hs\",\r\n\t\t\t\t\tprompt: \"将一张闪当杀使用或打出\",\r\n\t\t\t\t\tcheck: function () {\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\teffect: {\r\n\t\t\t\t\t\t\ttarget: function (card, player, target, current) {\r\n\t\t\t\t\t\t\t\tif (get.tag(card, \"respondSha\") && current < 0) return 0.6;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\trespondSha: true,\r\n\t\t\t\t\t\tskillTagFilter: function (player) {\r\n\t\t\t\t\t\t\tif (!player.countCards(\"hs\", \"shan\") || _status.currentPhase != player) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\torder: function () {\r\n\t\t\t\t\t\t\treturn get.order({ name: \"sha\" }) + 0.1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tuseful: -1,\r\n\t\t\t\t\t\tvalue: -1,\r\n\t\t\t\t\t\tyingbian: function (card, player, targets, viewer) {\r\n\t\t\t\t\t\t\tif (get.attitude(viewer, player) <= 0) return 0;\r\n\t\t\t\t\t\t\tvar base = 0,\r\n\t\t\t\t\t\t\t\thit = false;\r\n\t\t\t\t\t\t\tif (get.cardtag(card, \"yingbian_hit\")) {\r\n\t\t\t\t\t\t\t\thit = true;\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\ttargets.filter(function (target) {\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\ttarget.hasShan() &&\r\n\t\t\t\t\t\t\t\t\t\t\tget.attitude(viewer, target) < 0 &&\r\n\t\t\t\t\t\t\t\t\t\t\tget.damageEffect(target, player, viewer, get.nature(card)) > 0\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\tbase += 5;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (get.cardtag(card, \"yingbian_all\")) {\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t!targets.includes(current) &&\r\n\t\t\t\t\t\t\t\t\t\t\tlib.filter.targetEnabled2(card, player, current) &&\r\n\t\t\t\t\t\t\t\t\t\t\tget.effect(current, card, player, player) > 0\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\tbase += 5;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (get.cardtag(card, \"yingbian_damage\")) {\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\ttargets.filter(function (target) {\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\tget.attitude(player, target) < 0 &&\r\n\t\t\t\t\t\t\t\t\t\t\t(hit ||\r\n\t\t\t\t\t\t\t\t\t\t\t\t!target.mayHaveShan() ||\r\n\t\t\t\t\t\t\t\t\t\t\t\tplayer.hasSkillTag(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"directHit_ai\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttarget: target,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcard: card,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t\t\t\t\t\t)) &&\r\n\t\t\t\t\t\t\t\t\t\t\t!target.hasSkillTag(\"filterDamage\", null, {\r\n\t\t\t\t\t\t\t\t\t\t\t\tplayer: player,\r\n\t\t\t\t\t\t\t\t\t\t\t\tcard: card,\r\n\t\t\t\t\t\t\t\t\t\t\t\tjiu: true,\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\tbase += 5;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn base;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcanLink: function (player, target, card) {\r\n\t\t\t\t\t\t\tif (!target.isLinked() && !player.hasSkill(\"wutiesuolian_skill\")) return false;\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\ttarget.mayHaveShan() &&\r\n\t\t\t\t\t\t\t\t!player.hasSkillTag(\r\n\t\t\t\t\t\t\t\t\t\"directHit_ai\",\r\n\t\t\t\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\ttarget: target,\r\n\t\t\t\t\t\t\t\t\t\tcard: card,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\tif (player.hasSkill(\"jueqing\") || player.hasSkill(\"gangzhi\") || target.hasSkill(\"gangzhi\")) return false;\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbasic: {\r\n\t\t\t\t\t\t\tuseful: [5, 3, 1],\r\n\t\t\t\t\t\t\tvalue: [5, 3, 1],\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\ttarget: function (player, target, card, isLink) {\r\n\t\t\t\t\t\t\t\tvar eff = (function () {\r\n\t\t\t\t\t\t\t\t\tif (!isLink && player.hasSkill(\"jiu\")) {\r\n\t\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t\t!target.hasSkillTag(\"filterDamage\", null, {\r\n\t\t\t\t\t\t\t\t\t\t\t\tplayer: player,\r\n\t\t\t\t\t\t\t\t\t\t\t\tcard: card,\r\n\t\t\t\t\t\t\t\t\t\t\t\tjiu: true,\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (get.attitude(player, target) > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn -7;\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn -4;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\treturn -0.5;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn -1.5;\r\n\t\t\t\t\t\t\t\t})();\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t!isLink &&\r\n\t\t\t\t\t\t\t\t\ttarget.mayHaveShan() &&\r\n\t\t\t\t\t\t\t\t\t!player.hasSkillTag(\r\n\t\t\t\t\t\t\t\t\t\t\"directHit_ai\",\r\n\t\t\t\t\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\ttarget: target,\r\n\t\t\t\t\t\t\t\t\t\t\tcard: card,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\treturn eff / 1.2;\r\n\t\t\t\t\t\t\t\treturn eff;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttag: {\r\n\t\t\t\t\t\t\trespond: 1,\r\n\t\t\t\t\t\t\trespondShan: 1,\r\n\t\t\t\t\t\t\tdamage: function (card) {\r\n\t\t\t\t\t\t\t\tif (game.hasNature(card, \"poison\")) return false;\r\n\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tnatureDamage: function (card) {\r\n\t\t\t\t\t\t\t\tif (game.hasNature(card)) return 1;\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfireDamage: function (card, nature) {\r\n\t\t\t\t\t\t\t\tif (game.hasNature(card, \"fire\")) return 1;\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tthunderDamage: function (card, nature) {\r\n\t\t\t\t\t\t\t\tif (game.hasNature(card, \"thunder\")) return 1;\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tpoisonDamage: function (card, nature) {\r\n\t\t\t\t\t\t\t\tif (game.hasNature(card, \"poison\")) return 1;\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//德克萨斯\r\n\t\tjianyumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tusable: 1,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\t\t\t\t/** @type {Array<Card>} */\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tconst cards = get.cards(4);\r\n\t\t\t\tgame.cardsGotoOrdering(cards);\r\n\t\t\t\tplayer.showCards(cards, \"剑雨\");\r\n\t\t\t\tvar suit = [];\r\n\t\t\t\tfor (var i = 0; i < cards.length; i++) {\r\n\t\t\t\t\tvar suitcard = get.suit(cards[i]);\r\n\t\t\t\t\tif (suit.includes(suitcard)) continue;\r\n\t\t\t\t\tsuit.add(suitcard);\r\n\t\t\t\t}\r\n\t\t\t\tvar num = suit.length;\r\n\t\t\t\tif (player.countCards(\"he\") >= suit.length)\r\n\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t.chooseCard(\"he\", true, \"【剑雨】:将至少\" + num + \"张牌当作【万箭齐发】对你选择牌的等量名其他角色使用\", [num, Infinity])\r\n\t\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\treturn get.value(card) <= 6;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\telse return;\r\n\r\n\t\t\t\tif (result?.cards) {\r\n\t\t\t\t\tplayer.addTempSkill(\"jianyumrfz_dam\", \"jianyumrfzAfter\");\r\n\t\t\t\t\tplayer.chooseUseTarget({ name: \"wanjian\" }, result.cards, true, false).set(\"selectTarget\", function (card, player, target) {\r\n\t\t\t\t\t\tvar num = result.cards?.length || 1;\r\n\t\t\t\t\t\treturn [1, num];\r\n\t\t\t\t\t}).viewAs = true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdam: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.isAlive() && event.cards && event.card.name == \"wanjian\" && !event.player.hasSkill(\"jianyumrfz_debuff\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.player.addTempSkill(\"jianyumrfz_debuff\", { player: \"phaseEnd\" });\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdebuff: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"使用【杀】的次数-1\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num - 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 2.95,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tsudimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tfrequent: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// Main loop for skill repetition (original steps 6-7 goto 1)\r\n\t\t\t\twhile (event.count > 0 && player.hasSkill(event.name) && !get.is.blocked(event.name, player)) {\r\n\t\t\t\t\t// step 0 & 1\r\n\t\t\t\t\tevent.count--;\r\n\t\t\t\t\tevent.cards = game.cardsGotoOrdering(get.cards(2)).cards;\r\n\t\t\t\t\tif (_status.connectMode) {\r\n\t\t\t\t\t\tgame.broadcastAll(function () {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t_status.noclearcountdown = true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tevent.given_map = {};\r\n\r\n\t\t\t\t\t// step 2, 3, 4 loop (original event.goto(2))\r\n\t\t\t\t\twhile (event.cards && event.cards.length > 0) {\r\n\t\t\t\t\t\t// step 2\r\n\t\t\t\t\t\tif (event.cards.length > 1) {\r\n\t\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t\t.chooseCardButton(\"【速递】:请选择要分配的牌\", true, event.cards, [1, event.cards.length])\r\n\t\t\t\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\t\t\t\tif (ui.selected.buttons.length === 0) return 1;\r\n\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t} else if (event.cards.length === 1) {\r\n\t\t\t\t\t\t\tresult = { links: event.cards.slice(0), bool: true };\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// step 3\r\n\t\t\t\t\t\tif (result.links) {\r\n\t\t\t\t\t\t\tevent.cards = event.cards.filter(c => !result.links.includes(c));\r\n\t\t\t\t\t\t\tevent.togive = result.links.slice(0);\r\n\t\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t\t.chooseTarget(\"选择一名角色获得\" + get.translation(result.links), true)\r\n\t\t\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\t\t\tconst aiPlayer = _status.event.player;\r\n\t\t\t\t\t\t\t\t\tconst att = get.attitude(aiPlayer, target);\r\n\t\t\t\t\t\t\t\t\tif (_status.event.enemy) {\r\n\t\t\t\t\t\t\t\t\t\treturn -att;\r\n\t\t\t\t\t\t\t\t\t} else if (att > 0) {\r\n\t\t\t\t\t\t\t\t\t\treturn att / (1 + target.countCards(\"h\"));\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\treturn att / 100;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"enemy\", get.value(event.togive[0], player, \"raw\") < 0)\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t\t// step 4\r\n\t\t\t\t\t\t\tif (result.targets && result.targets.length) {\r\n\t\t\t\t\t\t\t\tconst id = result.targets[0].playerid;\r\n\t\t\t\t\t\t\t\tconst map = event.given_map;\r\n\r\n\t\t\t\t\t\t\t\tif (!id || !map) return;\r\n\r\n\t\t\t\t\t\t\t\tif (!map[id]) map[id] = [];\r\n\t\t\t\t\t\t\t\tmap[id].addArray(event.togive);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// step 5\r\n\t\t\t\t\tif (_status.connectMode) {\r\n\t\t\t\t\t\tgame.broadcastAll(function () {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tdelete _status.noclearcountdown;\r\n\t\t\t\t\t\t\tgame.stopCountChoose();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst list = [];\r\n\t\t\t\t\tfor (const i in event.given_map) {\r\n\t\t\t\t\t\tconst source = (_status.connectMode ? lib.playerOL : game.playerMap)[i];\r\n\t\t\t\t\t\tplayer.line(source, \"green\");\r\n\t\t\t\t\t\tlist.push([source, event.given_map[i]]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tawait game\r\n\t\t\t\t\t\t.loseAsync({\r\n\t\t\t\t\t\t\tgain_list: list,\r\n\t\t\t\t\t\t\tgiver: player,\r\n\t\t\t\t\t\t\tanimate: \"draw\",\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.setContent(\"gaincardMultiple\");\r\n\r\n\t\t\t\t\t// step 6: check repetition condition (while loop condition handles this)\r\n\t\t\t\t\tif (!player.hasSkill(event.name) || get.is.blocked(event.name, player)) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tresult = await player.chooseBool(get.prompt2(event.name)).set(\"frequentSkill\", event.name).forResult();\r\n\r\n\t\t\t\t\t// step 7: if player cancels, break the loop\r\n\t\t\t\t\tif (!result.bool) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// else: loop continues to next iteration (original event.goto(1))\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tthreaten: 1.1,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//白金\r\n\t\txujimrfz: {\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.xujimrfz = {\r\n\t\t\t\t\tdamage: 0,\r\n\t\t\t\t\tmaxhand: 0,\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar storage = player.storage.xujimrfz;\r\n\t\t\t\t\tvar str;\r\n\t\t\t\t\tif (storage[\"damage\"] > 0) str = \"下次使用【杀】的伤害基数+\" + storage[\"damage\"] + \"</br>\";\r\n\t\t\t\t\tif (storage[\"maxhand\"] > 0) str = str + \"手牌上限+\" + storage[\"maxhand\"];\r\n\t\t\t\t\tif (!str) return \"没有效果\";\r\n\t\t\t\t\treturn str;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 3,\r\n\t\t\ttrigger: { player: \"phaseDiscardBegin\" },\r\n\t\t\tfrequent: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.getHistory(\"useCard\", function (evt) {\r\n\t\t\t\t\t\tif (!get.tag(evt.card, \"damage\")) return false;\r\n\t\t\t\t\t\tif (evt.targets && evt.targets.length && evt.isPhaseUsing()) {\r\n\t\t\t\t\t\t\tvar targets = evt.targets.slice(0);\r\n\t\t\t\t\t\t\twhile (targets.includes(player)) targets.remove(player);\r\n\t\t\t\t\t\t\treturn targets.length > 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}).length === 0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\tplayer.storage.xujimrfz[\"damage\"] += 1;\r\n\t\t\t\tplayer.storage.xujimrfz[\"maxhand\"] += 5;\r\n\t\t\t\tif (player.hasUseTarget(\"sha\", false) && player.hasSha())\r\n\t\t\t\t\tresult = await player.chooseControl(\"摸牌\", \"出杀\").set(\"prompt\", \"【蓄击】:请选择一项\").forResult();\r\n\t\t\t\telse {\r\n\t\t\t\t\tvar num = 2 + player.storage.shiyumrfz_buff;\r\n\t\t\t\t\tplayer.draw(num || 2);\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (result && result.index == 0) {\r\n\t\t\t\t\tvar num = 2 + player.storage.shiyumrfz_buff;\r\n\t\t\t\t\tplayer.draw(num || 2);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.addTempSkill(\"xujimrfz_sha\", \"xujimrfzAfter\");\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.chooseToUse(\r\n\t\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t\tfunction (card, player, event) {\r\n\t\t\t\t\t\t\t\tif (get.name(card) != \"sha\") return false;\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\treturn lib.filter.filterCard.apply(this, arguments);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\"【蓄击】：请你使用一张【杀】\"\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t.set(\"logSkill\", \"xujimrfz\")\r\n\t\t\t\t\t\t.set(\"complexSelect\", true);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"xujimrfz_clear\", \"xujimrfz_dam\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tsha: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn event.card.name == \"sha\" && !event.getParent().directHit.includes(event.target);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlogTarget: \"target\",\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar storage = player.storage.shiyumrfz_buff;\r\n\t\t\t\t\t\tif (!storage) storage = 0;\r\n\t\t\t\t\t\tconst id = trigger.target.playerid;\r\n\t\t\t\t\t\tconst map = trigger.getParent()?.customArgs;\r\n\r\n\t\t\t\t\t\tif (!id || !map) return;\r\n\r\n\t\t\t\t\t\tif (!map[id]) map[id] = {};\r\n\t\t\t\t\t\tif (typeof map[id].shanRequired == \"number\") {\r\n\t\t\t\t\t\t\tmap[id].shanRequired++;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmap[id].shanRequired = 2 + storage;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tplayer.removeSkill(\"xujimrfz_sha\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.xujimrfz[\"maxhand\"] = 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn num + (player.storage.xujimrfz[\"maxhand\"] || 0);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdam: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.storage.xujimrfz[\"damage\"] < 1) return false;\r\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst storage = player.storage.xujimrfz[\"damage\"];\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"xujimrfz\");\r\n\t\t\t\t\t\tif (!trigger.baseDamage) trigger.baseDamage = 1;\r\n\t\t\t\t\t\ttrigger.baseDamage += storage;\r\n\t\t\t\t\t\tplayer.storage.xujimrfz[\"damage\"] = 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshiyumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationColor: \"wood\",\r\n\t\t\tjuexingji: true,\r\n\t\t\tforced: true,\r\n\t\t\tunique: true,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.num >= 2;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.storage.shiyumrfz = true;\r\n\t\t\t\tplayer.awakenSkill(\"shiyumrfz\");\r\n\t\t\t\tplayer.addSkill(\"shiyumrfz_buff\");\r\n\t\t\t\tif (!player.storage.shiyumrfz_buff) player.storage.shiyumrfz_buff = 0;\r\n\t\t\t\tplayer.storage.shiyumrfz_buff += 1;\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tbuff: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tattackRange: function (player, num) {\r\n\t\t\t\t\t\t\treturn (num += 1);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tviewHandcard: true,\r\n\t\t\t\t\t\tskillTagFilter(player, tag, arg) {\r\n\t\t\t\t\t\t\tif (player === arg || !player.inRange(arg)) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//因陀罗\r\n\t\tsuijiamrfz: {\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.suijiamrfz = {\r\n\t\t\t\t\tdel: false,\r\n\t\t\t\t\tdamage: 0,\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar isdel = player.storage.suijiamrfz[\"del\"];\r\n\t\t\t\treturn (isdel == false && event.player.hujia > 0) || isdel == true;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.num += 1 + player.storage.suijiamrfz[\"damage\"] || 1;\r\n\t\t\t},\r\n\t\t\tgroup: \"suijiamrfz_clear\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.suijiamrfz = {\r\n\t\t\t\t\t\t\tdel: false,\r\n\t\t\t\t\t\t\tdamage: 0,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thuquanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: [\"chooseToRespond\", \"chooseToUse\"],\r\n\t\t\thiddenCard: function (player, name) {\r\n\t\t\t\tif (player.countCards(\"h\") < 1 || player.hasSkill(\"huquanmrfz_ban\")) return false;\r\n\t\t\t\tif (name != \"shan\" && name != \"wuxie\") return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.hasSkill(\"huquanmrfz_ban\") || player.countCards(\"h\") < 1) return false;\r\n\t\t\t\tfor (var name of [\"wuxie\", \"shan\"]) {\r\n\t\t\t\t\tif (event.filterCard({ name: name, isCard: true }, player, event)) return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tchooseButton: {\r\n\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\tvar vcards = [];\r\n\t\t\t\t\tfor (var name of [\"wuxie\", \"shan\"]) {\r\n\t\t\t\t\t\tvar card = { name: name, isCard: true };\r\n\t\t\t\t\t\tif (event.filterCard && event.filterCard(card, player, event)) {\r\n\t\t\t\t\t\t\tif (name == \"shan\") vcards.push([\"基本\", \"\", name]);\r\n\t\t\t\t\t\t\tif (name == \"wuxie\") vcards.push([\"锦囊\", \"\", name]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * @type {Dialog}\r\n\t\t\t\t\t */\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tvar dialog = ui.create.dialog(\"虎拳\", [vcards, \"vcard\"], \"hidden\");\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tdialog.direct = true;\r\n\t\t\t\t\treturn dialog;\r\n\t\t\t\t},\r\n\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tfilterCard: card => {\r\n\t\t\t\t\t\t\treturn (card?.number || 0) > 5;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tselectCard: 1,\r\n\t\t\t\t\t\tviewAs: {\r\n\t\t\t\t\t\t\tname: links[0][2],\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t\tasync precontent(event, trigger, player) {\r\n\t\t\t\t\t\t\tlet result;\r\n\r\n\t\t\t\t\t\t\tconst list = [\"【碎甲】中{ }内的数字+1直到你下个回合结束\"];\r\n\t\t\t\t\t\t\tif (!player.storage.suijiamrfz)\r\n\t\t\t\t\t\t\t\tplayer.storage.suijiamrfz = {\r\n\t\t\t\t\t\t\t\t\tdel: false,\r\n\t\t\t\t\t\t\t\t\tdamage: 0,\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tif (player.storage.suijiamrfz[\"del\"] == false) list.push(\"删除【碎甲】中[ ]内的描述直到你下个回合结束\");\r\n\t\t\t\t\t\t\tif (list.length > 1)\r\n\t\t\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t\t\t.chooseControl()\r\n\t\t\t\t\t\t\t\t\t.set(\"choiceList\", list)\r\n\t\t\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.set(\"prompt\", \"【虎拳】:请选择一项\")\r\n\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tplayer.storage.suijiamrfz[\"damage\"] = +1;\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tplayer.logSkill(\"huquanmrfz\");\r\n\t\t\t\t\t\t\t\tplayer.addTempSkill(\"huquanmrfz_ban\", { global: \"phaseEnd\" });\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (result && result.index == 0) {\r\n\t\t\t\t\t\t\t\tplayer.storage.suijiamrfz[\"damage\"] = +1;\r\n\t\t\t\t\t\t\t} else player.storage.suijiamrfz[\"del\"] = true;\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"huquanmrfz\");\r\n\t\t\t\t\t\t\tplayer.addTempSkill(\"huquanmrfz_ban\", { global: \"phaseEnd\" });\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\treturn \"【虎拳】：视为使用一张【\" + get.translation(links[0][2]) + \"】\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\trespondShan: true,\r\n\t\t\t\torder: 10,\r\n\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\treturn (card?.number || 0) > 5;\r\n\t\t\t\t\t\t}) > 0 && !player.hasSkill(\"huquanmrfz_ban\")\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t\tresult: { player: 1 },\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//温米\r\n\t\tbaiweimrfz: {\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar storage = player.storage.baiweimrfz,\r\n\t\t\t\t\t\ttext;\r\n\t\t\t\t\tif (Object.keys(player.storage.baiweimrfz).length < 1) return \"没有记录的牌\";\r\n\t\t\t\t\tfor (var key in storage) {\r\n\t\t\t\t\t\ttext = (text === undefined ? \"\" : text) + get.translation(key) + \":\" + storage[key] + \"</br>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn text;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 4,\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.baiweimrfz = {};\r\n\t\t\t},\r\n\t\t\tenable: [\"chooseToUse\", \"chooseToRespond\"],\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.countCards(\"h\") < 1 || Object.keys(player.storage.baiweimrfz).length < 1) return false;\r\n\t\t\t\tfor (var i of lib.inpile) {\r\n\t\t\t\t\tvar type = get.type(i);\r\n\t\t\t\t\tif ((type == \"basic\" || type == \"trick\") && event.filterCard({ name: i }, player, event) && player.storage.baiweimrfz[i])\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tchooseButton: {\r\n\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\tvar number = {};\r\n\t\t\t\t\tfor (var i = 1; i <= lib.inpile.length; i++) {\r\n\t\t\t\t\t\tnumber[i] = [];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (var i = 1; i <= lib.inpile.length; i++) {\r\n\t\t\t\t\t\tfor (var j = 0; j < lib.inpile.length; j++) {\r\n\t\t\t\t\t\t\tvar name = lib.inpile[j];\r\n\t\t\t\t\t\t\tif (get.type(name) == \"delay\" || get.type(name) == \"equip\") continue;\r\n\t\t\t\t\t\t\tif (!event.filterCard({ name: name }, player, event)) continue;\r\n\t\t\t\t\t\t\tif (!player.storage.baiweimrfz[name]) continue;\r\n\t\t\t\t\t\t\tif (get.cardNameLength(name) == i) {\r\n\t\t\t\t\t\t\t\tif (name == \"sha\") {\r\n\t\t\t\t\t\t\t\t\tif (event.filterCard({ name: name }, player, event)) number[i].push([\"基本\", \"\", \"sha\"]);\r\n\t\t\t\t\t\t\t\t\tfor (var k of [\"fire\", \"thunder\", \"ice\", \"stab\"]) {\r\n\t\t\t\t\t\t\t\t\t\tif (event.filterCard({ name: name, nature: k }, player, event)) number[i].push([\"基本\", \"\", \"sha\", k]);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (get.type(name) == \"trick\" && event.filterCard({ name: name }, player, event))\r\n\t\t\t\t\t\t\t\t\tnumber[i].push([\"锦囊\", \"\", name]);\r\n\t\t\t\t\t\t\t\telse if (get.type(name) == \"basic\" && event.filterCard({ name: name }, player, event))\r\n\t\t\t\t\t\t\t\t\tnumber[i].push([\"基本\", \"\", name]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * @type {Dialog}\r\n\t\t\t\t\t */\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tvar dialog = ui.create.dialog;\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tdialog = [\"百味：请选择一张牌\"];\r\n\t\t\t\t\tfor (var i = 1; i < Object.keys(number).length; i++) {\r\n\t\t\t\t\t\tif (!number[i].length) continue;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tdialog.push('<div class=\"text center\">' + get.cnNumber(i) + \"字</div>\");\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tdialog.push([number[i], \"vcard\"]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn dialog;\r\n\t\t\t\t},\r\n\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tfilterCard: function (card) {\r\n\t\t\t\t\t\t\tvar selected = ui.selected.cards,\r\n\t\t\t\t\t\t\t\tnum = get.cardNameLength(links[0][2]);\r\n\t\t\t\t\t\t\tif (selected.length) {\r\n\t\t\t\t\t\t\t\tvar num2 = 0;\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < selected.length; i++) {\r\n\t\t\t\t\t\t\t\t\tnum2 += get.cardNameLength(selected[i]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tnum -= num2;\r\n\t\t\t\t\t\t\t\treturn get.cardNameLength(card) <= num;\r\n\t\t\t\t\t\t\t} else return get.cardNameLength(card) <= num;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tselectCard: function () {\r\n\t\t\t\t\t\t\tvar num = Infinity,\r\n\t\t\t\t\t\t\t\tselected = ui.selected.cards,\r\n\t\t\t\t\t\t\t\tnum2 = get.cardNameLength(links[0][2]);\r\n\t\t\t\t\t\t\tif (selected.length) {\r\n\t\t\t\t\t\t\t\tvar num3 = 0;\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < selected.length; i++) {\r\n\t\t\t\t\t\t\t\t\tnum3 += get.cardNameLength(selected[i]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif ((num = Infinity)) num = 1;\r\n\t\t\t\t\t\t\t\tif (num3 != num2) num = num + selected.length;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn num;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\taudio: \"baiweimrfz\",\r\n\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t\tcheck: function (card) {\r\n\t\t\t\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tposition: \"h\",\r\n\t\t\t\t\t\tviewAs: { name: links[0][2], nature: links[0][3] },\r\n\t\t\t\t\t\tasync precontent(event, trigger, player) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tconst name = lib.skill.baiweimrfz_backup.viewAs.name;\r\n\t\t\t\t\t\t\tplayer.storage.baiweimrfz[name]--;\r\n\t\t\t\t\t\t\tif (player.storage.baiweimrfz[name] == 0) delete player.storage.baiweimrfz[name];\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\"将任意张字数之和为\" +\r\n\t\t\t\t\t\tget.cnNumber(links[0][2]) +\r\n\t\t\t\t\t\t\"的牌为当做\" +\r\n\t\t\t\t\t\t(get.translation(links[0][3]) || \"\") +\r\n\t\t\t\t\t\tget.translation(links[0][2]) +\r\n\t\t\t\t\t\t\"使用\"\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\thiddenCard: function (player, name) {\r\n\t\t\t\tif (!lib.inpile.includes(name)) return false;\r\n\t\t\t\tvar type = get.type(name);\r\n\t\t\t\treturn (type == \"basic\" || type == \"trick\") && player.storage.baiweimrfz[name] && player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tfireAttack: true,\r\n\t\t\t\trespondShan: true,\r\n\t\t\t\trespondSha: true,\r\n\t\t\t\tskillTagFilter: function (player) {\r\n\t\t\t\t\tif (!player.countCards(\"h\") || player.hasSkill(\"baiweimrfz_ban\")) return false;\r\n\t\t\t\t},\r\n\t\t\t\torder: 1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: function (player) {\r\n\t\t\t\t\t\tif (_status.event.dying) return get.attitude(player, _status.event.dying);\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: \"baiweimrfz_use\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\tuse: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"useCard\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!event.card || !event.card.isCard || player.hasSkill(\"baiweimrfz_ban\")) return false;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn get.type(event.card) == \"trick\" || get.type(event.card) == \"basic\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar name = trigger.card.name;\r\n\t\t\t\t\t\tif (!player.storage.baiweimrfz) player.storage.baiweimrfz = {};\r\n\t\t\t\t\t\tif (player.storage.baiweimrfz[name]) {\r\n\t\t\t\t\t\t\tplayer.storage.baiweimrfz[name]++;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tplayer.storage.baiweimrfz[name] = 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (trigger.player != player && _status.currentPhase != player) player.addTempSkill(\"baiweimrfz_ban\", { global: \"phaseEnd\" });\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tnuanxiangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.hasSkill(\"nuanxiangmrfz_ban\")) return false;\r\n\t\t\t\treturn event.card && event.card.cards && !event.card.isCard;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"【暖香】:是否令至多\" + get.cnNumber(event.card.cards.length) + \"名角色摸一张牌？\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst num = trigger.card.cards.length;\r\n\t\t\t\tplayer.addTempSkill(\"nuanxiangmrfz_ban\", { global: \"phaseEnd\" });\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseTarget(true, [1, num], \"【暖香】:请选择至多\" + get.cnNumber(num) + \"名角色\")\r\n\t\t\t\t\t.set(\"ai\", target => get.attitude(player, target) > 0)\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"nuanxiangmrfz\");\r\n\t\t\t\t\tfor (var i of result.targets) {\r\n\t\t\t\t\t\tplayer.line(i);\r\n\t\t\t\t\t\ti.draw();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//梅尔\r\n\t\tshuitamrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"expansion\",\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t},\r\n\t\t\tonremove: function (player, skill) {\r\n\t\t\t\tvar cards = player.getExpansions(skill);\r\n\t\t\t\tif (cards.length) player.loseToDiscardpile(cards);\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tignoredHandcard: function (card, player) {\r\n\t\t\t\t\tif (card.hasGaintag(\"shuitamrfzx\")) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcardDiscardable: function (card, player, name) {\r\n\t\t\t\t\tif (name == \"phaseDiscard\" && card.hasGaintag(\"shuitamrfzx\")) return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tderivation: [\"baopomrfz\", \"mihuomrfz\"],\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tlocked: false,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (event.name != \"phase\" || game.phaseNumber == 0) && player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseCard(true, \"【水獭】:请选择至多三张牌并标记为‘咪啵’\", [1, 3])\r\n\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\treturn get.type(card) != \"equip\" && get.type(card) != \"delay\";\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\tif (result.cards) {\r\n\t\t\t\t\tplayer.addGaintag(result.cards, \"shuitamrfzx\");\r\n\t\t\t\t\tfor (let i of result.cards) {\r\n\t\t\t\t\t\ti.storage.shuitamrfzx = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst { index } = await player\r\n\t\t\t\t\t.chooseControl(\"爆破\", \"迷惑\")\r\n\t\t\t\t\t.set(\"prompt\", \"【水獭】:请选择获得一个技能\")\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\treturn [0, 1].randomGet();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\tif (index === 0) {\r\n\t\t\t\t\tplayer.addSkill(\"baopomrfz\");\r\n\t\t\t\t} else if (index === 1) {\r\n\t\t\t\t\tplayer.addSkill(\"mihuomrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"shuitamrfz_reget\", \"shuitamrfz_end\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tend: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.getExpansions(\"shuitamrfz\").length > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet result;\r\n\r\n\t\t\t\t\t\tconst cards = player.getExpansions(\"shuitamrfz\");\r\n\t\t\t\t\t\tif (cards.length == 1) {\r\n\t\t\t\t\t\t\tfor (let i of cards) {\r\n\t\t\t\t\t\t\t\ti.storage.shuitamrfzx = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tplayer.gain(cards, \"gain2\").gaintag = [\"shuitamrfzx\"];\r\n\t\t\t\t\t\t\tgame.log(player, \"收回了\" + get.translation(cards));\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"shuitamrfz\");\r\n\t\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t\t.chooseButton([\"【水獭】:请选择获得其中一张牌\", cards])\r\n\t\t\t\t\t\t\t\t.set(\"ai\", button => get.value(button.links))\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result?.links) {\r\n\t\t\t\t\t\t\tfor (let i of result.links) {\r\n\t\t\t\t\t\t\t\ti.storage.shuitamrfzx = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tplayer.gain(result.links, \"gain2\").gaintag = [\"shuitamrfzx\"];\r\n\t\t\t\t\t\t\tgame.log(player, \"收回了\" + get.translation(result.links));\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"shuitamrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\treget: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"loseAfter\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar evt = event.getl(player);\r\n\t\t\t\t\t\tif (!evt || !evt.hs || !evt.hs.length) return false;\r\n\t\t\t\t\t\tif (event.name == \"lose\") {\r\n\t\t\t\t\t\t\tfor (var i in event.gaintag_map) {\r\n\t\t\t\t\t\t\t\tif (event.gaintag_map[i].includes(\"shuitamrfzx\")) return true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn player.hasHistory(\"lose\", function (evt) {\r\n\t\t\t\t\t\t\tif (event != evt.getParent()) return false;\r\n\t\t\t\t\t\t\tfor (var i in evt.gaintag_map) {\r\n\t\t\t\t\t\t\t\tif (evt.gaintag_map[i].includes(\"shuitamrfzx\")) return true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (trigger.delay == false) game.delay();\r\n\t\t\t\t\t\tvar cards = [];\r\n\t\t\t\t\t\tfor (var i = 0; i < trigger.cards2.length; i++) {\r\n\t\t\t\t\t\t\tvar card = trigger.cards2[i];\r\n\t\t\t\t\t\t\tif (card.storage.shuitamrfzx) {\r\n\t\t\t\t\t\t\t\tcards.push(card);\r\n\t\t\t\t\t\t\t\tclearTimeout(card.timeout);\r\n\t\t\t\t\t\t\t\tcard.classList.remove(\"removing\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (cards.length > 0) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"shuitamrfz\");\r\n\t\t\t\t\t\t\tplayer.addToExpansion(cards, player, \"giveAuto\").gaintag.add(\"shuitamrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tbaopomrfz: {\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.baopomrfz = false;\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tlimited: true,\r\n\t\t\tcharlotte: true,\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationColor: \"gray\",\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t!player.storage.baopomrfz &&\r\n\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\treturn card.storage.shuitamrfzx;\r\n\t\t\t\t\t}) > 0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (player.hasUnknown()) return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// step 0\r\n\t\t\t\tplayer.awakenSkill(event.name);\r\n\t\t\t\tplayer.storage.baopomrfz = true;\r\n\t\t\t\tplayer.removeGaintag(\"shuitamrfzx\");\r\n\t\t\t\tfor (const card of player.getCards(\"h\")) {\r\n\t\t\t\t\tdelete card.storage.shuitamrfzx;\r\n\t\t\t\t}\r\n\t\t\t\tplayer.addTempSkill(\"baopomrfz_tmp\", { player: \"baopomrfzAfter\" });\r\n\r\n\t\t\t\tresult = await player\r\n\t\t\t\t\t.chooseTarget(true, \"【爆破】:请选择至多三名其他角色\", [1, 3], (card, player, target) => {\r\n\t\t\t\t\t\treturn target !== player;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\treturn get.damageEffect(target, player) && !target.hasSkillTag(\"nofire\");\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t// step 1\r\n\t\t\t\tif (result.targets && result.targets.length) {\r\n\t\t\t\t\tevent.targets = result.targets;\r\n\t\t\t\t\tevent.cards = [];\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 2 & 3 loop (original event.goto(2))\r\n\t\t\t\twhile (event.targets.length > 0) {\r\n\t\t\t\t\tconst currentTarget = event.targets[0];\r\n\r\n\t\t\t\t\t// step 2: judge with custom judge2\r\n\t\t\t\t\tconst judgeEvent = currentTarget.judge(card => {\r\n\t\t\t\t\t\tif (get.color(card) === \"red\") return -4;\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tjudgeEvent.judge2 = judgeResult => {\r\n\t\t\t\t\t\treturn judgeResult.bool === false;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tresult = await judgeEvent.forResult();\r\n\r\n\t\t\t\t\t// step 3 logic\r\n\t\t\t\t\tif (result.bool === false) {\r\n\t\t\t\t\t\tawait currentTarget.damage(2, \"fire\");\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"baopomrfz\", currentTarget);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (result.card) event.cards.push(result.card);\r\n\t\t\t\t\tevent.targets.shift();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 4\r\n\t\t\t\tif (event.cards && event.cards.length) {\r\n\t\t\t\t\tconst cards = [];\r\n\t\t\t\t\tfor (const card of event.cards) {\r\n\t\t\t\t\t\tif (get.position(card, true) === \"d\") {\r\n\t\t\t\t\t\t\tcards.push(card);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (const card of cards) {\r\n\t\t\t\t\t\tcard.storage.shuitamrfzx = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst next = player.gain(cards, \"gain2\");\r\n\t\t\t\t\tnext.gaintag.add(\"shuitamrfzx\");\r\n\t\t\t\t\tawait next;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\ttmp: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tmihuomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"damageBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.source == undefined) return false;\r\n\t\t\t\treturn player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"【迷惑】:你可以令\" + get.translation(event.source) + \"展示你的一张手牌，若为‘咪啵’则此伤害-1\";\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tfor (var i of player.getCards(\"h\")) {\r\n\t\t\t\t\tif (i.storage.shuitamrfzx) return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst result = await trigger.source.choosePlayerCard(player, \"h\", true).forResult();\r\n\r\n\t\t\t\tif (!result.cards) return;\r\n\r\n\t\t\t\tplayer.showCards(\r\n\t\t\t\t\tresult.cards,\r\n\t\t\t\t\tget.translation(trigger.source) +\r\n\t\t\t\t\t\t\"展示了\" +\r\n\t\t\t\t\t\tget.translation(player) +\r\n\t\t\t\t\t\t\"一张牌</br>此牌\" +\r\n\t\t\t\t\t\t(result.cards[0].storage.shuitamrfzx ? \"<font color=#FF0000>有</font>\" : \"<font color=#00FF1A>无</font>\") +\r\n\t\t\t\t\t\t\"‘咪啵’标记\"\r\n\t\t\t\t);\r\n\t\t\t\tif (result.cards[0].storage.shuitamrfzx) {\r\n\t\t\t\t\tplayer.discard(result.cards[0]);\r\n\t\t\t\t\ttrigger.num--;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\t//凛冬\r\n\t\tdongjiangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn current != player && get.attitude(current, player) > 0;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// Steps 0-3 loop (original event.goto(0))\r\n\t\t\t\twhile (player.countCards(\"h\") > 0) {\r\n\t\t\t\t\t// step 0\r\n\t\t\t\t\tresult = await player.chooseCard(\"【冬将】:请选择你要分配的牌\", true, [1, Infinity]).forResult();\r\n\r\n\t\t\t\t\t// step 1\r\n\t\t\t\t\tlet cards = result.cards;\r\n\r\n\t\t\t\t\tif (!cards) continue;\r\n\r\n\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t.chooseTarget(\"【冬将】:请选择你要分配的角色（\" + get.translation(cards) + \"）\", true, (card, player, target) => {\r\n\t\t\t\t\t\t\treturn target !== player;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\treturn get.attitude(target, player) > 0;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t// step 2\r\n\t\t\t\t\tif (result.targets) await player.give(cards, result.targets[0]);\r\n\t\t\t\t\t// step 3: loop condition checked at while start\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// step 4\r\n\t\t\t\tif (player.hasUseTarget(\"sha\")) {\r\n\t\t\t\t\tplayer.addTempSkill(\"dongjiangmrfz_dam\", \"useCardAfter\");\r\n\t\t\t\t\tawait player\r\n\t\t\t\t\t\t.chooseUseTarget(\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\t\t\tisCard: true,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\"请选择【杀】的目标\"\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t.set(\"forced\", true)\r\n\t\t\t\t\t\t.set(\"addCount\", false)\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdam: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card.name == \"sha\" && event.card.cards.length == 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.drawTo(3);\r\n\t\t\t\t\t\tplayer.removeSkill(\"dongjiangmrfz_dam\");\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"dongjiangmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txianlingmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\t// Steps 0-1 Loop: Player prepares to use a card (draw until usable)\r\n\t\t\t\twhile (true) {\r\n\t\t\t\t\tconst cards = player.getCards(\"h\");\r\n\t\t\t\t\tif (player.countCards(\"h\") < 1) {\r\n\t\t\t\t\t\tawait player.draw();\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet hasUsable = false;\r\n\t\t\t\t\tfor (const card of cards) {\r\n\t\t\t\t\t\tif (player.hasUseTarget(card, false)) {\r\n\t\t\t\t\t\t\thasUsable = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (hasUsable) break;\r\n\t\t\t\t\tawait player.draw();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Step 2: Player chooses to use a card\r\n\t\t\t\tawait player\r\n\t\t\t\t\t.chooseToUse(\"【先领】:请使用一张牌\", true)\r\n\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\r\n\t\t\t\t\t\treturn player.canUse(card, target, false);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"addCount\", false)\r\n\t\t\t\t\t.set(\"forced\", true);\r\n\r\n\t\t\t\t// Steps 3-4: Select target to repeat (if not round 1)\r\n\t\t\t\tif (game.roundNumber !== 1) {\r\n\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t.chooseTarget(\"【先领】:你可以令一名其他角色执行一次相同的流程\", (card, player, target) => {\r\n\t\t\t\t\t\t\treturn target !== player;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\treturn get.attitude(target, player) > 0;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\tif (result.targets && result.targets.length) {\r\n\t\t\t\t\t\tevent.target = result.targets[0];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Steps 5-6 Loop: Target prepares to use a card (draw until usable)\r\n\t\t\t\twhile (true) {\r\n\t\t\t\t\tconst cards = event.target.getCards(\"h\");\r\n\t\t\t\t\tif (event.target.countCards(\"h\") < 1) {\r\n\t\t\t\t\t\tawait event.target.draw();\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet hasUsable = false;\r\n\t\t\t\t\tfor (const card of cards) {\r\n\t\t\t\t\t\tif (event.target.hasUseTarget(card, false)) {\r\n\t\t\t\t\t\t\thasUsable = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (hasUsable) break;\r\n\t\t\t\t\tawait event.target.draw();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Step 7: Target chooses to use a card\r\n\t\t\t\tawait event.target\r\n\t\t\t\t\t.chooseToUse(\"【先领】:请使用一张牌\")\r\n\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\r\n\t\t\t\t\t\treturn event.target.canUse(card, target, false);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"addCount\", false)\r\n\t\t\t\t\t.set(\"forced\", true);\r\n\t\t\t},\r\n\t\t},\r\n\t\t//陨星\r\n\t\tdingyuanmrfz: {\r\n\t\t\tderivation: \"zhimingmrfz\",\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar storage = player.storage.yxliumingmrfz_count;\r\n\t\t\t\t\tif (player.awakenedSkills && player.awakenedSkills.includes(\"dingyuanmrfz\")) {\r\n\t\t\t\t\t\treturn \"置于过武将牌上的牌:\" + get.translation(storage[\"card\"]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\"已置于过武将牌上\" +\r\n\t\t\t\t\t\tstorage[\"count\"] +\r\n\t\t\t\t\t\t\"张牌</br>置于过武将牌上的牌（装备牌和延时锦囊除外）:\" +\r\n\t\t\t\t\t\tget.translation(storage[\"card\"])\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationColor: \"thunder\",\r\n\t\t\tunique: true,\r\n\t\t\tjuexingji: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseZhunbeiBegin\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.storage.yxliumingmrfz_count[\"count\"] >= 3;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.awakenSkill(\"dingyuanmrfz\");\r\n\t\t\t\tplayer.loseMaxHp();\r\n\t\t\t\tplayer.addSkill(\"zhimingmrfz\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tyxliumingmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseBegin\",\r\n\t\t\t},\r\n\t\t\tmarktext: \"铭\",\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"expansion\",\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t},\r\n\t\t\tonremove: function (player, skill) {\r\n\t\t\t\tvar cards = player.getExpansions(skill);\r\n\t\t\t\tif (cards.length) player.loseToDiscardpile(cards);\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.getExpansions(\"yxliumingmrfz\").length < 1;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar cards = game.cardsGotoOrdering(get.cards(1)).cards[0];\r\n\t\t\t\tplayer.addToExpansion(cards, player, \"giveAuto\").gaintag.add(\"yxliumingmrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"yxliumingmrfz_target\", \"yxliumingmrfz_use\", \"yxliumingmrfz_count\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tcount: {\r\n\t\t\t\t\tinit: function (player) {\r\n\t\t\t\t\t\tplayer.storage.yxliumingmrfz_count = {\r\n\t\t\t\t\t\t\tcount: 0,\r\n\t\t\t\t\t\t\tcard: [],\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: function (player) {\r\n\t\t\t\t\t\tdelete player.storage.yxliumingmrfz_count;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"addToExpansionAfter\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn event.getParent().name == \"yxliumingmrfz\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (!player.storage.yxliumingmrfz_count)\r\n\t\t\t\t\t\t\tplayer.storage.yxliumingmrfz_count = {\r\n\t\t\t\t\t\t\t\tcount: 0,\r\n\t\t\t\t\t\t\t\tcard: [],\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\tif (!player.awakenedSkills || !player.awakenedSkills.includes(\"dingyuanmrfz\")) player.storage.yxliumingmrfz_count[\"count\"]++;\r\n\t\t\t\t\t\tif (trigger.cards) {\r\n\t\t\t\t\t\t\tfor (var i of trigger.cards) {\r\n\t\t\t\t\t\t\t\tif (get.type(i) == \"equip\" || get.type(i) == \"delay\") continue;\r\n\t\t\t\t\t\t\t\tif (player.storage.yxliumingmrfz_count[\"card\"].includes(i.name)) continue;\r\n\t\t\t\t\t\t\t\tplayer.storage.yxliumingmrfz_count[\"card\"].add(i.name);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\tuse: {\r\n\t\t\t\t\tenable: \"chooseToUse\",\r\n\t\t\t\t\thiddenCard: function (player, name) {\r\n\t\t\t\t\t\tif (player.getExpansions(\"yxliumingmrfz\").length < 1) return false;\r\n\t\t\t\t\t\treturn name == player.getExpansions(\"yxliumingmrfz\")[0].name;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.getExpansions(\"yxliumingmrfz\").length < 1) return false;\r\n\t\t\t\t\t\treturn event.filterCard({ name: player.getExpansions(\"yxliumingmrfz\")[0].name, isCard: true }, player, event);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tchooseButton: {\r\n\t\t\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\t\t\tvar vcards = [];\r\n\t\t\t\t\t\t\tvar card = player.getExpansions(\"yxliumingmrfz\")[0].name;\r\n\t\t\t\t\t\t\tvar type = get.translation(get.type2(card));\r\n\t\t\t\t\t\t\tif (event.filterCard({ name: card, isCard: true }, player, event)) vcards.push([type, \"\", card]);\r\n\r\n\t\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t\t * @type { Dialog }\r\n\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tvar dialog = ui.create.dialog(\"流铭\", [vcards, \"vcard\"], \"hidden\");\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tdialog.direct = true;\r\n\t\t\t\t\t\t\treturn dialog;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tfilterCard: card => {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\t\treturn !!player.getExpansions(\"yxliumingmrfz\")[0];\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tselectCard: -1,\r\n\t\t\t\t\t\t\t\tposition: \"x\",\r\n\t\t\t\t\t\t\t\tviewAs: {\r\n\t\t\t\t\t\t\t\t\tname: links[0][2],\r\n\t\t\t\t\t\t\t\t\tnature: links[0][3],\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tasync precontent(event, trigger, player) {\r\n\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\tplayer.logSkill(\"yxliumingmrfz\");\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\"【流铭】：使用一张\" + (links[0][3] ? get.translation(links[0][3]) : \"\") + \"【\" + get.translation(links[0][2]) + \"】\"\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\torder: function () {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tvar card = player.getExpansions(\"yxliumingmrfz\")[0];\r\n\t\t\t\t\t\t\treturn get.order(card) + 0.1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttarget: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\ttarget: \"useCardToPlayered\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.player == player) return false;\r\n\t\t\t\t\t\tif (player.getExpansions(\"yxliumingmrfz\").length == 0 || !event.card) return false;\r\n\t\t\t\t\t\tvar suit = get.suit(event.card);\r\n\t\t\t\t\t\treturn !!player.getExpansions(\"yxliumingmrfz\").filter(function (magic) {\r\n\t\t\t\t\t\t\treturn get.suit(magic) == suit || magic.number != event.card.number;\r\n\t\t\t\t\t\t}).length;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst card = player.getExpansions(\"yxliumingmrfz\")[0];\r\n\t\t\t\t\t\tvar num1 = card.number,\r\n\t\t\t\t\t\t\tnum2 = trigger.card.number;\r\n\t\t\t\t\t\tif (num1 != num2) {\r\n\t\t\t\t\t\t\tvar type = get.type2(card);\r\n\t\t\t\t\t\t\tvar eff = get.effect(player, trigger.card, trigger.player, trigger.player);\r\n\t\t\t\t\t\t\tconst result = await trigger.player\r\n\t\t\t\t\t\t\t\t.chooseToDiscard(\r\n\t\t\t\t\t\t\t\t\t\"【流铭】:请弃置一张\" + get.translation(get.type(card)) + \"牌，否则此牌对\" + get.translation(player) + \"无效\"\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t.set(\"filterCard\", function (card) {\r\n\t\t\t\t\t\t\t\t\treturn get.type2(card) == _status.event.type;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\t\t\tif (_status.event.eff > 0) {\r\n\t\t\t\t\t\t\t\t\t\treturn 10 - get.value(card);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"eff\", eff)\r\n\t\t\t\t\t\t\t\t.set(\"type\", type)\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\t\tif (result.bool == false) {\r\n\t\t\t\t\t\t\t\ttrigger.targets.remove(player);\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\ttrigger.getParent().triggeredTargets2.remove(player);\r\n\t\t\t\t\t\t\t\ttrigger.untrigger();\r\n\t\t\t\t\t\t\t\tplayer.removeSkill(\"yxliumingmrfz_target\");\r\n\t\t\t\t\t\t\t\tplayer.addTempSkill(\"yxliumingmrfz_reget\", { global: \"phaseBegin\" });\r\n\t\t\t\t\t\t\t\tplayer.addTempSkill(\"yxliumingmrfz_ban\", { global: \"phaseEnd\" });\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tconst cardx = player.getExpansions(\"yxliumingmrfz\")[0];\r\n\t\t\t\t\t\tif (get.suit(cardx) == get.suit(trigger.card)) {\r\n\t\t\t\t\t\t\tplayer.gain(cardx, \"gain2\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"yxliumingmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\treget: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addSkill(\"yxliumingmrfz_target\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhimingmrfz: {\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar storage = player.storage.yxliumingmrfz_count;\r\n\t\t\t\t\tif (player.awakenedSkills && player.awakenedSkills.includes(\"dingyuanmrfz\")) {\r\n\t\t\t\t\t\treturn \"置于过武将牌上的牌（装备牌和延时锦囊除外）:\" + get.translation(storage[\"card\"]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\"已置于过武将牌上\" +\r\n\t\t\t\t\t\tstorage[\"count\"] +\r\n\t\t\t\t\t\t\"张牌</br>置于过武将牌上的牌（装备牌和延时锦囊除外）:\" +\r\n\t\t\t\t\t\tget.translation(storage[\"card\"])\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tenable: [\"chooseToUse\", \"chooseToRespond\"],\r\n\t\t\thiddenCard: function (player, name) {\r\n\t\t\t\tvar cards = player.storage.yxliumingmrfz_count[\"card\"];\r\n\t\t\t\tif (player.countCards(\"he\") < 1 || !cards || player.hasSkill(\"zhimingmrfz_ban\")) return false;\r\n\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\tif (name == i) return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar cards = player.storage.yxliumingmrfz_count[\"card\"];\r\n\t\t\t\tif (player.countCards(\"he\") < 1 || !cards || player.hasSkill(\"zhimingmrfz_ban\")) return false;\r\n\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\tif (event.filterCard({ name: i, isCard: true }, player, event)) return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tchooseButton: {\r\n\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\tvar vcards = [];\r\n\t\t\t\t\tvar list = player.storage.yxliumingmrfz_count[\"card\"];\r\n\t\t\t\t\tfor (var name of list) {\r\n\t\t\t\t\t\tvar card = { name: name, isCard: true };\r\n\t\t\t\t\t\tvar type = get.type(name);\r\n\t\t\t\t\t\tif (event.filterCard(card, player, event)) vcards.push([type, \"\", name]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * @type { Dialog }\r\n\t\t\t\t\t */\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tvar dialog = ui.create.dialog(\"祗铭\", [vcards, \"vcard\"], \"hidden\");\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tdialog.direct = true;\r\n\t\t\t\t\treturn dialog;\r\n\t\t\t\t},\r\n\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tfilterCard: () => true,\r\n\t\t\t\t\t\tselectCard: 1,\r\n\t\t\t\t\t\tviewAs: {\r\n\t\t\t\t\t\t\tname: links[0][2],\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tposition: \"he\",\r\n\t\t\t\t\t\tasync precontent(event, trigger, player) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"zhimingmrfz\");\r\n\t\t\t\t\t\t\tplayer.addTempSkill(\"zhimingmrfz_ban\", { global: \"phaseEnd\" });\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\treturn \"【祗铭】：将一张牌当作【\" + get.translation(links[0][2]) + \"】使用或打出\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//羽毛笔\r\n\t\ttiaojiumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\taudioname: [\"longshelanmrfz\"],\r\n\t\t\tderivation: [\"jiu\"],\r\n\t\t\tenable: \"chooseToUse\",\r\n\t\t\tfilterCard: function (card, player) {\r\n\t\t\t\tif (ui.selected.cards.length) {\r\n\t\t\t\t\treturn get.color(card) != get.color(ui.selected.cards[0]);\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tcomplexCard: true,\r\n\t\t\tselectCard: 2,\r\n\t\t\tviewAs: {\r\n\t\t\t\tname: \"jiu\",\r\n\t\t\t},\r\n\t\t\tposition: \"hs\",\r\n\t\t\tviewAsFilter: function (player) {\r\n\t\t\t\tvar hs = player.getCards(\"hs\");\r\n\t\t\t\tif (hs.length < 2) return false;\r\n\t\t\t\tvar bool = false,\r\n\t\t\t\t\tmap = {};\r\n\t\t\t\tfor (var card of hs) {\r\n\t\t\t\t\tvar color = get.color(card);\r\n\t\t\t\t\tif (!map[color]) map[color] = true;\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tbool = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!bool) return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tprompt: \"【调酒】:将两张不同颜色的手牌当酒使用\",\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\treturn 10 - get.value(card);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.5,\r\n\t\t\t\torder: () => {\r\n\t\t\t\t\tlet player = _status.event.player;\r\n\t\t\t\t\tif (_status.event.dying) return 9;\r\n\t\t\t\t\tlet cards = player.getCards(\"h\", card => {\r\n\t\t\t\t\t\treturn get.type(card) != \"equip\" && get.type(card) != \"delay\";\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (cards.length > 0) return 13;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t},\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: 1,\r\n\t\t\t\t},\r\n\t\t\t\ttag: {\r\n\t\t\t\t\tsave: 1,\r\n\t\t\t\t\trecover: 0.1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\trujingmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\tlastDo: true,\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar storage = player.storage.rujingmrfz;\r\n\t\t\t\t\tstorage[\"number\"].sort(function (a, b) {\r\n\t\t\t\t\t\treturn a - b;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvar str1 = \"\",\r\n\t\t\t\t\t\tstr2 = \"\";\r\n\t\t\t\t\tif (storage[\"number\"].length) str1 = str1 + storage[\"number\"];\r\n\t\t\t\t\telse str1 = \"无\";\r\n\t\t\t\t\tif (storage[\"suit\"].length) str2 = str2 + get.translation(storage[\"suit\"]);\r\n\t\t\t\t\telse str2 = \"无\";\r\n\t\t\t\t\treturn \"记录的数字:\" + str1 + \"</br>\" + \"记录的花色:\" + str2;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tinit: player => {\r\n\t\t\t\tplayer.storage.rujingmrfz = {\r\n\t\t\t\t\tsuit: [],\r\n\t\t\t\t\tnumber: [],\r\n\t\t\t\t\tban: [],\r\n\t\t\t\t\tcard: [],\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tonremove: player => {\r\n\t\t\t\tdelete player.storage.rujingmrfz;\r\n\t\t\t},\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.card && (event.card.number || event.card.suit);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (!player.storage.rujingmrfz)\r\n\t\t\t\t\tplayer.storage.rujingmrfz = {\r\n\t\t\t\t\t\tsuit: [],\r\n\t\t\t\t\t\tnumber: [],\r\n\t\t\t\t\t\tban: [],\r\n\t\t\t\t\t\tcard: [],\r\n\t\t\t\t\t};\r\n\t\t\t\tvar card = trigger.card,\r\n\t\t\t\t\tstorage = player.storage.rujingmrfz;\r\n\t\t\t\tif (!storage[\"card\"].includes(trigger.card)) {\r\n\t\t\t\t\tif (card.number && !storage[\"number\"].includes(card.number)) {\r\n\t\t\t\t\t\tplayer.storage.rujingmrfz[\"number\"].add(card.number);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (card.suit && !storage[\"suit\"].includes(card.suit) && card.suit != \"none\") {\r\n\t\t\t\t\t\tplayer.storage.rujingmrfz[\"suit\"].add(card.suit);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else player.storage.rujingmrfz[\"card\"].remove(trigger.card);\r\n\t\t\t},\r\n\t\t\tgroup: [\"rujingmrfz_addcount\", \"rujingmrfz_clear\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseUseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.storage.rujingmrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.rujingmrfz[\"ban\"] = [];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\taddcount: {\r\n\t\t\t\t\taudio: \"rujingmrfz\",\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar storage = player.storage.rujingmrfz;\r\n\t\t\t\t\t\tif (!event.card || !(event.card.number && event.card.suit)) return false;\r\n\t\t\t\t\t\tvar cardNumber = event.card.number;\r\n\t\t\t\t\t\tvar cardSuit = event.card.suit;\r\n\t\t\t\t\t\tif (!storage[\"number\"].includes(cardNumber) && !storage[\"suit\"].includes(cardSuit)) return false;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (get.type(event.card) == \"equip\" || get.type(event.card) == \"delay\") return false;\r\n\t\t\t\t\t\tif ([\"shan\", \"wuxie\"].includes(event.card.name)) return false;\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t(storage[\"number\"].includes(cardNumber) && !storage[\"ban\"].includes(\"number\")) ||\r\n\t\t\t\t\t\t\t(storage[\"suit\"].includes(cardSuit) && !storage[\"ban\"].includes(\"suit\"))\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet result;\r\n\t\t\t\t\t\tlet storage = player.storage.rujingmrfz,\r\n\t\t\t\t\t\t\tnumber = trigger.card.number,\r\n\t\t\t\t\t\t\tsuit = trigger.card.suit;\r\n\t\t\t\t\t\tconst list = [];\r\n\t\t\t\t\t\tif (storage[\"number\"].includes(number) && !storage[\"ban\"].includes(\"number\")) list.add(\"number\");\r\n\t\t\t\t\t\tif (storage[\"suit\"].includes(suit) && !storage[\"ban\"].includes(\"suit\")) list.add(\"suit\");\r\n\t\t\t\t\t\tevent.list = list;\r\n\t\t\t\t\t\tif (list.length == 1) {\r\n\t\t\t\t\t\t\tvar goon = true;\r\n\t\t\t\t\t\t\tif (trigger.card.name == \"du\") goon = false;\r\n\t\t\t\t\t\t\tif (trigger.card.name == \"jiedao\") goon = false;\r\n\t\t\t\t\t\t\tif (trigger.card.name == \"tao\" && player.getDamagedHp() == 1) goon = false;\r\n\t\t\t\t\t\t\tif (list.includes(\"suit\")) {\r\n\t\t\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t\t\t.chooseBool(\"【入境】:是否令此牌额外结算一次？（同花色）\")\r\n\t\t\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\t\t\treturn _status.event.goon;\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.set(\"goon\", goon)\r\n\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t\t\t.chooseBool(\"【入境】:是否令此牌额外结算一次？（同点数）\")\r\n\t\t\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\t\t\treturn _status.event.goon;\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.set(\"goon\", goon)\r\n\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t\t\t.chooseControl(\"点数\", \"花色\", \"全部\", \"cancel2\")\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", \"【入境】:请选择一项\")\r\n\t\t\t\t\t\t\t\t.set(\"prompt2\", \"选择‘点数’或者‘花色’为额外结算一次，选择‘全部’为额外结算两次，选择‘取消’为不发动此技能\")\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\t\t\t\t\tcard = _status.event.card;\r\n\t\t\t\t\t\t\t\t\tif (card.name == \"du\" || card.name == \"jiedao\") return \"cancel2\";\r\n\t\t\t\t\t\t\t\t\tif (card.name == \"tao\") {\r\n\t\t\t\t\t\t\t\t\t\tvar hp = player.getDamagedHp();\r\n\t\t\t\t\t\t\t\t\t\tswitch (hp) {\r\n\t\t\t\t\t\t\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn \"cancel2\";\r\n\t\t\t\t\t\t\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn [\"点数\", \"花色\"].randomGet();\r\n\t\t\t\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn \"全部\";\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn \"全部\";\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"card\", trigger.card)\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (result?.bool) {\r\n\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"card\"].add(trigger.card);\r\n\t\t\t\t\t\t\tif (event.list.includes(\"suit\")) {\r\n\t\t\t\t\t\t\t\ttrigger.effectCount++;\r\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"ban\"].add(\"suit\");\r\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"suit\"].remove(suit);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttrigger.effectCount++;\r\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"ban\"].add(\"number\");\r\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"number\"].remove(number);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (result.control != \"cancel2\" && result.bool != false) {\r\n\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"card\"].add(trigger.card);\r\n\t\t\t\t\t\t\tif (result.control == \"点数\") {\r\n\t\t\t\t\t\t\t\ttrigger.effectCount++;\r\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"ban\"].add(\"number\");\r\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"number\"].remove(number);\r\n\t\t\t\t\t\t\t} else if (result.control == \"花色\") {\r\n\t\t\t\t\t\t\t\ttrigger.effectCount++;\r\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"ban\"].add(\"suit\");\r\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"suit\"].remove(suit);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttrigger.effectCount += 2;\r\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"ban\"].add(\"suit\");\r\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"suit\"].remove(suit);\r\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"ban\"].add(\"number\");\r\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"number\"].remove(number);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//爱丽丝\r\n\t\talsmengxiangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tfrequent: true,\r\n\t\t\ttrigger: { global: \"phaseUseBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.player.storage.phaseHistory && event.player.storage.phaseHistory[\"phaseUse\"];\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"是否对\" + get.translation(event.player) + \"发动【梦乡】？\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result;\r\n\r\n\t\t\t\tevent.list = [];\r\n\t\t\t\tfor (var name of lib.inpile) {\r\n\t\t\t\t\tif (get.type(name) == \"delay\" || get.type(name) == \"equip\") continue;\r\n\t\t\t\t\tif (get.tag({ name: name }, \"damage\")) continue;\r\n\t\t\t\t\tevent.list.push([get.type(name), \"\", name]);\r\n\t\t\t\t}\r\n\t\t\t\tvar dialog = [\"为\" + get.translation(trigger.player) + \"选择至多三个牌名\"];\r\n\t\t\t\tif (event.list.length) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tdialog.push([event.list, \"vcard\"]);\r\n\t\t\t\t}\r\n\t\t\t\tif (!event.list.length) event.finish();\r\n\t\t\t\telse {\r\n\t\t\t\t\tresult = await player\r\n\t\t\t\t\t\t.chooseButton(dialog, [1, 3])\r\n\t\t\t\t\t\t.set(\"ai\", function (button) {\r\n\t\t\t\t\t\t\tlet name = button.link[2],\r\n\t\t\t\t\t\t\t\tlist = _status.event.list.map(i => i[2]),\r\n\t\t\t\t\t\t\t\tplayer = _status.event.player,\r\n\t\t\t\t\t\t\t\ttrigger = _status.event.getTrigger(),\r\n\t\t\t\t\t\t\t\ttarget = trigger.player,\r\n\t\t\t\t\t\t\t\tgetv = (name, player) => {\r\n\t\t\t\t\t\t\t\t\tlet v = trigger.getTempCache(\"alsmengxiangmrfz\", player.id + name);\r\n\t\t\t\t\t\t\t\t\tif (typeof v === \"number\") return v;\r\n\t\t\t\t\t\t\t\t\tv = player.getUseValue({ name: name });\r\n\t\t\t\t\t\t\t\t\ttrigger.putTempCache(\"alsmengxiangmrfz\", player.id + name, v);\r\n\t\t\t\t\t\t\t\t\treturn v;\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tif (get.attitude(player, target) < 0) {\r\n\t\t\t\t\t\t\t\tif (!list.includes(name)) return 0;\r\n\t\t\t\t\t\t\t\tlet val = 0;\r\n\t\t\t\t\t\t\t\tif (target.getDamagedHp() == 0 && name == \"tao\") val += 25;\r\n\t\t\t\t\t\t\t\telse if (name === \"wuxie\") val += 20;\r\n\t\t\t\t\t\t\t\telse if (name === \"shan\") val += 15;\r\n\t\t\t\t\t\t\t\telse if (name === \"jiu\") val += 6;\r\n\t\t\t\t\t\t\t\treturn -getv(name, target) + val;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (!list.includes(name)) return 0;\r\n\t\t\t\t\t\t\t\tlet val = getv(name, target),\r\n\t\t\t\t\t\t\t\t\tbase = 5;\r\n\t\t\t\t\t\t\t\tval = Math.min(15, val - base);\r\n\t\t\t\t\t\t\t\tif (name === \"wuzhong\" || name === \"dongzhuxianji\") val += 20;\r\n\t\t\t\t\t\t\t\telse if (name === \"tao\" && player.getDamagedHp() > 0) val += 15;\r\n\t\t\t\t\t\t\t\telse if (name === \"shunshou\") val += 6;\r\n\t\t\t\t\t\t\t\treturn val;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"list\", event.list)\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (result?.links) {\r\n\t\t\t\t\tvar names = result.links.map(i => i[2]),\r\n\t\t\t\t\t\ttarget = trigger.player;\r\n\t\t\t\t\tif (!target.storage.alsmengxiangmrfz_eff) target.storage.alsmengxiangmrfz_eff = [];\r\n\t\t\t\t\ttarget.storage.alsmengxiangmrfz_eff = target.storage.alsmengxiangmrfz_eff.concat(names);\r\n\t\t\t\t\tgame.log(player, \"为\", target, \"选择了\", \"#y\" + get.translation(names));\r\n\t\t\t\t\ttarget.addTempSkill(\"alsmengxiangmrfz_eff\", { player: \"phaseUseAfter\" });\r\n\t\t\t\t\ttarget.markSkill(\"alsmengxiangmrfz_eff\");\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"alsmengxiangmrfz\", trigger.player);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tmark: function (dialog, storage, player) {\r\n\t\t\t\t\t\t\tif (!storage || !storage.length) return \"当前无可用牌\";\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tdialog.add([[storage[0]], \"vcard\"]);\r\n\t\t\t\t\t\t\tif (storage.length > 1) dialog.addSmall([storage.slice(1), \"vcard\"]);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcontent: \"$\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\thiddenCard: function (player, name) {\r\n\t\t\t\t\t\t\tvar storage = player.getStorage(\"alsmengxiangmrfz_eff\");\r\n\t\t\t\t\t\t\tif (storage.length) return name == storage[0];\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcardname: function (card, player) {\r\n\t\t\t\t\t\t\tif (_status.event.name != \"chooseToUse\" || _status.event.skill) return;\r\n\t\t\t\t\t\t\tvar storage = player.getStorage(\"alsmengxiangmrfz_eff\");\r\n\t\t\t\t\t\t\tif (storage.length) return storage[0];\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcardnature: function (card, player) {\r\n\t\t\t\t\t\t\tif (_status.event.name != \"chooseToUse\" || _status.event.skill) return;\r\n\t\t\t\t\t\t\tvar storage = player.getStorage(\"alsmengxiangmrfz_eff\");\r\n\t\t\t\t\t\t\tif (storage.length) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"useCard\", \"respond\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.cards.length > 0 && player.getStorage(\"alsmengxiangmrfz_eff\").length > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.unmarkAuto(\"alsmengxiangmrfz_eff\", [player.getStorage(\"alsmengxiangmrfz_eff\")[0]]);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.5,\r\n\t\t\t},\r\n\t\t},\r\n\t\trumianmrfz: {\r\n\t\t\tmarkimage: \"extension/WhichWay/image/orther/rumianmrfz.png\",\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"下个结束阶段开始额外执行#个出牌阶段\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"phaseDiscardAfter\", \"damageEnd\"],\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseTarget(true, \"【入眠】:请选择一名角色，令其于下个结束阶段开始时额外执行一个出牌阶段\")\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\tif (get.attitude(player, target) > 4) {\r\n\t\t\t\t\t\t\treturn get.threaten(target) / Math.sqrt(target.hp + 1) / Math.sqrt(target.countCards(\"h\") + 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn get.attitude(player, target) > 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\tif (result.targets) {\r\n\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\ttarget.addMark(\"rumianmrfz\", 1, false);\r\n\t\t\t\t\ttarget.when({ player: \"phaseJieshuBegin\" }).then(async (event, trigger, player) => {\r\n\t\t\t\t\t\tvar next = trigger.player.phaseUse();\r\n\t\t\t\t\t\tevent.next.remove(next);\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttrigger.getParent(\"phase\").next.push(next);\r\n\t\t\t\t\t\tplayer.removeMark(\"rumianmrfz\", 1, false);\r\n\t\t\t\t\t\tgame.log(player, \"执行了一个额外的出牌阶段\");\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// .emb({ firstDo: true });\r\n\t\t\t\t\tplayer.line(target);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\t//expose: 0.1,\r\n\t\t\t\tthreaten: 0.7,\r\n\t\t\t\tmaixie: true,\r\n\t\t\t\tmaixie_hp: true,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//天火\r\n\t\tzhuihuomrfz: {\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.countCards(\"hs\", card => {\r\n\t\t\t\t\t\treturn (get.name(card) == \"sha\" && get.nature(card) == \"fire\") || get.name(card) == \"huogong\";\r\n\t\t\t\t\t}) > 0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tfilterCard: function (card) {\r\n\t\t\t\treturn (get.name(card) == \"sha\" && get.nature(card) == \"fire\") || get.name(card) == \"huogong\";\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && !player.storage.zhuihuomrfz.includes(target);\r\n\t\t\t},\r\n\t\t\tdiscard: false,\r\n\t\t\tlose: false,\r\n\t\t\tdelay: false,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.storage.zhuihuomrfz.add(target);\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\ttarget.addJudge({ name: \"sjzx_zhuihuomrfz\" }, cards);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 5,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tget.attitude(player, target) < 0 &&\r\n\t\t\t\t\t\t\ttarget.getCards(\"j\", function (card) {\r\n\t\t\t\t\t\t\t\treturn get.name(card) == \"sjzx_zhuihuomrfz\";\r\n\t\t\t\t\t\t\t}).length < target.hp\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tif (target.countCards(\"he\") < 2 && target.hp < 2) return -3;\r\n\t\t\t\t\t\t\tif (target.countCards(\"he\") < 2) return -2;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhuihuomrfz_clear\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseUseEnd\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.zhuihuomrfz = [];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tyihuomrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tcardname: function (card, player) {\r\n\t\t\t\t\tif (card.storage && card.storage.yihuomrfz == true) return \"sha\";\r\n\t\t\t\t},\r\n\t\t\t\tcardnature: function (card, player) {\r\n\t\t\t\t\tif (card.storage && card.storage.yihuomrfz == true) return \"fire\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"damageEnd\",\r\n\t\t\t},\r\n\t\t\tusable: 2,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.nature == \"fire\";\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.draw(2);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget: function (card, player, target, current) {\r\n\t\t\t\t\t\tif (get.tag(card, \"respondSha\") && current < 0) return 0.6;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\trespondSha: true,\r\n\t\t\t},\r\n\t\t\tgroup: [\"yihuomrfz_gain\", \"yihuomrfz_cancel\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tcancel: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"damageBegin4\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.nature == \"fire\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t\tplayer.draw(3);\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"yihuomrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\teffect: {\r\n\t\t\t\t\t\t\ttarget: function (card, player, target) {\r\n\t\t\t\t\t\t\t\tif (get.tag(card, \"fireDamage\")) return [0, 1];\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tgain: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"gainAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!event.cards || event.cards.length < 2) return false;\r\n\t\t\t\t\t\treturn event.cards.some(element => player.getCards(\"h\").includes(element));\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst result = await player\r\n\t\t\t\t\t\t\t.chooseCard(true, \"【溢火】:请选择一张牌，令此牌视为火【杀】\", function (card) {\r\n\t\t\t\t\t\t\t\treturn trigger.cards.includes(card);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\t\treturn -get.value(card);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\tif (result.cards) {\r\n\t\t\t\t\t\t\tresult.cards[0].storage.yihuomrfz = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar color,\r\n\t\t\t\t\t\t\tbool = true;\r\n\t\t\t\t\t\tfor (var i of trigger.cards) {\r\n\t\t\t\t\t\t\tif (typeof color !== \"string\") color = get.color(i, player);\r\n\t\t\t\t\t\t\tif (get.color(i, player) != color) {\r\n\t\t\t\t\t\t\t\tbool = false;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (bool == true) player.draw();\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"yihuomrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//临光\r\n\t\tanranmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst cards = player.getCards(\"h\");\r\n\t\t\t\tplayer.discard(cards);\r\n\t\t\t},\r\n\t\t\tgroup: [\"anranmrfz_draw\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\taudio: \"anranmrfz\",\r\n\t\t\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\t\t\tinit: player => {\r\n\t\t\t\t\t\tplayer.storage.anranmrfz_draw = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn !player.storage.anranmrfz_draw;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar num = player.hujia + player.hp;\r\n\t\t\t\t\t\tplayer.storage.anranmrfz_draw = true;\r\n\t\t\t\t\t\tplayer.draw(2 * num);\r\n\t\t\t\t\t\tplayer.changeHujia(-player.hujia);\r\n\t\t\t\t\t\tplayer.recover();\r\n\t\t\t\t\t\tplayer.when(\"phaseDiscardBefore\").then(async (event, trigger, player) => {\r\n\t\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"anranmrfz\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// .emb({ firstDo: true });\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thuchimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tusable: 1,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player;\r\n\t\t\t},\r\n\t\t\tfilterCard: true,\r\n\t\t\tposition: \"he\",\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t},\r\n\t\t\tlose: false,\r\n\t\t\tdiscard: false,\r\n\t\t\tdelay: false,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { target, cards } = event;\r\n\r\n\t\t\t\tawait player.give(cards, target, true);\r\n\t\t\t\tfor (let i of cards) {\r\n\t\t\t\t\ti.storage.huchimrfz = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar view = get.autoViewAs({ name: \"sha\" }, cards);\r\n\t\t\t\tconst result = await target\r\n\t\t\t\t\t.chooseTarget(\"【互持】:请选择使用【杀】的目标\", function (card, player, target) {\r\n\t\t\t\t\t\tvar view = _status.event.view;\r\n\t\t\t\t\t\tvar playerx = _status.event.playerx;\r\n\t\t\t\t\t\treturn target != playerx && playerx.canUse(view, target);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"view\", view)\r\n\t\t\t\t\t.set(\"playerx\", target)\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\tvar view = _status.event.view;\r\n\t\t\t\t\t\tvar player = _status.event.playerx;\r\n\t\t\t\t\t\treturn get.effect(target, view, player, player);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\tif (result.targets) {\r\n\t\t\t\t\tvar card = get.autoViewAs({ name: \"sha\" }, cards);\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\ttarget.hasCard(card => {\r\n\t\t\t\t\t\t\treturn card == cards[0];\r\n\t\t\t\t\t\t}, \"h\")\r\n\t\t\t\t\t)\r\n\t\t\t\t\t\ttarget.useCard(result.targets[0], card, cards);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 4,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tif (get.attitude(player, target) > 2) {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\t\t\t\treturn target.canUse(\"sha\", current) && get.attitude(player, target);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn 2;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"huchimrfz_recover\", \"huchimrfz_gain\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\trecover: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"recoverEnd\",\r\n\t\t\t\t\t\tglobal: \"recoverEnd\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tusable: 1,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!event.source.isIn() || !event.player.isIn() || event.source === undefined || !event.player) return false;\r\n\t\t\t\t\t\tif (event.source == player && event.player == player) return false;\r\n\t\t\t\t\t\tif (event.source != player && event.player != player) return false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst result = await trigger.player\r\n\t\t\t\t\t\t\t.chooseCardTarget({\r\n\t\t\t\t\t\t\t\tprompt: \"【互持】:你可以将一张牌交给回复来源\",\r\n\t\t\t\t\t\t\t\tfilterCard: true,\r\n\t\t\t\t\t\t\t\tposition: \"he\",\r\n\t\t\t\t\t\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\t\t\t\t\t\tvar source = _status.event.source;\r\n\t\t\t\t\t\t\t\t\treturn target != player && target == source;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tai1: function (card) {\r\n\t\t\t\t\t\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tai2: function (target) {\r\n\t\t\t\t\t\t\t\t\tvar playerx = _status.event.playerx;\r\n\t\t\t\t\t\t\t\t\treturn get.attitude(playerx, target) > 0;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"source\", trigger.source)\r\n\t\t\t\t\t\t\t.set(\"playerx\", trigger.player)\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\tif (result.cards && result.targets) {\r\n\t\t\t\t\t\t\ttrigger.player.give(result.cards, result.targets[0]);\r\n\t\t\t\t\t\t\ttrigger.player.draw();\r\n\t\t\t\t\t\t\ttrigger.source.draw();\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\ttrigger.player.logSkill(\"huchimrfz\", trigger.source);\r\n\t\t\t\t\t\t} else player.storage.counttrigger.huchimrfz_recover--;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tgain: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"gainEnd\",\r\n\t\t\t\t\t\tglobal: \"gainEnd\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.source == undefined || event.player == undefined) return false;\r\n\t\t\t\t\t\tif (!event.source.isIn() || !event.player.isIn()) return false;\r\n\t\t\t\t\t\tif (event.source == player && event.player == player) return false;\r\n\t\t\t\t\t\tif (event.source != player && event.player != player) return false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tusable: 1,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst result = await trigger.player\r\n\t\t\t\t\t\t\t.chooseCardTarget({\r\n\t\t\t\t\t\t\t\tprompt: \"【互持】:你可以将一张牌交给给予来源\",\r\n\t\t\t\t\t\t\t\tfilterCard: true,\r\n\t\t\t\t\t\t\t\tposition: \"he\",\r\n\t\t\t\t\t\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\t\t\t\t\t\tvar source = _status.event.source;\r\n\t\t\t\t\t\t\t\t\treturn target != player && target == source;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tai1: function (card) {\r\n\t\t\t\t\t\t\t\t\tif (card.storage.huchimrfz) return 0;\r\n\t\t\t\t\t\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tai2: function (target) {\r\n\t\t\t\t\t\t\t\t\tvar playerx = _status.event.playerx;\r\n\t\t\t\t\t\t\t\t\treturn get.attitude(playerx, target) > 0;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"source\", trigger.source)\r\n\t\t\t\t\t\t\t.set(\"playerx\", trigger.player)\r\n\t\t\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\t\t\tif (result.cards && result.targets) {\r\n\t\t\t\t\t\t\ttrigger.player.give(result.cards, result.targets[0]);\r\n\t\t\t\t\t\t\ttrigger.player.draw();\r\n\t\t\t\t\t\t\ttrigger.source.draw();\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\ttrigger.player.logSkill(\"huchimrfz\", trigger.source);\r\n\t\t\t\t\t\t} else player.storage.counttrigger.huchimrfz_gain--;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tchongyaomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\treturn `${player.storage.chongyaomrfz_mark[\"count\"]}/5`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tderivation: [\"zhuguangmrfz\"],\r\n\t\t\tinit: player => {\r\n\t\t\t\tplayer.storage.chongyaomrfz = false;\r\n\t\t\t},\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"huchimrfzAfter\", \"huchimrfz_gainAfter\", \"huchimrfz_recoverAfter\"],\r\n\t\t\t\tglobal: [\"huchimrfzAfter\", \"huchimrfz_gainAfter\", \"huchimrfz_recoverAfter\"],\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.storage.chongyaomrfz_mark[\"count\"] >= 5 && !player.storage.chongyaomrfz;\r\n\t\t\t},\r\n\t\t\tjuexingji: true,\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationColor: \"wood\",\r\n\t\t\tunique: true,\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.loseMaxHp();\r\n\t\t\t\tplayer.addSkill(\"zhuguangmrfz\");\r\n\t\t\t\tplayer.awakenSkill(\"chongyaomrfz\");\r\n\t\t\t\tgame.log(player, \"获得了技能\", \"#g【逐光】\");\r\n\t\t\t\tplayer.storage.chongyaomrfz = true;\r\n\t\t\t\tdelete player.storage.chongyaomrfz_mark;\r\n\t\t\t\tplayer.removeSkill(\"chongyaomrfz_mark\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"chongyaomrfz_mark\", \"chongyaomrfz_clear\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"phaseBegin\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.chongyaomrfz_mark[\"skill\"] = [];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tmark: {\r\n\t\t\t\t\tinit: player => {\r\n\t\t\t\t\t\tplayer.storage.chongyaomrfz_mark = {\r\n\t\t\t\t\t\t\tcount: 0,\r\n\t\t\t\t\t\t\tskill: [],\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: player => {\r\n\t\t\t\t\t\tdelete player.storage.chongyaomrfz_mark;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"huchimrfzAfter\", \"huchimrfz_gainAfter\", \"huchimrfz_recoverAfter\"],\r\n\t\t\t\t\t\tglobal: [\"huchimrfzAfter\", \"huchimrfz_gainAfter\", \"huchimrfz_recoverAfter\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (!player.storage.chongyaomrfz_mark) player.storage.chongyaomrfz_mark = 0;\r\n\t\t\t\t\t\tfor (var i of [\"huchimrfz\", \"huchimrfz_gain\", \"huchimrfz_recover\"]) {\r\n\t\t\t\t\t\t\tif (!player.storage.counttrigger[trigger.name] && i != \"huchimrfz\") continue;\r\n\t\t\t\t\t\t\tif (player.storage.chongyaomrfz_mark[\"skill\"].includes(trigger.name)) continue;\r\n\t\t\t\t\t\t\tif (i == \"huchimrfz\" && trigger.name == \"huchimrfz\") {\r\n\t\t\t\t\t\t\t\tplayer.storage.chongyaomrfz_mark[\"count\"]++;\r\n\t\t\t\t\t\t\t\tplayer.storage.chongyaomrfz_mark[\"skill\"].add(trigger.name);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (player.storage.counttrigger[trigger.name] > 0) {\r\n\t\t\t\t\t\t\t\tplayer.storage.chongyaomrfz_mark[\"count\"]++;\r\n\t\t\t\t\t\t\t\tplayer.storage.chongyaomrfz_mark[\"skill\"].add(trigger.name);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//海沫\r\n\t\txunchaomrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"下次造成的伤害+#\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.countCards(\"h\") < 1) return false;\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\tcurrent != player &&\r\n\t\t\t\t\t\t(current.hp > player.hp ||\r\n\t\t\t\t\t\t\tcurrent.countCards(\"h\") > player.countCards(\"h\") ||\r\n\t\t\t\t\t\t\tcurrent.countCards(\"e\") > player.countCards(\"e\"))\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tcomplexCard: true,\r\n\t\t\tfilterCard: function (card, player) {\r\n\t\t\t\tvar selected = ui.selected.cards;\r\n\t\t\t\tif (!selected.length) return true;\r\n\t\t\t\tfor (var i = 0; i < selected.length; i++) {\r\n\t\t\t\t\tif (get.type2(card) == get.type2(selected[i])) return false;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\ttarget != player &&\r\n\t\t\t\t\t(target.hp > player.hp || target.countCards(\"h\") > player.countCards(\"h\") || target.countCards(\"e\") > player.countCards(\"e\"))\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tselectCard: [1, Infinity],\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\treturn 10 - get.value(card);\r\n\t\t\t},\r\n\t\t\tdiscard: false,\r\n\t\t\tlose: false,\r\n\t\t\tdelay: false,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { cards, target } = event;\r\n\r\n\t\t\t\tawait player.give(cards, target);\r\n\r\n\t\t\t\tconst num = cards.length;\r\n\t\t\t\tif (num >= 1) {\r\n\t\t\t\t\tplayer.recover();\r\n\t\t\t\t}\r\n\t\t\t\tif (num >= 2) {\r\n\t\t\t\t\tplayer.adjustHandCardTo(target.countCards(\"h\"));\r\n\t\t\t\t}\r\n\t\t\t\tif (num >= 3) {\r\n\t\t\t\t\tplayer.addMark(\"xunchaomrfz\", 1, false);\r\n\t\t\t\t\tplayer.when({ source: \"damageBegin3\" }).then(async (event, trigger, player) => {\r\n\t\t\t\t\t\tplayer.removeMark(\"xunchaomrfz\", 1, false);\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// .emb({ firstDo: true });\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\torder: 3,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tif (get.attitude(target, player) > 0) {\r\n\t\t\t\t\t\t\treturn 1 + target.countCards(\"h\") * 0.1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tpaoyingmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > player.hp && player.getDamagedHp() > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst result = await player.adjustHandCardTo(player.hp).forResult();\r\n\r\n\t\t\t\tif (result.cards) {\r\n\t\t\t\t\tplayer.recover(Math.min(result.cards.length, 2));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//小满\r\n\t\tmushoumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\tdirect: true,\r\n\t\t\tgetCanUseCard: function (event, player) {\r\n\t\t\t\tvar history = event.player.getHistory(\"lose\", function (evt) {\r\n\t\t\t\t\t\treturn evt && evt.type == \"discard\";\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tcards = [];\r\n\t\t\t\tif (history.length == 0) return cards;\r\n\t\t\t\tfor (var i = 0; i < history.length; i++) {\r\n\t\t\t\t\tvar cardsList = history[i].cards;\r\n\t\t\t\t\tfor (var j = 0; j < cardsList.length; j++) {\r\n\t\t\t\t\t\tif (!player.canUseToAnyone(cardsList[j])) continue;\r\n\t\t\t\t\t\tif (get.position(cardsList[j], true) != \"d\") continue;\r\n\t\t\t\t\t\tcards.push(cardsList[j]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn cards;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar cards = lib.skill.mushoumrfz.getCanUseCard(event, player);\r\n\t\t\t\treturn cards.length > 0 && event.player != player;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet cards = lib.skill.mushoumrfz.getCanUseCard(trigger, player);\r\n\t\t\t\twhile (true) {\r\n\t\t\t\t\tconst {\r\n\t\t\t\t\t\tresult: { bool, links },\r\n\t\t\t\t\t} = await player\r\n\t\t\t\t\t\t.chooseButton([\"【牧兽】：是否使用这些牌？\", cards])\r\n\t\t\t\t\t\t.set(\"filterButton\", button => {\r\n\t\t\t\t\t\t\treturn _status.event.player.hasUseTarget(button.link);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\t\treturn _status.event.player.getUseValue(button.link);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\tif (!bool) return;\r\n\t\t\t\t\tcards.remove(links[0]);\r\n\t\t\t\t\tplayer.$gain2(links[0], false);\r\n\t\t\t\t\tplayer.chooseUseTarget(links[0], true);\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"mushoumrfz\");\r\n\t\t\t\t\tcards = cards.filter(card => {\r\n\t\t\t\t\t\treturn get.position(card, true) == \"d\" && player.hasUseTarget(card);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (cards.length == 0) return;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//万顷\r\n\t\tguantianmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { global: \"drawBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\treturn _status.currentPhase == player && event.getParent(1).name != \"guantianmrfz\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t\ttrigger.player.chooseToGuanxing(trigger.num);\r\n\t\t\t\ttrigger.player.draw(trigger.num);\r\n\t\t\t},\r\n\t\t},\r\n\t\tyingfengmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseBeginStart\" },\r\n\t\t\tfrequent: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar list = Array.from({ length: lib.phaseName.length }, (_, index) => (index + 1).toString());\r\n\t\t\t\tconst { index } = await player\r\n\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t.set(\"prompt\", \"【万顷】:请选择你要跳过的阶段数\")\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\tvar friend = game.filterPlayer(current => {\r\n\t\t\t\t\t\t\treturn get.attitude(current, player) > 0;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvar list = _status.event.list;\r\n\t\t\t\t\t\tif (friend.length > 3 && player.getSkillsList().length > 1) return list.length - 1;\r\n\t\t\t\t\t\tif (player.countCards(\"h\") <= player.getHandcardLimit() && friend.length > 2) return 3;\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"list\", list)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!index) return;\r\n\t\t\t\tlet phase = [],\r\n\t\t\t\t\tnum = index + 1;\r\n\t\t\t\tfor (var i = 0; i < num; i++) {\r\n\t\t\t\t\tplayer.skip(lib.phaseName[i]);\r\n\t\t\t\t\tphase.push(lib.phaseName[i]);\r\n\t\t\t\t}\r\n\t\t\t\tgame.log(player, \"跳过了\", `#y${get.tranPhase(phase)}`);\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.when(\"phaseEnd\")\r\n\t\t\t\t\t.then(async (event, trigger, player) => {\r\n\t\t\t\t\t\tconst result = await player\r\n\t\t\t\t\t\t\t.chooseTarget(true, `【应风】:请选择至多${get.cnNumber(index)}名角色，令其摸${get.cnNumber(Math.floor(index / 2))}张牌`, [\r\n\t\t\t\t\t\t\t\t1,\r\n\t\t\t\t\t\t\t\tindex,\r\n\t\t\t\t\t\t\t])\r\n\t\t\t\t\t\t\t.set(\"ai\", target => get.attitude(player, target) > 0)\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\tawait game.asyncDraw(result.targets, Math.floor(index / 2));\r\n\r\n\t\t\t\t\t\t\tconst list = player.getSkillsList();\r\n\t\t\t\t\t\t\tif (index > 4 && list.length > 0) {\r\n\t\t\t\t\t\t\t\tif (list.length == 1) {\r\n\t\t\t\t\t\t\t\t\tplayer.removeSkill(list[0]);\r\n\t\t\t\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tconst { control } = await player\r\n\t\t\t\t\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t\t\t\t\t.set(\"prompt\", \"【应风】:请选择失去一个技能\")\r\n\t\t\t\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\tvar list = _status.event.list;\r\n\t\t\t\t\t\t\t\t\t\t\tif (list.includes(\"yingfengmrfz\") && list.length > 1) list.remove(\"yingfengmrfz\");\r\n\t\t\t\t\t\t\t\t\t\t\treturn list.randomGet();\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.set(\"list\", list)\r\n\t\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\t\t\tif (control) {\r\n\t\t\t\t\t\t\t\t\t\tplayer.removeSkill(control);\r\n\t\t\t\t\t\t\t\t\t\tgame.log(player, `失去了技能<span class=\"yellowtext\">【${get.translation(control)}】</span>`);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.vars({ index: num });\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget: function (card, player, target, current) {\r\n\t\t\t\t\t\tif (get.type(card) == \"delay\") return \"zeroplayertarget\";\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//格劳克斯\r\n\t\tcichongmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tinit: (player, skill) => {\r\n\t\t\t\tplayer.storage.cichongmrfz = [];\r\n\t\t\t},\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: (event, player, storage) => {\r\n\t\t\t\t\treturn `已经弃置过的类型：${get.translation(player.storage[storage])}`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar hs = player.countCards(\"he\", function (card) {\r\n\t\t\t\t\t\treturn !player.storage.cichongmrfz.includes(get.type2(card));\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tbool = false;\r\n\t\t\t\tfor (var i of game.players) {\r\n\t\t\t\t\tif (player.canUse(\"sha\", i) || i != player) continue;\r\n\t\t\t\t\tbool = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\treturn hs > 0 && bool;\r\n\t\t\t},\r\n\t\t\tfilterCard: function (card) {\r\n\t\t\t\tvar storage = _status.event.player.storage.cichongmrfz;\r\n\t\t\t\treturn !storage.includes(get.type2(card));\r\n\t\t\t},\r\n\t\t\tfilterTarget: lib.filter.notMe,\r\n\t\t\tposition: \"he\",\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.markSkill(\"cichongmrfz\");\r\n\t\t\t\tconst target = event.targets[0],\r\n\t\t\t\t\tcard = event.cards[0];\r\n\t\t\t\tplayer.storage.cichongmrfz.add(get.type2(card));\r\n\t\t\t\tconst { bool } = await target\r\n\t\t\t\t\t.chooseToDiscard()\r\n\t\t\t\t\t.set(\"prompt\", `【磁冲】:请弃置一张【闪】或防具牌，否则受到来自${get.translation(player)}的一点伤害`)\r\n\t\t\t\t\t.set(\"filterCard\", card => get.name(card, target) == \"shan\" || get.subtype(card) == \"equip2\")\r\n\t\t\t\t\t.set(\"ai\", card => get.value(card) < 8)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (bool) return;\r\n\t\t\t\ttarget.damage();\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 4,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tif (get.attitude(player, target) < 0) {\r\n\t\t\t\t\t\t\treturn -(1 + target.countCards(\"h\") * 0.1 + target.hp * 0.5);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"cichongmrfz_add\", \"cichongmrfz_clear\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.unmarkSkill(\"cichongmrfz\");\r\n\t\t\t\t\t\tplayer.storage.cichongmrfz = [];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tadd: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { source: \"damageBegin3\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn !player.canUse(\"sha\", event.player) && event.player.isIn();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tganraomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tinit: (player, skill) => {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\ttrigger: { source: \"damageBegin3\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar storage = player.storage.ganraomrfz;\r\n\t\t\t\treturn !storage.includes(event.player) && event.player.isIn();\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.player) < 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet dialog = [\"【干扰】:请选择一张牌\"],\r\n\t\t\t\t\tlist = [];\r\n\t\t\t\tfor (var i = 0; i < lib.inpile.length; i++) {\r\n\t\t\t\t\tvar name = lib.inpile[i];\r\n\t\t\t\t\tif (get.type(name) == \"equip\") list.push([\"装备\", \"\", name]);\r\n\t\t\t\t\telse if (get.type2(name) == \"trick\") list.push([\"锦囊\", \"\", name]);\r\n\t\t\t\t\telse if (get.type(name) == \"basic\") list.push([\"基本\", \"\", name]);\r\n\t\t\t\t}\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tdialog.push([list, \"vcard\"]);\r\n\t\t\t\tconst { links } = await player\r\n\t\t\t\t\t.chooseButton(1, true)\r\n\t\t\t\t\t.set(\"createDialog\", dialog)\r\n\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\tvar target = _status.event.target;\r\n\t\t\t\t\t\tif (target.hp < 2) return [\"tao\", \"jiu\"].randomGet();\r\n\t\t\t\t\t\treturn [\"shan\", \"wuxie\", \"tao\"].randomGet();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"target\", trigger.player)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!links) return;\r\n\t\t\t\tif (!trigger.player.storage.ganraomrfz_ban) trigger.player.storage.ganraomrfz_ban = [];\r\n\t\t\t\ttrigger.player.storage.ganraomrfz_ban.add(links[0][2]);\r\n\t\t\t\ttrigger.player.addTempSkill(\"ganraomrfz_ban\", { global: \"phaseEnd\" });\r\n\t\t\t\tplayer.storage.ganraomrfz.add(trigger.player);\r\n\t\t\t},\r\n\t\t\tgroup: [\"ganraomrfz_clear\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardEnabled2: function (card, player) {\r\n\t\t\t\t\t\t\tif (player.storage.ganraomrfz_ban.includes(get.name(card, player))) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tonremove: (player, skill) => {\r\n\t\t\t\t\t\tdelete player.storage[skill];\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: (event, player, storage) => {\r\n\t\t\t\t\t\t\treturn `不能使用或打出${get.translation(player.storage[storage])}`;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.ganraomrfz = [];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//海蒂\r\n\t\tanxinmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"gainEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.source === undefined || !event.source.isIn()) return false;\r\n\t\t\t\tif (event.source != player || !event.cards) return false;\r\n\t\t\t\treturn event.cards.length > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet num = trigger.cards.length,\r\n\t\t\t\t\tdialog = [\"【暗信】:请选择一张牌\"],\r\n\t\t\t\t\tlist = [],\r\n\t\t\t\t\tcount = 0;\r\n\t\t\t\tfor (var i = 0; i < lib.inpile.length; i++) {\r\n\t\t\t\t\tvar name = lib.inpile[i];\r\n\t\t\t\t\tif (get.type(name) == \"delay\" || get.type(name) == \"equip\") continue;\r\n\t\t\t\t\tif (name == \"sha\") {\r\n\t\t\t\t\t\tlist.push([\"基本\", \"\", \"sha\"]);\r\n\t\t\t\t\t\tfor (var j of lib.inpile_nature) {\r\n\t\t\t\t\t\t\tlist.push([\"基本\", \"\", \"sha\", j]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (get.type2(name) == \"trick\") list.push([\"锦囊\", \"\", name]);\r\n\t\t\t\t\telse if (get.type(name) == \"basic\") list.push([\"基本\", \"\", name]);\r\n\t\t\t\t}\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tdialog.push([list, \"vcard\"]);\r\n\t\t\t\twhile (num--) {\r\n\t\t\t\t\tvar { links } = await player\r\n\t\t\t\t\t\t.chooseButton(1, true)\r\n\t\t\t\t\t\t.set(\"createDialog\", dialog)\r\n\t\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\t\tvar card = {\r\n\t\t\t\t\t\t\t\t\tname: button.link[2],\r\n\t\t\t\t\t\t\t\t\tnature: button.link[3],\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tplayer = _status.event.player,\r\n\t\t\t\t\t\t\t\ttarget = _status.event.target,\r\n\t\t\t\t\t\t\t\tatt = _status.event.att,\r\n\t\t\t\t\t\t\t\tnum = target.getUseValue(card, undefined, true);\r\n\t\t\t\t\t\t\tif (card.name == \"jiedao\" && att < 0) num -= 10;\r\n\t\t\t\t\t\t\tif ((card.name == \"tao\" || card.name == \"shan\") && att < 0) num -= 5;\r\n\t\t\t\t\t\t\treturn num * att;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"target\", trigger.player)\r\n\t\t\t\t\t\t.set(\"att\", get.attitude(trigger.player, player) > 0 ? 1 : -1)\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (!links) continue;\r\n\t\t\t\t\tlet viewCards = {\r\n\t\t\t\t\t\tname: links[0][2],\r\n\t\t\t\t\t\tnature: links[0][3],\r\n\t\t\t\t\t};\r\n\t\t\t\t\tvar gaincards = trigger.cards.filter(card => {\r\n\t\t\t\t\t\t\treturn !card.hasGaintag(\"anxinmrfz\") && get.position(card) == \"h\";\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\ttmpnum = gaincards.length;\r\n\t\t\t\t\tif (gaincards.length == 0) return;\r\n\t\t\t\t\tvar { links } =\r\n\t\t\t\t\t\tgaincards.length == 1\r\n\t\t\t\t\t\t\t? { links: gaincards }\r\n\t\t\t\t\t\t\t: await player\r\n\t\t\t\t\t\t\t\t\t.chooseCardButton(\r\n\t\t\t\t\t\t\t\t\t\t`【暗信】:请你选择视为${viewCards[\"nature\"] === undefined ? \"\" : get.translation(viewCards[\"nature\"])}${get.translation(viewCards[\"name\"])}的牌`,\r\n\t\t\t\t\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t\t\t\t\tgaincards,\r\n\t\t\t\t\t\t\t\t\t\t[1, tmpnum]\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\t\t\t\tif (ui.selected.buttons.length == 0) return 1;\r\n\t\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (!links) continue;\r\n\t\t\t\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\t\t\t\tlinks[i].gaintag.add(\"anxinmrfz\");\r\n\t\t\t\t\t\tlinks[i].storage.anxinmrfz = viewCards;\r\n\t\t\t\t\t\t//console.log('storage:',links[i].storage);\r\n\t\t\t\t\t\t//console.log('gaintag:',links[i].gaintag);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar gaincards = trigger.cards.filter(card => {\r\n\t\t\t\t\t\treturn !card.hasGaintag(\"anxinmrfz\") && get.position(card) == \"h\";\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (gaincards.length == 0) return;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tglobal: \"anxinmrfz_views\",\r\n\t\t\tgroup: [\"anxinmrfz_use\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tuse: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { global: \"useCardAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.hasHistory(\"lose\", function (evt) {\r\n\t\t\t\t\t\t\tif (evt.getParent() != event) return false;\r\n\t\t\t\t\t\t\tfor (var i in evt.gaintag_map) {\r\n\t\t\t\t\t\t\t\tif (evt.gaintag_map[i].includes(\"anxinmrfz\")) return true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"anxinmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tviews: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\taiOrder: function (player, card, num) {\r\n\t\t\t\t\t\t\tif (get.itemtype(card) == \"card\" && card.hasGaintag(\"anxinmrfz\")) return num + 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcardname: function (card, player) {\r\n\t\t\t\t\t\t\tvar viewsCard = card.storage.anxinmrfz;\r\n\t\t\t\t\t\t\tif (get.itemtype(card) == \"card\" && card.hasGaintag(\"anxinmrfz\")) return viewsCard.name;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcardnature(card, player) {\r\n\t\t\t\t\t\t\tvar viewsCard = card.storage.anxinmrfz;\r\n\t\t\t\t\t\t\tif (get.itemtype(card) == \"card\" && card.hasGaintag(\"anxinmrfz\")) return viewsCard.nature;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tgongchoumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn current != player && current.countCards(\"h\") > 0;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tselectTarget: -1,\r\n\t\t\tmultitarget: true,\r\n\t\t\tmultiline: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet targets = event.targets,\r\n\t\t\t\t\tlist = [];\r\n\t\t\t\twhile (true) {\r\n\t\t\t\t\tif (targets[0].countCards(\"h\") == 0) {\r\n\t\t\t\t\t\ttargets.shift();\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar { cards } = await targets[0]\r\n\t\t\t\t\t\t.chooseCard(true)\r\n\t\t\t\t\t\t.set(\"prompt\", `【觥筹】:请选择一张牌交给${get.translation(player)}`)\r\n\t\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\treturn get.value(card) < 6;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (!cards) {\r\n\t\t\t\t\t\ttargets.shift();\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttargets[0].give(cards, player);\r\n\t\t\t\t\tlist.add(targets[0]);\r\n\t\t\t\t\ttargets.shift();\r\n\t\t\t\t\tif (targets.length == 0) break;\r\n\t\t\t\t}\r\n\t\t\t\tif (list.length == 0) return;\r\n\t\t\t\twhile (true) {\r\n\t\t\t\t\tif (player.countCards(\"he\") == 0) return;\r\n\t\t\t\t\tvar { cards } = await player\r\n\t\t\t\t\t\t.chooseCard(true, \"he\")\r\n\t\t\t\t\t\t.set(\"prompt\", `【觥筹】:请选择一张牌交给${get.translation(list[0])}`)\r\n\t\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\treturn get.value(card) < 6;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (!cards) {\r\n\t\t\t\t\t\tlist.shift();\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplayer.give(cards, list[0]);\r\n\t\t\t\t\tlist.shift();\r\n\t\t\t\t\tif (list.length == 0) break;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tyinshimrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\ttargetEnabled: function (card, player, target) {\r\n\t\t\t\t\tvar num = 0,\r\n\t\t\t\t\t\tlist = [\"h\", \"j\", \"e\"];\r\n\t\t\t\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\t\t\t\tif (target.countCards(list[i]) == 0) continue;\r\n\t\t\t\t\t\tnum++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (player.getHistory(\"useCard\").length < num && _status.currentPhase != target) return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"useCard\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfilter: (event, player) => {\r\n\t\t\t\tvar num = 0,\r\n\t\t\t\t\tlist = [\"h\", \"j\", \"e\"];\r\n\t\t\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\t\t\tif (player.countCards(list[i]) == 0) continue;\r\n\t\t\t\t\tnum++;\r\n\t\t\t\t}\r\n\t\t\t\treturn (\r\n\t\t\t\t\tevent.player.getHistory(\"useCard\").length < num &&\r\n\t\t\t\t\t_status.currentPhase != player &&\r\n\t\t\t\t\t((event.card.name == \"nanman\" && player != event.player) ||\r\n\t\t\t\t\t\t(event.card.name == \"wanjian\" && player != event.player) ||\r\n\t\t\t\t\t\t(event.card.name == \"taoyuan\" && player.hp < player.maxHp) ||\r\n\t\t\t\t\t\tevent.card.name == \"wugu\")\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tcontent: () => {},\r\n\t\t},\r\n\r\n\t\t//崖心\r\n\t\tlingdingmrfz: {\r\n\t\t\tinit: (player, skill) => {\r\n\t\t\t\t/*\r\n\t\t\t\t\t[记录的牌的数量,[]中的数字]\r\n\t\t\t\t\t*/\r\n\t\t\t\tplayer.storage[skill] = [0, 1];\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tmarkcount: \"\",\r\n\t\t\t\tcontent: (event, player, storage) => {\r\n\t\t\t\t\treturn `${player.storage[storage][0]}/${player.storage[storage][1]}`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"respond\", \"useCard\"],\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.storage.lingdingmrfz[0]++;\r\n\t\t\t\tlet usenum = player.storage.lingdingmrfz[0],\r\n\t\t\t\t\tnum = player.storage.lingdingmrfz[1];\r\n\t\t\t\tif (usenum < num) return;\r\n\t\t\t\tconst { bool } = await player\r\n\t\t\t\t\t.chooseBool(`【凌顶】:你可以摸${num}张牌`)\r\n\t\t\t\t\t.set(\"frequentSkill\", \"lingdingmrfz\")\r\n\t\t\t\t\t.set(\r\n\t\t\t\t\t\t\"prompt2\",\r\n\t\t\t\t\t\tget\r\n\t\t\t\t\t\t\t.prompt2(\"lingdingmrfz\")\r\n\t\t\t\t\t\t\t.substring(get.prompt2(\"lingdingmrfz\").indexOf(\"###\", get.prompt2(\"lingdingmrfz\").indexOf(\"###\") + 3) + 3)\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!bool) return;\r\n\t\t\t\tplayer.storage.lingdingmrfz[0] = 0;\r\n\t\t\t\tif (player.storage.lingdingmrfz[1] < player.maxHp) player.storage.lingdingmrfz[1]++;\r\n\t\t\t\tplayer.draw(num);\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.logSkill(\"lingdingmrfz\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tyabengmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"dying\" },\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.draw(Math.min(2, player.storage.lingdingmrfz[0]));\r\n\t\t\t\tplayer.storage.lingdingmrfz = [0, 0];\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//初雪\r\n\t\tshengnvmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tgame.countPlayer(current => {\r\n\t\t\t\t\t\treturn current != player;\r\n\t\t\t\t\t}) > 1\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tselectTarget: 2,\r\n\t\t\tfilterTarget: lib.filter.notMe,\r\n\t\t\tmultitarget: true,\r\n\t\t\tmultiline: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet targets = event.targets,\r\n\t\t\t\t\ttargets2 = [],\r\n\t\t\t\t\t// [<第二名角色的选项>，<第一名角色的选项>]\r\n\t\t\t\t\tcsn = [undefined, undefined];\r\n\t\t\t\twhile (targets.length > 0) {\r\n\t\t\t\t\tvar target = targets[0],\r\n\t\t\t\t\t\tlist = [],\r\n\t\t\t\t\t\tcsList = [\"收回所有装备区的牌\", \"将一张手牌当【乐不思蜀】置于你的判定区\", \"不能响应下一张指定你为目标的基本牌或普通锦囊牌\"];\r\n\t\t\t\t\tif (target.countCards(\"e\") > 0) {\r\n\t\t\t\t\t\tlist.push(\"选项一\");\r\n\t\t\t\t\t} else csList[0] = '<span style=\"opacity:0.5; \">' + csList[0] + \"（不可选：装备区没有牌）\" + \"</span>\";\r\n\t\t\t\t\tfor (var i of target.getCards(\"h\")) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (!target.canAddJudge({ name: \"lebu\", cards: [i] })) continue;\r\n\t\t\t\t\t\tlist.push(\"选项二\");\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!list.includes(\"选项二\"))\r\n\t\t\t\t\t\tcsList[1] = '<span style=\"opacity:0.5; \">' + csList[1] + \"（不可选：无法对自己使用【乐不思蜀】）\" + \"</span>\";\r\n\t\t\t\t\tlist.push(\"选项三\");\r\n\t\t\t\t\tif (list.length == 0) continue;\r\n\t\t\t\t\tconst { control } = await target\r\n\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t.set(\"choiceList\", csList)\r\n\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\tvar list = _status.event.list;\r\n\t\t\t\t\t\t\tif (list.includes(\"选项二\")) list.remove(\"选项二\");\r\n\t\t\t\t\t\t\treturn list.randomGet();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"target\", target)\r\n\t\t\t\t\t\t.set(\"list\", list)\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (!control) continue;\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tcsn[targets.length - 1] = control;\r\n\t\t\t\t\ttargets2.add(target);\r\n\t\t\t\t\tswitch (control) {\r\n\t\t\t\t\t\tcase \"选项一\":\r\n\t\t\t\t\t\t\ttarget.gain(target.getCards(\"e\"), \"gain2\");\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"选项二\": {\r\n\t\t\t\t\t\t\tconst { cards } = await target\r\n\t\t\t\t\t\t\t\t.chooseCard(true)\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", \"【圣女】:请选择一张手牌当【乐不思蜀】置于你的判定区\")\r\n\t\t\t\t\t\t\t\t.set(\"filterCard\", card => {\r\n\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\treturn target.canAddJudge({ name: \"lebu\", cards: [card] });\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\tif (!cards) break;\r\n\t\t\t\t\t\t\ttarget.useCard({ name: \"lebu\" }, cards, target);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcase \"选项三\":\r\n\t\t\t\t\t\t\ttarget.addMark(\"shengnvmrfz_direct\", 1, false);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttargets.shift();\r\n\t\t\t\t}\r\n\t\t\t\tif (csn[0] != csn[1]) {\r\n\t\t\t\t\tfor (let i of targets2) {\r\n\t\t\t\t\t\tif (!i.countGainableCards(player, \"he\")) continue;\r\n\t\t\t\t\t\tplayer.gainPlayerCard(\"he\", i, true).set(\"ai\", lib.card.shunshou.ai.button);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else player.draw(2);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: -1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tglobal: \"shengnvmrfz_direct\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdirect: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"不能响应下#张指定你为目标的基本牌或普通锦囊牌\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\ttarget: \"useCardToPlayered\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn player.countMark(\"shengnvmrfz_direct\") > 0 && (get.type(event.card) == \"basic\" || get.type(event.card) == \"trick\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"shengnvmrfz\");\r\n\t\t\t\t\t\tplayer.removeMark(\"shengnvmrfz_direct\", 1, false);\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttrigger.directHit.add(player);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshenshemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { target: \"useCardToTargeted\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.countCards(\"h\", card => get.is.shownCard(card)) < 1) return false;\r\n\t\t\t\tvar max = 0,\r\n\t\t\t\t\tshown = player.getCards(\"h\", card => get.is.shownCard(card));\r\n\t\t\t\tfor (var i of shown) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif ((i?.number || 0) > max) max = i.number;\r\n\t\t\t\t}\r\n\t\t\t\tvar number = get.number(event.card);\r\n\t\t\t\tif (number != null && Number(number) > max) return false;\r\n\t\t\t\treturn event.player.countCards(\"he\") > 0 && event.player != player && get.tag(event.card, \"damage\") > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet list = [],\r\n\t\t\t\t\tsource = trigger.player,\r\n\t\t\t\t\ttranTmp = function (str) {\r\n\t\t\t\t\t\tvar list = [\"e\", \"h\"];\r\n\t\t\t\t\t\tvar cn = [\"装备\", \"手牌\"];\r\n\t\t\t\t\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\t\t\t\t\tif (str == list[i]) return cn[i];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\tif (source.countCards(\"h\") > 0) list.push(\"h\");\r\n\t\t\t\tif (source.countCards(\"e\") > 0) list.push(\"e\");\r\n\t\t\t\tlet num = list.length;\r\n\t\t\t\tif (num == 0) return;\r\n\t\t\t\tsource\r\n\t\t\t\t\t.chooseToDiscard(true)\r\n\t\t\t\t\t.set(\"position\", \"he\")\r\n\t\t\t\t\t.set(\"prompt\", `【神慑】:请弃置${list.length > 1 ? tranTmp(list[0]) + \"和\" + tranTmp(list[1]) : tranTmp(list[0])}区的一张牌`)\r\n\t\t\t\t\t.set(\"selectCard\", num)\r\n\t\t\t\t\t.set(\"filterCard\", card => {\r\n\t\t\t\t\t\tif (ui.selected.cards.length == 0) return true;\r\n\t\t\t\t\t\tif (get.position(ui.selected.cards[0]) == \"h\") return get.position(card) == \"e\";\r\n\t\t\t\t\t\treturn get.position(card) == \"h\";\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"complexCard\", true)\r\n\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 0.6,\r\n\t\t\t},\r\n\t\t\tgroup: \"shenshemrfz_show\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tshow: {\r\n\t\t\t\t\taudio: \"shenshemrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseJieshuBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tplayer.countCards(\"h\", card => !get.is.shownCard(card)) > 0 && player.countCards(\"h\", card => get.is.shownCard(card)) == 0\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(trigger, event, player) {\r\n\t\t\t\t\t\tlet hs = player.getCards(\"h\", card => !get.is.shownCard(card));\r\n\t\t\t\t\t\tif (hs.length == 0) return;\r\n\t\t\t\t\t\tplayer.addShownCards(hs, \"visible_shenshemrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//狮蝎\r\n\t\tqianzongmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"showCharacterAfter\",\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\thiddenSkill: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.toShow.includes(\"shixiemrfz\");\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (player == _status.currentPhase) {\r\n\t\t\t\t\tlet list = [\"摸一张牌\"];\r\n\t\t\t\t\tif (player.getDamagedHp() > 0) list.push(\"回复体力\");\r\n\t\t\t\t\tlist.push(\"cancel2\");\r\n\t\t\t\t\tconst { control } = await player\r\n\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t.set(\"prompt\", \"【潜踪】:你可以回复一点体力或摸一张牌\")\r\n\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tif (player.hp < 3) return \"回复体力\";\r\n\t\t\t\t\t\t\treturn \"摸一张牌\";\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (!control || control == \"cancel2\") return;\r\n\t\t\t\t\tswitch (control) {\r\n\t\t\t\t\t\tcase \"摸一张牌\":\r\n\t\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"回复体力\":\r\n\t\t\t\t\t\t\tplayer.recover();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"qianzongmrfz\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst { targets } = await player\r\n\t\t\t\t\t\t.chooseTarget()\r\n\t\t\t\t\t\t.set(\"prompt\", \"【潜踪】:你可以对一名其他角色造成一点伤害\")\r\n\t\t\t\t\t\t.set(\"filterTarget\", lib.filter.notMe)\r\n\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\treturn get.attitude(target, player) < 0;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (!targets) return;\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"qianzongmrfz\", targets[0]);\r\n\t\t\t\t\ttargets[0].damage();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"qianzongmrfz_rehidden\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\trehidden: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tplayer.getHistory(\"lose\", function (evt) {\r\n\t\t\t\t\t\t\t\treturn evt.type == \"discard\";\r\n\t\t\t\t\t\t\t}).length == 0 && !player.isUnseen()\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(trigger, event, player) {\r\n\t\t\t\t\t\tconst { bool } = await player.chooseBool().set(\"prompt\", \"【潜踪】:是否进入隐匿状态？\").forResult();\r\n\t\t\t\t\t\tif (bool != true) return;\r\n\t\t\t\t\t\tplayer.reUnseen();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txiedumrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tcardname(card, player) {\r\n\t\t\t\t\tif (card.name == \"du\") return \"sha\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageSource\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tevent.player.isIn() &&\r\n\t\t\t\t\tevent.player.countCards(\"he\") > 0 &&\r\n\t\t\t\t\t(player != _status.currentPhase || (event.card && event.card.name == \"sha\"))\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tasync content(trigger, event, player) {\r\n\t\t\t\tvar target = event.player;\r\n\t\t\t\tconst { cards } = await player\r\n\t\t\t\t\t.choosePlayerCard(target, \"he\", true, 1, \"【蝎毒】:请选择一张牌\")\r\n\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\treturn get.value(button.link);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\tif (get.position(i) == \"e\") {\r\n\t\t\t\t\t\ttarget.discard(i);\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\ti.init([i.suit, i.number, \"du\"]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tlijimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tmarkcount: function (storage, player) {\r\n\t\t\t\t\tlet list = [];\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.getHistory(\"useCard\", function (evt) {\r\n\t\t\t\t\t\tlist.add(get.suit(evt.card));\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn `${list.length}`;\r\n\t\t\t\t},\r\n\t\t\t\tcontent: function (event, player, skill) {\r\n\t\t\t\t\tlet list = [];\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.getHistory(\"useCard\", function (evt) {\r\n\t\t\t\t\t\tlist.add(get.suit(evt.card));\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn `你使用的【杀】需要${list.length}张【闪】才可抵消<br>已经使用的花色：${get.translation(list)}`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\treturn event.card.name == \"sha\" && !event.getParent().directHit.includes(event.target);\r\n\t\t\t},\r\n\t\t\tlogTarget: \"target\",\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet list = [];\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tawait player.getHistory(\"useCard\", function (evt) {\r\n\t\t\t\t\tlist.add(get.suit(evt.card));\r\n\t\t\t\t});\r\n\t\t\t\tconst needNum = list.length;\r\n\t\t\t\tconst id = trigger.target.playerid;\r\n\t\t\t\tconst map = trigger.getParent()?.customArgs;\r\n\r\n\t\t\t\tif (!id || !map) return;\r\n\r\n\t\t\t\tif (!map[id]) map[id] = {};\r\n\t\t\t\tif (typeof map[id].shanRequired == \"number\") {\r\n\t\t\t\t\tmap[id].shanRequired = needNum;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmap[id].shanRequired = needNum;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\tskillTagFilter(player, tag, arg) {\r\n\t\t\t\t\tlet list = [];\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.getHistory(\"useCard\", function (evt) {\r\n\t\t\t\t\t\tlist.add(get.suit(evt.card));\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (arg.card.name != \"sha\" || arg.target.countCards(\"h\", \"shan\") > list.length) return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//红隼\r\n\t\tchihenmrfz: {\r\n\t\t\tmarktext: \"护\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"护\",\r\n\t\t\t\tcontent: \"你有#个‘护’标记\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseDiscardBegin\" },\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.hasEmptySlot(2);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet num = player.countCards(\"e\");\r\n\t\t\t\tconst { targets } = await player\r\n\t\t\t\t\t.chooseTarget(`【齿痕】:请选择至多${get.cnNumber(num)}角色，令这些角色获得一个‘护’`)\r\n\t\t\t\t\t.set(\"selectTarget\", function () {\r\n\t\t\t\t\t\tvar num = _status.event.num;\r\n\t\t\t\t\t\treturn [0, num];\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\treturn get.attitude(target, player) > 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"num\", num)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!targets) return;\r\n\t\t\t\tfor (var i of targets) {\r\n\t\t\t\t\ti.addMark(\"chihenmrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tglobal: \"chihenmrfz_eff1\",\r\n\t\t\tgroup: [\"chihenmrfz_eff2\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff1: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn (num += player.countMark(\"chihenmrfz\"));\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff2: {\r\n\t\t\t\t\taudio: \"chihenmrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { global: \"useCardToTargeted\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\tevent.player 使用者\r\n\t\t\t\t\t\t\tevent.targets 目标角色\r\n\t\t\t\t\t\t\t*/\r\n\t\t\t\t\t\tif (!get.tag(event.card, \"damage\") || !event.targets) return false;\r\n\t\t\t\t\t\tif (player.hp < event.player.hp) return false;\r\n\t\t\t\t\t\treturn event.target.hasMark(\"chihenmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet target = trigger.target,\r\n\t\t\t\t\t\t\teff = get.effect(target, trigger.card, trigger.player, trigger.player);\r\n\t\t\t\t\t\tconst { bool } = await trigger.player\r\n\t\t\t\t\t\t\t.chooseToDiscard(`【齿痕】:你须弃置一张牌，否则此牌(${get.translation(trigger.card)})对${get.translation(target)}无效`)\r\n\t\t\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\t\tif (_status.event.eff > 0) return 10 - get.value(card);\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"eff\", eff)\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (bool) {\r\n\t\t\t\t\t\t\ttarget.removeMark(\"chihenmrfz\");\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttrigger.getParent().excluded.add(target);\r\n\t\t\t\t\t\ttarget.removeMark(\"chihenmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thaomingmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { source: \"damageSource\" },\r\n\t\t\tusable: 1,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { control } = await player\r\n\t\t\t\t\t.chooseControl(\"basic\", \"trick\", \"equip\", \"cancel2\")\r\n\t\t\t\t\t.set(\"prompt\", \"【号鸣】:请选择你要获得的牌的类型\")\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\tif (player.hp < 3) return \"basic\";\r\n\t\t\t\t\t\tif (player.countCards(\"e\") >= 3) return [\"equip\", \"trick\", \"trick\", \"trick\", \"basic\"].randomGet();\r\n\t\t\t\t\t\treturn [\"basic\", \"trick\", \"trick\", \"equip\", \"equip\"].randomGet();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!control || control == \"cancel2\") {\r\n\t\t\t\t\tplayer.storage.counttrigger.haomingmrfz--;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.logSkill(\"haomingmrfz\");\r\n\t\t\t\tvar card = get.cardPile2(function (card) {\r\n\t\t\t\t\treturn get.type(card, \"trick\") == control;\r\n\t\t\t\t});\r\n\t\t\t\tif (card) player.gain(card, \"gain2\", \"log\");\r\n\t\t\t\telse player.chat(`牌堆中没有${get.translation(control)}牌了！`);\r\n\t\t\t},\r\n\t\t\tgroup: [\"haomingmrfz_jd\", \"haomingmrfz_find\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"使用牌不能指定有‘护’标记的牌的角色\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tplayerEnabled: function (card, player, target) {\r\n\t\t\t\t\t\t\tif (target.hasMark(\"chihenmrfz\")) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tjd: {\r\n\t\t\t\t\ttrigger: { player: \"phaseJieshuBegin\" },\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.hasUseTarget(\"juedou\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst { targets } = await player\r\n\t\t\t\t\t\t\t.chooseTarget(\"【号鸣】:你可以选择一名其他角色，视为对其使用一张【决斗】\")\r\n\t\t\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\r\n\t\t\t\t\t\t\t\treturn player.canUse(\"juedou\", target);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\t\t\t\teff = get.effect(target, { name: \"juedou\", isCard: true }, player, player);\r\n\t\t\t\t\t\t\t\tif (eff < 0) return 0;\r\n\t\t\t\t\t\t\t\treturn eff;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (!targets) return;\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.when({ global: [\"damageEnd\", \"phaseJieshuAfter\"] })\r\n\t\t\t\t\t\t\t.filter((event, player) => {\r\n\t\t\t\t\t\t\t\tif (event.name == \"phaseJieshu\") return true;\r\n\t\t\t\t\t\t\t\treturn event.card && event.card.storage.haomingmrfz == true;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.then(async (event, trigger, player) => {\r\n\t\t\t\t\t\t\t\tif (trigger.name == \"phaseJieshu\") return;\r\n\t\t\t\t\t\t\t\tvar target = trigger.player,\r\n\t\t\t\t\t\t\t\t\tnum = Math.ceil(target.countCards(\"h\") / 2);\r\n\t\t\t\t\t\t\t\tif (num > 0) target.chooseToDiscard(true, num, `【号鸣】:请弃置${get.translation(num)}张手牌`);\r\n\t\t\t\t\t\t\t\ttarget.addTempSkill(\"haomingmrfz_ban\", { player: \"phaseEnd\" });\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tplayer.useCard({ name: \"juedou\", isCard: true, storage: { haomingmrfz: true } }, targets[0]).logSkill = \"haomingmrfz\";\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tfind: {\r\n\t\t\t\t\taudio: \"haomingmrfz\",\r\n\t\t\t\t\tenable: \"phaseUse\",\r\n\t\t\t\t\tusable: 1,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.countCards(\"h\") > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: \"【号鸣】:你可以弃置任意张手牌，然后从牌堆中获得一张与弃置的牌字数相同的牌\",\r\n\t\t\t\t\tfilterCard: true,\r\n\t\t\t\t\tselectCard: [1, Infinity],\r\n\t\t\t\t\tcheck(card) {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\tif (player.hp < 3) {\r\n\t\t\t\t\t\t\tif (ui.selected.cards.length == 0) return 6 - get.value(card);\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!player.hasEmptySlot(2)) {\r\n\t\t\t\t\t\t\tif (ui.selected.cards.length < 2) return 6 - get.value(card);\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (ui.selected.cards.length < 3) return 6 - get.value(card);\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet cards = event.cards,\r\n\t\t\t\t\t\t\tnum = cards.length,\r\n\t\t\t\t\t\t\tlist = [];\r\n\t\t\t\t\t\tfor (var i of ui.cardPile.childNodes) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tif (get.cardNameLength(i) != num) continue;\r\n\t\t\t\t\t\t\tlist.push(i);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (list.length == 0) {\r\n\t\t\t\t\t\t\tplayer.chat(`牌堆中没有字数为${get.cnNumber(num)}的牌！`);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst { links } =\r\n\t\t\t\t\t\t\tlist.length == 1\r\n\t\t\t\t\t\t\t\t? { links: list[0] }\r\n\t\t\t\t\t\t\t\t: await player\r\n\t\t\t\t\t\t\t\t\t\t.chooseCardButton(\"【号鸣】:请选择你要获得的牌\", true, list)\r\n\t\t\t\t\t\t\t\t\t\t.set(\"ai\", function (button) {\r\n\t\t\t\t\t\t\t\t\t\t\tvar name = button.name,\r\n\t\t\t\t\t\t\t\t\t\t\t\tplayer = _status.event.player;\r\n\t\t\t\t\t\t\t\t\t\t\tif (player.hp < 3 && name == \"tao\") return 10;\r\n\t\t\t\t\t\t\t\t\t\t\treturn get.value(button);\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (!links) return;\r\n\t\t\t\t\t\tvar card = get.cardPile2(function (card) {\r\n\t\t\t\t\t\t\treturn card == links[0];\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (card) player.gain(card, \"gain2\", \"log\");\r\n\t\t\t\t\t\telse player.chat(`牌堆中没有${get.translation(links)}了！`);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\torder: 5,\r\n\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//稀音\r\n\t\tsheyingmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\tvar bool = false;\r\n\t\t\t\t\tfor (var i of game.players) {\r\n\t\t\t\t\t\tfor (var j of [1, 2, 3, 4, 5]) {\r\n\t\t\t\t\t\t\tif (i.hasCard(`jingtouE${j}mrfz`, \"e\")) {\r\n\t\t\t\t\t\t\t\tbool = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (bool) return num + 2;\r\n\t\t\t\t},\r\n\t\t\t\tglobalTo(from, to, distance) {\r\n\t\t\t\t\tvar bool = false;\r\n\t\t\t\t\tfor (var i of game.players) {\r\n\t\t\t\t\t\tfor (var j of [1, 2, 3, 4, 5]) {\r\n\t\t\t\t\t\t\tif (i.hasCard(`jingtouE${j}mrfz`, \"e\")) {\r\n\t\t\t\t\t\t\t\tbool = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (bool) return distance + 1;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tderivation: [\"jingtoumrfz_show\"],\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar num = 0;\r\n\t\t\t\tfor (var i of game.players) {\r\n\t\t\t\t\tfor (var j of [1, 2, 3, 4, 5]) {\r\n\t\t\t\t\t\tif (i.hasCard(`jingtouE${j}mrfz`, \"e\")) num++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn player.countCards(\"h\") > 0 && num < 4;\r\n\t\t\t},\r\n\t\t\tusable: 2,\r\n\t\t\tposition: \"he\",\r\n\t\t\tfilterCard: true,\r\n\t\t\tfilterTarget: lib.filter.notMe,\r\n\t\t\tcheck(card) {\r\n\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet targets = event.targets,\r\n\t\t\t\t\tlist1 = [],\r\n\t\t\t\t\tlist2 = [];\r\n\t\t\t\tfor (let i of [1, 2, 3, 4, 5]) list1.push(`jingtouE${i}mrfz`);\r\n\t\t\t\tfor (let i of list1) {\r\n\t\t\t\t\tlist2.push([\"装备\", \"\", i]);\r\n\t\t\t\t}\r\n\t\t\t\tconst { links } = await player\r\n\t\t\t\t\t.chooseButton([\"稀音\", [list2, \"vcard\"]], true)\r\n\t\t\t\t\t.set(\"ai\", function (button) {\r\n\t\t\t\t\t\tvar target = _status.event.target,\r\n\t\t\t\t\t\t\tlist = _status.event.list,\r\n\t\t\t\t\t\t\tcard = { name: button.link[2] },\r\n\t\t\t\t\t\t\tequip = [];\r\n\t\t\t\t\t\tfor (var i of target.getCards(\"e\")) equip.push(get.name(i));\r\n\t\t\t\t\t\tif (equip.includes(card.name)) return 0;\r\n\t\t\t\t\t\tif (get.subtype(card) == \"equip2\") return 5;\r\n\t\t\t\t\t\tif (get.subtype(card) == \"equip1\") return 4;\r\n\t\t\t\t\t\tif (get.subtype(card) == \"equip5\") return 3;\r\n\t\t\t\t\t\tif (get.subtype(card) == \"equip3\" || get.subtype(card) == \"equip3\") return 2;\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"target\", targets[0])\r\n\t\t\t\t\t.set(\"list\", list1)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!links) return;\r\n\t\t\t\tvar suit,\r\n\t\t\t\t\tlist3 = [\"heart\", \"club\", \"spade\", \"spade\", \"diamond\"];\r\n\t\t\t\tfor (var i = 0; i < list1.length; i++) {\r\n\t\t\t\t\tif (links[0][2] == list1[i]) suit = list3[i];\r\n\t\t\t\t}\r\n\t\t\t\tvar card = game.createCard(links[0][2], suit, 7);\r\n\t\t\t\ttargets[0].$gain2(card);\r\n\t\t\t\tgame.delayx();\r\n\t\t\t\ttargets[0].equip(card);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: -1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tchaozaimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\thasJingtou(player) {\r\n\t\t\t\treturn this.getJingtou(player).length > 0 ? true : false;\r\n\t\t\t},\r\n\t\t\tgetJingtou(player) {\r\n\t\t\t\tlet cards = [];\r\n\t\t\t\tlet names = Array.from({ length: 5 }, (v, i) => `jingtouE${i + 1}mrfz`);\r\n\t\t\t\tfor (let card of player.getCards(\"e\")) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (names.includes(get.name(card))) cards.push(card);\r\n\t\t\t\t}\r\n\t\t\t\treturn cards;\r\n\t\t\t},\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => lib.skill.chaozaimrfz.hasJingtou(current));\r\n\t\t\t},\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\tlet targets = game.filterPlayer(current => lib.skill.chaozaimrfz.hasJingtou(current));\r\n\t\t\t\tlet jingtous = [];\r\n\t\t\t\tfor (let char of game.players) {\r\n\t\t\t\t\tif (targets.includes(char)) jingtous.addArray(lib.skill.chaozaimrfz.getJingtou(char));\r\n\t\t\t\t}\r\n\t\t\t\treturn `你可以弃置${get.translation(targets)}区域中的镜头并摸${jingtous.length}张牌`;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet targets = game.filterPlayer(current => lib.skill.chaozaimrfz.hasJingtou(current));\r\n\t\t\t\tlet jingtous = [];\r\n\t\t\t\tfor (let char of game.players) {\r\n\t\t\t\t\tif (targets.includes(char)) jingtous.addArray(lib.skill.chaozaimrfz.getJingtou(char));\r\n\t\t\t\t}\r\n\t\t\t\tgame.cardsDiscard(jingtous);\r\n\t\t\t\tplayer.draw(jingtous.length);\r\n\t\t\t\tfor (let i of targets) {\r\n\t\t\t\t\ti.addSkill(\"chaozaimrfz_eff\");\r\n\t\t\t\t\ti.storage.chaozaimrfz = player;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tmarkimage: \"extension/WhichWay/image/orther/xiyinchaozaimrfz.png\",\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tname: \"超载\",\r\n\t\t\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\t\t\tlet str = `\r\n\t\t\t\t\t\t\t\t\t·XXX<br>\r\n\t\t\t\t\t\t\t\t\t·其他角色对你使用牌无次数限制<br>\r\n\t\t\t\t\t\t\t\t\t·其他角色对你使用牌无距离限制\r\n\t\t\t\t\t\t\t\t`;\r\n\t\t\t\t\t\t\tlet str2 = `受到的伤害+1`;\r\n\t\t\t\t\t\t\tif (player.storage.chaozaimrfz_eff) return str.replace(/XXX/g, `<font color = gray>${str2}（已触发）</font>`);\r\n\t\t\t\t\t\t\treturn str.replace(/XXX/g, str2);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tglobal: \"chaozaimrfz_eff2\",\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"damageBegin2\",\r\n\t\t\t\t\t\tglobal: [\"dieAfter\", \"phaseBegin\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tif (event.name == \"damage\") return true;\r\n\t\t\t\t\t\treturn player.storage.chaozaimrfz == event.player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (trigger.name == \"die\" || trigger.name == \"phase\") {\r\n\t\t\t\t\t\t\tplayer.removeSkill(\"chaozaimrfz_eff\");\r\n\t\t\t\t\t\t\tdelete player.storage.chaozaimrfz;\r\n\t\t\t\t\t\t\tdelete player.storage.chaozaimrfz_eff;\r\n\t\t\t\t\t\t} else if (player.storage.chaozaimrfz_eff != true) {\r\n\t\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"chaozaimrfz\");\r\n\t\t\t\t\t\t\tplayer.storage.chaozaimrfz_eff = true;\r\n\t\t\t\t\t\t\tplayer.when({ global: \"phaseEnd\" }).then(async (event, trigger, player) => {\r\n\t\t\t\t\t\t\t\tdelete player.storage.chaozaimrfz_eff;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff2: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\ttargetInRange(card, player, target) {\r\n\t\t\t\t\t\t\tif (target.hasSkill(\"chaozaimrfz_eff\")) {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcardUsableTarget(card, player, target) {\r\n\t\t\t\t\t\t\tif (target.hasSkill(\"chaozaimrfz_eff\")) return true;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//夜魔\r\n\t\tbiaolimrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\taiOrder(player, card, num) {\r\n\t\t\t\t\tif (get.itemtype(card) == \"card\" && card.storage && card.storage.biaolimrfz == true) return num + 1;\r\n\t\t\t\t},\r\n\t\t\t\tcardname(card, player, name) {\r\n\t\t\t\t\tvar storage = player.storage.biaolimrfz == \"red\" ? \"tao\" : \"sha\";\r\n\t\t\t\t\tif (card.storage && card.storage.biaolimrfz == true) return storage;\r\n\t\t\t\t},\r\n\t\t\t\ttargetInRange(card, player, target) {\r\n\t\t\t\t\tif (card.storage && card.storage.biaolimrfz == true && get.name(card) == \"sha\" && target.hp >= player.hp) return true;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst result = await player.draw(3).forResult();\r\n\t\t\t\tlet cards = result.cards;\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\tvar red = 0;\r\n\t\t\t\tfor (let i of cards) {\r\n\t\t\t\t\tif (get.color(i) == \"red\") red++;\r\n\t\t\t\t\ti.storage.biaolimrfz = true;\r\n\t\t\t\t\ti.addGaintag(\"biaolimrfz\");\r\n\t\t\t\t}\r\n\t\t\t\tif (red > 1) player.storage.biaolimrfz = \"red\";\r\n\t\t\t\telse player.storage.biaolimrfz = \"black\";\r\n\t\t\t},\r\n\t\t\tgroup: [\"biaolimrfz_nocount\", \"biaolimrfz_set\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tset: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tunique: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event,trigger,player) {\r\n\t\t\t\t\t\tvar enable = lib.card.tao.enable;\r\n\t\t\t\t\t\tlib.card.tao.enable = function (card, player) {\r\n\t\t\t\t\t\t\tif (player.storage.biaolimrfz && player.storage.biaolimrfz == \"red\" && player.isPhaseUsing()) {\r\n\t\t\t\t\t\t\t\tif (card.storage.biaolimrfz) return true;\r\n\t\t\t\t\t\t\t\treturn player.hp < player.maxHp;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn enable(card, player);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tvar selectTarget = lib.card.tao.selectTarget;\r\n\t\t\t\t\t\tlib.card.tao.selectTarget = function () {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tif (player.storage.biaolimrfz && player.storage.biaolimrfz == \"red\" && player.isPhaseUsing()) {\r\n\t\t\t\t\t\t\t\treturn [1, 1]; //QQQ\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn selectTarget;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tvar filterTarget = lib.card.tao.filterTarget;\r\n\t\t\t\t\t\tlib.card.tao.filterTarget = function (card, player, target) {\r\n\t\t\t\t\t\t\tif (player.storage.biaolimrfz && player.storage.biaolimrfz == \"red\" && player.isPhaseUsing()) {\r\n\t\t\t\t\t\t\t\tif (card.storage.biaolimrfz) return target.hp < target.maxHp;\r\n\t\t\t\t\t\t\t\treturn target.hp < target.maxHp && target == player;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn filterTarget(card, player, target);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tnocount: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard2\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tif (!event.card) return false;\r\n\t\t\t\t\t\tif (event.card.storage.biaolimrfz != true || get.name(event.card) != \"sha\") return false;\r\n\t\t\t\t\t\tfor (var i of event.targets) {\r\n\t\t\t\t\t\t\tif (player.hp <= i.hp) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (trigger.addCount !== false) {\r\n\t\t\t\t\t\t\ttrigger.addCount = false;\r\n\t\t\t\t\t\t\ttrigger.player.getStat().card.sha--;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tymkongwomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { player: \"phaseDrawEnd\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { bool } = await player\r\n\t\t\t\t\t.chooseToDiscard()\r\n\t\t\t\t\t.set(\"position\", \"he\")\r\n\t\t\t\t\t.set(\"prompt\", \"【控我】:你可以弃置一张牌，然后观看牌堆顶两张牌，并以任意顺序将其置于牌堆顶或牌堆底\")\r\n\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\tif (player.skipList.includes(\"phaseUse\")) return 0;\r\n\t\t\t\t\t\tif (card.storage.biaolimrfz == true) return 10 - get.value(card);\r\n\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!bool) return;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.logSkill(\"ymkongwomrfz\");\r\n\t\t\t\tvar cards = get.cards(2);\r\n\t\t\t\tgame.cardsGotoOrdering(cards);\r\n\t\t\t\tconst { moved } = await player\r\n\t\t\t\t\t.chooseToMove()\r\n\t\t\t\t\t.set(\"list\", [[\"牌堆顶\", cards], [\"牌堆底\"]])\r\n\t\t\t\t\t.set(\"prompt\", \"点击将牌移动到牌堆顶或牌堆底\")\r\n\t\t\t\t\t.set(\"processAI\", function (list) {\r\n\t\t\t\t\t\tvar cards = list[0][1],\r\n\t\t\t\t\t\t\tplayer = _status.event.player;\r\n\t\t\t\t\t\tvar top = [];\r\n\t\t\t\t\t\tvar bottom;\r\n\t\t\t\t\t\tcards.sort(function (a, b) {\r\n\t\t\t\t\t\t\tvar a_value = get.color(a, player) == \"red\" ? 3 : 5,\r\n\t\t\t\t\t\t\t\tb_value = get.color(b, player) == \"red\" ? 3 : 5,\r\n\t\t\t\t\t\t\t\thp = player.hp;\r\n\t\t\t\t\t\t\tif (hp < 3) {\r\n\t\t\t\t\t\t\t\tif (get.color(a, player) == \"red\") a_value + 3;\r\n\t\t\t\t\t\t\t\tif (get.color(b, player) == \"red\") b_value + 3;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn b_value - a_value;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\twhile (cards.length) {\r\n\t\t\t\t\t\t\tvar value = 0;\r\n\t\t\t\t\t\t\tif (player.hp < 3) {\r\n\t\t\t\t\t\t\t\tif (get.color(cards[0], player) == \"red\") value++;\r\n\t\t\t\t\t\t\t} else if (get.color(cards[0], player) == \"black\") value++;\r\n\t\t\t\t\t\t\tif (value <= 0) break;\r\n\t\t\t\t\t\t\ttop.unshift(cards.shift());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbottom = cards;\r\n\t\t\t\t\t\treturn [top, bottom];\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!moved) return;\r\n\t\t\t\tvar top = moved[0];\r\n\t\t\t\tvar bottom = moved[1];\r\n\t\t\t\ttop.reverse();\r\n\t\t\t\tfor (var i = 0; i < top.length; i++) {\r\n\t\t\t\t\tui.cardPile.insertBefore(top[i], ui.cardPile.firstChild);\r\n\t\t\t\t}\r\n\t\t\t\tfor (i = 0; i < bottom.length; i++) {\r\n\t\t\t\t\tui.cardPile.appendChild(bottom[i]);\r\n\t\t\t\t}\r\n\t\t\t\tgame.addCardKnower(top, [player]);\r\n\t\t\t\tgame.addCardKnower(bottom, [player]);\r\n\t\t\t\tplayer.popup(get.cnNumber(top.length) + \"上\" + get.cnNumber(bottom.length) + \"下\");\r\n\t\t\t\tgame.log(player, \"将\" + get.cnNumber(top.length) + \"张牌置于牌堆顶\");\r\n\t\t\t\tgame.updateRoundNumber();\r\n\t\t\t\tlet { promise, resolve } = Promise.withResolvers();\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tresolve(true);\r\n\t\t\t\t}, 500);\r\n\t\t\t\tawait promise;\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//惊蛰\r\n\t\tchunleimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"phaseZhunbeiBegin\" },\r\n\t\t\tdirect: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"he\", { color: \"black\" }) > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { cards } = await player\r\n\t\t\t\t\t.chooseCard()\r\n\t\t\t\t\t.set(\"prompt\", `【春雷】:你可以弃置一张黑色的牌，对${get.translation(trigger.player)}造成一点雷属性的伤害`)\r\n\t\t\t\t\t.set(\"filterCard\", card => get.color(card) == \"black\")\r\n\t\t\t\t\t.set(\"position\", \"he\")\r\n\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\tif (get.damageEffect(_status.event.target, player, player, \"thunder\") > 0) return 6 - get.value(card);\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"target\", trigger.player)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\tplayer.discard(cards);\r\n\t\t\t\ttrigger.player.damage(\"thunder\");\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.logSkill(\"chunleimrfz\", trigger.player);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tthreaten: 1.3,\r\n\t\t\t},\r\n\t\t},\r\n\t\tzheqimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { global: \"damageEnd\" },\r\n\t\t\tusable: 1,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.nature && event.nature == \"thunder\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar target = _status.currentPhase;\r\n\t\t\t\tif (!target) return;\r\n\t\t\t\ttarget.addTempSkill(\"zheqimrfz_eff1\");\r\n\t\t\t\tplayer.addTempSkill(\"zheqimrfz_eff2\", { global: \"phaseBegin\" });\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff1: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"<i>正月启蛰，言发蛰也。万物出乎震，震为雷，故曰惊蛰。是蛰虫惊而出走矣。<br>————《大戴礼记·夏小正》</i>\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable(card) {\r\n\t\t\t\t\t\t\tif (get.itemtype(card) == \"card\") return Infinity;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn event.card && get.type(event.card) != \"equip\" && player.countCards(\"h\") > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.chooseToDiscard(true, \"【蛰起】:请选择弃置一张手牌\").set(\"ai\", card => 6 - get.value(card));\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff2: {\r\n\t\t\t\t\taudio: \"zheqimrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\t\t\tgetDiscard: function (event, player) {\r\n\t\t\t\t\t\tvar history = event.player.getHistory(\"lose\", function (evt) {\r\n\t\t\t\t\t\t\t\treturn evt && evt.type == \"discard\";\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\tcards = [];\r\n\t\t\t\t\t\tif (history.length == 0) return cards;\r\n\t\t\t\t\t\tfor (var i = 0; i < history.length; i++) {\r\n\t\t\t\t\t\t\tvar cardsList = history[i].cards;\r\n\t\t\t\t\t\t\tfor (var j = 0; j < cardsList.length; j++) {\r\n\t\t\t\t\t\t\t\tif (get.position(cardsList[j], true) != \"d\") continue;\r\n\t\t\t\t\t\t\t\tcards.push(cardsList[j]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn cards;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tvar cards = lib.skill.zheqimrfz_eff2.getDiscard(event, player);\r\n\t\t\t\t\t\treturn cards.length > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet cards = lib.skill.zheqimrfz_eff2.getDiscard(trigger, player);\r\n\t\t\t\t\t\tconst { links } = await player\r\n\t\t\t\t\t\t\t.chooseButton([\"【蛰起】:请选择你要获得的牌\", cards])\r\n\t\t\t\t\t\t\t.set(\"forced\", true)\r\n\t\t\t\t\t\t\t.set(\"filterButton\", button => {\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\treturn !ui.selected.buttons.some(i => get.type2(i, player) == get.type2(button, player));\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"selectButton\", [1, Infinity])\r\n\t\t\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\t\t\treturn _status.event.player.getUseValue(button.link);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (!links) return;\r\n\t\t\t\t\t\tplayer.gain(links, \"gain2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.3,\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//龙舌兰\r\n\t\tpianfengmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageSource\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tevent.player && event.player.isIn() && event.card.isCard && event.cards.filterInD().length > 0 && event.player.countCards(\"h\") > 0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tprompt(event, player) {\r\n\t\t\t\tvar num =\r\n\t\t\t\t\tevent.player.getHistory(\"damage\", evt => {\r\n\t\t\t\t\t\treturn evt.card && evt.card.name == event.card.name;\r\n\t\t\t\t\t}).length + 1;\r\n\t\t\t\treturn `【偏锋】:是否令${get.translation(event.player)}回复一点体力并展示其${get.cnNumber(num)}张手牌`;\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\tvar num = event.player.getHistory(\"damage\", evt => {\r\n\t\t\t\t\t\treturn evt.card && evt.card.name == event.card.name;\r\n\t\t\t\t\t}).length,\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tatt = get.attitude(event.player.player);\r\n\t\t\t\t/*\r\n\t\t\t\t\tif(num<2&&att>0) return true;\r\n\t\t\t\t\treturn num>1&&att<0&&event.player.countCards('h')>=num;\r\n\t\t\t\t\t*/\r\n\t\t\t\treturn att < 0 && event.player.countCards(\"h\") >= num;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet num =\r\n\t\t\t\t\t\ttrigger.player.getHistory(\"damage\", evt => {\r\n\t\t\t\t\t\t\treturn evt.card && evt.card.name == trigger.card.name;\r\n\t\t\t\t\t\t}).length + 1,\r\n\t\t\t\t\ttarget = trigger.player;\r\n\t\t\t\ttarget.recover();\r\n\t\t\t\tconst { cards } = await player\r\n\t\t\t\t\t.choosePlayerCard()\r\n\t\t\t\t\t.set(\"selectButton\", num)\r\n\t\t\t\t\t.set(\"forced\", true)\r\n\t\t\t\t\t.set(\"position\", \"h\")\r\n\t\t\t\t\t.set(\"target\", target)\r\n\t\t\t\t\t.set(\"prompt\", `【偏锋】:请选择展示${get.translation(target)}的${get.cnNumber(num)}张牌`)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\tplayer.showCards(cards, `${get.translation(player)}展示了${get.translation(target)}的${get.cnNumber(num)}张牌`);\r\n\t\t\t\tgame.delay();\r\n\t\t\t\tlet bool = false;\r\n\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\tif (get.type2(i) != get.type2(trigger.card)) continue;\r\n\t\t\t\t\tbool = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (!bool) {\r\n\t\t\t\t\tplayer.draw(num);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\ttarget.discard(cards);\r\n\t\t\t\ttarget.loseHp(num);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.5,\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//阿米娅\r\n\t\ttongganmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"drawAfter\",\r\n\t\t\t},\r\n\t\t\tusable: 3,\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.player !== player;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.draw();\r\n\t\t\t},\r\n\t\t\tgroup: \"tonggan_discardmrfz\",\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 2,\r\n\t\t\t},\r\n\t\t},\r\n\t\ttonggan_discardmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"loseAfter\",\r\n\t\t\t},\r\n\t\t\tusable: 3,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.type != \"discard\") return false;\r\n\t\t\t\treturn event.player !== player;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.chooseToDiscard(\"he\", true, 1);\r\n\t\t\t},\r\n\t\t},\r\n\t\tqinghemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tzhuSkill: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"loseAfter\",\r\n\t\t\t\tglobal: \"loseAsyncAfter\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player == _status.currentPhase) return false;\r\n\t\t\t\treturn event.type == \"discard\" && event.getl(player).cards2.length > 0 && !player.hasSkill(\"qinghemrfz_ban\");\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar target = _status.currentPhase;\r\n\t\t\t\tif (!target) return;\r\n\t\t\t\tconst { bool } = await target\r\n\t\t\t\t\t.chooseBool(\"【亲和】：是否让\" + get.translation(player) + \"其弃置的牌中的一张牌？\")\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\treturn get.attitude(_status.currentPhase, _status.event.targetx) > 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"targetx\", player)\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\tif (bool) {\r\n\t\t\t\t\tlet target = _status.currentPhase;\r\n\t\t\t\t\tif (!target) return;\r\n\t\t\t\t\tplayer.addTempSkill(\"qinghemrfz_ban\", \"phaseEnd\");\r\n\t\t\t\t\tif (trigger.cards.length == 1) {\r\n\t\t\t\t\t\tplayer.gain(trigger.cards, \"gain2\");\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (trigger.cards.length > 1) {\r\n\t\t\t\t\t\tconst result = await target\r\n\t\t\t\t\t\t\t.chooseButton([\"选择获得令其获得其中的一张牌\", trigger.cards.slice(0)], true)\r\n\t\t\t\t\t\t\t.set(\"ai\", button => get.value(button.link))\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (result.links) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"qinghemrfz\");\r\n\t\t\t\t\t\t\tplayer.gain(result.links, \"gain2\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//doc 医生\r\n\t\tyizhemrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tignoredHandcard: function (card, player) {\r\n\t\t\t\t\tif (get.name(card) == \"tao\") {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcardDiscardable: function (card, player, name) {\r\n\t\t\t\t\tif (name == \"phaseDiscard\" && get.name(card) == \"tao\") return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tinit() {\r\n\t\t\t\tvar enable = lib.card.tao.enable;\r\n\t\t\t\tlib.card.tao.enable = function (card, player) {\r\n\t\t\t\t\tif (player.hasSkill(\"yizhemrfz\")) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn enable(card, player);\r\n\t\t\t\t};\r\n\t\t\t\tvar selectTarget = lib.card.tao.selectTarget;\r\n\t\t\t\tlib.card.tao.selectTarget = function () {\r\n\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\tif (player.hasSkill(\"yizhemrfz\")) {\r\n\t\t\t\t\t\treturn [1, 1]; //QQQ\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn selectTarget;\r\n\t\t\t\t};\r\n\t\t\t\tvar filterTarget = lib.card.tao.filterTarget;\r\n\t\t\t\tlib.card.tao.filterTarget = function (card, player, target) {\r\n\t\t\t\t\tif (player.hasSkill(\"yizhemrfz\")) {\r\n\t\t\t\t\t\treturn target.hp < target.maxHp && (player.inRange(target) || player == target);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn filterTarget(card, player, target);\r\n\t\t\t\t};\r\n\t\t\t\tlib.card.tao.content = async function (event, trigger, player) {\r\n\t\t\t\t\tconst { target } = event;\r\n\t\t\t\t\tif (player.hasSkill(\"yizhemrfz\")) {\r\n\t\t\t\t\t\tvar num = target.getDamagedHp();\r\n\t\t\t\t\t\ttarget.recover(5);\r\n\t\t\t\t\t\tif (5 - num > 0) {\r\n\t\t\t\t\t\t\ttarget.addSkill(\"yizhemrfz_eff\");\r\n\t\t\t\t\t\t\ttarget.storage.yizhemrfz_eff = 5 - num;\r\n\t\t\t\t\t\t\ttarget.changeHujia(5 - num);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else target.recover();\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar cards = [];\r\n\t\t\t\tif (ui.cardPile.childNodes.length < 1) return;\r\n\t\t\t\tfor (var i of ui.cardPile.childNodes) {\r\n\t\t\t\t\tif (cards.length > 2) break;\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (i.name == \"tao\") cards.push(i);\r\n\t\t\t\t}\r\n\t\t\t\tif (cards.length > 0) player.gain(cards, \"gain2\");\r\n\t\t\t\telse player.chat(\"byd怎么开局牌堆中的桃就没了？\");\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\t\t\treturn `你因【桃】而获得的护甲数:${player.storage.yizhemrfz_eff}`;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (!player.hujia) return;\r\n\t\t\t\t\t\tif (player.storage.yizhemrfz_eff && player.storage.yizhemrfz_eff > 0) {\r\n\t\t\t\t\t\t\tplayer.storage.yizhemrfz_eff--;\r\n\t\t\t\t\t\t\tplayer.changeHujia(-1);\r\n\t\t\t\t\t\t\tplayer.popup(\"失去护甲\");\r\n\t\t\t\t\t\t\tgame.log(player, \"失去了一点因【桃】而获得的护甲值\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (player.storage.yizhemrfz_eff && player.storage.yizhemrfz_eff == 0) {\r\n\t\t\t\t\t\t\tplayer.removeSkill(\"yizhemrfz_eff\");\r\n\t\t\t\t\t\t\tdelete player.storage.yizhemrfz_eff;\r\n\t\t\t\t\t\t\tplayer.unmarkSkill(\"yizhemrfz_eff\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgroup: \"yizhemrfz_lose\",\r\n\t\t\t\t},\r\n\t\t\t\tlose: {\r\n\t\t\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.hujia;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (player.storage.yizhemrfz_eff && player.storage.yizhemrfz_eff > 0) {\r\n\t\t\t\t\t\t\tplayer.storage.yizhemrfz_eff--;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (player.storage.yizhemrfz_eff && player.storage.yizhemrfz_eff == 0) {\r\n\t\t\t\t\t\t\tplayer.removeSkill(\"yizhemrfz_eff\");\r\n\t\t\t\t\t\t\tdelete player.storage.yizhemrfz_eff;\r\n\t\t\t\t\t\t\tplayer.unmarkSkill(\"yizhemrfz_eff\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhulimrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tcardname(card, player, name) {\r\n\t\t\t\t\tif (card.hasGaintag(\"zhulimrfz\")) return \"tao\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseJieshuBegin\" },\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (player.getStat(\"damage\") != undefined) {\r\n\t\t\t\t\tif (player.countCards(\"he\") > 0) player.chooseToDiscard(\"he\", true, `【医者】:请选择弃置一张牌`);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst result = await player.draw(2).forResult();\r\n\t\t\t\t\tif (!result) return;\r\n\t\t\t\t\tvar cards = result.cards;\r\n\t\t\t\t\tif (!cards) return;\r\n\t\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\t\tvar num = get.number(i);\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (get.suit(i) == \"heart\" && num >= 2 && num <= 9) {\r\n\t\t\t\t\t\t\ti.addGaintag(\"zhulimrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//inna 双月\r\n\t\tshuangzimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t},\r\n\r\n\t\t//凛视\r\n\t\t/** @type { Skill } */\r\n\t\tjiangtumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { player: [\"gainPlayerCardBegin\", \"discardPlayerCardBegin\", \"choosePlayerCardBegin\"] },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn _status.currentPhase == event.target;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.logSkill(\"jiangtumrfz\", _status.currentPhase);\r\n\t\t\t\ttrigger.visible = true;\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.1,\r\n\t\t\t\tviewHandcard: true,\r\n\t\t\t\tskillTagFilter(player, tag, arg) {\r\n\t\t\t\t\tif (tag === \"viewHandcard\" && arg !== _status.currentPhase) return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t/** @type { Skill } */\r\n\t\tjieshimrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\taiOrder: function (player, card, num) {\r\n\t\t\t\t\tvar list = player.storage.jieshimrfz;\r\n\t\t\t\t\tif (typeof card == \"object\" && player.isPhaseUsing() && list && list.length > 0) {\r\n\t\t\t\t\t\tif (get.type2(card) == list[0]) return num + 10;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 3,\r\n\t\t\ttrigger: { global: \"phaseUseBegin\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { cards } = await player\r\n\t\t\t\t\t.chooseToDiscard(\"he\")\r\n\t\t\t\t\t.set(\r\n\t\t\t\t\t\t\"prompt\",\r\n\t\t\t\t\t\t`【揭示】:你可以弃置一张牌，然后猜测${trigger.player == player ? \"你\" : get.translation(trigger.player)}本阶段前三张牌分别使用的类型（对${trigger.player == player ? \"你\" : get.translation(trigger.player)}不可见）。`\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.logSkill(\"jieshimrfz\");\r\n\t\t\t\tvar list = [\r\n\t\t\t\t\t[\"待选择的牌的类型\", [[\"basic\", \"basic\", \"basic\", \"trick\", \"trick\", \"trick\", \"equip\", \"equip\", \"equip\"], \"vcard\"]],\r\n\t\t\t\t\t[\"请调整顺序<br>从左到右:第一、二、三张牌\", []],\r\n\t\t\t\t];\r\n\t\t\t\tconst { moved } = await player\r\n\t\t\t\t\t.chooseToMove(`【揭示】:请猜测${trigger.player == player ? \"你\" : get.translation(trigger.player)}本阶段前三张牌分别使用的类型`)\r\n\t\t\t\t\t.set(\"list\", list)\r\n\t\t\t\t\t.set(\"filterMove\", function (from, to, moved) {\r\n\t\t\t\t\t\treturn (to == 1 && moved[1].length < 3) || to == 0 || typeof to !== \"number\";\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"processAI\", () => {\r\n\t\t\t\t\t\tvar moved = [[114514], []],\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tcards = _status.currentPhase.getCards(\"h\"),\r\n\t\t\t\t\t\t\torder = [\r\n\t\t\t\t\t\t\t\t[0, 0],\r\n\t\t\t\t\t\t\t\t[0, 0],\r\n\t\t\t\t\t\t\t\t[0, 0],\r\n\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\t\t\tfor (var j = 0; j < order.length; j++) {\r\n\t\t\t\t\t\t\t\tif (get.order(i) > order[j][1]) {\r\n\t\t\t\t\t\t\t\t\torder[j] = [i, get.order(i)];\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var i of order) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tmoved[1].push([\"ByTheLeaderOne\", \"作者：林登万\", get.type2(i[0])]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn moved;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!moved) return;\r\n\t\t\t\tconst listx = moved[1].map(i => i[2]);\r\n\t\t\t\ttrigger.player.addTempSkill(\"jieshimrfz_eff\", { player: \"phaseUseEnd\" });\r\n\t\t\t\ttrigger.player.storage.jieshimrfz = listx;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\ttrigger.player.storage.jieshimrfz_eff = player;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\t_status.tmpTotal_jieshimrfz = 0;\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tonremove(player) {\r\n\t\t\t\t\t\tdelete player.storage.jieshimrfz;\r\n\t\t\t\t\t\tdelete player.storage.jieshimrfz_eff;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tdelete _status.tmpTotal_jieshimrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\t\t\tvar storage = player.storage.jieshimrfz;\r\n\t\t\t\t\t\t\tif (storage === \"error\") return `未知错误`;\r\n\t\t\t\t\t\t\tif (game.me === player && game.me.hasSkill(\"jieshimrfz\") && storage.length > 0) return get.translation(storage);\r\n\t\t\t\t\t\t\tif (storage.length == 0) return \"全部已猜测完毕\";\r\n\t\t\t\t\t\t\treturn `剩余${storage.length}张`;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tif (!player.storage.jieshimrfz_eff.isIn()) return false;\r\n\t\t\t\t\t\treturn player.storage.jieshimrfz && player.storage.jieshimrfz.length > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (!_status.tmpTotal_jieshimrfz) _status.tmpTotal_jieshimrfz = 0;\r\n\t\t\t\t\t\tvar target = player.storage.jieshimrfz_eff;\r\n\t\t\t\t\t\tif (get.type2(trigger.card) == player.storage.jieshimrfz[0]) {\r\n\t\t\t\t\t\t\t_status.tmpTotal_jieshimrfz++;\r\n\t\t\t\t\t\t\tif (_status.tmpTotal_jieshimrfz == 3 && target != player) player.chat(\"被看穿了吗？\");\r\n\t\t\t\t\t\t\telse if (_status.tmpTotal_jieshimrfz == 3) player.chat(\"我猜的真准！\");\r\n\t\t\t\t\t\t\ttarget.logSkill(\"jieshimrfz\", player);\r\n\t\t\t\t\t\t\ttarget.popup(\"猜测正确\");\r\n\t\t\t\t\t\t\ttarget.draw(_status.tmpTotal_jieshimrfz);\r\n\t\t\t\t\t\t\tif (_status.tmpTotal_jieshimrfz > 1) {\r\n\t\t\t\t\t\t\t\tvar num = Math.min(_status.tmpTotal_jieshimrfz - 1, 1);\r\n\t\t\t\t\t\t\t\tconst { bool } = await target\r\n\t\t\t\t\t\t\t\t\t.chooseBool(`【揭示】:是否对${get.translation(player)}造成${get.cnNumber(num)}点伤害？`)\r\n\t\t\t\t\t\t\t\t\t.set(\"ai\", () => get.damageEffect(target, player) > 0)\r\n\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\t\tif (bool) player.damage(num, target);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (target == player)\r\n\t\t\t\t\t\t\t\tplayer.chat(\r\n\t\t\t\t\t\t\t\t\t\"<img style='width:100px;height:100px' src=\" +\r\n\t\t\t\t\t\t\t\t\t\tlib.assetURL +\r\n\t\t\t\t\t\t\t\t\t\t\"extension/WhichWay/image/skill/jieshiError.png></img>\"\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\ttarget.popup(\"猜测错误\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tplayer.storage.jieshimrfz.shift();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//医疗阿米娅\r\n\t\ttongqingmrfz: {\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\tonremove: function (player, skill) {\r\n\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\treturn card.hasGaintag(\"tongqingmrfzx\");\r\n\t\t\t\t});\r\n\t\t\t\tif (cards.length) {\r\n\t\t\t\t\tplayer.lose(cards, ui.discardPile);\r\n\t\t\t\t\tplayer.$throw(cards, 1000);\r\n\t\t\t\t\tgame.log(cards, \"进入了弃牌堆\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmarktext: \"情绪\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"情绪\",\r\n\t\t\t\tmark(dialog, content, player) {\r\n\t\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\t\treturn card.hasGaintag(\"tongqingmrfzx\");\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (!cards || cards.length < 1) {\r\n\t\t\t\t\t\tdialog.addText(`没有‘情绪’`);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdialog.addText(`共有${cards.length}张‘情绪’`);\r\n\t\t\t\t\t\tdialog.addSmall(cards);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"phaseJieshuBegin\" },\r\n\t\t\tgetDiscard: function (event, player) {\r\n\t\t\t\tlet cards = [];\r\n\t\t\t\tfor (var character of game.players) {\r\n\t\t\t\t\tvar history = character.getHistory(\"lose\", function (evt) {\r\n\t\t\t\t\t\treturn evt && evt.type == \"discard\";\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (history.length == 0) continue;\r\n\t\t\t\t\tfor (var i = 0; i < history.length; i++) {\r\n\t\t\t\t\t\tvar cardsList = history[i].cards;\r\n\t\t\t\t\t\tfor (var j = 0; j < cardsList.length; j++) {\r\n\t\t\t\t\t\t\tif (get.position(cardsList[j], true) != \"d\") continue;\r\n\t\t\t\t\t\t\tcards.push(cardsList[j]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn cards;\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tlet cardsList = lib.skill.tongqingmrfz.getDiscard(event, player);\r\n\t\t\t\treturn cardsList && cardsList.length > 0;\r\n\t\t\t},\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\tlet cardsList = lib.skill.tongqingmrfz.getDiscard(event, player),\r\n\t\t\t\t\tcards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\t\treturn card.hasGaintag(\"tongqingmrfzx\");\r\n\t\t\t\t\t});\r\n\t\t\t\treturn `【恸请】:你可以将所有的‘情绪’（${cards.length > 0 ? `共有${cards.length}张‘情绪’` : \"没有‘情绪’\"}）置入弃牌堆，然后将${get.translation(cardsList)}置于你的武将牌上，称之为‘情绪’`;\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\tlet cardsList = lib.skill.tongqingmrfz.getDiscard(event, player),\r\n\t\t\t\t\tcards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\t\treturn card.hasGaintag(\"tongqingmrfzx\");\r\n\t\t\t\t\t});\r\n\t\t\t\tif (cards.length < 1) return true;\r\n\t\t\t\treturn get.value(cardsList) - get.value(cards) > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\treturn card.hasGaintag(\"tongqingmrfzx\");\r\n\t\t\t\t});\r\n\t\t\t\tif (cards && cards.length > 0) {\r\n\t\t\t\t\tawait player.loseToDiscardpile(cards);\r\n\t\t\t\t}\r\n\t\t\t\tlet cardsList = lib.skill.tongqingmrfz.getDiscard(trigger, player);\r\n\t\t\t\tgame.log(player, \"将\", cardsList.length, \"张牌置于在武将牌上\");\r\n\t\t\t\tplayer.loseToSpecial(cardsList, \"tongqingmrfzx\");\r\n\t\t\t\tplayer.markSkill(\"tongqingmrfz\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tcibeimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"loseAfter\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tvar position = event.cards.map(i => i.original);\r\n\t\t\t\treturn position.every(item => item != \"h\");\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { targets } = await player\r\n\t\t\t\t\t.chooseTarget()\r\n\t\t\t\t\t.set(\"prompt\", `【慈悲】:你可以令你攻击范围内的一名角色或你回复一点体力或摸一张牌`)\r\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\r\n\t\t\t\t\t\treturn player.inRange(target) || target == player;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", target => get.attitude(_status.event.player, target) > 0)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!targets) return;\r\n\t\t\t\tlet target = targets[0];\r\n\t\t\t\tif (target.getDamagedHp() < 1) {\r\n\t\t\t\t\ttarget.draw();\r\n\t\t\t\t\tplayer.logSkill(\"cibeimrfz\", target);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst { control } = await player\r\n\t\t\t\t\t.chooseControl(\"回复体力\", \"摸一张牌\")\r\n\t\t\t\t\t.set(\"prompt\", `【慈悲】:请选择一项`)\r\n\t\t\t\t\t.set(\"ai\", () => 0)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!control) return;\r\n\t\t\t\tif (control == \"回复体力\") {\r\n\t\t\t\t\ttarget.recover();\r\n\t\t\t\t} else target.draw();\r\n\t\t\t\tplayer.logSkill(\"cibeimrfz\", target);\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 异格芬 历战锐枪芬\r\n\t\txiaozhimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.target) < 0;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.card.name == \"sha\" && player.canCompare(event.target);\r\n\t\t\t},\r\n\t\t\tlogTarget: \"target\",\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar result = await player.chooseToCompare(trigger.target).forResult();\r\n\t\t\t\tif (!result || !result.cards) return;\r\n\t\t\t\tresult = result.cards;\r\n\t\t\t\tif (result.winner != player) player.draw(2);\r\n\t\t\t\tif (result.winner != trigger.target) {\r\n\t\t\t\t\tvar cards = [result.player, result.target];\r\n\t\t\t\t\tcards = cards.filter(card => player.hasUseTarget(card) && !get.owner(card));\r\n\t\t\t\t\tif (cards.length) {\r\n\t\t\t\t\t\tvar { links } = await player\r\n\t\t\t\t\t\t\t.chooseButton([\"是否使用其中的牌？\", cards])\r\n\t\t\t\t\t\t\t.set(\"ai\", button => _status.event.player.getUseValue(button.link))\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (links) {\r\n\t\t\t\t\t\t\tvar card = links[0];\r\n\t\t\t\t\t\t\tplayer.$gain2(card, false);\r\n\t\t\t\t\t\t\tgame.delayx();\r\n\t\t\t\t\t\t\tplayer.chooseUseTarget(true, card, false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\ttrigger.getParent().directHit.add(trigger.target);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhishoumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"chooseToUse\",\r\n\t\t\tfilterCard(card) {\r\n\t\t\t\treturn get.itemtype(card) == \"card\" && card.hasGaintag(\"zhishoumrfz\");\r\n\t\t\t},\r\n\t\t\tsubfrequent: [\"addcount\"],\r\n\t\t\tposition: \"h\",\r\n\t\t\tviewAs(cards, player) {\r\n\t\t\t\tif (cards.length) {\r\n\t\t\t\t\tif (_status.currentPhase == player) return { name: \"sha\" };\r\n\t\t\t\t\treturn { name: \"shan\" };\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t},\r\n\t\t\tviewAsFilter(player) {\r\n\t\t\t\tif (!player.countCards(\"h\", card => card.hasGaintag(\"zhishoumrfz\"))) return false;\r\n\t\t\t},\r\n\t\t\tprompt(event) {\r\n\t\t\t\treturn `【执守】:将本轮出牌阶段内获得的牌当作${_status.currentPhase === event.player ? \"【闪】\" : \"【杀】\"}使用`;\r\n\t\t\t},\r\n\t\t\tcheck(card) {\r\n\t\t\t\treturn 7 - get.value(card);\r\n\t\t\t},\r\n\t\t\tonremove(player) {\r\n\t\t\t\tplayer.removeGaintag(\"zhishoumrfz\");\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 2,\r\n\t\t\t\trespondShan: true,\r\n\t\t\t\trespondSha: true,\r\n\t\t\t\tskillTagFilter(player, tag, arg) {\r\n\t\t\t\t\tif (arg == \"respond\" || !player.countCards(\"h\", card => _status.connectMode || card.hasGaintag(\"zhishoumrfz\"))) return false;\r\n\t\t\t\t},\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhishoumrfz_mark\", \"zhishoumrfz_addcount\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\taddcount: {\r\n\t\t\t\t\taudio: \"zhishoumrfz\",\r\n\t\t\t\t\ttrigger: { player: \"gainAfter\" },\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\tfrequent: true,\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tvar evt = event.getParent(\"phaseDraw\");\r\n\t\t\t\t\t\tif (player.hasSkill(\"zhishoumrfz_eff\")) return false;\r\n\t\t\t\t\t\tif (evt && evt.player == player) return false;\r\n\t\t\t\t\t\treturn event.getg(player).length > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: \"【执守】:是否令本轮使用【杀】的次数+1？\",\r\n\t\t\t\t\tcheck() {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addTempSkill(\"zhishoumrfz_eff\", { global: \"roundStart\" });\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"使用【杀】的次数+1\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable(card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num + 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tmark: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"roundStart\",\r\n\t\t\t\t\t\tplayer: \"gainBegin\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tif (event.name == \"gain\") return player.isPhaseUsing();\r\n\t\t\t\t\t\telse return game.roundNumber > 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (trigger.name == \"gain\") trigger.gaintag.add(\"zhishoumrfz\");\r\n\t\t\t\t\t\telse player.removeGaintag(\"zhishoumrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 海霓\r\n\t\tjingchaomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 1;\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\tif (player.getDamagedHp() < 1) return false;\r\n\t\t\t\treturn 3 - player.getDamagedHp() + player.getCards(\"he\", card => get.value(card) < 7).length;\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tconst { result } = await player\r\n\t\t\t\t\t.chooseToDiscard(2, \"he\")\r\n\t\t\t\t\t.set(\"prompt2\", `你可以弃置两张牌并回复${trigger.num}点体力，若你弃置的牌类别不同，你将手牌补至5张`)\r\n\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\tvar player = get.event().player,\r\n\t\t\t\t\t\t\tselected = ui.selected.cards,\r\n\t\t\t\t\t\t\tnum = get.value(card);\r\n\t\t\t\t\t\tfor (var i of selected) {\r\n\t\t\t\t\t\t\tif (get.type2(i) == get.type2(card)) num - 3;\r\n\t\t\t\t\t\t\telse num + 2;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn 7 - num + player.getDamagedHp();\r\n\t\t\t\t\t});\r\n\t\t\t\tevent.result = result;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet cards = event.cards;\r\n\t\t\t\tplayer.recover(trigger.num);\r\n\t\t\t\tif (cards.length != 2) return;\r\n\t\t\t\tif (get.type2(cards[0]) != get.type2(cards[1])) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.drawTo(5);\r\n\t\t\t\t\tplayer.tempBanSkill(\"jingchaomrfz\", \"phaseEnd\", false);\r\n\t\t\t\t\tgame.log(this, \"的技能\", `#g【静潮】`, `本回合失效了`);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tmaixie_hp: true,\r\n\t\t\t\tthreaten: 0.8,\r\n\t\t\t},\r\n\t\t},\r\n\t\tcehuimrfz: {\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = 0;\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"本回合开始时手牌数为：#\",\r\n\t\t\t},\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseJieshuBegin\",\r\n\t\t\t},\r\n\t\t\tgetDiscardCards(event) {\r\n\t\t\t\tlet cards = [];\r\n\t\t\t\tfor (var i of game.players.slice().concat(game.dead)) {\r\n\t\t\t\t\tvar history = i.getHistory(\"lose\", function (evt) {\r\n\t\t\t\t\t\treturn evt && evt.type == \"discard\";\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (history.length == 0) continue;\r\n\t\t\t\t\tfor (var k of history) {\r\n\t\t\t\t\t\tif (k.cards.length == 0) continue;\r\n\t\t\t\t\t\tfor (var j of k.cards) {\r\n\t\t\t\t\t\t\tif (get.position(j) != \"d\") continue;\r\n\t\t\t\t\t\t\tcards.push(j);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn cards;\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tvar cards = lib.skill.cehuimrfz.getDiscardCards(event);\r\n\t\t\t\tif (!game.hasPlayer(current => current != player && player.canCompare(current, true, false))) return false;\r\n\t\t\t\treturn player.countCards(\"h\") != player.storage.cehuimrfz && cards.length > 0;\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tvar cards = lib.skill.cehuimrfz.getDiscardCards(trigger);\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseCardButton(cards)\r\n\t\t\t\t\t.set(\"prompt2\", `你可以选择一张牌并与一名其他角色进行拼点，若你赢，你使用牌堆顶3张牌`)\r\n\t\t\t\t\t.set(\"ai\", link => get.number(link))\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tresult.cost_data = result.links;\r\n\t\t\t\tevent.result = result;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet card = event.cost_data[0];\r\n\t\t\t\tvar { targets } = await player\r\n\t\t\t\t\t.chooseTarget(true)\r\n\t\t\t\t\t.set(\"prompt\", `【测绘】:请选择一名其他角色进行拼点`)\r\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => target != player && player.canCompare(target, true, false))\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\tvar player = get.event().player;\r\n\t\t\t\t\t\treturn get.attitude(player, target) < 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!targets) return;\r\n\t\t\t\tvar tmpfuc = async function () {\r\n\t\t\t\t\tlet next = player.chooseToCompare(targets[0]);\r\n\t\t\t\t\tif (!next.fixedResult) next.fixedResult = {};\r\n\t\t\t\t\tnext.fixedResult[player.playerid] = card;\r\n\t\t\t\t\treturn next;\r\n\t\t\t\t};\r\n\t\t\t\tvar next = await tmpfuc();\r\n\t\t\t\tif (next.result.bool) {\r\n\t\t\t\t\tvar cards = game.cardsGotoOrdering(get.cards(3)).cards;\r\n\t\t\t\t\tplayer.showCards(cards, `${get.translation(player)}展示了牌堆顶三张牌`);\r\n\t\t\t\t\tlet canUse = cards.filter(i => player.hasUseTarget(i, false));\r\n\t\t\t\t\tif (canUse.length == 0) return;\r\n\t\t\t\t\twhile (canUse.length > 0) {\r\n\t\t\t\t\t\tconst { links } =\r\n\t\t\t\t\t\t\tcanUse.length == 1\r\n\t\t\t\t\t\t\t\t? { links: canUse }\r\n\t\t\t\t\t\t\t\t: await player\r\n\t\t\t\t\t\t\t\t\t\t.chooseCardButton(canUse, true)\r\n\t\t\t\t\t\t\t\t\t\t.set(\"prompt\", `【测绘】:请选择你要使用的牌`)\r\n\t\t\t\t\t\t\t\t\t\t.set(\"ai\", link => get.number(link))\r\n\t\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (!links) continue;\r\n\t\t\t\t\t\tawait player\r\n\t\t\t\t\t\t\t.chooseUseTarget(links[0])\r\n\t\t\t\t\t\t\t.set(\"nodistance\", true)\r\n\t\t\t\t\t\t\t.set(\"prompt\", `请选择${get.translation(links[0])}的目标`);\r\n\t\t\t\t\t\tcanUse.remove(links[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"cehuimrfz_record\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\trecord: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"phaseBegin\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (typeof player.storage.cehuimrfz !== \"number\") player.storage.cehuimrfz = 0;\r\n\t\t\t\t\t\tplayer.storage.cehuimrfz = player.countCards(\"h\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 深巡\r\n\t\tyuchaomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => current != player && player.canCompare(current, true, false)) && player.countCards(\"hej\") > 0;\r\n\t\t\t},\r\n\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\treturn player.canCompare(target, true, false) && target != player;\r\n\t\t\t},\r\n\t\t\tselectTarget: [1, 2],\r\n\t\t\tmultitarget: true,\r\n\t\t\tmultiline: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet targets = event.targets;\r\n\t\t\t\tconst { links } = await player\r\n\t\t\t\t\t.choosePlayerCard(player, \"hej\", true)\r\n\t\t\t\t\t.set(\"prompt\", `【御潮】:请选择你的拼点牌`)\r\n\t\t\t\t\t.set(\"ai\", function (button) {\r\n\t\t\t\t\t\tvar card = button.link;\r\n\t\t\t\t\t\tvar player = get.event().player,\r\n\t\t\t\t\t\t\tnum = 0;\r\n\t\t\t\t\t\tif (get.position(card) == \"j\") num += 3 + get.value(card) / 2;\r\n\t\t\t\t\t\tif (get.position(card) == \"e\") num -= 2;\r\n\t\t\t\t\t\treturn get.number(card) + num - get.value(card) / 2;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!links) return;\r\n\t\t\t\tlet next = player.chooseToCompare(targets);\r\n\t\t\t\tif (!next.fixedResult) next.fixedResult = {};\r\n\t\t\t\tnext.fixedResult[player.playerid] = links[0];\r\n\t\t\t\tnext.callback = lib.skill.yuchaomrfz.callback;\r\n\t\t\t},\r\n\t\t\tasync callback(event, trigger, player) {\r\n\t\t\t\tif (event.num1 < event.num2) player.link(true);\r\n\t\t\t\telse if (event.num1 > event.num2) {\r\n\t\t\t\t\tevent.target.link(true);\r\n\t\t\t\t\tplayer.addTempSkill(\"yuchaomrfz_eff\", \"phaseEnd\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tevent.target.link(true);\r\n\t\t\t\t\tplayer.link(true);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsableTarget(card, player, target) {\r\n\t\t\t\t\t\t\tif (target.isLinked()) return true;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 8,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: -1,\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tyanhuimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tderivation: [\"binglinchengxia\"],\r\n\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\tforced: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tvar card = get.autoViewAs({ name: \"binglinchengxia\" }, [_status.pileTop]);\r\n\t\t\t\treturn player.canAddJudge(card);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tawait player.addJudge({ name: \"binglinchengxia\" }, [_status.pileTop]);\r\n\t\t\t\tplayer.draw(player.hp);\r\n\t\t\t\tplayer.loseHp();\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 明椒\r\n\t\tsuozemrfz: {\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\treturn `记录的牌名：${player.storage.suozemrfz.length > 0 ? get.translation(player.storage.suozemrfz) : \"无\"}`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"useCardEnd\", \"respondEnd\"],\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (event.cards.length < 1) return false;\r\n\t\t\t\treturn !player.storage.suozemrfz.includes(event.card.name) && (get.type2(event.card) == \"basic\" || get.type(event.card) == \"trick\");\r\n\t\t\t},\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\treturn `是否记录${get.translation(event.card)}，然后观看牌堆顶${player.maxHp}张牌，并用等量手牌交换其中至多${player.storage.suozemrfz.length + 1}张牌？`;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.storage.suozemrfz.add(trigger.card.name);\r\n\t\t\t\tgame.log(player, `的`, `#g【索赜】`, `记录了`, trigger.card.name);\r\n\t\t\t\tvar cards = get.cards(player.maxHp);\r\n\t\t\t\tlet cardsc = cards.slice(0);\r\n\t\t\t\tconst { moved } = await player\r\n\t\t\t\t\t.chooseToMove(`【索赜】:请选择你要交换的牌（至多交换${player.storage.suozemrfz.length}张牌）`)\r\n\t\t\t\t\t.set(\"filterMove\", (from, to) => {\r\n\t\t\t\t\t\treturn typeof to !== \"number\";\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"list\", [\r\n\t\t\t\t\t\t[\"牌堆顶\", cardsc],\r\n\t\t\t\t\t\t[\"你的手牌\", player.getCards(\"h\")],\r\n\t\t\t\t\t])\r\n\t\t\t\t\t.set(\"filterOk\", moved => {\r\n\t\t\t\t\t\tlet h = get.event().cardsh;\r\n\t\t\t\t\t\treturn h.filter(i => moved[0].includes(i)).length <= get.event().num;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"processAI\", list => {\r\n\t\t\t\t\t\tvar player = get.event().player;\r\n\t\t\t\t\t\tlet cards1 = list[0][1].slice(),\r\n\t\t\t\t\t\t\tcards2 = player.getCards(\"h\");\r\n\r\n\t\t\t\t\t\tif (cards2.length === 0) {\r\n\t\t\t\t\t\t\treturn [cards1, []];\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tlet maxC = Math.max(...cards1.map(i => get.value(i)));\r\n\t\t\t\t\t\tlet minH = Math.min(...cards2.map(i => get.value(i)));\r\n\r\n\t\t\t\t\t\tlet count = 0,\r\n\t\t\t\t\t\t\tnum = get.event().num;\r\n\r\n\t\t\t\t\t\twhile (minH < maxC && count < num) {\r\n\t\t\t\t\t\t\tcount++;\r\n\r\n\t\t\t\t\t\t\tlet maxCIndex = cards1.map(i => get.value(i)).indexOf(maxC);\r\n\r\n\t\t\t\t\t\t\tlet minHIndex = cards2.map(i => get.value(i)).indexOf(minH);\r\n\r\n\t\t\t\t\t\t\t[cards1[maxCIndex], cards2[minHIndex]] = [cards2[minHIndex], cards1[maxCIndex]];\r\n\r\n\t\t\t\t\t\t\tmaxC = Math.max(...cards1.map(i => get.value(i)));\r\n\t\t\t\t\t\t\tminH = Math.min(...cards2.map(i => get.value(i)));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn [cards1, cards2];\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"num\", player.storage.suozemrfz.length)\r\n\t\t\t\t\t.set(\"cardsh\", player.getCards(\"h\"))\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tconst puts = player.getCards(\"h\", i => moved[0].includes(i));\r\n\t\t\t\tconst gains = cardsc.filter(i => moved[1].includes(i));\r\n\t\t\t\tif (puts.length && gains.length) {\r\n\t\t\t\t\tplayer.$throw(puts.length, 1000);\r\n\t\t\t\t\tawait player.lose(puts, ui.special);\r\n\t\t\t\t\tawait player.gain(gains, \"giveAuto\");\r\n\t\t\t\t}\r\n\t\t\t\tcardsc = moved[0].slice();\r\n\t\t\t\tif (cardsc.length) {\r\n\t\t\t\t\tawait game.cardsGotoOrdering(cardsc);\r\n\t\t\t\t\tfor (let i = cardsc.length - 1; i >= 0; i--) {\r\n\t\t\t\t\t\tui.cardPile.insertBefore(cardsc[i], ui.cardPile.firstChild);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgame.log(get.cnNumber(cardsc.length, true), \"张牌被放回了牌堆顶\");\r\n\t\t\t\t\tgame.updateRoundNumber();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tyouyimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"phaseJieshuBegin\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.storage.suozemrfz.length > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar list = [];\r\n\t\t\t\tfor (var i = 0; i < lib.inpile.length; i++) {\r\n\t\t\t\t\tvar name = lib.inpile[i];\r\n\t\t\t\t\tif (!player.storage.suozemrfz.includes(name)) continue;\r\n\t\t\t\t\tif (get.type(name) == \"basic\") list.push([\"基本\", \"\", name]);\r\n\t\t\t\t\telse if (get.type(name) == \"trick\") list.push([\"锦囊\", \"\", name]);\r\n\t\t\t\t}\r\n\t\t\t\tlet { links } = await player\r\n\t\t\t\t\t.chooseButton([`游移:请移除${Math.ceil(list.length / 2)}张牌`, [list, \"vcard\"]], true)\r\n\t\t\t\t\t.set(\"selectButton\", Math.ceil(list.length / 2))\r\n\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\treturn _status.event.player.getUseValue(button.link, null, true);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!links) return;\r\n\t\t\t\tplayer.storage.suozemrfz.removeArray(links.map(i => i[2]));\r\n\t\t\t\tlet names = links.filter(i => player.hasUseTarget(i[2])).map(i => [get.translation(get.type(i[2])), \"\", i[2]]);\r\n\t\t\t\tif (names.length < 1) return;\r\n\r\n\t\t\t\tlet { links2 } =\r\n\t\t\t\t\tnames.length == 1\r\n\t\t\t\t\t\t? { links2: names }\r\n\t\t\t\t\t\t: await player\r\n\t\t\t\t\t\t\t\t.chooseButton([\"游移:请选择一张你要使用的牌\", [names, \"vcard\"]], true)\r\n\t\t\t\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\t\t\t\treturn _status.event.player.getUseValue({ name: button.link[2] }, undefined, true);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\tplayer.chooseUseTarget({ name: links2[0][2] }, true);\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 戴菲恩\r\n\t\tzhuofengmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tusable: 1,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet list = [];\r\n\t\t\t\tif (player.getCards(\"h\", { color: \"red\" }).length) list.push(\"red\");\r\n\t\t\t\tif (player.getCards(\"h\", { color: \"black\" }).length) list.push(\"black\");\r\n\t\t\t\tlist.push(\"cancel2\");\r\n\t\t\t\tconst { control } = await player\r\n\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t.set(\"prompt\", `是否发动【濯锋】？`)\r\n\t\t\t\t\t.set(\"prompt2\", `你可以重铸手牌中一种颜色的所有牌，若你重铸了不少于2张牌，你摸一张牌，然后你视为本回合没有使用过【杀】。`)\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\tlet player = get.player(),\r\n\t\t\t\t\t\t\tlist = get.event().list;\r\n\t\t\t\t\t\tlet value = get.value(player.getCards(\"h\", { color: \"red\" })) - get.value(player.getCards(\"h\", { color: \"black\" }));\r\n\t\t\t\t\t\tif (list.length > 2) {\r\n\t\t\t\t\t\t\tif (value > 0) return \"red\";\r\n\t\t\t\t\t\t\treturn \"black\";\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (get.value(player.getCards(\"h\")) < 20) return list[0];\r\n\t\t\t\t\t\t\treturn \"cancel2\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"list\", list)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (control === \"cancel2\") {\r\n\t\t\t\t\tdelete player.getStat(\"skill\")[\"zhuofengmrfz\"];\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet cards = player.getCards(\"h\").filter(i => get.color(i) == control && player.canRecast(i));\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\tplayer.recast(cards);\r\n\t\t\t\tif (cards.length >= 2) player.draw();\r\n\t\t\t\tif (player.getStat(\"card\")[\"sha\"]) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tdelete player.getStat(\"card\")[\"sha\"];\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 3,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tqianggongmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\ttargetInRange(card, player, target, now) {\r\n\t\t\t\t\tlet mark = player.getStat(\"card\")[\"sha\"];\r\n\t\t\t\t\tif (card.name == \"sha\" && (!mark || mark == 0)) return true;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCard\",\r\n\t\t\t\tsource: \"damageEnd\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tlet mark = player.getStat(\"card\")[\"sha\"],\r\n\t\t\t\t\tstorage = player.storage.qianggongmrfz;\r\n\t\t\t\tif (event.parent.name == \"_lianhuan\" || event.parent.name == \"_lianhuan2\") return false;\r\n\t\t\t\tif (mark && mark > 1) return false;\r\n\t\t\t\treturn event.card && event.card.name == \"sha\" && (!storage || event.card == storage);\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (!player.storage.qianggongmrfz) {\r\n\t\t\t\t\tplayer.storage.qianggongmrfz = trigger.card;\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.when({\r\n\t\t\t\t\t\t\tglobal: \"phaseBegin\",\r\n\t\t\t\t\t\t\tplayer: \"useCardAfter\",\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.filter((event, player) => {\r\n\t\t\t\t\t\t\tlet storage = player.storage.qianggongmrfz;\r\n\t\t\t\t\t\t\tif (event.name == \"phase\") return true;\r\n\t\t\t\t\t\t\treturn event.card && storage && event.card == storage;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(async (event, trigger, player) => {\r\n\t\t\t\t\t\t\tdelete player.storage.qianggongmrfz;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (trigger.name == \"useCard\") {\r\n\t\t\t\t\tif (typeof trigger.baseDamage != \"number\") trigger.baseDamage = 1;\r\n\t\t\t\t\ttrigger.baseDamage++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdelete player.storage.qianggongmrfz;\r\n\t\t\t\t\tlet skills = player.getStockSkills(true, true);\r\n\t\t\t\t\tconst { control } = await player\r\n\t\t\t\t\t\t.chooseControl(skills)\r\n\t\t\t\t\t\t.set(\"prompt\", \"【抢攻】:请选择你要重置的技能\")\r\n\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\tlet list = get.event().list,\r\n\t\t\t\t\t\t\t\tsuffixs = [\"used\", \"round\", \"block\", \"blocker\"],\r\n\t\t\t\t\t\t\t\tskills = [];\r\n\t\t\t\t\t\t\tif (list.includes(\"zhuofengmrfz\")) return \"zhuofengmrfz\";\r\n\t\t\t\t\t\t\tfor (let skill of list) {\r\n\t\t\t\t\t\t\t\tlet info = get.info(skill);\r\n\t\t\t\t\t\t\t\tfor (let key of suffixs) {\r\n\t\t\t\t\t\t\t\t\tif (info[key]) skills.push(skill);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (skills.length == 0) skills.push(list[0]);\r\n\t\t\t\t\t\t\treturn skills.randomGet();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"list\", skills)\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (!control) return;\r\n\t\t\t\t\tlet skillx = [control];\r\n\t\t\t\t\tgame.expandSkills(skillx);\r\n\t\t\t\t\tvar resetSkills = [];\r\n\t\t\t\t\tvar suffixs = [\"used\", \"round\", \"block\", \"blocker\"];\r\n\t\t\t\t\tfor (var skill of skillx) {\r\n\t\t\t\t\t\tvar info = get.info(skill);\r\n\t\t\t\t\t\tif (typeof info.usable == \"number\") {\r\n\t\t\t\t\t\t\tif (player.hasSkill(\"counttrigger\") && player.storage.counttrigger[skill] && player.storage.counttrigger[skill] >= 1) {\r\n\t\t\t\t\t\t\t\tdelete player.storage.counttrigger[skill];\r\n\t\t\t\t\t\t\t\tresetSkills.add(skill);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (typeof get.skillCount(skill) == \"number\" && get.skillCount(skill) >= 1) {\r\n\t\t\t\t\t\t\t\tdelete player.getStat(\"skill\")[skill];\r\n\t\t\t\t\t\t\t\tresetSkills.add(skill);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (info.round && player.storage[skill + \"_roundcount\"]) {\r\n\t\t\t\t\t\t\tdelete player.storage[skill + \"_roundcount\"];\r\n\t\t\t\t\t\t\tresetSkills.add(skill);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (player.storage[`temp_ban_${skill}`]) {\r\n\t\t\t\t\t\t\tdelete player.storage[`temp_ban_${skill}`];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (player.awakenedSkills.includes(skill)) {\r\n\t\t\t\t\t\t\tplayer.restoreSkill(skill);\r\n\t\t\t\t\t\t\tresetSkills.add(skill);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var suffix of suffixs) {\r\n\t\t\t\t\t\t\tif (player.hasSkill(skill + \"_\" + suffix)) {\r\n\t\t\t\t\t\t\t\tplayer.removeSkill(skill + \"_\" + suffix);\r\n\t\t\t\t\t\t\t\tresetSkills.add(skill);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (resetSkills.length) {\r\n\t\t\t\t\t\tvar str = \"\";\r\n\t\t\t\t\t\tfor (var i of resetSkills) {\r\n\t\t\t\t\t\t\tstr += \"【\" + get.translation(i) + \"】、\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgame.log(player, \"重置了技能\", \"#g\" + str.slice(0, -1));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 锡人\r\n\t\tsuximrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tlet cards = event.card.cards.filter(i => player.hasUseTarget(i, false, false) && get.position(i) == \"d\");\r\n\t\t\t\treturn !event.card.isCard && event.card.cards.length > 0 && cards.length > 0;\r\n\t\t\t},\r\n\t\t\tfrequent: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet cards = trigger.card.cards.filter(i => player.hasUseTarget(i, false, false) && get.position(i) == \"d\");\r\n\t\t\t\twhile (cards.length > 0) {\r\n\t\t\t\t\tconst { links } =\r\n\t\t\t\t\t\tcards.length == 1\r\n\t\t\t\t\t\t\t? { links: cards }\r\n\t\t\t\t\t\t\t: await player\r\n\t\t\t\t\t\t\t\t\t.chooseCardButton(\"【宿锡】:请选择你要使用的牌\", cards)\r\n\t\t\t\t\t\t\t\t\t.set(\"ai\", button => get.player().getUseValue(button, undefined, true))\r\n\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (!links) return;\r\n\t\t\t\t\tawait player.chooseUseTarget(links[0]).set(\"nodistance\", true).set(\"addCount\", false);\r\n\t\t\t\t\tcards.remove(links[0]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tsanzhongmrfz: {\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = {\r\n\t\t\t\t\tbasic: false,\r\n\t\t\t\t\ttrick: false,\r\n\t\t\t\t\tequip: false,\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tmaps: {\r\n\t\t\t\tbasic: \"tao\",\r\n\t\t\t\ttrick: \"shunshou\",\r\n\t\t\t\tequip: \"wuzhong\",\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"chooseToUse\",\r\n\t\t\thiddenCard: function (player, name) {\r\n\t\t\t\tconst maps = lib.skill.sanzhongmrfz.maps;\r\n\t\t\t\tif (!Object.values(maps).includes(name)) return false;\r\n\t\t\t\tfor (let key in maps) {\r\n\t\t\t\t\tif (name == maps[key] && player.countCards(\"hes\", { type: key }) > 0) return true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tconst types = Object.entries(player.storage.sanzhongmrfz)\r\n\t\t\t\t\t.filter(([key, value]) => value === false)\r\n\t\t\t\t\t.map(([key, value]) => key);\r\n\t\t\t\tconst maps = lib.skill.sanzhongmrfz.maps;\r\n\t\t\t\tif (types.length < 1) return false;\r\n\t\t\t\tfor (let type of types) {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tplayer.countCards(\"hes\", { type: type }) < 1 ||\r\n\t\t\t\t\t\t!event.filterCard(get.autoViewAs({ name: maps[type] }, \"unsure\"), player, event)\r\n\t\t\t\t\t)\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tchooseButton: {\r\n\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\tconst maps = lib.skill.sanzhongmrfz.maps;\r\n\t\t\t\t\tconst swapped = {};\r\n\t\t\t\t\tObject.keys(maps).forEach(key => {\r\n\t\t\t\t\t\tswapped[maps[key]] = key;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlet list = [];\r\n\t\t\t\t\tfor (let name of Object.values(maps)) {\r\n\t\t\t\t\t\tif (event.filterCard && event.filterCard({ name: name }, player, event)) {\r\n\t\t\t\t\t\t\tif (player.storage.sanzhongmrfz[swapped[name]] != false) continue;\r\n\t\t\t\t\t\t\tif (player.countCards(\"hes\", { type: swapped[name] }) < 1) continue;\r\n\t\t\t\t\t\t\tif (get.type2(name) == \"trick\") {\r\n\t\t\t\t\t\t\t\tlist.push([\"锦囊\", \"\", name]);\r\n\t\t\t\t\t\t\t} else if (get.type(name) == \"basic\") {\r\n\t\t\t\t\t\t\t\tlist.push([\"基本\", \"\", name]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn ui.create.dialog(\"三众\", [list, \"vcard\"]);\r\n\t\t\t\t},\r\n\t\t\t\tcheck: function (button) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (_status.event.getParent().type != \"phase\") return 1;\r\n\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\treturn player.getUseValue({\r\n\t\t\t\t\t\tname: button.link[2],\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tfilterCard(card) {\r\n\t\t\t\t\t\t\tconst player = get.player();\r\n\t\t\t\t\t\t\tconst maps = lib.skill.sanzhongmrfz.maps;\r\n\t\t\t\t\t\t\tconst swapped = {};\r\n\t\t\t\t\t\t\tObject.keys(maps).forEach(key => {\r\n\t\t\t\t\t\t\t\tswapped[maps[key]] = key;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tconst name = lib.skill.sanzhongmrfz_backup.card;\r\n\t\t\t\t\t\t\treturn get.type2(card) == swapped[name];\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\taudio: \"sanzhongmrfz\",\r\n\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t\tcheck: function (card) {\r\n\t\t\t\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tposition: \"hse\",\r\n\t\t\t\t\t\tviewAs: { name: links[0][2] },\r\n\t\t\t\t\t\tcard: links[0][2],\r\n\t\t\t\t\t\tprecontent: function () {\r\n\t\t\t\t\t\t\tconst maps = lib.skill.sanzhongmrfz.maps;\r\n\t\t\t\t\t\t\tconst swapped = {};\r\n\t\t\t\t\t\t\tObject.keys(maps).forEach(key => {\r\n\t\t\t\t\t\t\t\tswapped[maps[key]] = key;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tconst name = lib.skill.sanzhongmrfz_backup.card;\r\n\r\n\t\t\t\t\t\t\tlet type = swapped[name];\r\n\t\t\t\t\t\t\tplayer.storage.sanzhongmrfz[type] = true;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\tconst swapped = {};\r\n\t\t\t\t\tconst maps = lib.skill.sanzhongmrfz.maps;\r\n\t\t\t\t\tconst name = links[0][2];\r\n\t\t\t\t\tObject.keys(maps).forEach(key => {\r\n\t\t\t\t\t\tswapped[maps[key]] = key;\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn `将一张${get.translation(swapped[name])}牌当做${get.translation(name)}使用`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: \"sanzhongmrfz_clear\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseBegin\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tlib.skill.sanzhongmrfz.init(player, \"sanzhongmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: function (player) {\r\n\t\t\t\t\t\tif (_status.event.dying) return get.attitude(player, _status.event.dying);\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 莎草\r\n\t\tlanjuanmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\tlet storage = player.storage.lanjuanmrfz;\r\n\r\n\t\t\t\t\tlet nameList = storage[\"name\"].length > 0 ? storage[\"name\"] : \"无\";\r\n\t\t\t\t\tlet numberList = storage[\"number\"].length > 0 ? storage[\"number\"] : \"无\";\r\n\t\t\t\t\tlet suitTranslation = storage[\"suit\"].length > 0 ? get.translation(storage[\"suit\"]) : \"无\";\r\n\r\n\t\t\t\t\tif (Array.isArray(nameList)) {\r\n\t\t\t\t\t\tnameList.sort((a, b) => a.length - b.length);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (Array.isArray(numberList)) {\r\n\t\t\t\t\t\tnumberList.sort((a, b) => a - b);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn `\r\n    \t\t\t\t\t    ·牌名: ${get.translation(nameList)}<br>\r\n    \t\t\t\t\t    ·点数: ${get.translation(numberList)}<br>\r\n    \t\t\t\t\t    ·花色: ${suitTranslation}\r\n    \t\t\t\t\t`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = {\r\n\t\t\t\t\tname: [],\r\n\t\t\t\t\tsuit: [],\r\n\t\t\t\t\tnumber: [],\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"useCardAfter\", \"respondAfter\", \"phaseDrawBegin2\"],\r\n\t\t\t},\r\n\t\t\tfilterType(card, player, modify) {\r\n\t\t\t\tlet storage = player.storage.lanjuanmrfz;\r\n\t\t\t\tlet result = {\r\n\t\t\t\t\tname: [],\r\n\t\t\t\t\tsuit: [],\r\n\t\t\t\t\tnumber: [],\r\n\t\t\t\t};\r\n\r\n\t\t\t\tconst maps = {\r\n\t\t\t\t\tname: lib.inpile,\r\n\t\t\t\t\tsuit: lib.suit,\r\n\t\t\t\t\tnumber: Array.from({ length: 13 }, (v, i) => i + 1),\r\n\t\t\t\t};\r\n\r\n\t\t\t\tfunction checkAndAdd(type) {\r\n\t\t\t\t\tconst value = get[type](card);\r\n\t\t\t\t\tif (!storage[type].includes(value)) {\r\n\t\t\t\t\t\tresult[type].push(value);\r\n\t\t\t\t\t\tresult[type] = result[type].filter(item => new Set(maps[type]).has(item));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcheckAndAdd(\"name\");\r\n\t\t\t\tcheckAndAdd(\"suit\");\r\n\t\t\t\tcheckAndAdd(\"number\");\r\n\r\n\t\t\t\tif (modify) {\r\n\t\t\t\t\tplayer.storage.lanjuanmrfz = {\r\n\t\t\t\t\t\tname: [...result.name, ...storage.name],\r\n\t\t\t\t\t\tsuit: [...result.suit, ...storage.suit],\r\n\t\t\t\t\t\tnumber: [...result.number, ...storage.number],\r\n\t\t\t\t\t};\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst intersection = (arr1, arr2) => arr1.filter(item => new Set(arr2).has(item));\r\n\r\n\t\t\t\treturn result.name.length > 0 || result.suit.length > 0 || result.number.length > 0;\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (event.name == \"phaseDraw\") {\r\n\t\t\t\t\tlet count = Object.values(player.storage.lanjuanmrfz).reduce((sum, arr) => sum + arr.length, 0);\r\n\t\t\t\t\treturn !event.numFixed && Math.pow(count, 1 / 3) >= 1;\r\n\t\t\t\t} else return event.card && lib.skill.lanjuanmrfz.filterType(event.card, player, false);\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t// 毒哑莎草的嗓子(\r\n\t\t\t\tif (_status.poison_suocaoSJZX != true) {\r\n\t\t\t\t\tplayer.logSkill(\"lanjuanmrfz\");\r\n\t\t\t\t\t_status.poison_suocaoSJZX = true;\r\n\t\t\t\t\tsetTimeout(() => delete _status.poison_suocaoSJZX, 3000);\r\n\t\t\t\t}\r\n\t\t\t\tif (trigger.name == \"phaseDraw\") {\r\n\t\t\t\t\tlet count = Object.values(player.storage.lanjuanmrfz).reduce((sum, arr) => sum + arr.length, 0);\r\n\t\t\t\t\ttrigger.num += Math.floor(Math.pow(count, 1 / 3));\r\n\t\t\t\t} else lib.skill.lanjuanmrfz.filterType(trigger.card, player, true);\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\tlet count = Object.values(player.storage.lanjuanmrfz).reduce((sum, arr) => sum + arr.length, 0);\r\n\t\t\t\t\treturn num + Math.floor(Math.pow(count, 1 / 3));\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txinglumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfindCards(info) {\r\n\t\t\t\tconst { name, suit, number } = info;\r\n\t\t\t\tconst filter = function (card) {\r\n\t\t\t\t\treturn get.number(card) == number && get.suit(card) == suit && get.name(card) == name;\r\n\t\t\t\t};\r\n\t\t\t\tlet list = [];\r\n\t\t\t\tfor (let i = 0; i < ui.cardPile.childNodes.length; i++) {\r\n\t\t\t\t\tvar j = i;\r\n\t\t\t\t\tif (j >= ui.cardPile.childNodes.length) j -= ui.cardPile.childNodes.length;\r\n\t\t\t\t\tif (filter(ui.cardPile.childNodes[j])) {\r\n\t\t\t\t\t\tlist.push(ui.cardPile.childNodes[j]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn list;\r\n\t\t\t},\r\n\t\t\tgetResult(info) {\r\n\t\t\t\tconst { name, suit, number } = info;\r\n\t\t\t\tlet cardsList = [];\r\n\t\t\t\tfor (let keyName of name) {\r\n\t\t\t\t\tfor (let keySuit of suit) {\r\n\t\t\t\t\t\tfor (let keyNum of number) {\r\n\t\t\t\t\t\t\tlet find = lib.skill.xinglumrfz.findCards({ name: keyName, suit: keySuit, number: keyNum });\r\n\t\t\t\t\t\t\tif (find.length > 0) cardsList.push(find);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn cardsList;\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tlet storage = player.storage.lanjuanmrfz;\r\n\t\t\t\treturn storage[\"name\"].length > 0 && storage[\"suit\"].length > 0 && storage[\"number\"].length > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst storage = player.storage.lanjuanmrfz;\r\n\r\n\t\t\t\tconst { control } = await player\r\n\t\t\t\t\t.chooseControl(\"自动选择\", \"手动选择\")\r\n\t\t\t\t\t.set(\"prompt\", \"【行路】:是否让系统自动为你提供方案？\")\r\n\t\t\t\t\t.set(\"ai\", () => \"自动选择\")\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (control === \"自动选择\") {\r\n\t\t\t\t\tlet cards = lib.skill.xinglumrfz.getResult(storage);\r\n\t\t\t\t\tconst maxIndex = cards.map(i => player.getUseValue(i)).indexOf(Math.max(...cards.map(i => player.getUseValue(i))));\r\n\t\t\t\t\tif (cards.length < 1) {\r\n\t\t\t\t\t\tplayer.popup(\"没有符合条件的组合\");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet control = [];\r\n\t\t\t\t\tfor (let i = 0; i < cards.length; i++) {\r\n\t\t\t\t\t\tcontrol.push([i, `第${get.cnNumber(i + 1, true)}组`]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet dialogAuto = [\r\n\t\t\t\t\t\t`【行路】:请选择一个组合<br>推荐选择第${get.cnNumber(maxIndex + 1, true)}组(${get.translation(cards[maxIndex])})`,\r\n\t\t\t\t\t\t[control, \"tdnodes\"],\r\n\t\t\t\t\t];\r\n\r\n\t\t\t\t\tfor (let i = 0; i < cards.length; i++) {\r\n\t\t\t\t\t\tdialogAuto.addArray([`第${get.cnNumber(i + 1, true)}组`, cards[i]]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst result = !event.isMine()\r\n\t\t\t\t\t\t? { links: [maxIndex] }\r\n\t\t\t\t\t\t: await player.chooseButton().set(\"createDialog\", dialogAuto).set(\"cards\", cards).forResult();\r\n\t\t\t\t\tif (!result || !result.links) return;\r\n\t\t\t\t\tplayer.gain(cards[result.links[0]], \"gain2\", \"log\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet dialog = [\"【行路】:请选择牌名、花色和数字各一个\"];\r\n\t\t\t\tdialog.addArray([\"待选择的牌名\", [storage.name.slice().map(i => [get.type2(i), \"\", i]), \"vcard\"]]);\r\n\t\t\t\tdialog.addArray([\"待选择的花色\", [storage.suit.slice().map(i => [i, get.translation(i)]), \"tdnodes\"]]);\r\n\t\t\t\tdialog.addArray([\r\n\t\t\t\t\t\"待选择的数字\",\r\n\t\t\t\t\t[\r\n\t\t\t\t\t\tstorage.number\r\n\t\t\t\t\t\t\t.slice()\r\n\t\t\t\t\t\t\t.sort((a, b) => a - b)\r\n\t\t\t\t\t\t\t.map(i => [i, i]),\r\n\t\t\t\t\t\t\"tdnodes\",\r\n\t\t\t\t\t],\r\n\t\t\t\t]);\r\n\r\n\t\t\t\tconst { links } = await player\r\n\t\t\t\t\t.chooseButton()\r\n\t\t\t\t\t.set(\"createDialog\", dialog)\r\n\t\t\t\t\t.set(\"filterButton\", button => {\r\n\t\t\t\t\t\tlet list = ui.selected.buttons;\r\n\t\t\t\t\t\tif (Array.isArray(button.link) && list.some(item => Array.isArray(item.link))) return false;\r\n\t\t\t\t\t\telse if (typeof button.link === \"number\" && list.some(item => typeof item.link === \"number\")) return false;\r\n\t\t\t\t\t\telse if (typeof button.link === \"string\" && list.some(item => typeof item.link === \"string\")) return false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"selectButton\", 3)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!links) return;\r\n\t\t\t\tconst info = {\r\n\t\t\t\t\tname: links.filter(i => Array.isArray(i)).map(i => i[2]),\r\n\t\t\t\t\tsuit: links.filter(i => typeof i === \"string\"),\r\n\t\t\t\t\tnumber: links.filter(i => typeof i === \"number\"),\r\n\t\t\t\t};\r\n\t\t\t\tlet cards = lib.skill.xinglumrfz.findCards(info);\r\n\t\t\t\tif (cards.length > 0) player.gain(cards, \"gain2\", \"log\");\r\n\t\t\t\telse {\r\n\t\t\t\t\tplayer.popup(\"没有符合条件的组合\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 莱欧斯\r\n\t\tshijianmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tderivation: [\"jianzhumrfz\"],\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0 && !player.isDisabled(1) && !player.hasCard(card => card.name == \"jianzhumrfz\", \"e\");\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tevent.result = await player\r\n\t\t\t\t\t.chooseToDiscard(`【拾剑】:你可以弃置一张牌，将【剑助】置入你的武器栏`, \"he\")\r\n\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst card = game.createCard(\"jianzhumrfz\", \"spade\", 12);\r\n\t\t\t\tplayer.$gain2(card);\r\n\t\t\t\tplayer.equip(card);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 0.8,\r\n\t\t\t},\r\n\t\t},\r\n\t\tshimomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = {};\r\n\t\t\t\tconst translates = {\r\n\t\t\t\t\t2: '富甲<font color=\"red\">目标+</font>',\r\n\t\t\t\t\t3: '空巢<font color=\"red\">摸牌</font>',\r\n\t\t\t\t\t4: '残躯<font color=\"red\">伤害+</font>',\r\n\t\t\t\t};\r\n\t\t\t\tfor (let i = 2; i <= 4; i++) {\r\n\t\t\t\t\tlib.translate[skill + \"_\" + i] = translates[i];\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tmark: true,\r\n\t\t\tproficiency: new Proxy(\r\n\t\t\t\t{\r\n\t\t\t\t\tbaka: '<font color = \"#FFFFFF\">一无所知</font>',\r\n\t\t\t\t\tmaster: '<font color = \"#FF0000\">融会贯通</font>',\r\n\t\t\t\t\t1: '<font color=\"#FFCCCC\">已有耳闻</font>',\r\n\t\t\t\t\t2: '<font color=\"#FF9999\">略知一二</font>',\r\n\t\t\t\t\t3: '<font color=\"#FF6666\">初步掌握</font>',\r\n\t\t\t\t\t4: '<font color=\"#FF3333\">烂熟于心</font>',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tget(target, prop) {\r\n\t\t\t\t\t\tif (typeof prop !== \"symbol\") {\r\n\t\t\t\t\t\t\tconst value = Number(prop);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn target[\"baka\"];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!isNaN(value)) {\r\n\t\t\t\t\t\t\tif (value < 1) return target[\"baka\"];\r\n\t\t\t\t\t\t\tif (value > 4) return target[\"master\"];\r\n\t\t\t\t\t\t\treturn target[value];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn target[\"baka\"];\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t),\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"莱欧斯的魔物宝典\",\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tconst storage = player.storage.shimomrfz;\r\n\t\t\t\t\tlet intro = [];\r\n\t\t\t\t\tif (storage === undefined) return \"没有记录的魔物\";\r\n\t\t\t\t\tconst sorted = Object.entries(storage)\r\n\t\t\t\t\t\t.sort((a, b) => b[1] - a[1])\r\n\t\t\t\t\t\t.map(([key, value]) => ({ key, value }));\r\n\t\t\t\t\tfor (let obj of sorted) {\r\n\t\t\t\t\t\tintro.push(`【${get.translation(obj[\"key\"])}】是${lib.skill.shimomrfz.proficiency[obj[\"value\"]]}（${obj[\"value\"]}）`);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn `莱欧斯对‘魔物’:<br>` + intro.join(\"<br>\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttrigger: { player: \"gainAfter\" },\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t// 毒哑莱欧斯的嗓子\r\n\t\t\t\tif (_status.poison_laiousiSJZX != true) {\r\n\t\t\t\t\tplayer.logSkill(\"shimomrfz\");\r\n\t\t\t\t\t_status.poison_laiousiSJZX = true;\r\n\t\t\t\t\tsetTimeout(() => delete _status.poison_laiousiSJZX, 3000);\r\n\t\t\t\t}\r\n\t\t\t\tconst cards = trigger.cards,\r\n\t\t\t\t\tstorage = player.storage.shimomrfz;\r\n\t\t\t\tfor (let card of cards) {\r\n\t\t\t\t\tlet name = get.name(card);\r\n\t\t\t\t\tstorage.hasOwnProperty(name) ? player.storage.shimomrfz[name]++ : (player.storage.shimomrfz[name] = 1);\r\n\t\t\t\t\tif (storage.hasOwnProperty(name)) {\r\n\t\t\t\t\t\tlet num = storage[name];\r\n\t\t\t\t\t\tif (num < 2) continue;\r\n\t\t\t\t\t\tif (num > 4) num = 4;\r\n\t\t\t\t\t\tfor (let i = 2; i <= num; i++) player.addGaintag(card, `shimomrfz_${i}`);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"shimomrfz_yingbian\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tyingbian: {\r\n\t\t\t\t\taudio: \"shimomrfz\",\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"yingbian\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.card.isCard &&\r\n\t\t\t\t\t\t\tplayer.hasHistory(\"lose\", evt => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\tevt.getParent() == event && Object.values(evt.gaintag_map).some(value => value.join(\" \").includes(\"shimomrfz_\"))\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet tags;\r\n\t\t\t\t\t\tplayer.getHistory(\"lose\", evt => {\r\n\t\t\t\t\t\t\tif (evt.getParent() != trigger) return;\r\n\t\t\t\t\t\t\tconst maps = evt.gaintag_map;\r\n\t\t\t\t\t\t\tfor (let key in maps) {\r\n\t\t\t\t\t\t\t\tif (maps[key].join(\" \").includes(\"shimomrfz_\")) tags = maps[key];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tconst index = Math.max(...tags.filter(i => /^shimomrfz_\\d+$/.test(i)).map(i => Number(i.replace(/\\D+/g, \"\"))));\r\n\t\t\t\t\t\tif (!Array.isArray(trigger.temporaryYingbian)) trigger.temporaryYingbian = [];\r\n\t\t\t\t\t\ttrigger.temporaryYingbian.add(\"force\");\r\n\t\t\t\t\t\tif (index >= 2 && player.satisfyYingbian(\"fujia\", trigger)) {\r\n\t\t\t\t\t\t\ttrigger.temporaryYingbian.add(\"add\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (index >= 3 && player.satisfyYingbian(\"kongchao\", trigger)) {\r\n\t\t\t\t\t\t\ttrigger.temporaryYingbian.add(\"draw\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (index >= 4 && player.satisfyYingbian(\"canqu\", trigger)) {\r\n\t\t\t\t\t\t\ttrigger.temporaryYingbian.add(\"damage\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 森西\r\n\t\tmicaimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: [\"loseAfter\", \"loseAsyncAfter\"],\r\n\t\t\t},\r\n\t\t\tusable: 1,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (event.type != \"discard\" || event.position != ui.discardPile || event.player == player) return false;\r\n\t\t\t\tlet cards = event.getd();\r\n\t\t\t\tif (!cards.filter(card => get.position(card, true) == \"d\").length) return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tlet cards = trigger.getd().filter(i => get.position(i, true) == \"d\");\r\n\t\t\t\tevent.result = await player\r\n\t\t\t\t\t.chooseCardButton(\"【觅材】:你可以获得一张牌\", cards)\r\n\t\t\t\t\t.set(\"ai\", button => get.value(button))\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tevent.result.cost_data = event.result;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.gain(event.cost_data.links, \"gain2\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tbeicaimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = {};\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"h\", card => get.cardNameLength(card) > 1) > 0;\r\n\t\t\t},\r\n\t\t\tlessNameLength(card) {\r\n\t\t\t\tconst list = [];\r\n\t\t\t\tconst original = get.cardNameLength(card);\r\n\t\t\t\tfor (let name of lib.inpile) {\r\n\t\t\t\t\tif (get.cardNameLength(name) >= original) continue;\r\n\t\t\t\t\tlist.push([get.translation(get.type(name)), \"\", name]);\r\n\t\t\t\t\tif (name == \"sha\") {\r\n\t\t\t\t\t\tfor (var j of lib.inpile_nature) list.push([\"基本\", \"\", \"sha\", j]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn list;\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tevent.result = await player\r\n\t\t\t\t\t.chooseCard(\"h\")\r\n\t\t\t\t\t.set(\"prompt2\", \"你可以将一张手牌视为任意小于此牌字数的一张牌。\")\r\n\t\t\t\t\t.set(\"prompt\", \"是否发动【备材】？\")\r\n\t\t\t\t\t.set(\"filterCard\", card => get.cardNameLength(card) > 1)\r\n\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\tconst player = get.player();\r\n\t\t\t\t\t\tif (get.cardNameLength(card) < 2) return -1;\r\n\t\t\t\t\t\tconst less = lib.skill.beicaimrfz.lessNameLength(card).map(i => i[2]);\r\n\t\t\t\t\t\tif (!Array.isArray(less.filter(i => player.getUseValue(i) > player.getUseValue(card)))) return -1;\r\n\t\t\t\t\t\tlet OptimalSolution = less.filter(i => player.getUseValue(i) > player.getUseValue(card)) || null;\r\n\t\t\t\t\t\tif (OptimalSolution === null || OptimalSolution.length < 1) return -1;\r\n\t\t\t\t\t\tOptimalSolution = OptimalSolution.reduce((a, b) => (player.getUseValue(a) >= player.getUseValue(b) ? a : b)) || null;\r\n\t\t\t\t\t\treturn OptimalSolution ? player.getUseValue(OptimalSolution) - player.getUseValue(card) : -1;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst list = lib.skill.beicaimrfz.lessNameLength(event.cards[0]);\r\n\t\t\t\tconst { links } = await player\r\n\t\t\t\t\t.chooseButton([`备材<br>把${get.translation(event.cards)}视为：`, [list, \"vcard\"]], true)\r\n\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\tconst player = get.player(),\r\n\t\t\t\t\t\t\tcard = {\r\n\t\t\t\t\t\t\t\tname: button.link[2],\r\n\t\t\t\t\t\t\t\tnature: button.link[3],\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\treturn player.getUseValue(card, null, true);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!links) return;\r\n\t\t\t\tplayer.addGaintag(event.cards, \"beicaimrfzx\");\r\n\t\t\t\tif (!player.storage.beicaimrfz) player.storage.beicaimrfz = {};\r\n\t\t\t\tplayer.storage.beicaimrfz[event.cards[0].cardid] = { name: links[0][2], nature: links[0][3] };\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tcardname(card, player, name) {\r\n\t\t\t\t\tconst storage = player.storage.beicaimrfz;\r\n\t\t\t\t\tif (card.hasGaintag(\"beicaimrfzx\") && Object.keys(storage).includes(card.cardid) && storage[card.cardid][\"name\"])\r\n\t\t\t\t\t\treturn storage[card.cardid][\"name\"];\r\n\t\t\t\t},\r\n\t\t\t\tcardnature(card, player) {\r\n\t\t\t\t\tconst storage = player.storage.beicaimrfz;\r\n\t\t\t\t\tif (card.hasGaintag(\"beicaimrfzx\") && Object.keys(storage).includes(card.cardid) && storage[card.cardid][\"nature\"])\r\n\t\t\t\t\t\treturn storage[card.cardid][\"nature\"];\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: \"beicaimrfz_clear\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"loseAfter\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn Object.keys(player.storage.beicaimrfz).length > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst hs = player.getCards(\"he\").map(card => card.cardid);\r\n\t\t\t\t\t\tfor (let id in player.storage.beicaimrfz) {\r\n\t\t\t\t\t\t\tif (!hs.includes(id)) delete player.storage.beicaimrfz[id];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tpengcaimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilterCard(card) {\r\n\t\t\t\tconst player = get.player();\r\n\t\t\t\treturn !ui.selected.cards.some(cardx => get.type2(cardx, player) == get.type2(card, player));\r\n\t\t\t},\r\n\t\t\tselectCard: 2,\r\n\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\treturn player.canUse(\"wugu\", target);\r\n\t\t\t},\r\n\t\t\tselectTarget: [1, 4],\r\n\t\t\tcheck(card) {\r\n\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t},\r\n\t\t\tcomplexCard: true,\r\n\t\t\tdiscard: false,\r\n\t\t\tlose: false,\r\n\t\t\tmultitarget: true,\r\n\t\t\tmultiline: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.storage.pengcaimrfz = event.targets.slice();\r\n\t\t\t\tawait player.useCard({ name: \"wugu\", pengcaimrfz: true }, event.targets, event.cards, false, \"pengcaimrfz\");\r\n\t\t\t\tconst store = player.storage.pengcaimrfz;\r\n\t\t\t\tif (!Array.isArray(store)) return;\r\n\t\t\t\tlet type = [];\r\n\t\t\t\tfor (let i = 0; i < store.length; i++) {\r\n\t\t\t\t\tlet target = store[i][0],\r\n\t\t\t\t\t\tcards = store[i][1];\r\n\t\t\t\t\tif (!event.targets.includes(target) || !cards) continue;\r\n\t\t\t\t\ttype.push(...cards.map(i => get.type2(i)));\r\n\t\t\t\t}\r\n\t\t\t\tlet SetType = new Set(type.slice());\r\n\t\t\t\tif (SetType.size !== type.length) return;\r\n\t\t\t\tawait player.useCard({ name: \"wugu\", pengcaimrfz: true }, event.targets, event.cards, false, \"pengcaimrfz\");\r\n\t\t\t\tdelete player.storage.pengcaimrfz;\r\n\t\t\t},\r\n\t\t\tgroup: [\"pengcaimrfz_wugu\"],\r\n\t\t\tglobal: \"pengcaimrfz_eff\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"yingbian\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.card.isCard &&\r\n\t\t\t\t\t\t\tevent.player.hasHistory(\r\n\t\t\t\t\t\t\t\t\"lose\",\r\n\t\t\t\t\t\t\t\tevt => evt.getParent() == event && Object.values(evt.gaintag_map).some(value => value.includes(\"pengcaimrfzx\"))\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (!Array.isArray(trigger.temporaryYingbian)) trigger.temporaryYingbian = [];\r\n\t\t\t\t\t\ttrigger.temporaryYingbian.add(\"force\");\r\n\t\t\t\t\t\ttrigger.temporaryYingbian.addArray(get.yingbianEffects());\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\twugu: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\ttrigger: { global: \"gainAfter\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tconst evt = event.getParent();\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevt &&\r\n\t\t\t\t\t\t\tevt.card &&\r\n\t\t\t\t\t\t\tevt.card.pengcaimrfz &&\r\n\t\t\t\t\t\t\tplayer.storage.pengcaimrfz &&\r\n\t\t\t\t\t\t\tplayer.storage.pengcaimrfz.some(i => (Array.isArray(i) ? i[0] == event.player : i == event.player))\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst cards = trigger.cards.filter(i => get.itemtype(i) == \"card\");\r\n\t\t\t\t\t\tplayer.storage.pengcaimrfz[player.storage.pengcaimrfz.indexOf(trigger.player)] = [trigger.player, cards];\r\n\t\t\t\t\t\ttrigger.player.addGaintag(cards, \"pengcaimrfzx\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\tthreaten: 1.8,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: 1,\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 奇尔查克\r\n\t\ttangongmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: [\"drawBegin\", \"damageBegin3\"] },\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.num > 0 && !player.storage.tangongmrfz.includes(event.name);\r\n\t\t\t},\r\n\t\t\tcreateDialog(id, showCards) {\r\n\t\t\t\tvar dialog = ui.create.dialog(\"hidden\");\r\n\t\t\t\t(dialog.textPrompt = dialog.add(\"探宫\")).style.textAlign = \"center\";\r\n\t\t\t\tdialog.cards = [];\r\n\t\t\t\tdialog.rawButtons = [];\r\n\t\t\t\tdialog.videoId = id;\r\n\t\t\t\tvar cards = [];\r\n\t\t\t\tfor (var y = 0; y < 3; y++) {\r\n\t\t\t\t\tfor (var x = 0; x < 3; x++) {\r\n\t\t\t\t\t\tvar card = ui.create.card(null, null, true);\r\n\t\t\t\t\t\tcard.pos = y * 3 + x;\r\n\t\t\t\t\t\tcard.pos_x = x;\r\n\t\t\t\t\t\tcard.pos_y = y;\r\n\t\t\t\t\t\tcards.push(card);\r\n\t\t\t\t\t\tdialog.rawButtons.push(card);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdialog.add(cards);\r\n\t\t\t\t\tcards = [];\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i of dialog.buttons) {\r\n\t\t\t\t\ti.pos_x = i.link.pos_x;\r\n\t\t\t\t\ti.pos_y = i.link.pos_y;\r\n\t\t\t\t\ti.link = i.link.pos;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 放弃选择\r\n\t\t\t\t// dialog.addAuto([['放弃选择'],\"tdnodes\"]);\r\n\r\n\t\t\t\t// 展示待选择的牌\r\n\t\t\t\tshowCards = showCards ? showCards : game.cardsGotoOrdering(get.cards(9)).cards;\r\n\r\n\t\t\t\tshowCards.map(i => (i.tangongmrfz = true));\r\n\r\n\t\t\t\tdialog.addAuto(\"待选择的牌\");\r\n\r\n\t\t\t\tdialog.showCards = showCards;\r\n\r\n\t\t\t\tdialog.add(showCards);\r\n\r\n\t\t\t\tdialog.open();\r\n\t\t\t},\r\n\t\t\taddCard(card, id, pos) {\r\n\t\t\t\tvar dialog = get.idDialog(id);\r\n\t\t\t\tif (!dialog) return;\r\n\t\t\t\tfor (var i = 0; i < dialog.buttons.length; i++) {\r\n\t\t\t\t\tvar button = dialog.buttons[i];\r\n\r\n\t\t\t\t\tif (button.link == pos) {\r\n\t\t\t\t\t\tvar card2 = ui.create.button(card, \"card\");\r\n\t\t\t\t\t\tcard2.pos = button.link;\r\n\t\t\t\t\t\tcard2.pos_x = button.pos_x;\r\n\t\t\t\t\t\tcard2.pos_y = button.pos_y;\r\n\t\t\t\t\t\tcard2.classList.add(\"noclick\");\r\n\t\t\t\t\t\tbutton.parentNode.insertBefore(card2, button);\r\n\t\t\t\t\t\tdialog.cards.push(card2);\r\n\t\t\t\t\t\tbutton.remove();\r\n\t\t\t\t\t\tdialog.buttons.splice(i, 1);\r\n\t\t\t\t\t} else if (get.itemtype(button.link) == \"card\") {\r\n\t\t\t\t\t\tif (button.link == card) {\r\n\t\t\t\t\t\t\tbutton.remove();\r\n\t\t\t\t\t\t\tdialog.showCards.remove(card);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tchangePrompt(str, id) {\r\n\t\t\t\tvar dialog = get.idDialog(id);\r\n\t\t\t\tif (!dialog) return;\r\n\t\t\t\tdialog.textPrompt.innerHTML = str;\r\n\t\t\t},\r\n\t\t\tgetValidMatrix(suits) {\r\n\t\t\t\tfunction isValid(matrix, row, col, value) {\r\n\t\t\t\t\tfor (let i = 0; i < col; i++) {\r\n\t\t\t\t\t\tif (matrix[row][i] === value) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (let i = 0; i < row; i++) {\r\n\t\t\t\t\t\tif (matrix[i][col] === value) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 回溯函数：尝试构建3x3矩阵\r\n\t\t\t\tfunction backtrack(matrix, suits, row, col) {\r\n\t\t\t\t\tif (row === 3) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet nextRow = col === 2 ? row + 1 : row;\r\n\t\t\t\t\tlet nextCol = (col + 1) % 3;\r\n\r\n\t\t\t\t\tfor (let i = 0; i < suits.length; i++) {\r\n\t\t\t\t\t\tlet suit = suits[i];\r\n\r\n\t\t\t\t\t\tif (isValid(matrix, row, col, suit)) {\r\n\t\t\t\t\t\t\tmatrix[row][col] = suit;\r\n\r\n\t\t\t\t\t\t\tlet remainingSuits = suits.slice(0, i).concat(suits.slice(i + 1));\r\n\r\n\t\t\t\t\t\t\tif (backtrack(matrix, remainingSuits, nextRow, nextCol)) {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// 如果无法填充成功，则回溯\r\n\t\t\t\t\t\t\tmatrix[row][col] = null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet matrix = Array.from({ length: 3 }, () => Array(3).fill(null));\r\n\r\n\t\t\t\t// 尝试构建3x3矩阵\r\n\t\t\t\tif (backtrack(matrix, suits, 0, 0)) {\r\n\t\t\t\t\treturn matrix;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t// 限制每回合发动次数\r\n\t\t\t\tif (!player.storage.tangongmrfz) player.storage.tangongmrfz = [];\r\n\t\t\t\tplayer.storage.tangongmrfz.add(trigger.name);\r\n\r\n\t\t\t\tlet autoMode = false;\r\n\t\t\t\tconst { bool } = await player\r\n\t\t\t\t\t.chooseBool(`是否让系统帮你组方阵？`)\r\n\t\t\t\t\t.set(\"ai\", () => true)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (bool) autoMode = true;\r\n\r\n\t\t\t\tlet next = game.createEvent(\"cardsGotoOrdering\");\r\n\t\t\t\tnext.cards = [];\r\n\t\t\t\tnext.setContent(\"cardsGotoOrdering\");\r\n\t\t\t\tevent.videoId = lib.status.videoId++;\r\n\t\t\t\tevent.forceDie = true;\r\n\t\t\t\tevent.cards = [];\r\n\t\t\t\tevent.positions = [0, 1, 2, 3, 4, 5, 6, 7, 8];\r\n\t\t\t\tlet showCards = game.cardsGotoOrdering(get.cards(12)).cards;\r\n\t\t\t\tgame.broadcastAll(\r\n\t\t\t\t\tfunction (id, showCards) {\r\n\t\t\t\t\t\tlib.skill.tangongmrfz.createDialog(id, showCards);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tevent.videoId,\r\n\t\t\t\t\tshowCards.slice()\r\n\t\t\t\t);\r\n\t\t\t\tlet autoSelected = lib.skill.tangongmrfz.getValidMatrix(showCards.slice().map(i => get.suit(i)));\r\n\t\t\t\tlet cards = [];\r\n\r\n\t\t\t\twhile (showCards.length > 0) {\r\n\t\t\t\t\tlet str = \"请将一张牌放置到方阵中\";\r\n\t\t\t\t\tif (player == game.me || player.isUnderControl()) {\r\n\t\t\t\t\t\tlib.skill.tangongmrfz.changePrompt(str, event.videoId);\r\n\t\t\t\t\t} else if (player.isOnline()) {\r\n\t\t\t\t\t\tplayer.send(\r\n\t\t\t\t\t\t\tfunction (str, id) {\r\n\t\t\t\t\t\t\t\tlib.skill.tangongmrfz.changePrompt(str, event.videoId);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tstr,\r\n\t\t\t\t\t\t\tid\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet links;\r\n\t\t\t\t\tif ((player.isUnderControl() || game.me == player) && !autoMode) {\r\n\t\t\t\t\t\t// if(false){\r\n\t\t\t\t\t\tconst result1 = await player\r\n\t\t\t\t\t\t\t.chooseButton()\r\n\t\t\t\t\t\t\t.set(\"filterOk\", button => {\r\n\t\t\t\t\t\t\t\tconst selected = ui.selected.buttons.slice().map(i => get.itemtype(i.link) || typeof i.link);\r\n\t\t\t\t\t\t\t\treturn selected.includes(\"card\") && selected.includes(\"number\");\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"dialog\", event.videoId)\r\n\t\t\t\t\t\t\t.set(\"filterButton\", function (button) {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"selectButton\", 2)\r\n\t\t\t\t\t\t\t.set(\"autoSelected\", autoSelected)\r\n\t\t\t\t\t\t\t.set(\"showCards\", showCards)\r\n\t\t\t\t\t\t\t.set(\"cards\", cards.slice())\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tlinks = result1.links;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (!autoSelected) {\r\n\t\t\t\t\t\t\tplayer.popup(\"探索失败\");\r\n\t\t\t\t\t\t\tgame.broadcastAll(\"closeDialog\", event.videoId);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet posx = cards.slice(0).map(i => i[1]);\r\n\t\t\t\t\t\tlinks = [];\r\n\t\t\t\t\t\tlet selectedList = [...autoSelected[0], ...autoSelected[1], ...autoSelected[2]];\r\n\t\t\t\t\t\tfor (let i = 0; i < 9; i++) {\r\n\t\t\t\t\t\t\tif (posx.includes(i)) continue;\r\n\t\t\t\t\t\t\tlet getValidSuit = showCards.filter(j => get.suit(j) == selectedList[i])[0];\r\n\t\t\t\t\t\t\tlinks.push(getValidSuit, i);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!links) {\r\n\t\t\t\t\t\tplayer.popup(\"探索失败\");\r\n\t\t\t\t\t\tgame.broadcastAll(\"closeDialog\", event.videoId);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet pos = links.filter(i => typeof i == \"number\")[0],\r\n\t\t\t\t\t\ttranCard = links.filter(i => get.itemtype(i) == \"card\")[0];\r\n\t\t\t\t\tgame.broadcastAll(\r\n\t\t\t\t\t\tfunction (card, id, pos, player) {\r\n\t\t\t\t\t\t\tlib.skill.tangongmrfz.addCard(card, id, pos);\r\n\t\t\t\t\t\t\tlib.skill.tangongmrfz.changePrompt(get.translation(player) + \"放置了\" + get.translation(card), id);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttranCard,\r\n\t\t\t\t\t\tevent.videoId,\r\n\t\t\t\t\t\tpos,\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t);\r\n\t\t\t\t\tlet { promise, resolve } = Promise.withResolvers();\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tresolve(true);\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t\tawait promise;\r\n\t\t\t\t\tcards.push([tranCard, pos]);\r\n\t\t\t\t\tshowCards.remove(tranCard);\r\n\t\t\t\t\tif (cards.length > 8) {\r\n\t\t\t\t\t\tgame.broadcastAll(\"closeDialog\", event.videoId);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconst suits = cards.map(i => [get.suit(i[0]), i[1]]);\r\n\t\t\t\tconst matrix = Array.from({ length: 3 }, () => Array(3));\r\n\t\t\t\tsuits.forEach(([suit, index]) => (matrix[Math.floor(index / 3)][index % 3] = suit));\r\n\r\n\t\t\t\t// 检查是否有重复的花色\r\n\t\t\t\tconst hasDuplicates = matrix.some((row, i) => new Set(row).size < 3 || new Set(matrix.map(r => r[i])).size < 3);\r\n\r\n\t\t\t\tif (!hasDuplicates) {\r\n\t\t\t\t\tconst isDraw = trigger.name === \"draw\" ? true : false;\r\n\t\t\t\t\tconst { control } = await player\r\n\t\t\t\t\t\t.chooseControl(`减半`, `翻倍`)\r\n\t\t\t\t\t\t.set(\"prompt\", `令${trigger.name === \"draw\" ? \"摸牌数\" : \"伤害值\"}(${trigger.num})翻倍或减半`)\r\n\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\treturn get.event().isDraw ? \"翻倍\" : \"减半\";\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"isDraw\", isDraw)\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\ttrigger.num = control === `翻倍` ? trigger.num * 2 : Math.floor(trigger.num / 2);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"tangongmrfz_clear\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn player.storage.tangongmrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.tangongmrfz = [];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.5,\r\n\t\t\t},\r\n\t\t},\r\n\t\truiganmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"useCard1\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\treturn get.cardNameLength(event.card) == player.countCards(\"h\") && event.targets.includes(player) && event.player != player;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {},\r\n\t\t\tmod: {\r\n\t\t\t\ttargetEnabled(card, player, target) {\r\n\t\t\t\t\tif (get.cardNameLength(card) == target.countCards(\"h\") && player != target) return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 凯瑟琳\r\n\t\tksl_zhuzhimrfz: {\r\n\t\t\tonremove(player) {\r\n\t\t\t\tfor (let t of game.players) {\r\n\t\t\t\t\tt.removeSkill(\"duantiemrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tderivation: [\"ksl_lulitongxinmrfz\"],\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"linkAfter\" },\r\n\t\t\tsilent: true,\r\n\t\t\tforced: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.player != player;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet target = trigger.player;\r\n\t\t\t\tif (!target.isLinked() && target.hasSkill(\"duantiemrfz\")) target.removeSkill(\"duantiemrfz\");\r\n\t\t\t\telse if (target.isLinked() && !target.hasSkill(\"duantiemrfz\")) target.addSkill(\"duantiemrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"ksl_zhuzhimrfz_add\", \"ksl_zhuzhimrfz_gain\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tgain: {\r\n\t\t\t\t\taudio: \"ksl_zhuzhimrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"phaseZhunbeiBegin\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar card = get.cardPile(function (card) {\r\n\t\t\t\t\t\t\treturn get.name(card) == \"ksl_lulitongxinmrfz\";\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (card) player.gain(card, \"gain2\", \"log\");\r\n\t\t\t\t\t\telse player.draw();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tadd: {\r\n\t\t\t\t\taudio: \"ksl_zhuzhimrfz\",\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn (event.name != \"phase\" || game.phaseNumber == 0) && !lib.inpile.includes(\"ksl_lulitongxinmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar cards = [];\r\n\t\t\t\t\t\tfor (var i = 0; i < 4; i++) {\r\n\t\t\t\t\t\t\tcards.push(game.createCard2(\"ksl_lulitongxinmrfz\", lib.suit.randomGet(), [2, 4, 3, 10, 13].randomGet()));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgame.broadcastAll(function () {\r\n\t\t\t\t\t\t\tlib.inpile.add(\"ksl_lulitongxinmrfz\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tgame.cardsGotoPile(cards, () => {\r\n\t\t\t\t\t\t\treturn ui.cardPile.childNodes[get.rand(0, ui.cardPile.childNodes.length - 1)];\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tduantiemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tposition: \"he\",\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tlet list = [];\r\n\t\t\t\tfor (let card of player.getCards(\"he\")) {\r\n\t\t\t\t\tlist.add(get.type2(card));\r\n\t\t\t\t}\r\n\t\t\t\treturn list.length >= 2;\r\n\t\t\t},\r\n\t\t\tfilterCard(card, player) {\r\n\t\t\t\treturn !ui.selected.cards.some(cardx => get.type2(cardx) == get.type2(card));\r\n\t\t\t},\r\n\t\t\tcomplexCard: true,\r\n\t\t\tselectCard: 2,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.storage.duantiemrfz_buff = player.name;\r\n\t\t\t\tlet audio = new Audio(\"extension/WhichWay/audio/up.mp3\");\r\n\t\t\t\taudio.play();\r\n\t\t\t\tawait player.reinitCharacter(player.name, \"paxinghaomrfz\", false);\r\n\t\t\t\tplayer.addSkill(\"duantiemrfz_buff\");\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tbuff: {\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\t\t\treturn `当前机甲驾驶员:${get.translation(player.storage.duantiemrfz_buff)}`;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: { player: \"dying\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet audio = new Audio(\"extension/WhichWay/audio/down.mp3\");\r\n\t\t\t\t\t\taudio.play();\r\n\t\t\t\t\t\tawait player.reinitCharacter(\"paxinghaomrfz\", player.storage.duantiemrfz_buff, false);\r\n\t\t\t\t\t\tplayer.recoverTo(2);\r\n\t\t\t\t\t\tplayer.removeSkill(\"duantiemrfz_buff\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 6,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer(player, target) {\r\n\t\t\t\t\t\tif (player.hp < 3) return 1;\r\n\t\t\t\t\t\tlet threaten = -(get.skillthreaten(\"jushoumrfz\") + get.skillthreaten(\"yinqingmrfz\"));\r\n\t\t\t\t\t\tfor (let skill of player.getSkills(null, false, false)) {\r\n\t\t\t\t\t\t\tthreaten += get.skillthreaten(skill);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn threaten;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 波卜\r\n\t\tqingtingmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: [\"loseBegin\", \"loseAsyncBegin\"] },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tlet evt = event.getParent();\r\n\t\t\t\tif (event.name === \"lose\") {\r\n\t\t\t\t\treturn event.type === \"gain\" && event.cards.length >= 1 && evt.player !== player;\r\n\t\t\t\t} else if (event.name === \"loseAsync\") {\r\n\t\t\t\t\treturn evt.name === \"swapHandcards\" && event.target != event.player && event.cards1.length >= 1;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tlet evt = trigger.getParent();\r\n\t\t\t\tevent.result = await player\r\n\t\t\t\t\t.chooseBool()\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\tlet evt = get.event().evt;\r\n\t\t\t\t\t\tlet event = get.event().evt2;\r\n\t\t\t\t\t\treturn get.attitude2(event.target || evt.player) < 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"qingtingmrfz\"))\r\n\t\t\t\t\t.set(\r\n\t\t\t\t\t\t\"prompt2\",\r\n\t\t\t\t\t\t`是否取消${get.translation(trigger.target || evt.player)}获得你的牌${get.translation(trigger.cards1 || trigger.cards)}？`\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"evt\", evt)\r\n\t\t\t\t\t.set(\"evt2\", trigger)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (trigger.name === \"lose\") trigger.cancel();\r\n\t\t\t\telse {\r\n\t\t\t\t\tlet evt = trigger.getParent();\r\n\t\t\t\t\tplayer.directgain(evt.cards1);\r\n\t\t\t\t\tplayer.$update();\r\n\t\t\t\t\tevt.cards1 = [];\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tqingtanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\treturn target != player && target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet target = event.target;\r\n\t\t\t\tlet tHs = target.getCards(\"h\"),\r\n\t\t\t\t\tpHs = player.getCards(\"h\");\r\n\t\t\t\tawait player.viewHandcards(target);\r\n\t\t\t\tawait target.viewHandcards(player);\r\n\t\t\t\tconst { cards: cards1 } =\r\n\t\t\t\t\tpHs.length < 2\r\n\t\t\t\t\t\t? { cards: pHs }\r\n\t\t\t\t\t\t: await player\r\n\t\t\t\t\t\t\t\t.chooseCard(true)\r\n\t\t\t\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\t\t\t\tlet target = get.event().target;\r\n\t\t\t\t\t\t\t\t\treturn get.value(card) * get.attitude2(target);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", \"请选择两张类型不同的牌\")\r\n\t\t\t\t\t\t\t\t.set(\"filterCard\", card => {\r\n\t\t\t\t\t\t\t\t\treturn !ui.selected.cards.some(cardx => get.type2(cardx, player) == get.type2(card, player));\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"selectCard\", () => {\r\n\t\t\t\t\t\t\t\t\tlet hs = get.event().hs;\r\n\t\t\t\t\t\t\t\t\treturn new Set(hs.map(i => get.type2(i))).size < 2 ? 1 : 2;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"complexCard\", true)\r\n\t\t\t\t\t\t\t\t.set(\"target\", target)\r\n\t\t\t\t\t\t\t\t.set(\"hs\", pHs)\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\tconst { cards: cards2 } =\r\n\t\t\t\t\ttHs.length < 2\r\n\t\t\t\t\t\t? { cards: tHs }\r\n\t\t\t\t\t\t: await target\r\n\t\t\t\t\t\t\t\t.chooseCard(true)\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", \"请选择两张类型不同的牌\")\r\n\t\t\t\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\t\t\t\tlet target = get.event().target;\r\n\t\t\t\t\t\t\t\t\treturn get.value(card) * get.attitude2(target);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"filterCard\", card => {\r\n\t\t\t\t\t\t\t\t\treturn !ui.selected.cards.some(cardx => get.type2(cardx, player) == get.type2(card, player));\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"selectCard\", () => {\r\n\t\t\t\t\t\t\t\t\tlet hs = get.event().hs;\r\n\t\t\t\t\t\t\t\t\treturn new Set(hs.map(i => get.type2(i))).size < 2 ? 1 : 2;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"complexCard\", true)\r\n\t\t\t\t\t\t\t\t.set(\"hs\", tHs)\r\n\t\t\t\t\t\t\t\t.set(\"target\", player)\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\tif (cards1 && cards2) {\r\n\t\t\t\t\tplayer.swapHandcards(target, cards1, cards2);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync contentAfter(event, trigger, player) {\r\n\t\t\t\tconst target = event.targets[0];\r\n\t\t\t\tif (target.countCards(\"h\") === player.countCards(\"h\")) return;\r\n\t\t\t\tfor (let char of [player, target]) {\r\n\t\t\t\t\tif (char.hasSkill(\"qingtanmrfz_hd\")) {\r\n\t\t\t\t\t\tchar.draw();\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst { bool } = await char\r\n\t\t\t\t\t\t.chooseBool()\r\n\t\t\t\t\t\t.set(\"prompt\", \"是否摸一张牌？\")\r\n\t\t\t\t\t\t.set(\"prompt2\", \"选择‘取消’则为手牌上限+1\")\r\n\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\t\treturn player.countCards(\"h\") < 2 ? true : false;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (bool === true) {\r\n\t\t\t\t\t\tchar.draw();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (bool === false) {\r\n\t\t\t\t\t\tchar.addSkill(\"qingtanmrfz_hd\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\thd: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"手牌上限+1\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn num + 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: -1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 菲莱\r\n\t\tqianxiumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\treturn `少女祈祷中...`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttrigger: { player: \"phaseDrawBegin1\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !event.numFixed;\r\n\t\t\t},\r\n\t\t\tprompt(event, player) {\r\n\t\t\t\treturn get.prompt(\"qianxiumrfz\");\r\n\t\t\t},\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\treturn `你可以放弃摸牌，并展示牌堆顶${player.maxHp}张牌`;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.changeToZero();\r\n\t\t\t\tlet shows = game.cardsGotoOrdering(get.cards(player.maxHp)).cards;\r\n\t\t\t\tawait player.showCards(shows, get.translation(player) + \"发动了【虔修】\");\r\n\t\t\t\tif (shows.filter(i => get.tag(i, \"damage\") > 0).length < 1) {\r\n\t\t\t\t\tplayer.gain(shows);\r\n\t\t\t\t\tif (player.countMark(\"qianxiumrfz\") < 5) player.addMark(\"qianxiumrfz\", 1, false);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst { links } = await player\r\n\t\t\t\t\t.chooseButton([\"【虔修】:你可以使用一张带有伤害类标签的牌\", shows])\r\n\t\t\t\t\t.set(\"filterButton\", button => {\r\n\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\treturn get.tag(button.link, \"damage\") > 0 && player.hasUseTarget(button.link);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\tif (player.countMark(\"qianxiumrfz\") < 3) return false;\r\n\t\t\t\t\t\treturn get.value(button.link);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (links) {\r\n\t\t\t\t\tlet nums = player.countMark(\"qianxiumrfz\");\r\n\t\t\t\t\tlinks[0].storage.qianxiumrfz = nums;\r\n\t\t\t\t\tplayer.removeMark(\"qianxiumrfz\", 1145141919810);\r\n\t\t\t\t\tplayer.chooseUseTarget(links[0]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.gain(shows);\r\n\t\t\t\t\tif (player.countMark(\"qianxiumrfz\") < 5) player.addMark(\"qianxiumrfz\", 1, false);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"qianxiumrfz_add\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tadd: {\r\n\t\t\t\t\taudio: \"qianxiumrfz\",\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { source: \"damageBegin3\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.card &&\r\n\t\t\t\t\t\t\tevent.card.storage &&\r\n\t\t\t\t\t\t\ttypeof event.card.storage.qianxiumrfz === \"number\" &&\r\n\t\t\t\t\t\t\tevent.card.storage.qianxiumrfz > 0\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num += trigger.card.storage.qianxiumrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tmingzhoumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"gainAfter\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.cards.length > 0 && _status.currentPhase !== player;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.chooseToDiscard(true, `he`, `请弃置${trigger.cards.length}张牌`, trigger.cards.length).set(\"ai\", card => -get.value(card));\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 0.9,\r\n\t\t\t\tnogain: 1,\r\n\t\t\t\tskillTagFilter: function (player) {\r\n\t\t\t\t\treturn player != _status.currentPhase;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 裁度\r\n\t\tcaiyimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"equipBefore\" },\r\n\t\t\tforced: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.card && get.type(event.card) === \"equip\" && event.getParent().name != \"caiyimrfz\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst subtype = [\"equip1\", \"equip2\", \"equip3\", \"equip4\", \"equip5\"];\r\n\t\t\t\tconst { control } = await player\r\n\t\t\t\t\t.chooseControl(subtype)\r\n\t\t\t\t\t.set(\"prompt\", `请选择将${get.translation(trigger.card)}置入一个装备栏`)\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\tlet subtype = get.event().subtype.filter(i => player.hasEmptySlot(i));\r\n\t\t\t\t\t\tlet card = get.event().card;\r\n\t\t\t\t\t\tif (subtype.length > 0) {\r\n\t\t\t\t\t\t\treturn subtype.includes(\"equip2\") && subtype.length > 1 ? subtype.remove(\"equip2\").randomGet() : subtype.randomGet();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlet equips = player.getCards(\"e\").sort((a, b) => get.value(b) - get.value(a));\r\n\t\t\t\t\t\t\tfor (let equip of equips) {\r\n\t\t\t\t\t\t\t\tif (get.value(card) > get.value(equip)) return get.subtype(equip);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn [\"equip1\", \"equip2\", \"equip3\", \"equip4\", \"equip5\"].randomGet();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"subtype\", subtype)\r\n\t\t\t\t\t.set(\"card\", trigger.card)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!control) return;\r\n\t\t\t\ttrigger.card.subtypes = [control];\r\n\t\t\t},\r\n\t\t},\r\n\t\tmingjiangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tlet puyuanEquip = Object.keys(lib.card).filter(i => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\tget.type(i) === \"equip\" &&\r\n\t\t\t\t\t\tlib.card?.[i]?.skills &&\r\n\t\t\t\t\t\t(lib.card[i]?.derivation === \"ol_puyuan\" || lib.card[i]?.derivation === \"puyuan\")\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\t\t\t\tplayer.storage[skill] = [...lib.inpile.filter(i => get.type(i) === \"equip\"), ...puyuanEquip];\r\n\t\t\t\t_status.mingjiangmrfz = puyuanEquip;\r\n\t\t\t},\r\n\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn current.hasEmptySlot(2);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet list = player.storage.mingjiangmrfz;\r\n\t\t\t\tawait player.draw();\r\n\t\t\t\tif (player.countCards(\"h\") < 1) return;\r\n\t\t\t\tconst { links } = await player\r\n\t\t\t\t\t.chooseButton([\"名匠\", [list, \"vcard\"]], true)\r\n\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\tlet card = {\r\n\t\t\t\t\t\t\tname: button.link[2],\r\n\t\t\t\t\t\t\tnature: button.link[3],\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tlet num = get.value(card);\r\n\t\t\t\t\t\tif (_status.mingjiangmrfz.includes(card.name)) num += 5;\r\n\t\t\t\t\t\tif (player.countCards(\"e\", card => get.subtype(card) === \"equip2\") < 1)\r\n\t\t\t\t\t\t\tget.subtype(card) === \"equip2\" ? (num += 5) : (num -= 2);\r\n\t\t\t\t\t\treturn num;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!links) return;\r\n\t\t\t\tconst { result } = await player.chooseCardTarget({\r\n\t\t\t\t\tprompt: `将一张手牌视为${get.translation(links[0][2])}置入一名角色的装备区`,\r\n\t\t\t\t\tfilterCard: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\t\t\treturn target.hasEmptySlot(2);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai1(card) {\r\n\t\t\t\t\t\treturn -get.value(card);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai2(target) {\r\n\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\tlet att = get.attitude2(target);\r\n\t\t\t\t\t\treturn att > 0 ? att + (5 - target.countCards(\"e\")) : -1;\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\tif (!result) return;\r\n\t\t\t\tconst { targets, cards } = result;\r\n\t\t\t\tlet card = get.autoViewAs({ name: links[0][2] }, cards);\r\n\t\t\t\ttargets[0].equip(card);\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 特克诺\r\n\t\tsuoumrfz: {\r\n\t\t\tinit(player) {\r\n\t\t\t\tgame.addGlobalSkill(\"autoswap\");\r\n\t\t\t},\r\n\t\t\tonremove(player) {\r\n\t\t\t\tfor (let i of game.players) {\r\n\t\t\t\t\tif (i.name === \"muouwuzhemrfz\") i.die();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.player && event.player.isIn() && event.player.name !== \"muouwuzhemrfz\" && event.player.getNext().name != \"muouwuzhemrfz\";\r\n\t\t\t},\r\n\t\t\tprompt(event, player) {\r\n\t\t\t\treturn `【塑偶】:是否在${get.translation(event.player)}和${get.translation(event.player.getNext())}之间放置一个‘木偶舞者’？`;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet target = trigger.player.getNext();\r\n\t\t\t\tvar fellow = game.addPlayer(trigger.player.getSeatNum(), \"muouwuzhemrfz\").animate(\"start\");\r\n\t\t\t\tfellow.getId();\r\n\t\t\t\tfellow.host = player;\r\n\t\t\t\tif (player.identity != \"zhu\" || get.mode() === \"doudizhu\") fellow.identity = player.identity;\r\n\t\t\t\telse fellow.identity = \"zhong\";\r\n\t\t\t\tfellow.node.identity.dataset.color = fellow.identity;\r\n\t\t\t\tfellow.identityShown = true;\r\n\t\t\t\tfellow.init(\"muouwuzhemrfz\");\r\n\t\t\t\tfellow.draw(3);\r\n\t\t\t\tfellow.update();\r\n\t\t\t\tfellow.addSkill(\"suoumrfz_dead\");\r\n\t\t\t\tfellow.suoumrfz = player;\r\n\t\t\t\tlet skillList = trigger.player.getOriginalSkills();\r\n\t\t\t\tlet introSkill = skillList.map(i => get.translation(i) + \":\" + get.skillInfoTranslation(i));\r\n\t\t\t\tconst { index } = skillList.length === 1 ? { index: 0 } : await player.chooseControl().set(\"choiceList\", introSkill).forResult();\r\n\t\t\t\tfellow.addSkill(skillList[index] === \"suoumrfz\" ? \"yingzi\" : skillList[index]);\r\n\t\t\t\tfor (let i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\tlet current = game.players[i];\r\n\t\t\t\t\tcurrent.seatNum = i + 1;\r\n\t\t\t\t\tcurrent.update();\r\n\t\t\t\t}\r\n\t\t\t\tawait game.updateRoundNumber();\r\n\t\t\t\tfor (let i of game.players) {\r\n\t\t\t\t\tif (i === player || i.suoumrfz === true) {\r\n\t\t\t\t\t\ti.draw();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"suoumrfz_swap\", \"suoumrfz_die\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdie: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"dieBegin\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (trigger.player === player) lib.skill.suoumrfz.onremove(player);\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tlet chars = game.players.slice();\r\n\t\t\t\t\t\t\tchars.remove(player);\r\n\t\t\t\t\t\t\tchars.remove(trigger.player);\r\n\t\t\t\t\t\t\tchars = chars.map(i => i.name);\r\n\t\t\t\t\t\t\tif (chars.every(i => i === \"muouwuzhemrfz\") || chars.length === 0) {\r\n\t\t\t\t\t\t\t\tplayer.when({ global: \"dieAfter\" }).then(() => {\r\n\t\t\t\t\t\t\t\t\tgame.over(true);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tswap: {\r\n\t\t\t\t\tinit(player, skill) {\r\n\t\t\t\t\t\tplayer.storage[skill] = player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: [\r\n\t\t\t\t\t\t\t\"playercontrol\",\r\n\t\t\t\t\t\t\t\"chooseToUseBegin\",\r\n\t\t\t\t\t\t\t\"chooseToRespondBegin\",\r\n\t\t\t\t\t\t\t\"chooseToDiscardBegin\",\r\n\t\t\t\t\t\t\t\"chooseToCompareBegin\",\r\n\t\t\t\t\t\t\t\"chooseButtonBegin\",\r\n\t\t\t\t\t\t\t\"chooseCardBegin\",\r\n\t\t\t\t\t\t\t\"chooseTargetBegin\",\r\n\t\t\t\t\t\t\t\"chooseCardTargetBegin\",\r\n\t\t\t\t\t\t\t\"chooseControlBegin\",\r\n\t\t\t\t\t\t\t\"chooseBoolBegin\",\r\n\t\t\t\t\t\t\t\"choosePlayerCardBegin\",\r\n\t\t\t\t\t\t\t\"discardPlayerCardBegin\",\r\n\t\t\t\t\t\t\t\"gainPlayerCardBegin\",\r\n\t\t\t\t\t\t\t\"chooseToMoveBegin\",\r\n\t\t\t\t\t\t\t\"chooseToPlayBeatmapBegin\",\r\n\t\t\t\t\t\t\t\"chooseToGiveBegin\",\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t!event.player.isUnderControl(true) &&\r\n\t\t\t\t\t\t\t!_status.auto &&\r\n\t\t\t\t\t\t\t(event.player.suoumrfz || event.player === player.storage.suoumrfz_swap)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tgame.swapPlayer(trigger.player);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdead: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"dieBegin\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (game.me != player.suoumrfz) await game.swapPlayer(player.suoumrfz);\r\n\t\t\t\t\t\tgame.removePlayer(player);\r\n\t\t\t\t\t\tgame.log(player, `被移出游戏`);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 瑰盐\r\n\t\tqiyimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: [\"phaseUse\", \"chooseToUse\"],\r\n\t\t\tusable: 1,\r\n\t\t\thiddenCard: function (player, name) {\r\n\t\t\t\tlet event = get.event();\r\n\t\t\t\tlet evt = event.getParent(\"phaseUse\");\r\n\t\t\t\t// if(_status.currentPhase===player && evt && evt.player == player) return true;\r\n\t\t\t\tif (player.countCards(\"he\") < 1 || _status.currentPhase == player) return false;\r\n\t\t\t\tif (name != \"tao\") return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tlet evt = event.getParent(\"phaseUse\");\r\n\t\t\t\tif (player.countCards(\"he\") < 1) return false;\r\n\t\t\t\tif (evt && evt.player == player) return true;\r\n\t\t\t\telse {\r\n\t\t\t\t\treturn event.filterCard({ name: \"tao\", isCard: true }, player, event) && _status.currentPhase != player;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\treturn target.getDamagedHp() > 0;\r\n\t\t\t},\r\n\t\t\tfilterCard: true,\r\n\t\t\tselectTarget() {\r\n\t\t\t\treturn [1, Infinity];\r\n\t\t\t},\r\n\t\t\tselectCard() {\r\n\t\t\t\treturn [1, Infinity];\r\n\t\t\t},\r\n\t\t\tfilterOk() {\r\n\t\t\t\tlet player = get.player();\r\n\t\t\t\tif (_status.auto || !player.isUnderControl(true)) return true;\r\n\t\t\t\treturn ui.selected.cards.length === ui.selected.targets.length;\r\n\t\t\t},\r\n\t\t\tposition: \"he\",\r\n\t\t\tdiscard: false,\r\n\t\t\tlose: false,\r\n\t\t\tmultitarget: true,\r\n\t\t\tmultiline: true,\r\n\t\t\tcheck(card) {\r\n\t\t\t\treturn lib.skill.qiyimrfz.getResult(get.player()) === false ? false : true;\r\n\t\t\t},\r\n\t\t\tgetResult(player) {\r\n\t\t\t\tlet cards = player.getCards(\"h\");\r\n\t\t\t\tif (!player.hasSkill(\"guiyaomrfz\")) {\r\n\t\t\t\t\tlet choiceCards = cards.filter(card => 6 - get.value(card));\r\n\t\t\t\t\tlet choiceTargets = player.getFriends().filter(i => i.getDamagedHp() > 0);\r\n\t\t\t\t\tif (choiceCards.length !== choiceTargets.length) {\r\n\t\t\t\t\t\tif (choiceCards.length > choiceTargets.length) choiceCards = choiceCards.slice(0, choiceTargets);\r\n\t\t\t\t\t\telse choiceTargets = choiceTargets.slice(0, choiceCards);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (choiceTargets.length < 1 || choiceCards.length < 1) return false;\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ttargets: choiceTargets,\r\n\t\t\t\t\t\tcards: choiceCards,\r\n\t\t\t\t\t};\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (game.countPlayer(current => get.attitude2(current) > 2 && current.getDamagedHp() > 0) > 1) {\r\n\t\t\t\t\t\tlet choiceCards = cards.filter(card => 8 - get.value(card) && get.color(card) === \"red\");\r\n\t\t\t\t\t\tlet choiceTargets = player\r\n\t\t\t\t\t\t\t.getFriends()\r\n\t\t\t\t\t\t\t.filter(i => i.getDamagedHp() > 0)\r\n\t\t\t\t\t\t\t.sort((i, j) => j.hp - i.hp);\r\n\t\t\t\t\t\tif (choiceCards.length !== choiceTargets.length) {\r\n\t\t\t\t\t\t\tif (choiceCards.length > choiceTargets.length) choiceCards = choiceCards.slice(0, choiceTargets.length);\r\n\t\t\t\t\t\t\telse choiceTargets = choiceTargets.slice(0, choiceCards.length);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (choiceTargets.length < 1 || choiceCards.length < 1) return false;\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttargets: choiceTargets,\r\n\t\t\t\t\t\t\tcards: choiceCards,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet choiceCards = cards.filter(card => 6 - get.value(card));\r\n\t\t\t\t\t\tlet choiceTargets = player.getEnemies().filter(i => i.getDamagedHp() > 0);\r\n\t\t\t\t\t\tchoiceCards = choiceCards.sort((i, j) => get.value(i) - get.value(j));\r\n\t\t\t\t\t\tif (choiceCards.length !== choiceTargets.length) {\r\n\t\t\t\t\t\t\tif (choiceCards.length > choiceTargets.length) choiceCards = choiceCards.slice(0, choiceTargets.length);\r\n\t\t\t\t\t\t\telse choiceTargets = choiceTargets.slice(0, choiceCards.length);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (choiceCards.every(i => get.color(i) === \"red\")) {\r\n\t\t\t\t\t\t\tlet lowValueRed = choiceCards[0];\r\n\t\t\t\t\t\t\tlet lowValueOther = cards\r\n\t\t\t\t\t\t\t\t.filter(card => 6 - get.value(card) && get.color(card) !== \"red\")\r\n\t\t\t\t\t\t\t\t.sort((i, j) => get.value(i) - get.value(j));\r\n\t\t\t\t\t\t\tif (lowValueOther.length === 0) return false;\r\n\t\t\t\t\t\t\tchoiceCards = [lowValueRed, lowValueOther[0]];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (choiceTargets.length < 1 || choiceCards.length < 1) return false;\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttargets: choiceTargets,\r\n\t\t\t\t\t\t\tcards: choiceCards,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (!player.isUnderControl(true) || _status.auto) {\r\n\t\t\t\t\tlet result = lib.skill.qiyimrfz.getResult(player);\r\n\t\t\t\t\tplayer.useCard({ name: \"tao\" }, result.targets, result.cards);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet targets = event.targets;\r\n\t\t\t\t\tlet cards = event.cards;\r\n\t\t\t\t\tplayer.useCard({ name: \"tao\" }, targets, cards);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 8,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\ttarget(player, target) {\r\n\t\t\t\t\t\tif (!player.hasSkill(\"guiyaomrfz\")) return 1;\r\n\t\t\t\t\t\tlet result = lib.skill.qiyimrfz.getResult(player);\r\n\t\t\t\t\t\tif (result === false) return 0;\r\n\t\t\t\t\t\tlet att = get.attitude2(lib.skill.qiyimrfz.getResult(player).targets[0]);\r\n\t\t\t\t\t\treturn att > 2 ? 1 : -1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tguiyaomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"recoverBegin\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.cards && event.cards.length > 0 && event.source && event.source === player;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst cards = trigger.cards;\r\n\t\t\t\tlet target = trigger.player;\r\n\t\t\t\ttarget.addTempSkill(\"guiyaomrfz_eff\", { player: \"phaseEnd\" });\r\n\t\t\t\tif (cards.every(card => get.color(card) === \"red\")) {\r\n\t\t\t\t\tif (!target.storage.guiyaomrfz_eff) target.storage.guiyaomrfz_eff = 0;\r\n\t\t\t\t\ttarget.storage.guiyaomrfz_eff++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!target.storage.guiyaomrfz_eff) target.storage.guiyaomrfz_eff = 0;\r\n\t\t\t\t\ttarget.storage.guiyaomrfz_eff--;\r\n\t\t\t\t\ttarget.loseHp(2);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\t\t\tlet num = player.storage.guiyaomrfz_eff;\r\n\t\t\t\t\t\t\tif (num === 0) return `无效果`;\r\n\t\t\t\t\t\t\treturn `额定摸牌数、手牌上限、使用牌的次数和攻击范围${num > 0 ? \"+\" : \"\"}${num}`;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove(player) {\r\n\t\t\t\t\t\tdelete player.storage.guiyaomrfz_eff;\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"phaseDrawBegin2\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn !event.numFixed && player.storage.guiyaomrfz_eff != 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num += player.storage.guiyaomrfz_eff;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn (num += player.storage.guiyaomrfz_eff);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcardUsable(card, player, num) {\r\n\t\t\t\t\t\t\treturn (num += player.storage.guiyaomrfz_eff);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tattackRange: function (player, num) {\r\n\t\t\t\t\t\t\treturn (num += player.storage.guiyaomrfz_eff);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txiadumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"roundStart\",\r\n\t\t\t},\r\n\t\t\tfirstDo: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet cards = player.getCards(\"h\", card => card.hasGaintag(\"xiadumrfz\"));\r\n\t\t\t\tif (cards) await player.discard(cards);\r\n\t\t\t\tawait player.changeHujia(-1);\r\n\t\t\t\tconst { result } = await player.draw(2).forResult();\r\n\t\t\t\tplayer.addGaintag(result, \"xiadumrfz\");\r\n\t\t\t\tplayer.changeHujia(1);\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 行著\r\n\t\txingzhumrfz: {\r\n\t\t\tmarktext: \"帙\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"帙\",\r\n\t\t\t\tcontent: \"expansion\",\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t},\r\n\t\t\tonremove: function (player, skill) {\r\n\t\t\t\tvar cards = player.getExpansions(skill);\r\n\t\t\t\tif (cards.length) player.loseToDiscardpile(cards);\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: [\"loseAfter\", \"loseAsyncAfter\"],\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.type != \"discard\") return false;\r\n\t\t\t\tfor (let current of game.players) {\r\n\t\t\t\t\tif (current === player) continue;\r\n\t\t\t\t\tlet evt = event.getl(current);\r\n\t\t\t\t\tif (!evt || !evt.cards2) continue;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet cards = [];\r\n\t\t\t\tvar players = game.filterPlayer();\r\n\t\t\t\tfor (var current of players) {\r\n\t\t\t\t\tif (current === player) continue;\r\n\t\t\t\t\tvar evt = trigger.getl(current);\r\n\t\t\t\t\tif (!evt || !evt.cards2) continue;\r\n\t\t\t\t\tvar cardsx = evt.cards2.filterInD(\"d\");\r\n\t\t\t\t\tcards.addArray(cardsx);\r\n\t\t\t\t}\r\n\t\t\t\tif (cards.length) {\r\n\t\t\t\t\tplayer.addToExpansion(cards, player, \"giveAuto\").gaintag.add(\"xingzhumrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"xingzhumrfz_start\", \"xingzhumrfz_check\", \"xingzhumrfz_init\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tcheck: {\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"addToExpansionEnd\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.gaintag.includes(\"xingzhumrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet cards = player.getExpansions(\"xingzhumrfz\");\r\n\t\t\t\t\t\tif (cards.length >= 9) {\r\n\t\t\t\t\t\t\tconst { links } = await player\r\n\t\t\t\t\t\t\t\t.chooseCardButton(`【行著】:请弃置${Math.max(1, cards.length - 9)}张‘帙’`, true, cards)\r\n\t\t\t\t\t\t\t\t.set(\"selectButton\", () => {\r\n\t\t\t\t\t\t\t\t\tlet cards2 = get.player().getExpansions(\"xingzhumrfz\");\r\n\t\t\t\t\t\t\t\t\treturn Math.max(1, cards2.length - 9);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\t\t\t\treturn -get.value(button.link);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\tif (!links) return;\r\n\t\t\t\t\t\t\tplayer.loseToDiscardpile(links);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tstart: {\r\n\t\t\t\t\taudio: \"xingzhumrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addToExpansion(get.cards(3), \"draw\").gaintag.add(\"xingzhumrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tinit: {\r\n\t\t\t\t\taudio: \"xingzhumrfz\",\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"loseEnd\", \"dying\", \"phaseBefore\", \"phaseAfter\", \"dyingAfter\", \"die\"],\r\n\t\t\t\t\t\tglobal: [\"equipEnd\", \"addJudgeEnd\", \"gainEnd\", \"loseAsyncEnd\", \"addToExpansionEnd\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn (player.getExpansions(\"xingzhumrfz\").length > 0) ^ player.hasSkill(\"xingzhumrfz_in\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tforceDie: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (player.getExpansions(\"xingzhumrfz\").length) {\r\n\t\t\t\t\t\t\tvar cards = player.getExpansions(\"xingzhumrfz\");\r\n\t\t\t\t\t\t\tvar cardsx = cards.map(card => {\r\n\t\t\t\t\t\t\t\tvar cardx = ui.create.card();\r\n\t\t\t\t\t\t\t\tcardx.init(get.cardInfo(card));\r\n\t\t\t\t\t\t\t\tcardx._cardid = card.cardid;\r\n\t\t\t\t\t\t\t\treturn cardx;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tplayer.directgains(cardsx, null, \"xingzhumrfz_tag\");\r\n\t\t\t\t\t\t\tplayer.addSkill(\"xingzhumrfz_in\");\r\n\t\t\t\t\t\t} else player.removeSkill(\"xingzhumrfz_in\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tin: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"addToExpansionEnd\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.gaintag.includes(\"xingzhumrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tlocked: false,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar cards2 = player.getCards(\"s\", card => card.hasGaintag(\"xingzhumrfz_tag\"));\r\n\t\t\t\t\t\tif (player.isOnline2()) {\r\n\t\t\t\t\t\t\tplayer.send(\r\n\t\t\t\t\t\t\t\tfunction (cards, player) {\r\n\t\t\t\t\t\t\t\t\tcards.forEach(i => i.delete());\r\n\t\t\t\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcards2,\r\n\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcards2.forEach(i => i.delete());\r\n\r\n\t\t\t\t\t\tvar cards = player.getExpansions(\"xingzhumrfz\");\r\n\t\t\t\t\t\tvar cardsx = cards.map(card => {\r\n\t\t\t\t\t\t\tvar cardx = ui.create.card();\r\n\t\t\t\t\t\t\tcardx.init(get.cardInfo(card));\r\n\t\t\t\t\t\t\tcardx._cardid = card.cardid;\r\n\t\t\t\t\t\t\treturn cardx;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tplayer.directgains(cardsx, null, \"xingzhumrfz_tag\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: function (player) {\r\n\t\t\t\t\t\tvar cards2 = player.getCards(\"s\", card => card.hasGaintag(\"xingzhumrfz_tag\"));\r\n\t\t\t\t\t\tif (player.isOnline2()) {\r\n\t\t\t\t\t\t\tplayer.send(\r\n\t\t\t\t\t\t\t\tfunction (cards, player) {\r\n\t\t\t\t\t\t\t\t\tcards.forEach(i => i.delete());\r\n\t\t\t\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcards2,\r\n\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcards2.forEach(i => i.delete());\r\n\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgroup: [\"xingzhumrfz_use\", \"xingzhumrfz_sync\"],\r\n\t\t\t\t},\r\n\t\t\t\tuse: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"useCardBefore\", \"respondBefore\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar cards = player.getCards(\"s\", card => card.hasGaintag(\"xingzhumrfz_tag\") && card._cardid);\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.cards &&\r\n\t\t\t\t\t\t\tevent.cards.some(card => {\r\n\t\t\t\t\t\t\t\treturn cards.includes(card);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar idList = player.getCards(\"s\", card => card.hasGaintag(\"xingzhumrfz_tag\")).map(i => i._cardid);\r\n\t\t\t\t\t\tvar cards = player.getExpansions(\"xingzhumrfz\");\r\n\t\t\t\t\t\tvar cards2 = [];\r\n\t\t\t\t\t\tfor (var card of trigger.cards) {\r\n\t\t\t\t\t\t\tvar cardx = cards.find(cardx => cardx.cardid == card._cardid);\r\n\t\t\t\t\t\t\tif (cardx) cards2.push(cardx);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar cards3 = trigger.cards.slice();\r\n\t\t\t\t\t\ttrigger.cards = cards2;\r\n\t\t\t\t\t\ttrigger.card.cards = cards2;\r\n\t\t\t\t\t\tif (player.isOnline2()) {\r\n\t\t\t\t\t\t\tplayer.send(\r\n\t\t\t\t\t\t\t\tfunction (cards, player) {\r\n\t\t\t\t\t\t\t\t\tcards.forEach(i => i.delete());\r\n\t\t\t\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcards3,\r\n\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcards3.forEach(i => i.delete());\r\n\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tsync: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"loseToDiscardpileEnd\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tlet cardsx = player.getCards(\"s\", card => card.hasGaintag(\"xingzhumrfz_tag\"));\r\n\t\t\t\t\t\tlet cards = player.getExpansions(\"xingzhumrfz\");\r\n\t\t\t\t\t\treturn cardsx.length !== cards.length;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet cardsx = player.getCards(\"s\", card => card.hasGaintag(\"xingzhumrfz_tag\"));\r\n\t\t\t\t\t\tlet cards = player.getExpansions(\"xingzhumrfz\");\r\n\t\t\t\t\t\tcardsx.forEach(i => {\r\n\t\t\t\t\t\t\tif (!cards.map(i => i.cardid).includes(i._cardid)) i.delete();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tui.updatehl();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhizhumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\tlet storage = player.storage.zhizhumrfz;\r\n\t\t\t\t\treturn `·本轮已使用的花色：${get.translation(storage)}`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tfirstDo: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (!player.storage.zhizhumrfz_check || player.storage.zhizhumrfz.includes(get.suit(event.card)) || get.position(event.card) !== \"d\")\r\n\t\t\t\t\treturn false;\r\n\t\t\t\tfor (let current of game.players) {\r\n\t\t\t\t\tif (current === player) continue;\r\n\t\t\t\t\tfor (let key in player.storage.zhizhumrfz_check) {\r\n\t\t\t\t\t\tif (event.card.cardid !== key) continue;\r\n\t\t\t\t\t\tlet arrs = player.storage.zhizhumrfz_check[key];\r\n\t\t\t\t\t\tfor (let arr of arrs) {\r\n\t\t\t\t\t\t\tif (arr[0] === current && arr[1] != current.countCards(\"h\")) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.storage.zhizhumrfz.push(get.suit(trigger.card));\r\n\t\t\t\tplayer.addToExpansion(trigger.cards, player, \"giveAuto\").gaintag.add(\"xingzhumrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhizhumrfz_check\", \"zhizhumrfz_remove\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tremove: {\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"roundStart\",\r\n\t\t\t\t\t\tplayer: \"useCardAfter\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (trigger.name === \"useCard\") {\r\n\t\t\t\t\t\t\tif (player.storage.zhizhumrfz_check.hasOwnProperty(trigger.card.cardid)) {\r\n\t\t\t\t\t\t\t\tdelete player.storage.zhizhumrfz_check[trigger.card.cardid];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tplayer.storage.zhizhumrfz = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tcheck: {\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCard\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (!player.storage.zhizhumrfz_check) player.storage.zhizhumrfz_check = {};\r\n\t\t\t\t\t\tfor (let current of game.players) {\r\n\t\t\t\t\t\t\tif (current === player) continue;\r\n\t\t\t\t\t\t\tif (!player.storage.zhizhumrfz_check[trigger.card.cardid]) player.storage.zhizhumrfz_check[trigger.card.cardid] = [];\r\n\t\t\t\t\t\t\tplayer.storage.zhizhumrfz_check[trigger.card.cardid].push([current, current.countCards(\"h\")]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 寻澜\r\n\t\ttanxunmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn !event.audioed;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.audioed = true;\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tviewHandcard: true,\r\n\t\t\t\tskillTagFilter(player, tag, arg) {\r\n\t\t\t\t\tif (player === arg || !player.inRange(arg) || _status.currentPhase !== player) return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tdongximrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.countCards(\"h\", card => player.canRecast(card)) > 0 &&\r\n\t\t\t\t\tgame.hasPlayer(\r\n\t\t\t\t\t\tcurrent =>\r\n\t\t\t\t\t\t\tcurrent != player &&\r\n\t\t\t\t\t\t\tplayer.inRange(current) &&\r\n\t\t\t\t\t\t\t!current.hasSkill(\"dongximrfz_ban\") &&\r\n\t\t\t\t\t\t\tcurrent.countCards(\"h\", card => current.canRecast(card)) > 0\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\ttarget != player &&\r\n\t\t\t\t\tplayer.inRange(target) &&\r\n\t\t\t\t\t!target.hasSkill(\"dongximrfz_ban\") &&\r\n\t\t\t\t\ttarget.countCards(\"h\", cardx => target.canRecast(cardx)) > 0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tfilterCard(card) {\r\n\t\t\t\treturn get.player().canRecast(card);\r\n\t\t\t},\r\n\t\t\tselectCard: [1, 2],\r\n\t\t\tcheck(card) {\r\n\t\t\t\treturn 1;\r\n\t\t\t},\r\n\t\t\tdiscard: false,\r\n\t\t\tlose: false,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst target = event.targets[0];\r\n\r\n\t\t\t\ttarget.addTempSkill(\"dongximrfz_ban\", { global: \"phaseUseEnd\" });\r\n\r\n\t\t\t\tlet cards1;\r\n\t\t\t\tif (_status.auto || !player.isUnderControl(true)) {\r\n\t\t\t\t\tlet cards = [];\r\n\r\n\t\t\t\t\tfor (let i of target.getCards(\"h\")) {\r\n\t\t\t\t\t\tif (get.attitude(player, target) > 0) {\r\n\t\t\t\t\t\t\tfor (let j of player.getCards(\"h\")) {\r\n\t\t\t\t\t\t\t\tif (get.suit(i) !== get.suit(j)) continue;\r\n\t\t\t\t\t\t\t\tcards.push(j);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfor (let j of player.getCards(\"h\")) {\r\n\t\t\t\t\t\t\t\tif (get.suit(i) === get.suit(j)) continue;\r\n\t\t\t\t\t\t\t\tcards.push(j);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (cards.length > 2) cards = cards.slice(0, 2);\r\n\t\t\t\t\tcards1 = cards.length > 0 ? cards : player.getCards(\"h\").randomGet();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcards1 = event.cards;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst { cards: cards2 } = await target\r\n\t\t\t\t\t.chooseCard([1, 2], true)\r\n\t\t\t\t\t.set(\"filterCard\", card => {\r\n\t\t\t\t\t\treturn get.event().playerx.canRecast(card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"prompt\", `【洞悉】:你可以重铸至多两张牌`)\r\n\t\t\t\t\t.set(\"prompt2\", get.prompt2(\"dongximrfz\"))\r\n\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\tlet target = get.event().target,\r\n\t\t\t\t\t\t\tplayer = get.event().playerx;\r\n\t\t\t\t\t\tif (target.countCards(\"h\") > 2 && ui.selected.cards.length > 0 && get.attitude(player, target) < 0) return -1;\r\n\t\t\t\t\t\treturn 8 - get.value(card, player);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"playerx\", target)\r\n\t\t\t\t\t.set(\"target\", player)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards2) return;\r\n\t\t\t\tlet bool = true;\r\n\t\t\t\touterLoop: for (let i = 0; i < cards1.length; i++) {\r\n\t\t\t\t\tfor (let j = 0; j < cards2.length; j++) {\r\n\t\t\t\t\t\tif (get.suit(cards1[i]) === get.suit(cards2[j])) {\r\n\t\t\t\t\t\t\tbool = false;\r\n\t\t\t\t\t\t\tbreak outerLoop;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tplayer.recast(cards1);\r\n\t\t\t\ttarget.recast(cards2);\r\n\t\t\t\tlet num = cards2.length;\r\n\t\t\t\tif (bool) {\r\n\t\t\t\t\tif (num < 1) return;\r\n\t\t\t\t\tif (target.countGainableCards(player, \"h\"))\r\n\t\t\t\t\t\tawait player\r\n\t\t\t\t\t\t\t.gainPlayerCard(\"h\", target, num, true)\r\n\t\t\t\t\t\t\t.set(\"target\", target)\r\n\t\t\t\t\t\t\t.set(\"complexSelect\", false)\r\n\t\t\t\t\t\t\t.set(\"ai\", lib.card.shunshou.ai.button);\r\n\t\t\t\t\tawait target.damage(num, player);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.disableSkill(\"dongximrfz\", [\"dongximrfz\"]);\r\n\t\t\t\t\tplayer.addTempSkill(\"dongximrfz_restore\", { player: \"phaseUseEnd\" });\r\n\t\t\t\t\tgame.log(player, \"的技能\", \"#g\" + get.translation(\"dongximrfz\"), \"失效了\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\trestore: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tonremove: function (player) {\r\n\t\t\t\t\t\tplayer.enableSkill(\"dongximrfz\");\r\n\t\t\t\t\t\tgame.log(player, \"恢复了技能\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 2,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\ttarget: -1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 诺威尔\r\n\t\tbutingmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tcomboSkill: true,\r\n\t\t\tmod: {\r\n\t\t\t\taiOrder(player, card, num) {\r\n\t\t\t\t\tif (typeof card == \"object\") {\r\n\t\t\t\t\t\tconst evt = player.getLastUsed(1);\r\n\t\t\t\t\t\tif (evt?.card && get.type2(evt.card) === get.type2(card)) {\r\n\t\t\t\t\t\t\treturn num + 10;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardAfter\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tlet evt = player.getLastUsed(1);\r\n\t\t\t\treturn evt && get.type2(evt.card) === get.type2(event.card);\r\n\t\t\t},\r\n\t\t\tfrequent: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.draw();\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.5,\r\n\t\t\t},\r\n\t\t},\r\n\t\tbuximrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"dyingAfter\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.hasUseTarget(\"tao\");\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.chooseUseTarget({ name: \"tao\" }, true);\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 濯尘芙蓉\r\n\t\tdichenmrfz: {\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = [\r\n\t\t\t\t\ttarget => {\r\n\t\t\t\t\t\ttarget.discard(target.getCards(\"j\"));\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttarget => {\r\n\t\t\t\t\t\ttarget.draw(2);\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttarget => {\r\n\t\t\t\t\t\ttarget.recover();\r\n\t\t\t\t\t\ttarget\r\n\t\t\t\t\t\t\t.when({ player: \"phaseEnd\" })\r\n\t\t\t\t\t\t\t.then(async (event, trigger, player) => {\r\n\t\t\t\t\t\t\t\tif (player.countCards(\"h\") < 5) player.gain(lib.card.ying.getYing(5 - player.countCards(\"h\")), \"gain2\");\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.assign({\r\n\t\t\t\t\t\t\t\tmark: true,\r\n\t\t\t\t\t\t\t\tintro: {\r\n\t\t\t\t\t\t\t\t\tname: \"涤尘\",\r\n\t\t\t\t\t\t\t\t\tcontent(_, player) {\r\n\t\t\t\t\t\t\t\t\t\treturn `在你的回合结束获得${Math.max(5 - player.countCards(\"h\"), 0)}张【影】`;\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tdichenmrfz: true,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.translation(\"涤尘\")\r\n\t\t\t\t\t\t\t.finish();\r\n\t\t\t\t\t\tlet skillList = target.getSkills();\r\n\t\t\t\t\t\tskillList.forEach(skill => {\r\n\t\t\t\t\t\t\tlet info = lib.skill[skill];\r\n\t\t\t\t\t\t\tif (info.dichenmrfz) {\r\n\t\t\t\t\t\t\t\ttarget.markSkill(skill);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttarget => {\r\n\t\t\t\t\t\ttarget.link(false);\r\n\t\t\t\t\t\ttarget.turnOver(false);\r\n\r\n\t\t\t\t\t\t// 并入上一项\r\n\t\t\t\t\t\tconst player = get.player();\r\n\t\t\t\t\t\tconst storage = player.storage.dichenmrfz;\r\n\t\t\t\t\t\tconst index = storage.length - 1;\r\n\t\t\t\t\t\tif (index <= 0) return;\r\n\r\n\t\t\t\t\t\tconst prevFunc = storage[index - 1];\r\n\t\t\t\t\t\tconst currentFunc = storage[index];\r\n\r\n\t\t\t\t\t\tstorage[index - 1] = target => {\r\n\t\t\t\t\t\t\tprevFunc(target);\r\n\t\t\t\t\t\t\tcurrentFunc(target);\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tstorage.splice(index, 1);\r\n\t\t\t\t\t},\r\n\t\t\t\t];\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tonremove: true,\r\n\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\tlet num = player.getAttackRange() - get.distance(player, target) + 1;\r\n\t\t\t\tlet prompt = num < player.storage.dichenmrfz.length ? `执行至第${num}项` : `执行所有项`;\r\n\t\t\t\tif (player.inRange(target) || target === player) target.showPrompt(prompt);\r\n\t\t\t\treturn player.inRange(target) || target === player;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet target = event.targets[0];\r\n\t\t\t\tlet storage = player.storage.dichenmrfz;\r\n\t\t\t\tlet num = Math.min(player.getAttackRange() - get.distance(player, target) + 1, 4);\r\n\t\t\t\tif (storage[0] && num > 0) storage[0](target);\r\n\t\t\t\tif (storage[1] && num > 1) storage[1](target);\r\n\t\t\t\tif (storage[2] && num > 2) storage[2](target);\r\n\t\t\t\tif (storage[3] && num > 3) storage[3](target);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 7.49,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\ttarget(player, target) {\r\n\t\t\t\t\t\tlet storage = player.storage.dichenmrfz;\r\n\t\t\t\t\t\tlet x = Math.min(player.getAttackRange() - get.distance(player, target) + 1, 4);\r\n\t\t\t\t\t\tlet num = 1;\r\n\t\t\t\t\t\tif (get.attitude2(target) < 0) return 0;\r\n\t\t\t\t\t\tif (x >= storage.length && storage.length > 2) num += 5;\r\n\t\t\t\t\t\tif (target.hp < 2) num += 3;\r\n\t\t\t\t\t\tif (target.countCards(\"h\") < 3) num += 1;\r\n\t\t\t\t\t\tif (target.isTurnedOver()) num += 5;\r\n\t\t\t\t\t\tif (target.isLinked()) num += 0.5;\r\n\t\t\t\t\t\tif (target.hasSkill(\"zhuoxinmrfz\")) num += 0.5;\r\n\t\t\t\t\t\treturn num;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhuoxinmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn current !== player && get.distance(player, current) < 2 && !!player.canUse({ name: \"tuixinzhifu\" }, current);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tprompt(event, player, name) {\r\n\t\t\t\treturn get.prompt(\"zhuoxinmrfz\");\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseToUse()\r\n\t\t\t\t\t.set(\"openskilldialog\", \"视为使用一张【推心置腹】\")\r\n\t\t\t\t\t.set(\"norestore\", true)\r\n\t\t\t\t\t.set(\"_backupevent\", \"zhuoxinmrfz_backup\")\r\n\t\t\t\t\t.set(\"custom\", {\r\n\t\t\t\t\t\tadd: {},\r\n\t\t\t\t\t\treplace: { window() {} },\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.backup(\"zhuoxinmrfz_backup\");\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tbackup: {\r\n\t\t\t\t\tfilterCard: () => false,\r\n\t\t\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\t\t\treturn target !== player && get.distance(player, target) < 2 && player.canUse({ name: \"tuixinzhifu\" }, target);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tselectTarget: -1,\r\n\t\t\t\t\tselectCard: -1,\r\n\t\t\t\t\tlog: false,\r\n\t\t\t\t\tviewAs: {\r\n\t\t\t\t\t\tname: \"tuixinzhifu\",\r\n\t\t\t\t\t\tisCard: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 新术士阿米娅\r\n\t\tnewtongganmrfz: {\r\n\t\t\taudio: \"tongganmrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseEnd\",\r\n\t\t\t},\r\n\t\t\tfindGainAndDiscardHistory() {\r\n\t\t\t\tlet result = {\r\n\t\t\t\t\tgain: [],\r\n\t\t\t\t\tdiscard: [],\r\n\t\t\t\t};\r\n\t\t\t\tgame.players.forEach(char => {\r\n\t\t\t\t\tchar.getHistory(\"gain\", evt => {\r\n\t\t\t\t\t\tif (evt.name === \"gain\") result.gain.add(char);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tchar.getHistory(\"lose\", evt => {\r\n\t\t\t\t\t\tif (evt.type === \"discard\") result.discard.add(char);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\treturn result;\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tlet result = lib.skill.newtongganmrfz.findGainAndDiscardHistory();\r\n\t\t\t\treturn (result.gain.length > 0 || result.discard.length > 0) && event.player !== player;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet { gain, discard } = lib.skill.newtongganmrfz.findGainAndDiscardHistory();\r\n\t\t\t\tawait player.draw(gain.length);\r\n\t\t\t\tif (discard.length) player.chooseToDiscard(discard.length, true, `【同感】:请弃置${discard.length}张牌`, \"he\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tshijiemrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tcanBeDiscarded(card, target, player) {\r\n\t\t\t\t\tif (get.position(card) === \"h\" && player.countCards(\"h\") <= 5) return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"gainBegin\", \"loseBegin\"],\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.name === \"gain\"\r\n\t\t\t\t\t? player.countCards(\"h\") >= 10 && event.getParent().name === \"draw\"\r\n\t\t\t\t\t: player.countCards(\"h\") <= 5 && event.type === \"discard\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (event.name === \"gain\") {\r\n\t\t\t\t\tlet cards = trigger.getParent().result;\r\n\t\t\t\t\tgame.cardsDiscard(cards);\r\n\t\t\t\t\tgame.log(player, \"取消了此次摸牌\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgame.log(player, \"取消了此次弃牌\");\r\n\t\t\t\t}\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 新近卫阿米娅\r\n\t\tchenxianmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseDrawBegin2\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn game.countPlayer(current => current.getDamagedHp() > 0) > 0 && !event.numFixed;\r\n\t\t\t},\r\n\t\t\tprompt() {\r\n\t\t\t\treturn `【沉弦】:是否多摸${game.countPlayer(current => current.getDamagedHp() > 0)}张牌,然后其中每包含一张【万箭齐发】、【杀】或【酒】，你便弃置一张牌？`;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet num = game.countPlayer(current => current.getDamagedHp() > 0);\r\n\t\t\t\ttrigger.num += num;\r\n\t\t\t\tplayer.when({ player: \"phaseDrawAfter\" }).then(async (event, trigger, player) => {\r\n\t\t\t\t\tlet cards = trigger.cards;\r\n\t\t\t\t\tlet num = cards.filter(card => {\r\n\t\t\t\t\t\treturn card.name === \"wanjian\" || card.name === \"sha\" || card.name === \"jiu\";\r\n\t\t\t\t\t}).length;\r\n\t\t\t\t\tif (num > 0) player.chooseToDiscard(\"he\", true, `【沉弦】:请弃置${get.cnNumber(num)}张牌`, num);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 2,\r\n\t\t\t},\r\n\t\t},\r\n\t\tbenyemrfz: {\r\n\t\t\taudio: \"amy_qingyanmrfz\",\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn current !== player && current.countCards(\"h\") > 0;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\treturn target !== player && target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet target = event.targets[0];\r\n\t\t\t\tconst { cards } = await player\r\n\t\t\t\t\t.choosePlayerCard(target, \"h\")\r\n\t\t\t\t\t.set(\"prompt\", `【奔夜】:你可以使用其中一张【杀】或【顺手牵羊】`)\r\n\t\t\t\t\t.set(\"visible\", true)\r\n\t\t\t\t\t.set(\"filterButton\", button => {\r\n\t\t\t\t\t\tlet link = button.link;\r\n\t\t\t\t\t\treturn link.name === \"sha\" || link.name === \"shunshou\";\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\tlet link = button.link;\r\n\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\tlet max = 0;\r\n\t\t\t\t\t\tgame.players.forEach(char => {\r\n\t\t\t\t\t\t\tif (player.canUse(link, char)) {\r\n\t\t\t\t\t\t\t\tmax = Math.max(max, get.effect(char, link, player, player));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn max;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\tif (player.hasUseTarget(cards[0])) {\r\n\t\t\t\t\tawait player.$gain2(cards[0], false);\r\n\t\t\t\t\tplayer.chooseUseTarget(cards[0]).set(\"addCount\", false);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 3,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\ttarget(player, target) {\r\n\t\t\t\t\t\tlet att = get.attitude(player, target);\r\n\t\t\t\t\t\treturn att > 0 ? 0 : -1 * target.countCards(\"h\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tnewjueyingmrfz: {\r\n\t\t\taudio: \"yingxiaomrfz\",\r\n\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationColor: \"red\",\r\n\t\t\tmark: true,\r\n\t\t\tunique: true,\r\n\t\t\tlimited: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tlet color = new Set(\r\n\t\t\t\t\tget\r\n\t\t\t\t\t\t.discarded()\r\n\t\t\t\t\t\t.filter(card => card.name === \"sha\")\r\n\t\t\t\t\t\t.map(card => get.color(card))\r\n\t\t\t\t);\r\n\t\t\t\tif (color.size < 2) return false;\r\n\t\t\t\treturn !player.storage.newjueyingmrfz;\r\n\t\t\t},\r\n\t\t\tinit: (player, skill) => (player.storage[skill] = false),\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.awakenSkill(\"newjueyingmrfz\");\r\n\t\t\t\tplayer.storage.newjueyingmrfz = true;\r\n\r\n\t\t\t\tlet skills = player.getSkills(null, false, undefined).filter(skill => lib.translate[skill + \"_info\"]);\r\n\t\t\t\tlet awakenedSkills = player.awakenedSkills.filter(skill => lib.translate[skill + \"_info\"]);\r\n\t\t\t\tskills.add(...awakenedSkills);\r\n\t\t\t\tlet cards = [];\r\n\t\t\t\tlet names = {};\r\n\t\t\t\tlib.inpile.forEach(i => {\r\n\t\t\t\t\tnames[i] = get.translation(i);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tlet pattern = new RegExp(Object.values(names).join(\"|\"), \"g\");\r\n\t\t\t\tskills.forEach(skill => {\r\n\t\t\t\t\tlet translate = lib.translate[skill + \"_info\"];\r\n\t\t\t\t\tlet matches = translate.match(pattern);\r\n\t\t\t\t\tif (matches) {\r\n\t\t\t\t\t\tlet arr = matches.map(match => {\r\n\t\t\t\t\t\t\treturn Object.keys(names).find(key => names[key] === match);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (arr.length > 0) {\r\n\t\t\t\t\t\t\tcards.push(...arr);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\twhile (cards.length) {\r\n\t\t\t\t\tlet card = { name: cards.shift(), isCard: true };\r\n\t\t\t\t\tif (player.hasUseTarget(card)) {\r\n\t\t\t\t\t\tawait player.chooseUseTarget(card).set(\"prompt2\", `待使用：${get.translation(cards)}`);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n};\r\n"],"names":["target","cards","player","id","cards2","num","event","evt","i","card","trigger","name","view","index","list","top","value","bottom","moved","next","suffixs","skills","skill","info","control","matrix","suits","showCards","str","pos","subtype","cardx"],"mappings":"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"}