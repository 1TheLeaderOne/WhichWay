{"version":3,"file":"epic1.js","sources":["../../../../../../../../packages/extension/WhichWay/src/character/packs/epic/epic1.js"],"sourcesContent":["import { lib, game, ui, get, ai, _status } from \"noname\";\r\n\r\n/**\r\n * 五星武将的第一部分\r\n */\r\n/**\r\n * @type { WhichWayCharacterPack }\r\n */\r\nexport default {\r\n\tcharacter: {\r\n\t\tfulankamrfz: [\"female\", \"gemrfz\", 3, [\"jifengmrfz\", \"xiqiaomrfz\"], []],\r\n\t\txingjimrfz: [\"female\", \"gemrfz\", 4, [\"tianyimrfz\", \"huijianmrfz\", \"bingmingmrfz\"], []],\r\n\t\txingyuanmrfz: [\"female\", \"lymrfz\", 4, [\"daoliumrfz\", \"gewumrfz\"], []],\r\n\t\tzhanchemrfz: [\"male\", \"othermrfz\", \"4/4/2\", [\"jiqiangmrfz\", \"qingxiemrfz\"], []],\r\n\t\tshanjimrfz: [\"male\", \"othermrfz\", 4, [\"shandunmrfz\", \"xuanmumrfz\", \"chuandunmrfz\"], []],\r\n\t\tshuanghuamrfz: [\"female\", \"othermrfz\", 3, [\"tadianmrfz\", \"xinjimrfz\"], []],\r\n\t\tbohuimrfz: [\"female\", \"samimrfz\", 4, [\"shehunmrfz\", \"yirenmrfz\"], []],\r\n\t\tbaimianxiaomrfz: [\"female\", \"lymrfz\", 3, [\"jinaomrfz\", \"wutaimrfz\"], []],\r\n\t\tcimeimrfz: [\"female\", \"weimrfz\", 3, [\"huabumrfz\", \"shixinmrfz\"], []],\r\n\t\thongmrfz: [\"female\", \"luomrfz\", 4, [\"qunlangmrfz\", \"cigumrfz\", \"qingchumrfz\"], [\"hiddenSkill\"]],\r\n\t\tdekesasimrfz: [\"female\", \"qimrfz\", 4, [\"sudimrfz\", \"jianyumrfz\"], []],\r\n\t\tbaijinmrfz: [\"female\", \"kamrfz\", 3, [\"xujimrfz\", \"shiyumrfz\"], []],\r\n\t\tyintuoluomrfz: [\"female\", \"weimrfz\", 4, [\"suijiamrfz\", \"huquanmrfz\"], []],\r\n\t\twenmimrfz: [\"female\", \"leimrfz\", 3, [\"baiweimrfz\", \"nuanxiangmrfz\"], []],\r\n\t\tmeiermrfz: [\"female\", \"lymrfz\", 3, [\"shuitamrfz\"], []],\r\n\t\tlindongmrfz: [\"female\", \"wumrfz\", 4, [\"xianlingmrfz\", \"dongjiangmrfz\"], []],\r\n\t\tyunxingmrfz: [\"female\", \"luomrfz\", 4, [\"yxliumingmrfz\", \"dingyuanmrfz\"], []],\r\n\t\tyumaobimrfz: [\"female\", \"bomrfz\", 4, [\"tiaojiumrfz\", \"rujingmrfz\"], []],\r\n\t\tailisimrfz: [\"female\", \"weimrfz\", 3, [\"rumianmrfz\", \"alsmengxiangmrfz\"], []],\r\n\t\ttianhuomrfz: [\"female\", \"weimrfz\", 3, [\"zhuihuomrfz\", \"yihuomrfz\"], []],\r\n\t\tlinguangmrfz: [\"female\", \"shimrfz\", \"3/4/3\", [\"anranmrfz\", \"huchimrfz\", \"chongyaomrfz\"], []],\r\n\t\thaimomrfz: [\"female\", \"yimrfz\", 4, [\"xunchaomrfz\", \"paoyingmrfz\"], []],\r\n\t\txiaomanmrfz: [\"female\", \"yanmrfz\", 4, [\"mushoumrfz\"], []],\r\n\t\twanqingmrfz: [\"male\", \"yanmrfz\", 4, [\"guantianmrfz\", \"yingfengmrfz\"], []],\r\n\t\tgelaokesimrfz: [\"female\", \"yimrfz\", 4, [\"cichongmrfz\", \"ganraomrfz\"], []],\r\n\t\thaidimrfz: [\"female\", \"weimrfz\", 3, [\"anxinmrfz\", \"gongchoumrfz\", \"yinshimrfz\"], []],\r\n\t\tyaxinmrfz: [\"female\", \"xiemrfz\", 4, [\"lingdingmrfz\", \"yabengmrfz\"], []],\r\n\t\tchuxuemrfz: [\"female\", \"xiemrfz\", 3, [\"shengnvmrfz\", \"shenshemrfz\"], []],\r\n\t\tshixiemrfz: [\"female\", \"samrfz\", 3, [\"qianzongmrfz\", \"xiedumrfz\", \"lijimrfz\"], [\"hiddenSkill\"]],\r\n\t\thongsunmrfz: [\"female\", \"samrfz\", 4, [\"chihenmrfz\", \"haomingmrfz\"], []],\r\n\t\txiyinmrfz: [\"female\", \"samrfz\", 3, [\"sheyingmrfz\", \"chaozaimrfz\"], []],\r\n\t\tyemomrfz: [\"female\", \"weimrfz\", 3, [\"biaolimrfz\", \"ymkongwomrfz\"], []],\r\n\t\tjingzhemrfz: [\"female\", \"yanmrfz\", 3, [\"chunleimrfz\", \"zheqimrfz\"], []],\r\n\t\tlongshelanmrfz: [\"male\", \"bomrfz\", 4, [\"tiaojiumrfz\", \"pianfengmrfz\"], []],\r\n\t\tspamiyamrfz: [\"female\", \"luomrfz\", 4, [\"chenxianmrfz\", \"benyemrfz\", \"newjueyingmrfz\"], []],\r\n\t\tamiyamrfz: [\"female\", \"luomrfz\", 3, [\"newtongganmrfz\", \"shijiemrfz\", \"qinghemrfz\"], [\"zhu\"]],\r\n\t\tdocmrfz: [\"male\", \"othermrfz\", 4, [\"yizhemrfz\", \"zhulimrfz\"], []],\r\n\t\t// innamrfz: ['female', 'othermrfz', 4, ['shuangzimrfz'], []],\r\n\t\tlinshimrfz: [\"female\", \"samimrfz\", 3, [\"jiangtumrfz\", \"jieshimrfz\"], []],\r\n\t\tmedical_amiyamrfz: [\"female\", \"luomrfz\", 3, [\"tongqingmrfz\", \"cibeimrfz\"], []],\r\n\t\tspfenmrfz: [\"female\", \"luomrfz\", 4, [\"xiaozhimrfz\", \"zhishoumrfz\"], []],\r\n\t\thainimrfz: [\"female\", \"a_groupmrfz\", 3, [\"jingchaomrfz\", \"cehuimrfz\"], []],\r\n\t\tshenxunmrfz: [\"female\", \"a_groupmrfz\", 5, [\"yuchaomrfz\", \"yanhuimrfz\"], []],\r\n\t\tmingjiaomrfz: [\"female\", \"luomrfz\", 3, [\"suozemrfz\", \"youyimrfz\"], []],\r\n\t\tdaifeienmrfz: [\"female\", \"weimrfz\", 3, [\"zhuofengmrfz\", \"qianggongmrfz\"], []],\r\n\t\txirenmrfz: [\"male\", \"gemrfz\", 4, [\"suximrfz\", \"sanzhongmrfz\"], []],\r\n\t\tsuocaomrfz: [\"female\", \"samrfz\", 3, [\"lanjuanmrfz\", \"xinglumrfz\"], []],\r\n\t\tlaiousimrfz: [\"male\", \"othermrfz\", 4, [\"shijianmrfz\", \"shimomrfz\"], []],\r\n\t\tsenximrfz: [\"male\", \"othermrfz\", 4, [\"micaimrfz\", \"beicaimrfz\", \"pengcaimrfz\"], []],\r\n\t\tqierchakemrfz: [\"male\", \"othermrfz\", 3, [\"tangongmrfz\", \"ruiganmrfz\"], []],\r\n\t\tkaiselinmrfz: [\"female\", \"weimrfz\", 3, [\"ksl_zhuzhimrfz\", \"duantiemrfz\"], []],\r\n\t\tbobumrfz: [\"male\", \"gemrfz\", 4, [\"qingtingmrfz\", \"qingtanmrfz\"], []],\r\n\t\tfeilaimrfz: [\"female\", \"samrfz\", 5, [\"qianxiumrfz\", \"mingzhoumrfz\"], []],\r\n\t\tcaidumrfz: [\"male\", \"xumrfz\", 4, [\"caiyimrfz\", \"mingjiangmrfz\"], []],\r\n\t\ttekenuomrfz: [\"female\", \"bomrfz\", 4, [\"suoumrfz\"], []],\r\n\t\tguiyanmrfz: [\"female\", \"yimrfz\", 3, [\"qiyimrfz\", \"guiyaomrfz\", \"xiadumrfz\"], []],\r\n\t\txingzhumrfz: [\"female\", \"yanmrfz\", 3, [\"xingzhumrfz\", \"zhizhumrfz\"], []],\r\n\t\txunlanmrfz: [\"female\", \"gemrfz\", 4, [\"tanxunmrfz\", \"dongximrfz\"], []],\r\n\t\tnuoweiermrfz: [\"male\", \"weimrfz\", 3, [\"butingmrfz\", \"buximrfz\"], []],\r\n\t\tspfurongmrfz: [\"female\", \"luomrfz\", 3, [\"dichenmrfz\", \"zhuoxinmrfz\"], []],\r\n\t\tanzhelamrfz: [\"female\", \"liemrfz\", 3, [\"jianmomrfz\", \"zhishemrfz\", \"ruijuemrfz\", \"tongmaimrfz\"], [\"clan:深海猎人\"]],\r\n\r\n\t\t//————测试————//\r\n\t\t//ceshisjzx:['female','shen',5,['diymengxian','diyfujing','diyhesheng'],[]],\r\n\t},\r\n\tskill: {\r\n\t\t// 安哲拉\r\n\t\tzhishemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0 && game.hasPlayer(current => current.countCards(\"h\") > 0 && current !== player);\r\n\t\t\t},\r\n\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\treturn target !== player && target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tfilterCard: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { targets, cards } = event;\r\n\t\t\t\tlet target = targets[0];\r\n\t\t\t\tconst {cards:card2} = await player.discardPlayerCard(\"h\", target, true).set(\"target\", target).set(\"complexSelect\", false).set(\"ai\", lib.card.guohe.ai.button).forResult();\r\n\t\t\t\tif (card2) player.draw(new Set([].concat(cards, card2).map(i => get.type2(i, player))).size);\r\n\t\t\t\telse player.draw();\r\n\t\t\t\tif (target.countCards(\"h\") === 0 && card2) player.getStat(\"skill\").zhishemrfz = 0;\r\n\t\t\t},\r\n\t\t},\r\n\t\tjianmomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tmod: {\r\n\t\t\t\ttargetEnabled(card) {\r\n\t\t\t\t\tif (get.type(card) == \"trick\" || get.type(card) == \"delay\") return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfirstDo: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (event.player == player) return false;\r\n\t\t\t\tif (get.color(event.card) != \"black\" || get.type(event.card) != \"trick\") return false;\r\n\t\t\t\tvar info = lib.card[event.card.name];\r\n\t\t\t\treturn info && info.selectTarget && info.selectTarget == -1 && !info.toself;\r\n\t\t\t},\r\n\t\t\tcontent() {},\r\n\t\t},\r\n\t\truijuemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"loseAfter\", \"gainAfter\"],\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (player.countCards(\"he\") < 1) return false;\r\n\t\t\t\tif (event.name === \"lose\") return event.type === \"discard\" && event.getl(player).cards2.length > 0;\r\n\t\t\t\telse {\r\n\t\t\t\t\tconst evt = event.getParent(\"phaseDraw\");\r\n\t\t\t\t\tif (evt?.player == player) return false;\r\n\t\t\t\t\treturn event.getg(player).length > 0 && player.getCards(\"h\").some(card => player.hasUseTarget(card, false));\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tif (trigger.name === \"lose\") {\r\n\t\t\t\t\tevent.result = await player\r\n\t\t\t\t\t\t.chooseCard(\"he\", [1, player.countCards(\"he\")])\r\n\t\t\t\t\t\t.set(\"prompt\", `【锐觉】:你可以重铸任意张牌`)\r\n\t\t\t\t\t\t.set(\"ai\", card => get.value(card, player) < 7)\r\n\t\t\t\t\t\t.set(\"filterCard\", (card, player) => player.canRecast(card))\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tevent.result = await player\r\n\t\t\t\t\t\t.chooseBool()\r\n\t\t\t\t\t\t.set(\"prompt\", `【锐觉】:你可以使用一张牌（无距离限制且不计入次数限制）`)\r\n\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\t\treturn player.getCards(\"h\").some(card => {\r\n\t\t\t\t\t\t\t\treturn player.hasUseTarget(card, false) && game.hasPlayer(char => get.effect(char, card, player, player) > 0);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (trigger.name === \"lose\") {\r\n\t\t\t\t\tplayer.recast(event.cards);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.chooseToUse().set(\"prompt\", `【锐觉】:请使用一张手牌`).set(\"addCount\", false).set(\"nodistance\", true);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\ttargetInRange(card, player, target, now) {\r\n\t\t\t\t\tlet event = get.event();\r\n\t\t\t\t\tif (event.nodistance) return true;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//剑兔 近卫阿米娅\r\n\t\tamy_qingyanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseUseEnd\" },\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar str = \"\";\r\n\t\t\t\t\tvar list = [player.hasSkill(\"amy_qingyanmrfz_damage\"), player.hasSkill(\"amy_qingyanmrfz_time\"), player.hasSkill(\"amy_qingyanmrfz_direct\")];\r\n\t\t\t\t\tvar text = [\"·你每回合使用的第一张【杀】的伤害基数+1</br>\", \"·你使用【杀】的次数+1</br>\", \"·你使用的【杀】需要两张【闪】才可抵消</br>\"];\r\n\t\t\t\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\t\t\t\tif (list[i]) str = str + text[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn str;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.amy_qingyanmrfz_time || !player.storage.amy_qingyanmrfz_damage || !player.storage.amy_qingyanmrfz_direct;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\treturn current != player && get.attitude(current, player) > 2;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseTarget(\"【青焱】：请选择一名其他角色\", true, function (card, player, target) {\r\n\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\tvar att = get.attitude(_status.event.player, target);\r\n\t\t\t\t\t\t//if(game.hasPlayer(current=>{current!=player&&current.hasSkill('shengcaimrfz')&&get.attitude(player,current)>2})) return game.findPlayer(current=>{current!=player&&current.hasSkill('shengcaimrfz')});\r\n\t\t\t\t\t\treturn att > 2;\r\n\t\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar target = result.targets[0],\r\n\t\t\t\t\t\tlist = [];\r\n\t\t\t\t\tevent.target = target;\r\n\t\t\t\t\tif (!player.storage.amy_qingyanmrfz_time) list.push(\"你使用【杀】的次数+1\");\r\n\t\t\t\t\tif (!player.storage.amy_qingyanmrfz_damage) list.push(\"你每回合使用的第一张【杀】的伤害基数+1\");\r\n\t\t\t\t\tif (!player.storage.amy_qingyanmrfz_direct) list.push(\"你使用的【杀】需要两张【闪】才可抵消\");\r\n\t\t\t\t\tif (list.length == 1) {\r\n\t\t\t\t\t\tif (!player.storage.amy_qingyanmrfz_time) {\r\n\t\t\t\t\t\t\tplayer.storage.amy_qingyanmrfz_time = true;\r\n\t\t\t\t\t\t\ttarget.addSkill(\"amy_qingyanmrfz_time\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!player.storage.amy_qingyanmrfz_damage) {\r\n\t\t\t\t\t\t\tplayer.storage.amy_qingyanmrfz_damage = true;\r\n\t\t\t\t\t\t\ttarget.addSkill(\"amy_qingyanmrfz_damage\", false);\r\n\t\t\t\t\t\t\ttarget.addMark(\"amy_qingyanmrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!player.storage.amy_qingyanmrfz_direct) {\r\n\t\t\t\t\t\t\tplayer.storage.amy_qingyanmrfz_direct = true;\r\n\t\t\t\t\t\t\ttarget.addSkill(\"amy_qingyanmrfz_direct\", false);\r\n\t\t\t\t\t\t\ttarget.addMark(\"amy_qingyanmrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t\t.set(\"prompt\", \"请选择删除一句话并令\" + get.translation(target) + \"获得该效果\")\r\n\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\treturn [0, 1, 2].randomGet();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} else event.finish();\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (result.control == \"你使用【杀】的次数+1\") {\r\n\t\t\t\t\tevent.target.addMark(\"amy_qingyanmrfz\", false);\r\n\t\t\t\t\tplayer.storage.amy_qingyanmrfz_time = true;\r\n\t\t\t\t\tevent.target.addSkill(\"amy_qingyanmrfz_time\");\r\n\t\t\t\t}\r\n\t\t\t\tif (result.control == \"你每回合使用的第一张【杀】的伤害基数+1\") {\r\n\t\t\t\t\tevent.target.addMark(\"amy_qingyanmrfz\", false);\r\n\t\t\t\t\tplayer.storage.amy_qingyanmrfz_damage = true;\r\n\t\t\t\t\tevent.target.addSkill(\"amy_qingyanmrfz_damage\");\r\n\t\t\t\t}\r\n\t\t\t\tif (result.control == \"你使用的【杀】需要两张【闪】才可抵消\") {\r\n\t\t\t\t\tevent.target.addMark(\"amy_qingyanmrfz\", false);\r\n\t\t\t\t\tplayer.storage.amy_qingyanmrfz_direct = true;\r\n\t\t\t\t\tevent.target.addSkill(\"amy_qingyanmrfz_direct\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tthreaten: 1.1,\r\n\t\t\t},\r\n\t\t\tgroup: [\"amy_qingyanmrfz_damage\", \"amy_qingyanmrfz_time\", \"amy_qingyanmrfz_direct\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdirect: {\r\n\t\t\t\t\taudio: \"amy_qingyanmrfz\",\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.storage.amy_qingyanmrfz_direct == true && player.hasSkill(\"amy_qingyanmrfz_mark\")) return false;\r\n\t\t\t\t\t\treturn event.card.name == \"sha\" && !event.getParent().directHit.includes(event.target) && get.distance(player, event.target) <= 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlogTarget: \"target\",\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar id = trigger.target.playerid;\r\n\t\t\t\t\t\tvar map = trigger.getParent().customArgs;\r\n\t\t\t\t\t\tif (!map[id]) map[id] = {};\r\n\t\t\t\t\t\tif (typeof map[id].shanRequired == \"number\") {\r\n\t\t\t\t\t\t\tmap[id].shanRequired++;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmap[id].shanRequired = 2;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t\t\tif (arg.card.name != \"sha\" || arg.target.countCards(\"h\", \"shan\") > 1 || get.distance(player, arg.target) > 1) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgroup: \"amy_qingyanmrfz_remove2\",\r\n\t\t\t\t},\r\n\t\t\t\tremove2: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn !player.hasSkill(\"amy_qingyanmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeSkill(\"amy_qingyanmrfz_direct\");\r\n\t\t\t\t\t\tplayer.removeMark(\"amy_qingyanmrfz\", false);\r\n\t\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\t\tif (current.hasSkill(\"amy_qingyanmrfz\")) current.storage.amy_qingyanmrfz_direct = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttime: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn !player.hasSkill(\"amy_qingyanmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeMark(\"amy_qingyanmrfz\", false);\r\n\t\t\t\t\t\tplayer.removeSkill(\"amy_qingyanmrfz_time\");\r\n\t\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\t\tif (current.hasSkill(\"amy_qingyanmrfz\")) current.storage.amy_qingyanmrfz_time = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\" && (!player.storage.amy_qingyanmrfz || player.hasMark(\"amy_qingyanmrfz\"))) return num + 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\taudio: \"amy_qingyanmrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.storage.amy_qingyanmrfz_damage && player.hasSkill(\"amy_qingyanmrfz_mark\")) return false;\r\n\t\t\t\t\t\tif (player.hasSkill(\"amy_qingyanmrfz_mark\")) return false;\r\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (!trigger.baseDamage) trigger.baseDamage = 1;\r\n\t\t\t\t\t\ttrigger.baseDamage++;\r\n\t\t\t\t\t\tplayer.addTempSkill(\"amy_qingyanmrfz_mark\", \"phaseEnd\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tdamageBonus: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgroup: \"amy_qingyanmrfz_remove1\",\r\n\t\t\t\t},\r\n\t\t\t\tremove1: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn !player.hasSkill(\"amy_qingyanmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.removeSkill(\"amy_qingyanmrfz_damage\");\r\n\t\t\t\t\t\tplayer.removeMark(\"amy_qingyanmrfz\", false);\r\n\t\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\t\tif (current.hasSkill(\"amy_qingyanmrfz\")) current.storage.amy_qingyanmrfz_damage = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tmark: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tyingxiaomrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tif (player.storage.yingxiaomrfz) return \"已发动\";\r\n\t\t\t\t\tif (!player.storage.yingxiaomrfz) {\r\n\t\t\t\t\t\tif (player.countMark(\"yingxiaomrfz_mark\") < 5) return \"未发动（不满足发动条件）</br>已累计使用\" + player.countMark(\"yingxiaomrfz_mark\") + \"张【杀】\";\r\n\t\t\t\t\t\telse return \"未发动（已满足发动条件）\";\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tlimited: true,\r\n\t\t\tanimationStr: \"影宵\",\r\n\t\t\tanimationColor: \"gold\",\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\treturn current != player && get.attitude(current, player) < 0 && player.inRange(current);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.yingxiaomrfz = false;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.yingxiaomrfz && player.countMark(\"yingxiaomrfz_mark\") >= 5;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.storage.yingxiaomrfz = true;\r\n\t\t\t\tplayer.awakenSkill(event.name);\r\n\t\t\t\tevent.num = 0;\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (event.num < 3) {\r\n\t\t\t\t\tif (event.num == 2) {\r\n\t\t\t\t\t\tplayer.addTempSkill(\"yingxiaomrfz_damage\", \"useCardAfter\");\r\n\t\t\t\t\t\tplayer.addTempSkill(\"yingxiaomrfz_wushi\", \"useCardAfter\");\r\n\t\t\t\t\t\tplayer.addTempSkill(\"yingxiaomrfz_total\", \"useCardAfter\");\r\n\t\t\t\t\t\tplayer.chooseUseTarget(\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\t\t\tisCard: true,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\"请选择【杀】的目标\",\r\n\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tplayer.addTempSkill(\"yingxiaomrfz_total\", \"useCardAfter\");\r\n\t\t\t\t\t\tplayer.chooseUseTarget(\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\t\t\tnature: event.num == 0 ? \"thunder\" : \"fire\",\r\n\t\t\t\t\t\t\t\tisCard: true,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\"请选择\" + (event.num == 0 ? \"雷【杀】\" : \"火【杀】\") + \"的目标(下一张使用的牌为：\" + (event.num == 0 ? \"火【杀】\" : \"伤害基数为翻倍且无视防具的【杀】\") + \")\",\r\n\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tplayer.logSkill(\"yingxiaomrfz\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tevent.num++;\r\n\t\t\t\t\tif (event.num < 3) event.redo();\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tplayer.draw(player.countMark(\"yingxiaomrfz_total\"));\r\n\t\t\t\tplayer.addSkill(\"yingxiaomrfz_handlit\");\r\n\t\t\t\tplayer.addSkill(\"yingxiaomrfz_round2\");\r\n\t\t\t},\r\n\t\t\tgroup: \"yingxiaomrfz_time\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tmark: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\ttime: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\" && player.countMark(\"yingxiaomrfz_mark\") < 5;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addMark(\"yingxiaomrfz_mark\", false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard2\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (!trigger.baseDamage) trigger.baseDamage = 1;\r\n\t\t\t\t\t\ttrigger.baseDamage += 2;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tdamageBonus: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\twushi: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event) {\r\n\t\t\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tlogTarget: \"target\",\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.target.addTempSkill(\"qinggang2\");\r\n\t\t\t\t\t\ttrigger.target.storage.qinggang2.add(trigger.card);\r\n\t\t\t\t\t\ttrigger.target.markSkill(\"qinggang2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tunequip_ai: true,\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t\t\tif (arg && arg.name == \"sha\") return true;\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttotal: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addMark(\"yingxiaomrfz_total\", trigger.num, false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\thandlit: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn num + player.countMark(\"yingxiaomrfz_total\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tround1: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"roundStart\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addMark(\"yingxiaomrfz_round1\", false);\r\n\t\t\t\t\t\tif (player.countMark(\"yingxiaomrfz_round1\") > 2) {\r\n\t\t\t\t\t\t\tplayer.removeSkill(\"yingxiaomrfz_round2\");\r\n\t\t\t\t\t\t\tplayer.removeMark(\"yingxiaomrfz_round1\", player.countMark(\"yingxiaomrfz_round1\"), false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tround2: {\r\n\t\t\t\t\taudio: \"yingxiaomrfz\",\r\n\t\t\t\t\ttrigger: { source: \"damageBefore\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\t\t\treturn \"你造成的伤害均视为体力流失</br>效果剩余时间：\" + (2 - player.countMark(\"yingxiaomrfz_round1\")) + \"轮\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck: function () {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t\ttrigger.player.loseHp(trigger.num);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tjueqing: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgroup: \"yingxiaomrfz_round1\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//芙兰卡\r\n\t\tjifengmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCard2\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.targets && event.targets.length > 1) return false;\r\n\t\t\t\treturn event.cards && event.card.name == \"sha\";\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.targets[0]) < 0;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\tvar target = event.targets[0],\r\n\t\t\t\t\tlist = [];\r\n\t\t\t\tif (!target.hasEmptySlot(2)) list.push(\"无视防具\");\r\n\t\t\t\tif (target.countCards(\"h\") > 0) list.push(\"此【杀】需要两张闪才可抵消\");\r\n\t\t\t\tif (target.hujia > 0) list.push(\"无视护甲\");\r\n\t\t\t\treturn \"【极锋】:是否对\" + get.translation(target) + \"发动‘极锋’？（\" + list + \"）\";\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar target = trigger.targets[0],\r\n\t\t\t\t\tnum = 0;\r\n\t\t\t\tif (!target.hasEmptySlot(2)) {\r\n\t\t\t\t\tnum++;\r\n\t\t\t\t\ttarget.addTempSkill(\"qinggang2\");\r\n\t\t\t\t\ttarget.storage.qinggang2.add(trigger.card);\r\n\t\t\t\t\ttarget.markSkill(\"qinggang2\");\r\n\t\t\t\t}\r\n\t\t\t\tif (target.countCards(\"h\") > 0) {\r\n\t\t\t\t\tnum++;\r\n\t\t\t\t\tplayer.addTempSkill(\"jifengmrfz_sha\");\r\n\t\t\t\t\tplayer.storage.jifengmrfz = {\r\n\t\t\t\t\t\tcard: trigger.card,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tif (target.hujia > 0) {\r\n\t\t\t\t\ttarget.addTempSkill(\"jifengmrfz_ighujia\");\r\n\t\t\t\t\ttarget.storage.jifengmrfz_ighujia.add(trigger.card);\r\n\t\t\t\t\ttarget.markSkill(\"jifengmrfz_ighujia\");\r\n\t\t\t\t\tnum++;\r\n\t\t\t\t}\r\n\t\t\t\tif (!player.hasSkill(\"jifengmrfz_used\")) {\r\n\t\t\t\t\tplayer.addTempSkill(\"jifengmrfz_used\", \"phaseEnd\");\r\n\t\t\t\t\tplayer.draw(3 - num);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tsha: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar info = player.storage.jifengmrfz;\r\n\t\t\t\t\t\tif (!event.card || event.card != info.card) return false;\r\n\t\t\t\t\t\treturn event.card.name == \"sha\" && !event.getParent().directHit.includes(event.target);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlogTarget: \"target\",\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar id = trigger.target.playerid;\r\n\t\t\t\t\t\tvar map = trigger.getParent().customArgs;\r\n\t\t\t\t\t\tif (!map[id]) map[id] = {};\r\n\t\t\t\t\t\tif (typeof map[id].shanRequired == \"number\") {\r\n\t\t\t\t\t\t\tmap[id].shanRequired++;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmap[id].shanRequired = 2;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdelete player.storage.jifengmrfz;\r\n\t\t\t\t\t\tplayer.removeSkill(\"jifengmrfz_sha\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t\t\tif (arg.card.name != \"sha\" || arg.target.countCards(\"h\", \"shan\") > 1 || get.distance(player, arg.target) > 1) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tused: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\tighujia: {\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tnohujia: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tinit: function (player, skill) {\r\n\t\t\t\t\t\tif (!player.storage[skill]) player.storage[skill] = [];\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"damage\", \"damageCancelled\", \"damageZero\"],\r\n\t\t\t\t\t\tsource: [\"damage\", \"damageCancelled\", \"damageZero\"],\r\n\t\t\t\t\t\ttarget: [\"shaMiss\", \"useCardToExcluded\", \"useCardToEnd\", \"eventNeutralized\"],\r\n\t\t\t\t\t\tglobal: [\"useCardEnd\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.storage.jifengmrfz_ighujia && event.card && player.storage.jifengmrfz_ighujia.includes(event.card) && (event.name != \"damage\" || event.notLink());\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tpriority: 12,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.jifengmrfz_ighujia.remove(trigger.card);\r\n\t\t\t\t\t\tif (!player.storage.jifengmrfz_ighujia.length) player.removeSkill(\"jifengmrfz_ighujia\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmarktext: \"✘\",\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tname: \"✘\",\r\n\t\t\t\t\t\tcontent: \"当前护甲已失效\",\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.2,\r\n\t\t\t},\r\n\t\t},\r\n\t\txiqiaomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"chooseToRespondBegin\", \"chooseToUseBegin\"],\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.hasSkill(\"xiqiaomrfz_used\")) return false;\r\n\t\t\t\tif (event.responded) return false;\r\n\t\t\t\tif (!event.filterCard || !event.filterCard({ name: \"shan\" }, player, event)) return false;\r\n\t\t\t\tif (event.name == \"chooseToRespond\" && !lib.filter.cardRespondable({ name: \"shan\" }, player, event)) return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tcheck: () => 1,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.addTempSkill(\"xiqiaomrfz_used\", \"phaseEnd\");\r\n\t\t\t\tvar next = player.chooseToDiscard(\"he\", true);\r\n\t\t\t\tnext.set(\"prompt\", \"【细巧】:你可以弃置一张牌，然后摸一张牌并展示之，若类型不同，视为使用或打出一张【闪】\");\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.cards) {\r\n\t\t\t\t\tevent.card = result.cards[0];\r\n\t\t\t\t\tplayer.draw(\"visible\");\r\n\t\t\t\t} else event.finish();\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tvar card = result[0];\r\n\t\t\t\tvar cardl = event.card;\r\n\t\t\t\tif (get.type2(card) != get.type2(cardl)) {\r\n\t\t\t\t\ttrigger.untrigger();\r\n\t\t\t\t\ttrigger.set(\"responded\", true);\r\n\t\t\t\t\ttrigger.result = { bool: true, card: { name: \"shan\", isCard: true } };\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tused: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\trespondShan: true,\r\n\t\t\t\tthreaten: 0.8,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//D32 星极\r\n\t\ttianyimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tmark: true,\r\n\t\t\tlocked: false,\r\n\t\t\tzhuanhuanji: true,\r\n\t\t\tmarktext: \"☯\",\r\n\t\t\tinit: function (player, skill) {\r\n\t\t\t\tplayer.storage[skill] = true;\r\n\t\t\t},\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (storage, player, skill) {\r\n\t\t\t\t\tif (player.storage.tianyimrfz == true) return \"观看牌堆顶两张牌，并将其置于牌堆顶或牌堆底\"; //阳\r\n\t\t\t\t\treturn \"进行一次判定，并获得判定牌，本回合此牌视为【闪】，若判定结果为♣，你本局游戏使用【杀】的次数+1（至多+3）\"; //阴\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttrigger: { global: \"phaseJudgeBegin\" },\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\tif (player.storage.tianyimrfz == true)\r\n\t\t\t\t\tvar str = \"观看牌堆顶两张牌，并将其置于牌堆顶或牌堆底\"; //阳\r\n\t\t\t\telse var str = \"进行一次判定，并获得判定牌，本回合此牌视为【闪】，若判定结果为♣，你本局游戏使用【杀】的次数+1（至多+3）\"; //阴\r\n\t\t\t\treturn \"【天仪】:你可以\" + str;\r\n\t\t\t},\r\n\t\t\tcallback: function () {\r\n\t\t\t\tif (event.judgeResult.suit == \"club\") {\r\n\t\t\t\t\tif (player.countMark(\"tianyimrfz_shacount\") < 3) player.addMark(\"tianyimrfz_shacount\", false);\r\n\t\t\t\t}\r\n\t\t\t\tplayer.gain(card, \"gain2\").gaintag.add(\"tianyimrfz\");\r\n\t\t\t\tplayer.addTempSkill(\"tianyimrfz_remove\", \"phaseEnd\");\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tif (player.storage.tianyimrfz) player.chooseToGuanxing(2);\r\n\t\t\t\telse\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.judge(function (card) {\r\n\t\t\t\t\t\t\tif (get.suit(card) == \"club\") return 0;\r\n\t\t\t\t\t\t\treturn -4;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"callback\", lib.skill.tianyimrfz.callback);\r\n\t\t\t\tplayer.changeZhuanhuanji(\"tianyimrfz\");\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tif (card.name == \"sha\") return num + player.countMark(\"tianyimrfz_shacount\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tshacount: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"使用【杀】的次数+#\",\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tremove: {\r\n\t\t\t\t\tonremove: function (player) {\r\n\t\t\t\t\t\tplayer.removeGaintag(\"tianyimrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardname: function (card, player, name) {\r\n\t\t\t\t\t\t\tif (card.hasGaintag(\"tianyimrfz\")) return \"shan\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thuijianmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCard2\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!event.targets || event.targets.length > 1) return false;\r\n\t\t\t\tif (!player.canUseToAnyone(event.card, true, false)) return false;\r\n\t\t\t\tif (!player.isPhaseUsing()) return false;\r\n\t\t\t\tif (player.getCardUsable(\"sha\") < 1) return false;\r\n\t\t\t\treturn get.type(event.card) == \"trick\" || get.type(event.card) == \"basic\";\r\n\t\t\t},\r\n\t\t\tusable: 1,\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseTarget([1, player.getCardUsable(\"sha\")], get.prompt(\"huijianmrfz\"), \"为\" + get.translation(trigger.card) + \"增加至多\" + player.getCardUsable(\"sha\") + \"个目标\", function (card, player, target) {\r\n\t\t\t\t\t\treturn !_status.event.sourcex.includes(target) && player.canUse(_status.event.card, target);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"sourcex\", trigger.targets)\r\n\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\treturn get.effect(target, _status.event.card, player, player);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"card\", trigger.card)\r\n\t\t\t\t\t.setHiddenSkill(event.name);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tif (!event.isMine() && !event.isOnline()) game.delayx();\r\n\t\t\t\t\tfor (var i = 0; i < result.targets.length; i++) {\r\n\t\t\t\t\t\ttrigger.targets.push(result.targets[i]);\r\n\t\t\t\t\t\tplayer.line(result.targets[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplayer.logSkill(\"huijianmrfz\");\r\n\t\t\t\t\tplayer.addMark(\"huijianmrfz_minus\", result.targets.length, false);\r\n\t\t\t\t\tplayer.addTempSkill(\"huijianmrfz_minus\", \"phaseUseAfter\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.storage.counttrigger.huijianmrfz--;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tminus: {\r\n\t\t\t\t\tonremove: function (player) {\r\n\t\t\t\t\t\tplayer.removeMark(\"huijuanmrfz_minus\", player.countMark(\"huijuanmrfz_minus\"), false);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num - player.countMark(\"huijianmrfz_minus\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tbingmingmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (\r\n\t\t\t\t\t!game.findPlayer(function (current) {\r\n\t\t\t\t\t\tcurrent.name == \"xingyuanmrfz\";\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\treturn game.roundNumber == 2;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar target = game.findPlayer(function (current) {\r\n\t\t\t\t\tcurrent.name == \"xingyuanmrfz\";\r\n\t\t\t\t});\r\n\t\t\t\tvar num1 = player.countCards(\"h\") - target.countCards(\"h\");\r\n\t\t\t\tvar num2 = player.getHandcardLimit() - target.getHandcardLimit();\r\n\t\t\t\tif (num1 > 0) {\r\n\t\t\t\t\tplayer.chooseToDiscard(true, \"【病鸣】:请将手牌调整至\" + num1, num1);\r\n\t\t\t\t} else if (num1 < 0) player.drawTo(-num1);\r\n\t\t\t\tif (num2 != 0) {\r\n\t\t\t\t\tplayer.addMark(\"bingmingmrfz\", false, Math.abs(num2));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\treturn num + player.countMark(\"bingmingmrfz\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//星源\r\n\t\tdaoliumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 2,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t},\r\n\t\t\tfilterCard: true,\r\n\t\t\tselectCard: 1,\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player;\r\n\t\t\t},\r\n\t\t\tselectTarget: 1,\r\n\t\t\tlose: false,\r\n\t\t\tdiscard: false,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tevent.targetx = target;\r\n\t\t\t\tevent.target = [];\r\n\t\t\t\tevent.discard = [];\r\n\t\t\t\tevent.discard.push(target);\r\n\t\t\t\tevent.target.push(target.getNext());\r\n\t\t\t\tevent.target.push(target.getPrevious());\r\n\t\t\t\tif (event.target.includes(player)) event.target.remove(player);\r\n\t\t\t\tplayer.give(cards, target);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (event.target.length && event.targetx.countCards(\"he\") > 0) {\r\n\t\t\t\t\tevent.targetx.chooseCard(true, \"【导流】:请交给\" + get.translation(event.target[0]) + \"一张牌\", \"he\");\r\n\t\t\t\t} else event.goto(3);\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (result.cards) {\r\n\t\t\t\t\tvar card = result.cards[0];\r\n\t\t\t\t\tevent.targetx.give(card, event.target[0]);\r\n\t\t\t\t\tevent.discard.push(event.target[0]);\r\n\t\t\t\t}\r\n\t\t\t\tevent.target.remove(event.target[0]);\r\n\t\t\t\tevent.goto(1);\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tif (event.discard.length) {\r\n\t\t\t\t\tif (event.discard[0].countCards(\"he\") > 0) event.discard[0].chooseToDiscard(true, \"he\", \"【导流】:请弃置一张牌\");\r\n\t\t\t\t\tevent.discard.remove(event.discard[0]);\r\n\t\t\t\t\tevent.redo();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 4,\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tvar pre = target.getPrevious(),\r\n\t\t\t\t\t\t\tnet = target.getNext(),\r\n\t\t\t\t\t\t\tnum = 0;\r\n\t\t\t\t\t\tif (game.countPlayer() == 2) return 0;\r\n\t\t\t\t\t\tif (get.attitude(pre, player) > 2 && get.attitude(net, player) > 2) return 0;\r\n\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tgewumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"gainEnd\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.source && event.source.isIn() && event.source == player && event.cards.length >= 1;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tlogTarget: \"source\",\r\n\t\t\tcontent: function () {\r\n\t\t\t\tif (player.countMark(\"gewumrfz\") < 5) {\r\n\t\t\t\t\tplayer.addMark(\"gewumrfz\", false);\r\n\t\t\t\t\tplayer.logSkill(\"gewumrfz\");\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0; i < trigger.cards.length; i++) {\r\n\t\t\t\t\tif (!player.getStorage(\"gewumrfz_mark\").includes(trigger.cards[i].name)) {\r\n\t\t\t\t\t\tplayer.markAuto(\"gewumrfz_mark\", [trigger.cards[i].name]);\r\n\t\t\t\t\t\tif (player.storage.gewumrfz_mark.length % 2 == 0) {\r\n\t\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\t\tplayer.logSkill(\"gewumrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (player.storage.gewumrfz_mark.length % 4 == 0) {\r\n\t\t\t\t\t\t\tplayer.addMark(\"gewumrfz_draw\", false);\r\n\t\t\t\t\t\t\tplayer.logSkill(\"gewumrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\treturn num + player.countMark(\"gewumrfz\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"gewumrfz_mark\", \"gewumrfz_draw\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tmark: {\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\t\t\treturn \"记录的牌名：\" + get.translation(player.storage.gewumrfz_mark) + \"</br>\" + (player.countMark(\"gewumrfz_draw\") > 0 ? \"额定摸牌数+\" + player.countMark(\"gewumrfz_draw\") : \"\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\taudio: \"gewumrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.countMark(\"gewumrfz_draw\") > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.num += player.countMark(\"gewumrfz_draw\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//战车\r\n\t\tjiqiangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tderivation: [\"DP27mrfz\"],\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.isDisabled(1) && (event.name != \"phase\" || game.phaseNumber == 0);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar card = game.createCard(\"DP27mrfz\", \"diamond\", 13);\r\n\t\t\t\tplayer.$gain2(card);\r\n\t\t\t\tgame.delayx();\r\n\t\t\t\tplayer.equip(card);\r\n\t\t\t},\r\n\t\t\tgroup: \"jiqiangmrfz_get\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tget: {\r\n\t\t\t\t\taudio: \"jiqiangmrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t!player.isDisabled(1) &&\r\n\t\t\t\t\t\t\tplayer.getCards(\"e\", function (card) {\r\n\t\t\t\t\t\t\t\treturn get.name(card) == \"DP27mrfz\";\r\n\t\t\t\t\t\t\t}).length == 0\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar card = game.createCard(\"DP27mrfz\", \"diamond\", 13);\r\n\t\t\t\t\t\tplayer.$gain2(card);\r\n\t\t\t\t\t\tgame.delayx();\r\n\t\t\t\t\t\tplayer.equip(card);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tqingxiemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseDrawEnd\" },\r\n\t\t\tfirstDo: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.skipList.includes(\"phaseUse\")) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\treturn player.inRangeOf(current) && current != player;\r\n\t\t\t\t\t}) > 0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (get.value(player.getCards(\"h\")) >= 10) return false;\r\n\t\t\t\tif (\r\n\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\treturn player.inRangeOf(current) && current != player && get.attitude(player, current) < 0;\r\n\t\t\t\t\t}) < 1\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar next = player.chooseTarget(\"【倾泻】:请选择一名攻击范围内的其他角色\", true, function (card, target, player) {\r\n\t\t\t\t\treturn target != player && player.inRangeOf(target);\r\n\t\t\t\t});\r\n\t\t\t\tnext.ai = function (target) {\r\n\t\t\t\t\treturn get.effect(target, { name: \"sha\" }, _status.event.player);\r\n\t\t\t\t};\r\n\t\t\t\tevent.num = 0;\r\n\t\t\t\tevent.skip = 0;\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.targets) {\r\n\t\t\t\t\tevent.target = result.targets[0];\r\n\t\t\t\t} else event.finish();\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (!event.target.isAlive()) {\r\n\t\t\t\t\tevent.goto(4);\r\n\t\t\t\t} else\r\n\t\t\t\t\tplayer.judge(function (card) {\r\n\t\t\t\t\t\tvar color = get.color(card);\r\n\t\t\t\t\t\tif (color == \"red\") return 4;\r\n\t\t\t\t\t\treturn -4;\r\n\t\t\t\t\t});\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tif (result.color == \"red\") {\r\n\t\t\t\t\tplayer.useCard({ name: \"sha\", isCard: true }, false, event.target);\r\n\t\t\t\t\tevent.skip++;\r\n\t\t\t\t}\r\n\t\t\t\tevent.num++;\r\n\t\t\t\tif (event.num < 3) event.goto(2);\r\n\t\t\t\t(\"step 4\");\r\n\t\t\t\tif (event.skip > 1) {\r\n\t\t\t\t\tplayer.skip(\"phaseUse\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\t//闪盾 闪击\r\n\t\tshandunmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tglobalFrom: function (from, to, distance) {\r\n\t\t\t\t\tif (from.isAction()) return distance - 1;\r\n\t\t\t\t\treturn distance + 1;\r\n\t\t\t\t},\r\n\t\t\t\tglobalTo: function (from, to, distance) {\r\n\t\t\t\t\tif (!to.isAction()) return distance + 1;\r\n\t\t\t\t\treturn distance - 1;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txuanmumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCard2\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.storage.xuanmumrfz_roundcount >= 4) return false;\r\n\t\t\t\tif (!event.targets || event.targets.length > 1) return false;\r\n\t\t\t\tif (get.distance(player, event.targets[0]) > 1) return false;\r\n\t\t\t\tif (event.targets[0].countCards(\"h\") < 1) return false;\r\n\t\t\t\tvar type = get.type(event.card);\r\n\t\t\t\treturn event.targets[0] != player && (type == \"basic\" || type == \"trick\");\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(event.targets[0], player) < 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tif (!player.storage.xuanmumrfz_roundcount) player.storage.xuanmumrfz_roundcount = 0;\r\n\t\t\t\tplayer.storage.xuanmumrfz_roundcount++;\r\n\t\t\t\tplayer.choosePlayerCard(trigger.targets[0], true, \"h\");\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.cards) {\r\n\t\t\t\t\tvar card = result.cards[0];\r\n\t\t\t\t\tevent.card = result.cards[0];\r\n\t\t\t\t\tplayer.showCards(card, get.translation(player) + \"对\" + get.translation(trigger.target) + \"发动了【炫目】\");\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (!canRespond(trigger.card, event.card)) {\r\n\t\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn current != player && current == trigger.targets[0];\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (trigger.targets[0].countGainableCards(player, \"h\")) {\r\n\t\t\t\t\t\tplayer.gainPlayerCard(\"h\", trigger.targets[0], true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (Math.random() < 0.25) trigger.targets[0].chat(\"有闪盾！\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction canRespond(card1, card2) {\r\n\t\t\t\t\tif (typeof card1 === undefined || typeof card2 === undefined) return false;\r\n\t\t\t\t\t/**@ts-ignore */\r\n\t\t\t\t\tvar info1 = get.name(card1),\r\n\t\t\t\t\t\t/** @ts-ignore */\r\n\t\t\t\t\t\tinfo2 = get.name(card2);\r\n\t\t\t\t\tvar tmp_bool = false;\r\n\t\t\t\t\tif ((info1 == \"sha\" || info1 == \"wanjian\") && info2 == \"shan\") tmp_bool = true;\r\n\t\t\t\t\tif ((info1 == \"juedou\" || info1 == \"nanman\") && info2 == \"sha\") tmp_bool = true;\r\n\t\t\t\t\t/**@ts-ignore */\r\n\t\t\t\t\tif (get.type(card1) == \"trick\" && info2 == \"wuxie\") tmp_bool = true;\r\n\t\t\t\t\tvar str = (tmp_bool == true ? \"\" : \"不\") + \"能响应\";\r\n\t\t\t\t\tinfo1 = \"<font color=rgb(255,255,122)>【\" + get.translation(info1) + \"】</font>\";\r\n\t\t\t\t\tinfo2 = \"<font color=rgb(255,255,122)>【\" + get.translation(info2) + \"】</font>\";\r\n\t\t\t\t\tgame.log(info2, str, info1);\r\n\t\t\t\t\treturn tmp_bool;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"xuanmumrfz_roundcount\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\troundcount: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tinit: player => {\r\n\t\t\t\t\t\tplayer.storage.xuanmumrfz_roundcount = 0;\r\n\t\t\t\t\t\tplayer.markSkill(\"xuanmumrfz_roundcount\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\t\t\treturn player.storage.xuanmumrfz_roundcount + \"/4\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tmarkcount: function (event, player) {\r\n\t\t\t\t\t\t\tif (!player.storage.xuanmumrfz_roundcount) return 4;\r\n\t\t\t\t\t\t\treturn 4 - player.storage.xuanmumrfz_roundcount;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"roundStart\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcontent: () => {\r\n\t\t\t\t\t\tplayer.storage.xuanmumrfz_roundcount = 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tchuandunmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.draw(\"visible\");\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result) {\r\n\t\t\t\t\tvar card = result[0];\r\n\t\t\t\t\tif ((card.suit == \"heart\" || card.suit == \"spade\") && card.number == 6) {\r\n\t\t\t\t\t\tplayer.loseHp(player.hp);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//霜华 夹子妹\r\n\t\ttadianmrfz: {\r\n\t\t\tmarkimage: \"extension/WhichWay/image/orther/shuanghuajiazimrfz.png\",\r\n\t\t\tintro: {\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t\tmark: function (dialog, content, player) {\r\n\t\t\t\t\tvar content = player.getExpansions(\"tadianmrfz\");\r\n\t\t\t\t\tif (content && content.length) {\r\n\t\t\t\t\t\tif (player == game.me || player.isUnderControl()) {\r\n\t\t\t\t\t\t\tdialog.addAuto(content);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn \"共有\" + get.cnNumber(content.length) + \"张踏垫\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcontent: function (content, player) {\r\n\t\t\t\t\tvar content = player.getExpansions(\"tadianmrfz\");\r\n\t\t\t\t\tif (content && content.length) {\r\n\t\t\t\t\t\tif (player == game.me || player.isUnderControl()) {\r\n\t\t\t\t\t\t\treturn get.translation(content);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn \"共有\" + get.cnNumber(content.length) + \"张踏垫\";\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tonremove: function (player, skill) {\r\n\t\t\t\tvar cards = player.getExpansions(skill);\r\n\t\t\t\tif (cards.length) player.loseToDiscardpile(cards);\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tforced: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tif (player.getExpansions(\"tadianmrfz\").length > 0) {\r\n\t\t\t\t\tplayer.gain(player.getExpansions(\"tadianmrfz\"), \"gain2\");\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tplayer.draw(3);\r\n\t\t\t\tplayer.chooseCard(true, 3, \"【踏垫】:请选择将三张手牌置于你武将牌上\").set(\"ai\", function (card) {\r\n\t\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t\t});\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (result.cards) {\r\n\t\t\t\t\tplayer.addToExpansion(result.cards, player, \"giveAuto\").gaintag.add(\"tadianmrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"tadianmrfz_tri\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\trec: {\r\n\t\t\t\t\ttrigger: { player: \"dyingAfter\" },\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.recover();\r\n\t\t\t\t\t\tplayer.removeSkill(\"tadianmrfz_rec\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttri: {\r\n\t\t\t\t\taudio: \"tadianmrfz\",\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\ttarget: \"useCardToTargeted\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!event.card || player.getExpansions(\"tadianmrfz\").length < 1) return false;\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tplayer.getExpansions(\"tadianmrfz\").filter(function (magic) {\r\n\t\t\t\t\t\t\t\treturn magic.name == event.card.name;\r\n\t\t\t\t\t\t\t}).length > 0\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\treturn get.attitude(player, event.player) < 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: function (event, player) {\r\n\t\t\t\t\t\treturn \"【踏垫】:是否弃置一张‘踏垫’，令\" + get.translation(event.player) + \"流失所有体力？\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tvar cards = player.getExpansions(\"tadianmrfz\").filter(function (magic) {\r\n\t\t\t\t\t\t\treturn get.name(magic) == get.name(trigger.card);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (cards.length) player.chooseButton([\"你可以选择移去一张与其使用的牌的牌名相同的“踏垫”，令其流失所有体力\", cards]);\r\n\t\t\t\t\t\telse event.finish();\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tplayer.loseToDiscardpile(result.links);\r\n\t\t\t\t\t\t\tplayer.draw(3);\r\n\t\t\t\t\t\t\ttrigger.player.loseHp(trigger.player.hp);\r\n\t\t\t\t\t\t\ttrigger.player.addSkill(\"tadianmrfz_rec\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txinjimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseZhunbeiBegin\",\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.getExpansions(\"tadianmrfz\").length > 0 && player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar cards = player.getExpansions(\"tadianmrfz\");\r\n\t\t\t\tif (!cards.length || !player.countCards(\"h\")) {\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar next = player.chooseToMove(\"【踏垫】：是否交换“踏垫”和手牌？\");\r\n\t\t\t\tnext.set(\"list\", [\r\n\t\t\t\t\t[get.translation(player) + \"（你）的‘踏垫’\", cards],\r\n\t\t\t\t\t[\"手牌区\", player.getCards(\"h\")],\r\n\t\t\t\t]);\r\n\t\t\t\tnext.set(\"filterMove\", function (from, to) {\r\n\t\t\t\t\treturn typeof to != \"number\";\r\n\t\t\t\t});\r\n\t\t\t\tnext.set(\"processAI\", function (list) {\r\n\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\tcards = list[0][1].concat(list[1][1]).sort(function (a, b) {\r\n\t\t\t\t\t\t\treturn get.value(a) - get.value(b);\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\tcards2 = cards.splice(0, player.getExpansions(\"tadianmrfz\").length);\r\n\t\t\t\t\treturn [cards2, cards];\r\n\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar pushs = result.moved[0],\r\n\t\t\t\t\t\tgains = result.moved[1];\r\n\t\t\t\t\tpushs.removeArray(player.getExpansions(\"tadianmrfz\"));\r\n\t\t\t\t\tgains.removeArray(player.getCards(\"h\"));\r\n\t\t\t\t\tif (!pushs.length || pushs.length != gains.length) return;\r\n\t\t\t\t\tplayer.logSkill(\"tadianmrfz\");\r\n\t\t\t\t\tplayer.addToExpansion(pushs, player, \"giveAuto\").gaintag.add(\"tadianmrfz\");\r\n\t\t\t\t\tgame.log(player, \"交换了手牌区与‘踏垫’的牌\");\r\n\t\t\t\t\tplayer.gain(gains, \"draw\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\t//柏喙\r\n\t\tyirenmrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\tchargeGet: 1,\r\n\t\t\tchargeSkill: true,\r\n\t\t\tforced: true,\r\n\t\t\tonremove: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseJieshuBegin\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar num = 0;\r\n\t\t\t\tvar history = player.getHistory(\"useCard\");\r\n\t\t\t\tfor (var i = 0; i < history.length; i++) {\r\n\t\t\t\t\tif (history[i].card.name == \"sha\" && history[i].isPhaseUsing()) {\r\n\t\t\t\t\t\tnum++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (player.countMark(\"charge\") + player.getCardUsable(\"sha\") - num >= 15) return false;\r\n\t\t\t\treturn player.getCardUsable(\"sha\") - num > 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar num = 0;\r\n\t\t\t\tvar history = player.getHistory(\"useCard\");\r\n\t\t\t\tfor (var i = 0; i < history.length; i++) {\r\n\t\t\t\t\tif (history[i].card.name == \"sha\" && history[i].isPhaseUsing()) {\r\n\t\t\t\t\t\tnum++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tnum = player.getCardUsable(\"sha\") - num;\r\n\t\t\t\tnum = Math.min(num, 15 - player.countMark(\"charge\"));\r\n\t\t\t\tplayer.addMark(\"charge\", num);\r\n\t\t\t},\r\n\t\t\tgroup: \"yirenmrfz_use\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tlim: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"下回合使用【杀】的次数-#\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num - player.countMark(\"yirenmrfz_lim\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tuse: {\r\n\t\t\t\t\tinit: (player, skill) => (player.storage[skill] = 1),\r\n\t\t\t\t\taudio: \"yirenmrfz\",\r\n\t\t\t\t\tenable: \"phaseUse\",\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.countMark(\"charge\") < player.storage.yirenmrfz_use) return false;\r\n\t\t\t\t\t\tif (player.countCards(\"h\") < 2) return false;\r\n\t\t\t\t\t\treturn game.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn current != player && player.canUse(\"sha\", current);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tselectCard: 2,\r\n\t\t\t\t\tposition: \"h\",\r\n\t\t\t\t\tfilterCard: true,\r\n\t\t\t\t\tselectTarget: [1, 2],\r\n\t\t\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\t\t\treturn player.canUse(\"sha\", target) === true && target != player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmultitarget: true,\r\n\t\t\t\t\tmultiline: true,\r\n\t\t\t\t\tcheck: function (card) {\r\n\t\t\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: \"【异刃】：请弃置两张手牌并选择至多两名角色\",\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tfor (i of targets) {\r\n\t\t\t\t\t\t\tif (player.canUse(\"sha\", i)) player.useCard({ name: \"sha\", isCard: true }, i, false);\r\n\t\t\t\t\t\t\ti.addTempSkill(\"yirenmrfz_lim\", { player: \"phaseEnd\" });\r\n\t\t\t\t\t\t\ti.addMark(\"yirenmrfz_lim\", false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tplayer.removeMark(\"charge\", player.storage.yirenmrfz_use);\r\n\t\t\t\t\t\tplayer.storage.yirenmrfz_use++;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\torder: function (item, player) {\r\n\t\t\t\t\t\t\tif (player.hasSkillTag(\"presha\", true, null, true)) return 10;\r\n\t\t\t\t\t\t\tif (game.hasNature(item, \"linked\")) {\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\t\t\treturn current != player && current.isLinked() && player.canUse(item, current, null, true) && get.effect(current, item, player, player) > 0 && lib.card.sha.ai.canLink(player, current, item);\r\n\t\t\t\t\t\t\t\t\t}) &&\r\n\t\t\t\t\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\t\t\t\t\treturn current.isLinked() && get.damageEffect(current, player, player, get.nature(item)) > 0;\r\n\t\t\t\t\t\t\t\t\t}) > 1\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\treturn 3.1;\r\n\t\t\t\t\t\t\t\treturn 3;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn 3.05;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\t\t\tvar enemyIR = game.filterPlayer(function (current) {\r\n\t\t\t\t\t\t\t\t\treturn current != player && get.attitude(player, current) < 0 && player.canUse(\"sha\", current);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tif (enemyIR.length < 1) return 0;\r\n\t\t\t\t\t\t\t\telse if (enemyIR.length == 1) {\r\n\t\t\t\t\t\t\t\t\tif (target.hp <= 2) return -4;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshehunmrfz: {\r\n\t\t\ttrigger: {\r\n\t\t\t\tsource: \"damageEnd\",\r\n\t\t\t},\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"使用【杀】的次数+#\",\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tforced: true,\r\n\t\t\tpopup: false,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"shehunmrfz\") < 5;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar mark = player.countMark(\"shehunmrfz\");\r\n\t\t\t\tvar num = trigger.num;\r\n\t\t\t\tif (mark + num > 5) var add = 5 - mark;\r\n\t\t\t\telse var add = num;\r\n\t\t\t\tplayer.addMark(\"shehunmrfz\", add, false);\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tif (card.name == \"sha\") return num + player.countMark(\"shehunmrfz\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//白面鸮\r\n\t\tjinaomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tmark: true,\r\n\t\t\tmarktext: \"机脑\",\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar storage = player.storage.jinaomrfz;\r\n\t\t\t\t\tif (storage == true) return \"递增\";\r\n\t\t\t\t\tif (storage == false) return \"递减\";\r\n\t\t\t\t\treturn \"无限制\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar history = player.getHistory(\"useCard\");\r\n\t\t\t\tif (history.indexOf(event) != 1) return false;\r\n\t\t\t\treturn history[0].card.number != undefined && history[1].card.number != undefined;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar history = player.getHistory(\"useCard\");\r\n\t\t\t\tif (history[0].card.number < history[1].card.number) {\r\n\t\t\t\t\tplayer.storage.jinaomrfz = true;\r\n\t\t\t\t\tplayer.marks.jinaomrfz.innerText = \"递增\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.storage.jinaomrfz = false;\r\n\t\t\t\t\tplayer.marks.jinaomrfz.innerText = \"递减\";\r\n\t\t\t\t}\r\n\t\t\t\tplayer.storage.jinaomrfz_lim = history[1].card.number;\r\n\t\t\t\tplayer.addTempSkill(\"jinaomrfz_lim\", \"phaseEnd\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"jinaomrfz_draw\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\thandlit: {\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"手牌上限+#\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn num + player.countMark(\"jinaomrfz_handlit\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\taudio: \"jinaomrfz\",\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar history = player.getHistory(\"useCard\");\r\n\t\t\t\t\t\tif (history.length < 2) return false;\r\n\t\t\t\t\t\tif (!history[history.length - 2].card.color || get.color(event.card) == \"none\") return false;\r\n\t\t\t\t\t\t//console.log(history[history.length-2].card.color);console.log(get.color(event.card));\r\n\t\t\t\t\t\treturn history[history.length - 2].card.color == get.color(event.card);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar color = get.color(trigger.card);\r\n\t\t\t\t\t\tif (color == \"red\") player.draw(2);\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tplayer.addTempSkill(\"jinaomrfz_handlit\", \"phaseEnd\");\r\n\t\t\t\t\t\t\tplayer.addMark(\"jinaomrfz_handlit\", false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tlim: {\r\n\t\t\t\t\tonremove: function (player) {\r\n\t\t\t\t\t\tplayer.marks.jinaomrfz.text.innerText = \"机脑\";\r\n\t\t\t\t\t\tdelete player.storage.jinaomrfz;\r\n\t\t\t\t\t\tdelete player.storage.jinaomrfz_lim;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!event.card.number) return false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.jinaomrfz_lim = trigger.card.number;\r\n\t\t\t\t\t\tvar cards = player.getCards(\"h\");\r\n\t\t\t\t\t\tvar max, min;\r\n\t\t\t\t\t\tfor (var i = 0; i < cards.length; i++) {\r\n\t\t\t\t\t\t\tvar num = cards[i].number;\r\n\t\t\t\t\t\t\tif (i == 0) {\r\n\t\t\t\t\t\t\t\tmax = num;\r\n\t\t\t\t\t\t\t\tmin = num;\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (num > max) max = num;\r\n\t\t\t\t\t\t\tif (min > num) min = num;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (trigger.card.number >= max) {\r\n\t\t\t\t\t\t\tplayer.storage.jinaomrfz = false;\r\n\t\t\t\t\t\t\tplayer.marks.jinaomrfz.text.innerText = \"递减\";\r\n\t\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\t\tplayer.logSkill(\"jinaomrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (trigger.card.number <= min) {\r\n\t\t\t\t\t\t\tplayer.storage.jinaomrfz = true;\r\n\t\t\t\t\t\t\tplayer.marks.jinaomrfz.text.innerText = \"递增\";\r\n\t\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\t\tplayer.logSkill(\"jinaomrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardEnabled2: function (card, player) {\r\n\t\t\t\t\t\t\tif (player.storage.jinaomrfz == true) {\r\n\t\t\t\t\t\t\t\tif (card.number && card.number <= player.storage.jinaomrfz_lim) return false;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (card.number && card.number >= player.storage.jinaomrfz_lim) return false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\twutaimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\tdirect: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar cards = player.getCards(\"h\");\r\n\t\t\t\tif (cards.length < 2) return false;\r\n\t\t\t\tfor (var i = 0; i < cards.length; i++) {\r\n\t\t\t\t\tif (i == 0) {\r\n\t\t\t\t\t\tvar tmp_cards = cards[i];\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (get.type2(tmp_cards) != get.type2(cards[i])) return true;\r\n\t\t\t\t\tif (get.color(tmp_cards) != get.color(cards[i])) return true;\r\n\t\t\t\t\ttmp_cards = cards[i];\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseToDiscard(2, \"h\", false, \"【五肽】：你可以弃置两张类型或颜色不相同的手牌并选择一名角色，直到你的下个回合开始，其每回合第一次受到的伤害-1\", function (card) {\r\n\t\t\t\t\t\tif (ui.selected.cards.length == 0) return true;\r\n\t\t\t\t\t\tif (ui.selected.cards.length) {\r\n\t\t\t\t\t\t\treturn get.type2(card, player) != get.type2(ui.selected.cards[0], player) || get.color(card, player) != get.color(ui.selected.cards[0], player);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"complexCard\", true)\r\n\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\treturn 10 - get.value(card);\r\n\t\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tplayer.chooseTarget(\"【五肽】：请选择一名角色\", true, function (card, player, target) {\r\n\t\t\t\t\t\treturn !target.hasSkill(\"wutaimrfz_eff\");\r\n\t\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\t\tvar att = get.attitude(player, target);\r\n\t\t\t\t\t\tif (target.hp < 3) att /= 1.5;\r\n\t\t\t\t\t\treturn att;\r\n\t\t\t\t\t};\r\n\t\t\t\t} else event.finish();\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (result.targets) {\r\n\t\t\t\t\tplayer.logSkill(\"wutaimrfz_eff\", result.targets[0]);\r\n\t\t\t\t\tplayer.addTempSkill(\"wutaimrfz_eff\", { player: \"phaseBegin\" });\r\n\t\t\t\t\tplayer.storage.wutaimrfz_eff = result.targets[0];\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tmark: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\teff: {\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\taudio: \"wutaimrfz\",\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\t\t\tvar char = get.translation(player.storage.wutaimrfz_eff);\r\n\t\t\t\t\t\t\tif (player.hasSkill(\"wutaimrfz_mark\")) return \"本回合\" + char + \"已触发过此效果\";\r\n\t\t\t\t\t\t\treturn char + \"受到的伤害-1\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"damageBegin\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tlogTarget: \"player\",\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.hasSkill(\"wutaimrfz_mark\")) return false;\r\n\t\t\t\t\t\treturn event.player == player.storage.wutaimrfz_eff;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addTempSkill(\"wutaimrfz_mark\", \"phaseEnd\");\r\n\t\t\t\t\t\ttrigger.num--;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//刺玫\r\n\t\thuabumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tglobal: \"huabumrfz_eff\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tenable: \"phaseUse\",\r\n\t\t\t\t\tusable: 1,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t!player.hasSkill(\"huabumrfz\") &&\r\n\t\t\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\t\t\treturn current.hasSkill(\"huabumrfz\");\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tvar targets = game.filterPlayer(current => {\r\n\t\t\t\t\t\t\treturn current.hasSkill(\"huabumrfz\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (targets.length == 1) {\r\n\t\t\t\t\t\t\tplayer.logSkill(\"huabumrfz\", targets);\r\n\t\t\t\t\t\t\tevent.targets = targets[0];\r\n\t\t\t\t\t\t\tevent.goto(2);\r\n\t\t\t\t\t\t} else if (targets.length > 1) {\r\n\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t.chooseTarget(true, \"选择【花卜】的目标\", function (card, player, target) {\r\n\t\t\t\t\t\t\t\t\treturn _status.event.list.includes(target);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"list\", targets)\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\t\treturn get.attitude(player, target);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else event.finish();\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\tplayer.logSkill(\"huabumrfz\", event.targets);\r\n\t\t\t\t\t\t\tevent.targets = result.targets[0];\r\n\t\t\t\t\t\t} else event.finish();\r\n\t\t\t\t\t\t(\"step 2\");\r\n\t\t\t\t\t\tif (event.targets) {\r\n\t\t\t\t\t\t\tevent.targets.draw();\r\n\t\t\t\t\t\t} else event.finish();\r\n\t\t\t\t\t\t(\"step 3\");\r\n\t\t\t\t\t\tif (result) {\r\n\t\t\t\t\t\t\tvar card = result[0];\r\n\t\t\t\t\t\t\tvar cards = player.getCards(\"h\");\r\n\t\t\t\t\t\t\tvar bool = false;\r\n\t\t\t\t\t\t\tfor (i of cards) {\r\n\t\t\t\t\t\t\t\tif (get.type2(i) == get.type2(card)) {\r\n\t\t\t\t\t\t\t\t\tbool = true;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tevent.is = bool;\r\n\t\t\t\t\t\t\tevent.targets\r\n\t\t\t\t\t\t\t\t.chooseControl(\"有\", \"没有\")\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", \"【花卜】:\" + get.translation(player) + \"手牌中是否有与\" + get.translation(card) + \"(\" + get.translation(get.type2(card)) + \")\" + \"类型相同的牌？\")\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\t\t\t\t\tis = _status.event.is,\r\n\t\t\t\t\t\t\t\t\t\ttarget = _status.event.target;\r\n\t\t\t\t\t\t\t\t\tis = is === true ? \"有\" : \"没有\";\r\n\t\t\t\t\t\t\t\t\tif (get.attitude(player, target) > 0 && target.hasSkill(\"shixinmrfz\")) return is;\r\n\t\t\t\t\t\t\t\t\telse if (target.hasSkill(\"shixinmrfz\")) return !is;\r\n\t\t\t\t\t\t\t\t\treturn [\"有\", \"没有\"].randomGet();\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"is\", event.is)\r\n\t\t\t\t\t\t\t\t.set(\"target\", event.targets);\r\n\t\t\t\t\t\t} else event.finish();\r\n\t\t\t\t\t\t(\"step 4\");\r\n\t\t\t\t\t\tif (result.control) {\r\n\t\t\t\t\t\t\tvar bool = result.control == \"有\" ? true : false;\r\n\t\t\t\t\t\t\tif (event.is == bool) {\r\n\t\t\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\t\t\tevent.targets.draw();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tevent.targets.chooseToDiscard(true, \"【花卜】:请选择弃置一张牌\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\torder: 13,\r\n\t\t\t\t\t\tthreaten: 1.5,\r\n\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\tplayer: function (player, target) {\r\n\t\t\t\t\t\t\t\tvar target = game.findPlayer(function (current) {\r\n\t\t\t\t\t\t\t\t\treturn current.hasSkill(\"huabumrfz\");\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tif (target) {\r\n\t\t\t\t\t\t\t\t\treturn get.attitude(player, target);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshixinmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"gainAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!_status.currentPhase) return false;\r\n\t\t\t\tif (player.hasSkill(\"shixinmrfz_ban\")) return false;\r\n\t\t\t\tif (_status.currentPhase.countCards(\"h\") == 0) return false;\r\n\t\t\t\treturn _status.currentPhase != player;\r\n\t\t\t},\r\n\t\t\tprompt: \"【识心】:是否观看当前回合角色的手牌？\",\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.viewHandcards(_status.currentPhase);\r\n\t\t\t\tplayer.addTempSkill(\"shixinmrfz_ban\", \"phaseEnd\");\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//红\r\n\t\tqunlangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"showCharacterAfter\",\r\n\t\t\t},\r\n\t\t\thiddenSkill: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!event.toShow || !event.toShow.includes(\"hongmrfz\")) return false;\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn current != player && player.inRangeOf(current);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn current != player && player.inRangeOf(current) && get.attitude(current, player) < 0;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tprompt: \"【群狼】:你可以对你攻击范围内的一名其他角色造成一点伤害\",\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseTarget(true, \"【群狼】:请选择一名其他角色并对其造成一点伤害\", function (card, player, target) {\r\n\t\t\t\t\t\treturn target != player && player.inRangeOf(target);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\treturn get.damageEffect(target, player, player);\r\n\t\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\ttarget.damage(\"player\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tcigumrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tcardnature: function (card, player) {\r\n\t\t\t\t\tif (!card.nature && card.name == \"sha\") return \"stab\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: [\"respond\", \"useCard\"],\r\n\t\t\t},\r\n\t\t\tfrequent: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (!event.respondTo) return false;\r\n\t\t\t\tif (event.player == player) return false;\r\n\t\t\t\tif (player != event.respondTo[0]) return false;\r\n\t\t\t\telse return event.cards.filterInD(\"od\").length > 0;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\tvar cards = event.cards.filterInD(\"od\");\r\n\t\t\t\treturn \"【刺骨】:是否获得\" + get.translation(cards) + \"?\";\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar cards = trigger.cards.filterInD(\"od\");\r\n\t\t\t\tplayer.gain(cards, \"log\", \"gain2\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tqingchumrfz: {\r\n\t\t\tgroup: [\"qingchumrfz_sha\", \"qingchumrfz_shan\"],\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: [\"useCard\", \"respond\"] },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar target = _status.currentPhase;\r\n\t\t\t\tif (!target || target.countCards(\"he\") == 0) return false;\r\n\t\t\t\treturn event.card && event.card.name == \"sha\" && target != player;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tvar target = _status.currentPhase;\r\n\t\t\t\treturn get.attitude(target, player) < 0;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\tvar target = _status.currentPhase;\r\n\t\t\t\treturn \"【清处】:是否弃置当前回合角色（\" + get.translation(target) + \"）一张牌？\";\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar target = _status.currentPhase;\r\n\t\t\t\tif (!target || target.countCards(\"he\") == 0) event.finish();\r\n\t\t\t\telse player.discardPlayerCard(target, \"he\", true);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.cards) {\r\n\t\t\t\t\tif (get.suit(result.cards[0]) == get.suit(trigger.card)) {\r\n\t\t\t\t\t\tevent.goto(0);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tshan: {\r\n\t\t\t\t\taudio: \"qingchumrfz\",\r\n\t\t\t\t\tenable: [\"chooseToRespond\", \"chooseToUse\"],\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn _status.currentPhase != player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilterCard: {\r\n\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tviewAs: {\r\n\t\t\t\t\t\tname: \"shan\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: \"将一张杀当闪使用或打出\",\r\n\t\t\t\t\tcheck: function () {\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tposition: \"hs\",\r\n\t\t\t\t\tviewAsFilter: function (player) {\r\n\t\t\t\t\t\tif (!player.countCards(\"hs\", \"sha\")) return false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\trespondShan: true,\r\n\t\t\t\t\t\tskillTagFilter: function (player) {\r\n\t\t\t\t\t\t\tif (!player.countCards(\"hs\", \"sha\") || _status.currentPhase != player) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\teffect: {\r\n\t\t\t\t\t\t\ttarget: function (card, player, target, current) {\r\n\t\t\t\t\t\t\t\tif (get.tag(card, \"respondShan\") && current < 0) return 0.6;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\torder: 4,\r\n\t\t\t\t\t\tuseful: -1,\r\n\t\t\t\t\t\tvalue: -1,\r\n\t\t\t\t\t\tbasic: {\r\n\t\t\t\t\t\t\tuseful: [7, 5.1, 2],\r\n\t\t\t\t\t\t\tvalue: [7, 5.1, 2],\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tsha: {\r\n\t\t\t\t\taudio: \"qingchumrfz\",\r\n\t\t\t\t\tenable: [\"chooseToUse\", \"chooseToRespond\"],\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn _status.currentPhase != player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilterCard: {\r\n\t\t\t\t\t\tname: \"shan\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tviewAs: {\r\n\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tviewAsFilter: function (player) {\r\n\t\t\t\t\t\tif (!player.countCards(\"hs\", \"shan\")) return false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tposition: \"hs\",\r\n\t\t\t\t\tprompt: \"将一张闪当杀使用或打出\",\r\n\t\t\t\t\tcheck: function () {\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\teffect: {\r\n\t\t\t\t\t\t\ttarget: function (card, player, target, current) {\r\n\t\t\t\t\t\t\t\tif (get.tag(card, \"respondSha\") && current < 0) return 0.6;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\trespondSha: true,\r\n\t\t\t\t\t\tskillTagFilter: function (player) {\r\n\t\t\t\t\t\t\tif (!player.countCards(\"hs\", \"shan\") || _status.currentPhase != player) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\torder: function () {\r\n\t\t\t\t\t\t\treturn get.order({ name: \"sha\" }) + 0.1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tuseful: -1,\r\n\t\t\t\t\t\tvalue: -1,\r\n\t\t\t\t\t\tyingbian: function (card, player, targets, viewer) {\r\n\t\t\t\t\t\t\tif (get.attitude(viewer, player) <= 0) return 0;\r\n\t\t\t\t\t\t\tvar base = 0,\r\n\t\t\t\t\t\t\t\thit = false;\r\n\t\t\t\t\t\t\tif (get.cardtag(card, \"yingbian_hit\")) {\r\n\t\t\t\t\t\t\t\thit = true;\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\ttargets.filter(function (target) {\r\n\t\t\t\t\t\t\t\t\t\treturn target.hasShan() && get.attitude(viewer, target) < 0 && get.damageEffect(target, player, viewer, get.nature(card)) > 0;\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\tbase += 5;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (get.cardtag(card, \"yingbian_all\")) {\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\t\t\treturn !targets.includes(current) && lib.filter.targetEnabled2(card, player, current) && get.effect(current, card, player, player) > 0;\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\tbase += 5;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (get.cardtag(card, \"yingbian_damage\")) {\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\ttargets.filter(function (target) {\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\tget.attitude(player, target) < 0 &&\r\n\t\t\t\t\t\t\t\t\t\t\t(hit ||\r\n\t\t\t\t\t\t\t\t\t\t\t\t!target.mayHaveShan() ||\r\n\t\t\t\t\t\t\t\t\t\t\t\tplayer.hasSkillTag(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"directHit_ai\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttarget: target,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcard: card,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t\t\t\t\t\t)) &&\r\n\t\t\t\t\t\t\t\t\t\t\t!target.hasSkillTag(\"filterDamage\", null, {\r\n\t\t\t\t\t\t\t\t\t\t\t\tplayer: player,\r\n\t\t\t\t\t\t\t\t\t\t\t\tcard: card,\r\n\t\t\t\t\t\t\t\t\t\t\t\tjiu: true,\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\tbase += 5;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn base;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcanLink: function (player, target, card) {\r\n\t\t\t\t\t\t\tif (!target.isLinked() && !player.hasSkill(\"wutiesuolian_skill\")) return false;\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\ttarget.mayHaveShan() &&\r\n\t\t\t\t\t\t\t\t!player.hasSkillTag(\r\n\t\t\t\t\t\t\t\t\t\"directHit_ai\",\r\n\t\t\t\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\ttarget: target,\r\n\t\t\t\t\t\t\t\t\t\tcard: card,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\tif (player.hasSkill(\"jueqing\") || player.hasSkill(\"gangzhi\") || target.hasSkill(\"gangzhi\")) return false;\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbasic: {\r\n\t\t\t\t\t\t\tuseful: [5, 3, 1],\r\n\t\t\t\t\t\t\tvalue: [5, 3, 1],\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\ttarget: function (player, target, card, isLink) {\r\n\t\t\t\t\t\t\t\tvar eff = (function () {\r\n\t\t\t\t\t\t\t\t\tif (!isLink && player.hasSkill(\"jiu\")) {\r\n\t\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t\t!target.hasSkillTag(\"filterDamage\", null, {\r\n\t\t\t\t\t\t\t\t\t\t\t\tplayer: player,\r\n\t\t\t\t\t\t\t\t\t\t\t\tcard: card,\r\n\t\t\t\t\t\t\t\t\t\t\t\tjiu: true,\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (get.attitude(player, target) > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn -7;\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn -4;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\treturn -0.5;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn -1.5;\r\n\t\t\t\t\t\t\t\t})();\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t!isLink &&\r\n\t\t\t\t\t\t\t\t\ttarget.mayHaveShan() &&\r\n\t\t\t\t\t\t\t\t\t!player.hasSkillTag(\r\n\t\t\t\t\t\t\t\t\t\t\"directHit_ai\",\r\n\t\t\t\t\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\ttarget: target,\r\n\t\t\t\t\t\t\t\t\t\t\tcard: card,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\treturn eff / 1.2;\r\n\t\t\t\t\t\t\t\treturn eff;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttag: {\r\n\t\t\t\t\t\t\trespond: 1,\r\n\t\t\t\t\t\t\trespondShan: 1,\r\n\t\t\t\t\t\t\tdamage: function (card) {\r\n\t\t\t\t\t\t\t\tif (game.hasNature(card, \"poison\")) return false;\r\n\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tnatureDamage: function (card) {\r\n\t\t\t\t\t\t\t\tif (game.hasNature(card)) return 1;\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfireDamage: function (card, nature) {\r\n\t\t\t\t\t\t\t\tif (game.hasNature(card, \"fire\")) return 1;\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tthunderDamage: function (card, nature) {\r\n\t\t\t\t\t\t\t\tif (game.hasNature(card, \"thunder\")) return 1;\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tpoisonDamage: function (card, nature) {\r\n\t\t\t\t\t\t\t\tif (game.hasNature(card, \"poison\")) return 1;\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//德克萨斯\r\n\t\tjianyumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tusable: 1,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar cards = get.cards(4);\r\n\t\t\t\tgame.cardsGotoOrdering(cards);\r\n\t\t\t\tplayer.showCards(cards, \"剑雨\");\r\n\t\t\t\tvar suit = [];\r\n\t\t\t\tfor (var i = 0; i < cards.length; i++) {\r\n\t\t\t\t\tvar suitcard = get.suit(cards[i]);\r\n\t\t\t\t\tif (suit.includes(suitcard)) continue;\r\n\t\t\t\t\tsuit.add(suitcard);\r\n\t\t\t\t}\r\n\t\t\t\tvar num = suit.length;\r\n\t\t\t\tif (player.countCards(\"he\") >= suit.length)\r\n\t\t\t\t\tplayer.chooseCard(\"he\", true, \"【剑雨】:将至少\" + num + \"张牌当作【万箭齐发】对你选择牌的等量名其他角色使用\", [num, Infinity]).set(\"ai\", function (card) {\r\n\t\t\t\t\t\treturn get.value(card) <= 6;\r\n\t\t\t\t\t});\r\n\t\t\t\telse event.finish();\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.cards) {\r\n\t\t\t\t\tvar cards = result.cards;\r\n\t\t\t\t\tplayer.addTempSkill(\"jianyumrfz_dam\", \"jianyumrfzAfter\");\r\n\t\t\t\t\tplayer.chooseUseTarget({ name: \"wanjian\" }, cards, true, false).set(\"selectTarget\", function (card, player, target) {\r\n\t\t\t\t\t\tvar num = cards.length;\r\n\t\t\t\t\t\treturn [1, num];\r\n\t\t\t\t\t}).viewAs = true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdam: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.isAlive() && event.cards && event.card.name == \"wanjian\" && !event.player.hasSkill(\"jianyumrfz_debuff\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.player.addTempSkill(\"jianyumrfz_debuff\", { player: \"phaseEnd\" });\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdebuff: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"使用【杀】的次数-1\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num - 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 2.95,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tsudimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tfrequent: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t//抄的郭嘉\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tevent.count = 1; //唯一有实质性改动的地方\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tevent.count--;\r\n\t\t\t\tevent.cards = game.cardsGotoOrdering(get.cards(2)).cards;\r\n\t\t\t\tif (_status.connectMode)\r\n\t\t\t\t\tgame.broadcastAll(function () {\r\n\t\t\t\t\t\t_status.noclearcountdown = true;\r\n\t\t\t\t\t});\r\n\t\t\t\tevent.given_map = {};\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (event.cards.length > 1) {\r\n\t\t\t\t\tplayer.chooseCardButton(\"【速递】:请选择要分配的牌\", true, event.cards, [1, event.cards.length]).set(\"ai\", function (button) {\r\n\t\t\t\t\t\tif (ui.selected.buttons.length == 0) return 1;\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (event.cards.length == 1) {\r\n\t\t\t\t\tevent._result = { links: event.cards.slice(0), bool: true };\r\n\t\t\t\t} else {\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tevent.cards.removeArray(result.links);\r\n\t\t\t\t\tevent.togive = result.links.slice(0);\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.chooseTarget(\"选择一名角色获得\" + get.translation(result.links), true)\r\n\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\tvar att = get.attitude(_status.event.player, target);\r\n\t\t\t\t\t\t\tif (_status.event.enemy) {\r\n\t\t\t\t\t\t\t\treturn -att;\r\n\t\t\t\t\t\t\t} else if (att > 0) {\r\n\t\t\t\t\t\t\t\treturn att / (1 + target.countCards(\"h\"));\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn att / 100;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"enemy\", get.value(event.togive[0], player, \"raw\") < 0);\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 4\");\r\n\t\t\t\tif (result.targets.length) {\r\n\t\t\t\t\tvar id = result.targets[0].playerid,\r\n\t\t\t\t\t\tmap = event.given_map;\r\n\t\t\t\t\tif (!map[id]) map[id] = [];\r\n\t\t\t\t\tmap[id].addArray(event.togive);\r\n\t\t\t\t}\r\n\t\t\t\tif (cards.length > 0) event.goto(2);\r\n\t\t\t\t(\"step 5\");\r\n\t\t\t\tif (_status.connectMode) {\r\n\t\t\t\t\tgame.broadcastAll(function () {\r\n\t\t\t\t\t\tdelete _status.noclearcountdown;\r\n\t\t\t\t\t\tgame.stopCountChoose();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tvar list = [];\r\n\t\t\t\tfor (var i in event.given_map) {\r\n\t\t\t\t\tvar source = (_status.connectMode ? lib.playerOL : game.playerMap)[i];\r\n\t\t\t\t\tplayer.line(source, \"green\");\r\n\t\t\t\t\tlist.push([source, event.given_map[i]]);\r\n\t\t\t\t}\r\n\t\t\t\tgame.loseAsync({\r\n\t\t\t\t\tgain_list: list,\r\n\t\t\t\t\tgiver: player,\r\n\t\t\t\t\tanimate: \"draw\",\r\n\t\t\t\t}).setContent(\"gaincardMultiple\");\r\n\t\t\t\t(\"step 6\");\r\n\t\t\t\tif (event.count > 0 && player.hasSkill(event.name) && !get.is.blocked(event.name, player)) {\r\n\t\t\t\t\tplayer.chooseBool(get.prompt2(event.name)).set(\"frequentSkill\", event.name);\r\n\t\t\t\t} else event.finish();\r\n\t\t\t\t(\"step 7\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tplayer.logSkill(event.name);\r\n\t\t\t\t\tevent.goto(1);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tthreaten: 1.1,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//白金\r\n\t\txujimrfz: {\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.xujimrfz = {\r\n\t\t\t\t\tdamage: 0,\r\n\t\t\t\t\tmaxhand: 0,\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar storage = player.storage.xujimrfz;\r\n\t\t\t\t\tvar str;\r\n\t\t\t\t\tif (storage[\"damage\"] > 0) str = \"下次使用【杀】的伤害基数+\" + storage[\"damage\"] + \"</br>\";\r\n\t\t\t\t\tif (storage[\"maxhand\"] > 0) str = str + \"手牌上限+\" + storage[\"maxhand\"];\r\n\t\t\t\t\tif (!str) return \"没有效果\";\r\n\t\t\t\t\treturn str;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 3,\r\n\t\t\ttrigger: { player: \"phaseDiscardBegin\" },\r\n\t\t\tfrequent: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.getHistory(\"useCard\", function (evt) {\r\n\t\t\t\t\t\tif (!get.tag(evt.card, \"damage\")) return false;\r\n\t\t\t\t\t\tif (evt.targets && evt.targets.length && evt.isPhaseUsing()) {\r\n\t\t\t\t\t\t\tvar targets = evt.targets.slice(0);\r\n\t\t\t\t\t\t\twhile (targets.includes(player)) targets.remove(player);\r\n\t\t\t\t\t\t\treturn targets.length > 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}).length === 0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.storage.xujimrfz[\"damage\"] += 1;\r\n\t\t\t\tplayer.storage.xujimrfz[\"maxhand\"] += 5;\r\n\t\t\t\tif (player.canUseToAnyone(\"sha\", false) && player.hasSha()) player.chooseControl(\"摸牌\", \"出杀\").set(\"prompt\", \"【蓄击】:请选择一项\");\r\n\t\t\t\telse {\r\n\t\t\t\t\tvar num = 2 + player.storage.shiyumrfz_buff;\r\n\t\t\t\t\tplayer.draw(num || 2);\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.index == 0) {\r\n\t\t\t\t\tvar num = 2 + player.storage.shiyumrfz_buff;\r\n\t\t\t\t\tplayer.draw(num || 2);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.addTempSkill(\"xujimrfz_sha\", \"xujimrfzAfter\");\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.chooseToUse(\r\n\t\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t\tfunction (card, player, event) {\r\n\t\t\t\t\t\t\t\tif (get.name(card) != \"sha\") return false;\r\n\t\t\t\t\t\t\t\treturn lib.filter.filterCard.apply(this, arguments);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\"【蓄击】：请你使用一张【杀】\"\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t.set(\"logSkill\", \"xujimrfz\")\r\n\t\t\t\t\t\t.set(\"complexSelect\", true);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"xujimrfz_clear\", \"xujimrfz_dam\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tsha: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card.name == \"sha\" && !event.getParent().directHit.includes(event.target);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlogTarget: \"target\",\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar storage = player.storage.shiyumrfz_buff;\r\n\t\t\t\t\t\tif (!storage) storage = 0;\r\n\t\t\t\t\t\tvar id = trigger.target.playerid;\r\n\t\t\t\t\t\tvar map = trigger.getParent().customArgs;\r\n\t\t\t\t\t\tif (!map[id]) map[id] = {};\r\n\t\t\t\t\t\tif (typeof map[id].shanRequired == \"number\") {\r\n\t\t\t\t\t\t\tmap[id].shanRequired++;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmap[id].shanRequired = 2 + storage;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tplayer.removeSkill(\"xujimrfz_sha\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.xujimrfz[\"maxhand\"] = 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn num + (player.storage.xujimrfz[\"maxhand\"] || 0);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdam: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.storage.xujimrfz[\"damage\"] < 1) return false;\r\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar storage = player.storage.xujimrfz[\"damage\"];\r\n\t\t\t\t\t\tplayer.logSkill(\"xujimrfz\");\r\n\t\t\t\t\t\tif (!trigger.baseDamage) trigger.baseDamage = 1;\r\n\t\t\t\t\t\ttrigger.baseDamage += storage;\r\n\t\t\t\t\t\tplayer.storage.xujimrfz[\"damage\"] = 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshiyumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationColor: \"wood\",\r\n\t\t\tjuexingji: true,\r\n\t\t\tforced: true,\r\n\t\t\tunique: true,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.num >= 2;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.storage.shiyumrfz = true;\r\n\t\t\t\tplayer.awakenSkill(\"shiyumrfz\");\r\n\t\t\t\tplayer.addSkill(\"shiyumrfz_buff\");\r\n\t\t\t\tif (!player.storage.shiyumrfz_buff) player.storage.shiyumrfz_buff = 0;\r\n\t\t\t\tplayer.storage.shiyumrfz_buff += 1;\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tbuff: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tattackRange: function (player, num) {\r\n\t\t\t\t\t\t\treturn (num += 1);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tviewHandcard: true,\r\n\t\t\t\t\t\tskillTagFilter(player, tag, arg) {\r\n\t\t\t\t\t\t\tif (player === arg || !player.inRange(arg)) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//因陀罗\r\n\t\tsuijiamrfz: {\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.suijiamrfz = {\r\n\t\t\t\t\tdel: false,\r\n\t\t\t\t\tdamage: 0,\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar isdel = player.storage.suijiamrfz[\"del\"];\r\n\t\t\t\treturn (isdel == false && event.player.hujia > 0) || isdel == true;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\ttrigger.num += 1 + player.storage.suijiamrfz[\"damage\"] || 1;\r\n\t\t\t},\r\n\t\t\tgroup: \"suijiamrfz_clear\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.suijiamrfz = {\r\n\t\t\t\t\t\t\tdel: false,\r\n\t\t\t\t\t\t\tdamage: 0,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thuquanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: [\"chooseToRespond\", \"chooseToUse\"],\r\n\t\t\thiddenCard: function (player, name) {\r\n\t\t\t\tif (player.countCards(\"h\") < 1 || player.hasSkill(\"huquanmrfz_ban\")) return false;\r\n\t\t\t\tif (name != \"shan\" && name != \"wuxie\") return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.hasSkill(\"huquanmrfz_ban\") || player.countCards(\"h\") < 1) return false;\r\n\t\t\t\tfor (var name of [\"wuxie\", \"shan\"]) {\r\n\t\t\t\t\tif (event.filterCard({ name: name, isCard: true }, player, event)) return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tchooseButton: {\r\n\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\tvar vcards = [];\r\n\t\t\t\t\tfor (var name of [\"wuxie\", \"shan\"]) {\r\n\t\t\t\t\t\tvar card = { name: name, isCard: true };\r\n\t\t\t\t\t\tif (event.filterCard && event.filterCard(card, player, event)) {\r\n\t\t\t\t\t\t\tif (name == \"shan\") vcards.push([\"基本\", \"\", name]);\r\n\t\t\t\t\t\t\tif (name == \"wuxie\") vcards.push([\"锦囊\", \"\", name]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * @type {Dialog}\r\n\t\t\t\t\t */\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tvar dialog = ui.create.dialog(\"虎拳\", [vcards, \"vcard\"], \"hidden\");\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tdialog.direct = true;\r\n\t\t\t\t\treturn dialog;\r\n\t\t\t\t},\r\n\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tfilterCard: card => {\r\n\t\t\t\t\t\t\treturn card.number > 5;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tselectCard: 1,\r\n\t\t\t\t\t\tviewAs: {\r\n\t\t\t\t\t\t\tname: links[0][2],\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t\tprecontent: function () {\r\n\t\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\t\tvar list = [\"【碎甲】中{ }内的数字+1直到你下个回合结束\"];\r\n\t\t\t\t\t\t\tif (!player.storage.suijiamrfz)\r\n\t\t\t\t\t\t\t\tplayer.storage.suijiamrfz = {\r\n\t\t\t\t\t\t\t\t\tdel: false,\r\n\t\t\t\t\t\t\t\t\tdamage: 0,\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tif (player.storage.suijiamrfz[\"del\"] == false) list.push(\"删除【碎甲】中[ ]内的描述直到你下个回合结束\");\r\n\t\t\t\t\t\t\tif (list.length > 1)\r\n\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t\t.chooseControl()\r\n\t\t\t\t\t\t\t\t\t.set(\"choiceList\", list)\r\n\t\t\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.set(\"prompt\", \"【虎拳】:请选择一项\");\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tplayer.storage.suijiamrfz[\"damage\"] = +1;\r\n\t\t\t\t\t\t\t\tplayer.logSkill(\"huquanmrfz\");\r\n\t\t\t\t\t\t\t\tplayer.addTempSkill(\"huquanmrfz_ban\", { global: \"phaseEnd\" });\r\n\t\t\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\t\tif (result.index == 0) {\r\n\t\t\t\t\t\t\t\tplayer.storage.suijiamrfz[\"damage\"] = +1;\r\n\t\t\t\t\t\t\t} else player.storage.suijiamrfz[\"del\"] = true;\r\n\t\t\t\t\t\t\tplayer.logSkill(\"huquanmrfz\");\r\n\t\t\t\t\t\t\tplayer.addTempSkill(\"huquanmrfz_ban\", { global: \"phaseEnd\" });\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\treturn \"【虎拳】：视为使用一张【\" + get.translation(links[0][2]) + \"】\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\trespondShan: true,\r\n\t\t\t\torder: 10,\r\n\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\t\treturn card.number > 5;\r\n\t\t\t\t\t\t}) > 0 && !player.hasSkill(\"huquanmrfz_ban\")\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t\tresult: { player: 1 },\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//温米\r\n\t\tbaiweimrfz: {\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar storage = player.storage.baiweimrfz,\r\n\t\t\t\t\t\ttext;\r\n\t\t\t\t\tif (Object.keys(player.storage.baiweimrfz).length < 1) return \"没有记录的牌\";\r\n\t\t\t\t\tfor (var key in storage) {\r\n\t\t\t\t\t\ttext = (text === undefined ? \"\" : text) + get.translation(key) + \":\" + storage[key] + \"</br>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn text;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 4,\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.baiweimrfz = {};\r\n\t\t\t},\r\n\t\t\tenable: [\"chooseToUse\", \"chooseToRespond\"],\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.countCards(\"h\") < 1 || Object.keys(player.storage.baiweimrfz).length < 1) return false;\r\n\t\t\t\tfor (var i of lib.inpile) {\r\n\t\t\t\t\tvar type = get.type(i);\r\n\t\t\t\t\tif ((type == \"basic\" || type == \"trick\") && event.filterCard({ name: i }, player, event) && player.storage.baiweimrfz.hasOwnProperty(i)) return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tchooseButton: {\r\n\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\tvar number = {};\r\n\t\t\t\t\tfor (var i = 1; i <= get.cardNameLength(lib.inpile, true).length; i++) {\r\n\t\t\t\t\t\tnumber[i] = [];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (var i = 1; i <= get.cardNameLength(lib.inpile, true).length; i++) {\r\n\t\t\t\t\t\tfor (var j = 0; j < lib.inpile.length; j++) {\r\n\t\t\t\t\t\t\tvar name = lib.inpile[j];\r\n\t\t\t\t\t\t\tif (get.type(name) == \"delay\" || get.type(name) == \"equip\") continue;\r\n\t\t\t\t\t\t\tif (!event.filterCard({ name: name }, player, event)) continue;\r\n\t\t\t\t\t\t\tif (!player.storage.baiweimrfz.hasOwnProperty(name)) continue;\r\n\t\t\t\t\t\t\tif (get.cardNameLength(name) == i) {\r\n\t\t\t\t\t\t\t\tif (name == \"sha\") {\r\n\t\t\t\t\t\t\t\t\tif (event.filterCard({ name: name }, player, event)) number[i].push([\"基本\", \"\", \"sha\"]);\r\n\t\t\t\t\t\t\t\t\tfor (var k of [\"fire\", \"thunder\", \"ice\", \"stab\"]) {\r\n\t\t\t\t\t\t\t\t\t\tif (event.filterCard({ name: name, nature: k }, player, event)) number[i].push([\"基本\", \"\", \"sha\", k]);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (get.type(name) == \"trick\" && event.filterCard({ name: name }, player, event)) number[i].push([\"锦囊\", \"\", name]);\r\n\t\t\t\t\t\t\t\telse if (get.type(name) == \"basic\" && event.filterCard({ name: name }, player, event)) number[i].push([\"基本\", \"\", name]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * @type {Dialog}\r\n\t\t\t\t\t */\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tvar dialog = ui.create.dialog;\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tdialog = [\"百味：请选择一张牌\"];\r\n\t\t\t\t\tfor (var i = 1; i < Object.keys(number).length; i++) {\r\n\t\t\t\t\t\tif (!number[i].length) continue;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tdialog.push('<div class=\"text center\">' + get.cnNumber(i) + \"字</div>\");\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tdialog.push([number[i], \"vcard\"]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn dialog;\r\n\t\t\t\t},\r\n\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tfilterCard: function (card) {\r\n\t\t\t\t\t\t\tvar selected = ui.selected.cards,\r\n\t\t\t\t\t\t\t\tnum = get.cardNameLength(links[0][2]);\r\n\t\t\t\t\t\t\tif (selected.length) {\r\n\t\t\t\t\t\t\t\tvar num2 = 0;\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < selected.length; i++) {\r\n\t\t\t\t\t\t\t\t\tnum2 += get.cardNameLength(selected[i]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tnum -= num2;\r\n\t\t\t\t\t\t\t\treturn get.cardNameLength(card) <= num;\r\n\t\t\t\t\t\t\t} else return get.cardNameLength(card) <= num;\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tselectCard: function () {\r\n\t\t\t\t\t\t\tvar num = Infinity,\r\n\t\t\t\t\t\t\t\tselected = ui.selected.cards,\r\n\t\t\t\t\t\t\t\tnum2 = get.cardNameLength(links[0][2]);\r\n\t\t\t\t\t\t\tif (selected.length) {\r\n\t\t\t\t\t\t\t\tvar num3 = 0;\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < selected.length; i++) {\r\n\t\t\t\t\t\t\t\t\tnum3 += get.cardNameLength(selected[i]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif ((num = Infinity)) num = 1;\r\n\t\t\t\t\t\t\t\tif (num3 != num2) num = num + selected.length;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn num;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\taudio: \"baiweimrfz\",\r\n\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t\tcheck: function (card) {\r\n\t\t\t\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tposition: \"h\",\r\n\t\t\t\t\t\tviewAs: { name: links[0][2], nature: links[0][3] },\r\n\t\t\t\t\t\tprecontent: function () {\r\n\t\t\t\t\t\t\tvar name = lib.skill.baiweimrfz_backup.viewAs.name;\r\n\t\t\t\t\t\t\tplayer.storage.baiweimrfz[name]--;\r\n\t\t\t\t\t\t\tif (player.storage.baiweimrfz[name] == 0) delete player.storage.baiweimrfz[name];\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\treturn \"将任意张字数之和为\" + get.cnNumber(links[0][2]) + \"的牌为当做\" + (get.translation(links[0][3]) || \"\") + get.translation(links[0][2]) + \"使用\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\thiddenCard: function (player, name) {\r\n\t\t\t\tif (!lib.inpile.includes(name)) return false;\r\n\t\t\t\tvar type = get.type(name);\r\n\t\t\t\treturn (type == \"basic\" || type == \"trick\") && player.storage.baiweimrfz.hasOwnProperty(name) && player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tfireAttack: true,\r\n\t\t\t\trespondShan: true,\r\n\t\t\t\trespondSha: true,\r\n\t\t\t\tskillTagFilter: function (player) {\r\n\t\t\t\t\tif (!player.countCards(\"h\") || player.hasSkill(\"baiweimrfz_ban\")) return false;\r\n\t\t\t\t},\r\n\t\t\t\torder: 1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: function (player) {\r\n\t\t\t\t\t\tif (_status.event.dying) return get.attitude(player, _status.event.dying);\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: \"baiweimrfz_use\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\tuse: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"useCard\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!event.card || !event.card.isCard || player.hasSkill(\"baiweimrfz_ban\")) return false;\r\n\t\t\t\t\t\treturn get.type(event.card) == \"trick\" || get.type(event.card) == \"basic\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar name = trigger.card.name;\r\n\t\t\t\t\t\tif (!player.storage.baiweimrfz) player.storage.baiweimrfz = {};\r\n\t\t\t\t\t\tif (player.storage.baiweimrfz.hasOwnProperty(name)) {\r\n\t\t\t\t\t\t\tplayer.storage.baiweimrfz[name]++;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tplayer.storage.baiweimrfz[name] = 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (trigger.player != player && _status.currentPhase != player) player.addTempSkill(\"baiweimrfz_ban\", { global: \"phaseEnd\" });\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tnuanxiangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.hasSkill(\"nuanxiangmrfz_ban\")) return false;\r\n\t\t\t\treturn event.card && event.card.cards && !event.card.isCard;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"【暖香】:是否令至多\" + get.cnNumber(event.card.cards.length) + \"名角色摸一张牌？\";\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar num = trigger.card.cards.length;\r\n\t\t\t\tplayer.addTempSkill(\"nuanxiangmrfz_ban\", { global: \"phaseEnd\" });\r\n\t\t\t\tplayer.chooseTarget(true, [1, num], \"【暖香】:请选择至多\" + get.cnNumber(num) + \"名角色\").ai = function (target) {\r\n\t\t\t\t\treturn get.attitude(player, target) > 0;\r\n\t\t\t\t};\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.targets) {\r\n\t\t\t\t\tplayer.logSkill(\"nuanxiangmrfz\");\r\n\t\t\t\t\tfor (var i of result.targets) {\r\n\t\t\t\t\t\tplayer.line(i);\r\n\t\t\t\t\t\ti.draw();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//梅尔\r\n\t\tshuitamrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"expansion\",\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t},\r\n\t\t\tonremove: function (player, skill) {\r\n\t\t\t\tvar cards = player.getExpansions(skill);\r\n\t\t\t\tif (cards.length) player.loseToDiscardpile(cards);\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tignoredHandcard: function (card, player) {\r\n\t\t\t\t\tif (card.hasGaintag(\"shuitamrfzx\")) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcardDiscardable: function (card, player, name) {\r\n\t\t\t\t\tif (name == \"phaseDiscard\" && card.hasGaintag(\"shuitamrfzx\")) return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tderivation: [\"baopomrfz\", \"mihuomrfz\"],\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tlocked: false,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (event.name != \"phase\" || game.phaseNumber == 0) && player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.chooseCard(true, \"【水獭】:请选择至多三张牌并标记为‘咪啵’\", [1, 3]).set(\"ai\", function (card) {\r\n\t\t\t\t\treturn get.type(card) != \"equip\" && get.type(card) != \"delay\";\r\n\t\t\t\t});\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.cards) {\r\n\t\t\t\t\tplayer.addGaintag(result.cards, \"shuitamrfzx\");\r\n\t\t\t\t\tfor (i of result.cards) {\r\n\t\t\t\t\t\ti.storage.shuitamrfzx = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseControl(\"爆破\", \"迷惑\")\r\n\t\t\t\t\t.set(\"prompt\", \"【水獭】:请选择获得一个技能\")\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\treturn [0, 1].randomGet();\r\n\t\t\t\t\t});\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tif (result.index == 0) {\r\n\t\t\t\t\tplayer.addSkill(\"baopomrfz\");\r\n\t\t\t\t} else if (result.index == 1) {\r\n\t\t\t\t\tplayer.addSkill(\"mihuomrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"shuitamrfz_reget\", \"shuitamrfz_end\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tend: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.getExpansions(\"shuitamrfz\").length > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tvar cards = player.getExpansions(\"shuitamrfz\");\r\n\t\t\t\t\t\tif (cards.length == 1) {\r\n\t\t\t\t\t\t\tfor (i of cards) {\r\n\t\t\t\t\t\t\t\ti.storage.shuitamrfzx = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tplayer.gain(cards, \"gain2\").gaintag = [\"shuitamrfzx\"];\r\n\t\t\t\t\t\t\tgame.log(player, \"收回了\" + get.translation(cards));\r\n\t\t\t\t\t\t\tplayer.logSkill(\"shuitamrfz\");\r\n\t\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tplayer.chooseButton([\"【水獭】:请选择获得其中一张牌\", cards]).ai = function (button) {\r\n\t\t\t\t\t\t\t\treturn get.value(button.link);\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.links) {\r\n\t\t\t\t\t\t\tfor (i of result.links) {\r\n\t\t\t\t\t\t\t\ti.storage.shuitamrfzx = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tplayer.gain(result.links, \"gain2\").gaintag = [\"shuitamrfzx\"];\r\n\t\t\t\t\t\t\tgame.log(player, \"收回了\" + get.translation(result.links));\r\n\t\t\t\t\t\t\tplayer.logSkill(\"shuitamrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\treget: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"loseAfter\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar evt = event.getl(player);\r\n\t\t\t\t\t\tif (!evt || !evt.hs || !evt.hs.length) return false;\r\n\t\t\t\t\t\tif (event.name == \"lose\") {\r\n\t\t\t\t\t\t\tfor (var i in event.gaintag_map) {\r\n\t\t\t\t\t\t\t\tif (event.gaintag_map[i].includes(\"shuitamrfzx\")) return true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn player.hasHistory(\"lose\", function (evt) {\r\n\t\t\t\t\t\t\tif (event != evt.getParent()) return false;\r\n\t\t\t\t\t\t\tfor (var i in evt.gaintag_map) {\r\n\t\t\t\t\t\t\t\tif (evt.gaintag_map[i].includes(\"shuitamrfzx\")) return true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tif (trigger.delay == false) game.delay();\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tvar cards = [];\r\n\t\t\t\t\t\tfor (var i = 0; i < trigger.cards2.length; i++) {\r\n\t\t\t\t\t\t\tvar card = trigger.cards2[i];\r\n\t\t\t\t\t\t\tif (card.storage.shuitamrfzx) {\r\n\t\t\t\t\t\t\t\tcards.push(card);\r\n\t\t\t\t\t\t\t\tclearTimeout(card.timeout);\r\n\t\t\t\t\t\t\t\tcard.classList.remove(\"removing\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (cards.length > 0) {\r\n\t\t\t\t\t\t\tplayer.logSkill(\"shuitamrfz\");\r\n\t\t\t\t\t\t\tplayer.addToExpansion(cards, player, \"giveAuto\").gaintag.add(\"shuitamrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tbaopomrfz: {\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.baopomrfz = false;\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tlimited: true,\r\n\t\t\tcharlotte: true,\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationColor: \"gray\",\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t!player.storage.baopomrfz &&\r\n\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\treturn card.storage.shuitamrfzx;\r\n\t\t\t\t\t}) > 0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (player.hasUnknown()) return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.awakenSkill(event.name);\r\n\t\t\t\tplayer.storage.baopomrfz = true;\r\n\t\t\t\tplayer.removeGaintag(\"shuitamrfzx\");\r\n\t\t\t\tfor (var i of player.getCards(\"h\")) {\r\n\t\t\t\t\tdelete i.storage.shuitamrfzx;\r\n\t\t\t\t}\r\n\t\t\t\tplayer.addTempSkill(\"baopomrfz_tmp\", { player: \"baopomrfzAfter\" });\r\n\t\t\t\tplayer.chooseTarget(true, \"【爆破】:请选择至多三名其他角色\", [1, 3], function (card, player, target) {\r\n\t\t\t\t\treturn target != player;\r\n\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\treturn get.damageEffect(target, player) && !target.hasSkillTag(\"nofire\");\r\n\t\t\t\t};\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.targets) {\r\n\t\t\t\t\tevent.targets = result.targets;\r\n\t\t\t\t\tevent.cards = [];\r\n\t\t\t\t} else event.finish();\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (event.targets.length) {\r\n\t\t\t\t\tevent.targets[0].judge(function (card) {\r\n\t\t\t\t\t\tif (get.color(card) == \"red\") return -4;\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t}).judge2 = function (result) {\r\n\t\t\t\t\t\treturn result.bool == false ? true : false;\r\n\t\t\t\t\t};\r\n\t\t\t\t} else event.goto(4);\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tif (result.bool == false) {\r\n\t\t\t\t\tevent.targets[0].damage(2, \"fire\");\r\n\t\t\t\t\tplayer.logSkill(\"baopomrfz\", event.targets[0]);\r\n\t\t\t\t}\r\n\t\t\t\tevent.cards.push(result.card);\r\n\t\t\t\tevent.targets.shift();\r\n\t\t\t\tif (event.targets.length > 0) event.goto(2);\r\n\t\t\t\t(\"step 4\");\r\n\t\t\t\tif (event.cards) {\r\n\t\t\t\t\tvar cards = [];\r\n\t\t\t\t\tfor (var i = 0; i < event.cards.length; i++) {\r\n\t\t\t\t\t\tvar card = event.cards[i];\r\n\t\t\t\t\t\tif (get.position(card, true) == \"d\") cards.push(card);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\t\ti.storage.shuitamrfzx = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplayer.gain(cards, \"gain2\").gaintag.add(\"shuitamrfzx\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\ttmp: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tmihuomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"damageBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.source == undefined) return false;\r\n\t\t\t\treturn player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"【迷惑】:你可以令\" + get.translation(event.source) + \"展示你的一张手牌，若为‘咪啵’则此伤害-1\";\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tfor (var i of player.getCards(\"h\")) {\r\n\t\t\t\t\tif (i.storage.shuitamrfzx) return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\ttrigger.source.choosePlayerCard(player, \"h\", true);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tplayer.showCards(result.cards, get.translation(trigger.source) + \"展示了\" + get.translation(player) + \"一张牌</br>此牌\" + (result.cards[0].storage.shuitamrfzx ? \"<font color=#FF0000>有</font>\" : \"<font color=#00FF1A>无</font>\") + \"‘咪啵’标记\");\r\n\t\t\t\tif (result.cards[0].storage.shuitamrfzx) {\r\n\t\t\t\t\tplayer.discard(result.cards[0]);\r\n\t\t\t\t\ttrigger.num--;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\t//凛冬\r\n\t\tdongjiangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn current != player && get.attitude(current, player) > 0;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.chooseCard(\"【冬将】:请选择你要分配的牌\", true, [1, Infinity]);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tevent.cards = result.cards;\r\n\t\t\t\tplayer.chooseTarget(\"【冬将】:请选择你要分配的角色（\" + get.translation(event.cards) + \"）\", true, function (card, player, target) {\r\n\t\t\t\t\treturn target != player;\r\n\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\treturn get.attitude(target, player) > 0;\r\n\t\t\t\t};\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tplayer.give(event.cards, result.targets[0]);\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tif (player.countCards(\"h\") > 0) event.goto(0);\r\n\t\t\t\t(\"step 4\");\r\n\t\t\t\tif (player.canUseToAnyone(\"sha\")) {\r\n\t\t\t\t\tplayer.addTempSkill(\"dongjiangmrfz_dam\", \"useCardAfter\");\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.chooseUseTarget(\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t\t\t\tisCard: true,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\"请选择【杀】的目标\"\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t.set(\"forced\", true)\r\n\t\t\t\t\t\t.set(\"addCount\", false);\r\n\t\t\t\t} else event.finish();\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdam: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card.name == \"sha\" && event.card.cards.length == 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.drawTo(3);\r\n\t\t\t\t\t\tplayer.removeSkill(\"dongjiangmrfz_dam\");\r\n\t\t\t\t\t\tplayer.logSkill(\"dongjiangmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txianlingmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar cards = player.getCards(\"h\");\r\n\t\t\t\tif (player.countCards(\"h\") < 1) event.goto(1);\r\n\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\tif (player.canUseToAnyone(i, false)) {\r\n\t\t\t\t\t\tevent.goto(2);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tplayer.draw();\r\n\t\t\t\tevent.goto(0);\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseToUse(\"【先领】:请使用一张牌\", true)\r\n\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\treturn player.canUse(card, target, false);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"addCount\", false)\r\n\t\t\t\t\t.set(\"forced\", true);\r\n\t\t\t\t(\"step 3\");\r\n\t\t\t\tif (game.roundNumber != 1) {\r\n\t\t\t\t\tplayer.chooseTarget(\"【先领】:你可以令一名其他角色执行一次相同的流程\", function (card, player, target) {\r\n\t\t\t\t\t\treturn target != player;\r\n\t\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\t\treturn get.attitude(target, player) > 0;\r\n\t\t\t\t\t};\r\n\t\t\t\t} else event.finish();\r\n\t\t\t\t(\"step 4\");\r\n\t\t\t\tif (result.targets) {\r\n\t\t\t\t\tevent.target = result.targets[0];\r\n\t\t\t\t} else event.finish();\r\n\t\t\t\t(\"step 5\");\r\n\t\t\t\tvar cards = event.target.getCards(\"h\");\r\n\t\t\t\tif (event.target.countCards(\"h\") < 1) event.goto(6);\r\n\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\tif (event.target.canUseToAnyone(i, false)) {\r\n\t\t\t\t\t\tevent.goto(7);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 6\");\r\n\t\t\t\tevent.target.draw();\r\n\t\t\t\tevent.goto(5);\r\n\t\t\t\t(\"step 7\");\r\n\t\t\t\tevent.target\r\n\t\t\t\t\t.chooseToUse(\"【先领】:请使用一张牌\")\r\n\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\treturn event.target.canUse(card, target, false);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"addCount\", false)\r\n\t\t\t\t\t.set(\"forced\", true);\r\n\t\t\t},\r\n\t\t},\r\n\t\t//陨星\r\n\t\tdingyuanmrfz: {\r\n\t\t\tderivation: \"zhimingmrfz\",\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar storage = player.storage.yxliumingmrfz_count;\r\n\t\t\t\t\tif (player.awakenedSkills && player.awakenedSkills.includes(\"dingyuanmrfz\")) {\r\n\t\t\t\t\t\treturn \"置于过武将牌上的牌:\" + get.translation(storage[\"card\"]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn \"已置于过武将牌上\" + storage[\"count\"] + \"张牌</br>置于过武将牌上的牌（装备牌和延时锦囊除外）:\" + get.translation(storage[\"card\"]);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationColor: \"thunder\",\r\n\t\t\tunique: true,\r\n\t\t\tjuexingji: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseZhunbeiBegin\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.storage.yxliumingmrfz_count[\"count\"] >= 3;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.awakenSkill(\"dingyuanmrfz\");\r\n\t\t\t\tplayer.loseMaxHp();\r\n\t\t\t\tplayer.addSkill(\"zhimingmrfz\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tyxliumingmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseBegin\",\r\n\t\t\t},\r\n\t\t\tmarktext: \"铭\",\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"expansion\",\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t},\r\n\t\t\tonremove: function (player, skill) {\r\n\t\t\t\tvar cards = player.getExpansions(skill);\r\n\t\t\t\tif (cards.length) player.loseToDiscardpile(cards);\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.getExpansions(\"yxliumingmrfz\").length < 1;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar cards = game.cardsGotoOrdering(get.cards(1)).cards[0];\r\n\t\t\t\tplayer.addToExpansion(cards, player, \"giveAuto\").gaintag.add(\"yxliumingmrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"yxliumingmrfz_target\", \"yxliumingmrfz_use\", \"yxliumingmrfz_count\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tcount: {\r\n\t\t\t\t\tinit: function (player) {\r\n\t\t\t\t\t\tplayer.storage.yxliumingmrfz_count = {\r\n\t\t\t\t\t\t\tcount: 0,\r\n\t\t\t\t\t\t\tcard: [],\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: function (player) {\r\n\t\t\t\t\t\tdelete player.storage.yxliumingmrfz_count;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"addToExpansionAfter\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.getParent().name == \"yxliumingmrfz\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (!player.storage.yxliumingmrfz_count)\r\n\t\t\t\t\t\t\tplayer.storage.yxliumingmrfz_count = {\r\n\t\t\t\t\t\t\t\tcount: 0,\r\n\t\t\t\t\t\t\t\tcard: [],\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\tif (!player.awakenedSkills || !player.awakenedSkills.includes(\"dingyuanmrfz\")) player.storage.yxliumingmrfz_count[\"count\"]++;\r\n\t\t\t\t\t\tif (trigger.cards) {\r\n\t\t\t\t\t\t\tfor (var i of trigger.cards) {\r\n\t\t\t\t\t\t\t\tif (get.type(i) == \"equip\" || get.type(i) == \"delay\") continue;\r\n\t\t\t\t\t\t\t\tif (player.storage.yxliumingmrfz_count[\"card\"].includes(i.name)) continue;\r\n\t\t\t\t\t\t\t\tplayer.storage.yxliumingmrfz_count[\"card\"].add(i.name);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\tuse: {\r\n\t\t\t\t\tenable: \"chooseToUse\",\r\n\t\t\t\t\thiddenCard: function (player, name) {\r\n\t\t\t\t\t\tif (player.getExpansions(\"yxliumingmrfz\").length < 1) return false;\r\n\t\t\t\t\t\treturn name == player.getExpansions(\"yxliumingmrfz\")[0].name;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.getExpansions(\"yxliumingmrfz\").length < 1) return false;\r\n\t\t\t\t\t\treturn event.filterCard({ name: player.getExpansions(\"yxliumingmrfz\")[0].name, isCard: true }, player, event);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tchooseButton: {\r\n\t\t\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\t\t\tvar vcards = [];\r\n\t\t\t\t\t\t\tvar card = player.getExpansions(\"yxliumingmrfz\")[0].name;\r\n\t\t\t\t\t\t\tvar type = get.translation(get.type2(card));\r\n\t\t\t\t\t\t\tif (event.filterCard({ name: card, isCard: true }, player, event)) vcards.push([type, \"\", card]);\r\n\r\n\t\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t\t * @type { Dialog }\r\n\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tvar dialog = ui.create.dialog(\"流铭\", [vcards, \"vcard\"], \"hidden\");\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tdialog.direct = true;\r\n\t\t\t\t\t\t\treturn dialog;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tfilterCard: card => {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\t\treturn !!player.getExpansions(\"yxliumingmrfz\")[0];\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tselectCard: -1,\r\n\t\t\t\t\t\t\t\tposition: \"x\",\r\n\t\t\t\t\t\t\t\tviewAs: {\r\n\t\t\t\t\t\t\t\t\tname: links[0][2],\r\n\t\t\t\t\t\t\t\t\tnature: links[0][3],\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tprecontent: function () {\r\n\t\t\t\t\t\t\t\t\tplayer.logSkill(\"yxliumingmrfz\");\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\t\t\treturn \"【流铭】：使用一张\" + (links[0][3] ? get.translation(links[0][3]) : \"\") + \"【\" + get.translation(links[0][2]) + \"】\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\torder: function () {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tvar card = player.getExpansions(\"yxliumingmrfz\")[0];\r\n\t\t\t\t\t\t\treturn get.order(card) + 0.1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttarget: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\ttarget: \"useCardToPlayered\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.player == player) return false;\r\n\t\t\t\t\t\tif (player.getExpansions(\"yxliumingmrfz\").length == 0 || !event.card) return false;\r\n\t\t\t\t\t\tvar suit = get.suit(event.card);\r\n\t\t\t\t\t\treturn !!player.getExpansions(\"yxliumingmrfz\").filter(function (magic) {\r\n\t\t\t\t\t\t\treturn get.suit(magic) == suit || magic.number != event.card.number;\r\n\t\t\t\t\t\t}).length;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tvar card = player.getExpansions(\"yxliumingmrfz\")[0];\r\n\t\t\t\t\t\tvar num1 = card.number,\r\n\t\t\t\t\t\t\tnum2 = trigger.card.number;\r\n\t\t\t\t\t\tif (num1 != num2) {\r\n\t\t\t\t\t\t\t(\"step 0\");\r\n\t\t\t\t\t\t\tvar type = get.type2(card);\r\n\t\t\t\t\t\t\tvar eff = get.effect(player, trigger.card, trigger.player, trigger.player);\r\n\t\t\t\t\t\t\ttrigger.player\r\n\t\t\t\t\t\t\t\t.chooseToDiscard(\"【流铭】:请弃置一张\" + get.translation(get.type(card)) + \"牌，否则此牌对\" + get.translation(player) + \"无效\")\r\n\t\t\t\t\t\t\t\t.set(\"filterCard\", function (card) {\r\n\t\t\t\t\t\t\t\t\treturn get.type2(card) == _status.event.type;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\t\t\tif (_status.event.eff > 0) {\r\n\t\t\t\t\t\t\t\t\t\treturn 10 - get.value(card);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"eff\", eff)\r\n\t\t\t\t\t\t\t\t.set(\"type\", type);\r\n\t\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\t\tif (result.bool == false) {\r\n\t\t\t\t\t\t\t\ttrigger.targets.remove(player);\r\n\t\t\t\t\t\t\t\ttrigger.getParent().triggeredTargets2.remove(player);\r\n\t\t\t\t\t\t\t\ttrigger.untrigger();\r\n\t\t\t\t\t\t\t\tplayer.removeSkill(\"yxliumingmrfz_target\");\r\n\t\t\t\t\t\t\t\tplayer.addTempSkill(\"yxliumingmrfz_reget\", { global: \"phaseBegin\" });\r\n\t\t\t\t\t\t\t\tplayer.addTempSkill(\"yxliumingmrfz_ban\", { global: \"phaseEnd\" });\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tvar card = player.getExpansions(\"yxliumingmrfz\")[0];\r\n\t\t\t\t\t\tif (get.suit(card) == get.suit(trigger.card)) {\r\n\t\t\t\t\t\t\tplayer.gain(card, \"gain2\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tplayer.logSkill(\"yxliumingmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\treget: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.addSkill(\"yxliumingmrfz_target\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhimingmrfz: {\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar storage = player.storage.yxliumingmrfz_count;\r\n\t\t\t\t\tif (player.awakenedSkills && player.awakenedSkills.includes(\"dingyuanmrfz\")) {\r\n\t\t\t\t\t\treturn \"置于过武将牌上的牌（装备牌和延时锦囊除外）:\" + get.translation(storage[\"card\"]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn \"已置于过武将牌上\" + storage[\"count\"] + \"张牌</br>置于过武将牌上的牌（装备牌和延时锦囊除外）:\" + get.translation(storage[\"card\"]);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tenable: [\"chooseToUse\", \"chooseToRespond\"],\r\n\t\t\thiddenCard: function (player, name) {\r\n\t\t\t\tvar cards = player.storage.yxliumingmrfz_count[\"card\"];\r\n\t\t\t\tif (player.countCards(\"he\") < 1 || !cards || player.hasSkill(\"zhimingmrfz_ban\")) return false;\r\n\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\tif (name == i) return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar cards = player.storage.yxliumingmrfz_count[\"card\"];\r\n\t\t\t\tif (player.countCards(\"he\") < 1 || !cards || player.hasSkill(\"zhimingmrfz_ban\")) return false;\r\n\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\tif (event.filterCard({ name: i, isCard: true }, player, event)) return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tchooseButton: {\r\n\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\tvar vcards = [];\r\n\t\t\t\t\tvar list = player.storage.yxliumingmrfz_count[\"card\"];\r\n\t\t\t\t\tfor (var name of list) {\r\n\t\t\t\t\t\tvar card = { name: name, isCard: true };\r\n\t\t\t\t\t\tvar type = get.type(name);\r\n\t\t\t\t\t\tif (event.filterCard(card, player, event)) vcards.push([type, \"\", name]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * @type { Dialog }\r\n\t\t\t\t\t */\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tvar dialog = ui.create.dialog(\"祗铭\", [vcards, \"vcard\"], \"hidden\");\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tdialog.direct = true;\r\n\t\t\t\t\treturn dialog;\r\n\t\t\t\t},\r\n\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tfilterCard: () => true,\r\n\t\t\t\t\t\tselectCard: 1,\r\n\t\t\t\t\t\tviewAs: {\r\n\t\t\t\t\t\t\tname: links[0][2],\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tposition: \"he\",\r\n\t\t\t\t\t\tprecontent: function () {\r\n\t\t\t\t\t\t\tplayer.logSkill(\"zhimingmrfz\");\r\n\t\t\t\t\t\t\tplayer.addTempSkill(\"zhimingmrfz_ban\", { global: \"phaseEnd\" });\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\treturn \"【祗铭】：将一张牌当作【\" + get.translation(links[0][2]) + \"】使用或打出\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//羽毛笔\r\n\t\ttiaojiumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\taudioname: [\"longshelanmrfz\"],\r\n\t\t\tderivation: [\"jiu\"],\r\n\t\t\tenable: \"chooseToUse\",\r\n\t\t\tfilterCard: function (card, player) {\r\n\t\t\t\tif (ui.selected.cards.length) {\r\n\t\t\t\t\treturn get.color(card) != get.color(ui.selected.cards[0]);\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tcomplexCard: true,\r\n\t\t\tselectCard: 2,\r\n\t\t\tviewAs: {\r\n\t\t\t\tname: \"jiu\",\r\n\t\t\t},\r\n\t\t\tposition: \"hs\",\r\n\t\t\tviewAsFilter: function (player) {\r\n\t\t\t\tvar hs = player.getCards(\"hs\");\r\n\t\t\t\tif (hs.length < 2) return false;\r\n\t\t\t\tvar bool = false,\r\n\t\t\t\t\tmap = {};\r\n\t\t\t\tfor (var card of hs) {\r\n\t\t\t\t\tvar color = get.color(card);\r\n\t\t\t\t\tif (!map[color]) map[color] = true;\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tbool = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!bool) return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tprompt: \"【调酒】:将两张不同颜色的手牌当酒使用\",\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\treturn 10 - get.value(card);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.5,\r\n\t\t\t\torder: () => {\r\n\t\t\t\t\tlet player = _status.event.player;\r\n\t\t\t\t\tif (_status.event.dying) return 9;\r\n\t\t\t\t\tlet cards = player.getCards(\"h\", card => {\r\n\t\t\t\t\t\treturn get.type(card) != \"equip\" && get.type(card) != \"delay\";\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (cards.length > 0) return 13;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t},\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: 1,\r\n\t\t\t\t},\r\n\t\t\t\ttag: {\r\n\t\t\t\t\tsave: 1,\r\n\t\t\t\t\trecover: 0.1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\trujingmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\tlastDo: true,\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar storage = player.storage.rujingmrfz;\r\n\t\t\t\t\tstorage[\"number\"].sort(function (a, b) {\r\n\t\t\t\t\t\treturn a - b;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvar str1 = \"\",\r\n\t\t\t\t\t\tstr2 = \"\";\r\n\t\t\t\t\tif (storage[\"number\"].length) str1 = str1 + storage[\"number\"];\r\n\t\t\t\t\telse str1 = \"无\";\r\n\t\t\t\t\tif (storage[\"suit\"].length) str2 = str2 + get.translation(storage[\"suit\"]);\r\n\t\t\t\t\telse str2 = \"无\";\r\n\t\t\t\t\treturn \"记录的数字:\" + str1 + \"</br>\" + \"记录的花色:\" + str2;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tinit: player => {\r\n\t\t\t\tplayer.storage.rujingmrfz = {\r\n\t\t\t\t\tsuit: [],\r\n\t\t\t\t\tnumber: [],\r\n\t\t\t\t\tban: [],\r\n\t\t\t\t\tcard: [],\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tonremove: player => {\r\n\t\t\t\tdelete player.storage.rujingmrfz;\r\n\t\t\t},\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.card && (event.card.number || event.card.suit);\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tif (!player.storage.rujingmrfz)\r\n\t\t\t\t\tplayer.storage.rujingmrfz = {\r\n\t\t\t\t\t\tsuit: [],\r\n\t\t\t\t\t\tnumber: [],\r\n\t\t\t\t\t\tban: [],\r\n\t\t\t\t\t\tcard: [],\r\n\t\t\t\t\t};\r\n\t\t\t\tvar card = trigger.card,\r\n\t\t\t\t\tstorage = player.storage.rujingmrfz;\r\n\t\t\t\tif (!storage[\"card\"].includes(trigger.card)) {\r\n\t\t\t\t\tif (card.number && !storage[\"number\"].includes(card.number)) {\r\n\t\t\t\t\t\tplayer.storage.rujingmrfz[\"number\"].add(card.number);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (card.suit && !storage[\"suit\"].includes(card.suit) && card.suit != \"none\") {\r\n\t\t\t\t\t\tplayer.storage.rujingmrfz[\"suit\"].add(card.suit);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else player.storage.rujingmrfz[\"card\"].remove(trigger.card);\r\n\t\t\t},\r\n\t\t\tgroup: [\"rujingmrfz_addcount\", \"rujingmrfz_clear\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseUseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.storage.rujingmrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.rujingmrfz[\"ban\"] = [];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\taddcount: {\r\n\t\t\t\t\taudio: \"rujingmrfz\",\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar storage = player.storage.rujingmrfz;\r\n\t\t\t\t\t\tif (!event.card || !(event.card.number && event.card.suit)) return false;\r\n\t\t\t\t\t\tvar cardNumber = event.card.number;\r\n\t\t\t\t\t\tvar cardSuit = event.card.suit;\r\n\t\t\t\t\t\tif (!storage[\"number\"].includes(cardNumber) && !storage[\"suit\"].includes(cardSuit)) return false;\r\n\t\t\t\t\t\tif (get.type(event.card) == \"equip\" || get.type(event.card) == \"delay\") return false;\r\n\t\t\t\t\t\tif ([\"shan\", \"wuxie\"].includes(event.card.name)) return false;\r\n\t\t\t\t\t\treturn (storage[\"number\"].includes(cardNumber) && !storage[\"ban\"].includes(\"number\")) || (storage[\"suit\"].includes(cardSuit) && !storage[\"ban\"].includes(\"suit\"));\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tvar storage = player.storage.rujingmrfz,\r\n\t\t\t\t\t\t\tnumber = trigger.card.number,\r\n\t\t\t\t\t\t\tsuit = trigger.card.suit;\r\n\t\t\t\t\t\tvar list = [];\r\n\t\t\t\t\t\tif (storage[\"number\"].includes(number) && !storage[\"ban\"].includes(\"number\")) list.add(\"number\");\r\n\t\t\t\t\t\tif (storage[\"suit\"].includes(suit) && !storage[\"ban\"].includes(\"suit\")) list.add(\"suit\");\r\n\t\t\t\t\t\tevent.list = list;\r\n\t\t\t\t\t\tif (list.length == 1) {\r\n\t\t\t\t\t\t\tvar goon = true;\r\n\t\t\t\t\t\t\tif (trigger.card.name == \"du\") goon = false;\r\n\t\t\t\t\t\t\tif (trigger.card.name == \"jiedao\") goon = false;\r\n\t\t\t\t\t\t\tif (trigger.card.name == \"tao\" && player.getDamagedHp() == 1) goon = false;\r\n\t\t\t\t\t\t\tif (list.includes(\"suit\")) {\r\n\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t\t.chooseBool(\"【入境】:是否令此牌额外结算一次？（同花色）\")\r\n\t\t\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\t\t\treturn _status.event.goon;\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.set(\"goon\", goon);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t\t.chooseBool(\"【入境】:是否令此牌额外结算一次？（同点数）\")\r\n\t\t\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\t\t\treturn _status.event.goon;\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.set(\"goon\", goon);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t.chooseControl(\"点数\", \"花色\", \"全部\", \"cancel2\")\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", \"【入境】:请选择一项\")\r\n\t\t\t\t\t\t\t\t.set(\"prompt2\", \"选择‘点数’或者‘花色’为额外结算一次，选择‘全部’为额外结算两次，选择‘取消’为不发动此技能\")\r\n\t\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\t\t\t\t\tcard = _status.event.card;\r\n\t\t\t\t\t\t\t\t\tif (card.name == \"du\" || card.name == \"jiedao\") return \"cancel2\";\r\n\t\t\t\t\t\t\t\t\tif (card.name == \"tao\") {\r\n\t\t\t\t\t\t\t\t\t\tvar hp = player.getDamagedHp();\r\n\t\t\t\t\t\t\t\t\t\tswitch (hp) {\r\n\t\t\t\t\t\t\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn \"cancel2\";\r\n\t\t\t\t\t\t\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn [\"点数\", \"花色\"].randomGet();\r\n\t\t\t\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn \"全部\";\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn \"全部\";\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"card\", trigger.card);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tvar storage = player.storage.rujingmrfz,\r\n\t\t\t\t\t\t\tnumber = trigger.card.number,\r\n\t\t\t\t\t\t\tsuit = trigger.card.suit;\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"card\"].add(trigger.card);\r\n\t\t\t\t\t\t\tif (event.list.includes(\"suit\")) {\r\n\t\t\t\t\t\t\t\ttrigger.effectCount++;\r\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"ban\"].add(\"suit\");\r\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"suit\"].remove(suit);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttrigger.effectCount++;\r\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"ban\"].add(\"number\");\r\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"number\"].remove(number);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (result.control != \"cancel2\" && result.bool != false) {\r\n\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"card\"].add(trigger.card);\r\n\t\t\t\t\t\t\tif (result.control == \"点数\") {\r\n\t\t\t\t\t\t\t\ttrigger.effectCount++;\r\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"ban\"].add(\"number\");\r\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"number\"].remove(number);\r\n\t\t\t\t\t\t\t} else if (result.control == \"花色\") {\r\n\t\t\t\t\t\t\t\ttrigger.effectCount++;\r\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"ban\"].add(\"suit\");\r\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"suit\"].remove(suit);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttrigger.effectCount += 2;\r\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"ban\"].add(\"suit\");\r\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"suit\"].remove(suit);\r\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"ban\"].add(\"number\");\r\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"number\"].remove(number);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//爱丽丝\r\n\t\talsmengxiangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tfrequent: true,\r\n\t\t\ttrigger: { global: \"phaseUseBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.player.storage.phaseHistory && event.player.storage.phaseHistory.hasOwnProperty(\"phaseUse\");\r\n\t\t\t}, //QQQ,\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\treturn \"是否对\" + get.translation(event.player) + \"发动【梦乡】？\";\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tevent.list = [];\r\n\t\t\t\tfor (var name of lib.inpile) {\r\n\t\t\t\t\tif (get.type(name) == \"delay\" || get.type(name) == \"equip\") continue;\r\n\t\t\t\t\tif (get.tag({ name: name }, \"damage\")) continue;\r\n\t\t\t\t\tevent.list.push([get.type(name), \"\", name]);\r\n\t\t\t\t}\r\n\t\t\t\tvar dialog = [\"为\" + get.translation(trigger.player) + \"选择至多三个牌名\"];\r\n\t\t\t\tif (event.list.length) {\r\n\t\t\t\t\tdialog.push([event.list, \"vcard\"]);\r\n\t\t\t\t}\r\n\t\t\t\tif (!event.list.length) event.finish();\r\n\t\t\t\telse {\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.chooseButton(dialog, [1, 3])\r\n\t\t\t\t\t\t.set(\"ai\", function (button) {\r\n\t\t\t\t\t\t\tlet name = button.link[2],\r\n\t\t\t\t\t\t\t\tlist = _status.event.list.map(i => i[2]),\r\n\t\t\t\t\t\t\t\tplayer = _status.event.player,\r\n\t\t\t\t\t\t\t\ttrigger = _status.event.getTrigger(),\r\n\t\t\t\t\t\t\t\ttarget = trigger.player,\r\n\t\t\t\t\t\t\t\tgetv = (name, player) => {\r\n\t\t\t\t\t\t\t\t\tlet v = trigger.getTempCache(\"alsmengxiangmrfz\", player.id + name);\r\n\t\t\t\t\t\t\t\t\tif (typeof v === \"number\") return v;\r\n\t\t\t\t\t\t\t\t\tv = player.getUseValue({ name: name });\r\n\t\t\t\t\t\t\t\t\ttrigger.putTempCache(\"alsmengxiangmrfz\", player.id + name, v);\r\n\t\t\t\t\t\t\t\t\treturn v;\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tif (get.attitude(player, target) < 0) {\r\n\t\t\t\t\t\t\t\tif (!list.includes(name)) return 0;\r\n\t\t\t\t\t\t\t\tlet val = 0;\r\n\t\t\t\t\t\t\t\tif (target.getDamagedHp() == 0 && name == \"tao\") val += 25;\r\n\t\t\t\t\t\t\t\telse if (name === \"wuxie\") val += 20;\r\n\t\t\t\t\t\t\t\telse if (name === \"shan\") val += 15;\r\n\t\t\t\t\t\t\t\telse if (name === \"jiu\") val += 6;\r\n\t\t\t\t\t\t\t\treturn -getv(name, target) + val;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (!list.includes(name)) return 0;\r\n\t\t\t\t\t\t\t\tlet val = getv(name, target),\r\n\t\t\t\t\t\t\t\t\tbase = 5;\r\n\t\t\t\t\t\t\t\tval = Math.min(15, val - base);\r\n\t\t\t\t\t\t\t\tif (name === \"wuzhong\" || name === \"dongzhuxianji\") val += 20;\r\n\t\t\t\t\t\t\t\telse if (name === \"tao\" && player.getDamagedHp() > 0) val += 15;\r\n\t\t\t\t\t\t\t\telse if (name === \"shunshou\") val += 6;\r\n\t\t\t\t\t\t\t\treturn val;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"list\", event.list);\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar names = result.links.map(i => i[2]),\r\n\t\t\t\t\t\ttarget = trigger.player;\r\n\t\t\t\t\tif (!target.storage.alsmengxiangmrfz_eff) target.storage.alsmengxiangmrfz_eff = [];\r\n\t\t\t\t\ttarget.storage.alsmengxiangmrfz_eff = target.storage.alsmengxiangmrfz_eff.concat(names);\r\n\t\t\t\t\tgame.log(player, \"为\", target, \"选择了\", \"#y\" + get.translation(names));\r\n\t\t\t\t\ttarget.addTempSkill(\"alsmengxiangmrfz_eff\", { player: \"phaseUseAfter\" });\r\n\t\t\t\t\ttarget.markSkill(\"alsmengxiangmrfz_eff\");\r\n\t\t\t\t\tplayer.logSkill(\"alsmengxiangmrfz\", trigger.player);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tmark: function (dialog, storage, player) {\r\n\t\t\t\t\t\t\tif (!storage || !storage.length) return \"当前无可用牌\";\r\n\t\t\t\t\t\t\tdialog.add([[storage[0]], \"vcard\"]);\r\n\t\t\t\t\t\t\tif (storage.length > 1) dialog.addSmall([storage.slice(1), \"vcard\"]);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcontent: \"$\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\thiddenCard: function (player, name) {\r\n\t\t\t\t\t\t\tvar storage = player.getStorage(\"alsmengxiangmrfz_eff\");\r\n\t\t\t\t\t\t\tif (storage.length) return name == storage[0];\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcardname: function (card, player) {\r\n\t\t\t\t\t\t\tif (_status.event.name != \"chooseToUse\" || _status.event.skill) return;\r\n\t\t\t\t\t\t\tvar storage = player.getStorage(\"alsmengxiangmrfz_eff\");\r\n\t\t\t\t\t\t\tif (storage.length) return storage[0];\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcardnature: function (card, player) {\r\n\t\t\t\t\t\t\tif (_status.event.name != \"chooseToUse\" || _status.event.skill) return;\r\n\t\t\t\t\t\t\tvar storage = player.getStorage(\"alsmengxiangmrfz_eff\");\r\n\t\t\t\t\t\t\tif (storage.length) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"useCard\", \"respond\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.cards.length > 0 && player.getStorage(\"alsmengxiangmrfz_eff\").length > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.unmarkAuto(\"alsmengxiangmrfz_eff\", [player.getStorage(\"alsmengxiangmrfz_eff\")[0]]);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.5,\r\n\t\t\t},\r\n\t\t},\r\n\t\trumianmrfz: {\r\n\t\t\tmarkimage: \"extension/WhichWay/image/orther/rumianmrfz.png\",\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"下个结束阶段开始额外执行#个出牌阶段\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"phaseDiscardAfter\", \"damageEnd\"],\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.chooseTarget(true, \"【入眠】:请选择一名角色，令其于下个结束阶段开始时额外执行一个出牌阶段\").ai = function (target) {\r\n\t\t\t\t\tif (get.attitude(player, target) > 4) {\r\n\t\t\t\t\t\treturn get.threaten(target) / Math.sqrt(target.hp + 1) / Math.sqrt(target.countCards(\"h\") + 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn get.attitude(player, target) > 0;\r\n\t\t\t\t};\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.targets) {\r\n\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\ttarget.addMark(\"rumianmrfz\", false);\r\n\t\t\t\t\ttarget.when({ player: \"phaseJieshuBegin\" }).then(() => {\r\n\t\t\t\t\t\tvar next = trigger.player.phaseUse();\r\n\t\t\t\t\t\tevent.next.remove(next);\r\n\t\t\t\t\t\ttrigger.getParent(\"phase\").next.push(next);\r\n\t\t\t\t\t\tplayer.removeMark(\"rumianmrfz\", false);\r\n\t\t\t\t\t\tgame.log(player, \"执行了一个额外的出牌阶段\");\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// .emb({ firstDo: true });\r\n\t\t\t\t\tplayer.line(target);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\t//expose: 0.1,\r\n\t\t\t\tthreaten: 0.7,\r\n\t\t\t\tmaixie: true,\r\n\t\t\t\tmaixie_hp: true,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//天火\r\n\t\tzhuihuomrfz: {\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.countCards(\"hs\", card => {\r\n\t\t\t\t\t\treturn (get.name(card) == \"sha\" && get.nature(card) == \"fire\") || get.name(card) == \"huogong\";\r\n\t\t\t\t\t}) > 0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tfilterCard: function (card) {\r\n\t\t\t\treturn (get.name(card) == \"sha\" && get.nature(card) == \"fire\") || get.name(card) == \"huogong\";\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && !player.storage.zhuihuomrfz.includes(target);\r\n\t\t\t},\r\n\t\t\tdiscard: false,\r\n\t\t\tlose: false,\r\n\t\t\tdelay: false,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.storage.zhuihuomrfz.add(target);\r\n\t\t\t\ttarget.addJudge({ name: \"sjzx_zhuihuomrfz\" }, cards);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 5,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tget.attitude(player, target) < 0 &&\r\n\t\t\t\t\t\t\ttarget.getCards(\"j\", function (card) {\r\n\t\t\t\t\t\t\t\treturn get.name(card) == \"sjzx_zhuihuomrfz\";\r\n\t\t\t\t\t\t\t}).length < target.hp\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tif (target.countCards(\"he\") < 2 && target.hp < 2) return -3;\r\n\t\t\t\t\t\t\tif (target.countCards(\"he\") < 2) return -2;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhuihuomrfz_clear\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseUseEnd\" },\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\tplayer.storage.zhuihuomrfz = [];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tyihuomrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tcardname: function (card, player) {\r\n\t\t\t\t\tif (card.storage && card.storage.yihuomrfz == true) return \"sha\";\r\n\t\t\t\t},\r\n\t\t\t\tcardnature: function (card, player) {\r\n\t\t\t\t\tif (card.storage && card.storage.yihuomrfz == true) return \"fire\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"damageEnd\",\r\n\t\t\t},\r\n\t\t\tusable: 2,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.nature == \"fire\";\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.draw(2);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget: function (card, player, target, current) {\r\n\t\t\t\t\t\tif (get.tag(card, \"respondSha\") && current < 0) return 0.6;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\trespondSha: true,\r\n\t\t\t},\r\n\t\t\tgroup: [\"yihuomrfz_gain\", \"yihuomrfz_cancel\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tcancel: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"damageBegin4\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.nature == \"fire\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t\tplayer.draw(3);\r\n\t\t\t\t\t\tplayer.logSkill(\"yihuomrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\teffect: {\r\n\t\t\t\t\t\t\ttarget: function (card, player, target) {\r\n\t\t\t\t\t\t\t\tif (get.tag(card, \"fireDamage\")) return [0, 1];\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tgain: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"gainAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!event.cards || event.cards.length < 2) return false;\r\n\t\t\t\t\t\treturn event.cards.some(element => player.getCards(\"h\").includes(element));\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.chooseCard(true, \"【溢火】:请选择一张牌，令此牌视为火【杀】\", function (card) {\r\n\t\t\t\t\t\t\t\treturn trigger.cards.includes(card);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\t\treturn -get.value(card);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.cards) {\r\n\t\t\t\t\t\t\tresult.cards[0].storage.yihuomrfz = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar color,\r\n\t\t\t\t\t\t\tbool = true;\r\n\t\t\t\t\t\tfor (var i of trigger.cards) {\r\n\t\t\t\t\t\t\tif (typeof color !== \"string\") color = get.color(i, player);\r\n\t\t\t\t\t\t\tif (get.color(i, player) != color) {\r\n\t\t\t\t\t\t\t\tbool = false;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (bool == true) player.draw();\r\n\t\t\t\t\t\tplayer.logSkill(\"yihuomrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//临光\r\n\t\tanranmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tvar cards = player.getCards(\"h\");\r\n\t\t\t\tplayer.discard(cards);\r\n\t\t\t},\r\n\t\t\tgroup: [\"anranmrfz_draw\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\taudio: \"anranmrfz\",\r\n\t\t\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\t\t\tinit: player => {\r\n\t\t\t\t\t\tplayer.storage.anranmrfz_draw = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn !player.storage.anranmrfz_draw;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar num = player.hujia + player.hp;\r\n\t\t\t\t\t\tplayer.storage.anranmrfz_draw = true;\r\n\t\t\t\t\t\tplayer.draw(2 * num);\r\n\t\t\t\t\t\tplayer.changeHujia(-player.hujia);\r\n\t\t\t\t\t\tplayer.recover();\r\n\t\t\t\t\t\tplayer.when(\"phaseDiscardBefore\").then(() => {\r\n\t\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t\t\tplayer.logSkill(\"anranmrfz\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// .emb({ firstDo: true });\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thuchimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tusable: 1,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player;\r\n\t\t\t},\r\n\t\t\tfilterCard: true,\r\n\t\t\tposition: \"he\",\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t},\r\n\t\t\tlose: false,\r\n\t\t\tdiscard: false,\r\n\t\t\tdelay: false,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.give(cards, target, \"give\");\r\n\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\ti.storage.huchimrfz = true;\r\n\t\t\t\t}\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tvar view = get.autoViewAs({ name: \"sha\" }, cards);\r\n\t\t\t\ttarget\r\n\t\t\t\t\t.chooseTarget(\"【互持】:请选择使用【杀】的目标\", function (card, player, target) {\r\n\t\t\t\t\t\tvar view = _status.event.view;\r\n\t\t\t\t\t\tvar playerx = _status.event.playerx;\r\n\t\t\t\t\t\treturn target != playerx && playerx.canUse(view, target);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"view\", view)\r\n\t\t\t\t\t.set(\"playerx\", target).ai = function (target) {\r\n\t\t\t\t\tvar view = _status.event.view;\r\n\t\t\t\t\tvar player = _status.event.playerx;\r\n\t\t\t\t\treturn get.effect(target, view, player, player);\r\n\t\t\t\t};\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (result.targets) {\r\n\t\t\t\t\tvar card = get.autoViewAs({ name: \"sha\" }, cards);\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\ttarget.hasCard(card => {\r\n\t\t\t\t\t\t\treturn card == cards[0];\r\n\t\t\t\t\t\t}, \"h\")\r\n\t\t\t\t\t)\r\n\t\t\t\t\t\ttarget.useCard(result.targets[0], card, cards);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 4,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tif (get.attitude(player, target) > 2) {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\t\t\t\treturn target.canUse(\"sha\", current) && get.attitude(player, target);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\treturn 2;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"huchimrfz_recover\", \"huchimrfz_gain\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\trecover: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"recoverEnd\",\r\n\t\t\t\t\t\tglobal: \"recoverEnd\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tusable: 1,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!event.source.isIn() || !event.player.isIn() || event.source === undefined || !event.player) return false;\r\n\t\t\t\t\t\tif (event.source == player && event.player == player) return false;\r\n\t\t\t\t\t\tif (event.source != player && event.player != player) return false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\ttrigger.player\r\n\t\t\t\t\t\t\t.chooseCardTarget({\r\n\t\t\t\t\t\t\t\tprompt: \"【互持】:你可以将一张牌交给回复来源\",\r\n\t\t\t\t\t\t\t\tfilterCard: true,\r\n\t\t\t\t\t\t\t\tposition: \"he\",\r\n\t\t\t\t\t\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\t\t\t\t\t\tvar source = _status.event.source;\r\n\t\t\t\t\t\t\t\t\treturn target != player && target == source;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tai1: function (card) {\r\n\t\t\t\t\t\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tai2: function (target) {\r\n\t\t\t\t\t\t\t\t\tvar playerx = _status.event.playerx;\r\n\t\t\t\t\t\t\t\t\treturn get.attitude(playerx, target) > 0;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"source\", trigger.source)\r\n\t\t\t\t\t\t\t.set(\"playerx\", trigger.player);\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\ttrigger.player.give(result.cards, result.targets[0]);\r\n\t\t\t\t\t\t\ttrigger.player.draw();\r\n\t\t\t\t\t\t\ttrigger.source.draw();\r\n\t\t\t\t\t\t\ttrigger.player.logSkill(\"huchimrfz\", trigger.source);\r\n\t\t\t\t\t\t} else player.storage.counttrigger.huchimrfz_recover--;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tgain: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"gainEnd\",\r\n\t\t\t\t\t\tglobal: \"gainEnd\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.source == undefined || event.player == undefined) return false;\r\n\t\t\t\t\t\tif (!event.source.isIn() || !event.player.isIn()) return false;\r\n\t\t\t\t\t\tif (event.source == player && event.player == player) return false;\r\n\t\t\t\t\t\tif (event.source != player && event.player != player) return false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tusable: 1,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\ttrigger.player\r\n\t\t\t\t\t\t\t.chooseCardTarget({\r\n\t\t\t\t\t\t\t\tprompt: \"【互持】:你可以将一张牌交给给予来源\",\r\n\t\t\t\t\t\t\t\tfilterCard: true,\r\n\t\t\t\t\t\t\t\tposition: \"he\",\r\n\t\t\t\t\t\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\t\t\t\t\t\tvar source = _status.event.source;\r\n\t\t\t\t\t\t\t\t\treturn target != player && target == source;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tai1: function (card) {\r\n\t\t\t\t\t\t\t\t\tif (card.storage.huchimrfz) return 0;\r\n\t\t\t\t\t\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tai2: function (target) {\r\n\t\t\t\t\t\t\t\t\tvar playerx = _status.event.playerx;\r\n\t\t\t\t\t\t\t\t\treturn get.attitude(playerx, target) > 0;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"source\", trigger.source)\r\n\t\t\t\t\t\t\t.set(\"playerx\", trigger.player);\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\ttrigger.player.give(result.cards, result.targets[0]);\r\n\t\t\t\t\t\t\ttrigger.player.draw();\r\n\t\t\t\t\t\t\ttrigger.source.draw();\r\n\t\t\t\t\t\t\ttrigger.player.logSkill(\"huchimrfz\", trigger.source);\r\n\t\t\t\t\t\t} else player.storage.counttrigger.huchimrfz_gain--;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tchongyaomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\treturn `${player.storage.chongyaomrfz_mark[\"count\"]}/5`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tderivation: [\"zhuguangmrfz\"],\r\n\t\t\tinit: player => {\r\n\t\t\t\tplayer.storage.chongyaomrfz = false;\r\n\t\t\t},\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"huchimrfzAfter\", \"huchimrfz_gainAfter\", \"huchimrfz_recoverAfter\"],\r\n\t\t\t\tglobal: [\"huchimrfzAfter\", \"huchimrfz_gainAfter\", \"huchimrfz_recoverAfter\"],\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.storage.chongyaomrfz_mark[\"count\"] >= 5 && !player.storage.chongyaomrfz;\r\n\t\t\t},\r\n\t\t\tjuexingji: true,\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationColor: \"wood\",\r\n\t\t\tunique: true,\r\n\t\t\tforced: true,\r\n\t\t\tcontent: () => {\r\n\t\t\t\tplayer.loseMaxHp();\r\n\t\t\t\tplayer.addSkill(\"zhuguangmrfz\");\r\n\t\t\t\tplayer.awakenSkill(\"chongyaomrfz\");\r\n\t\t\t\tgame.log(player, \"获得了技能\", \"#g【逐光】\");\r\n\t\t\t\tplayer.storage.chongyaomrfz = true;\r\n\t\t\t\tdelete player.storage.chongyaomrfz_mark;\r\n\t\t\t\tplayer.unmarkAuto(player.storage.chongyaomrfz);\r\n\t\t\t\tplayer.removeSkill(\"chongyaomrfz_mark\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"chongyaomrfz_mark\", \"chongyaomrfz_clear\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"phaseBegin\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.chongyaomrfz_mark[\"skill\"] = [];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tmark: {\r\n\t\t\t\t\tinit: player => {\r\n\t\t\t\t\t\tplayer.storage.chongyaomrfz_mark = {\r\n\t\t\t\t\t\t\tcount: 0,\r\n\t\t\t\t\t\t\tskill: [],\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: player => {\r\n\t\t\t\t\t\tdelete player.storage.chongyaomrfz_mark;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"huchimrfzAfter\", \"huchimrfz_gainAfter\", \"huchimrfz_recoverAfter\"],\r\n\t\t\t\t\t\tglobal: [\"huchimrfzAfter\", \"huchimrfz_gainAfter\", \"huchimrfz_recoverAfter\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tif (!player.storage.chongyaomrfz_mark) player.storage.chongyaomrfz_mark = 0;\r\n\t\t\t\t\t\tfor (var i of [\"huchimrfz\", \"huchimrfz_gain\", \"huchimrfz_recover\"]) {\r\n\t\t\t\t\t\t\tif (!player.storage.counttrigger.hasOwnProperty(trigger.name) && i != \"huchimrfz\") continue;\r\n\t\t\t\t\t\t\tif (player.storage.chongyaomrfz_mark[\"skill\"].includes(trigger.name)) continue;\r\n\t\t\t\t\t\t\tif (i == \"huchimrfz\" && trigger.name == \"huchimrfz\") {\r\n\t\t\t\t\t\t\t\tplayer.storage.chongyaomrfz_mark[\"count\"]++;\r\n\t\t\t\t\t\t\t\tplayer.storage.chongyaomrfz_mark[\"skill\"].add(trigger.name);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (player.storage.counttrigger[trigger.name] > 0) {\r\n\t\t\t\t\t\t\t\tplayer.storage.chongyaomrfz_mark[\"count\"]++;\r\n\t\t\t\t\t\t\t\tplayer.storage.chongyaomrfz_mark[\"skill\"].add(trigger.name);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//海沫\r\n\t\txunchaomrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"下次造成的伤害+#\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.countCards(\"h\") < 1) return false;\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn current != player && (current.hp > player.hp || current.countCards(\"h\") > player.countCards(\"h\") || current.countCards(\"e\") > player.countCards(\"e\"));\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tcomplexCard: true,\r\n\t\t\tfilterCard: function (card, player) {\r\n\t\t\t\tvar selected = ui.selected.cards;\r\n\t\t\t\tif (!selected.length) return true;\r\n\t\t\t\tfor (var i = 0; i < selected.length; i++) {\r\n\t\t\t\t\tif (get.type2(card) == get.type2(selected[i])) return false;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && (target.hp > player.hp || target.countCards(\"h\") > player.countCards(\"h\") || target.countCards(\"e\") > player.countCards(\"e\"));\r\n\t\t\t},\r\n\t\t\tselectCard: [1, Infinity],\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\treturn 10 - get.value(card);\r\n\t\t\t},\r\n\t\t\tdiscard: false,\r\n\t\t\tlose: false,\r\n\t\t\tdelay: false,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.give(cards, target);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tvar num = cards.length;\r\n\t\t\t\tif (num >= 1) {\r\n\t\t\t\t\tplayer.recover();\r\n\t\t\t\t}\r\n\t\t\t\tif (num >= 2) {\r\n\t\t\t\t\tplayer.adjustHandCardTo(target.countCards(\"h\"));\r\n\t\t\t\t}\r\n\t\t\t\tif (num >= 3) {\r\n\t\t\t\t\tplayer.addMark(\"xunchaomrfz\", 1, false);\r\n\t\t\t\t\tplayer.when({ source: \"damageBegin3\" }).then(() => {\r\n\t\t\t\t\t\tplayer.removeMark(\"xunchaomrfz\", 1, false);\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// .emb({ firstDo: true });\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\torder: 3,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tif (get.attitude(target, player) > 0) {\r\n\t\t\t\t\t\t\treturn 1 + target.countCards(\"h\") * 0.1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tpaoyingmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > player.hp && player.getDamagedHp() > 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tplayer.adjustHandCardTo(player.hp);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.cards) {\r\n\t\t\t\t\tplayer.recover(Math.min(result.cards.length, 2));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//小满\r\n\t\tmushoumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\tdirect: true,\r\n\t\t\tgetCanUseCard: function (event, player) {\r\n\t\t\t\tvar history = event.player.getHistory(\"lose\", function (evt) {\r\n\t\t\t\t\t\treturn evt && evt.type == \"discard\";\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tcards = [];\r\n\t\t\t\tif (history.length == 0) return cards;\r\n\t\t\t\tfor (var i = 0; i < history.length; i++) {\r\n\t\t\t\t\tvar cardsList = history[i].cards;\r\n\t\t\t\t\tfor (var j = 0; j < cardsList.length; j++) {\r\n\t\t\t\t\t\tif (!player.canUseToAnyone(cardsList[j])) continue;\r\n\t\t\t\t\t\tif (get.position(cardsList[j], true) != \"d\") continue;\r\n\t\t\t\t\t\tcards.push(cardsList[j]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn cards;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar cards = lib.skill.mushoumrfz.getCanUseCard(event, player);\r\n\t\t\t\treturn cards.length > 0 && event.player != player;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet cards = lib.skill.mushoumrfz.getCanUseCard(trigger, player);\r\n\t\t\t\twhile (true) {\r\n\t\t\t\t\tconst {\r\n\t\t\t\t\t\tresult: { bool, links },\r\n\t\t\t\t\t} = await player\r\n\t\t\t\t\t\t.chooseButton([\"【牧兽】：是否使用这些牌？\", cards])\r\n\t\t\t\t\t\t.set(\"filterButton\", button => {\r\n\t\t\t\t\t\t\treturn _status.event.player.canUseToAnyone(button.link);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\t\treturn _status.event.player.getUseValue(button.link);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\tif (!bool) return;\r\n\t\t\t\t\tcards.remove(links[0]);\r\n\t\t\t\t\tplayer.$gain2(links[0], false);\r\n\t\t\t\t\tplayer.chooseUseTarget(links[0], true);\r\n\t\t\t\t\tplayer.logSkill(\"mushoumrfz\");\r\n\t\t\t\t\tcards = cards.filter(card => {\r\n\t\t\t\t\t\treturn get.position(card, true) == \"d\" && player.canUseToAnyone(card);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (cards.length == 0) return;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//万顷\r\n\t\tguantianmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { global: \"drawBegin\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn _status.currentPhase == player && event.getParent(1).name != \"guantianmrfz\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t\ttrigger.player.chooseToGuanxing(trigger.num);\r\n\t\t\t\ttrigger.player.draw(trigger.num);\r\n\t\t\t},\r\n\t\t},\r\n\t\tyingfengmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseBeginStart\" },\r\n\t\t\tfrequent: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar list = Array.from({ length: lib.phaseName.length }, (_, index) => (index + 1).toString());\r\n\t\t\t\tconst {index} = await player\r\n\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t.set(\"prompt\", \"【万顷】:请选择你要跳过的阶段数\")\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\tvar friend = game.filterPlayer(current => {\r\n\t\t\t\t\t\t\treturn get.attitude(current, player) > 0;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvar list = _status.event.list;\r\n\t\t\t\t\t\tif (friend.length > 3 && player.getSkillsList().length > 1) return list.length - 1;\r\n\t\t\t\t\t\tif (player.countCards(\"h\") <= player.getHandcardLimit() && friend.length > 2) return 3;\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"list\", list)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!index) return;\r\n\t\t\t\tlet phase = [],\r\n\t\t\t\t\tnum = index + 1;\r\n\t\t\t\tfor (var i = 0; i < num; i++) {\r\n\t\t\t\t\tplayer.skip(lib.phaseName[i]);\r\n\t\t\t\t\tphase.push(lib.phaseName[i]);\r\n\t\t\t\t}\r\n\t\t\t\tgame.log(player, \"跳过了\", `#y${get.tranPhase(phase)}`);\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.when(\"phaseEnd\")\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tplayer.chooseTarget(true, `【应风】:请选择至多${get.cnNumber(index)}名角色，令其摸${get.cnNumber(Math.floor(index / 2))}张牌`, [1, index]).ai = function (target) {\r\n\t\t\t\t\t\t\treturn get.attitude(player, target) > 0;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tif (result.targets) {\r\n\t\t\t\t\t\t\tgame.asyncDraw(result.targets, Math.floor(index / 2));\r\n\t\t\t\t\t\t} else event.finish();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tvar list = player.getSkillsList();\r\n\t\t\t\t\t\tif (index > 4 && list.length > 0) {\r\n\t\t\t\t\t\t\tif (list.length == 1) {\r\n\t\t\t\t\t\t\t\tplayer.removeSkill(list[0]);\r\n\t\t\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t\t\t\t.set(\"prompt\", \"【应风】:请选择失去一个技能\")\r\n\t\t\t\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\t\t\t\tvar list = _status.event.list;\r\n\t\t\t\t\t\t\t\t\t\tif (list.includes(\"yingfengmrfz\") && list.length > 1) list.remove(\"yingfengmrfz\");\r\n\t\t\t\t\t\t\t\t\t\treturn list.randomGet();\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.set(\"list\", list);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tif (result.control) {\r\n\t\t\t\t\t\t\tplayer.removeSkill(result.control);\r\n\t\t\t\t\t\t\tgame.log(player, `失去了技能<span class=\"yellowtext\">【${get.translation(result.control)}】</span>`);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.vars({ index: num });\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget: function (card, player, target, current) {\r\n\t\t\t\t\t\tif (get.type(card) == \"delay\") return \"zeroplayertarget\";\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//格劳克斯\r\n\t\tcichongmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tinit: (player, skill) => {\r\n\t\t\t\tplayer.storage.cichongmrfz = [];\r\n\t\t\t},\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: (event, player, storage) => {\r\n\t\t\t\t\treturn `已经弃置过的类型：${get.translation(player.storage[storage])}`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar hs = player.countCards(\"he\", function (card) {\r\n\t\t\t\t\t\treturn !player.storage.cichongmrfz.includes(get.type2(card));\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tbool = false;\r\n\t\t\t\tfor (var i of game.players) {\r\n\t\t\t\t\tif (player.canUse(\"sha\", i) || i != player) continue;\r\n\t\t\t\t\tbool = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\treturn hs > 0 && bool;\r\n\t\t\t},\r\n\t\t\tfilterCard: function (card) {\r\n\t\t\t\tvar storage = _status.event.player.storage.cichongmrfz;\r\n\t\t\t\treturn !storage.includes(get.type2(card));\r\n\t\t\t},\r\n\t\t\tfilterTarget: lib.filter.notMe,\r\n\t\t\tposition: \"he\",\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.markSkill(\"cichongmrfz\");\r\n\t\t\t\tconst target = event.targets[0],\r\n\t\t\t\t\tcard = event.cards[0];\r\n\t\t\t\tplayer.storage.cichongmrfz.add(get.type2(card));\r\n\t\t\t\tconst {bool} = await target\r\n\t\t\t\t\t.chooseToDiscard()\r\n\t\t\t\t\t.set(\"prompt\", `【磁冲】:请弃置一张【闪】或防具牌，否则受到来自${get.translation(player)}的一点伤害`)\r\n\t\t\t\t\t.set(\"filterCard\", card => get.name(card, target) == \"shan\" || get.subtype(card) == \"equip2\")\r\n\t\t\t\t\t.set(\"ai\", card => get.value(card) < 8)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (bool) return;\r\n\t\t\t\ttarget.damage();\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 4,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: function (player, target) {\r\n\t\t\t\t\t\tif (get.attitude(player, target) < 0) {\r\n\t\t\t\t\t\t\treturn -(1 + target.countCards(\"h\") * 0.1 + target.hp * 0.5);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"cichongmrfz_add\", \"cichongmrfz_clear\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.unmarkSkill(\"cichongmrfz\");\r\n\t\t\t\t\t\tplayer.storage.cichongmrfz = [];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tadd: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\ttrigger: { source: \"damageBegin3\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn !player.canUse(\"sha\", event.player) && event.player.isIn();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tganraomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tinit: (player, skill) => {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\ttrigger: { source: \"damageBegin3\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar storage = player.storage.ganraomrfz;\r\n\t\t\t\treturn !storage.includes(event.player) && event.player.isIn();\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.player) < 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet dialog = [\"【干扰】:请选择一张牌\"],\r\n\t\t\t\t\tlist = [];\r\n\t\t\t\tfor (var i = 0; i < lib.inpile.length; i++) {\r\n\t\t\t\t\tvar name = lib.inpile[i];\r\n\t\t\t\t\tif (get.type(name) == \"equip\") list.push([\"装备\", \"\", name]);\r\n\t\t\t\t\telse if (get.type2(name) == \"trick\") list.push([\"锦囊\", \"\", name]);\r\n\t\t\t\t\telse if (get.type(name) == \"basic\") list.push([\"基本\", \"\", name]);\r\n\t\t\t\t}\r\n\t\t\t\tdialog.push([list, \"vcard\"]);\r\n\t\t\t\tconst {links} = await player\r\n\t\t\t\t\t.chooseButton(1, true)\r\n\t\t\t\t\t.set(\"createDialog\", dialog)\r\n\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\tvar target = _status.event.target;\r\n\t\t\t\t\t\tif (target.hp < 2) return [\"tao\", \"jiu\"].randomGet();\r\n\t\t\t\t\t\treturn [\"shan\", \"wuxie\", \"tao\"].randomGet();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"target\", trigger.player)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!links) return;\r\n\t\t\t\tif (!trigger.player.storage.ganraomrfz_ban) trigger.player.storage.ganraomrfz_ban = [];\r\n\t\t\t\ttrigger.player.storage.ganraomrfz_ban.add(links[0][2]);\r\n\t\t\t\ttrigger.player.addTempSkill(\"ganraomrfz_ban\", { global: \"phaseEnd\" });\r\n\t\t\t\tplayer.storage.ganraomrfz.add(trigger.player);\r\n\t\t\t},\r\n\t\t\tgroup: [\"ganraomrfz_clear\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardEnabled2: function (card, player) {\r\n\t\t\t\t\t\t\tif (player.storage.ganraomrfz_ban.includes(get.name(card, player))) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tonremove: (player, skill) => {\r\n\t\t\t\t\t\tdelete player.storage[skill];\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: (event, player, storage) => {\r\n\t\t\t\t\t\t\treturn `不能使用或打出${get.translation(player.storage[storage])}`;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.ganraomrfz = [];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//海蒂\r\n\t\tanxinmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"gainEnd\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.source === undefined || !event.source.isIn()) return false;\r\n\t\t\t\tif (event.source != player || !event.cards) return false;\r\n\t\t\t\treturn event.cards.length > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet num = trigger.cards.length,\r\n\t\t\t\t\tdialog = [\"【暗信】:请选择一张牌\"],\r\n\t\t\t\t\tlist = [],\r\n\t\t\t\t\tcount = 0;\r\n\t\t\t\tfor (var i = 0; i < lib.inpile.length; i++) {\r\n\t\t\t\t\tvar name = lib.inpile[i];\r\n\t\t\t\t\tif (get.type(name) == \"delay\" || get.type(name) == \"equip\") continue;\r\n\t\t\t\t\tif (name == \"sha\") {\r\n\t\t\t\t\t\tlist.push([\"基本\", \"\", \"sha\"]);\r\n\t\t\t\t\t\tfor (var j of lib.inpile_nature) {\r\n\t\t\t\t\t\t\tlist.push([\"基本\", \"\", \"sha\", j]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (get.type2(name) == \"trick\") list.push([\"锦囊\", \"\", name]);\r\n\t\t\t\t\telse if (get.type(name) == \"basic\") list.push([\"基本\", \"\", name]);\r\n\t\t\t\t}\r\n\t\t\t\tdialog.push([list, \"vcard\"]);\r\n\t\t\t\twhile (num--) {\r\n\t\t\t\t\tvar {links} = await player\r\n\t\t\t\t\t\t.chooseButton(1, true)\r\n\t\t\t\t\t\t.set(\"createDialog\", dialog)\r\n\t\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\t\tvar card = {\r\n\t\t\t\t\t\t\t\t\tname: button.link[2],\r\n\t\t\t\t\t\t\t\t\tnature: button.link[3],\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tplayer = _status.event.player,\r\n\t\t\t\t\t\t\t\ttarget = _status.event.target,\r\n\t\t\t\t\t\t\t\tatt = _status.event.att,\r\n\t\t\t\t\t\t\t\tnum = target.getUseValue(card, null, true);\r\n\t\t\t\t\t\t\tif (card.name == \"jiedao\" && att < 0) num -= 10;\r\n\t\t\t\t\t\t\tif ((card.name == \"tao\" || card.name == \"shan\") && att < 0) num -= 5;\r\n\t\t\t\t\t\t\treturn num * att;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"target\", trigger.player)\r\n\t\t\t\t\t\t.set(\"att\", get.attitude(trigger.player, player) > 0 ? 1 : -1)\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (!links) continue;\r\n\t\t\t\t\tlet viewCards = {\r\n\t\t\t\t\t\tname: links[0][2],\r\n\t\t\t\t\t\tnature: links[0][3],\r\n\t\t\t\t\t};\r\n\t\t\t\t\tvar gaincards = trigger.cards.filter(card => {\r\n\t\t\t\t\t\t\treturn !card.hasGaintag(\"anxinmrfz\") && get.position(card) == \"h\";\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\ttmpnum = gaincards.length;\r\n\t\t\t\t\tif (gaincards.length == 0) return;\r\n\t\t\t\t\tvar {links} =\r\n\t\t\t\t\t\tgaincards.length == 1\r\n\t\t\t\t\t\t\t? {links:gaincards}\r\n\t\t\t\t\t\t\t: await player\r\n\t\t\t\t\t\t\t\t\t.chooseCardButton(`【暗信】:请你选择视为${viewCards[\"nature\"] === undefined ? \"\" : get.translation(viewCards[\"nature\"])}${get.translation(viewCards[\"name\"])}的牌`, true, gaincards, [1, tmpnum])\r\n\t\t\t\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\t\t\t\tif (ui.selected.buttons.length == 0) return 1;\r\n\t\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (!links) continue;\r\n\t\t\t\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\t\t\t\tlinks[i].gaintag.add(\"anxinmrfz\");\r\n\t\t\t\t\t\tlinks[i].storage.anxinmrfz = viewCards;\r\n\t\t\t\t\t\t//console.log('storage:',links[i].storage);\r\n\t\t\t\t\t\t//console.log('gaintag:',links[i].gaintag);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar gaincards = trigger.cards.filter(card => {\r\n\t\t\t\t\t\treturn !card.hasGaintag(\"anxinmrfz\") && get.position(card) == \"h\";\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (gaincards.length == 0) return;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tglobal: \"anxinmrfz_views\",\r\n\t\t\tgroup: [\"anxinmrfz_use\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tuse: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { global: \"useCardAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.hasHistory(\"lose\", function (evt) {\r\n\t\t\t\t\t\t\tif (evt.getParent() != event) return false;\r\n\t\t\t\t\t\t\tfor (var i in evt.gaintag_map) {\r\n\t\t\t\t\t\t\t\tif (evt.gaintag_map[i].includes(\"anxinmrfz\")) return true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: () => {\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\tplayer.logSkill(\"anxinmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tviews: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\taiOrder: function (player, card, num) {\r\n\t\t\t\t\t\t\tif (get.itemtype(card) == \"card\" && card.hasGaintag(\"anxinmrfz\")) return num + 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcardname: function (card, player) {\r\n\t\t\t\t\t\t\tvar viewsCard = card.storage.anxinmrfz;\r\n\t\t\t\t\t\t\tif (get.itemtype(card) == \"card\" && card.hasGaintag(\"anxinmrfz\")) return viewsCard.name;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcardnature(card, player) {\r\n\t\t\t\t\t\t\tvar viewsCard = card.storage.anxinmrfz;\r\n\t\t\t\t\t\t\tif (get.itemtype(card) == \"card\" && card.hasGaintag(\"anxinmrfz\")) return viewsCard.nature;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tgongchoumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn current != player && current.countCards(\"h\") > 0;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tselectTarget: -1,\r\n\t\t\tmultitarget: true,\r\n\t\t\tmultiline: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet targets = event.targets,\r\n\t\t\t\t\tlist = [];\r\n\t\t\t\twhile (true) {\r\n\t\t\t\t\tif (targets[0].countCards(\"h\") == 0) {\r\n\t\t\t\t\t\ttargets.shift();\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar {cards} = await targets[0]\r\n\t\t\t\t\t\t.chooseCard(true)\r\n\t\t\t\t\t\t.set(\"prompt\", `【觥筹】:请选择一张牌交给${get.translation(player)}`)\r\n\t\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\treturn get.value(card) < 6;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (!cards) {\r\n\t\t\t\t\t\ttargets.shift();\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttargets[0].give(cards, player);\r\n\t\t\t\t\tlist.add(targets[0]);\r\n\t\t\t\t\ttargets.shift();\r\n\t\t\t\t\tif (targets.length == 0) break;\r\n\t\t\t\t}\r\n\t\t\t\tif (list.length == 0) return;\r\n\t\t\t\twhile (true) {\r\n\t\t\t\t\tif (player.countCards(\"he\") == 0) return;\r\n\t\t\t\t\tvar {cards} = await player\r\n\t\t\t\t\t\t.chooseCard(true, \"he\")\r\n\t\t\t\t\t\t.set(\"prompt\", `【觥筹】:请选择一张牌交给${get.translation(list[0])}`)\r\n\t\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\treturn get.value(card) < 6;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (!cards) {\r\n\t\t\t\t\t\tlist.shift();\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplayer.give(cards, list[0]);\r\n\t\t\t\t\tlist.shift();\r\n\t\t\t\t\tif (list.length == 0) break;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tyinshimrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\ttargetEnabled: function (card, player, target) {\r\n\t\t\t\t\tvar num = 0,\r\n\t\t\t\t\t\tlist = [\"h\", \"j\", \"e\"];\r\n\t\t\t\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\t\t\t\tif (target.countCards(list[i]) == 0) continue;\r\n\t\t\t\t\t\tnum++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (player.getHistory(\"useCard\").length < num && _status.currentPhase != target) return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"useCard\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfilter: (event, player) => {\r\n\t\t\t\tvar num = 0,\r\n\t\t\t\t\tlist = [\"h\", \"j\", \"e\"];\r\n\t\t\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\t\t\tif (player.countCards(list[i]) == 0) continue;\r\n\t\t\t\t\tnum++;\r\n\t\t\t\t}\r\n\t\t\t\treturn event.player.getHistory(\"useCard\").length < num && _status.currentPhase != player && ((event.card.name == \"nanman\" && player != event.player) || (event.card.name == \"wanjian\" && player != event.player) || (event.card.name == \"taoyuan\" && player.hp < player.maxHp) || event.card.name == \"wugu\");\r\n\t\t\t},\r\n\t\t\tcontent: () => {},\r\n\t\t},\r\n\r\n\t\t//崖心\r\n\t\tlingdingmrfz: {\r\n\t\t\tinit: (player, skill) => {\r\n\t\t\t\t/*\r\n\t\t\t\t\t[记录的牌的数量,[]中的数字]\r\n\t\t\t\t\t*/\r\n\t\t\t\tplayer.storage[skill] = [0, 1];\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tmarkcount: \"\",\r\n\t\t\t\tcontent: (event, player, storage) => {\r\n\t\t\t\t\treturn `${player.storage[storage][0]}/${player.storage[storage][1]}`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"respond\", \"useCard\"],\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.storage.lingdingmrfz[0]++;\r\n\t\t\t\tlet usenum = player.storage.lingdingmrfz[0],\r\n\t\t\t\t\tnum = player.storage.lingdingmrfz[1];\r\n\t\t\t\tif (usenum < num) return;\r\n\t\t\t\tconst {bool} = await player\r\n\t\t\t\t\t.chooseBool(`【凌顶】:你可以摸${num}张牌`)\r\n\t\t\t\t\t.set(\"frequentSkill\", \"lingdingmrfz\")\r\n\t\t\t\t\t.set(\"prompt2\", get.prompt2(\"lingdingmrfz\").substring(get.prompt2(\"lingdingmrfz\").indexOf(\"###\", get.prompt2(\"lingdingmrfz\").indexOf(\"###\") + 3) + 3))\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!bool) return;\r\n\t\t\t\tplayer.storage.lingdingmrfz[0] = 0;\r\n\t\t\t\tif (player.storage.lingdingmrfz[1] < player.maxHp) player.storage.lingdingmrfz[1]++;\r\n\t\t\t\tplayer.draw(num);\r\n\t\t\t\tplayer.logSkill(\"lingdingmrfz\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tyabengmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"dying\" },\r\n\t\t\tforced: true,\r\n\t\t\tcontent: () => {\r\n\t\t\t\tplayer.draw(Math.min(2, player.storage.lingdingmrfz[0]));\r\n\t\t\t\tplayer.storage.lingdingmrfz = [0, 0];\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//初雪\r\n\t\tshengnvmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tgame.countPlayer(current => {\r\n\t\t\t\t\t\treturn current != player;\r\n\t\t\t\t\t}) > 1\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tselectTarget: 2,\r\n\t\t\tfilterTarget: lib.filter.notMe,\r\n\t\t\tmultitarget: true,\r\n\t\t\tmultiline: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet targets = event.targets,\r\n\t\t\t\t\ttargets2 = [],\r\n\t\t\t\t\t// [<第二名角色的选项>，<第一名角色的选项>]\r\n\t\t\t\t\tcsn = [undefined, undefined];\r\n\t\t\t\twhile (targets.length > 0) {\r\n\t\t\t\t\tvar target = targets[0],\r\n\t\t\t\t\t\tlist = [],\r\n\t\t\t\t\t\tcsList = [\"收回所有装备区的牌\", \"将一张手牌当【乐不思蜀】置于你的判定区\", \"不能响应下一张指定你为目标的基本牌或普通锦囊牌\"];\r\n\t\t\t\t\tif (target.countCards(\"e\") > 0) {\r\n\t\t\t\t\t\tlist.push(\"选项一\");\r\n\t\t\t\t\t} else csList[0] = '<span style=\"opacity:0.5; \">' + csList[0] + \"（不可选：装备区没有牌）\" + \"</span>\";\r\n\t\t\t\t\tfor (var i of target.getCards(\"h\")) {\r\n\t\t\t\t\t\tif (!target.canAddJudge({ name: \"lebu\", cards: [i] })) continue;\r\n\t\t\t\t\t\tlist.push(\"选项二\");\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!list.includes(\"选项二\")) csList[1] = '<span style=\"opacity:0.5; \">' + csList[1] + \"（不可选：无法对自己使用【乐不思蜀】）\" + \"</span>\";\r\n\t\t\t\t\tlist.push(\"选项三\");\r\n\t\t\t\t\tif (list.length == 0) continue;\r\n\t\t\t\t\tconst {control} = await target\r\n\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t.set(\"choiceList\", csList)\r\n\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\tvar list = _status.event.list;\r\n\t\t\t\t\t\t\tif (list.includes(\"选项二\")) list.remove(\"选项二\");\r\n\t\t\t\t\t\t\treturn list.randomGet();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"target\", target)\r\n\t\t\t\t\t\t.set(\"list\", list)\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (!control) continue;\r\n\t\t\t\t\tcsn[targets.length - 1] = control;\r\n\t\t\t\t\ttargets2.add(target);\r\n\t\t\t\t\tswitch (control) {\r\n\t\t\t\t\t\tcase \"选项一\":\r\n\t\t\t\t\t\t\ttarget.gain(target.getCards(\"e\"), \"gain2\");\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"选项二\":\r\n\t\t\t\t\t\t\tconst {cards} = await target\r\n\t\t\t\t\t\t\t\t.chooseCard(true)\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", \"【圣女】:请选择一张手牌当【乐不思蜀】置于你的判定区\")\r\n\t\t\t\t\t\t\t\t.set(\"filterCard\", card => {\r\n\t\t\t\t\t\t\t\t\treturn target.canAddJudge({ name: \"lebu\", cards: [card] });\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\tif (!cards) break;\r\n\t\t\t\t\t\t\ttarget.useCard({ name: \"lebu\" }, cards, target);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"选项三\":\r\n\t\t\t\t\t\t\ttarget.addMark(\"shengnvmrfz_direct\", 1, false);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttargets.shift();\r\n\t\t\t\t}\r\n\t\t\t\tif (csn[0] != csn[1]) {\r\n\t\t\t\t\tfor (var i of targets2) {\r\n\t\t\t\t\t\tif (!i.countGainableCards(player, \"he\")) continue;\r\n\t\t\t\t\t\tplayer.gainPlayerCard(\"he\", i, true).set(\"ai\", lib.card.shunshou.ai.button);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else player.draw(2);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: -1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tglobal: \"shengnvmrfz_direct\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdirect: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"不能响应下#张指定你为目标的基本牌或普通锦囊牌\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\ttarget: \"useCardToPlayered\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.countMark(\"shengnvmrfz_direct\") > 0 && (get.type(event.card) == \"basic\" || get.type(event.card) == \"trick\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.logSkill(\"shengnvmrfz\");\r\n\t\t\t\t\t\tplayer.removeMark(\"shengnvmrfz_direct\", 1, false);\r\n\t\t\t\t\t\ttrigger.directHit.add(player);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshenshemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { target: \"useCardToTargeted\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.countCards(\"h\", card => get.is.shownCard(card)) < 1) return false;\r\n\t\t\t\tvar max = 0,\r\n\t\t\t\t\tshown = player.getCards(\"h\", card => get.is.shownCard(card));\r\n\t\t\t\tfor (var i of shown) {\r\n\t\t\t\t\tif (i.number > max) max = i.number;\r\n\t\t\t\t}\r\n\t\t\t\tvar number = get.number(event.card);\r\n\t\t\t\tif (number != null && number > max) return false;\r\n\t\t\t\treturn event.player.countCards(\"he\") > 0 && event.player != player && get.tag(event.card, \"damage\") > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet list = [],\r\n\t\t\t\t\tsource = trigger.player,\r\n\t\t\t\t\ttranTmp = function (str) {\r\n\t\t\t\t\t\tvar list = [\"e\", \"h\"];\r\n\t\t\t\t\t\tvar cn = [\"装备\", \"手牌\"];\r\n\t\t\t\t\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\t\t\t\t\tif (str == list[i]) return cn[i];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\tif (source.countCards(\"h\") > 0) list.push(\"h\");\r\n\t\t\t\tif (source.countCards(\"e\") > 0) list.push(\"e\");\r\n\t\t\t\tlet num = list.length;\r\n\t\t\t\tif (num == 0) return;\r\n\t\t\t\tsource\r\n\t\t\t\t\t.chooseToDiscard(true)\r\n\t\t\t\t\t.set(\"position\", \"he\")\r\n\t\t\t\t\t.set(\"prompt\", `【神慑】:请弃置${list.length > 1 ? tranTmp(list[0]) + \"和\" + tranTmp(list[1]) : tranTmp(list[0])}区的一张牌`)\r\n\t\t\t\t\t.set(\"selectCard\", num)\r\n\t\t\t\t\t.set(\"filterCard\", card => {\r\n\t\t\t\t\t\tif (ui.selected.cards.length == 0) return true;\r\n\t\t\t\t\t\tif (get.position(ui.selected.cards[0]) == \"h\") return get.position(card) == \"e\";\r\n\t\t\t\t\t\treturn get.position(card) == \"h\";\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"complexCard\", true)\r\n\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 0.6,\r\n\t\t\t},\r\n\t\t\tgroup: \"shenshemrfz_show\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tshow: {\r\n\t\t\t\t\taudio: \"shenshemrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseJieshuBegin\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.countCards(\"h\", card => !get.is.shownCard(card)) > 0 && player.countCards(\"h\", card => get.is.shownCard(card)) == 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(trigger, event, player) {\r\n\t\t\t\t\t\tlet hs = player.getCards(\"h\", card => !get.is.shownCard(card));\r\n\t\t\t\t\t\tif (hs.length == 0) return;\r\n\t\t\t\t\t\tplayer.addShownCards(hs, \"visible_shenshemrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//狮蝎\r\n\t\tqianzongmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"showCharacterAfter\",\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\thiddenSkill: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.toShow.includes(\"shixiemrfz\");\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (player == _status.currentPhase) {\r\n\t\t\t\t\tlet list = [\"摸一张牌\"];\r\n\t\t\t\t\tif (player.getDamagedHp() > 0) list.push(\"回复体力\");\r\n\t\t\t\t\tlist.push(\"cancel2\");\r\n\t\t\t\t\tconst {control} = await player\r\n\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t.set(\"prompt\", \"【潜踪】:你可以回复一点体力或摸一张牌\")\r\n\t\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tif (player.hp < 3) return \"回复体力\";\r\n\t\t\t\t\t\t\treturn \"摸一张牌\";\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (!control || control == \"cancel2\") return;\r\n\t\t\t\t\tswitch (control) {\r\n\t\t\t\t\t\tcase \"摸一张牌\":\r\n\t\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"回复体力\":\r\n\t\t\t\t\t\t\tplayer.recover();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplayer.logSkill(\"qianzongmrfz\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst {targets} = await player\r\n\t\t\t\t\t\t.chooseTarget()\r\n\t\t\t\t\t\t.set(\"prompt\", \"【潜踪】:你可以对一名其他角色造成一点伤害\")\r\n\t\t\t\t\t\t.set(\"filterTarget\", lib.filter.notMe)\r\n\t\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\treturn get.attitude(target, player) < 0;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (!targets) return;\r\n\t\t\t\t\tplayer.logSkill(\"qianzongmrfz\", targets[0]);\r\n\t\t\t\t\ttargets[0].damage();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"qianzongmrfz_rehidden\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\trehidden: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tplayer.getHistory(\"lose\", function (evt) {\r\n\t\t\t\t\t\t\t\treturn evt.type == \"discard\";\r\n\t\t\t\t\t\t\t}).length == 0 && !player.isUnseen()\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(trigger, event, player) {\r\n\t\t\t\t\t\tconst {bool} = await player.chooseBool().set(\"prompt\", \"【潜踪】:是否进入隐匿状态？\").forResult();\r\n\t\t\t\t\t\tif (bool != true) return;\r\n\t\t\t\t\t\tplayer.reUnseen();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txiedumrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tcardname(card, player) {\r\n\t\t\t\t\tif (card.name == \"du\") return \"sha\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageSource\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.player.isIn() && event.player.countCards(\"he\") > 0 && (player != _status.currentPhase || (event.card && event.card.name == \"sha\"));\r\n\t\t\t},\r\n\t\t\tasync content(trigger, event, player) {\r\n\t\t\t\tvar target = event.player;\r\n\t\t\t\tconst {cards} = await player\r\n\t\t\t\t\t.choosePlayerCard(target, \"he\", true, 1, \"【蝎毒】:请选择一张牌\")\r\n\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\treturn get.value(button.link);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\tif (get.position(i) == \"e\") {\r\n\t\t\t\t\t\ttarget.discard(i);\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ti.init([i.suit, i.number, \"du\"]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tlijimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tmarkcount: function (storage, player) {\r\n\t\t\t\t\tlet list = [];\r\n\t\t\t\t\tplayer.getHistory(\"useCard\", function (evt) {\r\n\t\t\t\t\t\tlist.add(get.suit(evt.card));\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn `${list.length}`;\r\n\t\t\t\t},\r\n\t\t\t\tcontent: function (event, player, skill) {\r\n\t\t\t\t\tlet list = [];\r\n\t\t\t\t\tplayer.getHistory(\"useCard\", function (evt) {\r\n\t\t\t\t\t\tlist.add(get.suit(evt.card));\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn `你使用的【杀】需要${list.length}张【闪】才可抵消<br>已经使用的花色：${get.translation(list)}`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.card.name == \"sha\" && !event.getParent().directHit.includes(event.target);\r\n\t\t\t},\r\n\t\t\tlogTarget: \"target\",\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet list = [];\r\n\t\t\t\tawait player.getHistory(\"useCard\", function (evt) {\r\n\t\t\t\t\tlist.add(get.suit(evt.card));\r\n\t\t\t\t});\r\n\t\t\t\tconst needNum = list.length;\r\n\t\t\t\tconst id = trigger.target.playerid;\r\n\t\t\t\tconst map = trigger.getParent().customArgs;\r\n\t\t\t\tif (!map[id]) map[id] = {};\r\n\t\t\t\tif (typeof map[id].shanRequired == \"number\") {\r\n\t\t\t\t\tmap[id].shanRequired = needNum;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmap[id].shanRequired = needNum;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\tskillTagFilter(player, tag, arg) {\r\n\t\t\t\t\tlet list = [];\r\n\t\t\t\t\tplayer.getHistory(\"useCard\", function (evt) {\r\n\t\t\t\t\t\tlist.add(get.suit(evt.card));\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (arg.card.name != \"sha\" || arg.target.countCards(\"h\", \"shan\") > list.length) return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//红隼\r\n\t\tchihenmrfz: {\r\n\t\t\tmarktext: \"护\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"护\",\r\n\t\t\t\tcontent: \"你有#个‘护’标记\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseDiscardBegin\" },\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.hasEmptySlot(2);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet num = player.countCards(\"e\");\r\n\t\t\t\tconst { targets } = await player\r\n\t\t\t\t\t.chooseTarget(`【齿痕】:请选择至多${get.cnNumber(num)}角色，令这些角色获得一个‘护’`)\r\n\t\t\t\t\t.set(\"selectTarget\", function () {\r\n\t\t\t\t\t\tvar num = _status.event.num;\r\n\t\t\t\t\t\treturn [0, num];\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\treturn get.attitude(target, player) > 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"num\", num)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!targets) return;\r\n\t\t\t\tfor (var i of targets) {\r\n\t\t\t\t\ti.addMark(\"chihenmrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tglobal: \"chihenmrfz_eff1\",\r\n\t\t\tgroup: [\"chihenmrfz_eff2\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff1: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn (num += player.countMark(\"chihenmrfz\"));\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff2: {\r\n\t\t\t\t\taudio: \"chihenmrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { global: \"useCardToTargeted\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\tevent.player 使用者\r\n\t\t\t\t\t\t\tevent.targets 目标角色\r\n\t\t\t\t\t\t\t*/\r\n\t\t\t\t\t\tif (!get.tag(event.card, \"damage\") || !event.targets) return false;\r\n\t\t\t\t\t\tif (player.hp < event.player.hp) return false;\r\n\t\t\t\t\t\treturn event.target.hasMark(\"chihenmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet target = trigger.target,\r\n\t\t\t\t\t\t\teff = get.effect(target, trigger.card, trigger.player, trigger.player);\r\n\t\t\t\t\t\tconst { bool } = await trigger.player\r\n\t\t\t\t\t\t\t.chooseToDiscard(`【齿痕】:你须弃置一张牌，否则此牌(${get.translation(trigger.card)})对${get.translation(target)}无效`)\r\n\t\t\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\t\tif (_status.event.eff > 0) return 10 - get.value(card);\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"eff\", eff)\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (bool) {\r\n\t\t\t\t\t\t\ttarget.removeMark(\"chihenmrfz\");\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttrigger.getParent().excluded.add(target);\r\n\t\t\t\t\t\ttarget.removeMark(\"chihenmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thaomingmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { source: \"damageSource\" },\r\n\t\t\tusable: 1,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { control } = await player\r\n\t\t\t\t\t.chooseControl(\"basic\", \"trick\", \"equip\", \"cancel2\")\r\n\t\t\t\t\t.set(\"prompt\", \"【号鸣】:请选择你要获得的牌的类型\")\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\tif (player.hp < 3) return \"basic\";\r\n\t\t\t\t\t\tif (player.countCards(\"e\") >= 3) return [\"equip\", \"trick\", \"trick\", \"trick\", \"basic\"].randomGet();\r\n\t\t\t\t\t\treturn [\"basic\", \"trick\", \"trick\", \"equip\", \"equip\"].randomGet();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!control || control == \"cancel2\") {\r\n\t\t\t\t\tplayer.storage.counttrigger.haomingmrfz--;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tplayer.logSkill(\"haomingmrfz\");\r\n\t\t\t\tvar card = get.cardPile2(function (card) {\r\n\t\t\t\t\treturn get.type(card, \"trick\") == control;\r\n\t\t\t\t});\r\n\t\t\t\tif (card) player.gain(card, \"gain2\", \"log\");\r\n\t\t\t\telse player.chat(`牌堆中没有${get.translation(control)}牌了！`);\r\n\t\t\t},\r\n\t\t\tgroup: [\"haomingmrfz_jd\", \"haomingmrfz_find\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"使用牌不能指定有‘护’标记的牌的角色\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tplayerEnabled: function (card, player, target) {\r\n\t\t\t\t\t\t\tif (target.hasMark(\"chihenmrfz\")) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tjd: {\r\n\t\t\t\t\ttrigger: { player: \"phaseJieshuBegin\" },\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.canUseToAnyone(\"juedou\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst { targets } = await player\r\n\t\t\t\t\t\t\t.chooseTarget(\"【号鸣】:你可以选择一名其他角色，视为对其使用一张【决斗】\")\r\n\t\t\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\r\n\t\t\t\t\t\t\t\treturn player.canUse(\"juedou\", target);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\t\t\t\teff = get.effect(target, { name: \"juedou\", isCard: true }, player, player);\r\n\t\t\t\t\t\t\t\tif (eff < 0) return 0;\r\n\t\t\t\t\t\t\t\treturn eff;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (!targets) return;\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.when({ global: [\"damageEnd\", \"phaseJieshuAfter\"] })\r\n\t\t\t\t\t\t\t.filter((event, player) => {\r\n\t\t\t\t\t\t\t\tif (event.name == \"phaseJieshu\") return true;\r\n\t\t\t\t\t\t\t\treturn event.card && event.card.storage.haomingmrfz == true;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\tif (trigger.name == \"phaseJieshu\") return;\r\n\t\t\t\t\t\t\t\tvar target = trigger.player,\r\n\t\t\t\t\t\t\t\t\tnum = Math.ceil(target.countCards(\"h\") / 2);\r\n\t\t\t\t\t\t\t\tif (num > 0) target.chooseToDiscard(true, num, `【号鸣】:请弃置${get.translation(num)}张手牌`);\r\n\t\t\t\t\t\t\t\ttarget.addTempSkill(\"haomingmrfz_ban\", { player: \"phaseEnd\" });\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tplayer.useCard({ name: \"juedou\", isCard: true, storage: { haomingmrfz: true } }, targets[0]).logSkill = \"haomingmrfz\";\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tfind: {\r\n\t\t\t\t\taudio: \"haomingmrfz\",\r\n\t\t\t\t\tenable: \"phaseUse\",\r\n\t\t\t\t\tusable: 1,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.countCards(\"h\") > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: \"【号鸣】:你可以弃置任意张手牌，然后从牌堆中获得一张与弃置的牌字数相同的牌\",\r\n\t\t\t\t\tfilterCard: true,\r\n\t\t\t\t\tselectCard: [1, Infinity],\r\n\t\t\t\t\tcheck(card) {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\tif (player.hp < 3) {\r\n\t\t\t\t\t\t\tif (ui.selected.cards.length == 0) return 6 - get.value(card);\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!player.hasEmptySlot(2)) {\r\n\t\t\t\t\t\t\tif (ui.selected.cards.length < 2) return 6 - get.value(card);\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (ui.selected.cards.length < 3) return 6 - get.value(card);\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet cards = event.cards,\r\n\t\t\t\t\t\t\tnum = cards.length,\r\n\t\t\t\t\t\t\tlist = [];\r\n\t\t\t\t\t\tfor (var i of ui.cardPile.childNodes) {\r\n\t\t\t\t\t\t\tif (get.cardNameLength(i) != num) continue;\r\n\t\t\t\t\t\t\tlist.push(i);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (list.length == 0) {\r\n\t\t\t\t\t\t\tplayer.chat(`牌堆中没有字数为${get.cnNumber(num)}的牌！`);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst { links } =\r\n\t\t\t\t\t\t\tlist.length == 1\r\n\t\t\t\t\t\t\t\t? { links: list[0] }\r\n\t\t\t\t\t\t\t\t: await player\r\n\t\t\t\t\t\t\t\t\t\t.chooseCardButton(\"【号鸣】:请选择你要获得的牌\", true, list)\r\n\t\t\t\t\t\t\t\t\t\t.set(\"ai\", function (button) {\r\n\t\t\t\t\t\t\t\t\t\t\tvar name = button.name,\r\n\t\t\t\t\t\t\t\t\t\t\t\tplayer = _status.event.player;\r\n\t\t\t\t\t\t\t\t\t\t\tif (player.hp < 3 && name == \"tao\") return 10;\r\n\t\t\t\t\t\t\t\t\t\t\treturn get.value(button);\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (!links) return;\r\n\t\t\t\t\t\tvar card = get.cardPile2(function (card) {\r\n\t\t\t\t\t\t\treturn card == links[0];\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (card) player.gain(card, \"gain2\", \"log\");\r\n\t\t\t\t\t\telse player.chat(`牌堆中没有${get.translation(links)}了！`);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\torder: 5,\r\n\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//稀音\r\n\t\tsheyingmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\tvar bool = false;\r\n\t\t\t\t\tfor (var i of game.players) {\r\n\t\t\t\t\t\tfor (var j of [1, 2, 3, 4, 5]) {\r\n\t\t\t\t\t\t\tif (i.hasCard(`jingtouE${j}mrfz`, \"e\")) {\r\n\t\t\t\t\t\t\t\tbool = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (bool) return num + 2;\r\n\t\t\t\t},\r\n\t\t\t\tglobalTo(from, to, distance) {\r\n\t\t\t\t\tvar bool = false;\r\n\t\t\t\t\tfor (var i of game.players) {\r\n\t\t\t\t\t\tfor (var j of [1, 2, 3, 4, 5]) {\r\n\t\t\t\t\t\t\tif (i.hasCard(`jingtouE${j}mrfz`, \"e\")) {\r\n\t\t\t\t\t\t\t\tbool = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (bool) return distance + 1;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tderivation: [\"jingtoumrfz_show\"],\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tvar num = 0;\r\n\t\t\t\tfor (var i of game.players) {\r\n\t\t\t\t\tfor (var j of [1, 2, 3, 4, 5]) {\r\n\t\t\t\t\t\tif (i.hasCard(`jingtouE${j}mrfz`, \"e\")) num++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn player.countCards(\"h\") > 0 && num < 4;\r\n\t\t\t},\r\n\t\t\tusable: 2,\r\n\t\t\tposition: \"he\",\r\n\t\t\tfilterCard: true,\r\n\t\t\tfilterTarget: lib.filter.notMe,\r\n\t\t\tcheck(card) {\r\n\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet targets = event.targets,\r\n\t\t\t\t\tlist1 = [],\r\n\t\t\t\t\tlist2 = [];\r\n\t\t\t\tfor (var i of [1, 2, 3, 4, 5]) list1.push(`jingtouE${i}mrfz`);\r\n\t\t\t\tfor (var i of list1) {\r\n\t\t\t\t\tlist2.push([\"装备\", \"\", i]);\r\n\t\t\t\t}\r\n\t\t\t\tconst { links } = await player\r\n\t\t\t\t\t.chooseButton([\"稀音\", [list2, \"vcard\"]], true)\r\n\t\t\t\t\t.set(\"ai\", function (button) {\r\n\t\t\t\t\t\tvar target = _status.event.target,\r\n\t\t\t\t\t\t\tlist = _status.event.list,\r\n\t\t\t\t\t\t\tcard = { name: button.link[2] },\r\n\t\t\t\t\t\t\tequip = [];\r\n\t\t\t\t\t\tfor (var i of target.getCards(\"e\")) equip.push(get.name(i));\r\n\t\t\t\t\t\tif (equip.includes(card.name)) return 0;\r\n\t\t\t\t\t\tif (get.subtype(card) == \"equip2\") return 5;\r\n\t\t\t\t\t\tif (get.subtype(card) == \"equip1\") return 4;\r\n\t\t\t\t\t\tif (get.subtype(card) == \"equip5\") return 3;\r\n\t\t\t\t\t\tif (get.subtype(card) == \"equip3\" || get.subtype(card) == \"equip3\") return 2;\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"target\", targets[0])\r\n\t\t\t\t\t.set(\"list\", list1)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!links) return;\r\n\t\t\t\tvar suit,\r\n\t\t\t\t\tlist3 = [\"heart\", \"club\", \"spade\", \"spade\", \"diamond\"];\r\n\t\t\t\tfor (var i = 0; i < list1.length; i++) {\r\n\t\t\t\t\tif (links[0][2] == list1[i]) suit = list3[i];\r\n\t\t\t\t}\r\n\t\t\t\tvar card = game.createCard(links[0][2], suit, 7);\r\n\t\t\t\ttargets[0].$gain2(card);\r\n\t\t\t\tgame.delayx();\r\n\t\t\t\ttargets[0].equip(card);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: -1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tchaozaimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\thasJingtou(player) {\r\n\t\t\t\treturn this.getJingtou(player).length > 0 ? true : false;\r\n\t\t\t},\r\n\t\t\tgetJingtou(player) {\r\n\t\t\t\tlet cards = [];\r\n\t\t\t\tlet names = Array.from({ length: 5 }, (v, i) => `jingtouE${i + 1}mrfz`);\r\n\t\t\t\tfor (let card of player.getCards(\"e\")) {\r\n\t\t\t\t\tif (names.includes(get.name(card))) cards.push(card);\r\n\t\t\t\t}\r\n\t\t\t\treturn cards;\r\n\t\t\t},\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => lib.skill.chaozaimrfz.hasJingtou(current));\r\n\t\t\t},\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\tlet targets = game.filterPlayer(current => lib.skill.chaozaimrfz.hasJingtou(current));\r\n\t\t\t\tlet jingtous = [];\r\n\t\t\t\tfor (let char of game.players) {\r\n\t\t\t\t\tif (targets.includes(char)) jingtous.addArray(lib.skill.chaozaimrfz.getJingtou(char));\r\n\t\t\t\t}\r\n\t\t\t\treturn `你可以弃置${get.translation(targets)}区域中的镜头并摸${jingtous.length}张牌`;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet targets = game.filterPlayer(current => lib.skill.chaozaimrfz.hasJingtou(current));\r\n\t\t\t\tlet jingtous = [];\r\n\t\t\t\tfor (let char of game.players) {\r\n\t\t\t\t\tif (targets.includes(char)) jingtous.addArray(lib.skill.chaozaimrfz.getJingtou(char));\r\n\t\t\t\t}\r\n\t\t\t\tgame.cardsDiscard(jingtous);\r\n\t\t\t\tplayer.draw(jingtous.length);\r\n\t\t\t\tfor (let i of targets) {\r\n\t\t\t\t\ti.addSkill(\"chaozaimrfz_eff\");\r\n\t\t\t\t\ti.storage.chaozaimrfz = player;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tmarkimage: \"extension/WhichWay/image/orther/xiyinchaozaimrfz.png\",\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tname: \"超载\",\r\n\t\t\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\t\t\tlet str = `\r\n\t\t\t\t\t\t\t\t\t·XXX<br>\r\n\t\t\t\t\t\t\t\t\t·其他角色对你使用牌无次数限制<br>\r\n\t\t\t\t\t\t\t\t\t·其他角色对你使用牌无距离限制\r\n\t\t\t\t\t\t\t\t`;\r\n\t\t\t\t\t\t\tlet str2 = `受到的伤害+1`;\r\n\t\t\t\t\t\t\tif (player.storage.chaozaimrfz_eff) return str.replace(/XXX/g, `<font color = gray>${str2}（已触发）</font>`);\r\n\t\t\t\t\t\t\treturn str.replace(/XXX/g, str2);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tglobal: \"chaozaimrfz_eff2\",\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"damageBegin2\",\r\n\t\t\t\t\t\tglobal: [\"dieAfter\", \"phaseBegin\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tif (event.name == \"damage\") return true;\r\n\t\t\t\t\t\treturn player.storage.chaozaimrfz == event.player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (trigger.name == \"die\" || trigger.name == \"phase\") {\r\n\t\t\t\t\t\t\tplayer.removeSkill(\"chaozaimrfz_eff\");\r\n\t\t\t\t\t\t\tdelete player.storage.chaozaimrfz;\r\n\t\t\t\t\t\t\tdelete player.storage.chaozaimrfz_eff;\r\n\t\t\t\t\t\t} else if (player.storage.chaozaimrfz_eff != true) {\r\n\t\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t\t\tplayer.logSkill(\"chaozaimrfz\");\r\n\t\t\t\t\t\t\tplayer.storage.chaozaimrfz_eff = true;\r\n\t\t\t\t\t\t\tplayer.when({ global: \"phaseEnd\" }).then(() => {\r\n\t\t\t\t\t\t\t\tdelete player.storage.chaozaimrfz_eff;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff2: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\ttargetInRange(card, player, target) {\r\n\t\t\t\t\t\t\tif (target.hasSkill(\"chaozaimrfz_eff\")) {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcardUsableTarget(card, player, target) {\r\n\t\t\t\t\t\t\tif (target.hasSkill(\"chaozaimrfz_eff\")) return true;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//夜魔\r\n\t\tbiaolimrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\taiOrder(player, card, num) {\r\n\t\t\t\t\tif (get.itemtype(card) == \"card\" && card.storage && card.storage.biaolimrfz == true) return num + 1;\r\n\t\t\t\t},\r\n\t\t\t\tcardname(card, player, name) {\r\n\t\t\t\t\tvar storage = player.storage.biaolimrfz == \"red\" ? \"tao\" : \"sha\";\r\n\t\t\t\t\tif (card.storage && card.storage.biaolimrfz == true) return storage;\r\n\t\t\t\t},\r\n\t\t\t\ttargetInRange(card, player, target) {\r\n\t\t\t\t\tif (card.storage && card.storage.biaolimrfz == true && get.name(card) == \"sha\" && target.hp >= player.hp) return true;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst result = await player.draw(3).forResult();\r\n\t\t\t\tlet cards = result;\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\tvar red = 0;\r\n\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\tif (get.color(i) == \"red\") red++;\r\n\t\t\t\t\ti.storage.biaolimrfz = true;\r\n\t\t\t\t\ti.addGaintag(\"biaolimrfz\");\r\n\t\t\t\t}\r\n\t\t\t\tif (red > 1) player.storage.biaolimrfz = \"red\";\r\n\t\t\t\telse player.storage.biaolimrfz = \"black\";\r\n\t\t\t},\r\n\t\t\tgroup: [\"biaolimrfz_nocount\", \"biaolimrfz_set\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tset: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tunique: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\tvar enable = lib.card.tao.enable;\r\n\t\t\t\t\t\tlib.card.tao.enable = function (card, player) {\r\n\t\t\t\t\t\t\tif (player.storage.biaolimrfz && player.storage.biaolimrfz == \"red\" && player.isPhaseUsing()) {\r\n\t\t\t\t\t\t\t\tif (card.storage.biaolimrfz) return true;\r\n\t\t\t\t\t\t\t\treturn player.hp < player.maxHp;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn enable(card, player);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tvar selectTarget = lib.card.tao.selectTarget;\r\n\t\t\t\t\t\tlib.card.tao.selectTarget = function () {\r\n\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\tif (player.storage.biaolimrfz && player.storage.biaolimrfz == \"red\" && player.isPhaseUsing()) {\r\n\t\t\t\t\t\t\t\treturn [1, 1]; //QQQ\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn selectTarget;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tvar filterTarget = lib.card.tao.filterTarget;\r\n\t\t\t\t\t\tlib.card.tao.filterTarget = function (card, player, target) {\r\n\t\t\t\t\t\t\tif (player.storage.biaolimrfz && player.storage.biaolimrfz == \"red\" && player.isPhaseUsing()) {\r\n\t\t\t\t\t\t\t\tif (card.storage.biaolimrfz) return target.hp < target.maxHp;\r\n\t\t\t\t\t\t\t\treturn target.hp < target.maxHp && target == player;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn filterTarget(card, player, target);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tnocount: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard2\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tif (!event.card) return false;\r\n\t\t\t\t\t\tif (event.card.storage.biaolimrfz != true || get.name(event.card) != \"sha\") return false;\r\n\t\t\t\t\t\tfor (var i of event.targets) {\r\n\t\t\t\t\t\t\tif (player.hp <= i.hp) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\tif (trigger.addCount !== false) {\r\n\t\t\t\t\t\t\ttrigger.addCount = false;\r\n\t\t\t\t\t\t\ttrigger.player.getStat().card.sha--;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tymkongwomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { player: \"phaseDrawEnd\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { bool } = await player\r\n\t\t\t\t\t.chooseToDiscard()\r\n\t\t\t\t\t.set(\"position\", \"he\")\r\n\t\t\t\t\t.set(\"prompt\", \"【控我】:你可以弃置一张牌，然后观看牌堆顶两张牌，并以任意顺序将其置于牌堆顶或牌堆底\")\r\n\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\tif (player.skipList.includes(\"phaseUse\")) return 0;\r\n\t\t\t\t\t\tif (card.storage.biaolimrfz == true) return 10 - get.value(card);\r\n\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!bool) return;\r\n\t\t\t\tplayer.logSkill(\"ymkongwomrfz\");\r\n\t\t\t\tvar cards = get.cards(2);\r\n\t\t\t\tgame.cardsGotoOrdering(cards);\r\n\t\t\t\tconst { moved } = await player\r\n\t\t\t\t\t.chooseToMove()\r\n\t\t\t\t\t.set(\"list\", [[\"牌堆顶\", cards], [\"牌堆底\"]])\r\n\t\t\t\t\t.set(\"prompt\", \"点击将牌移动到牌堆顶或牌堆底\")\r\n\t\t\t\t\t.set(\"processAI\", function (list) {\r\n\t\t\t\t\t\tvar cards = list[0][1],\r\n\t\t\t\t\t\t\tplayer = _status.event.player;\r\n\t\t\t\t\t\tvar top = [];\r\n\t\t\t\t\t\tvar bottom;\r\n\t\t\t\t\t\tcards.sort(function (a, b) {\r\n\t\t\t\t\t\t\tvar a_value = get.color(a, player) == \"red\" ? 3 : 5,\r\n\t\t\t\t\t\t\t\tb_value = get.color(b, player) == \"red\" ? 3 : 5,\r\n\t\t\t\t\t\t\t\thp = player.hp;\r\n\t\t\t\t\t\t\tif (hp < 3) {\r\n\t\t\t\t\t\t\t\tif (get.color(a, player) == \"red\") a_value + 3;\r\n\t\t\t\t\t\t\t\tif (get.color(b, player) == \"red\") b_value + 3;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn b_value - a_value;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\twhile (cards.length) {\r\n\t\t\t\t\t\t\tvar value = 0;\r\n\t\t\t\t\t\t\tif (player.hp < 3) {\r\n\t\t\t\t\t\t\t\tif (get.color(cards[0], player) == \"red\") value++;\r\n\t\t\t\t\t\t\t} else if (get.color(cards[0], player) == \"black\") value++;\r\n\t\t\t\t\t\t\tif (value <= 0) break;\r\n\t\t\t\t\t\t\ttop.unshift(cards.shift());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbottom = cards;\r\n\t\t\t\t\t\treturn [top, bottom];\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!moved) return;\r\n\t\t\t\tvar top = moved[0];\r\n\t\t\t\tvar bottom = moved[1];\r\n\t\t\t\ttop.reverse();\r\n\t\t\t\tfor (var i = 0; i < top.length; i++) {\r\n\t\t\t\t\tui.cardPile.insertBefore(top[i], ui.cardPile.firstChild);\r\n\t\t\t\t}\r\n\t\t\t\tfor (i = 0; i < bottom.length; i++) {\r\n\t\t\t\t\tui.cardPile.appendChild(bottom[i]);\r\n\t\t\t\t}\r\n\t\t\t\tgame.addCardKnower(top, player);\r\n\t\t\t\tgame.addCardKnower(bottom, player);\r\n\t\t\t\tplayer.popup(get.cnNumber(top.length) + \"上\" + get.cnNumber(bottom.length) + \"下\");\r\n\t\t\t\tgame.log(player, \"将\" + get.cnNumber(top.length) + \"张牌置于牌堆顶\");\r\n\t\t\t\tgame.updateRoundNumber();\r\n\t\t\t\tlet { promise, resolve } = Promise.withResolvers();\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t}, 500);\r\n\t\t\t\tawait promise;\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//惊蛰\r\n\t\tchunleimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"phaseZhunbeiBegin\" },\r\n\t\t\tdirect: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"he\", { color: \"black\" }) > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst {cards} = await player\r\n\t\t\t\t\t.chooseCard()\r\n\t\t\t\t\t.set(\"prompt\", `【春雷】:你可以弃置一张黑色的牌，对${get.translation(trigger.player)}造成一点雷属性的伤害`)\r\n\t\t\t\t\t.set(\"filterCard\", card => get.color(card) == \"black\")\r\n\t\t\t\t\t.set(\"position\", \"he\")\r\n\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\tif (get.damageEffect(_status.event.target, player, player, \"thunder\") > 0) return 6 - get.value(card);\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"target\", trigger.player)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\tplayer.discard(cards);\r\n\t\t\t\ttrigger.player.damage(\"thunder\");\r\n\t\t\t\tplayer.logSkill(\"chunleimrfz\", trigger.player);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tthreaten: 1.3,\r\n\t\t\t},\r\n\t\t},\r\n\t\tzheqimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { global: \"damageEnd\" },\r\n\t\t\tusable: 1,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.nature && event.nature == \"thunder\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar target = _status.currentPhase;\r\n\t\t\t\tif (!target) return;\r\n\t\t\t\ttarget.addTempSkill(\"zheqimrfz_eff1\");\r\n\t\t\t\tplayer.addTempSkill(\"zheqimrfz_eff2\", { global: \"phaseBegin\" });\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff1: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"<i>正月启蛰，言发蛰也。万物出乎震，震为雷，故曰惊蛰。是蛰虫惊而出走矣。<br>————《大戴礼记·夏小正》</i>\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable(card) {\r\n\t\t\t\t\t\t\tif (get.itemtype(card) == \"card\") return Infinity;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"useCard\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn event.card && get.type(event.card) != \"equip\" && player.countCards(\"h\") > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.chooseToDiscard(true, \"【蛰起】:请选择弃置一张手牌\").set(\"ai\", card => 6 - get.value(card));\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff2: {\r\n\t\t\t\t\taudio: \"zheqimrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\t\t\tgetDiscard: function (event, player) {\r\n\t\t\t\t\t\tvar history = event.player.getHistory(\"lose\", function (evt) {\r\n\t\t\t\t\t\t\t\treturn evt && evt.type == \"discard\";\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\tcards = [];\r\n\t\t\t\t\t\tif (history.length == 0) return cards;\r\n\t\t\t\t\t\tfor (var i = 0; i < history.length; i++) {\r\n\t\t\t\t\t\t\tvar cardsList = history[i].cards;\r\n\t\t\t\t\t\t\tfor (var j = 0; j < cardsList.length; j++) {\r\n\t\t\t\t\t\t\t\tif (get.position(cardsList[j], true) != \"d\") continue;\r\n\t\t\t\t\t\t\t\tcards.push(cardsList[j]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn cards;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tvar cards = lib.skill.zheqimrfz_eff2.getDiscard(event, player);\r\n\t\t\t\t\t\treturn cards.length > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet cards = lib.skill.zheqimrfz_eff2.getDiscard(trigger, player);\r\n\t\t\t\t\t\tconst {links} = await player\r\n\t\t\t\t\t\t\t.chooseButton([\"【蛰起】:请选择你要获得的牌\", cards])\r\n\t\t\t\t\t\t\t.set(\"forced\", true)\r\n\t\t\t\t\t\t\t.set(\"filterButton\", button => {\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\treturn !ui.selected.buttons.some(i => get.type2(i, player) == get.type2(button, player));\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"selectButton\", [1, Infinity])\r\n\t\t\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\t\t\treturn _status.event.player.getUseValue(button.link);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (!links) return;\r\n\t\t\t\t\t\tplayer.gain(links, \"gain2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.3,\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//龙舌兰\r\n\t\tpianfengmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageSource\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.player && event.player.isIn() && event.card.isCard && event.cards.filterInD().length > 0 && event.player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tprompt(event, player) {\r\n\t\t\t\tvar num =\r\n\t\t\t\t\tevent.player.getHistory(\"damage\", evt => {\r\n\t\t\t\t\t\treturn evt.card && evt.card.name == event.card.name;\r\n\t\t\t\t\t}).length + 1;\r\n\t\t\t\treturn `【偏锋】:是否令${get.translation(event.player)}回复一点体力并展示其${get.cnNumber(num)}张手牌`;\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\tvar num = event.player.getHistory(\"damage\", evt => {\r\n\t\t\t\t\t\treturn evt.card && evt.card.name == event.card.name;\r\n\t\t\t\t\t}).length,\r\n\t\t\t\t\tatt = get.attitude(event.player.player);\r\n\t\t\t\t/*\r\n\t\t\t\t\tif(num<2&&att>0) return true;\r\n\t\t\t\t\treturn num>1&&att<0&&event.player.countCards('h')>=num;\r\n\t\t\t\t\t*/\r\n\t\t\t\treturn att < 0 && event.player.countCards(\"h\") >= num;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet num =\r\n\t\t\t\t\t\ttrigger.player.getHistory(\"damage\", evt => {\r\n\t\t\t\t\t\t\treturn evt.card && evt.card.name == trigger.card.name;\r\n\t\t\t\t\t\t}).length + 1,\r\n\t\t\t\t\ttarget = trigger.player;\r\n\t\t\t\ttarget.recover();\r\n\t\t\t\tconst {cards} = await player\r\n\t\t\t\t\t.choosePlayerCard()\r\n\t\t\t\t\t.set(\"selectButton\", num)\r\n\t\t\t\t\t.set(\"forced\", true)\r\n\t\t\t\t\t.set(\"position\", \"h\")\r\n\t\t\t\t\t.set(\"target\", target)\r\n\t\t\t\t\t.set(\"prompt\", `【偏锋】:请选择展示${get.translation(target)}的${get.cnNumber(num)}张牌`)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\tplayer.showCards(cards, `${get.translation(player)}展示了${get.translation(target)}的${get.cnNumber(num)}张牌`);\r\n\t\t\t\tgame.delay();\r\n\t\t\t\tlet bool = false;\r\n\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\tif (get.type2(i) != get.type2(trigger.card)) continue;\r\n\t\t\t\t\tbool = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (!bool) {\r\n\t\t\t\t\tplayer.draw(num);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\ttarget.discard(cards);\r\n\t\t\t\ttarget.loseHp(num);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.5,\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//阿米娅\r\n\t\ttongganmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"drawAfter\",\r\n\t\t\t},\r\n\t\t\tusable: 3,\r\n\t\t\tforced: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.player !== player;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.draw();\r\n\t\t\t},\r\n\t\t\tgroup: \"tonggan_discardmrfz\",\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 2,\r\n\t\t\t},\r\n\t\t},\r\n\t\ttonggan_discardmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"loseAfter\",\r\n\t\t\t},\r\n\t\t\tusable: 3,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.type != \"discard\") return false;\r\n\t\t\t\treturn event.player !== player;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tplayer.chooseToDiscard(\"he\", true, 1);\r\n\t\t\t},\r\n\t\t},\r\n\t\tqinghemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tzhuSkill: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"loseAfter\",\r\n\t\t\t\tglobal: \"loseAsyncAfter\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player == _status.currentPhase) return false;\r\n\t\t\t\treturn event.type == \"discard\" && event.getl(player).cards2.length > 0 && !player.hasSkill(\"qinghemrfz_ban\");\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar target = _status.currentPhase;\r\n\t\t\t\tif (!target) return;\r\n\t\t\t\ttarget\r\n\t\t\t\t\t.chooseBool(\"【亲和】：是否让\" + get.translation(player) + \"其弃置的牌中的一张牌？\")\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\treturn get.attitude(_status.currentPhase, _status.event.targetx) > 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"targetx\", player);\r\n\t\t\t\t(\"step 1\");\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\tvar target = _status.currentPhase;\r\n\t\t\t\t\tplayer.addTempSkill(\"qinghemrfz_ban\", \"phaseEnd\");\r\n\t\t\t\t\tif (trigger.cards.length == 1) {\r\n\t\t\t\t\t\tplayer.gain(trigger.cards, \"gain2\");\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (trigger.cards.length > 1) {\r\n\t\t\t\t\t\ttarget.chooseButton([\"选择获得令其获得其中的一张牌\", trigger.cards.slice(0)], true).ai = function (button) {\r\n\t\t\t\t\t\t\treturn get.value(button.link);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t} else event.finish();\r\n\t\t\t\t(\"step 2\");\r\n\t\t\t\tif (result.links) {\r\n\t\t\t\t\tplayer.logSkill(\"qinghemrfz\");\r\n\t\t\t\t\tplayer.gain(result.links, \"gain2\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//doc 医生\r\n\t\tyizhemrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tignoredHandcard: function (card, player) {\r\n\t\t\t\t\tif (get.name(card) == \"tao\") {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcardDiscardable: function (card, player, name) {\r\n\t\t\t\t\tif (name == \"phaseDiscard\" && get.name(card) == \"tao\") return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tinit() {\r\n\t\t\t\tvar enable = lib.card.tao.enable;\r\n\t\t\t\tlib.card.tao.enable = function (card, player) {\r\n\t\t\t\t\tif (player.hasSkill(\"yizhemrfz\")) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn enable(card, player);\r\n\t\t\t\t};\r\n\t\t\t\tvar selectTarget = lib.card.tao.selectTarget;\r\n\t\t\t\tlib.card.tao.selectTarget = function () {\r\n\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\tif (player.hasSkill(\"yizhemrfz\")) {\r\n\t\t\t\t\t\treturn [1, 1]; //QQQ\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn selectTarget;\r\n\t\t\t\t};\r\n\t\t\t\tvar filterTarget = lib.card.tao.filterTarget;\r\n\t\t\t\tlib.card.tao.filterTarget = function (card, player, target) {\r\n\t\t\t\t\tif (player.hasSkill(\"yizhemrfz\")) {\r\n\t\t\t\t\t\treturn target.hp < target.maxHp && (player.inRange(target) || player == target);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn filterTarget(card, player, target);\r\n\t\t\t\t};\r\n\t\t\t\tlib.card.tao.content = function () {\r\n\t\t\t\t\tif (player.hasSkill(\"yizhemrfz\")) {\r\n\t\t\t\t\t\tvar num = target.getDamagedHp();\r\n\t\t\t\t\t\ttarget.recover(5);\r\n\t\t\t\t\t\tif (5 - num > 0) {\r\n\t\t\t\t\t\t\ttarget.addSkill(\"yizhemrfz_eff\");\r\n\t\t\t\t\t\t\ttarget.storage.yizhemrfz_eff = 5 - num;\r\n\t\t\t\t\t\t\ttarget.changeHujia(5 - num);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else target.recover();\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tcontent() {\r\n\t\t\t\tvar cards = [];\r\n\t\t\t\tif (ui.cardPile.childNodes.length < 1) return;\r\n\t\t\t\tfor (var i of ui.cardPile.childNodes) {\r\n\t\t\t\t\tif (cards.length > 2) break;\r\n\t\t\t\t\tif (i.name == \"tao\") cards.push(i);\r\n\t\t\t\t}\r\n\t\t\t\tif (cards.length > 0) player.gain(cards, \"gain2\");\r\n\t\t\t\telse player.chat(\"byd怎么开局牌堆中的桃就没了？\");\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\t\t\treturn `你因【桃】而获得的护甲数:${player.storage.yizhemrfz_eff}`;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (!player.hujia) return;\r\n\t\t\t\t\t\tif (player.storage.yizhemrfz_eff && player.storage.yizhemrfz_eff > 0) {\r\n\t\t\t\t\t\t\tplayer.storage.yizhemrfz_eff--;\r\n\t\t\t\t\t\t\tplayer.changeHujia(-1);\r\n\t\t\t\t\t\t\tplayer.popup(\"失去护甲\");\r\n\t\t\t\t\t\t\tgame.log(player, \"失去了一点因【桃】而获得的护甲值\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (player.storage.yizhemrfz_eff && player.storage.yizhemrfz_eff == 0) {\r\n\t\t\t\t\t\t\tplayer.removeSkill(\"yizhemrfz_eff\");\r\n\t\t\t\t\t\t\tdelete player.storage.yizhemrfz_eff;\r\n\t\t\t\t\t\t\tplayer.unmarkSkill(\"yizhemrfz_eff\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgroup: \"yizhemrfz_lose\",\r\n\t\t\t\t},\r\n\t\t\t\tlose: {\r\n\t\t\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.hujia;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (player.storage.yizhemrfz_eff && player.storage.yizhemrfz_eff > 0) {\r\n\t\t\t\t\t\t\tplayer.storage.yizhemrfz_eff--;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (player.storage.yizhemrfz_eff && player.storage.yizhemrfz_eff == 0) {\r\n\t\t\t\t\t\t\tplayer.removeSkill(\"yizhemrfz_eff\");\r\n\t\t\t\t\t\t\tdelete player.storage.yizhemrfz_eff;\r\n\t\t\t\t\t\t\tplayer.unmarkSkill(\"yizhemrfz_eff\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhulimrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tcardname(card, player, name) {\r\n\t\t\t\t\tif (card.hasGaintag(\"zhulimrfz\")) return \"tao\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseJieshuBegin\" },\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (player.getStat(\"damage\") != undefined) {\r\n\t\t\t\t\tif (player.countCards(\"he\") > 0) player.chooseToDiscard(\"he\", true, `【医者】:请选择弃置一张牌`);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst result = await player.draw(2);\r\n\t\t\t\t\tif (!result) return;\r\n\t\t\t\t\tvar cards = result.result;\r\n\t\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\t\tvar num = get.number(i);\r\n\t\t\t\t\t\tif (get.suit(i) == \"heart\" && num >= 2 && num <= 9) {\r\n\t\t\t\t\t\t\ti.addGaintag(\"zhulimrfz\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//inna 双月\r\n\t\tshuangzimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tgroup: [\"shuangzimrfz_eff1\", \"shuangzimrfz_eff2\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff1: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { player: \"useCardBegin\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\t//复制卡牌、对应元素\r\n\t\t\t\t\t\tlet cardcopy = { ...trigger.card },\r\n\t\t\t\t\t\t\tevt = event.getParent(3);\r\n\t\t\t\t\t\tvar num = get.randomNumberSJZX();\r\n\t\t\t\t\t\tcardcopy[\"idSJZX\"] = num;\r\n\t\t\t\t\t\tcardcopy[\"evtP\"] = evt.orderingCards;\r\n\t\t\t\t\t\tconsole.log(evt.orderingCards);\r\n\t\t\t\t\t\ttrigger.card[\"idSJZX\"] = num;\r\n\t\t\t\t\t\tif (!player.storage.shuangzimrfz) player.storage.shuangzimrfz = [];\r\n\t\t\t\t\t\tplayer.storage.shuangzimrfz.push(cardcopy);\r\n\t\t\t\t\t\t//删除对应元素\r\n\t\t\t\t\t\ttrigger.card.cards = [];\r\n\t\t\t\t\t\tdelete trigger.card.number;\r\n\t\t\t\t\t\tdelete trigger.card.suit;\r\n\t\t\t\t\t\tdelete trigger.card.color;\r\n\t\t\t\t\t\tevt.orderingCards = undefined;\r\n\t\t\t\t\t\tevt.cards = [];\r\n\t\t\t\t\t\t//console.log(evt);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff2: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tsource: [\"damageBegin\"],\r\n\t\t\t\t\t\tplayer: [\"cardsDiscardAfter\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tif (event.name == \"damage\") {\r\n\t\t\t\t\t\t\tvar storage = player.storage.shuangzimrfz;\r\n\t\t\t\t\t\t\tif (!event.card) return false;\r\n\t\t\t\t\t\t\tfor (var i of storage) {\r\n\t\t\t\t\t\t\t\tif (event.card.idSJZX != i.idSJZX) continue;\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar evt = event.getParent();\r\n\t\t\t\t\t\t\tvar storage = player.storage.shuangzimrfz;\r\n\t\t\t\t\t\t\tif (evt.name != \"orderingDiscard\") return false;\r\n\t\t\t\t\t\t\tfor (var i of storage) {\r\n\t\t\t\t\t\t\t\tfor (var j in event.cards) {\r\n\t\t\t\t\t\t\t\t\tif (j.idSJZX != i.idSJZX) continue;\r\n\t\t\t\t\t\t\t\t\treturn event.cards.filterInD(\"d\").length;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet evt = event.getParent(3),\r\n\t\t\t\t\t\t\tstorage = player.storage.shuangzimrfz;\r\n\t\t\t\t\t\t//重置\r\n\t\t\t\t\t\tfor (var i of storage) {\r\n\t\t\t\t\t\t\tif (i.idSJZX == trigger.card.idSJZX) {\r\n\t\t\t\t\t\t\t\tevt.cards = i.cards;\r\n\t\t\t\t\t\t\t\ttrigger.card.cards = i.cards;\r\n\t\t\t\t\t\t\t\ttrigger.card.number = i.number;\r\n\t\t\t\t\t\t\t\ttrigger.card.suit = i.suit;\r\n\t\t\t\t\t\t\t\ttrigger.card.color = i.color;\r\n\t\t\t\t\t\t\t\tdelete player.storage.shuangzimrfz[i];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconsole.log(trigger.card);\r\n\t\t\t\t\t\tconsole.log(evt);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//凛视\r\n\t\t/** @type { Skill } */\r\n\t\tjiangtumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\ttrigger: { player: [\"gainPlayerCardBegin\", \"discardPlayerCardBegin\", \"choosePlayerCardBegin\"] },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn _status.currentPhase == event.target;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.logSkill(\"jiangtumrfz\", _status.currentPhase);\r\n\t\t\t\ttrigger.visible = true;\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.1,\r\n\t\t\t\tviewHandcard: true,\r\n\t\t\t\tskillTagFilter(player, tag, arg) {\r\n\t\t\t\t\tif (tag === \"viewHandcard\" && arg !== _status.currentPhase) return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t/** @type { Skill } */\r\n\t\tjieshimrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\taiOrder: function (player, card, num) {\r\n\t\t\t\t\tvar list = player.storage.jieshimrfz;\r\n\t\t\t\t\tif (typeof card == \"object\" && player.isPhaseUsing() && list && list.length > 0) {\r\n\t\t\t\t\t\tif (get.type2(card) == list[0]) return num + 10;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 3,\r\n\t\t\ttrigger: { global: \"phaseUseBegin\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst {cards} = await player\r\n\t\t\t\t\t.chooseToDiscard(\"he\")\r\n\t\t\t\t\t.set(\"prompt\", `【揭示】:你可以弃置一张牌，然后猜测${trigger.player == player ? \"你\" : get.translation(trigger.player)}本阶段前三张牌分别使用的类型（对${trigger.player == player ? \"你\" : get.translation(trigger.player)}不可见）。`)\r\n\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\tplayer.logSkill(\"jieshimrfz\");\r\n\t\t\t\tvar list = [\r\n\t\t\t\t\t[\"待选择的牌的类型\", [[\"basic\", \"basic\", \"basic\", \"trick\", \"trick\", \"trick\", \"equip\", \"equip\", \"equip\"], \"vcard\"]],\r\n\t\t\t\t\t[\"请调整顺序<br>从左到右:第一、二、三张牌\", []],\r\n\t\t\t\t];\r\n\t\t\t\tconst {moved} = await player\r\n\t\t\t\t\t.chooseToMove(`【揭示】:请猜测${trigger.player == player ? \"你\" : get.translation(trigger.player)}本阶段前三张牌分别使用的类型`)\r\n\t\t\t\t\t.set(\"list\", list)\r\n\t\t\t\t\t.set(\"filterMove\", function (from, to, moved) {\r\n\t\t\t\t\t\treturn (to == 1 && moved[1].length < 3) || to == 0 || typeof to !== \"number\";\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"processAI\", () => {\r\n\t\t\t\t\t\tvar moved = [[114514], []],\r\n\t\t\t\t\t\t\tcards = _status.currentPhase.getCards(\"h\"),\r\n\t\t\t\t\t\t\torder = [\r\n\t\t\t\t\t\t\t\t[0, 0],\r\n\t\t\t\t\t\t\t\t[0, 0],\r\n\t\t\t\t\t\t\t\t[0, 0],\r\n\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\t\t\tfor (var j = 0; j < order.length; j++) {\r\n\t\t\t\t\t\t\t\tif (get.order(i) > order[j][1]) {\r\n\t\t\t\t\t\t\t\t\torder[j] = [i, get.order(i)];\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var i of order) {\r\n\t\t\t\t\t\t\tmoved[1].push([\"ByTheLeaderOne\", \"作者：林登万\", get.type2(i[0])]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn moved;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!moved) return;\r\n\t\t\t\tvar list = moved[1].map(i => i[2]);\r\n\t\t\t\ttrigger.player.addTempSkill(\"jieshimrfz_eff\", { player: \"phaseUseEnd\" });\r\n\t\t\t\ttrigger.player.storage.jieshimrfz = list;\r\n\t\t\t\ttrigger.player.storage.jieshimrfz_eff = player;\r\n\t\t\t\t_status.tmpTotal_jieshimrfz = 0;\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tonremove(player) {\r\n\t\t\t\t\t\tdelete player.storage.jieshimrfz;\r\n\t\t\t\t\t\tdelete player.storage.jieshimrfz_eff;\r\n\t\t\t\t\t\tdelete _status.tmpTotal_jieshimrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\t\t\tvar storage = player.storage.jieshimrfz;\r\n\t\t\t\t\t\t\tif (storage === \"error\") return `未知错误`;\r\n\t\t\t\t\t\t\tif (game.me === player && game.me.hasSkill(\"jieshimrfz\") && storage.length > 0) return get.translation(storage);\r\n\t\t\t\t\t\t\tif (storage.length == 0) return \"全部已猜测完毕\";\r\n\t\t\t\t\t\t\treturn `剩余${storage.length}张`;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tif (!player.storage.jieshimrfz_eff.isIn()) return false;\r\n\t\t\t\t\t\treturn player.storage.jieshimrfz && player.storage.jieshimrfz.length > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (!_status.tmpTotal_jieshimrfz) _status.tmpTotal_jieshimrfz = 0;\r\n\t\t\t\t\t\tvar target = player.storage.jieshimrfz_eff;\r\n\t\t\t\t\t\tif (get.type2(trigger.card) == player.storage.jieshimrfz[0]) {\r\n\t\t\t\t\t\t\t_status.tmpTotal_jieshimrfz++;\r\n\t\t\t\t\t\t\tif (_status.tmpTotal_jieshimrfz == 3 && target != player) player.chat(\"被看穿了吗？\");\r\n\t\t\t\t\t\t\telse if (_status.tmpTotal_jieshimrfz == 3) player.chat(\"我猜的真准！\");\r\n\t\t\t\t\t\t\ttarget.logSkill(\"jieshimrfz\", player);\r\n\t\t\t\t\t\t\ttarget.popup(\"猜测正确\");\r\n\t\t\t\t\t\t\ttarget.draw(_status.tmpTotal_jieshimrfz);\r\n\t\t\t\t\t\t\tif (_status.tmpTotal_jieshimrfz > 1) {\r\n\t\t\t\t\t\t\t\tvar num = Math.min(_status.tmpTotal_jieshimrfz - 1, 1);\r\n\t\t\t\t\t\t\t\tconst {bool} = await target\r\n\t\t\t\t\t\t\t\t\t.chooseBool(`【揭示】:是否对${get.translation(player)}造成${get.cnNumber(num)}点伤害？`)\r\n\t\t\t\t\t\t\t\t\t.set(\"ai\", () => get.damageEffect(target, player) > 0)\r\n\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\t\tif (bool) player.damage(num, target);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (target == player) player.chat(\"<img style='width:100px;height:100px' src=\" + lib.assetURL + \"extension/WhichWay/image/skill/jieshiError.png></img>\");\r\n\t\t\t\t\t\t\ttarget.popup(\"猜测错误\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tplayer.storage.jieshimrfz.shift();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//医疗阿米娅\r\n\t\ttongqingmrfz: {\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\tonremove: function (player, skill) {\r\n\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\treturn card.hasGaintag(\"tongqingmrfzx\");\r\n\t\t\t\t});\r\n\t\t\t\tif (cards.length) {\r\n\t\t\t\t\tplayer.lose(cards, ui.discardPile);\r\n\t\t\t\t\tplayer.$throw(cards, 1000);\r\n\t\t\t\t\tgame.log(cards, \"进入了弃牌堆\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmarktext: \"情绪\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"情绪\",\r\n\t\t\t\tmark(dialog, content, player) {\r\n\t\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\t\treturn card.hasGaintag(\"tongqingmrfzx\");\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (!cards || cards.length < 1) {\r\n\t\t\t\t\t\tdialog.addText(`没有‘情绪’`);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdialog.addText(`共有${cards.length}张‘情绪’`);\r\n\t\t\t\t\t\tdialog.addSmall(cards);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"phaseJieshuBegin\" },\r\n\t\t\tgetDiscard: function (event, player) {\r\n\t\t\t\tlet cards = [];\r\n\t\t\t\tfor (var character of game.players) {\r\n\t\t\t\t\tvar history = character.getHistory(\"lose\", function (evt) {\r\n\t\t\t\t\t\treturn evt && evt.type == \"discard\";\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (history.length == 0) continue;\r\n\t\t\t\t\tfor (var i = 0; i < history.length; i++) {\r\n\t\t\t\t\t\tvar cardsList = history[i].cards;\r\n\t\t\t\t\t\tfor (var j = 0; j < cardsList.length; j++) {\r\n\t\t\t\t\t\t\tif (get.position(cardsList[j], true) != \"d\") continue;\r\n\t\t\t\t\t\t\tcards.push(cardsList[j]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn cards;\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tlet cardsList = lib.skill.tongqingmrfz.getDiscard(event, player);\r\n\t\t\t\treturn cardsList && cardsList.length > 0;\r\n\t\t\t},\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\tlet cardsList = lib.skill.tongqingmrfz.getDiscard(event, player),\r\n\t\t\t\t\tcards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\t\treturn card.hasGaintag(\"tongqingmrfzx\");\r\n\t\t\t\t\t});\r\n\t\t\t\treturn `【恸请】:你可以将所有的‘情绪’（${cards.length > 0 ? `共有${cards.length}张‘情绪’` : \"没有‘情绪’\"}）置入弃牌堆，然后将${get.translation(cardsList)}置于你的武将牌上，称之为‘情绪’`;\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\tlet cardsList = lib.skill.tongqingmrfz.getDiscard(event, player),\r\n\t\t\t\t\tcards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\t\treturn card.hasGaintag(\"tongqingmrfzx\");\r\n\t\t\t\t\t});\r\n\t\t\t\tif (cards.length < 1) return true;\r\n\t\t\t\treturn get.value(cardsList) - get.value(cards) > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\r\n\t\t\t\t\treturn card.hasGaintag(\"tongqingmrfzx\");\r\n\t\t\t\t});\r\n\t\t\t\tif (cards && cards.length > 0) {\r\n\t\t\t\t\tawait player.loseToDiscardpile(cards);\r\n\t\t\t\t}\r\n\t\t\t\tlet cardsList = lib.skill.tongqingmrfz.getDiscard(trigger, player);\r\n\t\t\t\tgame.log(player, \"将\", cardsList.length, \"张牌置于在武将牌上\");\r\n\t\t\t\tplayer.loseToSpecial(cardsList, \"tongqingmrfzx\");\r\n\t\t\t\tplayer.markSkill(\"tongqingmrfz\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tcibeimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"loseAfter\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tvar position = event.cards.map(i => i.original);\r\n\t\t\t\treturn position.every(item => item != \"h\");\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst {targets} = await player\r\n\t\t\t\t\t.chooseTarget()\r\n\t\t\t\t\t.set(\"prompt\", `【慈悲】:你可以令你攻击范围内的一名角色或你回复一点体力或摸一张牌`)\r\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\r\n\t\t\t\t\t\treturn player.inRange(target) || target == player;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", target => get.attitude(_status.event.player, target) > 0)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!targets) return;\r\n\t\t\t\tlet target = targets[0];\r\n\t\t\t\tif (target.getDamagedHp() < 1) {\r\n\t\t\t\t\ttarget.draw();\r\n\t\t\t\t\tplayer.logSkill(\"cibeimrfz\", target);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst {control} = await player\r\n\t\t\t\t\t.chooseControl(\"回复体力\", \"摸一张牌\")\r\n\t\t\t\t\t.set(\"prompt\", `【慈悲】:请选择一项`)\r\n\t\t\t\t\t.set(\"ai\", () => 0)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!control) return;\r\n\t\t\t\tif (control == \"回复体力\") {\r\n\t\t\t\t\ttarget.recover();\r\n\t\t\t\t} else target.draw();\r\n\t\t\t\tplayer.logSkill(\"cibeimrfz\", target);\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 异格芬 历战锐枪芬\r\n\t\txiaozhimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.target) < 0;\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.card.name == \"sha\" && player.canCompare(event.target);\r\n\t\t\t},\r\n\t\t\tlogTarget: \"target\",\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar result = await player.chooseToCompare(trigger.target);\r\n\t\t\t\tif (!result) return;\r\n\t\t\t\tresult = result.result;\r\n\t\t\t\tif (result.winner != player) player.draw(2);\r\n\t\t\t\tif (result.winner != trigger.target) {\r\n\t\t\t\t\tvar cards = [result.player, result.target];\r\n\t\t\t\t\tcards = cards.filter(card => player.hasUseTarget(card) && !get.owner(card));\r\n\t\t\t\t\tif (cards.length) {\r\n\t\t\t\t\t\tvar {links} = await player\r\n\t\t\t\t\t\t\t.chooseButton([\"是否使用其中的牌？\", cards])\r\n\t\t\t\t\t\t\t.set(\"ai\", button => _status.event.player.getUseValue(button.link))\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (links) {\r\n\t\t\t\t\t\t\tvar card = links[0];\r\n\t\t\t\t\t\t\tplayer.$gain2(card, false);\r\n\t\t\t\t\t\t\tgame.delayx();\r\n\t\t\t\t\t\t\tplayer.chooseUseTarget(true, card, false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttrigger.getParent().directHit.add(trigger.target);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhishoumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"chooseToUse\",\r\n\t\t\tfilterCard(card) {\r\n\t\t\t\treturn get.itemtype(card) == \"card\" && card.hasGaintag(\"zhishoumrfz\");\r\n\t\t\t},\r\n\t\t\tsubfrequent: [\"addcount\"],\r\n\t\t\tposition: \"h\",\r\n\t\t\tviewAs(cards, player) {\r\n\t\t\t\tif (cards.length) {\r\n\t\t\t\t\tif (_status.currentPhase == player) return { name: \"sha\" };\r\n\t\t\t\t\treturn { name: \"shan\" };\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t},\r\n\t\t\tviewAsFilter(player) {\r\n\t\t\t\tif (!player.countCards(\"h\", card => card.hasGaintag(\"zhishoumrfz\"))) return false;\r\n\t\t\t},\r\n\t\t\tprompt(event) {\r\n\t\t\t\treturn `【执守】:将本轮出牌阶段内获得的牌当作${_status.currentPhase === event.player ? \"【闪】\" : \"【杀】\"}使用`;\r\n\t\t\t},\r\n\t\t\tcheck(card) {\r\n\t\t\t\treturn 7 - get.value(card);\r\n\t\t\t},\r\n\t\t\tonremove(player) {\r\n\t\t\t\tplayer.removeGaintag(\"zhishoumrfz\");\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 2,\r\n\t\t\t\trespondShan: true,\r\n\t\t\t\trespondSha: true,\r\n\t\t\t\tskillTagFilter(player, tag, arg) {\r\n\t\t\t\t\tif (arg == \"respond\" || !player.countCards(\"h\", card => _status.connectMode || card.hasGaintag(\"zhishoumrfz\"))) return false;\r\n\t\t\t\t},\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhishoumrfz_mark\", \"zhishoumrfz_addcount\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\taddcount: {\r\n\t\t\t\t\taudio: \"zhishoumrfz\",\r\n\t\t\t\t\ttrigger: { player: \"gainAfter\" },\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\tfrequent: true,\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tvar evt = event.getParent(\"phaseDraw\");\r\n\t\t\t\t\t\tif (player.hasSkill(\"zhishoumrfz_eff\")) return false;\r\n\t\t\t\t\t\tif (evt && evt.player == player) return false;\r\n\t\t\t\t\t\treturn event.getg(player).length > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: \"【执守】:是否令本轮使用【杀】的次数+1？\",\r\n\t\t\t\t\tcheck() {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\tplayer.addTempSkill(\"zhishoumrfz_eff\", { global: \"roundStart\" });\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"使用【杀】的次数+1\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable(card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num + 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tmark: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"roundStart\",\r\n\t\t\t\t\t\tplayer: \"gainBegin\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tif (event.name == \"gain\") return player.isPhaseUsing();\r\n\t\t\t\t\t\telse return game.roundNumber > 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\tif (trigger.name == \"gain\") trigger.gaintag.add(\"zhishoumrfz\");\r\n\t\t\t\t\t\telse player.removeGaintag(\"zhishoumrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 海霓\r\n\t\tjingchaomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 1;\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\tif (player.getDamagedHp() < 1) return false;\r\n\t\t\t\treturn 3 - player.getDamagedHp() + player.getCards(\"he\", card => get.value(card) < 7).length;\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tconst { result } = await player\r\n\t\t\t\t\t.chooseToDiscard(2, \"he\")\r\n\t\t\t\t\t.set(\"prompt2\", `你可以弃置两张牌并回复${trigger.num}点体力，若你弃置的牌类别不同，你将手牌补至5张`)\r\n\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\tvar player = get.event().player,\r\n\t\t\t\t\t\t\tselected = ui.selected.cards,\r\n\t\t\t\t\t\t\tnum = get.value(card);\r\n\t\t\t\t\t\tfor (var i of selected) {\r\n\t\t\t\t\t\t\tif (get.type2(i) == get.type2(card)) num - 3;\r\n\t\t\t\t\t\t\telse num + 2;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn 7 - num + player.getDamagedHp();\r\n\t\t\t\t\t});\r\n\t\t\t\tevent.result = result;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet cards = event.cards;\r\n\t\t\t\tplayer.recover(trigger.num);\r\n\t\t\t\tif (cards.length != 2) return;\r\n\t\t\t\tif (get.type2(cards[0]) != get.type2(cards[1])) {\r\n\t\t\t\t\tplayer.drawTo(5);\r\n\t\t\t\t\tplayer.tempBanSkill(\"jingchaomrfz\", \"phaseEnd\", false);\r\n\t\t\t\t\tgame.log(this, \"的技能\", `#g【静潮】`, `本回合失效了`);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tmaixie_hp: true,\r\n\t\t\t\tthreaten: 0.8,\r\n\t\t\t},\r\n\t\t},\r\n\t\tcehuimrfz: {\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = 0;\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"本回合开始时手牌数为：#\",\r\n\t\t\t},\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseJieshuBegin\",\r\n\t\t\t},\r\n\t\t\tgetDiscardCards(event) {\r\n\t\t\t\tlet cards = [];\r\n\t\t\t\tfor (var i of game.players.slice().concat(game.dead)) {\r\n\t\t\t\t\tvar history = i.getHistory(\"lose\", function (evt) {\r\n\t\t\t\t\t\treturn evt && evt.type == \"discard\";\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (history.length == 0) continue;\r\n\t\t\t\t\tfor (var k of history) {\r\n\t\t\t\t\t\tif (k.cards.length == 0) continue;\r\n\t\t\t\t\t\tfor (var j of k.cards) {\r\n\t\t\t\t\t\t\tif (get.position(j) != \"d\") continue;\r\n\t\t\t\t\t\t\tcards.push(j);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn cards;\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tvar cards = lib.skill.cehuimrfz.getDiscardCards(event);\r\n\t\t\t\tif (!game.hasPlayer(current => current != player && player.canCompare(current, true, false))) return false;\r\n\t\t\t\treturn player.countCards(\"h\") != player.storage.cehuimrfz && cards.length > 0;\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tvar cards = lib.skill.cehuimrfz.getDiscardCards(trigger);\r\n\t\t\t\tconst { result } = await player\r\n\t\t\t\t\t.chooseCardButton(cards)\r\n\t\t\t\t\t.set(\"prompt2\", `你可以选择一张牌并与一名其他角色进行拼点，若你赢，你使用牌堆顶3张牌`)\r\n\t\t\t\t\t.set(\"ai\", link => get.number(link));\r\n\t\t\t\tresult.cost_data = result.links;\r\n\t\t\t\tevent.result = result;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet card = event.cost_data[0];\r\n\t\t\t\tvar {targets} = await player\r\n\t\t\t\t\t.chooseTarget(true)\r\n\t\t\t\t\t.set(\"prompt\", `【测绘】:请选择一名其他角色进行拼点`)\r\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => target != player && player.canCompare(target, true, false))\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\tvar player = get.event().player;\r\n\t\t\t\t\t\treturn get.attitude(player, target) < 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!targets) return;\r\n\t\t\t\tvar tmpfuc = async function () {\r\n\t\t\t\t\tlet next = player.chooseToCompare(targets[0]);\r\n\t\t\t\t\tif (!next.fixedResult) next.fixedResult = {};\r\n\t\t\t\t\tnext.fixedResult[player.playerid] = card;\r\n\t\t\t\t\treturn next;\r\n\t\t\t\t};\r\n\t\t\t\tvar next = await tmpfuc();\r\n\t\t\t\tif (next.result.bool) {\r\n\t\t\t\t\tvar cards = game.cardsGotoOrdering(get.cards(3)).cards;\r\n\t\t\t\t\tplayer.showCards(cards, `${get.translation(player)}展示了牌堆顶三张牌`);\r\n\t\t\t\t\tlet canUse = cards.filter(i => player.hasUseTarget(i, false));\r\n\t\t\t\t\tif (canUse.length == 0) return;\r\n\t\t\t\t\twhile (canUse.length > 0) {\r\n\t\t\t\t\t\tconst {links} =\r\n\t\t\t\t\t\t\tcanUse.length == 1\r\n\t\t\t\t\t\t\t\t? {links:canUse}\r\n\t\t\t\t\t\t\t\t: await player\r\n\t\t\t\t\t\t\t\t\t\t.chooseCardButton(canUse, true)\r\n\t\t\t\t\t\t\t\t\t\t.set(\"prompt\", `【测绘】:请选择你要使用的牌`)\r\n\t\t\t\t\t\t\t\t\t\t.set(\"ai\", link => get.number(link))\r\n\t\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (!links) continue;\r\n\t\t\t\t\t\tawait player\r\n\t\t\t\t\t\t\t.chooseUseTarget(links[0])\r\n\t\t\t\t\t\t\t.set(\"nodistance\", true)\r\n\t\t\t\t\t\t\t.set(\"prompt\", `请选择${get.translation(links[0])}的目标`);\r\n\t\t\t\t\t\tcanUse.remove(links[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"cehuimrfz_record\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\trecord: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"phaseBegin\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\tif (typeof player.storage.cehuimrfz !== \"number\") player.storage.cehuimrfz = 0;\r\n\t\t\t\t\t\tplayer.storage.cehuimrfz = player.countCards(\"h\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 深巡\r\n\t\tyuchaomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => current != player && player.canCompare(current, true, false)) && player.countCards(\"hej\") > 0;\r\n\t\t\t},\r\n\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\treturn player.canCompare(target, true, false) && target != player;\r\n\t\t\t},\r\n\t\t\tselectTarget: [1, 2],\r\n\t\t\tmultitarget: true,\r\n\t\t\tmultiline: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet targets = event.targets;\r\n\t\t\t\tconst {links} = await player\r\n\t\t\t\t\t.choosePlayerCard(player, \"hej\", true)\r\n\t\t\t\t\t.set(\"prompt\", `【御潮】:请选择你的拼点牌`)\r\n\t\t\t\t\t.set(\"ai\", function (button) {\r\n\t\t\t\t\t\tvar card = button.link;\r\n\t\t\t\t\t\tvar player = get.event().player,\r\n\t\t\t\t\t\t\tnum = 0;\r\n\t\t\t\t\t\tif (get.position(card) == \"j\") num += 3 + get.value(card) / 2;\r\n\t\t\t\t\t\tif (get.position(card) == \"e\") num -= 2;\r\n\t\t\t\t\t\treturn get.number(card) + num - get.value(card) / 2;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!links) return;\r\n\t\t\t\tlet next = player.chooseToCompare(targets);\r\n\t\t\t\tif (!next.fixedResult) next.fixedResult = {};\r\n\t\t\t\tnext.fixedResult[player.playerid] = links[0];\r\n\t\t\t\tnext.callback = lib.skill.yuchaomrfz.callback;\r\n\t\t\t},\r\n\t\t\tasync callback(event, trigger, player) {\r\n\t\t\t\tif (event.num1 < event.num2) player.link(true);\r\n\t\t\t\telse if (event.num1 > event.num2) {\r\n\t\t\t\t\tevent.target.link(true);\r\n\t\t\t\t\tplayer.addTempSkill(\"yuchaomrfz_eff\", \"phaseEnd\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tevent.target.link(true);\r\n\t\t\t\t\tplayer.link(true);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsableTarget(card, player, target) {\r\n\t\t\t\t\t\t\tif (target.isLinked()) return true;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 8,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: -1,\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tyanhuimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tderivation: [\"binglinchengxia\"],\r\n\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\tforced: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tvar card = get.autoViewAs({ name: \"binglinchengxia\" }, [_status.pileTop]);\r\n\t\t\t\treturn player.canAddJudge(card);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tawait player.addJudge({ name: \"binglinchengxia\" }, [_status.pileTop]);\r\n\t\t\t\tplayer.draw(player.hp);\r\n\t\t\t\tplayer.loseHp();\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 明椒\r\n\t\tsuozemrfz: {\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\treturn `记录的牌名：${player.storage.suozemrfz.length > 0 ? get.translation(player.storage.suozemrfz) : \"无\"}`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"useCardEnd\", \"respondEnd\"],\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (event.cards.length < 1) return false;\r\n\t\t\t\treturn !player.storage.suozemrfz.includes(event.card.name) && (get.type2(event.card) == \"basic\" || get.type(event.card) == \"trick\");\r\n\t\t\t},\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\treturn `是否记录${get.translation(event.card)}，然后观看牌堆顶${player.maxHp}张牌，并用等量手牌交换其中至多${player.storage.suozemrfz.length + 1}张牌？`;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.storage.suozemrfz.add(trigger.card.name);\r\n\t\t\t\tgame.log(player, `的`, `#g【索赜】`, `记录了`, trigger.card.name);\r\n\t\t\t\tvar cards = get.cards(player.maxHp);\r\n\t\t\t\tlet cardsc = cards.slice(0);\r\n\t\t\t\tconst {moved} = await player\r\n\t\t\t\t\t.chooseToMove(`【索赜】:请选择你要交换的牌（至多交换${player.storage.suozemrfz.length}张牌）`)\r\n\t\t\t\t\t.set(\"filterMove\", (from, to) => {\r\n\t\t\t\t\t\treturn typeof to !== \"number\";\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"list\", [\r\n\t\t\t\t\t\t[\"牌堆顶\", cardsc],\r\n\t\t\t\t\t\t[\"你的手牌\", player.getCards(\"h\")],\r\n\t\t\t\t\t])\r\n\t\t\t\t\t.set(\"filterOk\", moved => {\r\n\t\t\t\t\t\tlet h = get.event().cardsh;\r\n\t\t\t\t\t\treturn h.filter(i => moved[0].includes(i)).length <= get.event().num;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"processAI\", list => {\r\n\t\t\t\t\t\tvar player = get.event().player;\r\n\t\t\t\t\t\tlet cards1 = list[0][1].slice(),\r\n\t\t\t\t\t\t\tcards2 = player.getCards(\"h\");\r\n\r\n\t\t\t\t\t\tif (cards2.length === 0) {\r\n\t\t\t\t\t\t\treturn [cards1, []];\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tlet maxC = Math.max(...cards1.map(i => get.value(i)));\r\n\t\t\t\t\t\tlet minH = Math.min(...cards2.map(i => get.value(i)));\r\n\r\n\t\t\t\t\t\tlet count = 0,\r\n\t\t\t\t\t\t\tnum = get.event().num;\r\n\r\n\t\t\t\t\t\twhile (minH < maxC && count < num) {\r\n\t\t\t\t\t\t\tcount++;\r\n\r\n\t\t\t\t\t\t\tlet maxCIndex = cards1.map(i => get.value(i)).indexOf(maxC);\r\n\r\n\t\t\t\t\t\t\tlet minHIndex = cards2.map(i => get.value(i)).indexOf(minH);\r\n\r\n\t\t\t\t\t\t\t[cards1[maxCIndex], cards2[minHIndex]] = [cards2[minHIndex], cards1[maxCIndex]];\r\n\r\n\t\t\t\t\t\t\tmaxC = Math.max(...cards1.map(i => get.value(i)));\r\n\t\t\t\t\t\t\tminH = Math.min(...cards2.map(i => get.value(i)));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn [cards1, cards2];\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"num\", player.storage.suozemrfz.length)\r\n\t\t\t\t\t.set(\"cardsh\", player.getCards(\"h\"))\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tconst puts = player.getCards(\"h\", i => moved[0].includes(i));\r\n\t\t\t\tconst gains = cardsc.filter(i => moved[1].includes(i));\r\n\t\t\t\tif (puts.length && gains.length) {\r\n\t\t\t\t\tplayer.$throw(puts.length, 1000);\r\n\t\t\t\t\tawait player.lose(puts, ui.special);\r\n\t\t\t\t\tawait player.gain(gains, \"giveAuto\");\r\n\t\t\t\t}\r\n\t\t\t\tcardsc = moved[0].slice();\r\n\t\t\t\tif (cardsc.length) {\r\n\t\t\t\t\tawait game.cardsGotoOrdering(cardsc);\r\n\t\t\t\t\tfor (let i = cardsc.length - 1; i >= 0; i--) {\r\n\t\t\t\t\t\tui.cardPile.insertBefore(cardsc[i], ui.cardPile.firstChild);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgame.log(get.cnNumber(cardsc.length, true), \"张牌被放回了牌堆顶\");\r\n\t\t\t\t\tgame.updateRoundNumber();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tyouyimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"phaseJieshuBegin\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.storage.suozemrfz.length > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar list = [];\r\n\t\t\t\tfor (var i = 0; i < lib.inpile.length; i++) {\r\n\t\t\t\t\tvar name = lib.inpile[i];\r\n\t\t\t\t\tif (!player.storage.suozemrfz.includes(name)) continue;\r\n\t\t\t\t\tif (get.type(name) == \"basic\") list.push([\"基本\", \"\", name]);\r\n\t\t\t\t\telse if (get.type(name) == \"trick\") list.push([\"锦囊\", \"\", name]);\r\n\t\t\t\t}\r\n\t\t\t\tlet {links} = await player\r\n\t\t\t\t\t.chooseButton([`游移:请移除${Math.ceil(list.length / 2)}张牌`, [list, \"vcard\"]], true)\r\n\t\t\t\t\t.set(\"selectButton\", Math.ceil(list.length / 2))\r\n\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\treturn _status.event.player.getUseValue(button.link, null, true);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!links) return;\r\n\t\t\t\tplayer.storage.suozemrfz.removeArray(links.map(i => i[2]));\r\n\t\t\t\tlet names = links.filter(i => player.hasUseTarget(i[2])).map(i => [get.translation(get.type(i[2])), \"\", i[2]]);\r\n\t\t\t\tif (names.length < 1) return;\r\n\r\n\t\t\t\tlet {links2} =\r\n\t\t\t\t\tnames.length == 1\r\n\t\t\t\t\t\t? {links2:names}\r\n\t\t\t\t\t\t: await player\r\n\t\t\t\t\t\t\t\t.chooseButton([\"游移:请选择一张你要使用的牌\", [names, \"vcard\"]], true)\r\n\t\t\t\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\t\t\t\treturn _status.event.player.getUseValue({ name: button.link[2] }, null, true);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\tplayer.chooseUseTarget({ name: links2[0][2] }, true);\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 戴菲恩\r\n\t\tzhuofengmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tusable: 1,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet list = [];\r\n\t\t\t\tif (player.getCards(\"h\", { color: \"red\" }).length) list.push(\"red\");\r\n\t\t\t\tif (player.getCards(\"h\", { color: \"black\" }).length) list.push(\"black\");\r\n\t\t\t\tlist.push(\"cancel2\");\r\n\t\t\t\tconst {control} = await player\r\n\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t.set(\"prompt\", `是否发动【濯锋】？`)\r\n\t\t\t\t\t.set(\"prompt2\", `你可以重铸手牌中一种颜色的所有牌，若你重铸了不少于2张牌，你摸一张牌，然后你视为本回合没有使用过【杀】。`)\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\tlet player = get.player(),\r\n\t\t\t\t\t\t\tlist = get.event().list;\r\n\t\t\t\t\t\tlet value = get.value(player.getCards(\"h\", { color: \"red\" })) - get.value(player.getCards(\"h\", { color: \"black\" }));\r\n\t\t\t\t\t\tif (list.length > 2) {\r\n\t\t\t\t\t\t\tif (value > 0) return \"red\";\r\n\t\t\t\t\t\t\treturn \"black\";\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (get.value(player.getCards(\"h\")) < 20) return list[0];\r\n\t\t\t\t\t\t\treturn \"cancel2\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"list\", list)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (control === \"cancel2\") {\r\n\t\t\t\t\tdelete player.getStat(\"skill\")[\"zhuofengmrfz\"];\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet cards = player.getCards(\"h\").filter(i => get.color(i) == control && player.canRecast(i));\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\tplayer.recast(cards);\r\n\t\t\t\tif (cards.length >= 2) player.draw();\r\n\t\t\t\tif (player.getStat(\"card\")[\"sha\"]) {\r\n\t\t\t\t\tdelete player.getStat(\"card\")[\"sha\"];\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 3,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tqianggongmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\ttargetInRange(card, player, target, now) {\r\n\t\t\t\t\tlet mark = player.getStat(\"card\")[\"sha\"];\r\n\t\t\t\t\tif (card.name == \"sha\" && (!mark || mark == 0)) return true;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCard\",\r\n\t\t\t\tsource: \"damageEnd\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tlet mark = player.getStat(\"card\")[\"sha\"],\r\n\t\t\t\t\tstorage = player.storage.qianggongmrfz;\r\n\t\t\t\tif (event.parent.name == \"_lianhuan\" || event.parent.name == \"_lianhuan2\") return false;\r\n\t\t\t\tif (mark && mark > 1) return false;\r\n\t\t\t\treturn event.card && event.card.name == \"sha\" && (!storage || event.card == storage);\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (!player.storage.qianggongmrfz) {\r\n\t\t\t\t\tplayer.storage.qianggongmrfz = trigger.card;\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.when({\r\n\t\t\t\t\t\t\tglobal: \"phaseBegin\",\r\n\t\t\t\t\t\t\tplayer: \"useCardAfter\",\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.filter((event, player) => {\r\n\t\t\t\t\t\t\tlet storage = player.storage.qianggongmrfz;\r\n\t\t\t\t\t\t\tif (event.name == \"phase\") return true;\r\n\t\t\t\t\t\t\treturn event.card && storage && event.card == storage;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\tdelete player.storage.qianggongmrfz;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (trigger.name == \"useCard\") {\r\n\t\t\t\t\tif (typeof trigger.baseDamage != \"number\") trigger.baseDamage = 1;\r\n\t\t\t\t\ttrigger.baseDamage++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdelete player.storage.qianggongmrfz;\r\n\t\t\t\t\tlet skills = player.getStockSkills(true, true);\r\n\t\t\t\t\tconst {control} = await player\r\n\t\t\t\t\t\t.chooseControl(skills)\r\n\t\t\t\t\t\t.set(\"prompt\", \"【抢攻】:请选择你要重置的技能\")\r\n\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\tlet list = get.event().list,\r\n\t\t\t\t\t\t\t\tsuffixs = [\"used\", \"round\", \"block\", \"blocker\"],\r\n\t\t\t\t\t\t\t\tskills = [];\r\n\t\t\t\t\t\t\tif (list.includes(\"zhuofengmrfz\")) return \"zhuofengmrfz\";\r\n\t\t\t\t\t\t\tfor (let skill of list) {\r\n\t\t\t\t\t\t\t\tlet info = get.info(skill);\r\n\t\t\t\t\t\t\t\tfor (let key of suffixs) {\r\n\t\t\t\t\t\t\t\t\tif (info[key]) skills.push(skill);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (skills.length == 0) skills.push(list[0]);\r\n\t\t\t\t\t\t\treturn skills.randomGet();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"list\", skills)\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (!control) return;\r\n\t\t\t\t\tlet skillx = [control];\r\n\t\t\t\t\tgame.expandSkills(skillx);\r\n\t\t\t\t\tvar resetSkills = [];\r\n\t\t\t\t\tvar suffixs = [\"used\", \"round\", \"block\", \"blocker\"];\r\n\t\t\t\t\tfor (var skill of skillx) {\r\n\t\t\t\t\t\tvar info = get.info(skill);\r\n\t\t\t\t\t\tif (typeof info.usable == \"number\") {\r\n\t\t\t\t\t\t\tif (player.hasSkill(\"counttrigger\") && player.storage.counttrigger[skill] && player.storage.counttrigger[skill] >= 1) {\r\n\t\t\t\t\t\t\t\tdelete player.storage.counttrigger[skill];\r\n\t\t\t\t\t\t\t\tresetSkills.add(skill);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (typeof get.skillCount(skill) == \"number\" && get.skillCount(skill) >= 1) {\r\n\t\t\t\t\t\t\t\tdelete player.getStat(\"skill\")[skill];\r\n\t\t\t\t\t\t\t\tresetSkills.add(skill);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (info.round && player.storage[skill + \"_roundcount\"]) {\r\n\t\t\t\t\t\t\tdelete player.storage[skill + \"_roundcount\"];\r\n\t\t\t\t\t\t\tresetSkills.add(skill);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (player.storage[`temp_ban_${skill}`]) {\r\n\t\t\t\t\t\t\tdelete player.storage[`temp_ban_${skill}`];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (player.awakenedSkills.includes(skill)) {\r\n\t\t\t\t\t\t\tplayer.restoreSkill(skill);\r\n\t\t\t\t\t\t\tresetSkills.add(skill);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var suffix of suffixs) {\r\n\t\t\t\t\t\t\tif (player.hasSkill(skill + \"_\" + suffix)) {\r\n\t\t\t\t\t\t\t\tplayer.removeSkill(skill + \"_\" + suffix);\r\n\t\t\t\t\t\t\t\tresetSkills.add(skill);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (resetSkills.length) {\r\n\t\t\t\t\t\tvar str = \"\";\r\n\t\t\t\t\t\tfor (var i of resetSkills) {\r\n\t\t\t\t\t\t\tstr += \"【\" + get.translation(i) + \"】、\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgame.log(player, \"重置了技能\", \"#g\" + str.slice(0, -1));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 锡人\r\n\t\tsuximrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tlet cards = event.card.cards.filter(i => player.hasUseTarget(i, false, false) && get.position(i) == \"d\");\r\n\t\t\t\treturn !event.card.isCard && event.card.cards.length > 0 && cards.length > 0;\r\n\t\t\t},\r\n\t\t\tfrequent: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet cards = trigger.card.cards.filter(i => player.hasUseTarget(i, false, false) && get.position(i) == \"d\");\r\n\t\t\t\twhile (cards.length > 0) {\r\n\t\t\t\t\tconst {links} =\r\n\t\t\t\t\t\tcards.length == 1\r\n\t\t\t\t\t\t\t? {links:cards}\r\n\t\t\t\t\t\t\t: await player\r\n\t\t\t\t\t\t\t\t\t.chooseCardButton(\"【宿锡】:请选择你要使用的牌\", cards)\r\n\t\t\t\t\t\t\t\t\t.set(\"ai\", button => get.player().getUseValue(button, null, true))\r\n\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (!links) return;\r\n\t\t\t\t\tawait player.chooseUseTarget(links[0]).set(\"nodistance\", true).set(\"addCount\", false);\r\n\t\t\t\t\tcards.remove(links[0]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tsanzhongmrfz: {\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = {\r\n\t\t\t\t\tbasic: false,\r\n\t\t\t\t\ttrick: false,\r\n\t\t\t\t\tequip: false,\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tmaps: {\r\n\t\t\t\tbasic: \"tao\",\r\n\t\t\t\ttrick: \"shunshou\",\r\n\t\t\t\tequip: \"wuzhong\",\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"chooseToUse\",\r\n\t\t\thiddenCard: function (player, name) {\r\n\t\t\t\tconst maps = lib.skill.sanzhongmrfz.maps;\r\n\t\t\t\tif (!Object.values(maps).includes(name)) return false;\r\n\t\t\t\tfor (let key in maps) {\r\n\t\t\t\t\tif (name == maps[key] && player.countCards(\"hes\", { type: key }) > 0) return true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tconst types = Object.entries(player.storage.sanzhongmrfz)\r\n\t\t\t\t\t.filter(([key, value]) => value === false)\r\n\t\t\t\t\t.map(([key, value]) => key);\r\n\t\t\t\tconst maps = lib.skill.sanzhongmrfz.maps;\r\n\t\t\t\tif (types.length < 1) return false;\r\n\t\t\t\tfor (let type of types) {\r\n\t\t\t\t\tif (player.countCards(\"hes\", { type: type }) < 1 || !event.filterCard(get.autoViewAs({ name: maps[type] }, \"unsure\"), player, event)) continue;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tchooseButton: {\r\n\t\t\t\tdialog: function (event, player) {\r\n\t\t\t\t\tconst maps = lib.skill.sanzhongmrfz.maps;\r\n\t\t\t\t\tconst swapped = {};\r\n\t\t\t\t\tObject.keys(maps).forEach(key => {\r\n\t\t\t\t\t\tswapped[maps[key]] = key;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlet list = [];\r\n\t\t\t\t\tfor (let name of Object.values(maps)) {\r\n\t\t\t\t\t\tif (event.filterCard && event.filterCard({ name: name }, player, event)) {\r\n\t\t\t\t\t\t\tif (player.storage.sanzhongmrfz[swapped[name]] != false) continue;\r\n\t\t\t\t\t\t\tif (player.countCards(\"hes\", { type: swapped[name] }) < 1) continue;\r\n\t\t\t\t\t\t\tif (get.type2(name) == \"trick\") {\r\n\t\t\t\t\t\t\t\tlist.push([\"锦囊\", \"\", name]);\r\n\t\t\t\t\t\t\t} else if (get.type(name) == \"basic\") {\r\n\t\t\t\t\t\t\t\tlist.push([\"基本\", \"\", name]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} //QQQ\r\n\t\t\t\t\treturn ui.create.dialog(\"三众\", [list, \"vcard\"]);\r\n\t\t\t\t},\r\n\t\t\t\tcheck: function (button) {\r\n\t\t\t\t\tif (_status.event.getParent().type != \"phase\") return 1;\r\n\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\treturn player.getUseValue({\r\n\t\t\t\t\t\tname: button.link[2],\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tfilterCard(card) {\r\n\t\t\t\t\t\t\tconst player = get.player();\r\n\t\t\t\t\t\t\tconst maps = lib.skill.sanzhongmrfz.maps;\r\n\t\t\t\t\t\t\tconst swapped = {};\r\n\t\t\t\t\t\t\tObject.keys(maps).forEach(key => {\r\n\t\t\t\t\t\t\t\tswapped[maps[key]] = key;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tconst name = lib.skill.sanzhongmrfz_backup.card;\r\n\t\t\t\t\t\t\treturn get.type2(card) == swapped[name];\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\taudio: \"sanzhongmrfz\",\r\n\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t\tcheck: function (card) {\r\n\t\t\t\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tposition: \"hse\",\r\n\t\t\t\t\t\tviewAs: { name: links[0][2] },\r\n\t\t\t\t\t\tcard: links[0][2],\r\n\t\t\t\t\t\tprecontent: function () {\r\n\t\t\t\t\t\t\tconst maps = lib.skill.sanzhongmrfz.maps;\r\n\t\t\t\t\t\t\tconst swapped = {};\r\n\t\t\t\t\t\t\tObject.keys(maps).forEach(key => {\r\n\t\t\t\t\t\t\t\tswapped[maps[key]] = key;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tconst name = lib.skill.sanzhongmrfz_backup.card;\r\n\r\n\t\t\t\t\t\t\tlet type = swapped[name];\r\n\t\t\t\t\t\t\tplayer.storage.sanzhongmrfz[type] = true;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tprompt: function (links, player) {\r\n\t\t\t\t\tconst swapped = {};\r\n\t\t\t\t\tconst maps = lib.skill.sanzhongmrfz.maps;\r\n\t\t\t\t\tconst name = links[0][2];\r\n\t\t\t\t\tObject.keys(maps).forEach(key => {\r\n\t\t\t\t\t\tswapped[maps[key]] = key;\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn `将一张${get.translation(swapped[name])}牌当做${get.translation(name)}使用`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: \"sanzhongmrfz_clear\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseBegin\" },\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\tlib.skill.sanzhongmrfz.init(player, \"sanzhongmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: function (player) {\r\n\t\t\t\t\t\tif (_status.event.dying) return get.attitude(player, _status.event.dying);\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 莎草\r\n\t\tlanjuanmrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\tlet storage = player.storage.lanjuanmrfz;\r\n\r\n\t\t\t\t\tlet nameList = storage[\"name\"].length > 0 ? storage[\"name\"] : \"无\";\r\n\t\t\t\t\tlet numberList = storage[\"number\"].length > 0 ? storage[\"number\"] : \"无\";\r\n\t\t\t\t\tlet suitTranslation = storage[\"suit\"].length > 0 ? get.translation(storage[\"suit\"]) : \"无\";\r\n\r\n\t\t\t\t\tif (Array.isArray(nameList)) {\r\n\t\t\t\t\t\tnameList.sort((a, b) => a.length - b.length);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (Array.isArray(numberList)) {\r\n\t\t\t\t\t\tnumberList.sort((a, b) => a - b);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn `\r\n    \t\t\t\t\t    ·牌名: ${get.translation(nameList)}<br>\r\n    \t\t\t\t\t    ·点数: ${get.translation(numberList)}<br>\r\n    \t\t\t\t\t    ·花色: ${suitTranslation}\r\n    \t\t\t\t\t`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = {\r\n\t\t\t\t\tname: [],\r\n\t\t\t\t\tsuit: [],\r\n\t\t\t\t\tnumber: [],\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"useCardAfter\", \"respondAfter\", \"phaseDrawBegin2\"],\r\n\t\t\t},\r\n\t\t\tfilterType(card, player, modify) {\r\n\t\t\t\tlet storage = player.storage.lanjuanmrfz;\r\n\t\t\t\tlet result = {\r\n\t\t\t\t\tname: [],\r\n\t\t\t\t\tsuit: [],\r\n\t\t\t\t\tnumber: [],\r\n\t\t\t\t};\r\n\r\n\t\t\t\tconst maps = {\r\n\t\t\t\t\tname: lib.inpile,\r\n\t\t\t\t\tsuit: lib.suit,\r\n\t\t\t\t\tnumber: Array.from({ length: 13 }, (v, i) => i + 1),\r\n\t\t\t\t};\r\n\r\n\t\t\t\tfunction checkAndAdd(type) {\r\n\t\t\t\t\tconst value = get[type](card);\r\n\t\t\t\t\tif (!storage[type].includes(value)) {\r\n\t\t\t\t\t\tresult[type].push(value);\r\n\t\t\t\t\t\tresult[type] = result[type].filter(item => new Set(maps[type]).has(item));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcheckAndAdd(\"name\");\r\n\t\t\t\tcheckAndAdd(\"suit\");\r\n\t\t\t\tcheckAndAdd(\"number\");\r\n\r\n\t\t\t\tif (modify) {\r\n\t\t\t\t\tplayer.storage.lanjuanmrfz = {\r\n\t\t\t\t\t\tname: [...result.name, ...storage.name],\r\n\t\t\t\t\t\tsuit: [...result.suit, ...storage.suit],\r\n\t\t\t\t\t\tnumber: [...result.number, ...storage.number],\r\n\t\t\t\t\t};\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst intersection = (arr1, arr2) => arr1.filter(item => new Set(arr2).has(item));\r\n\r\n\t\t\t\treturn result.name.length > 0 || result.suit.length > 0 || result.number.length > 0;\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (event.name == \"phaseDraw\") {\r\n\t\t\t\t\tlet count = Object.values(player.storage.lanjuanmrfz).reduce((sum, arr) => sum + arr.length, 0);\r\n\t\t\t\t\treturn !event.numFixed && Math.pow(count, 1 / 3) >= 1;\r\n\t\t\t\t} else return event.card && lib.skill.lanjuanmrfz.filterType(event.card, player, false);\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t// 毒哑莎草的嗓子(\r\n\t\t\t\tif (_status.poison_suocaoSJZX != true) {\r\n\t\t\t\t\tplayer.logSkill(\"lanjuanmrfz\");\r\n\t\t\t\t\t_status.poison_suocaoSJZX = true;\r\n\t\t\t\t\tsetTimeout(() => delete _status.poison_suocaoSJZX, 3000);\r\n\t\t\t\t}\r\n\t\t\t\tif (trigger.name == \"phaseDraw\") {\r\n\t\t\t\t\tlet count = Object.values(player.storage.lanjuanmrfz).reduce((sum, arr) => sum + arr.length, 0);\r\n\t\t\t\t\ttrigger.num += Math.floor(Math.pow(count, 1 / 3));\r\n\t\t\t\t} else lib.skill.lanjuanmrfz.filterType(trigger.card, player, true);\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\tlet count = Object.values(player.storage.lanjuanmrfz).reduce((sum, arr) => sum + arr.length, 0);\r\n\t\t\t\t\treturn num + Math.floor(Math.pow(count, 1 / 3));\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txinglumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfindCards(info) {\r\n\t\t\t\tconst { name, suit, number } = info;\r\n\t\t\t\tconst filter = function (card) {\r\n\t\t\t\t\treturn get.number(card) == number && get.suit(card) == suit && get.name(card) == name;\r\n\t\t\t\t};\r\n\t\t\t\tlet list = [];\r\n\t\t\t\tfor (let i = 0; i < ui.cardPile.childNodes.length; i++) {\r\n\t\t\t\t\tvar j = i;\r\n\t\t\t\t\tif (j >= ui.cardPile.childNodes.length) j -= ui.cardPile.childNodes.length;\r\n\t\t\t\t\tif (filter(ui.cardPile.childNodes[j])) {\r\n\t\t\t\t\t\tlist.push(ui.cardPile.childNodes[j]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn list;\r\n\t\t\t},\r\n\t\t\tgetResult(info) {\r\n\t\t\t\tconst { name, suit, number } = info;\r\n\t\t\t\tlet cardsList = [];\r\n\t\t\t\tfor (let keyName of name) {\r\n\t\t\t\t\tfor (let keySuit of suit) {\r\n\t\t\t\t\t\tfor (let keyNum of number) {\r\n\t\t\t\t\t\t\tlet find = lib.skill.xinglumrfz.findCards({ name: keyName, suit: keySuit, number: keyNum });\r\n\t\t\t\t\t\t\tif (find.length > 0) cardsList.push(find);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn cardsList;\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tlet storage = player.storage.lanjuanmrfz;\r\n\t\t\t\treturn storage[\"name\"].length > 0 && storage[\"suit\"].length > 0 && storage[\"number\"].length > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst storage = player.storage.lanjuanmrfz;\r\n\r\n\t\t\t\tconst {control} = await player\r\n\t\t\t\t\t.chooseControl(\"自动选择\", \"手动选择\")\r\n\t\t\t\t\t.set(\"prompt\", \"【行路】:是否让系统自动为你提供方案？\")\r\n\t\t\t\t\t.set(\"ai\", () => \"自动选择\")\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (control === \"自动选择\") {\r\n\t\t\t\t\tlet cards = lib.skill.xinglumrfz.getResult(storage);\r\n\t\t\t\t\tconst maxIndex = cards.map(i => player.getUseValue(i)).indexOf(Math.max(...cards.map(i => player.getUseValue(i))));\r\n\t\t\t\t\tif (cards.length < 1) {\r\n\t\t\t\t\t\tplayer.popup(\"没有符合条件的组合\");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet control = [];\r\n\t\t\t\t\tfor (let i = 0; i < cards.length; i++) {\r\n\t\t\t\t\t\tcontrol.push([i, `第${get.cnNumber(i + 1, true)}组`]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet dialogAuto = [`【行路】:请选择一个组合<br>推荐选择第${get.cnNumber(maxIndex + 1, true)}组(${get.translation(cards[maxIndex])})`, [control, \"tdnodes\"]];\r\n\r\n\t\t\t\t\tfor (let i = 0; i < cards.length; i++) {\r\n\t\t\t\t\t\tdialogAuto.addArray([`第${get.cnNumber(i + 1, true)}组`, cards[i]]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst result = !event.isMine() ? { links: [maxIndex] } : await player.chooseButton().set(\"createDialog\", dialogAuto).set(\"cards\", cards).forResult();\r\n\t\t\t\t\tif (!result) return;\r\n\t\t\t\t\tplayer.gain(cards[result.links[0]], \"gain2\", \"log\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet dialog = [\"【行路】:请选择牌名、花色和数字各一个\"];\r\n\t\t\t\tdialog.addArray([\"待选择的牌名\", [storage.name.slice().map(i => [get.type2(i), \"\", i]), \"vcard\"]]);\r\n\t\t\t\tdialog.addArray([\"待选择的花色\", [storage.suit.slice().map(i => [i, get.translation(i)]), \"tdnodes\"]]);\r\n\t\t\t\tdialog.addArray([\r\n\t\t\t\t\t\"待选择的数字\",\r\n\t\t\t\t\t[\r\n\t\t\t\t\t\tstorage.number\r\n\t\t\t\t\t\t\t.slice()\r\n\t\t\t\t\t\t\t.sort((a, b) => a - b)\r\n\t\t\t\t\t\t\t.map(i => [i, i]),\r\n\t\t\t\t\t\t\"tdnodes\",\r\n\t\t\t\t\t],\r\n\t\t\t\t]);\r\n\r\n\t\t\t\tconst {links} = await player\r\n\t\t\t\t\t.chooseButton()\r\n\t\t\t\t\t.set(\"createDialog\", dialog)\r\n\t\t\t\t\t.set(\"filterButton\", button => {\r\n\t\t\t\t\t\tlet list = ui.selected.buttons;\r\n\t\t\t\t\t\tif (Array.isArray(button.link) && list.some(item => Array.isArray(item.link))) return false;\r\n\t\t\t\t\t\telse if (typeof button.link === \"number\" && list.some(item => typeof item.link === \"number\")) return false;\r\n\t\t\t\t\t\telse if (typeof button.link === \"string\" && list.some(item => typeof item.link === \"string\")) return false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"selectButton\", 3)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!links) return;\r\n\t\t\t\tconst info = {\r\n\t\t\t\t\tname: links.filter(i => Array.isArray(i)).map(i => i[2]),\r\n\t\t\t\t\tsuit: links.filter(i => typeof i === \"string\"),\r\n\t\t\t\t\tnumber: links.filter(i => typeof i === \"number\"),\r\n\t\t\t\t};\r\n\t\t\t\tlet cards = lib.skill.xinglumrfz.findCards(info);\r\n\t\t\t\tif (cards.length > 0) player.gain(cards, \"gain2\", \"log\");\r\n\t\t\t\telse {\r\n\t\t\t\t\tplayer.popup(\"没有符合条件的组合\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 莱欧斯\r\n\t\tshijianmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tderivation: [\"jianzhumrfz\"],\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0 && !player.isDisabled(1) && !player.hasCard(card => card.name == \"jianzhumrfz\", \"e\");\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tevent.result = await player\r\n\t\t\t\t\t.chooseToDiscard(`【拾剑】:你可以弃置一张牌，将【剑助】置入你的武器栏`, \"he\")\r\n\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst card = game.createCard(\"jianzhumrfz\", \"spade\", 12);\r\n\t\t\t\tplayer.$gain2(card);\r\n\t\t\t\tplayer.equip(card);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 0.8,\r\n\t\t\t},\r\n\t\t},\r\n\t\tshimomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = {};\r\n\t\t\t\tconst translates = {\r\n\t\t\t\t\t2: '富甲<font color=\"red\">目标+</font>',\r\n\t\t\t\t\t3: '空巢<font color=\"red\">摸牌</font>',\r\n\t\t\t\t\t4: '残躯<font color=\"red\">伤害+</font>',\r\n\t\t\t\t};\r\n\t\t\t\tfor (let i = 2; i <= 4; i++) {\r\n\t\t\t\t\tlib.translate[skill + \"_\" + i] = translates[i];\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tmark: true,\r\n\t\t\tproficiency: new Proxy(\r\n\t\t\t\t{\r\n\t\t\t\t\tbaka: '<font color = \"#FFFFFF\">一无所知</font>',\r\n\t\t\t\t\tmaster: '<font color = \"#FF0000\">融会贯通</font>',\r\n\t\t\t\t\t1: '<font color=\"#FFCCCC\">已有耳闻</font>',\r\n\t\t\t\t\t2: '<font color=\"#FF9999\">略知一二</font>',\r\n\t\t\t\t\t3: '<font color=\"#FF6666\">初步掌握</font>',\r\n\t\t\t\t\t4: '<font color=\"#FF3333\">烂熟于心</font>',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tget(target, prop) {\r\n\t\t\t\t\t\tif (typeof prop !== \"symbol\") {\r\n\t\t\t\t\t\t\tconst value = Number(prop);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn target[\"baka\"];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!isNaN(value)) {\r\n\t\t\t\t\t\t\tif (value < 1) return target[\"baka\"];\r\n\t\t\t\t\t\t\tif (value > 4) return target[\"master\"];\r\n\t\t\t\t\t\t\treturn target[value];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn target[\"baka\"];\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t),\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"莱欧斯的魔物宝典\",\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tconst storage = player.storage.shimomrfz;\r\n\t\t\t\t\tlet intro = [];\r\n\t\t\t\t\tif (storage === undefined) return \"没有记录的魔物\";\r\n\t\t\t\t\tconst sorted = Object.entries(storage)\r\n\t\t\t\t\t\t.sort((a, b) => b[1] - a[1])\r\n\t\t\t\t\t\t.map(([key, value]) => ({ key, value }));\r\n\t\t\t\t\tfor (let obj of sorted) {\r\n\t\t\t\t\t\tintro.push(`【${get.translation(obj[\"key\"])}】是${lib.skill.shimomrfz.proficiency[obj[\"value\"]]}（${obj[\"value\"]}）`);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn `莱欧斯对‘魔物’:<br>` + intro.join(\"<br>\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttrigger: { player: \"gainAfter\" },\r\n\t\t\tdirect: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t// 毒哑莱欧斯的嗓子\r\n\t\t\t\tif (_status.poison_laiousiSJZX != true) {\r\n\t\t\t\t\tplayer.logSkill(\"shimomrfz\");\r\n\t\t\t\t\t_status.poison_laiousiSJZX = true;\r\n\t\t\t\t\tsetTimeout(() => delete _status.poison_laiousiSJZX, 3000);\r\n\t\t\t\t}\r\n\t\t\t\tconst cards = trigger.cards,\r\n\t\t\t\t\tstorage = player.storage.shimomrfz;\r\n\t\t\t\tfor (let card of cards) {\r\n\t\t\t\t\tlet name = get.name(card);\r\n\t\t\t\t\tstorage.hasOwnProperty(name) ? player.storage.shimomrfz[name]++ : (player.storage.shimomrfz[name] = 1);\r\n\t\t\t\t\tif (storage.hasOwnProperty(name)) {\r\n\t\t\t\t\t\tlet num = storage[name];\r\n\t\t\t\t\t\tif (num < 2) continue;\r\n\t\t\t\t\t\tif (num > 4) num = 4;\r\n\t\t\t\t\t\tfor (let i = 2; i <= num; i++) player.addGaintag(card, `shimomrfz_${i}`);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"shimomrfz_yingbian\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tyingbian: {\r\n\t\t\t\t\taudio: \"shimomrfz\",\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"yingbian\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.card.isCard &&\r\n\t\t\t\t\t\t\tplayer.hasHistory(\"lose\", evt => {\r\n\t\t\t\t\t\t\t\treturn evt.getParent() == event && Object.values(evt.gaintag_map).some(value => value.join(\" \").includes(\"shimomrfz_\"));\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet tags;\r\n\t\t\t\t\t\tplayer.getHistory(\"lose\", evt => {\r\n\t\t\t\t\t\t\tif (evt.getParent() != trigger) return;\r\n\t\t\t\t\t\t\tconst maps = evt.gaintag_map;\r\n\t\t\t\t\t\t\tfor (let key in maps) {\r\n\t\t\t\t\t\t\t\tif (maps[key].join(\" \").includes(\"shimomrfz_\")) tags = maps[key];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tconst index = Math.max(...tags.filter(i => /^shimomrfz_\\d+$/.test(i)).map(i => Number(i.replace(/\\D+/g, \"\"))));\r\n\t\t\t\t\t\tif (!Array.isArray(trigger.temporaryYingbian)) trigger.temporaryYingbian = [];\r\n\t\t\t\t\t\ttrigger.temporaryYingbian.add(\"force\");\r\n\t\t\t\t\t\tif (index >= 2 && player.satisfyYingbian(\"fujia\", trigger)) {\r\n\t\t\t\t\t\t\ttrigger.temporaryYingbian.add(\"add\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (index >= 3 && player.satisfyYingbian(\"kongchao\", trigger)) {\r\n\t\t\t\t\t\t\ttrigger.temporaryYingbian.add(\"draw\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (index >= 4 && player.satisfyYingbian(\"canqu\", trigger)) {\r\n\t\t\t\t\t\t\ttrigger.temporaryYingbian.add(\"damage\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 森西\r\n\t\tmicaimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: [\"loseAfter\", \"loseAsyncAfter\"],\r\n\t\t\t},\r\n\t\t\tusable: 1,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (event.type != \"discard\" || event.position != ui.discardPile || event.player == player) return false;\r\n\t\t\t\tlet cards = event.getd();\r\n\t\t\t\tif (!cards.filter(card => get.position(card, true) == \"d\").length) return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tlet cards = trigger.getd().filter(i => get.position(i, true) == \"d\");\r\n\t\t\t\tevent.result = await player\r\n\t\t\t\t\t.chooseCardButton(\"【觅材】:你可以获得一张牌\", cards)\r\n\t\t\t\t\t.set(\"ai\", button => get.value(button))\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tevent.result.cost_data = event.result;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.gain(event.cost_data.links, \"gain2\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tbeicaimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = {};\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"h\", card => get.cardNameLength(card) > 1) > 0;\r\n\t\t\t},\r\n\t\t\tlessNameLength(card) {\r\n\t\t\t\tconst list = [];\r\n\t\t\t\tconst original = get.cardNameLength(card);\r\n\t\t\t\tfor (let name of lib.inpile) {\r\n\t\t\t\t\tif (get.cardNameLength(name) >= original) continue;\r\n\t\t\t\t\tlist.push([get.translation(get.type(name)), \"\", name]);\r\n\t\t\t\t\tif (name == \"sha\") {\r\n\t\t\t\t\t\tfor (var j of lib.inpile_nature) list.push([\"基本\", \"\", \"sha\", j]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn list;\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tevent.result = await player\r\n\t\t\t\t\t.chooseCard(\"h\")\r\n\t\t\t\t\t.set(\"prompt2\", \"你可以将一张手牌视为任意小于此牌字数的一张牌。\")\r\n\t\t\t\t\t.set(\"prompt\", \"是否发动【备材】？\")\r\n\t\t\t\t\t.set(\"filterCard\", card => get.cardNameLength(card) > 1)\r\n\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\tconst player = get.player();\r\n\t\t\t\t\t\tif (get.cardNameLength(card) < 2) return -1;\r\n\t\t\t\t\t\tconst less = lib.skill.beicaimrfz.lessNameLength(card).map(i => i[2]);\r\n\t\t\t\t\t\tif (!Array.isArray(less.filter(i => player.getUseValue(i) > player.getUseValue(card)))) return -1;\r\n\t\t\t\t\t\tlet OptimalSolution = less.filter(i => player.getUseValue(i) > player.getUseValue(card)) || null;\r\n\t\t\t\t\t\tif (OptimalSolution === null || OptimalSolution.length < 1) return -1;\r\n\t\t\t\t\t\tOptimalSolution = OptimalSolution.reduce((a, b) => (player.getUseValue(a) >= player.getUseValue(b) ? a : b)) || null;\r\n\t\t\t\t\t\treturn OptimalSolution ? player.getUseValue(OptimalSolution) - player.getUseValue(card) : -1;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst list = lib.skill.beicaimrfz.lessNameLength(event.cards[0]);\r\n\t\t\t\tconst {links} = await player\r\n\t\t\t\t\t.chooseButton([`备材<br>把${get.translation(event.cards)}视为：`, [list, \"vcard\"]], true)\r\n\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\tconst player = get.player(),\r\n\t\t\t\t\t\t\tcard = {\r\n\t\t\t\t\t\t\t\tname: button.link[2],\r\n\t\t\t\t\t\t\t\tnature: button.link[3],\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\treturn player.getUseValue(card, null, true);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!links) return;\r\n\t\t\t\tplayer.addGaintag(event.cards, \"beicaimrfzx\");\r\n\t\t\t\tif (!player.storage.beicaimrfz) player.storage.beicaimrfz = {};\r\n\t\t\t\tplayer.storage.beicaimrfz[event.cards[0].cardid] = { name: links[0][2], nature: links[0][3] };\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tcardname(card, player, name) {\r\n\t\t\t\t\tconst storage = player.storage.beicaimrfz;\r\n\t\t\t\t\tif (card.hasGaintag(\"beicaimrfzx\") && Object.keys(storage).includes(card.cardid) && storage[card.cardid][\"name\"]) return storage[card.cardid][\"name\"];\r\n\t\t\t\t},\r\n\t\t\t\tcardnature(card, player) {\r\n\t\t\t\t\tconst storage = player.storage.beicaimrfz;\r\n\t\t\t\t\tif (card.hasGaintag(\"beicaimrfzx\") && Object.keys(storage).includes(card.cardid) && storage[card.cardid][\"nature\"]) return storage[card.cardid][\"nature\"];\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: \"beicaimrfz_clear\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"loseAfter\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn Object.keys(player.storage.beicaimrfz).length > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst hs = player.getCards(\"he\").map(card => card.cardid);\r\n\t\t\t\t\t\tfor (let id in player.storage.beicaimrfz) {\r\n\t\t\t\t\t\t\tif (!hs.includes(id)) delete player.storage.beicaimrfz[id];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tpengcaimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilterCard(card) {\r\n\t\t\t\tconst player = get.player();\r\n\t\t\t\treturn !ui.selected.cards.some(cardx => get.type2(cardx, player) == get.type2(card, player));\r\n\t\t\t},\r\n\t\t\tselectCard: 2,\r\n\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\treturn player.canUse(\"wugu\", target);\r\n\t\t\t},\r\n\t\t\tselectTarget: [1, 4],\r\n\t\t\tcheck(card) {\r\n\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t},\r\n\t\t\tcomplexCard: true,\r\n\t\t\tdiscard: false,\r\n\t\t\tlose: false,\r\n\t\t\tmultitarget: true,\r\n\t\t\tmultiline: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.storage.pengcaimrfz = event.targets.slice();\r\n\t\t\t\tawait player.useCard({ name: \"wugu\", pengcaimrfz: true }, event.targets, event.cards, false, \"pengcaimrfz\");\r\n\t\t\t\tconst store = player.storage.pengcaimrfz;\r\n\t\t\t\tif (!Array.isArray(store)) return;\r\n\t\t\t\tlet type = [];\r\n\t\t\t\tfor (let i = 0; i < store.length; i++) {\r\n\t\t\t\t\tlet target = store[i][0],\r\n\t\t\t\t\t\tcards = store[i][1];\r\n\t\t\t\t\tif (!event.targets.includes(target) || !cards) continue;\r\n\t\t\t\t\ttype.push(...cards.map(i => get.type2(i)));\r\n\t\t\t\t}\r\n\t\t\t\tlet SetType = new Set(type.slice());\r\n\t\t\t\tif (SetType.size !== type.length) return;\r\n\t\t\t\tawait player.useCard({ name: \"wugu\", pengcaimrfz: true }, event.targets, event.cards, false, \"pengcaimrfz\");\r\n\t\t\t\tdelete player.storage.pengcaimrfz;\r\n\t\t\t},\r\n\t\t\tgroup: [\"pengcaimrfz_wugu\"],\r\n\t\t\tglobal: \"pengcaimrfz_eff\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"yingbian\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn event.card.isCard && event.player.hasHistory(\"lose\", evt => evt.getParent() == event && Object.values(evt.gaintag_map).some(value => value.includes(\"pengcaimrfzx\")));\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: () => {\r\n\t\t\t\t\t\tif (!Array.isArray(trigger.temporaryYingbian)) trigger.temporaryYingbian = [];\r\n\t\t\t\t\t\ttrigger.temporaryYingbian.add(\"force\");\r\n\t\t\t\t\t\ttrigger.temporaryYingbian.addArray(get.yingbianEffects());\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\twugu: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\ttrigger: { global: \"gainAfter\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tconst evt = event.getParent();\r\n\t\t\t\t\t\treturn evt && evt.card && evt.card.pengcaimrfz && player.storage.pengcaimrfz && player.storage.pengcaimrfz.some(i => (Array.isArray(i) ? i[0] == event.player : i == event.player));\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst cards = trigger.cards.filter(i => get.itemtype(i) == \"card\");\r\n\t\t\t\t\t\tplayer.storage.pengcaimrfz[player.storage.pengcaimrfz.indexOf(trigger.player)] = [trigger.player, cards];\r\n\t\t\t\t\t\ttrigger.player.addGaintag(cards, \"pengcaimrfzx\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\tthreaten: 1.8,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: 1,\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 奇尔查克\r\n\t\ttangongmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: [\"drawBegin\", \"damageBegin3\"] },\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.num > 0 && !player.storage.tangongmrfz.includes(event.name);\r\n\t\t\t},\r\n\t\t\tcreateDialog(id, showCards) {\r\n\t\t\t\tvar dialog = ui.create.dialog(\"hidden\");\r\n\t\t\t\t(dialog.textPrompt = dialog.add(\"探宫\")).style.textAlign = \"center\";\r\n\t\t\t\tdialog.cards = [];\r\n\t\t\t\tdialog.rawButtons = [];\r\n\t\t\t\tdialog.videoId = id;\r\n\t\t\t\tvar cards = [];\r\n\t\t\t\tfor (var y = 0; y < 3; y++) {\r\n\t\t\t\t\tfor (var x = 0; x < 3; x++) {\r\n\t\t\t\t\t\tvar card = ui.create.card(null, null, true);\r\n\t\t\t\t\t\tcard.pos = y * 3 + x;\r\n\t\t\t\t\t\tcard.pos_x = x;\r\n\t\t\t\t\t\tcard.pos_y = y;\r\n\t\t\t\t\t\tcards.push(card);\r\n\t\t\t\t\t\tdialog.rawButtons.push(card);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdialog.add(cards);\r\n\t\t\t\t\tcards = [];\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i of dialog.buttons) {\r\n\t\t\t\t\ti.pos_x = i.link.pos_x;\r\n\t\t\t\t\ti.pos_y = i.link.pos_y;\r\n\t\t\t\t\ti.link = i.link.pos;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 放弃选择\r\n\t\t\t\t// dialog.addAuto([['放弃选择'],\"tdnodes\"]);\r\n\r\n\t\t\t\t// 展示待选择的牌\r\n\t\t\t\tshowCards = showCards ? showCards : game.cardsGotoOrdering(get.cards(9)).cards;\r\n\r\n\t\t\t\tshowCards.map(i => (i.tangongmrfz = true));\r\n\r\n\t\t\t\tdialog.addAuto(\"待选择的牌\");\r\n\r\n\t\t\t\tdialog.showCards = showCards;\r\n\r\n\t\t\t\tdialog.add(showCards);\r\n\r\n\t\t\t\tdialog.open();\r\n\t\t\t},\r\n\t\t\taddCard(card, id, pos) {\r\n\t\t\t\tvar dialog = get.idDialog(id);\r\n\t\t\t\tif (!dialog) return;\r\n\t\t\t\tfor (var i = 0; i < dialog.buttons.length; i++) {\r\n\t\t\t\t\tvar button = dialog.buttons[i];\r\n\r\n\t\t\t\t\tif (button.link == pos) {\r\n\t\t\t\t\t\tvar card2 = ui.create.button(card, \"card\");\r\n\t\t\t\t\t\tcard2.pos = button.link;\r\n\t\t\t\t\t\tcard2.pos_x = button.pos_x;\r\n\t\t\t\t\t\tcard2.pos_y = button.pos_y;\r\n\t\t\t\t\t\tcard2.classList.add(\"noclick\");\r\n\t\t\t\t\t\tbutton.parentNode.insertBefore(card2, button);\r\n\t\t\t\t\t\tdialog.cards.push(card2);\r\n\t\t\t\t\t\tbutton.remove();\r\n\t\t\t\t\t\tdialog.buttons.splice(i, 1);\r\n\t\t\t\t\t} else if (get.itemtype(button.link) == \"card\") {\r\n\t\t\t\t\t\tif (button.link == card) {\r\n\t\t\t\t\t\t\tbutton.remove();\r\n\t\t\t\t\t\t\tdialog.showCards.remove(card);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tchangePrompt(str, id) {\r\n\t\t\t\tvar dialog = get.idDialog(id);\r\n\t\t\t\tif (!dialog) return;\r\n\t\t\t\tdialog.textPrompt.innerHTML = str;\r\n\t\t\t},\r\n\t\t\tgetValidMatrix(suits) {\r\n\t\t\t\tfunction isValid(matrix, row, col, value) {\r\n\t\t\t\t\tfor (let i = 0; i < col; i++) {\r\n\t\t\t\t\t\tif (matrix[row][i] === value) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (let i = 0; i < row; i++) {\r\n\t\t\t\t\t\tif (matrix[i][col] === value) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 回溯函数：尝试构建3x3矩阵\r\n\t\t\t\tfunction backtrack(matrix, suits, row, col) {\r\n\t\t\t\t\tif (row === 3) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet nextRow = col === 2 ? row + 1 : row;\r\n\t\t\t\t\tlet nextCol = (col + 1) % 3;\r\n\r\n\t\t\t\t\tfor (let i = 0; i < suits.length; i++) {\r\n\t\t\t\t\t\tlet suit = suits[i];\r\n\r\n\t\t\t\t\t\tif (isValid(matrix, row, col, suit)) {\r\n\t\t\t\t\t\t\tmatrix[row][col] = suit;\r\n\r\n\t\t\t\t\t\t\tlet remainingSuits = suits.slice(0, i).concat(suits.slice(i + 1));\r\n\r\n\t\t\t\t\t\t\tif (backtrack(matrix, remainingSuits, nextRow, nextCol)) {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// 如果无法填充成功，则回溯\r\n\t\t\t\t\t\t\tmatrix[row][col] = null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet matrix = Array.from({ length: 3 }, () => Array(3).fill(null));\r\n\r\n\t\t\t\t// 尝试构建3x3矩阵\r\n\t\t\t\tif (backtrack(matrix, suits, 0, 0)) {\r\n\t\t\t\t\treturn matrix;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t// 限制每回合发动次数\r\n\t\t\t\tif (!player.storage.tangongmrfz) player.storage.tangongmrfz = [];\r\n\t\t\t\tplayer.storage.tangongmrfz.add(trigger.name);\r\n\r\n\t\t\t\tlet autoMode = false;\r\n\t\t\t\tconst {bool} = await player\r\n\t\t\t\t\t.chooseBool(`是否让系统帮你组方阵？`)\r\n\t\t\t\t\t.set(\"ai\", () => true)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (bool) autoMode = true;\r\n\r\n\t\t\t\tlet next = game.createEvent(\"cardsGotoOrdering\");\r\n\t\t\t\tnext.cards = [];\r\n\t\t\t\tnext.setContent(\"cardsGotoOrdering\");\r\n\t\t\t\tevent.videoId = lib.status.videoId++;\r\n\t\t\t\tevent.forceDie = true;\r\n\t\t\t\tevent.cards = [];\r\n\t\t\t\tevent.positions = [0, 1, 2, 3, 4, 5, 6, 7, 8];\r\n\t\t\t\tlet showCards = game.cardsGotoOrdering(get.cards(12)).cards;\r\n\t\t\t\tgame.broadcastAll(\r\n\t\t\t\t\tfunction (id, showCards) {\r\n\t\t\t\t\t\tlib.skill.tangongmrfz.createDialog(id, showCards);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tevent.videoId,\r\n\t\t\t\t\tshowCards.slice()\r\n\t\t\t\t);\r\n\t\t\t\tlet autoSelected = lib.skill.tangongmrfz.getValidMatrix(showCards.slice().map(i => get.suit(i)));\r\n\t\t\t\tlet cards = [];\r\n\r\n\t\t\t\twhile (showCards.length > 0) {\r\n\t\t\t\t\tlet str = \"请将一张牌放置到方阵中\";\r\n\t\t\t\t\tif (player == game.me || player.isUnderControl()) {\r\n\t\t\t\t\t\tlib.skill.tangongmrfz.changePrompt(str, event.videoId);\r\n\t\t\t\t\t} else if (player.isOnline()) {\r\n\t\t\t\t\t\tplayer.send(\r\n\t\t\t\t\t\t\tfunction (str, id) {\r\n\t\t\t\t\t\t\t\tlib.skill.tangongmrfz.changePrompt(str, event.videoId);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tstr,\r\n\t\t\t\t\t\t\tid\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet links;\r\n\t\t\t\t\tif ((player.isUnderControl() || game.me == player) && !autoMode) {\r\n\t\t\t\t\t\t// if(false){\r\n\t\t\t\t\t\tconst result1 = await player\r\n\t\t\t\t\t\t\t.chooseButton()\r\n\t\t\t\t\t\t\t.set(\"filterOk\", button => {\r\n\t\t\t\t\t\t\t\tconst selected = ui.selected.buttons.slice().map(i => get.itemtype(i.link) || typeof i.link);\r\n\t\t\t\t\t\t\t\treturn selected.includes(\"card\") && selected.includes(\"number\");\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"dialog\", event.videoId)\r\n\t\t\t\t\t\t\t.set(\"filterButton\", function (button) {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"selectButton\", 2)\r\n\t\t\t\t\t\t\t.set(\"autoSelected\", autoSelected)\r\n\t\t\t\t\t\t\t.set(\"showCards\", showCards)\r\n\t\t\t\t\t\t\t.set(\"cards\", cards.slice())\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tlinks = result1.links;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (!autoSelected) {\r\n\t\t\t\t\t\t\tplayer.popup(\"探索失败\");\r\n\t\t\t\t\t\t\tgame.broadcastAll(\"closeDialog\", event.videoId);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet posx = cards.slice(0).map(i => i[1]);\r\n\t\t\t\t\t\tlinks = [];\r\n\t\t\t\t\t\tlet selectedList = [...autoSelected[0], ...autoSelected[1], ...autoSelected[2]];\r\n\t\t\t\t\t\tfor (let i = 0; i < 9; i++) {\r\n\t\t\t\t\t\t\tif (posx.includes(i)) continue;\r\n\t\t\t\t\t\t\tlet getValidSuit = showCards.filter(j => get.suit(j) == selectedList[i])[0];\r\n\t\t\t\t\t\t\tlinks.push(getValidSuit, i);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!links) {\r\n\t\t\t\t\t\tplayer.popup(\"探索失败\");\r\n\t\t\t\t\t\tgame.broadcastAll(\"closeDialog\", event.videoId);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet pos = links.filter(i => typeof i == \"number\")[0],\r\n\t\t\t\t\t\ttranCard = links.filter(i => get.itemtype(i) == \"card\")[0];\r\n\t\t\t\t\tgame.broadcastAll(\r\n\t\t\t\t\t\tfunction (card, id, pos, player) {\r\n\t\t\t\t\t\t\tlib.skill.tangongmrfz.addCard(card, id, pos);\r\n\t\t\t\t\t\t\tlib.skill.tangongmrfz.changePrompt(get.translation(player) + \"放置了\" + get.translation(card), id);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttranCard,\r\n\t\t\t\t\t\tevent.videoId,\r\n\t\t\t\t\t\tpos,\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t);\r\n\t\t\t\t\tlet { promise, resolve } = Promise.withResolvers();\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t\tawait promise;\r\n\t\t\t\t\tcards.push([tranCard, pos]);\r\n\t\t\t\t\tshowCards.remove(tranCard);\r\n\t\t\t\t\tif (cards.length > 8) {\r\n\t\t\t\t\t\tgame.broadcastAll(\"closeDialog\", event.videoId);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconst suits = cards.map(i => [get.suit(i[0]), i[1]]);\r\n\t\t\t\tconst matrix = Array.from({ length: 3 }, () => Array(3));\r\n\t\t\t\tsuits.forEach(([suit, index]) => (matrix[Math.floor(index / 3)][index % 3] = suit));\r\n\r\n\t\t\t\t// 检查是否有重复的花色\r\n\t\t\t\tconst hasDuplicates = matrix.some((row, i) => new Set(row).size < 3 || new Set(matrix.map(r => r[i])).size < 3);\r\n\r\n\t\t\t\tif (!hasDuplicates) {\r\n\t\t\t\t\tconst isDraw = trigger.name === \"draw\" ? true : false;\r\n\t\t\t\t\tconst {control} = await player\r\n\t\t\t\t\t\t.chooseControl(`减半`, `翻倍`)\r\n\t\t\t\t\t\t.set(\"prompt\", `令${trigger.name === \"draw\" ? \"摸牌数\" : \"伤害值\"}(${trigger.num})翻倍或减半`)\r\n\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\treturn get.event().isDraw ? \"翻倍\" : \"减半\";\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"isDraw\", isDraw)\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\ttrigger.num = control === `翻倍` ? trigger.num * 2 : Math.floor(trigger.num / 2);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"tangongmrfz_clear\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn player.storage.tangongmrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tplayer.storage.tangongmrfz = [];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.5,\r\n\t\t\t},\r\n\t\t},\r\n\t\truiganmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"useCard1\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn get.cardNameLength(event.card) == player.countCards(\"h\") && event.targets.includes(player) && event.player != player;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {},\r\n\t\t\tmod: {\r\n\t\t\t\ttargetEnabled(card, player, target) {\r\n\t\t\t\t\tif (get.cardNameLength(card) == target.countCards(\"h\") && player != target) return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 凯瑟琳\r\n\t\tksl_zhuzhimrfz: {\r\n\t\t\tonremove(player) {\r\n\t\t\t\tfor (let t of game.players) {\r\n\t\t\t\t\tt.removeSkill(\"duantiemrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tderivation: [\"ksl_lulitongxinmrfz\"],\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"linkAfter\" },\r\n\t\t\tsilent: true,\r\n\t\t\tforced: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.player != player;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet target = trigger.player;\r\n\t\t\t\tif (!target.isLinked() && target.hasSkill(\"duantiemrfz\")) target.removeSkill(\"duantiemrfz\");\r\n\t\t\t\telse if (target.isLinked() && !target.hasSkill(\"duantiemrfz\")) target.addSkill(\"duantiemrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"ksl_zhuzhimrfz_add\", \"ksl_zhuzhimrfz_gain\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tgain: {\r\n\t\t\t\t\taudio: \"ksl_zhuzhimrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"phaseZhunbeiBegin\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar card = get.cardPile(function (card) {\r\n\t\t\t\t\t\t\treturn get.name(card) == \"ksl_lulitongxinmrfz\";\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (card) player.gain(card, \"gain2\", \"log\");\r\n\t\t\t\t\t\telse player.draw();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tadd: {\r\n\t\t\t\t\taudio: \"ksl_zhuzhimrfz\",\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn (event.name != \"phase\" || game.phaseNumber == 0) && !lib.inpile.includes(\"ksl_lulitongxinmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\tvar cards = [];\r\n\t\t\t\t\t\tfor (var i = 0; i < 4; i++) {\r\n\t\t\t\t\t\t\tcards.push(game.createCard2(\"ksl_lulitongxinmrfz\", lib.suit.randomGet(), [2, 4, 3, 10, 13].randomGet()));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgame.broadcastAll(function () {\r\n\t\t\t\t\t\t\tlib.inpile.add(\"ksl_lulitongxinmrfz\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tgame.cardsGotoPile(cards, () => {\r\n\t\t\t\t\t\t\treturn ui.cardPile.childNodes[get.rand(0, ui.cardPile.childNodes.length - 1)];\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tduantiemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tposition: \"he\",\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tlet list = [];\r\n\t\t\t\tfor (let card of player.getCards(\"he\")) {\r\n\t\t\t\t\tlist.add(get.type2(card));\r\n\t\t\t\t}\r\n\t\t\t\treturn list.length >= 2;\r\n\t\t\t},\r\n\t\t\tfilterCard(card, player) {\r\n\t\t\t\treturn !ui.selected.cards.some(cardx => get.type2(cardx) == get.type2(card));\r\n\t\t\t},\r\n\t\t\tcomplexCard: true,\r\n\t\t\tselectCard: 2,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.storage.duantiemrfz_buff = player.name;\r\n\t\t\t\tlet audio = new Audio(\"extension/WhichWay/audio/up.mp3\");\r\n\t\t\t\taudio.play();\r\n\t\t\t\tawait player.reinitCharacter(player.name, \"paxinghaomrfz\", false);\r\n\t\t\t\tplayer.addSkill(\"duantiemrfz_buff\");\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tbuff: {\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\t\t\treturn `当前机甲驾驶员:${get.translation(player.storage.duantiemrfz_buff)}`;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: { player: \"dying\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet audio = new Audio(\"extension/WhichWay/audio/down.mp3\");\r\n\t\t\t\t\t\taudio.play();\r\n\t\t\t\t\t\tawait player.reinitCharacter(\"paxinghaomrfz\", player.storage.duantiemrfz_buff, false);\r\n\t\t\t\t\t\tplayer.recoverTo(2);\r\n\t\t\t\t\t\tplayer.removeSkill(\"duantiemrfz_buff\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 6,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer(player, target) {\r\n\t\t\t\t\t\tif (player.hp < 3) return 1;\r\n\t\t\t\t\t\tlet threaten = -(get.skillthreaten(\"jushoumrfz\") + get.skillthreaten(\"yinqingmrfz\"));\r\n\t\t\t\t\t\tfor (let skill of player.getSkills(null, false, false)) {\r\n\t\t\t\t\t\t\tthreaten += get.skillthreaten(skill);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn threaten;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 波卜\r\n\t\tqingtingmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: [\"loseBegin\", \"loseAsyncBegin\"] },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tlet evt = event.getParent();\r\n\t\t\t\tif (event.name === \"lose\") {\r\n\t\t\t\t\treturn event.type === \"gain\" && event.cards.length >= 1 && evt.player !== player;\r\n\t\t\t\t} else if (event.name === \"loseAsync\") {\r\n\t\t\t\t\treturn evt.name === \"swapHandcards\" && event.target != event.player && event.cards1.length >= 1;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tlet evt = trigger.getParent();\r\n\t\t\t\tevent.result = await player\r\n\t\t\t\t\t.chooseBool()\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\tlet evt = get.event().evt;\r\n\t\t\t\t\t\tlet event = get.event().evt2;\r\n\t\t\t\t\t\treturn get.attitude2(event.target || evt.player) < 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"qingtingmrfz\"))\r\n\t\t\t\t\t.set(\"prompt2\", `是否取消${get.translation(trigger.target || evt.player)}获得你的牌${get.translation(trigger.cards1 || trigger.cards)}？`)\r\n\t\t\t\t\t.set(\"evt\", evt)\r\n\t\t\t\t\t.set(\"evt2\", trigger)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (trigger.name === \"lose\") trigger.cancel();\r\n\t\t\t\telse {\r\n\t\t\t\t\tlet evt = trigger.getParent();\r\n\t\t\t\t\tplayer.directgain(evt.cards1);\r\n\t\t\t\t\tplayer.$update();\r\n\t\t\t\t\tevt.cards1 = [];\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tqingtanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\treturn target != player && target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet target = event.target;\r\n\t\t\t\tlet tHs = target.getCards(\"h\"),\r\n\t\t\t\t\tpHs = player.getCards(\"h\");\r\n\t\t\t\tawait player.viewHandcards(target);\r\n\t\t\t\tawait target.viewHandcards(player);\r\n\t\t\t\tconst {cards:cards1} =\r\n\t\t\t\t\tpHs.length < 2\r\n\t\t\t\t\t\t? {cards:pHs}\r\n\t\t\t\t\t\t: await player\r\n\t\t\t\t\t\t\t\t.chooseCard(true)\r\n\t\t\t\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\t\t\t\tlet target = get.event().target;\r\n\t\t\t\t\t\t\t\t\treturn get.value(card) * get.attitude2(target);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", \"请选择两张类型不同的牌\")\r\n\t\t\t\t\t\t\t\t.set(\"filterCard\", card => {\r\n\t\t\t\t\t\t\t\t\treturn !ui.selected.cards.some(cardx => get.type2(cardx, player) == get.type2(card, player));\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"selectCard\", () => {\r\n\t\t\t\t\t\t\t\t\tlet hs = get.event().hs;\r\n\t\t\t\t\t\t\t\t\treturn new Set(hs.map(i => get.type2(i))).size < 2 ? 1 : 2;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"complexCard\", true)\r\n\t\t\t\t\t\t\t\t.set(\"target\", target)\r\n\t\t\t\t\t\t\t\t.set(\"hs\", pHs)\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\tconst {cards:cards2} =\r\n\t\t\t\t\ttHs.length < 2\r\n\t\t\t\t\t\t? {cards:tHs}\r\n\t\t\t\t\t\t: await target\r\n\t\t\t\t\t\t\t\t.chooseCard(true)\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", \"请选择两张类型不同的牌\")\r\n\t\t\t\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\t\t\t\tlet target = get.event().target;\r\n\t\t\t\t\t\t\t\t\treturn get.value(card) * get.attitude2(target);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"filterCard\", card => {\r\n\t\t\t\t\t\t\t\t\treturn !ui.selected.cards.some(cardx => get.type2(cardx, player) == get.type2(card, player));\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"selectCard\", () => {\r\n\t\t\t\t\t\t\t\t\tlet hs = get.event().hs;\r\n\t\t\t\t\t\t\t\t\treturn new Set(hs.map(i => get.type2(i))).size < 2 ? 1 : 2;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"complexCard\", true)\r\n\t\t\t\t\t\t\t\t.set(\"hs\", tHs)\r\n\t\t\t\t\t\t\t\t.set(\"target\", player)\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\tif (cards1 && cards2) {\r\n\t\t\t\t\tplayer.swapHandcards(target, cards1, cards2);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync contentAfter(event, trigger, player) {\r\n\t\t\t\tconst target = event.targets[0];\r\n\t\t\t\tif (target.countCards(\"h\") === player.countCards(\"h\")) return;\r\n\t\t\t\tfor (let char of [player, target]) {\r\n\t\t\t\t\tif (char.hasSkill(\"qingtanmrfz_hd\")) {\r\n\t\t\t\t\t\tchar.draw();\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst {bool} = await char\r\n\t\t\t\t\t\t.chooseBool()\r\n\t\t\t\t\t\t.set(\"prompt\", \"是否摸一张牌？\")\r\n\t\t\t\t\t\t.set(\"prompt2\", \"选择‘取消’则为手牌上限+1\")\r\n\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\t\treturn player.countCards(\"h\") < 2 ? true : false;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (bool === true) {\r\n\t\t\t\t\t\tchar.draw();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (bool === false) {\r\n\t\t\t\t\t\tchar.addSkill(\"qingtanmrfz_hd\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\thd: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"手牌上限+1\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn num + 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget: -1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 菲莱\r\n\t\tqianxiumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\treturn `少女祈祷中...`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttrigger: { player: \"phaseDrawBegin1\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !event.numFixed;\r\n\t\t\t},\r\n\t\t\tprompt(event, player) {\r\n\t\t\t\treturn get.prompt(\"qianxiumrfz\");\r\n\t\t\t},\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\treturn `你可以放弃摸牌，并展示牌堆顶${player.maxHp}张牌`;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.changeToZero();\r\n\t\t\t\tlet shows = game.cardsGotoOrdering(get.cards(player.maxHp)).cards;\r\n\t\t\t\tawait player.showCards(shows, get.translation(player) + \"发动了【虔修】\");\r\n\t\t\t\tif (shows.filter(i => get.tag(i, \"damage\") > 0).length < 1) {\r\n\t\t\t\t\tplayer.gain(shows);\r\n\t\t\t\t\tif (player.countMark(\"qianxiumrfz\") < 5) player.addMark(\"qianxiumrfz\", 1, false);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst {links} = await player\r\n\t\t\t\t\t.chooseButton([\"【虔修】:你可以使用一张带有伤害类标签的牌\", shows])\r\n\t\t\t\t\t.set(\"filterButton\", button => {\r\n\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\treturn get.tag(button.link, \"damage\") > 0 && player.hasUseTarget(button.link);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\tif (player.countMark(\"qianxiumrfz\") < 3) return false;\r\n\t\t\t\t\t\treturn get.value(button.link);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (links) {\r\n\t\t\t\t\tlet nums = player.countMark(\"qianxiumrfz\");\r\n\t\t\t\t\tlinks[0].storage.qianxiumrfz = nums;\r\n\t\t\t\t\tplayer.removeAllmark(\"qianxiumrfz\");\r\n\t\t\t\t\tplayer.chooseUseTarget(links[0]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.gain(shows);\r\n\t\t\t\t\tif (player.countMark(\"qianxiumrfz\") < 5) player.addMark(\"qianxiumrfz\", 1, false);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"qianxiumrfz_add\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tadd: {\r\n\t\t\t\t\taudio: \"qianxiumrfz\",\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { source: \"damageBegin3\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn event.card && event.card.storage && typeof event.card.storage.qianxiumrfz === \"number\" && event.card.storage.qianxiumrfz > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num += trigger.card.storage.qianxiumrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tmingzhoumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"gainAfter\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.cards.length > 0 && _status.currentPhase !== player;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.chooseToDiscard(true, `he`, `请弃置${trigger.cards.length}张牌`, trigger.cards.length).set(\"ai\", card => -get.value(card));\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 0.9,\r\n\t\t\t\tnogain: 1,\r\n\t\t\t\tskillTagFilter: function (player) {\r\n\t\t\t\t\treturn player != _status.currentPhase;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 裁度\r\n\t\tcaiyimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"equipBefore\" },\r\n\t\t\tforced: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.card && get.type(event.card) === \"equip\" && event.getParent().name != \"caiyimrfz\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst subtype = [\"equip1\", \"equip2\", \"equip3\", \"equip4\", \"equip5\"];\r\n\t\t\t\tconst {control} = await player\r\n\t\t\t\t\t.chooseControl(subtype)\r\n\t\t\t\t\t.set(\"prompt\", `请选择将${get.translation(trigger.card)}置入一个装备栏`)\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\tlet subtype = get.event().subtype.filter(i => player.hasEmptySlot(i));\r\n\t\t\t\t\t\tlet card = get.event().card;\r\n\t\t\t\t\t\tif (subtype.length > 0) {\r\n\t\t\t\t\t\t\treturn subtype.includes(\"equip2\") && subtype.length > 1 ? subtype.remove(\"equip2\").randomGet() : subtype.randomGet();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlet equips = player.getCards(\"e\").sort((a, b) => get.value(b) - get.value(a));\r\n\t\t\t\t\t\t\tfor (let equip of equips) {\r\n\t\t\t\t\t\t\t\tif (get.value(card) > get.value(equip)) return get.subtype(equip);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn [\"equip1\", \"equip2\", \"equip3\", \"equip4\", \"equip5\"].randomGet();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"subtype\", subtype)\r\n\t\t\t\t\t.set(\"card\", trigger.card)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!control) return;\r\n\t\t\t\ttrigger.card.subtypes = [control];\r\n\t\t\t},\r\n\t\t},\r\n\t\tmingjiangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tlet puyuanEquip = Object.keys(lib.card).filter(i => {\r\n\t\t\t\t\treturn get.type(i) === \"equip\" && lib.card?.[i]?.skills && (lib.card[i]?.derivation === \"ol_puyuan\" || lib.card[i]?.derivation === \"puyuan\");\r\n\t\t\t\t});\r\n\t\t\t\tplayer.storage[skill] = [...lib.inpile.filter(i => get.type(i) === \"equip\"), ...puyuanEquip];\r\n\t\t\t\t_status.mingjiangmrfz = puyuanEquip;\r\n\t\t\t},\r\n\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn current.hasEmptySlot(2);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet list = player.storage.mingjiangmrfz;\r\n\t\t\t\tawait player.draw();\r\n\t\t\t\tif (player.countCards(\"h\") < 1) return;\r\n\t\t\t\tconst {links} = await player\r\n\t\t\t\t\t.chooseButton([\"名匠\", [list, \"vcard\"]], true)\r\n\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\tlet card = {\r\n\t\t\t\t\t\t\tname: button.link[2],\r\n\t\t\t\t\t\t\tnature: button.link[3],\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tlet num = get.value(card);\r\n\t\t\t\t\t\tif (_status.mingjiangmrfz.includes(card.name)) num += 5;\r\n\t\t\t\t\t\tif (player.countCards(\"e\", card => get.subtype(card) === \"equip2\") < 1) get.subtype(card) === \"equip2\" ? (num += 5) : (num -= 2);\r\n\t\t\t\t\t\treturn num;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!links) return;\r\n\t\t\t\tconst { result } = await player.chooseCardTarget({\r\n\t\t\t\t\tprompt: `将一张手牌视为${get.translation(links[0][2])}置入一名角色的装备区`,\r\n\t\t\t\t\tfilterCard: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\t\t\treturn target.hasEmptySlot(2);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai1(card) {\r\n\t\t\t\t\t\treturn -get.value(card);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai2(target) {\r\n\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\tlet att = get.attitude2(target);\r\n\t\t\t\t\t\treturn att > 0 ? att + (5 - target.countCards(\"e\")) : -1;\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\tif (!result) return;\r\n\t\t\t\tconst { targets, cards } = result;\r\n\t\t\t\tlet card = get.autoViewAs({ name: links[0][2] }, cards);\r\n\t\t\t\ttargets[0].equip(card);\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 特克诺\r\n\t\tsuoumrfz: {\r\n\t\t\tinit(player) {\r\n\t\t\t\tgame.addGlobalSkill(\"autoswap\");\r\n\t\t\t},\r\n\t\t\tonremove(player) {\r\n\t\t\t\tfor (let i of game.players) {\r\n\t\t\t\t\tif (i.name === \"muouwuzhemrfz\") i.die();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.player && event.player.isIn() && event.player.name !== \"muouwuzhemrfz\" && event.player.getNext().name != \"muouwuzhemrfz\";\r\n\t\t\t},\r\n\t\t\tprompt(event, player) {\r\n\t\t\t\treturn `【塑偶】:是否在${get.translation(event.player)}和${get.translation(event.player.getNext())}之间放置一个‘木偶舞者’？`;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet target = trigger.player.getNext();\r\n\t\t\t\tvar fellow = game.addPlayer(trigger.player.getSeatNum(), \"muouwuzhemrfz\").animate(\"start\");\r\n\t\t\t\tfellow.getId();\r\n\t\t\t\tfellow.host = player;\r\n\t\t\t\tif (player.identity != \"zhu\" || get.mode() === \"doudizhu\") fellow.identity = player.identity;\r\n\t\t\t\telse fellow.identity = \"zhong\";\r\n\t\t\t\tfellow.node.identity.dataset.color = fellow.identity;\r\n\t\t\t\tfellow.identityShown = true;\r\n\t\t\t\tfellow.init(\"muouwuzhemrfz\");\r\n\t\t\t\tfellow.draw(3);\r\n\t\t\t\tfellow.update();\r\n\t\t\t\tfellow.addSkill(\"suoumrfz_dead\");\r\n\t\t\t\tfellow.suoumrfz = player;\r\n\t\t\t\tlet skillList = trigger.player.getOriginalSkills();\r\n\t\t\t\tlet introSkill = skillList.map(i => get.translation(i) + \":\" + get.skillInfoTranslation(i));\r\n\t\t\t\tconst {index} = skillList.length === 1 ? {index:0} : await player.chooseControl().set(\"choiceList\", introSkill).forResult();\r\n\t\t\t\tfellow.addSkill(skillList[index] === \"suoumrfz\" ? \"yingzi\" : skillList[index]);\r\n\t\t\t\tfor (let i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\tlet current = game.players[i];\r\n\t\t\t\t\tcurrent.seatNum = i + 1;\r\n\t\t\t\t\tcurrent.update();\r\n\t\t\t\t}\r\n\t\t\t\tawait game.updateRoundNumber();\r\n\t\t\t\tfor (let i of game.players) {\r\n\t\t\t\t\tif (i === player || i.suoumrfz === true) {\r\n\t\t\t\t\t\ti.draw();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"suoumrfz_swap\", \"suoumrfz_die\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdie: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"dieBegin\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (trigger.player === player) lib.skill.suoumrfz.onremove(player);\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tlet chars = game.players.slice();\r\n\t\t\t\t\t\t\tchars.remove(player);\r\n\t\t\t\t\t\t\tchars.remove(trigger.player);\r\n\t\t\t\t\t\t\tchars = chars.map(i => i.name);\r\n\t\t\t\t\t\t\tif (chars.every(i => i === \"muouwuzhemrfz\") || chars.length === 0) {\r\n\t\t\t\t\t\t\t\tplayer.when({ global: \"dieAfter\" }).then(() => {\r\n\t\t\t\t\t\t\t\t\tgame.over(true);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tswap: {\r\n\t\t\t\t\tinit(player, skill) {\r\n\t\t\t\t\t\tplayer.storage[skill] = player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: [\"playercontrol\", \"chooseToUseBegin\", \"chooseToRespondBegin\", \"chooseToDiscardBegin\", \"chooseToCompareBegin\", \"chooseButtonBegin\", \"chooseCardBegin\", \"chooseTargetBegin\", \"chooseCardTargetBegin\", \"chooseControlBegin\", \"chooseBoolBegin\", \"choosePlayerCardBegin\", \"discardPlayerCardBegin\", \"gainPlayerCardBegin\", \"chooseToMoveBegin\", \"chooseToPlayBeatmapBegin\", \"chooseToGiveBegin\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn !event.player.isUnderControl(true) && !_status.auto && (event.player.suoumrfz || event.player === player.storage.suoumrfz_swap);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tgame.swapPlayer(trigger.player);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdead: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"dieBegin\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (game.me != player.suoumrfz) await game.swapPlayer(player.suoumrfz);\r\n\t\t\t\t\t\tgame.removePlayer(player);\r\n\t\t\t\t\t\tgame.log(player, `被移出游戏`);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 瑰盐\r\n\t\tqiyimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: [\"phaseUse\", \"chooseToUse\"],\r\n\t\t\tusable: 1,\r\n\t\t\thiddenCard: function (player, name) {\r\n\t\t\t\tlet event = get.event();\r\n\t\t\t\tlet evt = event.getParent(\"phaseUse\");\r\n\t\t\t\t// if(_status.currentPhase===player && evt && evt.player == player) return true;\r\n\t\t\t\tif (player.countCards(\"he\") < 1 || _status.currentPhase == player) return false;\r\n\t\t\t\tif (name != \"tao\") return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tlet evt = event.getParent(\"phaseUse\");\r\n\t\t\t\tif (player.countCards(\"he\") < 1) return false;\r\n\t\t\t\tif (evt && evt.player == player) return true;\r\n\t\t\t\telse {\r\n\t\t\t\t\treturn event.filterCard({ name: \"tao\", isCard: true }, player, event) && _status.currentPhase != player;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\treturn target.getDamagedHp() > 0;\r\n\t\t\t},\r\n\t\t\tfilterCard: true,\r\n\t\t\tselectTarget() {\r\n\t\t\t\treturn [1, Infinity];\r\n\t\t\t},\r\n\t\t\tselectCard() {\r\n\t\t\t\treturn [1, Infinity];\r\n\t\t\t},\r\n\t\t\tfilterOk() {\r\n\t\t\t\tlet player = get.player();\r\n\t\t\t\tif (_status.auto || !player.isUnderControl(true)) return true;\r\n\t\t\t\treturn ui.selected.cards.length === ui.selected.targets.length;\r\n\t\t\t},\r\n\t\t\tposition: \"he\",\r\n\t\t\tdiscard: false,\r\n\t\t\tlose: false,\r\n\t\t\tmultitarget: true,\r\n\t\t\tmultiline: true,\r\n\t\t\tcheck(card) {\r\n\t\t\t\treturn lib.skill.qiyimrfz.getResult(get.player()) === false ? false : true;\r\n\t\t\t},\r\n\t\t\tgetResult(player) {\r\n\t\t\t\tlet cards = player.getCards(\"h\");\r\n\t\t\t\tif (!player.hasSkill(\"guiyaomrfz\")) {\r\n\t\t\t\t\tlet choiceCards = cards.filter(card => 6 - get.value(card));\r\n\t\t\t\t\tlet choiceTargets = player.getFriends().filter(i => i.getDamagedHp() > 0);\r\n\t\t\t\t\tif (choiceCards.length !== choiceTargets.length) {\r\n\t\t\t\t\t\tif (choiceCards.length > choiceTargets.length) choiceCards = choiceCards.slice(0, choiceTargets);\r\n\t\t\t\t\t\telse choiceTargets = choiceTargets.slice(0, choiceCards);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (choiceTargets.length < 1 || choiceCards.length < 1) return false;\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ttargets: choiceTargets,\r\n\t\t\t\t\t\tcards: choiceCards,\r\n\t\t\t\t\t};\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (game.countPlayer(current => get.attitude2(current) > 2 && current.getDamagedHp() > 0) > 1) {\r\n\t\t\t\t\t\tlet choiceCards = cards.filter(card => 8 - get.value(card) && get.color(card) === \"red\");\r\n\t\t\t\t\t\tlet choiceTargets = player\r\n\t\t\t\t\t\t\t.getFriends()\r\n\t\t\t\t\t\t\t.filter(i => i.getDamagedHp() > 0)\r\n\t\t\t\t\t\t\t.sort((i, j) => j.hp - i.hp);\r\n\t\t\t\t\t\tif (choiceCards.length !== choiceTargets.length) {\r\n\t\t\t\t\t\t\tif (choiceCards.length > choiceTargets.length) choiceCards = choiceCards.slice(0, choiceTargets.length);\r\n\t\t\t\t\t\t\telse choiceTargets = choiceTargets.slice(0, choiceCards.length);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (choiceTargets.length < 1 || choiceCards.length < 1) return false;\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttargets: choiceTargets,\r\n\t\t\t\t\t\t\tcards: choiceCards,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet choiceCards = cards.filter(card => 6 - get.value(card));\r\n\t\t\t\t\t\tlet choiceTargets = player.getEnemies().filter(i => i.getDamagedHp() > 0);\r\n\t\t\t\t\t\tchoiceCards = choiceCards.sort((i, j) => get.value(i) - get.value(j));\r\n\t\t\t\t\t\tif (choiceCards.length !== choiceTargets.length) {\r\n\t\t\t\t\t\t\tif (choiceCards.length > choiceTargets.length) choiceCards = choiceCards.slice(0, choiceTargets.length);\r\n\t\t\t\t\t\t\telse choiceTargets = choiceTargets.slice(0, choiceCards.length);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (choiceCards.every(i => get.color(i) === \"red\")) {\r\n\t\t\t\t\t\t\tlet lowValueRed = choiceCards[0];\r\n\t\t\t\t\t\t\tlet lowValueOther = cards.filter(card => 6 - get.value(card) && get.color(card) !== \"red\").sort((i, j) => get.value(i) - get.value(j));\r\n\t\t\t\t\t\t\tif (lowValueOther.length === 0) return false;\r\n\t\t\t\t\t\t\tchoiceCards = [lowValueRed, lowValueOther[0]];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (choiceTargets.length < 1 || choiceCards.length < 1) return false;\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttargets: choiceTargets,\r\n\t\t\t\t\t\t\tcards: choiceCards,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (!player.isUnderControl(true) || _status.auto) {\r\n\t\t\t\t\tlet result = lib.skill.qiyimrfz.getResult(player);\r\n\t\t\t\t\tplayer.useCard({ name: \"tao\" }, result.targets, result.cards);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet targets = event.targets;\r\n\t\t\t\t\tlet cards = event.cards;\r\n\t\t\t\t\tplayer.useCard({ name: \"tao\" }, targets, cards);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 8,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\ttarget(player, target) {\r\n\t\t\t\t\t\tif (!player.hasSkill(\"guiyaomrfz\")) return 1;\r\n\t\t\t\t\t\tlet result = lib.skill.qiyimrfz.getResult(player);\r\n\t\t\t\t\t\tif (result === false) return 0;\r\n\t\t\t\t\t\tlet att = get.attitude2(lib.skill.qiyimrfz.getResult(player).targets[0]);\r\n\t\t\t\t\t\treturn att > 2 ? 1 : -1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tguiyaomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"recoverBegin\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.cards && event.cards.length > 0 && event.source && event.source === player;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst cards = trigger.cards;\r\n\t\t\t\tlet target = trigger.player;\r\n\t\t\t\ttarget.addTempSkill(\"guiyaomrfz_eff\", { player: \"phaseEnd\" });\r\n\t\t\t\tif (cards.every(card => get.color(card) === \"red\")) {\r\n\t\t\t\t\tif (!target.storage.guiyaomrfz_eff) target.storage.guiyaomrfz_eff = 0;\r\n\t\t\t\t\ttarget.storage.guiyaomrfz_eff++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!target.storage.guiyaomrfz_eff) target.storage.guiyaomrfz_eff = 0;\r\n\t\t\t\t\ttarget.storage.guiyaomrfz_eff--;\r\n\t\t\t\t\ttarget.loseHp(2);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\t\t\tlet num = player.storage.guiyaomrfz_eff;\r\n\t\t\t\t\t\t\tif (num === 0) return `无效果`;\r\n\t\t\t\t\t\t\treturn `额定摸牌数、手牌上限、使用牌的次数和攻击范围${num > 0 ? \"+\" : \"\"}${num}`;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove(player) {\r\n\t\t\t\t\t\tdelete player.storage.guiyaomrfz_eff;\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"phaseDrawBegin2\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn !event.numFixed && player.storage.guiyaomrfz_eff != 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num += player.storage.guiyaomrfz_eff;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn (num += player.storage.guiyaomrfz_eff);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcardUsable(card, player, num) {\r\n\t\t\t\t\t\t\treturn (num += player.storage.guiyaomrfz_eff);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tattackRange: function (player, num) {\r\n\t\t\t\t\t\t\treturn (num += player.storage.guiyaomrfz_eff);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txiadumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"roundStart\",\r\n\t\t\t},\r\n\t\t\tfirstDo: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet cards = player.getCards(\"h\", card => card.hasGaintag(\"xiadumrfz\"));\r\n\t\t\t\tif (cards) await player.discard(cards);\r\n\t\t\t\tawait player.changeHujia(-1);\r\n\t\t\t\tconst { result } = await player.draw(2).forResult();\r\n\t\t\t\tplayer.addGaintag(result, \"xiadumrfz\");\r\n\t\t\t\tplayer.changeHujia(1);\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 行著\r\n\t\txingzhumrfz: {\r\n\t\t\tmarktext: \"帙\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"帙\",\r\n\t\t\t\tcontent: \"expansion\",\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t},\r\n\t\t\tonremove: function (player, skill) {\r\n\t\t\t\tvar cards = player.getExpansions(skill);\r\n\t\t\t\tif (cards.length) player.loseToDiscardpile(cards);\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: [\"loseAfter\", \"loseAsyncAfter\"],\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.type != \"discard\") return false;\r\n\t\t\t\tfor (let current of game.players) {\r\n\t\t\t\t\tif (current === player) continue;\r\n\t\t\t\t\tlet evt = event.getl(current);\r\n\t\t\t\t\tif (!evt || !evt.cards2) continue;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet cards = [];\r\n\t\t\t\tvar players = game.filterPlayer();\r\n\t\t\t\tfor (var current of players) {\r\n\t\t\t\t\tif (current === player) continue;\r\n\t\t\t\t\tvar evt = trigger.getl(current);\r\n\t\t\t\t\tif (!evt || !evt.cards2) continue;\r\n\t\t\t\t\tvar cardsx = evt.cards2.filterInD(\"d\");\r\n\t\t\t\t\tcards.addArray(cardsx);\r\n\t\t\t\t}\r\n\t\t\t\tif (cards.length) {\r\n\t\t\t\t\tplayer.addToExpansion(cards, player, \"giveAuto\").gaintag.add(\"xingzhumrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"xingzhumrfz_start\", \"xingzhumrfz_check\", \"xingzhumrfz_init\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tcheck: {\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"addToExpansionEnd\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.gaintag.includes(\"xingzhumrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet cards = player.getExpansions(\"xingzhumrfz\");\r\n\t\t\t\t\t\tif (cards.length >= 9) {\r\n\t\t\t\t\t\t\tconst {links} = await player\r\n\t\t\t\t\t\t\t\t.chooseCardButton(`【行著】:请弃置${Math.max(1, cards.length - 9)}张‘帙’`, true, cards)\r\n\t\t\t\t\t\t\t\t.set(\"selectButton\", () => {\r\n\t\t\t\t\t\t\t\t\tlet cards2 = get.player().getExpansions(\"xingzhumrfz\");\r\n\t\t\t\t\t\t\t\t\treturn Math.max(1, cards2.length - 9);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\t\t\t\treturn -get.value(button.link);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\tif (!links) return;\r\n\t\t\t\t\t\t\tplayer.loseToDiscardpile(links);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tstart: {\r\n\t\t\t\t\taudio: \"xingzhumrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addToExpansion(get.cards(3), \"draw\").gaintag.add(\"xingzhumrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tinit: {\r\n\t\t\t\t\taudio: \"xingzhumrfz\",\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"loseEnd\", \"dying\", \"phaseBefore\", \"phaseAfter\", \"dyingAfter\", \"die\"],\r\n\t\t\t\t\t\tglobal: [\"equipEnd\", \"addJudgeEnd\", \"gainEnd\", \"loseAsyncEnd\", \"addToExpansionEnd\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (player.getExpansions(\"xingzhumrfz\").length > 0) ^ player.hasSkill(\"xingzhumrfz_in\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tforceDie: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (player.getExpansions(\"xingzhumrfz\").length) {\r\n\t\t\t\t\t\t\tvar cards = player.getExpansions(\"xingzhumrfz\");\r\n\t\t\t\t\t\t\tvar cardsx = cards.map(card => {\r\n\t\t\t\t\t\t\t\tvar cardx = ui.create.card();\r\n\t\t\t\t\t\t\t\tcardx.init(get.cardInfo(card));\r\n\t\t\t\t\t\t\t\tcardx._cardid = card.cardid;\r\n\t\t\t\t\t\t\t\treturn cardx;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tplayer.directgains(cardsx, null, \"xingzhumrfz_tag\");\r\n\t\t\t\t\t\t\tplayer.addSkill(\"xingzhumrfz_in\");\r\n\t\t\t\t\t\t} else player.removeSkill(\"xingzhumrfz_in\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tin: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"addToExpansionEnd\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.gaintag.includes(\"xingzhumrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tlocked: false,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\tvar cards2 = player.getCards(\"s\", card => card.hasGaintag(\"xingzhumrfz_tag\"));\r\n\t\t\t\t\t\tif (player.isOnline2()) {\r\n\t\t\t\t\t\t\tplayer.send(\r\n\t\t\t\t\t\t\t\tfunction (cards, player) {\r\n\t\t\t\t\t\t\t\t\tcards.forEach(i => i.delete());\r\n\t\t\t\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcards2,\r\n\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcards2.forEach(i => i.delete());\r\n\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t\t(\"step 1\");\r\n\t\t\t\t\t\tvar cards = player.getExpansions(\"xingzhumrfz\");\r\n\t\t\t\t\t\tvar cardsx = cards.map(card => {\r\n\t\t\t\t\t\t\tvar cardx = ui.create.card();\r\n\t\t\t\t\t\t\tcardx.init(get.cardInfo(card));\r\n\t\t\t\t\t\t\tcardx._cardid = card.cardid;\r\n\t\t\t\t\t\t\treturn cardx;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tplayer.directgains(cardsx, null, \"xingzhumrfz_tag\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: function (player) {\r\n\t\t\t\t\t\tvar cards2 = player.getCards(\"s\", card => card.hasGaintag(\"xingzhumrfz_tag\"));\r\n\t\t\t\t\t\tif (player.isOnline2()) {\r\n\t\t\t\t\t\t\tplayer.send(\r\n\t\t\t\t\t\t\t\tfunction (cards, player) {\r\n\t\t\t\t\t\t\t\t\tcards.forEach(i => i.delete());\r\n\t\t\t\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcards2,\r\n\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcards2.forEach(i => i.delete());\r\n\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgroup: [\"xingzhumrfz_use\", \"xingzhumrfz_sync\"],\r\n\t\t\t\t},\r\n\t\t\t\tuse: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"useCardBefore\", \"respondBefore\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tvar cards = player.getCards(\"s\", card => card.hasGaintag(\"xingzhumrfz_tag\") && card._cardid);\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.cards &&\r\n\t\t\t\t\t\t\tevent.cards.some(card => {\r\n\t\t\t\t\t\t\t\treturn cards.includes(card);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar idList = player.getCards(\"s\", card => card.hasGaintag(\"xingzhumrfz_tag\")).map(i => i._cardid);\r\n\t\t\t\t\t\tvar cards = player.getExpansions(\"xingzhumrfz\");\r\n\t\t\t\t\t\tvar cards2 = [];\r\n\t\t\t\t\t\tfor (var card of trigger.cards) {\r\n\t\t\t\t\t\t\tvar cardx = cards.find(cardx => cardx.cardid == card._cardid);\r\n\t\t\t\t\t\t\tif (cardx) cards2.push(cardx);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar cards3 = trigger.cards.slice();\r\n\t\t\t\t\t\ttrigger.cards = cards2;\r\n\t\t\t\t\t\ttrigger.card.cards = cards2;\r\n\t\t\t\t\t\tif (player.isOnline2()) {\r\n\t\t\t\t\t\t\tplayer.send(\r\n\t\t\t\t\t\t\t\tfunction (cards, player) {\r\n\t\t\t\t\t\t\t\t\tcards.forEach(i => i.delete());\r\n\t\t\t\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcards3,\r\n\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcards3.forEach(i => i.delete());\r\n\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tsync: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"loseToDiscardpileEnd\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tlet cardsx = player.getCards(\"s\", card => card.hasGaintag(\"xingzhumrfz_tag\"));\r\n\t\t\t\t\t\tlet cards = player.getExpansions(\"xingzhumrfz\");\r\n\t\t\t\t\t\treturn cardsx.length !== cards.length;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet cardsx = player.getCards(\"s\", card => card.hasGaintag(\"xingzhumrfz_tag\"));\r\n\t\t\t\t\t\tlet cards = player.getExpansions(\"xingzhumrfz\");\r\n\t\t\t\t\t\tcardsx.forEach(i => {\r\n\t\t\t\t\t\t\tif (!cards.map(i => i.cardid).includes(i._cardid)) i.delete();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tui.updatehl();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhizhumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\tlet storage = player.storage.zhizhumrfz;\r\n\t\t\t\t\treturn `·本轮已使用的花色：${get.translation(storage)}`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tfirstDo: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (!player.storage.zhizhumrfz_check || player.storage.zhizhumrfz.includes(get.suit(event.card)) || get.position(event.card) !== \"d\") return false;\r\n\t\t\t\tfor (let current of game.players) {\r\n\t\t\t\t\tif (current === player) continue;\r\n\t\t\t\t\tfor (let key in player.storage.zhizhumrfz_check) {\r\n\t\t\t\t\t\tif (event.card.cardid !== key) continue;\r\n\t\t\t\t\t\tlet arrs = player.storage.zhizhumrfz_check[key];\r\n\t\t\t\t\t\tfor (let arr of arrs) {\r\n\t\t\t\t\t\t\tif (arr[0] === current && arr[1] != current.countCards(\"h\")) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.storage.zhizhumrfz.push(get.suit(trigger.card));\r\n\t\t\t\tplayer.addToExpansion(trigger.cards, player, \"giveAuto\").gaintag.add(\"xingzhumrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhizhumrfz_check\", \"zhizhumrfz_remove\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tremove: {\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"roundStart\",\r\n\t\t\t\t\t\tplayer: \"useCardAfter\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (trigger.name === \"useCard\") {\r\n\t\t\t\t\t\t\tif (player.storage.zhizhumrfz_check.hasOwnProperty(trigger.card.cardid)) {\r\n\t\t\t\t\t\t\t\tdelete player.storage.zhizhumrfz_check[trigger.card.cardid];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tplayer.storage.zhizhumrfz = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tcheck: {\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCard\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (!player.storage.zhizhumrfz_check) player.storage.zhizhumrfz_check = {};\r\n\t\t\t\t\t\tfor (let current of game.players) {\r\n\t\t\t\t\t\t\tif (current === player) continue;\r\n\t\t\t\t\t\t\tif (!player.storage.zhizhumrfz_check[trigger.card.cardid]) player.storage.zhizhumrfz_check[trigger.card.cardid] = [];\r\n\t\t\t\t\t\t\tplayer.storage.zhizhumrfz_check[trigger.card.cardid].push([current, current.countCards(\"h\")]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 寻澜\r\n\t\ttanxunmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn !event.audioed;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.audioed = true;\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tviewHandcard: true,\r\n\t\t\t\tskillTagFilter(player, tag, arg) {\r\n\t\t\t\t\tif (player === arg || !player.inRange(arg) || _status.currentPhase !== player) return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tdongximrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"h\", card => player.canRecast(card)) > 0 && game.hasPlayer(current => current != player && player.inRange(current) && !current.hasSkill(\"dongximrfz_ban\") && current.countCards(\"h\", card => current.canRecast(card)) > 0);\r\n\t\t\t},\r\n\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\treturn target != player && player.inRange(target) && !target.hasSkill(\"dongximrfz_ban\") && target.countCards(\"h\", cardx => target.canRecast(cardx)) > 0;\r\n\t\t\t},\r\n\t\t\tfilterCard(card) {\r\n\t\t\t\treturn get.player().canRecast(card);\r\n\t\t\t},\r\n\t\t\tselectCard: [1, 2],\r\n\t\t\tcheck(card) {\r\n\t\t\t\treturn 1;\r\n\t\t\t},\r\n\t\t\tdiscard: false,\r\n\t\t\tlose: false,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst target = event.targets[0];\r\n\r\n\t\t\t\ttarget.addTempSkill(\"dongximrfz_ban\", { global: \"phaseUseEnd\" });\r\n\r\n\t\t\t\tlet cards1;\r\n\t\t\t\tif (_status.auto || !player.isUnderControl(true)) {\r\n\t\t\t\t\tlet cards = [];\r\n\r\n\t\t\t\t\tfor (let i of target.getCards(\"h\")) {\r\n\t\t\t\t\t\tif (get.attitude(player, target) > 0) {\r\n\t\t\t\t\t\t\tfor (let j of player.getCards(\"h\")) {\r\n\t\t\t\t\t\t\t\tif (get.suit(i) !== get.suit(j)) continue;\r\n\t\t\t\t\t\t\t\tcards.push(j);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfor (let j of player.getCards(\"h\")) {\r\n\t\t\t\t\t\t\t\tif (get.suit(i) === get.suit(j)) continue;\r\n\t\t\t\t\t\t\t\tcards.push(j);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (cards.length > 2) cards = cards.slice(0, 2);\r\n\t\t\t\t\tcards1 = cards.length > 0 ? cards : player.getCards(\"h\").randomGet();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcards1 = event.cards;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst {cards:cards2} = await target\r\n\t\t\t\t\t.chooseCard([1, 2], true)\r\n\t\t\t\t\t.set(\"filterCard\", card => {\r\n\t\t\t\t\t\treturn get.event().playerx.canRecast(card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"prompt\", `【洞悉】:你可以重铸至多两张牌`)\r\n\t\t\t\t\t.set(\"prompt2\", get.prompt2(\"dongximrfz\"))\r\n\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\tlet target = get.event().target,\r\n\t\t\t\t\t\t\tplayer = get.event().playerx;\r\n\t\t\t\t\t\tif (target.countCards(\"h\") > 2 && ui.selected.cards.length > 0 && get.attitude(player, target) < 0) return -1;\r\n\t\t\t\t\t\treturn 8 - get.value(card, player);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"playerx\", target)\r\n\t\t\t\t\t.set(\"target\", player)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tlet bool = true;\r\n\t\t\t\touterLoop: for (let i = 0; i < cards1.length; i++) {\r\n\t\t\t\t\tfor (let j = 0; j < cards2.length; j++) {\r\n\t\t\t\t\t\tif (get.suit(cards1[i]) === get.suit(cards2[j])) {\r\n\t\t\t\t\t\t\tbool = false;\r\n\t\t\t\t\t\t\tbreak outerLoop;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tplayer.recast(cards1);\r\n\t\t\t\ttarget.recast(cards2);\r\n\t\t\t\tlet num = cards2.length;\r\n\t\t\t\tif (bool) {\r\n\t\t\t\t\tif (num < 1) return;\r\n\t\t\t\t\tif (target.countGainableCards(player, \"h\")) await player.gainPlayerCard(\"h\", target, num, true).set(\"target\", target).set(\"complexSelect\", false).set(\"ai\", lib.card.shunshou.ai.button);\r\n\t\t\t\t\tawait target.damage(num, player);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.disableSkill(\"dongximrfz\", [\"dongximrfz\"]);\r\n\t\t\t\t\tplayer.addTempSkill(\"dongximrfz_restore\", { player: \"phaseUseEnd\" });\r\n\t\t\t\t\tgame.log(player, \"的技能\", \"#g\" + get.translation(\"dongximrfz\"), \"失效了\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\trestore: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tonremove: function (player) {\r\n\t\t\t\t\t\tplayer.enableSkill(\"dongximrfz\");\r\n\t\t\t\t\t\tgame.log(player, \"恢复了技能\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 2,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\ttarget: -1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 诺威尔\r\n\t\tbutingmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tcomboSkill: true,\r\n\t\t\tmod: {\r\n\t\t\t\taiOrder(player, card, num) {\r\n\t\t\t\t\tif (typeof card == \"object\") {\r\n\t\t\t\t\t\tconst evt = player.getLastUsed(1);\r\n\t\t\t\t\t\tif (evt?.card && get.type2(evt.card) === get.type2(card)) {\r\n\t\t\t\t\t\t\treturn num + 10;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardAfter\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tlet evt = player.getLastUsed(1);\r\n\t\t\t\treturn evt && get.type2(evt.card) === get.type2(event.card);\r\n\t\t\t},\r\n\t\t\tfrequent: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.draw();\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.5,\r\n\t\t\t},\r\n\t\t},\r\n\t\tbuximrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"dyingAfter\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.hasUseTarget(\"tao\");\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.chooseUseTarget({ name: \"tao\" }, true);\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 濯尘芙蓉\r\n\t\tdichenmrfz: {\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = [\r\n\t\t\t\t\ttarget => {\r\n\t\t\t\t\t\ttarget.discard(target.getCards(\"j\"));\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttarget => {\r\n\t\t\t\t\t\ttarget.draw(2);\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttarget => {\r\n\t\t\t\t\t\ttarget.recover();\r\n\t\t\t\t\t\ttarget\r\n\t\t\t\t\t\t\t.when({ player: \"phaseEnd\" })\r\n\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\tif (player.countCards(\"h\") < 5) player.gain(lib.card.ying.getYing(5 - player.countCards(\"h\")), \"gain2\");\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.assign({\r\n\t\t\t\t\t\t\t\tmark: true,\r\n\t\t\t\t\t\t\t\tintro: {\r\n\t\t\t\t\t\t\t\t\tname: \"涤尘\",\r\n\t\t\t\t\t\t\t\t\tcontent(_, player) {\r\n\t\t\t\t\t\t\t\t\t\treturn `在你的回合结束获得${Math.max(5 - player.countCards(\"h\"), 0)}张【影】`;\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tdichenmrfz: true,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.translation(\"涤尘\")\r\n\t\t\t\t\t\t\t.finish();\r\n\t\t\t\t\t\tlet skillList = target.getSkills();\r\n\t\t\t\t\t\tskillList.forEach(skill => {\r\n\t\t\t\t\t\t\tlet info = lib.skill[skill];\r\n\t\t\t\t\t\t\tif (info.dichenmrfz) {\r\n\t\t\t\t\t\t\t\ttarget.markSkill(skill);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttarget => {\r\n\t\t\t\t\t\ttarget.link(false);\r\n\t\t\t\t\t\ttarget.turnOver(false);\r\n\r\n\t\t\t\t\t\t// 并入上一项\r\n\t\t\t\t\t\tconst player = get.player();\r\n\t\t\t\t\t\tconst storage = player.storage.dichenmrfz;\r\n\t\t\t\t\t\tconst index = storage.length - 1;\r\n\t\t\t\t\t\tif (index <= 0) return;\r\n\r\n\t\t\t\t\t\tconst prevFunc = storage[index - 1];\r\n\t\t\t\t\t\tconst currentFunc = storage[index];\r\n\r\n\t\t\t\t\t\tstorage[index - 1] = target => {\r\n\t\t\t\t\t\t\tprevFunc(target);\r\n\t\t\t\t\t\t\tcurrentFunc(target);\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tstorage.splice(index, 1);\r\n\t\t\t\t\t},\r\n\t\t\t\t];\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tonremove: true,\r\n\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\tlet num = player.getAttackRange() - get.distance(player, target) + 1;\r\n\t\t\t\tlet prompt = num < player.storage.dichenmrfz.length ? `执行至第${num}项` : `执行所有项`;\r\n\t\t\t\tif (player.inRange(target) || target === player) target.showPrompt(prompt);\r\n\t\t\t\treturn player.inRange(target) || target === player;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet target = event.targets[0];\r\n\t\t\t\tlet storage = player.storage.dichenmrfz;\r\n\t\t\t\tlet num = Math.min(player.getAttackRange() - get.distance(player, target) + 1, 4);\r\n\t\t\t\tif (storage[0] && num > 0) storage[0](target);\r\n\t\t\t\tif (storage[1] && num > 1) storage[1](target);\r\n\t\t\t\tif (storage[2] && num > 2) storage[2](target);\r\n\t\t\t\tif (storage[3] && num > 3) storage[3](target);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 7.49,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\ttarget(player, target) {\r\n\t\t\t\t\t\tlet storage = player.storage.dichenmrfz;\r\n\t\t\t\t\t\tlet x = Math.min(player.getAttackRange() - get.distance(player, target) + 1, 4);\r\n\t\t\t\t\t\tlet num = 1;\r\n\t\t\t\t\t\tif (get.attitude2(target) < 0) return 0;\r\n\t\t\t\t\t\tif (x >= storage.length && storage.length > 2) num += 5;\r\n\t\t\t\t\t\tif (target.hp < 2) num += 3;\r\n\t\t\t\t\t\tif (target.countCards(\"h\") < 3) num += 1;\r\n\t\t\t\t\t\tif (target.isTurnedOver()) num += 5;\r\n\t\t\t\t\t\tif (target.isLinked()) num += 0.5;\r\n\t\t\t\t\t\tif (target.hasSkill(\"zhuoxinmrfz\")) num += 0.5;\r\n\t\t\t\t\t\treturn num;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhuoxinmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn current !== player && get.distance(player, current) < 2 && player.canUse({ name: \"tuixinzhifu\" }, current);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tprompt(event, player, name) {\r\n\t\t\t\tgame.players.forEach(char => {\r\n\t\t\t\t\tif (get.distance(player, char) < 2 && char !== player && player.canUse({ name: \"tuixinzhifu\" }, char)) char.showPrompt(\"距离不大于2\");\r\n\t\t\t\t});\r\n\t\t\t\treturn get.prompt(\"zhuoxinmrfz\");\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.chooseToUse()\r\n\t\t\t\t\t.set(\"openskilldialog\", \"视为使用一张【推心置腹】\")\r\n\t\t\t\t\t.set(\"norestore\", true)\r\n\t\t\t\t\t.set(\"_backupevent\", \"zhuoxinmrfz_backup\")\r\n\t\t\t\t\t.set(\"custom\", {\r\n\t\t\t\t\t\tadd: {},\r\n\t\t\t\t\t\treplace: { window() {} },\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.backup(\"zhuoxinmrfz_backup\");\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tbackup: {\r\n\t\t\t\t\tfilterCard: () => false,\r\n\t\t\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\t\t\treturn target !== player && get.distance(player, target) < 2 && player.canUse({ name: \"tuixinzhifu\" }, target);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tselectTarget: -1,\r\n\t\t\t\t\tselectCard: -1,\r\n\t\t\t\t\tlog: false,\r\n\t\t\t\t\tviewAs: {\r\n\t\t\t\t\t\tname: \"tuixinzhifu\",\r\n\t\t\t\t\t\tisCard: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 新术士阿米娅\r\n\t\tnewtongganmrfz: {\r\n\t\t\taudio: \"tongganmrfz\",\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseEnd\",\r\n\t\t\t},\r\n\t\t\tfindGainAndDiscardHistory() {\r\n\t\t\t\tlet result = {\r\n\t\t\t\t\tgain: [],\r\n\t\t\t\t\tdiscard: [],\r\n\t\t\t\t};\r\n\t\t\t\tgame.players.forEach(char => {\r\n\t\t\t\t\tchar.getHistory(\"gain\", evt => {\r\n\t\t\t\t\t\tif (evt.name === \"gain\") result.gain.add(char);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tchar.getHistory(\"lose\", evt => {\r\n\t\t\t\t\t\tif (evt.type === \"discard\") result.discard.add(char);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\treturn result;\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tlet result = lib.skill.newtongganmrfz.findGainAndDiscardHistory();\r\n\t\t\t\treturn (result.gain.length > 0 || result.discard.length > 0) && event.player !== player;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet { gain, discard } = lib.skill.newtongganmrfz.findGainAndDiscardHistory();\r\n\t\t\t\tawait player.draw(gain.length);\r\n\t\t\t\tif (discard.length) player.chooseToDiscard(discard.length, true, `【同感】:请弃置${discard.length}张牌`, \"he\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tshijiemrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\tcanBeDiscarded(card, target, player) {\r\n\t\t\t\t\tif (get.position(card) === \"h\" && player.countCards(\"h\") <= 5) return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"gainBegin\", \"loseBegin\"],\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.name === \"gain\" ? player.countCards(\"h\") >= 10 && event.getParent().name === \"draw\" : player.countCards(\"h\") <= 5 && event.type === \"discard\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (event.name === \"gain\") {\r\n\t\t\t\t\tlet cards = trigger.getParent().result;\r\n\t\t\t\t\tgame.cardsDiscard(cards);\r\n\t\t\t\t\tgame.log(player, \"取消了此次摸牌\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgame.log(player, \"取消了此次弃牌\");\r\n\t\t\t\t}\r\n\t\t\t\ttrigger.cancel();\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 新近卫阿米娅\r\n\t\tchenxianmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseDrawBegin2\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn game.countPlayer(current => current.getDamagedHp() > 0) > 0 && !event.numFixed;\r\n\t\t\t},\r\n\t\t\tprompt() {\r\n\t\t\t\treturn `【沉弦】:是否多摸${game.countPlayer(current => current.getDamagedHp() > 0)}张牌,然后其中每包含一张【万箭齐发】、【杀】或【酒】，你便弃置一张牌？`;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet num = game.countPlayer(current => current.getDamagedHp() > 0);\r\n\t\t\t\ttrigger.num += num;\r\n\t\t\t\tplayer.when({ player: \"phaseDrawAfter\" }).then(() => {\r\n\t\t\t\t\tlet cards = trigger.cards;\r\n\t\t\t\t\tlet num = cards.filter(card => {\r\n\t\t\t\t\t\treturn card.name === \"wanjian\" || card.name === \"sha\" || card.name === \"jiu\";\r\n\t\t\t\t\t}).length;\r\n\t\t\t\t\tif (num > 0) player.chooseToDiscard(\"he\", true, `【沉弦】:请弃置${get.cnNumber(num)}张牌`, num);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 2,\r\n\t\t\t},\r\n\t\t},\r\n\t\tbenyemrfz: {\r\n\t\t\taudio: \"amy_qingyanmrfz\",\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\treturn current !== player && current.countCards(\"h\") > 0;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\treturn target !== player && target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet target = event.targets[0];\r\n\t\t\t\tconst { cards } = await player\r\n\t\t\t\t\t.choosePlayerCard(target, \"h\")\r\n\t\t\t\t\t.set(\"prompt\", `【奔夜】:你可以使用其中一张【杀】或【顺手牵羊】`)\r\n\t\t\t\t\t.set(\"visible\", true)\r\n\t\t\t\t\t.set(\"filterButton\", button => {\r\n\t\t\t\t\t\tlet link = button.link;\r\n\t\t\t\t\t\treturn link.name === \"sha\" || link.name === \"shunshou\";\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", button => {\r\n\t\t\t\t\t\tlet link = button.link;\r\n\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\tlet max = 0;\r\n\t\t\t\t\t\tgame.players.forEach(char => {\r\n\t\t\t\t\t\t\tif (player.canUse(link, char)) {\r\n\t\t\t\t\t\t\t\tmax = Math.max(max, get.effect(char, link, player, player));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn max;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\tif (player.hasUseTarget(cards[0])) {\r\n\t\t\t\t\tawait player.$gain2(cards[0], false);\r\n\t\t\t\t\tplayer.chooseUseTarget(cards[0]).set(\"addCount\", false);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 3,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\ttarget(player, target) {\r\n\t\t\t\t\t\tlet att = get.attitude(player, target);\r\n\t\t\t\t\t\treturn att > 0 ? 0 : -1 * target.countCards(\"h\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tnewjueyingmrfz: {\r\n\t\t\taudio: \"yingxiaomrfz\",\r\n\t\t\ttrigger: { global: \"phaseEnd\" },\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationColor: \"red\",\r\n\t\t\tmark: true,\r\n\t\t\tunique: true,\r\n\t\t\tlimited: true,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tlet color = new Set(\r\n\t\t\t\t\tget\r\n\t\t\t\t\t\t.discarded()\r\n\t\t\t\t\t\t.filter(card => card.name === \"sha\")\r\n\t\t\t\t\t\t.map(card => get.color(card))\r\n\t\t\t\t);\r\n\t\t\t\tif (color.size < 2) return false;\r\n\t\t\t\treturn !player.storage.newjueyingmrfz;\r\n\t\t\t},\r\n\t\t\tinit: (player, skill) => (player.storage[skill] = false),\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.awakenSkill(\"newjueyingmrfz\");\r\n\t\t\t\tplayer.storage.newjueyingmrfz = true;\r\n\r\n\t\t\t\tlet skills = player.getSkills(null, false, null).filter(skill => lib.translate[skill + \"_info\"]);\r\n\t\t\t\tlet awakenedSkills = player.awakenedSkills.filter(skill => lib.translate[skill + \"_info\"]);\r\n\t\t\t\tskills.add(...awakenedSkills);\r\n\t\t\t\tlet cards = [];\r\n\t\t\t\tlet names = {};\r\n\t\t\t\tlib.inpile.forEach(i => {\r\n\t\t\t\t\tnames[i] = get.translation(i);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tlet pattern = new RegExp(Object.values(names).join(\"|\"), \"g\");\r\n\t\t\t\tskills.forEach(skill => {\r\n\t\t\t\t\tlet translate = lib.translate[skill + \"_info\"];\r\n\t\t\t\t\tlet matches = translate.match(pattern);\r\n\t\t\t\t\tif (matches) {\r\n\t\t\t\t\t\tlet arr = matches.map(match => {\r\n\t\t\t\t\t\t\treturn Object.keys(names).find(key => names[key] === match);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (arr.length > 0) {\r\n\t\t\t\t\t\t\tcards.push(...arr);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\twhile (cards.length) {\r\n\t\t\t\t\tlet card = { name: cards.shift(), isCard: true };\r\n\t\t\t\t\tif (player.hasUseTarget(card)) {\r\n\t\t\t\t\t\tawait player.chooseUseTarget(card).set(\"prompt2\", `待使用：${get.translation(cards)}`);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n};\r\n"],"names":["event","player","card","target","trigger","targets","cards","i","id","card2","cards2","num","evt","result","name","view","index","list","targets2","top","value","bottom","moved","next","suffixs","skills","skill","info","control","matrix","suits","showCards","str","pos","subtype","cardx"],"mappings":"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"}