{"version":3,"file":"epic1.js","sources":["../../../../../../../../packages/extension/WhichWay/src/character/packs/epic/epic1.js"],"sourcesContent":["import { lib, game, ui, get, ai, _status } from \"noname\";\n\n/**\n * 五星武将的第一部分\n */\n/**\n * @type { WhichWayCharacterPack }\n */\nexport default {\n\tcharacter: {\n\t\tfulankamrfz: [\"female\", \"gemrfz\", 3, [\"jifengmrfz\", \"xiqiaomrfz\"], []],\n\t\txingjimrfz: [\"female\", \"gemrfz\", 4, [\"tianyimrfz\", \"huijianmrfz\", \"bingmingmrfz\"], []],\n\t\txingyuanmrfz: [\"female\", \"lymrfz\", 4, [\"daoliumrfz\", \"gewumrfz\"], []],\n\t\tzhanchemrfz: [\"male\", \"othermrfz\", \"4/4/2\", [\"jiqiangmrfz\", \"qingxiemrfz\"], []],\n\t\tshanjimrfz: [\"male\", \"othermrfz\", 4, [\"shandunmrfz\", \"xuanmumrfz\", \"chuandunmrfz\"], []],\n\t\tshuanghuamrfz: [\"female\", \"othermrfz\", 3, [\"tadianmrfz\", \"xinjimrfz\"], []],\n\t\tbohuimrfz: [\"female\", \"samimrfz\", 4, [\"shehunmrfz\", \"yirenmrfz\"], []],\n\t\tbaimianxiaomrfz: [\"female\", \"lymrfz\", 3, [\"jinaomrfz\", \"wutaimrfz\"], []],\n\t\tcimeimrfz: [\"female\", \"weimrfz\", 3, [\"huabumrfz\", \"shixinmrfz\"], []],\n\t\thongmrfz: [\"female\", \"luomrfz\", 4, [\"qunlangmrfz\", \"cigumrfz\", \"qingchumrfz\"], [\"hiddenSkill\"]],\n\t\tdekesasimrfz: [\"female\", \"qimrfz\", 4, [\"sudimrfz\", \"jianyumrfz\"], []],\n\t\tbaijinmrfz: [\"female\", \"kamrfz\", 3, [\"xujimrfz\", \"shiyumrfz\"], []],\n\t\tyintuoluomrfz: [\"female\", \"weimrfz\", 4, [\"suijiamrfz\", \"huquanmrfz\"], []],\n\t\twenmimrfz: [\"female\", \"leimrfz\", 3, [\"baiweimrfz\", \"nuanxiangmrfz\"], []],\n\t\tmeiermrfz: [\"female\", \"lymrfz\", 3, [\"shuitamrfz\"], []],\n\t\tlindongmrfz: [\"female\", \"wumrfz\", 4, [\"xianlingmrfz\", \"dongjiangmrfz\"], []],\n\t\tyunxingmrfz: [\"female\", \"luomrfz\", 4, [\"yxliumingmrfz\", \"dingyuanmrfz\"], []],\n\t\tyumaobimrfz: [\"female\", \"bomrfz\", 4, [\"tiaojiumrfz\", \"rujingmrfz\"], []],\n\t\tailisimrfz: [\"female\", \"weimrfz\", 3, [\"rumianmrfz\", \"alsmengxiangmrfz\"], []],\n\t\ttianhuomrfz: [\"female\", \"weimrfz\", 3, [\"zhuihuomrfz\", \"yihuomrfz\"], []],\n\t\tlinguangmrfz: [\"female\", \"shimrfz\", \"3/4/3\", [\"anranmrfz\", \"huchimrfz\", \"chongyaomrfz\"], []],\n\t\thaimomrfz: [\"female\", \"yimrfz\", 4, [\"xunchaomrfz\", \"paoyingmrfz\"], []],\n\t\txiaomanmrfz: [\"female\", \"yanmrfz\", 4, [\"mushoumrfz\"], []],\n\t\twanqingmrfz: [\"male\", \"yanmrfz\", 4, [\"guantianmrfz\", \"yingfengmrfz\"], []],\n\t\tgelaokesimrfz: [\"female\", \"yimrfz\", 4, [\"cichongmrfz\", \"ganraomrfz\"], []],\n\t\thaidimrfz: [\"female\", \"weimrfz\", 3, [\"anxinmrfz\", \"gongchoumrfz\", \"yinshimrfz\"], []],\n\t\tyaxinmrfz: [\"female\", \"xiemrfz\", 4, [\"lingdingmrfz\", \"yabengmrfz\"], []],\n\t\tchuxuemrfz: [\"female\", \"xiemrfz\", 3, [\"shengnvmrfz\", \"shenshemrfz\"], []],\n\t\tshixiemrfz: [\"female\", \"samrfz\", 3, [\"qianzongmrfz\", \"xiedumrfz\", \"lijimrfz\"], [\"hiddenSkill\"]],\n\t\thongsunmrfz: [\"female\", \"samrfz\", 4, [\"chihenmrfz\", \"haomingmrfz\"], []],\n\t\txiyinmrfz: [\"female\", \"samrfz\", 3, [\"sheyingmrfz\", \"chaozaimrfz\"], []],\n\t\tyemomrfz: [\"female\", \"weimrfz\", 3, [\"biaolimrfz\", \"ymkongwomrfz\"], []],\n\t\tjingzhemrfz: [\"female\", \"yanmrfz\", 3, [\"chunleimrfz\", \"zheqimrfz\"], []],\n\t\tlongshelanmrfz: [\"male\", \"bomrfz\", 4, [\"tiaojiumrfz\", \"pianfengmrfz\"], []],\n\t\tspamiyamrfz: [\"female\", \"luomrfz\", 4, [\"chenxianmrfz\", \"benyemrfz\", \"newjueyingmrfz\"], []],\n\t\tamiyamrfz: [\"female\", \"luomrfz\", 3, [\"newtongganmrfz\", \"shijiemrfz\", \"qinghemrfz\"], [\"zhu\"]],\n\t\tdocmrfz: [\"male\", \"othermrfz\", 4, [\"yizhemrfz\", \"zhulimrfz\"], []],\n\t\t// innamrfz: ['female', 'othermrfz', 4, ['shuangzimrfz'], []],\n\t\tlinshimrfz: [\"female\", \"samimrfz\", 3, [\"jiangtumrfz\", \"jieshimrfz\"], []],\n\t\tmedical_amiyamrfz: [\"female\", \"luomrfz\", 3, [\"tongqingmrfz\", \"cibeimrfz\"], []],\n\t\tspfenmrfz: [\"female\", \"luomrfz\", 4, [\"xiaozhimrfz\", \"zhishoumrfz\"], []],\n\t\thainimrfz: [\"female\", \"a_groupmrfz\", 3, [\"jingchaomrfz\", \"cehuimrfz\"], []],\n\t\tshenxunmrfz: [\"female\", \"a_groupmrfz\", 5, [\"yuchaomrfz\", \"yanhuimrfz\"], []],\n\t\tmingjiaomrfz: [\"female\", \"luomrfz\", 3, [\"suozemrfz\", \"youyimrfz\"], []],\n\t\tdaifeienmrfz: [\"female\", \"weimrfz\", 3, [\"zhuofengmrfz\", \"qianggongmrfz\"], []],\n\t\txirenmrfz: [\"male\", \"gemrfz\", 4, [\"suximrfz\", \"sanzhongmrfz\"], []],\n\t\tsuocaomrfz: [\"female\", \"samrfz\", 3, [\"lanjuanmrfz\", \"xinglumrfz\"], []],\n\t\tlaiousimrfz: [\"male\", \"othermrfz\", 4, [\"shijianmrfz\", \"shimomrfz\"], []],\n\t\tsenximrfz: [\"male\", \"othermrfz\", 4, [\"micaimrfz\", \"beicaimrfz\", \"pengcaimrfz\"], []],\n\t\tqierchakemrfz: [\"male\", \"othermrfz\", 3, [\"tangongmrfz\", \"ruiganmrfz\"], []],\n\t\tkaiselinmrfz: [\"female\", \"weimrfz\", 3, [\"ksl_zhuzhimrfz\", \"duantiemrfz\"], []],\n\t\tbobumrfz: [\"male\", \"gemrfz\", 4, [\"qingtingmrfz\", \"qingtanmrfz\"], []],\n\t\tfeilaimrfz: [\"female\", \"samrfz\", 5, [\"qianxiumrfz\", \"mingzhoumrfz\"], []],\n\t\tcaidumrfz: [\"male\", \"xumrfz\", 4, [\"caiyimrfz\", \"mingjiangmrfz\"], []],\n\t\ttekenuomrfz: [\"female\", \"bomrfz\", 4, [\"suoumrfz\"], []],\n\t\tguiyanmrfz: [\"female\", \"yimrfz\", 3, [\"qiyimrfz\", \"guiyaomrfz\", \"xiadumrfz\"], []],\n\t\txingzhumrfz: [\"female\", \"yanmrfz\", 3, [\"xingzhumrfz\", \"zhizhumrfz\"], []],\n\t\txunlanmrfz: [\"female\", \"gemrfz\", 4, [\"tanxunmrfz\", \"dongximrfz\"], []],\n\t\tnuoweiermrfz: [\"male\", \"weimrfz\", 3, [\"butingmrfz\", \"buximrfz\"], []],\n\t\tspfurongmrfz: [\"female\", \"luomrfz\", 3, [\"dichenmrfz\", \"zhuoxinmrfz\"], []],\n\t\tanzhelamrfz: [\"female\", \"liemrfz\", 3, [\"jianmomrfz\", \"zhishemrfz\", \"ruijuemrfz\", \"tongmaimrfz\"], [\"clan:深海猎人\"]],\n\n\t\t//————测试————//\n\t\t//ceshisjzx:['female','shen',5,['diymengxian','diyfujing','diyhesheng'],[]],\n\t},\n\tskill: {\n\t\t// 安哲拉\n\t\tzhishemrfz: {\n\t\t\taudio: 2,\n\t\t\tenable: \"phaseUse\",\n\t\t\tusable: 1,\n\t\t\tfilter(event, player) {\n\t\t\t\treturn player.countCards(\"he\") > 0 && game.hasPlayer(current => current.countCards(\"h\") > 0 && current !== player);\n\t\t\t},\n\t\t\tfilterTarget(card, player, target) {\n\t\t\t\treturn target !== player && target.countCards(\"h\") > 0;\n\t\t\t},\n\t\t\tfilterCard: true,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tconst { targets, cards } = event;\n\t\t\t\tlet target = targets[0];\n\t\t\t\tconst {cards:card2} = await player.discardPlayerCard(\"h\", target, true).set(\"target\", target).set(\"complexSelect\", false).set(\"ai\", lib.card.guohe.ai.button).forResult();\n\t\t\t\tif (card2) player.draw(new Set([].concat(cards, card2).map(i => get.type2(i, player))).size);\n\t\t\t\telse player.draw();\n\t\t\t\tif (target.countCards(\"h\") === 0 && card2) player.getStat(\"skill\").zhishemrfz = 0;\n\t\t\t},\n\t\t},\n\t\tjianmomrfz: {\n\t\t\taudio: 2,\n\t\t\tmod: {\n\t\t\t\ttargetEnabled(card) {\n\t\t\t\t\tif (get.type(card) == \"trick\" || get.type(card) == \"delay\") return false;\n\t\t\t\t},\n\t\t\t},\n\t\t\tforced: true,\n\t\t\tfirstDo: true,\n\t\t\tfilter(event, player) {\n\t\t\t\tif (event.player == player) return false;\n\t\t\t\tif (get.color(event.card) != \"black\" || get.type(event.card) != \"trick\") return false;\n\t\t\t\tvar info = lib.card[event.card.name];\n\t\t\t\treturn info && info.selectTarget && info.selectTarget == -1 && !info.toself;\n\t\t\t},\n\t\t\tcontent() {},\n\t\t},\n\t\truijuemrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tplayer: [\"loseAfter\", \"gainAfter\"],\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\tif (player.countCards(\"he\") < 1) return false;\n\t\t\t\tif (event.name === \"lose\") return event.type === \"discard\" && event.getl(player).cards2.length > 0;\n\t\t\t\telse {\n\t\t\t\t\tconst evt = event.getParent(\"phaseDraw\");\n\t\t\t\t\tif (evt?.player == player) return false;\n\t\t\t\t\treturn event.getg(player).length > 0 && player.getCards(\"h\").some(card => player.hasUseTarget(card, false));\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tasync cost(event, trigger, player) {\n\t\t\t\tif (trigger.name === \"lose\") {\n\t\t\t\t\tevent.result = await player\n\t\t\t\t\t\t.chooseCard(\"he\", [1, player.countCards(\"he\")])\n\t\t\t\t\t\t.set(\"prompt\", `【锐觉】:你可以重铸任意张牌`)\n\t\t\t\t\t\t.set(\"ai\", card => get.value(card, player) < 7)\n\t\t\t\t\t\t.set(\"filterCard\", (card, player) => player.canRecast(card))\n\t\t\t\t\t\t.forResult();\n\t\t\t\t} else {\n\t\t\t\t\tevent.result = await player\n\t\t\t\t\t\t.chooseBool()\n\t\t\t\t\t\t.set(\"prompt\", `【锐觉】:你可以使用一张牌（无距离限制且不计入次数限制）`)\n\t\t\t\t\t\t.set(\"ai\", () => {\n\t\t\t\t\t\t\tlet player = get.player();\n\t\t\t\t\t\t\treturn player.getCards(\"h\").some(card => {\n\t\t\t\t\t\t\t\treturn player.hasUseTarget(card, false) && game.hasPlayer(char => get.effect(char, card, player, player) > 0);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.forResult();\n\t\t\t\t}\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tif (trigger.name === \"lose\") {\n\t\t\t\t\tplayer.recast(event.cards);\n\t\t\t\t} else {\n\t\t\t\t\tplayer.chooseToUse().set(\"prompt\", `【锐觉】:请使用一张手牌`).set(\"addCount\", false).set(\"nodistance\", true);\n\t\t\t\t}\n\t\t\t},\n\t\t\tmod: {\n\t\t\t\ttargetInRange(card, player, target, now) {\n\t\t\t\t\tlet event = get.event();\n\t\t\t\t\tif (event.nodistance) return true;\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t//剑兔 近卫阿米娅\n\t\tamy_qingyanmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { player: \"phaseUseEnd\" },\n\t\t\tintro: {\n\t\t\t\tcontent: function (event, player) {\n\t\t\t\t\tvar str = \"\";\n\t\t\t\t\tvar list = [player.hasSkill(\"amy_qingyanmrfz_damage\"), player.hasSkill(\"amy_qingyanmrfz_time\"), player.hasSkill(\"amy_qingyanmrfz_direct\")];\n\t\t\t\t\tvar text = [\"·你每回合使用的第一张【杀】的伤害基数+1</br>\", \"·你使用【杀】的次数+1</br>\", \"·你使用的【杀】需要两张【闪】才可抵消</br>\"];\n\t\t\t\t\tfor (var i = 0; i < list.length; i++) {\n\t\t\t\t\t\tif (list[i]) str = str + text[i];\n\t\t\t\t\t}\n\t\t\t\t\treturn str;\n\t\t\t\t},\n\t\t\t},\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn !player.storage.amy_qingyanmrfz_time || !player.storage.amy_qingyanmrfz_damage || !player.storage.amy_qingyanmrfz_direct;\n\t\t\t},\n\t\t\tcheck: function (event, player) {\n\t\t\t\treturn game.hasPlayer(function (current) {\n\t\t\t\t\treturn current != player && get.attitude(current, player) > 2;\n\t\t\t\t});\n\t\t\t},\n\t\t\tcontent: function () {\n\t\t\t\t\"step 0\";\n\t\t\t\tplayer\n\t\t\t\t\t.chooseTarget(\"【青焱】：请选择一名其他角色\", true, function (card, player, target) {\n\t\t\t\t\t\treturn target != player;\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"ai\", function (target) {\n\t\t\t\t\t\tvar player = _status.event.player;\n\t\t\t\t\t\tvar att = get.attitude(_status.event.player, target);\n\t\t\t\t\t\t//if(game.hasPlayer(current=>{current!=player&&current.hasSkill('shengcaimrfz')&&get.attitude(player,current)>2})) return game.findPlayer(current=>{current!=player&&current.hasSkill('shengcaimrfz')});\n\t\t\t\t\t\treturn att > 2;\n\t\t\t\t\t});\n\t\t\t\t(\"step 1\");\n\t\t\t\tif (result.bool) {\n\t\t\t\t\tvar target = result.targets[0],\n\t\t\t\t\t\tlist = [];\n\t\t\t\t\tevent.target = target;\n\t\t\t\t\tif (!player.storage.amy_qingyanmrfz_time) list.push(\"你使用【杀】的次数+1\");\n\t\t\t\t\tif (!player.storage.amy_qingyanmrfz_damage) list.push(\"你每回合使用的第一张【杀】的伤害基数+1\");\n\t\t\t\t\tif (!player.storage.amy_qingyanmrfz_direct) list.push(\"你使用的【杀】需要两张【闪】才可抵消\");\n\t\t\t\t\tif (list.length == 1) {\n\t\t\t\t\t\tif (!player.storage.amy_qingyanmrfz_time) {\n\t\t\t\t\t\t\tplayer.storage.amy_qingyanmrfz_time = true;\n\t\t\t\t\t\t\ttarget.addSkill(\"amy_qingyanmrfz_time\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!player.storage.amy_qingyanmrfz_damage) {\n\t\t\t\t\t\t\tplayer.storage.amy_qingyanmrfz_damage = true;\n\t\t\t\t\t\t\ttarget.addSkill(\"amy_qingyanmrfz_damage\", false);\n\t\t\t\t\t\t\ttarget.addMark(\"amy_qingyanmrfz\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!player.storage.amy_qingyanmrfz_direct) {\n\t\t\t\t\t\t\tplayer.storage.amy_qingyanmrfz_direct = true;\n\t\t\t\t\t\t\ttarget.addSkill(\"amy_qingyanmrfz_direct\", false);\n\t\t\t\t\t\t\ttarget.addMark(\"amy_qingyanmrfz\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tplayer\n\t\t\t\t\t\t\t.chooseControl(list)\n\t\t\t\t\t\t\t.set(\"prompt\", \"请选择删除一句话并令\" + get.translation(target) + \"获得该效果\")\n\t\t\t\t\t\t\t.set(\"ai\", function () {\n\t\t\t\t\t\t\t\treturn [0, 1, 2].randomGet();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else event.finish();\n\t\t\t\t(\"step 2\");\n\t\t\t\tif (result.control == \"你使用【杀】的次数+1\") {\n\t\t\t\t\tevent.target.addMark(\"amy_qingyanmrfz\", false);\n\t\t\t\t\tplayer.storage.amy_qingyanmrfz_time = true;\n\t\t\t\t\tevent.target.addSkill(\"amy_qingyanmrfz_time\");\n\t\t\t\t}\n\t\t\t\tif (result.control == \"你每回合使用的第一张【杀】的伤害基数+1\") {\n\t\t\t\t\tevent.target.addMark(\"amy_qingyanmrfz\", false);\n\t\t\t\t\tplayer.storage.amy_qingyanmrfz_damage = true;\n\t\t\t\t\tevent.target.addSkill(\"amy_qingyanmrfz_damage\");\n\t\t\t\t}\n\t\t\t\tif (result.control == \"你使用的【杀】需要两张【闪】才可抵消\") {\n\t\t\t\t\tevent.target.addMark(\"amy_qingyanmrfz\", false);\n\t\t\t\t\tplayer.storage.amy_qingyanmrfz_direct = true;\n\t\t\t\t\tevent.target.addSkill(\"amy_qingyanmrfz_direct\");\n\t\t\t\t}\n\t\t\t},\n\t\t\tai: {\n\t\t\t\texpose: 0.1,\n\t\t\t\tthreaten: 1.1,\n\t\t\t},\n\t\t\tgroup: [\"amy_qingyanmrfz_damage\", \"amy_qingyanmrfz_time\", \"amy_qingyanmrfz_direct\"],\n\t\t\tsubSkill: {\n\t\t\t\tdirect: {\n\t\t\t\t\taudio: \"amy_qingyanmrfz\",\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"useCardToPlayered\",\n\t\t\t\t\t},\n\t\t\t\t\tforced: true,\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\tif (player.storage.amy_qingyanmrfz_direct == true && player.hasSkill(\"amy_qingyanmrfz_mark\")) return false;\n\t\t\t\t\t\treturn event.card.name == \"sha\" && !event.getParent().directHit.includes(event.target) && get.distance(player, event.target) <= 1;\n\t\t\t\t\t},\n\t\t\t\t\tlogTarget: \"target\",\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tvar id = trigger.target.playerid;\n\t\t\t\t\t\tvar map = trigger.getParent().customArgs;\n\t\t\t\t\t\tif (!map[id]) map[id] = {};\n\t\t\t\t\t\tif (typeof map[id].shanRequired == \"number\") {\n\t\t\t\t\t\t\tmap[id].shanRequired++;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmap[id].shanRequired = 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tai: {\n\t\t\t\t\t\tdirectHit_ai: true,\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\n\t\t\t\t\t\t\tif (arg.card.name != \"sha\" || arg.target.countCards(\"h\", \"shan\") > 1 || get.distance(player, arg.target) > 1) return false;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tgroup: \"amy_qingyanmrfz_remove2\",\n\t\t\t\t},\n\t\t\t\tremove2: {\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn !player.hasSkill(\"amy_qingyanmrfz\");\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tplayer.removeSkill(\"amy_qingyanmrfz_direct\");\n\t\t\t\t\t\tplayer.removeMark(\"amy_qingyanmrfz\", false);\n\t\t\t\t\t\tgame.countPlayer(function (current) {\n\t\t\t\t\t\t\tif (current.hasSkill(\"amy_qingyanmrfz\")) current.storage.amy_qingyanmrfz_direct = false;\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\ttime: {\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn !player.hasSkill(\"amy_qingyanmrfz\");\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tplayer.removeMark(\"amy_qingyanmrfz\", false);\n\t\t\t\t\t\tplayer.removeSkill(\"amy_qingyanmrfz_time\");\n\t\t\t\t\t\tgame.countPlayer(function (current) {\n\t\t\t\t\t\t\tif (current.hasSkill(\"amy_qingyanmrfz\")) current.storage.amy_qingyanmrfz_time = false;\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tmod: {\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\n\t\t\t\t\t\t\tif (card.name == \"sha\" && (!player.storage.amy_qingyanmrfz || player.hasMark(\"amy_qingyanmrfz\"))) return num + 1;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdamage: {\n\t\t\t\t\taudio: \"amy_qingyanmrfz\",\n\t\t\t\t\tforced: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: { player: \"useCard\" },\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\tif (player.storage.amy_qingyanmrfz_damage && player.hasSkill(\"amy_qingyanmrfz_mark\")) return false;\n\t\t\t\t\t\tif (player.hasSkill(\"amy_qingyanmrfz_mark\")) return false;\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\";\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tif (!trigger.baseDamage) trigger.baseDamage = 1;\n\t\t\t\t\t\ttrigger.baseDamage++;\n\t\t\t\t\t\tplayer.addTempSkill(\"amy_qingyanmrfz_mark\", \"phaseEnd\");\n\t\t\t\t\t},\n\t\t\t\t\tai: {\n\t\t\t\t\t\tdamageBonus: true,\n\t\t\t\t\t},\n\t\t\t\t\tgroup: \"amy_qingyanmrfz_remove1\",\n\t\t\t\t},\n\t\t\t\tremove1: {\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn !player.hasSkill(\"amy_qingyanmrfz\");\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tplayer.removeSkill(\"amy_qingyanmrfz_damage\");\n\t\t\t\t\t\tplayer.removeMark(\"amy_qingyanmrfz\", false);\n\t\t\t\t\t\tgame.countPlayer(function (current) {\n\t\t\t\t\t\t\tif (current.hasSkill(\"amy_qingyanmrfz\")) current.storage.amy_qingyanmrfz_damage = false;\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tmark: {\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tyingxiaomrfz: {\n\t\t\taudio: 4,\n\t\t\tintro: {\n\t\t\t\tcontent: function (event, player) {\n\t\t\t\t\tif (player.storage.yingxiaomrfz) return \"已发动\";\n\t\t\t\t\tif (!player.storage.yingxiaomrfz) {\n\t\t\t\t\t\tif (player.countMark(\"yingxiaomrfz_mark\") < 5) return \"未发动（不满足发动条件）</br>已累计使用\" + player.countMark(\"yingxiaomrfz_mark\") + \"张【杀】\";\n\t\t\t\t\t\telse return \"未发动（已满足发动条件）\";\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\tmark: true,\n\t\t\tlimited: true,\n\t\t\tanimationStr: \"影宵\",\n\t\t\tanimationColor: \"gold\",\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\n\t\t\tcheck: function (event, player) {\n\t\t\t\treturn game.hasPlayer(function (current) {\n\t\t\t\t\treturn current != player && get.attitude(current, player) < 0 && player.inRange(current);\n\t\t\t\t});\n\t\t\t},\n\t\t\tinit: function (player) {\n\t\t\t\tplayer.storage.yingxiaomrfz = false;\n\t\t\t},\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn !player.storage.yingxiaomrfz && player.countMark(\"yingxiaomrfz_mark\") >= 5;\n\t\t\t},\n\t\t\tcontent: function () {\n\t\t\t\t\"step 0\";\n\t\t\t\tplayer.storage.yingxiaomrfz = true;\n\t\t\t\tplayer.awakenSkill(event.name);\n\t\t\t\tevent.num = 0;\n\t\t\t\t(\"step 1\");\n\t\t\t\tif (event.num < 3) {\n\t\t\t\t\tif (event.num == 2) {\n\t\t\t\t\t\tplayer.addTempSkill(\"yingxiaomrfz_damage\", \"useCardAfter\");\n\t\t\t\t\t\tplayer.addTempSkill(\"yingxiaomrfz_wushi\", \"useCardAfter\");\n\t\t\t\t\t\tplayer.addTempSkill(\"yingxiaomrfz_total\", \"useCardAfter\");\n\t\t\t\t\t\tplayer.chooseUseTarget(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: \"sha\",\n\t\t\t\t\t\t\t\tisCard: true,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\"请选择【杀】的目标\",\n\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tplayer.addTempSkill(\"yingxiaomrfz_total\", \"useCardAfter\");\n\t\t\t\t\t\tplayer.chooseUseTarget(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: \"sha\",\n\t\t\t\t\t\t\t\tnature: event.num == 0 ? \"thunder\" : \"fire\",\n\t\t\t\t\t\t\t\tisCard: true,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\"请选择\" + (event.num == 0 ? \"雷【杀】\" : \"火【杀】\") + \"的目标(下一张使用的牌为：\" + (event.num == 0 ? \"火【杀】\" : \"伤害基数为翻倍且无视防具的【杀】\") + \")\",\n\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t);\n\t\t\t\t\t\tplayer.logSkill(\"yingxiaomrfz\");\n\t\t\t\t\t}\n\t\t\t\t\tevent.num++;\n\t\t\t\t\tif (event.num < 3) event.redo();\n\t\t\t\t}\n\t\t\t\t(\"step 2\");\n\t\t\t\tplayer.draw(player.countMark(\"yingxiaomrfz_total\"));\n\t\t\t\tplayer.addSkill(\"yingxiaomrfz_handlit\");\n\t\t\t\tplayer.addSkill(\"yingxiaomrfz_round2\");\n\t\t\t},\n\t\t\tgroup: \"yingxiaomrfz_time\",\n\t\t\tsubSkill: {\n\t\t\t\tmark: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t},\n\t\t\t\ttime: {\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: { player: \"useCard\" },\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\" && player.countMark(\"yingxiaomrfz_mark\") < 5;\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tplayer.addMark(\"yingxiaomrfz_mark\", false);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdamage: {\n\t\t\t\t\tforced: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: { player: \"useCard2\" },\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\";\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tif (!trigger.baseDamage) trigger.baseDamage = 1;\n\t\t\t\t\t\ttrigger.baseDamage += 2;\n\t\t\t\t\t},\n\t\t\t\t\tai: {\n\t\t\t\t\t\tdamageBonus: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\twushi: {\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"useCardToPlayered\",\n\t\t\t\t\t},\n\t\t\t\t\tfilter: function (event) {\n\t\t\t\t\t\treturn event.card.name == \"sha\";\n\t\t\t\t\t},\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tlogTarget: \"target\",\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\ttrigger.target.addTempSkill(\"qinggang2\");\n\t\t\t\t\t\ttrigger.target.storage.qinggang2.add(trigger.card);\n\t\t\t\t\t\ttrigger.target.markSkill(\"qinggang2\");\n\t\t\t\t\t},\n\t\t\t\t\tai: {\n\t\t\t\t\t\tunequip_ai: true,\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\n\t\t\t\t\t\t\tif (arg && arg.name == \"sha\") return true;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\ttotal: {\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn event.card.name == \"sha\";\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tplayer.addMark(\"yingxiaomrfz_total\", trigger.num, false);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\thandlit: {\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tmod: {\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\n\t\t\t\t\t\t\treturn num + player.countMark(\"yingxiaomrfz_total\");\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tround1: {\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tglobal: \"roundStart\",\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tplayer.addMark(\"yingxiaomrfz_round1\", false);\n\t\t\t\t\t\tif (player.countMark(\"yingxiaomrfz_round1\") > 2) {\n\t\t\t\t\t\t\tplayer.removeSkill(\"yingxiaomrfz_round2\");\n\t\t\t\t\t\t\tplayer.removeMark(\"yingxiaomrfz_round1\", player.countMark(\"yingxiaomrfz_round1\"), false);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tround2: {\n\t\t\t\t\taudio: \"yingxiaomrfz\",\n\t\t\t\t\ttrigger: { source: \"damageBefore\" },\n\t\t\t\t\tforced: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tmark: true,\n\t\t\t\t\tintro: {\n\t\t\t\t\t\tcontent: function (event, player) {\n\t\t\t\t\t\t\treturn \"你造成的伤害均视为体力流失</br>效果剩余时间：\" + (2 - player.countMark(\"yingxiaomrfz_round1\")) + \"轮\";\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tcheck: function () {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t\ttrigger.player.loseHp(trigger.num);\n\t\t\t\t\t},\n\t\t\t\t\tai: {\n\t\t\t\t\t\tjueqing: true,\n\t\t\t\t\t},\n\t\t\t\t\tgroup: \"yingxiaomrfz_round1\",\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\t//芙兰卡\n\t\tjifengmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"useCard2\",\n\t\t\t},\n\t\t\tfilter: function (event, player) {\n\t\t\t\tif (event.targets && event.targets.length > 1) return false;\n\t\t\t\treturn event.cards && event.card.name == \"sha\";\n\t\t\t},\n\t\t\tcheck: function (event, player) {\n\t\t\t\treturn get.attitude(player, event.targets[0]) < 0;\n\t\t\t},\n\t\t\tprompt: function (event, player) {\n\t\t\t\tvar target = event.targets[0],\n\t\t\t\t\tlist = [];\n\t\t\t\tif (!target.hasEmptySlot(2)) list.push(\"无视防具\");\n\t\t\t\tif (target.countCards(\"h\") > 0) list.push(\"此【杀】需要两张闪才可抵消\");\n\t\t\t\tif (target.hujia > 0) list.push(\"无视护甲\");\n\t\t\t\treturn \"【极锋】:是否对\" + get.translation(target) + \"发动‘极锋’？（\" + list + \"）\";\n\t\t\t},\n\t\t\tcontent: function () {\n\t\t\t\tvar target = trigger.targets[0],\n\t\t\t\t\tnum = 0;\n\t\t\t\tif (!target.hasEmptySlot(2)) {\n\t\t\t\t\tnum++;\n\t\t\t\t\ttarget.addTempSkill(\"qinggang2\");\n\t\t\t\t\ttarget.storage.qinggang2.add(trigger.card);\n\t\t\t\t\ttarget.markSkill(\"qinggang2\");\n\t\t\t\t}\n\t\t\t\tif (target.countCards(\"h\") > 0) {\n\t\t\t\t\tnum++;\n\t\t\t\t\tplayer.addTempSkill(\"jifengmrfz_sha\");\n\t\t\t\t\tplayer.storage.jifengmrfz = {\n\t\t\t\t\t\tcard: trigger.card,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (target.hujia > 0) {\n\t\t\t\t\ttarget.addTempSkill(\"jifengmrfz_ighujia\");\n\t\t\t\t\ttarget.storage.jifengmrfz_ighujia.add(trigger.card);\n\t\t\t\t\ttarget.markSkill(\"jifengmrfz_ighujia\");\n\t\t\t\t\tnum++;\n\t\t\t\t}\n\t\t\t\tif (!player.hasSkill(\"jifengmrfz_used\")) {\n\t\t\t\t\tplayer.addTempSkill(\"jifengmrfz_used\", \"phaseEnd\");\n\t\t\t\t\tplayer.draw(3 - num);\n\t\t\t\t}\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\tsha: {\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"useCardToPlayered\",\n\t\t\t\t\t},\n\t\t\t\t\tforced: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\tvar info = player.storage.jifengmrfz;\n\t\t\t\t\t\tif (!event.card || event.card != info.card) return false;\n\t\t\t\t\t\treturn event.card.name == \"sha\" && !event.getParent().directHit.includes(event.target);\n\t\t\t\t\t},\n\t\t\t\t\tlogTarget: \"target\",\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tvar id = trigger.target.playerid;\n\t\t\t\t\t\tvar map = trigger.getParent().customArgs;\n\t\t\t\t\t\tif (!map[id]) map[id] = {};\n\t\t\t\t\t\tif (typeof map[id].shanRequired == \"number\") {\n\t\t\t\t\t\t\tmap[id].shanRequired++;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmap[id].shanRequired = 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete player.storage.jifengmrfz;\n\t\t\t\t\t\tplayer.removeSkill(\"jifengmrfz_sha\");\n\t\t\t\t\t},\n\t\t\t\t\tai: {\n\t\t\t\t\t\tdirectHit_ai: true,\n\t\t\t\t\t\tskillTagFilter: function (player, tag, arg) {\n\t\t\t\t\t\t\tif (arg.card.name != \"sha\" || arg.target.countCards(\"h\", \"shan\") > 1 || get.distance(player, arg.target) > 1) return false;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tused: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t},\n\t\t\t\tighujia: {\n\t\t\t\t\tai: {\n\t\t\t\t\t\tnohujia: true,\n\t\t\t\t\t},\n\t\t\t\t\tinit: function (player, skill) {\n\t\t\t\t\t\tif (!player.storage[skill]) player.storage[skill] = [];\n\t\t\t\t\t},\n\t\t\t\t\tonremove: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: [\"damage\", \"damageCancelled\", \"damageZero\"],\n\t\t\t\t\t\tsource: [\"damage\", \"damageCancelled\", \"damageZero\"],\n\t\t\t\t\t\ttarget: [\"shaMiss\", \"useCardToExcluded\", \"useCardToEnd\", \"eventNeutralized\"],\n\t\t\t\t\t\tglobal: [\"useCardEnd\"],\n\t\t\t\t\t},\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tfirstDo: true,\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn player.storage.jifengmrfz_ighujia && event.card && player.storage.jifengmrfz_ighujia.includes(event.card) && (event.name != \"damage\" || event.notLink());\n\t\t\t\t\t},\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tforced: true,\n\t\t\t\t\tpopup: false,\n\t\t\t\t\tpriority: 12,\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tplayer.storage.jifengmrfz_ighujia.remove(trigger.card);\n\t\t\t\t\t\tif (!player.storage.jifengmrfz_ighujia.length) player.removeSkill(\"jifengmrfz_ighujia\");\n\t\t\t\t\t},\n\t\t\t\t\tmarktext: \"✘\",\n\t\t\t\t\tintro: {\n\t\t\t\t\t\tname: \"✘\",\n\t\t\t\t\t\tcontent: \"当前护甲已失效\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tthreaten: 1.2,\n\t\t\t},\n\t\t},\n\t\txiqiaomrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tplayer: [\"chooseToRespondBegin\", \"chooseToUseBegin\"],\n\t\t\t},\n\t\t\tfilter: function (event, player) {\n\t\t\t\tif (player.hasSkill(\"xiqiaomrfz_used\")) return false;\n\t\t\t\tif (event.responded) return false;\n\t\t\t\tif (!event.filterCard || !event.filterCard({ name: \"shan\" }, player, event)) return false;\n\t\t\t\tif (event.name == \"chooseToRespond\" && !lib.filter.cardRespondable({ name: \"shan\" }, player, event)) return false;\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tcheck: () => 1,\n\t\t\tcontent: function () {\n\t\t\t\t\"step 0\";\n\t\t\t\tplayer.addTempSkill(\"xiqiaomrfz_used\", \"phaseEnd\");\n\t\t\t\tvar next = player.chooseToDiscard(\"he\", true);\n\t\t\t\tnext.set(\"prompt\", \"【细巧】:你可以弃置一张牌，然后摸一张牌并展示之，若类型不同，视为使用或打出一张【闪】\");\n\t\t\t\t(\"step 1\");\n\t\t\t\tif (result.cards) {\n\t\t\t\t\tevent.card = result.cards[0];\n\t\t\t\t\tplayer.draw(\"visible\");\n\t\t\t\t} else event.finish();\n\t\t\t\t(\"step 2\");\n\t\t\t\tvar card = result[0];\n\t\t\t\tvar cardl = event.card;\n\t\t\t\tif (get.type2(card) != get.type2(cardl)) {\n\t\t\t\t\ttrigger.untrigger();\n\t\t\t\t\ttrigger.set(\"responded\", true);\n\t\t\t\t\ttrigger.result = { bool: true, card: { name: \"shan\", isCard: true } };\n\t\t\t\t}\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\tused: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t},\n\t\t\t},\n\t\t\tai: {\n\t\t\t\trespondShan: true,\n\t\t\t\tthreaten: 0.8,\n\t\t\t},\n\t\t},\n\t\t//D32 星极\n\t\ttianyimrfz: {\n\t\t\taudio: 2,\n\t\t\tmark: true,\n\t\t\tlocked: false,\n\t\t\tzhuanhuanji: true,\n\t\t\tmarktext: \"☯\",\n\t\t\tinit: function (player, skill) {\n\t\t\t\tplayer.storage[skill] = true;\n\t\t\t},\n\t\t\tintro: {\n\t\t\t\tcontent: function (storage, player, skill) {\n\t\t\t\t\tif (player.storage.tianyimrfz == true) return \"观看牌堆顶两张牌，并将其置于牌堆顶或牌堆底\"; //阳\n\t\t\t\t\treturn \"进行一次判定，并获得判定牌，本回合此牌视为【闪】，若判定结果为♣，你本局游戏使用【杀】的次数+1（至多+3）\"; //阴\n\t\t\t\t},\n\t\t\t},\n\t\t\ttrigger: { global: \"phaseJudgeBegin\" },\n\t\t\tprompt: function (event, player) {\n\t\t\t\tif (player.storage.tianyimrfz == true)\n\t\t\t\t\tvar str = \"观看牌堆顶两张牌，并将其置于牌堆顶或牌堆底\"; //阳\n\t\t\t\telse var str = \"进行一次判定，并获得判定牌，本回合此牌视为【闪】，若判定结果为♣，你本局游戏使用【杀】的次数+1（至多+3）\"; //阴\n\t\t\t\treturn \"【天仪】:你可以\" + str;\n\t\t\t},\n\t\t\tcallback: function () {\n\t\t\t\tif (event.judgeResult.suit == \"club\") {\n\t\t\t\t\tif (player.countMark(\"tianyimrfz_shacount\") < 3) player.addMark(\"tianyimrfz_shacount\", false);\n\t\t\t\t}\n\t\t\t\tplayer.gain(card, \"gain2\").gaintag.add(\"tianyimrfz\");\n\t\t\t\tplayer.addTempSkill(\"tianyimrfz_remove\", \"phaseEnd\");\n\t\t\t},\n\t\t\tcontent: function () {\n\t\t\t\tif (player.storage.tianyimrfz) player.chooseToGuanxing(2);\n\t\t\t\telse\n\t\t\t\t\tplayer\n\t\t\t\t\t\t.judge(function (card) {\n\t\t\t\t\t\t\tif (get.suit(card) == \"club\") return 0;\n\t\t\t\t\t\t\treturn -4;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.set(\"callback\", lib.skill.tianyimrfz.callback);\n\t\t\t\tplayer.changeZhuanhuanji(\"tianyimrfz\");\n\t\t\t},\n\t\t\tmod: {\n\t\t\t\tcardUsable: function (card, player, num) {\n\t\t\t\t\tif (card.name == \"sha\") return num + player.countMark(\"tianyimrfz_shacount\");\n\t\t\t\t},\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\tshacount: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tintro: {\n\t\t\t\t\t\tcontent: \"使用【杀】的次数+#\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tremove: {\n\t\t\t\t\tonremove: function (player) {\n\t\t\t\t\t\tplayer.removeGaintag(\"tianyimrfz\");\n\t\t\t\t\t},\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tmod: {\n\t\t\t\t\t\tcardname: function (card, player, name) {\n\t\t\t\t\t\t\tif (card.hasGaintag(\"tianyimrfz\")) return \"shan\";\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\thuijianmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { player: \"useCard2\" },\n\t\t\tfilter: function (event, player) {\n\t\t\t\tif (!event.targets || event.targets.length > 1) return false;\n\t\t\t\tif (!player.canUseToAnyone(event.card, true, false)) return false;\n\t\t\t\tif (!player.isPhaseUsing()) return false;\n\t\t\t\tif (player.getCardUsable(\"sha\") < 1) return false;\n\t\t\t\treturn get.type(event.card) == \"trick\" || get.type(event.card) == \"basic\";\n\t\t\t},\n\t\t\tusable: 1,\n\t\t\tdirect: true,\n\t\t\tcontent: function () {\n\t\t\t\t\"step 0\";\n\t\t\t\tplayer\n\t\t\t\t\t.chooseTarget([1, player.getCardUsable(\"sha\")], get.prompt(\"huijianmrfz\"), \"为\" + get.translation(trigger.card) + \"增加至多\" + player.getCardUsable(\"sha\") + \"个目标\", function (card, player, target) {\n\t\t\t\t\t\treturn !_status.event.sourcex.includes(target) && player.canUse(_status.event.card, target);\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"sourcex\", trigger.targets)\n\t\t\t\t\t.set(\"ai\", function (target) {\n\t\t\t\t\t\tvar player = _status.event.player;\n\t\t\t\t\t\treturn get.effect(target, _status.event.card, player, player);\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"card\", trigger.card)\n\t\t\t\t\t.setHiddenSkill(event.name);\n\t\t\t\t(\"step 1\");\n\t\t\t\tif (result.bool) {\n\t\t\t\t\tif (!event.isMine() && !event.isOnline()) game.delayx();\n\t\t\t\t\tfor (var i = 0; i < result.targets.length; i++) {\n\t\t\t\t\t\ttrigger.targets.push(result.targets[i]);\n\t\t\t\t\t\tplayer.line(result.targets[i]);\n\t\t\t\t\t}\n\t\t\t\t\tplayer.logSkill(\"huijianmrfz\");\n\t\t\t\t\tplayer.addMark(\"huijianmrfz_minus\", result.targets.length, false);\n\t\t\t\t\tplayer.addTempSkill(\"huijianmrfz_minus\", \"phaseUseAfter\");\n\t\t\t\t} else {\n\t\t\t\t\tplayer.storage.counttrigger.huijianmrfz--;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\tminus: {\n\t\t\t\t\tonremove: function (player) {\n\t\t\t\t\t\tplayer.removeMark(\"huijuanmrfz_minus\", player.countMark(\"huijuanmrfz_minus\"), false);\n\t\t\t\t\t},\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tmod: {\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num - player.countMark(\"huijianmrfz_minus\");\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tbingmingmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { global: \"roundStart\" },\n\t\t\tfilter: function (event, player) {\n\t\t\t\tif (\n\t\t\t\t\t!game.findPlayer(function (current) {\n\t\t\t\t\t\tcurrent.name == \"xingyuanmrfz\";\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t\t\treturn false;\n\t\t\t\treturn game.roundNumber == 2;\n\t\t\t},\n\t\t\tforced: true,\n\t\t\tcontent: function () {\n\t\t\t\tvar target = game.findPlayer(function (current) {\n\t\t\t\t\tcurrent.name == \"xingyuanmrfz\";\n\t\t\t\t});\n\t\t\t\tvar num1 = player.countCards(\"h\") - target.countCards(\"h\");\n\t\t\t\tvar num2 = player.getHandcardLimit() - target.getHandcardLimit();\n\t\t\t\tif (num1 > 0) {\n\t\t\t\t\tplayer.chooseToDiscard(true, \"【病鸣】:请将手牌调整至\" + num1, num1);\n\t\t\t\t} else if (num1 < 0) player.drawTo(-num1);\n\t\t\t\tif (num2 != 0) {\n\t\t\t\t\tplayer.addMark(\"bingmingmrfz\", false, Math.abs(num2));\n\t\t\t\t}\n\t\t\t},\n\t\t\tmod: {\n\t\t\t\tmaxHandcard: function (player, num) {\n\t\t\t\t\treturn num + player.countMark(\"bingmingmrfz\");\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\t//星源\n\t\tdaoliumrfz: {\n\t\t\taudio: 2,\n\t\t\tenable: \"phaseUse\",\n\t\t\tusable: 2,\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn player.countCards(\"he\") > 0;\n\t\t\t},\n\t\t\tcheck: function (card) {\n\t\t\t\treturn 6 - get.value(card);\n\t\t\t},\n\t\t\tfilterCard: true,\n\t\t\tselectCard: 1,\n\t\t\tfilterTarget: function (card, player, target) {\n\t\t\t\treturn target != player;\n\t\t\t},\n\t\t\tselectTarget: 1,\n\t\t\tlose: false,\n\t\t\tdiscard: false,\n\t\t\tcontent: function () {\n\t\t\t\t\"step 0\";\n\t\t\t\tevent.targetx = target;\n\t\t\t\tevent.target = [];\n\t\t\t\tevent.discard = [];\n\t\t\t\tevent.discard.push(target);\n\t\t\t\tevent.target.push(target.getNext());\n\t\t\t\tevent.target.push(target.getPrevious());\n\t\t\t\tif (event.target.includes(player)) event.target.remove(player);\n\t\t\t\tplayer.give(cards, target);\n\t\t\t\t(\"step 1\");\n\t\t\t\tif (event.target.length && event.targetx.countCards(\"he\") > 0) {\n\t\t\t\t\tevent.targetx.chooseCard(true, \"【导流】:请交给\" + get.translation(event.target[0]) + \"一张牌\", \"he\");\n\t\t\t\t} else event.goto(3);\n\t\t\t\t(\"step 2\");\n\t\t\t\tif (result.cards) {\n\t\t\t\t\tvar card = result.cards[0];\n\t\t\t\t\tevent.targetx.give(card, event.target[0]);\n\t\t\t\t\tevent.discard.push(event.target[0]);\n\t\t\t\t}\n\t\t\t\tevent.target.remove(event.target[0]);\n\t\t\t\tevent.goto(1);\n\t\t\t\t(\"step 3\");\n\t\t\t\tif (event.discard.length) {\n\t\t\t\t\tif (event.discard[0].countCards(\"he\") > 0) event.discard[0].chooseToDiscard(true, \"he\", \"【导流】:请弃置一张牌\");\n\t\t\t\t\tevent.discard.remove(event.discard[0]);\n\t\t\t\t\tevent.redo();\n\t\t\t\t}\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 4,\n\t\t\t\texpose: 0.1,\n\t\t\t\tresult: {\n\t\t\t\t\ttarget: function (player, target) {\n\t\t\t\t\t\tvar pre = target.getPrevious(),\n\t\t\t\t\t\t\tnet = target.getNext(),\n\t\t\t\t\t\t\tnum = 0;\n\t\t\t\t\t\tif (game.countPlayer() == 2) return 0;\n\t\t\t\t\t\tif (get.attitude(pre, player) > 2 && get.attitude(net, player) > 2) return 0;\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tgewumrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tglobal: \"gainEnd\",\n\t\t\t},\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn event.source && event.source.isIn() && event.source == player && event.cards.length >= 1;\n\t\t\t},\n\t\t\tdirect: true,\n\t\t\tlogTarget: \"source\",\n\t\t\tcontent: function () {\n\t\t\t\tif (player.countMark(\"gewumrfz\") < 5) {\n\t\t\t\t\tplayer.addMark(\"gewumrfz\", false);\n\t\t\t\t\tplayer.logSkill(\"gewumrfz\");\n\t\t\t\t}\n\t\t\t\tfor (var i = 0; i < trigger.cards.length; i++) {\n\t\t\t\t\tif (!player.getStorage(\"gewumrfz_mark\").includes(trigger.cards[i].name)) {\n\t\t\t\t\t\tplayer.markAuto(\"gewumrfz_mark\", [trigger.cards[i].name]);\n\t\t\t\t\t\tif (player.storage.gewumrfz_mark.length % 2 == 0) {\n\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t\tplayer.logSkill(\"gewumrfz\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (player.storage.gewumrfz_mark.length % 4 == 0) {\n\t\t\t\t\t\t\tplayer.addMark(\"gewumrfz_draw\", false);\n\t\t\t\t\t\t\tplayer.logSkill(\"gewumrfz\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tmod: {\n\t\t\t\tmaxHandcard: function (player, num) {\n\t\t\t\t\treturn num + player.countMark(\"gewumrfz\");\n\t\t\t\t},\n\t\t\t},\n\t\t\tgroup: [\"gewumrfz_mark\", \"gewumrfz_draw\"],\n\t\t\tsubSkill: {\n\t\t\t\tmark: {\n\t\t\t\t\tintro: {\n\t\t\t\t\t\tcontent: function (event, player) {\n\t\t\t\t\t\t\treturn \"记录的牌名：\" + get.translation(player.storage.gewumrfz_mark) + \"</br>\" + (player.countMark(\"gewumrfz_draw\") > 0 ? \"额定摸牌数+\" + player.countMark(\"gewumrfz_draw\") : \"\");\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tonremove: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t},\n\t\t\t\tdraw: {\n\t\t\t\t\taudio: \"gewumrfz\",\n\t\t\t\t\tforced: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn player.countMark(\"gewumrfz_draw\") > 0;\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\ttrigger.num += player.countMark(\"gewumrfz_draw\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\t//战车\n\t\tjiqiangmrfz: {\n\t\t\taudio: 2,\n\t\t\tderivation: [\"DP27mrfz\"],\n\t\t\ttrigger: { global: \"roundStart\" },\n\t\t\tforced: true,\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn !player.isDisabled(1) && (event.name != \"phase\" || game.phaseNumber == 0);\n\t\t\t},\n\t\t\tcontent: function () {\n\t\t\t\tvar card = game.createCard(\"DP27mrfz\", \"diamond\", 13);\n\t\t\t\tplayer.$gain2(card);\n\t\t\t\tgame.delayx();\n\t\t\t\tplayer.equip(card);\n\t\t\t},\n\t\t\tgroup: \"jiqiangmrfz_get\",\n\t\t\tsubSkill: {\n\t\t\t\tget: {\n\t\t\t\t\taudio: \"jiqiangmrfz\",\n\t\t\t\t\tforced: true,\n\t\t\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t!player.isDisabled(1) &&\n\t\t\t\t\t\t\tplayer.getCards(\"e\", function (card) {\n\t\t\t\t\t\t\t\treturn get.name(card) == \"DP27mrfz\";\n\t\t\t\t\t\t\t}).length == 0\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tvar card = game.createCard(\"DP27mrfz\", \"diamond\", 13);\n\t\t\t\t\t\tplayer.$gain2(card);\n\t\t\t\t\t\tgame.delayx();\n\t\t\t\t\t\tplayer.equip(card);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tqingxiemrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { player: \"phaseDrawEnd\" },\n\t\t\tfirstDo: true,\n\t\t\tfilter: function (event, player) {\n\t\t\t\tif (player.skipList.includes(\"phaseUse\")) return false;\n\t\t\t\treturn (\n\t\t\t\t\tgame.countPlayer(function (current) {\n\t\t\t\t\t\treturn player.inRangeOf(current) && current != player;\n\t\t\t\t\t}) > 0\n\t\t\t\t);\n\t\t\t},\n\t\t\tcheck: function (event, player) {\n\t\t\t\tif (get.value(player.getCards(\"h\")) >= 10) return false;\n\t\t\t\tif (\n\t\t\t\t\tgame.countPlayer(function (current) {\n\t\t\t\t\t\treturn player.inRangeOf(current) && current != player && get.attitude(player, current) < 0;\n\t\t\t\t\t}) < 1\n\t\t\t\t)\n\t\t\t\t\treturn false;\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tcontent: function () {\n\t\t\t\t\"step 0\";\n\t\t\t\tvar next = player.chooseTarget(\"【倾泻】:请选择一名攻击范围内的其他角色\", true, function (card, target, player) {\n\t\t\t\t\treturn target != player && player.inRangeOf(target);\n\t\t\t\t});\n\t\t\t\tnext.ai = function (target) {\n\t\t\t\t\treturn get.effect(target, { name: \"sha\" }, _status.event.player);\n\t\t\t\t};\n\t\t\t\tevent.num = 0;\n\t\t\t\tevent.skip = 0;\n\t\t\t\t(\"step 1\");\n\t\t\t\tif (result.targets) {\n\t\t\t\t\tevent.target = result.targets[0];\n\t\t\t\t} else event.finish();\n\t\t\t\t(\"step 2\");\n\t\t\t\tif (!event.target.isAlive()) {\n\t\t\t\t\tevent.goto(4);\n\t\t\t\t} else\n\t\t\t\t\tplayer.judge(function (card) {\n\t\t\t\t\t\tvar color = get.color(card);\n\t\t\t\t\t\tif (color == \"red\") return 4;\n\t\t\t\t\t\treturn -4;\n\t\t\t\t\t});\n\t\t\t\t(\"step 3\");\n\t\t\t\tif (result.color == \"red\") {\n\t\t\t\t\tplayer.useCard({ name: \"sha\", isCard: true }, false, event.target);\n\t\t\t\t\tevent.skip++;\n\t\t\t\t}\n\t\t\t\tevent.num++;\n\t\t\t\tif (event.num < 3) event.goto(2);\n\t\t\t\t(\"step 4\");\n\t\t\t\tif (event.skip > 1) {\n\t\t\t\t\tplayer.skip(\"phaseUse\");\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\t//闪盾 闪击\n\t\tshandunmrfz: {\n\t\t\tmod: {\n\t\t\t\tglobalFrom: function (from, to, distance) {\n\t\t\t\t\tif (from.isAction()) return distance - 1;\n\t\t\t\t\treturn distance + 1;\n\t\t\t\t},\n\t\t\t\tglobalTo: function (from, to, distance) {\n\t\t\t\t\tif (!to.isAction()) return distance + 1;\n\t\t\t\t\treturn distance - 1;\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\txuanmumrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { player: \"useCard2\" },\n\t\t\tfilter: function (event, player) {\n\t\t\t\tif (player.storage.xuanmumrfz_roundcount >= 4) return false;\n\t\t\t\tif (!event.targets || event.targets.length > 1) return false;\n\t\t\t\tif (get.distance(player, event.targets[0]) > 1) return false;\n\t\t\t\tif (event.targets[0].countCards(\"h\") < 1) return false;\n\t\t\t\tvar type = get.type(event.card);\n\t\t\t\treturn event.targets[0] != player && (type == \"basic\" || type == \"trick\");\n\t\t\t},\n\t\t\tcheck: function (event, player) {\n\t\t\t\treturn get.attitude(event.targets[0], player) < 0;\n\t\t\t},\n\t\t\tcontent: function () {\n\t\t\t\t\"step 0\";\n\t\t\t\tif (!player.storage.xuanmumrfz_roundcount) player.storage.xuanmumrfz_roundcount = 0;\n\t\t\t\tplayer.storage.xuanmumrfz_roundcount++;\n\t\t\t\tplayer.choosePlayerCard(trigger.targets[0], true, \"h\");\n\t\t\t\t(\"step 1\");\n\t\t\t\tif (result.cards) {\n\t\t\t\t\tvar card = result.cards[0];\n\t\t\t\t\tevent.card = result.cards[0];\n\t\t\t\t\tplayer.showCards(card, get.translation(player) + \"对\" + get.translation(trigger.target) + \"发动了【炫目】\");\n\t\t\t\t}\n\t\t\t\t(\"step 2\");\n\t\t\t\tif (!canRespond(trigger.card, event.card)) {\n\t\t\t\t\ttrigger.directHit.addArray(\n\t\t\t\t\t\tgame.filterPlayer(function (current) {\n\t\t\t\t\t\t\treturn current != player && current == trigger.targets[0];\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t\tif (trigger.targets[0].countGainableCards(player, \"h\")) {\n\t\t\t\t\t\tplayer.gainPlayerCard(\"h\", trigger.targets[0], true);\n\t\t\t\t\t}\n\t\t\t\t\tif (Math.random() < 0.25) trigger.targets[0].chat(\"有闪盾！\");\n\t\t\t\t}\n\n\t\t\t\tfunction canRespond(card1, card2) {\n\t\t\t\t\tif (typeof card1 === undefined || typeof card2 === undefined) return false;\n\t\t\t\t\t/**@ts-ignore */\n\t\t\t\t\tvar info1 = get.name(card1),\n\t\t\t\t\t\t/** @ts-ignore */\n\t\t\t\t\t\tinfo2 = get.name(card2);\n\t\t\t\t\tvar tmp_bool = false;\n\t\t\t\t\tif ((info1 == \"sha\" || info1 == \"wanjian\") && info2 == \"shan\") tmp_bool = true;\n\t\t\t\t\tif ((info1 == \"juedou\" || info1 == \"nanman\") && info2 == \"sha\") tmp_bool = true;\n\t\t\t\t\t/**@ts-ignore */\n\t\t\t\t\tif (get.type(card1) == \"trick\" && info2 == \"wuxie\") tmp_bool = true;\n\t\t\t\t\tvar str = (tmp_bool == true ? \"\" : \"不\") + \"能响应\";\n\t\t\t\t\tinfo1 = \"<font color=rgb(255,255,122)>【\" + get.translation(info1) + \"】</font>\";\n\t\t\t\t\tinfo2 = \"<font color=rgb(255,255,122)>【\" + get.translation(info2) + \"】</font>\";\n\t\t\t\t\tgame.log(info2, str, info1);\n\t\t\t\t\treturn tmp_bool;\n\t\t\t\t}\n\t\t\t},\n\t\t\tgroup: \"xuanmumrfz_roundcount\",\n\t\t\tsubSkill: {\n\t\t\t\troundcount: {\n\t\t\t\t\tmark: true,\n\t\t\t\t\tinit: player => {\n\t\t\t\t\t\tplayer.storage.xuanmumrfz_roundcount = 0;\n\t\t\t\t\t\tplayer.markSkill(\"xuanmumrfz_roundcount\");\n\t\t\t\t\t},\n\t\t\t\t\tonremove: true,\n\t\t\t\t\tintro: {\n\t\t\t\t\t\tcontent: function (event, player) {\n\t\t\t\t\t\t\treturn player.storage.xuanmumrfz_roundcount + \"/4\";\n\t\t\t\t\t\t},\n\t\t\t\t\t\tmarkcount: function (event, player) {\n\t\t\t\t\t\t\tif (!player.storage.xuanmumrfz_roundcount) return 4;\n\t\t\t\t\t\t\treturn 4 - player.storage.xuanmumrfz_roundcount;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tglobal: \"roundStart\",\n\t\t\t\t\t},\n\t\t\t\t\tforced: true,\n\t\t\t\t\tpopup: false,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcontent: () => {\n\t\t\t\t\t\tplayer.storage.xuanmumrfz_roundcount = 0;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tchuandunmrfz: {\n\t\t\taudio: 2,\n\t\t\tforced: true,\n\t\t\ttrigger: { player: \"damageEnd\" },\n\t\t\tcontent: function () {\n\t\t\t\t\"step 0\";\n\t\t\t\tplayer.draw(\"visible\");\n\t\t\t\t(\"step 1\");\n\t\t\t\tif (result) {\n\t\t\t\t\tvar card = result[0];\n\t\t\t\t\tif ((card.suit == \"heart\" || card.suit == \"spade\") && card.number == 6) {\n\t\t\t\t\t\tplayer.loseHp(player.hp);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\n\t\t//霜华 夹子妹\n\t\ttadianmrfz: {\n\t\t\tmarkimage: \"extension/WhichWay/image/orther/shuanghuajiazimrfz.png\",\n\t\t\tintro: {\n\t\t\t\tmarkcount: \"expansion\",\n\t\t\t\tmark: function (dialog, content, player) {\n\t\t\t\t\tvar content = player.getExpansions(\"tadianmrfz\");\n\t\t\t\t\tif (content && content.length) {\n\t\t\t\t\t\tif (player == game.me || player.isUnderControl()) {\n\t\t\t\t\t\t\tdialog.addAuto(content);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn \"共有\" + get.cnNumber(content.length) + \"张踏垫\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcontent: function (content, player) {\n\t\t\t\t\tvar content = player.getExpansions(\"tadianmrfz\");\n\t\t\t\t\tif (content && content.length) {\n\t\t\t\t\t\tif (player == game.me || player.isUnderControl()) {\n\t\t\t\t\t\t\treturn get.translation(content);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn \"共有\" + get.cnNumber(content.length) + \"张踏垫\";\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\tonremove: function (player, skill) {\n\t\t\t\tvar cards = player.getExpansions(skill);\n\t\t\t\tif (cards.length) player.loseToDiscardpile(cards);\n\t\t\t},\n\t\t\taudio: 2,\n\t\t\ttrigger: { global: \"roundStart\" },\n\t\t\tforced: true,\n\t\t\tcontent: function () {\n\t\t\t\t\"step 0\";\n\t\t\t\tif (player.getExpansions(\"tadianmrfz\").length > 0) {\n\t\t\t\t\tplayer.gain(player.getExpansions(\"tadianmrfz\"), \"gain2\");\n\t\t\t\t}\n\t\t\t\t(\"step 1\");\n\t\t\t\tplayer.draw(3);\n\t\t\t\tplayer.chooseCard(true, 3, \"【踏垫】:请选择将三张手牌置于你武将牌上\").set(\"ai\", function (card) {\n\t\t\t\t\treturn 8 - get.value(card);\n\t\t\t\t});\n\t\t\t\t(\"step 2\");\n\t\t\t\tif (result.cards) {\n\t\t\t\t\tplayer.addToExpansion(result.cards, player, \"giveAuto\").gaintag.add(\"tadianmrfz\");\n\t\t\t\t}\n\t\t\t},\n\t\t\tgroup: \"tadianmrfz_tri\",\n\t\t\tsubSkill: {\n\t\t\t\trec: {\n\t\t\t\t\ttrigger: { player: \"dyingAfter\" },\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t\tplayer.removeSkill(\"tadianmrfz_rec\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\ttri: {\n\t\t\t\t\taudio: \"tadianmrfz\",\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\ttarget: \"useCardToTargeted\",\n\t\t\t\t\t},\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\tif (!event.card || player.getExpansions(\"tadianmrfz\").length < 1) return false;\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\tplayer.getExpansions(\"tadianmrfz\").filter(function (magic) {\n\t\t\t\t\t\t\t\treturn magic.name == event.card.name;\n\t\t\t\t\t\t\t}).length > 0\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t\tcheck: function (event, player) {\n\t\t\t\t\t\treturn get.attitude(player, event.player) < 0;\n\t\t\t\t\t},\n\t\t\t\t\tprompt: function (event, player) {\n\t\t\t\t\t\treturn \"【踏垫】:是否弃置一张‘踏垫’，令\" + get.translation(event.player) + \"流失所有体力？\";\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\t\"step 0\";\n\t\t\t\t\t\tvar cards = player.getExpansions(\"tadianmrfz\").filter(function (magic) {\n\t\t\t\t\t\t\treturn get.name(magic) == get.name(trigger.card);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (cards.length) player.chooseButton([\"你可以选择移去一张与其使用的牌的牌名相同的“踏垫”，令其流失所有体力\", cards]);\n\t\t\t\t\t\telse event.finish();\n\t\t\t\t\t\t(\"step 1\");\n\t\t\t\t\t\tif (result.bool) {\n\t\t\t\t\t\t\tplayer.loseToDiscardpile(result.links);\n\t\t\t\t\t\t\tplayer.draw(3);\n\t\t\t\t\t\t\ttrigger.player.loseHp(trigger.player.hp);\n\t\t\t\t\t\t\ttrigger.player.addSkill(\"tadianmrfz_rec\");\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\txinjimrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"phaseZhunbeiBegin\",\n\t\t\t},\n\t\t\tdirect: true,\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn player.getExpansions(\"tadianmrfz\").length > 0 && player.countCards(\"h\") > 0;\n\t\t\t},\n\t\t\tcontent: function () {\n\t\t\t\t\"step 0\";\n\t\t\t\tvar cards = player.getExpansions(\"tadianmrfz\");\n\t\t\t\tif (!cards.length || !player.countCards(\"h\")) {\n\t\t\t\t\tevent.finish();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar next = player.chooseToMove(\"【踏垫】：是否交换“踏垫”和手牌？\");\n\t\t\t\tnext.set(\"list\", [\n\t\t\t\t\t[get.translation(player) + \"（你）的‘踏垫’\", cards],\n\t\t\t\t\t[\"手牌区\", player.getCards(\"h\")],\n\t\t\t\t]);\n\t\t\t\tnext.set(\"filterMove\", function (from, to) {\n\t\t\t\t\treturn typeof to != \"number\";\n\t\t\t\t});\n\t\t\t\tnext.set(\"processAI\", function (list) {\n\t\t\t\t\tvar player = _status.event.player,\n\t\t\t\t\t\tcards = list[0][1].concat(list[1][1]).sort(function (a, b) {\n\t\t\t\t\t\t\treturn get.value(a) - get.value(b);\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tcards2 = cards.splice(0, player.getExpansions(\"tadianmrfz\").length);\n\t\t\t\t\treturn [cards2, cards];\n\t\t\t\t});\n\t\t\t\t(\"step 1\");\n\t\t\t\tif (result.bool) {\n\t\t\t\t\tvar pushs = result.moved[0],\n\t\t\t\t\t\tgains = result.moved[1];\n\t\t\t\t\tpushs.removeArray(player.getExpansions(\"tadianmrfz\"));\n\t\t\t\t\tgains.removeArray(player.getCards(\"h\"));\n\t\t\t\t\tif (!pushs.length || pushs.length != gains.length) return;\n\t\t\t\t\tplayer.logSkill(\"tadianmrfz\");\n\t\t\t\t\tplayer.addToExpansion(pushs, player, \"giveAuto\").gaintag.add(\"tadianmrfz\");\n\t\t\t\t\tgame.log(player, \"交换了手牌区与‘踏垫’的牌\");\n\t\t\t\t\tplayer.gain(gains, \"draw\");\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\t//柏喙\n\t\tyirenmrfz: {\n\t\t\taudio: 4,\n\t\t\tchargeGet: 1,\n\t\t\tchargeSkill: true,\n\t\t\tforced: true,\n\t\t\tonremove: true,\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"phaseJieshuBegin\",\n\t\t\t},\n\t\t\tfilter: function (event, player) {\n\t\t\t\tvar num = 0;\n\t\t\t\tvar history = player.getHistory(\"useCard\");\n\t\t\t\tfor (var i = 0; i < history.length; i++) {\n\t\t\t\t\tif (history[i].card.name == \"sha\" && history[i].isPhaseUsing()) {\n\t\t\t\t\t\tnum++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (player.countMark(\"charge\") + player.getCardUsable(\"sha\") - num >= 15) return false;\n\t\t\t\treturn player.getCardUsable(\"sha\") - num > 0;\n\t\t\t},\n\t\t\tcontent: function () {\n\t\t\t\tvar num = 0;\n\t\t\t\tvar history = player.getHistory(\"useCard\");\n\t\t\t\tfor (var i = 0; i < history.length; i++) {\n\t\t\t\t\tif (history[i].card.name == \"sha\" && history[i].isPhaseUsing()) {\n\t\t\t\t\t\tnum++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tnum = player.getCardUsable(\"sha\") - num;\n\t\t\t\tnum = Math.min(num, 15 - player.countMark(\"charge\"));\n\t\t\t\tplayer.addMark(\"charge\", num);\n\t\t\t},\n\t\t\tgroup: \"yirenmrfz_use\",\n\t\t\tsubSkill: {\n\t\t\t\tlim: {\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tonremove: true,\n\t\t\t\t\tintro: {\n\t\t\t\t\t\tcontent: \"下回合使用【杀】的次数-#\",\n\t\t\t\t\t},\n\t\t\t\t\tmod: {\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num - player.countMark(\"yirenmrfz_lim\");\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tuse: {\n\t\t\t\t\tinit: (player, skill) => (player.storage[skill] = 1),\n\t\t\t\t\taudio: \"yirenmrfz\",\n\t\t\t\t\tenable: \"phaseUse\",\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\tif (player.countMark(\"charge\") < player.storage.yirenmrfz_use) return false;\n\t\t\t\t\t\tif (player.countCards(\"h\") < 2) return false;\n\t\t\t\t\t\treturn game.hasPlayer(function (current) {\n\t\t\t\t\t\t\treturn current != player && player.canUse(\"sha\", current);\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tselectCard: 2,\n\t\t\t\t\tposition: \"h\",\n\t\t\t\t\tfilterCard: true,\n\t\t\t\t\tselectTarget: [1, 2],\n\t\t\t\t\tfilterTarget: function (card, player, target) {\n\t\t\t\t\t\treturn player.canUse(\"sha\", target) === true && target != player;\n\t\t\t\t\t},\n\t\t\t\t\tmultitarget: true,\n\t\t\t\t\tmultiline: true,\n\t\t\t\t\tcheck: function (card) {\n\t\t\t\t\t\treturn 8 - get.value(card);\n\t\t\t\t\t},\n\t\t\t\t\tprompt: \"【异刃】：请弃置两张手牌并选择至多两名角色\",\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tfor (i of targets) {\n\t\t\t\t\t\t\tif (player.canUse(\"sha\", i)) player.useCard({ name: \"sha\", isCard: true }, i, false);\n\t\t\t\t\t\t\ti.addTempSkill(\"yirenmrfz_lim\", { player: \"phaseEnd\" });\n\t\t\t\t\t\t\ti.addMark(\"yirenmrfz_lim\", false);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.removeMark(\"charge\", player.storage.yirenmrfz_use);\n\t\t\t\t\t\tplayer.storage.yirenmrfz_use++;\n\t\t\t\t\t},\n\t\t\t\t\tai: {\n\t\t\t\t\t\torder: function (item, player) {\n\t\t\t\t\t\t\tif (player.hasSkillTag(\"presha\", true, null, true)) return 10;\n\t\t\t\t\t\t\tif (game.hasNature(item, \"linked\")) {\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\n\t\t\t\t\t\t\t\t\t\treturn current != player && current.isLinked() && player.canUse(item, current, null, true) && get.effect(current, item, player, player) > 0 && lib.card.sha.ai.canLink(player, current, item);\n\t\t\t\t\t\t\t\t\t}) &&\n\t\t\t\t\t\t\t\t\tgame.countPlayer(function (current) {\n\t\t\t\t\t\t\t\t\t\treturn current.isLinked() && get.damageEffect(current, player, player, get.nature(item)) > 0;\n\t\t\t\t\t\t\t\t\t}) > 1\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\treturn 3.1;\n\t\t\t\t\t\t\t\treturn 3;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 3.05;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tresult: {\n\t\t\t\t\t\t\ttarget: function (player, target) {\n\t\t\t\t\t\t\t\tvar enemyIR = game.filterPlayer(function (current) {\n\t\t\t\t\t\t\t\t\treturn current != player && get.attitude(player, current) < 0 && player.canUse(\"sha\", current);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif (enemyIR.length < 1) return 0;\n\t\t\t\t\t\t\t\telse if (enemyIR.length == 1) {\n\t\t\t\t\t\t\t\t\tif (target.hp <= 2) return -4;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tshehunmrfz: {\n\t\t\ttrigger: {\n\t\t\t\tsource: \"damageEnd\",\n\t\t\t},\n\t\t\tintro: {\n\t\t\t\tcontent: \"使用【杀】的次数+#\",\n\t\t\t},\n\t\t\tonremove: true,\n\t\t\tforced: true,\n\t\t\tpopup: false,\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn player.countMark(\"shehunmrfz\") < 5;\n\t\t\t},\n\t\t\tcontent: function () {\n\t\t\t\tvar mark = player.countMark(\"shehunmrfz\");\n\t\t\t\tvar num = trigger.num;\n\t\t\t\tif (mark + num > 5) var add = 5 - mark;\n\t\t\t\telse var add = num;\n\t\t\t\tplayer.addMark(\"shehunmrfz\", add, false);\n\t\t\t},\n\t\t\tmod: {\n\t\t\t\tcardUsable: function (card, player, num) {\n\t\t\t\t\tif (card.name == \"sha\") return num + player.countMark(\"shehunmrfz\");\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\t//白面鸮\n\t\tjinaomrfz: {\n\t\t\taudio: 2,\n\t\t\tmark: true,\n\t\t\tmarktext: \"机脑\",\n\t\t\tintro: {\n\t\t\t\tcontent: function (event, player) {\n\t\t\t\t\tvar storage = player.storage.jinaomrfz;\n\t\t\t\t\tif (storage == true) return \"递增\";\n\t\t\t\t\tif (storage == false) return \"递减\";\n\t\t\t\t\treturn \"无限制\";\n\t\t\t\t},\n\t\t\t},\n\t\t\ttrigger: { player: \"useCardAfter\" },\n\t\t\tfilter: function (event, player) {\n\t\t\t\tvar history = player.getHistory(\"useCard\");\n\t\t\t\tif (history.indexOf(event) != 1) return false;\n\t\t\t\treturn history[0].card.number != undefined && history[1].card.number != undefined;\n\t\t\t},\n\t\t\tdirect: true,\n\t\t\tcontent: function () {\n\t\t\t\tvar history = player.getHistory(\"useCard\");\n\t\t\t\tif (history[0].card.number < history[1].card.number) {\n\t\t\t\t\tplayer.storage.jinaomrfz = true;\n\t\t\t\t\tplayer.marks.jinaomrfz.innerText = \"递增\";\n\t\t\t\t} else {\n\t\t\t\t\tplayer.storage.jinaomrfz = false;\n\t\t\t\t\tplayer.marks.jinaomrfz.innerText = \"递减\";\n\t\t\t\t}\n\t\t\t\tplayer.storage.jinaomrfz_lim = history[1].card.number;\n\t\t\t\tplayer.addTempSkill(\"jinaomrfz_lim\", \"phaseEnd\");\n\t\t\t},\n\t\t\tgroup: [\"jinaomrfz_draw\"],\n\t\t\tsubSkill: {\n\t\t\t\thandlit: {\n\t\t\t\t\tonremove: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tintro: {\n\t\t\t\t\t\tcontent: \"手牌上限+#\",\n\t\t\t\t\t},\n\t\t\t\t\tmod: {\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\n\t\t\t\t\t\t\treturn num + player.countMark(\"jinaomrfz_handlit\");\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdraw: {\n\t\t\t\t\ttrigger: { player: \"useCardAfter\" },\n\t\t\t\t\tlastDo: true,\n\t\t\t\t\tforced: true,\n\t\t\t\t\taudio: \"jinaomrfz\",\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\tvar history = player.getHistory(\"useCard\");\n\t\t\t\t\t\tif (history.length < 2) return false;\n\t\t\t\t\t\tif (!history[history.length - 2].card.color || get.color(event.card) == \"none\") return false;\n\t\t\t\t\t\t//console.log(history[history.length-2].card.color);console.log(get.color(event.card));\n\t\t\t\t\t\treturn history[history.length - 2].card.color == get.color(event.card);\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tvar color = get.color(trigger.card);\n\t\t\t\t\t\tif (color == \"red\") player.draw(2);\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tplayer.addTempSkill(\"jinaomrfz_handlit\", \"phaseEnd\");\n\t\t\t\t\t\t\tplayer.addMark(\"jinaomrfz_handlit\", false);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tlim: {\n\t\t\t\t\tonremove: function (player) {\n\t\t\t\t\t\tplayer.marks.jinaomrfz.text.innerText = \"机脑\";\n\t\t\t\t\t\tdelete player.storage.jinaomrfz;\n\t\t\t\t\t\tdelete player.storage.jinaomrfz_lim;\n\t\t\t\t\t},\n\t\t\t\t\tdirect: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: { player: \"useCardAfter\" },\n\t\t\t\t\tfirstDo: true,\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\tif (!event.card.number) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tplayer.storage.jinaomrfz_lim = trigger.card.number;\n\t\t\t\t\t\tvar cards = player.getCards(\"h\");\n\t\t\t\t\t\tvar max, min;\n\t\t\t\t\t\tfor (var i = 0; i < cards.length; i++) {\n\t\t\t\t\t\t\tvar num = cards[i].number;\n\t\t\t\t\t\t\tif (i == 0) {\n\t\t\t\t\t\t\t\tmax = num;\n\t\t\t\t\t\t\t\tmin = num;\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (num > max) max = num;\n\t\t\t\t\t\t\tif (min > num) min = num;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (trigger.card.number >= max) {\n\t\t\t\t\t\t\tplayer.storage.jinaomrfz = false;\n\t\t\t\t\t\t\tplayer.marks.jinaomrfz.text.innerText = \"递减\";\n\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t\tplayer.logSkill(\"jinaomrfz\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (trigger.card.number <= min) {\n\t\t\t\t\t\t\tplayer.storage.jinaomrfz = true;\n\t\t\t\t\t\t\tplayer.marks.jinaomrfz.text.innerText = \"递增\";\n\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t\tplayer.logSkill(\"jinaomrfz\");\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tmod: {\n\t\t\t\t\t\tcardEnabled2: function (card, player) {\n\t\t\t\t\t\t\tif (player.storage.jinaomrfz == true) {\n\t\t\t\t\t\t\t\tif (card.number && card.number <= player.storage.jinaomrfz_lim) return false;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (card.number && card.number >= player.storage.jinaomrfz_lim) return false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\twutaimrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { player: \"phaseEnd\" },\n\t\t\tdirect: true,\n\t\t\tfilter: function (event, player) {\n\t\t\t\tvar cards = player.getCards(\"h\");\n\t\t\t\tif (cards.length < 2) return false;\n\t\t\t\tfor (var i = 0; i < cards.length; i++) {\n\t\t\t\t\tif (i == 0) {\n\t\t\t\t\t\tvar tmp_cards = cards[i];\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif (get.type2(tmp_cards) != get.type2(cards[i])) return true;\n\t\t\t\t\tif (get.color(tmp_cards) != get.color(cards[i])) return true;\n\t\t\t\t\ttmp_cards = cards[i];\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tcontent: function () {\n\t\t\t\t\"step 0\";\n\t\t\t\tplayer\n\t\t\t\t\t.chooseToDiscard(2, \"h\", false, \"【五肽】：你可以弃置两张类型或颜色不相同的手牌并选择一名角色，直到你的下个回合开始，其每回合第一次受到的伤害-1\", function (card) {\n\t\t\t\t\t\tif (ui.selected.cards.length == 0) return true;\n\t\t\t\t\t\tif (ui.selected.cards.length) {\n\t\t\t\t\t\t\treturn get.type2(card, player) != get.type2(ui.selected.cards[0], player) || get.color(card, player) != get.color(ui.selected.cards[0], player);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"complexCard\", true)\n\t\t\t\t\t.set(\"ai\", function (card) {\n\t\t\t\t\t\treturn 10 - get.value(card);\n\t\t\t\t\t});\n\t\t\t\t(\"step 1\");\n\t\t\t\tif (result.bool) {\n\t\t\t\t\tplayer.chooseTarget(\"【五肽】：请选择一名角色\", true, function (card, player, target) {\n\t\t\t\t\t\treturn !target.hasSkill(\"wutaimrfz_eff\");\n\t\t\t\t\t}).ai = function (target) {\n\t\t\t\t\t\tvar att = get.attitude(player, target);\n\t\t\t\t\t\tif (target.hp < 3) att /= 1.5;\n\t\t\t\t\t\treturn att;\n\t\t\t\t\t};\n\t\t\t\t} else event.finish();\n\t\t\t\t(\"step 2\");\n\t\t\t\tif (result.targets) {\n\t\t\t\t\tplayer.logSkill(\"wutaimrfz_eff\", result.targets[0]);\n\t\t\t\t\tplayer.addTempSkill(\"wutaimrfz_eff\", { player: \"phaseBegin\" });\n\t\t\t\t\tplayer.storage.wutaimrfz_eff = result.targets[0];\n\t\t\t\t}\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\tmark: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t},\n\t\t\t\teff: {\n\t\t\t\t\tonremove: true,\n\t\t\t\t\taudio: \"wutaimrfz\",\n\t\t\t\t\tmark: true,\n\t\t\t\t\tintro: {\n\t\t\t\t\t\tcontent: function (event, player) {\n\t\t\t\t\t\t\tvar char = get.translation(player.storage.wutaimrfz_eff);\n\t\t\t\t\t\t\tif (player.hasSkill(\"wutaimrfz_mark\")) return \"本回合\" + char + \"已触发过此效果\";\n\t\t\t\t\t\t\treturn char + \"受到的伤害-1\";\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tglobal: \"damageBegin\",\n\t\t\t\t\t},\n\t\t\t\t\tforced: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tlogTarget: \"player\",\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\tif (player.hasSkill(\"wutaimrfz_mark\")) return false;\n\t\t\t\t\t\treturn event.player == player.storage.wutaimrfz_eff;\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tplayer.addTempSkill(\"wutaimrfz_mark\", \"phaseEnd\");\n\t\t\t\t\t\ttrigger.num--;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\t//刺玫\n\t\thuabumrfz: {\n\t\t\taudio: 2,\n\t\t\tglobal: \"huabumrfz_eff\",\n\t\t\tsubSkill: {\n\t\t\t\teff: {\n\t\t\t\t\tenable: \"phaseUse\",\n\t\t\t\t\tusable: 1,\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t!player.hasSkill(\"huabumrfz\") &&\n\t\t\t\t\t\t\tgame.hasPlayer(current => {\n\t\t\t\t\t\t\t\treturn current.hasSkill(\"huabumrfz\");\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\t\"step 0\";\n\t\t\t\t\t\tvar targets = game.filterPlayer(current => {\n\t\t\t\t\t\t\treturn current.hasSkill(\"huabumrfz\");\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (targets.length == 1) {\n\t\t\t\t\t\t\tplayer.logSkill(\"huabumrfz\", targets);\n\t\t\t\t\t\t\tevent.targets = targets[0];\n\t\t\t\t\t\t\tevent.goto(2);\n\t\t\t\t\t\t} else if (targets.length > 1) {\n\t\t\t\t\t\t\tplayer\n\t\t\t\t\t\t\t\t.chooseTarget(true, \"选择【花卜】的目标\", function (card, player, target) {\n\t\t\t\t\t\t\t\t\treturn _status.event.list.includes(target);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.set(\"list\", targets)\n\t\t\t\t\t\t\t\t.set(\"ai\", function (target) {\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player;\n\t\t\t\t\t\t\t\t\treturn get.attitude(player, target);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else event.finish();\n\t\t\t\t\t\t(\"step 1\");\n\t\t\t\t\t\tif (result.targets) {\n\t\t\t\t\t\t\tplayer.logSkill(\"huabumrfz\", event.targets);\n\t\t\t\t\t\t\tevent.targets = result.targets[0];\n\t\t\t\t\t\t} else event.finish();\n\t\t\t\t\t\t(\"step 2\");\n\t\t\t\t\t\tif (event.targets) {\n\t\t\t\t\t\t\tevent.targets.draw();\n\t\t\t\t\t\t} else event.finish();\n\t\t\t\t\t\t(\"step 3\");\n\t\t\t\t\t\tif (result) {\n\t\t\t\t\t\t\tvar card = result[0];\n\t\t\t\t\t\t\tvar cards = player.getCards(\"h\");\n\t\t\t\t\t\t\tvar bool = false;\n\t\t\t\t\t\t\tfor (i of cards) {\n\t\t\t\t\t\t\t\tif (get.type2(i) == get.type2(card)) {\n\t\t\t\t\t\t\t\t\tbool = true;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tevent.is = bool;\n\t\t\t\t\t\t\tevent.targets\n\t\t\t\t\t\t\t\t.chooseControl(\"有\", \"没有\")\n\t\t\t\t\t\t\t\t.set(\"prompt\", \"【花卜】:\" + get.translation(player) + \"手牌中是否有与\" + get.translation(card) + \"(\" + get.translation(get.type2(card)) + \")\" + \"类型相同的牌？\")\n\t\t\t\t\t\t\t\t.set(\"ai\", function () {\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player,\n\t\t\t\t\t\t\t\t\t\tis = _status.event.is,\n\t\t\t\t\t\t\t\t\t\ttarget = _status.event.target;\n\t\t\t\t\t\t\t\t\tis = is === true ? \"有\" : \"没有\";\n\t\t\t\t\t\t\t\t\tif (get.attitude(player, target) > 0 && target.hasSkill(\"shixinmrfz\")) return is;\n\t\t\t\t\t\t\t\t\telse if (target.hasSkill(\"shixinmrfz\")) return !is;\n\t\t\t\t\t\t\t\t\treturn [\"有\", \"没有\"].randomGet();\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.set(\"is\", event.is)\n\t\t\t\t\t\t\t\t.set(\"target\", event.targets);\n\t\t\t\t\t\t} else event.finish();\n\t\t\t\t\t\t(\"step 4\");\n\t\t\t\t\t\tif (result.control) {\n\t\t\t\t\t\t\tvar bool = result.control == \"有\" ? true : false;\n\t\t\t\t\t\t\tif (event.is == bool) {\n\t\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t\t\tevent.targets.draw();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tevent.targets.chooseToDiscard(true, \"【花卜】:请选择弃置一张牌\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tai: {\n\t\t\t\t\t\torder: 13,\n\t\t\t\t\t\tthreaten: 1.5,\n\t\t\t\t\t\tresult: {\n\t\t\t\t\t\t\tplayer: function (player, target) {\n\t\t\t\t\t\t\t\tvar target = game.findPlayer(function (current) {\n\t\t\t\t\t\t\t\t\treturn current.hasSkill(\"huabumrfz\");\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif (target) {\n\t\t\t\t\t\t\t\t\treturn get.attitude(player, target);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tshixinmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { player: \"gainAfter\" },\n\t\t\tfilter: function (event, player) {\n\t\t\t\tif (!_status.currentPhase) return false;\n\t\t\t\tif (player.hasSkill(\"shixinmrfz_ban\")) return false;\n\t\t\t\tif (_status.currentPhase.countCards(\"h\") == 0) return false;\n\t\t\t\treturn _status.currentPhase != player;\n\t\t\t},\n\t\t\tprompt: \"【识心】:是否观看当前回合角色的手牌？\",\n\t\t\tcontent: function () {\n\t\t\t\tplayer.viewHandcards(_status.currentPhase);\n\t\t\t\tplayer.addTempSkill(\"shixinmrfz_ban\", \"phaseEnd\");\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\tban: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\t//红\n\t\tqunlangmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"showCharacterAfter\",\n\t\t\t},\n\t\t\thiddenSkill: true,\n\t\t\tfilter: function (event, player) {\n\t\t\t\tif (!event.toShow || !event.toShow.includes(\"hongmrfz\")) return false;\n\t\t\t\treturn game.hasPlayer(current => {\n\t\t\t\t\treturn current != player && player.inRangeOf(current);\n\t\t\t\t});\n\t\t\t},\n\t\t\tcheck: function (event, player) {\n\t\t\t\treturn game.hasPlayer(current => {\n\t\t\t\t\treturn current != player && player.inRangeOf(current) && get.attitude(current, player) < 0;\n\t\t\t\t});\n\t\t\t},\n\t\t\tprompt: \"【群狼】:你可以对你攻击范围内的一名其他角色造成一点伤害\",\n\t\t\tcontent: function () {\n\t\t\t\t\"step 0\";\n\t\t\t\tplayer\n\t\t\t\t\t.chooseTarget(true, \"【群狼】:请选择一名其他角色并对其造成一点伤害\", function (card, player, target) {\n\t\t\t\t\t\treturn target != player && player.inRangeOf(target);\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"ai\", function (target) {\n\t\t\t\t\t\tvar player = _status.event.player;\n\t\t\t\t\t\treturn get.damageEffect(target, player, player);\n\t\t\t\t\t});\n\t\t\t\t(\"step 1\");\n\t\t\t\tif (result.bool) {\n\t\t\t\t\tvar target = result.targets[0];\n\t\t\t\t\ttarget.damage(\"player\");\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\tcigumrfz: {\n\t\t\tmod: {\n\t\t\t\tcardnature: function (card, player) {\n\t\t\t\t\tif (!card.nature && card.name == \"sha\") return \"stab\";\n\t\t\t\t},\n\t\t\t},\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tglobal: [\"respond\", \"useCard\"],\n\t\t\t},\n\t\t\tfrequent: true,\n\t\t\tfilter: function (event, player) {\n\t\t\t\tif (!event.respondTo) return false;\n\t\t\t\tif (event.player == player) return false;\n\t\t\t\tif (player != event.respondTo[0]) return false;\n\t\t\t\telse return event.cards.filterInD(\"od\").length > 0;\n\t\t\t},\n\t\t\tprompt: function (event, player) {\n\t\t\t\tvar cards = event.cards.filterInD(\"od\");\n\t\t\t\treturn \"【刺骨】:是否获得\" + get.translation(cards) + \"?\";\n\t\t\t},\n\t\t\tcontent: function () {\n\t\t\t\tvar cards = trigger.cards.filterInD(\"od\");\n\t\t\t\tplayer.gain(cards, \"log\", \"gain2\");\n\t\t\t},\n\t\t},\n\t\tqingchumrfz: {\n\t\t\tgroup: [\"qingchumrfz_sha\", \"qingchumrfz_shan\"],\n\t\t\taudio: 2,\n\t\t\ttrigger: { player: [\"useCard\", \"respond\"] },\n\t\t\tfilter: function (event, player) {\n\t\t\t\tvar target = _status.currentPhase;\n\t\t\t\tif (!target || target.countCards(\"he\") == 0) return false;\n\t\t\t\treturn event.card && event.card.name == \"sha\" && target != player;\n\t\t\t},\n\t\t\tcheck: function (event, player) {\n\t\t\t\tvar target = _status.currentPhase;\n\t\t\t\treturn get.attitude(target, player) < 0;\n\t\t\t},\n\t\t\tprompt: function (event, player) {\n\t\t\t\tvar target = _status.currentPhase;\n\t\t\t\treturn \"【清处】:是否弃置当前回合角色（\" + get.translation(target) + \"）一张牌？\";\n\t\t\t},\n\t\t\tcontent: function () {\n\t\t\t\t\"step 0\";\n\t\t\t\tvar target = _status.currentPhase;\n\t\t\t\tif (!target || target.countCards(\"he\") == 0) event.finish();\n\t\t\t\telse player.discardPlayerCard(target, \"he\", true);\n\t\t\t\t(\"step 1\");\n\t\t\t\tif (result.cards) {\n\t\t\t\t\tif (get.suit(result.cards[0]) == get.suit(trigger.card)) {\n\t\t\t\t\t\tevent.goto(0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\tshan: {\n\t\t\t\t\taudio: \"qingchumrfz\",\n\t\t\t\t\tenable: [\"chooseToRespond\", \"chooseToUse\"],\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn _status.currentPhase != player;\n\t\t\t\t\t},\n\t\t\t\t\tfilterCard: {\n\t\t\t\t\t\tname: \"sha\",\n\t\t\t\t\t},\n\t\t\t\t\tviewAs: {\n\t\t\t\t\t\tname: \"shan\",\n\t\t\t\t\t},\n\t\t\t\t\tprompt: \"将一张杀当闪使用或打出\",\n\t\t\t\t\tcheck: function () {\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t},\n\t\t\t\t\tposition: \"hs\",\n\t\t\t\t\tviewAsFilter: function (player) {\n\t\t\t\t\t\tif (!player.countCards(\"hs\", \"sha\")) return false;\n\t\t\t\t\t},\n\t\t\t\t\tai: {\n\t\t\t\t\t\trespondShan: true,\n\t\t\t\t\t\tskillTagFilter: function (player) {\n\t\t\t\t\t\t\tif (!player.countCards(\"hs\", \"sha\") || _status.currentPhase != player) return false;\n\t\t\t\t\t\t},\n\t\t\t\t\t\teffect: {\n\t\t\t\t\t\t\ttarget: function (card, player, target, current) {\n\t\t\t\t\t\t\t\tif (get.tag(card, \"respondShan\") && current < 0) return 0.6;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\torder: 4,\n\t\t\t\t\t\tuseful: -1,\n\t\t\t\t\t\tvalue: -1,\n\t\t\t\t\t\tbasic: {\n\t\t\t\t\t\t\tuseful: [7, 5.1, 2],\n\t\t\t\t\t\t\tvalue: [7, 5.1, 2],\n\t\t\t\t\t\t},\n\t\t\t\t\t\tresult: {\n\t\t\t\t\t\t\tplayer: 1,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tsha: {\n\t\t\t\t\taudio: \"qingchumrfz\",\n\t\t\t\t\tenable: [\"chooseToUse\", \"chooseToRespond\"],\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn _status.currentPhase != player;\n\t\t\t\t\t},\n\t\t\t\t\tfilterCard: {\n\t\t\t\t\t\tname: \"shan\",\n\t\t\t\t\t},\n\t\t\t\t\tviewAs: {\n\t\t\t\t\t\tname: \"sha\",\n\t\t\t\t\t},\n\t\t\t\t\tviewAsFilter: function (player) {\n\t\t\t\t\t\tif (!player.countCards(\"hs\", \"shan\")) return false;\n\t\t\t\t\t},\n\t\t\t\t\tposition: \"hs\",\n\t\t\t\t\tprompt: \"将一张闪当杀使用或打出\",\n\t\t\t\t\tcheck: function () {\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t},\n\t\t\t\t\tai: {\n\t\t\t\t\t\teffect: {\n\t\t\t\t\t\t\ttarget: function (card, player, target, current) {\n\t\t\t\t\t\t\t\tif (get.tag(card, \"respondSha\") && current < 0) return 0.6;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\trespondSha: true,\n\t\t\t\t\t\tskillTagFilter: function (player) {\n\t\t\t\t\t\t\tif (!player.countCards(\"hs\", \"shan\") || _status.currentPhase != player) return false;\n\t\t\t\t\t\t},\n\t\t\t\t\t\torder: function () {\n\t\t\t\t\t\t\treturn get.order({ name: \"sha\" }) + 0.1;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tuseful: -1,\n\t\t\t\t\t\tvalue: -1,\n\t\t\t\t\t\tyingbian: function (card, player, targets, viewer) {\n\t\t\t\t\t\t\tif (get.attitude(viewer, player) <= 0) return 0;\n\t\t\t\t\t\t\tvar base = 0,\n\t\t\t\t\t\t\t\thit = false;\n\t\t\t\t\t\t\tif (get.cardtag(card, \"yingbian_hit\")) {\n\t\t\t\t\t\t\t\thit = true;\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\ttargets.filter(function (target) {\n\t\t\t\t\t\t\t\t\t\treturn target.hasShan() && get.attitude(viewer, target) < 0 && get.damageEffect(target, player, viewer, get.nature(card)) > 0;\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\tbase += 5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (get.cardtag(card, \"yingbian_all\")) {\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\n\t\t\t\t\t\t\t\t\t\treturn !targets.includes(current) && lib.filter.targetEnabled2(card, player, current) && get.effect(current, card, player, player) > 0;\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\tbase += 5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (get.cardtag(card, \"yingbian_damage\")) {\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\ttargets.filter(function (target) {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\tget.attitude(player, target) < 0 &&\n\t\t\t\t\t\t\t\t\t\t\t(hit ||\n\t\t\t\t\t\t\t\t\t\t\t\t!target.mayHaveShan() ||\n\t\t\t\t\t\t\t\t\t\t\t\tplayer.hasSkillTag(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"directHit_ai\",\n\t\t\t\t\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttarget: target,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcard: card,\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t\t\t\t\t\t)) &&\n\t\t\t\t\t\t\t\t\t\t\t!target.hasSkillTag(\"filterDamage\", null, {\n\t\t\t\t\t\t\t\t\t\t\t\tplayer: player,\n\t\t\t\t\t\t\t\t\t\t\t\tcard: card,\n\t\t\t\t\t\t\t\t\t\t\t\tjiu: true,\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\tbase += 5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn base;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcanLink: function (player, target, card) {\n\t\t\t\t\t\t\tif (!target.isLinked() && !player.hasSkill(\"wutiesuolian_skill\")) return false;\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\ttarget.mayHaveShan() &&\n\t\t\t\t\t\t\t\t!player.hasSkillTag(\n\t\t\t\t\t\t\t\t\t\"directHit_ai\",\n\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttarget: target,\n\t\t\t\t\t\t\t\t\t\tcard: card,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\tif (player.hasSkill(\"jueqing\") || player.hasSkill(\"gangzhi\") || target.hasSkill(\"gangzhi\")) return false;\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbasic: {\n\t\t\t\t\t\t\tuseful: [5, 3, 1],\n\t\t\t\t\t\t\tvalue: [5, 3, 1],\n\t\t\t\t\t\t},\n\t\t\t\t\t\tresult: {\n\t\t\t\t\t\t\ttarget: function (player, target, card, isLink) {\n\t\t\t\t\t\t\t\tvar eff = (function () {\n\t\t\t\t\t\t\t\t\tif (!isLink && player.hasSkill(\"jiu\")) {\n\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t!target.hasSkillTag(\"filterDamage\", null, {\n\t\t\t\t\t\t\t\t\t\t\t\tplayer: player,\n\t\t\t\t\t\t\t\t\t\t\t\tcard: card,\n\t\t\t\t\t\t\t\t\t\t\t\tjiu: true,\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\tif (get.attitude(player, target) > 0) {\n\t\t\t\t\t\t\t\t\t\t\t\treturn -7;\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\treturn -4;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t\t})();\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t!isLink &&\n\t\t\t\t\t\t\t\t\ttarget.mayHaveShan() &&\n\t\t\t\t\t\t\t\t\t!player.hasSkillTag(\n\t\t\t\t\t\t\t\t\t\t\"directHit_ai\",\n\t\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttarget: target,\n\t\t\t\t\t\t\t\t\t\t\tcard: card,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\treturn eff / 1.2;\n\t\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttag: {\n\t\t\t\t\t\t\trespond: 1,\n\t\t\t\t\t\t\trespondShan: 1,\n\t\t\t\t\t\t\tdamage: function (card) {\n\t\t\t\t\t\t\t\tif (game.hasNature(card, \"poison\")) return false;\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tnatureDamage: function (card) {\n\t\t\t\t\t\t\t\tif (game.hasNature(card)) return 1;\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfireDamage: function (card, nature) {\n\t\t\t\t\t\t\t\tif (game.hasNature(card, \"fire\")) return 1;\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tthunderDamage: function (card, nature) {\n\t\t\t\t\t\t\t\tif (game.hasNature(card, \"thunder\")) return 1;\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tpoisonDamage: function (card, nature) {\n\t\t\t\t\t\t\t\tif (game.hasNature(card, \"poison\")) return 1;\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t//德克萨斯\n\t\tjianyumrfz: {\n\t\t\taudio: 2,\n\t\t\tusable: 1,\n\t\t\tenable: \"phaseUse\",\n\t\t\tcontent: function () {\n\t\t\t\t\"step 0\";\n\t\t\t\tvar cards = get.cards(4);\n\t\t\t\tgame.cardsGotoOrdering(cards);\n\t\t\t\tplayer.showCards(cards, \"剑雨\");\n\t\t\t\tvar suit = [];\n\t\t\t\tfor (var i = 0; i < cards.length; i++) {\n\t\t\t\t\tvar suitcard = get.suit(cards[i]);\n\t\t\t\t\tif (suit.includes(suitcard)) continue;\n\t\t\t\t\tsuit.add(suitcard);\n\t\t\t\t}\n\t\t\t\tvar num = suit.length;\n\t\t\t\tif (player.countCards(\"he\") >= suit.length)\n\t\t\t\t\tplayer.chooseCard(\"he\", true, \"【剑雨】:将至少\" + num + \"张牌当作【万箭齐发】对你选择牌的等量名其他角色使用\", [num, Infinity]).set(\"ai\", function (card) {\n\t\t\t\t\t\treturn get.value(card) <= 6;\n\t\t\t\t\t});\n\t\t\t\telse event.finish();\n\t\t\t\t(\"step 1\");\n\t\t\t\tif (result.cards) {\n\t\t\t\t\tvar cards = result.cards;\n\t\t\t\t\tplayer.addTempSkill(\"jianyumrfz_dam\", \"jianyumrfzAfter\");\n\t\t\t\t\tplayer.chooseUseTarget({ name: \"wanjian\" }, cards, true, false).set(\"selectTarget\", function (card, player, target) {\n\t\t\t\t\t\tvar num = cards.length;\n\t\t\t\t\t\treturn [1, num];\n\t\t\t\t\t}).viewAs = true;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\tdam: {\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn event.player.isAlive() && event.cards && event.card.name == \"wanjian\" && !event.player.hasSkill(\"jianyumrfz_debuff\");\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\ttrigger.player.addTempSkill(\"jianyumrfz_debuff\", { player: \"phaseEnd\" });\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdebuff: {\n\t\t\t\t\tmark: true,\n\t\t\t\t\tintro: {\n\t\t\t\t\t\tcontent: \"使用【杀】的次数-1\",\n\t\t\t\t\t},\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tmod: {\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num - 1;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 2.95,\n\t\t\t\tresult: {\n\t\t\t\t\tplayer: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tsudimrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { global: \"roundStart\" },\n\t\t\tfrequent: true,\n\t\t\tcontent: function () {\n\t\t\t\t//抄的郭嘉\n\t\t\t\t\"step 0\";\n\t\t\t\tevent.count = 1; //唯一有实质性改动的地方\n\t\t\t\t(\"step 1\");\n\t\t\t\tevent.count--;\n\t\t\t\tevent.cards = game.cardsGotoOrdering(get.cards(2)).cards;\n\t\t\t\tif (_status.connectMode)\n\t\t\t\t\tgame.broadcastAll(function () {\n\t\t\t\t\t\t_status.noclearcountdown = true;\n\t\t\t\t\t});\n\t\t\t\tevent.given_map = {};\n\t\t\t\t(\"step 2\");\n\t\t\t\tif (event.cards.length > 1) {\n\t\t\t\t\tplayer.chooseCardButton(\"【速递】:请选择要分配的牌\", true, event.cards, [1, event.cards.length]).set(\"ai\", function (button) {\n\t\t\t\t\t\tif (ui.selected.buttons.length == 0) return 1;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t} else if (event.cards.length == 1) {\n\t\t\t\t\tevent._result = { links: event.cards.slice(0), bool: true };\n\t\t\t\t} else {\n\t\t\t\t\tevent.finish();\n\t\t\t\t}\n\t\t\t\t(\"step 3\");\n\t\t\t\tif (result.bool) {\n\t\t\t\t\tevent.cards.removeArray(result.links);\n\t\t\t\t\tevent.togive = result.links.slice(0);\n\t\t\t\t\tplayer\n\t\t\t\t\t\t.chooseTarget(\"选择一名角色获得\" + get.translation(result.links), true)\n\t\t\t\t\t\t.set(\"ai\", function (target) {\n\t\t\t\t\t\t\tvar att = get.attitude(_status.event.player, target);\n\t\t\t\t\t\t\tif (_status.event.enemy) {\n\t\t\t\t\t\t\t\treturn -att;\n\t\t\t\t\t\t\t} else if (att > 0) {\n\t\t\t\t\t\t\t\treturn att / (1 + target.countCards(\"h\"));\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn att / 100;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.set(\"enemy\", get.value(event.togive[0], player, \"raw\") < 0);\n\t\t\t\t}\n\t\t\t\t(\"step 4\");\n\t\t\t\tif (result.targets.length) {\n\t\t\t\t\tvar id = result.targets[0].playerid,\n\t\t\t\t\t\tmap = event.given_map;\n\t\t\t\t\tif (!map[id]) map[id] = [];\n\t\t\t\t\tmap[id].addArray(event.togive);\n\t\t\t\t}\n\t\t\t\tif (cards.length > 0) event.goto(2);\n\t\t\t\t(\"step 5\");\n\t\t\t\tif (_status.connectMode) {\n\t\t\t\t\tgame.broadcastAll(function () {\n\t\t\t\t\t\tdelete _status.noclearcountdown;\n\t\t\t\t\t\tgame.stopCountChoose();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tvar list = [];\n\t\t\t\tfor (var i in event.given_map) {\n\t\t\t\t\tvar source = (_status.connectMode ? lib.playerOL : game.playerMap)[i];\n\t\t\t\t\tplayer.line(source, \"green\");\n\t\t\t\t\tlist.push([source, event.given_map[i]]);\n\t\t\t\t}\n\t\t\t\tgame.loseAsync({\n\t\t\t\t\tgain_list: list,\n\t\t\t\t\tgiver: player,\n\t\t\t\t\tanimate: \"draw\",\n\t\t\t\t}).setContent(\"gaincardMultiple\");\n\t\t\t\t(\"step 6\");\n\t\t\t\tif (event.count > 0 && player.hasSkill(event.name) && !get.is.blocked(event.name, player)) {\n\t\t\t\t\tplayer.chooseBool(get.prompt2(event.name)).set(\"frequentSkill\", event.name);\n\t\t\t\t} else event.finish();\n\t\t\t\t(\"step 7\");\n\t\t\t\tif (result.bool) {\n\t\t\t\t\tplayer.logSkill(event.name);\n\t\t\t\t\tevent.goto(1);\n\t\t\t\t}\n\t\t\t},\n\t\t\tai: {\n\t\t\t\texpose: 0.1,\n\t\t\t\tthreaten: 1.1,\n\t\t\t},\n\t\t},\n\t\t//白金\n\t\txujimrfz: {\n\t\t\tinit: function (player) {\n\t\t\t\tplayer.storage.xujimrfz = {\n\t\t\t\t\tdamage: 0,\n\t\t\t\t\tmaxhand: 0,\n\t\t\t\t};\n\t\t\t},\n\t\t\tmark: true,\n\t\t\tintro: {\n\t\t\t\tcontent: function (event, player) {\n\t\t\t\t\tvar storage = player.storage.xujimrfz;\n\t\t\t\t\tvar str;\n\t\t\t\t\tif (storage[\"damage\"] > 0) str = \"下次使用【杀】的伤害基数+\" + storage[\"damage\"] + \"</br>\";\n\t\t\t\t\tif (storage[\"maxhand\"] > 0) str = str + \"手牌上限+\" + storage[\"maxhand\"];\n\t\t\t\t\tif (!str) return \"没有效果\";\n\t\t\t\t\treturn str;\n\t\t\t\t},\n\t\t\t},\n\t\t\taudio: 3,\n\t\t\ttrigger: { player: \"phaseDiscardBegin\" },\n\t\t\tfrequent: true,\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn (\n\t\t\t\t\tplayer.getHistory(\"useCard\", function (evt) {\n\t\t\t\t\t\tif (!get.tag(evt.card, \"damage\")) return false;\n\t\t\t\t\t\tif (evt.targets && evt.targets.length && evt.isPhaseUsing()) {\n\t\t\t\t\t\t\tvar targets = evt.targets.slice(0);\n\t\t\t\t\t\t\twhile (targets.includes(player)) targets.remove(player);\n\t\t\t\t\t\t\treturn targets.length > 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}).length === 0\n\t\t\t\t);\n\t\t\t},\n\t\t\tcontent: function () {\n\t\t\t\t\"step 0\";\n\t\t\t\tplayer.storage.xujimrfz[\"damage\"] += 1;\n\t\t\t\tplayer.storage.xujimrfz[\"maxhand\"] += 5;\n\t\t\t\tif (player.canUseToAnyone(\"sha\", false) && player.hasSha()) player.chooseControl(\"摸牌\", \"出杀\").set(\"prompt\", \"【蓄击】:请选择一项\");\n\t\t\t\telse {\n\t\t\t\t\tvar num = 2 + player.storage.shiyumrfz_buff;\n\t\t\t\t\tplayer.draw(num || 2);\n\t\t\t\t\tevent.finish();\n\t\t\t\t}\n\t\t\t\t(\"step 1\");\n\t\t\t\tif (result.index == 0) {\n\t\t\t\t\tvar num = 2 + player.storage.shiyumrfz_buff;\n\t\t\t\t\tplayer.draw(num || 2);\n\t\t\t\t} else {\n\t\t\t\t\tplayer.addTempSkill(\"xujimrfz_sha\", \"xujimrfzAfter\");\n\t\t\t\t\tplayer\n\t\t\t\t\t\t.chooseToUse(\n\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\tfunction (card, player, event) {\n\t\t\t\t\t\t\t\tif (get.name(card) != \"sha\") return false;\n\t\t\t\t\t\t\t\treturn lib.filter.filterCard.apply(this, arguments);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\"【蓄击】：请你使用一张【杀】\"\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.set(\"logSkill\", \"xujimrfz\")\n\t\t\t\t\t\t.set(\"complexSelect\", true);\n\t\t\t\t}\n\t\t\t},\n\t\t\tgroup: [\"xujimrfz_clear\", \"xujimrfz_dam\"],\n\t\t\tsubSkill: {\n\t\t\t\tsha: {\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"useCardToPlayered\",\n\t\t\t\t\t},\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn event.card.name == \"sha\" && !event.getParent().directHit.includes(event.target);\n\t\t\t\t\t},\n\t\t\t\t\tlogTarget: \"target\",\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tvar storage = player.storage.shiyumrfz_buff;\n\t\t\t\t\t\tif (!storage) storage = 0;\n\t\t\t\t\t\tvar id = trigger.target.playerid;\n\t\t\t\t\t\tvar map = trigger.getParent().customArgs;\n\t\t\t\t\t\tif (!map[id]) map[id] = {};\n\t\t\t\t\t\tif (typeof map[id].shanRequired == \"number\") {\n\t\t\t\t\t\t\tmap[id].shanRequired++;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmap[id].shanRequired = 2 + storage;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.removeSkill(\"xujimrfz_sha\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tclear: {\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tfirstDo: true,\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tplayer.storage.xujimrfz[\"maxhand\"] = 0;\n\t\t\t\t\t},\n\t\t\t\t\tmod: {\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\n\t\t\t\t\t\t\treturn num + (player.storage.xujimrfz[\"maxhand\"] || 0);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdam: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tdirect: true,\n\t\t\t\t\ttrigger: { player: \"useCard\" },\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\tif (player.storage.xujimrfz[\"damage\"] < 1) return false;\n\t\t\t\t\t\treturn event.card && event.card.name == \"sha\";\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tvar storage = player.storage.xujimrfz[\"damage\"];\n\t\t\t\t\t\tplayer.logSkill(\"xujimrfz\");\n\t\t\t\t\t\tif (!trigger.baseDamage) trigger.baseDamage = 1;\n\t\t\t\t\t\ttrigger.baseDamage += storage;\n\t\t\t\t\t\tplayer.storage.xujimrfz[\"damage\"] = 0;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tshiyumrfz: {\n\t\t\taudio: 2,\n\t\t\tskillAnimation: true,\n\t\t\tanimationColor: \"wood\",\n\t\t\tjuexingji: true,\n\t\t\tforced: true,\n\t\t\tunique: true,\n\t\t\ttrigger: { source: \"damageEnd\" },\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn event.num >= 2;\n\t\t\t},\n\t\t\tcontent: function () {\n\t\t\t\tplayer.storage.shiyumrfz = true;\n\t\t\t\tplayer.awakenSkill(\"shiyumrfz\");\n\t\t\t\tplayer.addSkill(\"shiyumrfz_buff\");\n\t\t\t\tif (!player.storage.shiyumrfz_buff) player.storage.shiyumrfz_buff = 0;\n\t\t\t\tplayer.storage.shiyumrfz_buff += 1;\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\tbuff: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tmod: {\n\t\t\t\t\t\tattackRange: function (player, num) {\n\t\t\t\t\t\t\treturn (num += 1);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tai: {\n\t\t\t\t\t\tviewHandcard: true,\n\t\t\t\t\t\tskillTagFilter(player, tag, arg) {\n\t\t\t\t\t\t\tif (player === arg || !player.inRange(arg)) return false;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\t//因陀罗\n\t\tsuijiamrfz: {\n\t\t\tinit: function (player) {\n\t\t\t\tplayer.storage.suijiamrfz = {\n\t\t\t\t\tdel: false,\n\t\t\t\t\tdamage: 0,\n\t\t\t\t};\n\t\t\t},\n\t\t\tonremove: true,\n\t\t\taudio: 2,\n\t\t\ttrigger: { source: \"damageBegin\" },\n\t\t\tfilter: function (event, player) {\n\t\t\t\tvar isdel = player.storage.suijiamrfz[\"del\"];\n\t\t\t\treturn (isdel == false && event.player.hujia > 0) || isdel == true;\n\t\t\t},\n\t\t\tforced: true,\n\t\t\tcontent: function () {\n\t\t\t\ttrigger.num += 1 + player.storage.suijiamrfz[\"damage\"] || 1;\n\t\t\t},\n\t\t\tgroup: \"suijiamrfz_clear\",\n\t\t\tsubSkill: {\n\t\t\t\tclear: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tplayer.storage.suijiamrfz = {\n\t\t\t\t\t\t\tdel: false,\n\t\t\t\t\t\t\tdamage: 0,\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\thuquanmrfz: {\n\t\t\taudio: 2,\n\t\t\tenable: [\"chooseToRespond\", \"chooseToUse\"],\n\t\t\thiddenCard: function (player, name) {\n\t\t\t\tif (player.countCards(\"h\") < 1 || player.hasSkill(\"huquanmrfz_ban\")) return false;\n\t\t\t\tif (name != \"shan\" && name != \"wuxie\") return false;\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tfilter: function (event, player) {\n\t\t\t\tif (player.hasSkill(\"huquanmrfz_ban\") || player.countCards(\"h\") < 1) return false;\n\t\t\t\tfor (var name of [\"wuxie\", \"shan\"]) {\n\t\t\t\t\tif (event.filterCard({ name: name, isCard: true }, player, event)) return true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tchooseButton: {\n\t\t\t\tdialog: function (event, player) {\n\t\t\t\t\tvar vcards = [];\n\t\t\t\t\tfor (var name of [\"wuxie\", \"shan\"]) {\n\t\t\t\t\t\tvar card = { name: name, isCard: true };\n\t\t\t\t\t\tif (event.filterCard && event.filterCard(card, player, event)) {\n\t\t\t\t\t\t\tif (name == \"shan\") vcards.push([\"基本\", \"\", name]);\n\t\t\t\t\t\t\tif (name == \"wuxie\") vcards.push([\"锦囊\", \"\", name]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t/**\n\t\t\t\t\t * @type {Dialog}\n\t\t\t\t\t */\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tvar dialog = ui.create.dialog(\"虎拳\", [vcards, \"vcard\"], \"hidden\");\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tdialog.direct = true;\n\t\t\t\t\treturn dialog;\n\t\t\t\t},\n\t\t\t\tbackup: function (links, player) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tfilterCard: card => {\n\t\t\t\t\t\t\treturn card.number > 5;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tselectCard: 1,\n\t\t\t\t\t\tviewAs: {\n\t\t\t\t\t\t\tname: links[0][2],\n\t\t\t\t\t\t},\n\t\t\t\t\t\tpopname: true,\n\t\t\t\t\t\tprecontent: function () {\n\t\t\t\t\t\t\t\"step 0\";\n\t\t\t\t\t\t\tvar list = [\"【碎甲】中{ }内的数字+1直到你下个回合结束\"];\n\t\t\t\t\t\t\tif (!player.storage.suijiamrfz)\n\t\t\t\t\t\t\t\tplayer.storage.suijiamrfz = {\n\t\t\t\t\t\t\t\t\tdel: false,\n\t\t\t\t\t\t\t\t\tdamage: 0,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tif (player.storage.suijiamrfz[\"del\"] == false) list.push(\"删除【碎甲】中[ ]内的描述直到你下个回合结束\");\n\t\t\t\t\t\t\tif (list.length > 1)\n\t\t\t\t\t\t\t\tplayer\n\t\t\t\t\t\t\t\t\t.chooseControl()\n\t\t\t\t\t\t\t\t\t.set(\"choiceList\", list)\n\t\t\t\t\t\t\t\t\t.set(\"ai\", function () {\n\t\t\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.set(\"prompt\", \"【虎拳】:请选择一项\");\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tplayer.storage.suijiamrfz[\"damage\"] = +1;\n\t\t\t\t\t\t\t\tplayer.logSkill(\"huquanmrfz\");\n\t\t\t\t\t\t\t\tplayer.addTempSkill(\"huquanmrfz_ban\", { global: \"phaseEnd\" });\n\t\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t(\"step 1\");\n\t\t\t\t\t\t\tif (result.index == 0) {\n\t\t\t\t\t\t\t\tplayer.storage.suijiamrfz[\"damage\"] = +1;\n\t\t\t\t\t\t\t} else player.storage.suijiamrfz[\"del\"] = true;\n\t\t\t\t\t\t\tplayer.logSkill(\"huquanmrfz\");\n\t\t\t\t\t\t\tplayer.addTempSkill(\"huquanmrfz_ban\", { global: \"phaseEnd\" });\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tprompt: function (links, player) {\n\t\t\t\t\treturn \"【虎拳】：视为使用一张【\" + get.translation(links[0][2]) + \"】\";\n\t\t\t\t},\n\t\t\t},\n\t\t\tai: {\n\t\t\t\trespondShan: true,\n\t\t\t\torder: 10,\n\t\t\t\tskillTagFilter: function (player, tag, arg) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\tplayer.countCards(\"h\", function (card) {\n\t\t\t\t\t\t\treturn card.number > 5;\n\t\t\t\t\t\t}) > 0 && !player.hasSkill(\"huquanmrfz_ban\")\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tresult: { player: 1 },\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\tban: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\t//温米\n\t\tbaiweimrfz: {\n\t\t\tmark: true,\n\t\t\tintro: {\n\t\t\t\tcontent: function (event, player) {\n\t\t\t\t\tvar storage = player.storage.baiweimrfz,\n\t\t\t\t\t\ttext;\n\t\t\t\t\tif (Object.keys(player.storage.baiweimrfz).length < 1) return \"没有记录的牌\";\n\t\t\t\t\tfor (var key in storage) {\n\t\t\t\t\t\ttext = (text === undefined ? \"\" : text) + get.translation(key) + \":\" + storage[key] + \"</br>\";\n\t\t\t\t\t}\n\t\t\t\t\treturn text;\n\t\t\t\t},\n\t\t\t},\n\t\t\taudio: 4,\n\t\t\tinit: function (player) {\n\t\t\t\tplayer.storage.baiweimrfz = {};\n\t\t\t},\n\t\t\tenable: [\"chooseToUse\", \"chooseToRespond\"],\n\t\t\tfilter: function (event, player) {\n\t\t\t\tif (player.countCards(\"h\") < 1 || Object.keys(player.storage.baiweimrfz).length < 1) return false;\n\t\t\t\tfor (var i of lib.inpile) {\n\t\t\t\t\tvar type = get.type(i);\n\t\t\t\t\tif ((type == \"basic\" || type == \"trick\") && event.filterCard({ name: i }, player, event) && player.storage.baiweimrfz.hasOwnProperty(i)) return true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tchooseButton: {\n\t\t\t\tdialog: function (event, player) {\n\t\t\t\t\tvar number = {};\n\t\t\t\t\tfor (var i = 1; i <= get.cardNameLength(lib.inpile, true).length; i++) {\n\t\t\t\t\t\tnumber[i] = [];\n\t\t\t\t\t}\n\t\t\t\t\tfor (var i = 1; i <= get.cardNameLength(lib.inpile, true).length; i++) {\n\t\t\t\t\t\tfor (var j = 0; j < lib.inpile.length; j++) {\n\t\t\t\t\t\t\tvar name = lib.inpile[j];\n\t\t\t\t\t\t\tif (get.type(name) == \"delay\" || get.type(name) == \"equip\") continue;\n\t\t\t\t\t\t\tif (!event.filterCard({ name: name }, player, event)) continue;\n\t\t\t\t\t\t\tif (!player.storage.baiweimrfz.hasOwnProperty(name)) continue;\n\t\t\t\t\t\t\tif (get.cardNameLength(name) == i) {\n\t\t\t\t\t\t\t\tif (name == \"sha\") {\n\t\t\t\t\t\t\t\t\tif (event.filterCard({ name: name }, player, event)) number[i].push([\"基本\", \"\", \"sha\"]);\n\t\t\t\t\t\t\t\t\tfor (var k of [\"fire\", \"thunder\", \"ice\", \"stab\"]) {\n\t\t\t\t\t\t\t\t\t\tif (event.filterCard({ name: name, nature: k }, player, event)) number[i].push([\"基本\", \"\", \"sha\", k]);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else if (get.type(name) == \"trick\" && event.filterCard({ name: name }, player, event)) number[i].push([\"锦囊\", \"\", name]);\n\t\t\t\t\t\t\t\telse if (get.type(name) == \"basic\" && event.filterCard({ name: name }, player, event)) number[i].push([\"基本\", \"\", name]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t/**\n\t\t\t\t\t * @type {Dialog}\n\t\t\t\t\t */\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tvar dialog = ui.create.dialog;\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tdialog = [\"百味：请选择一张牌\"];\n\t\t\t\t\tfor (var i = 1; i < Object.keys(number).length; i++) {\n\t\t\t\t\t\tif (!number[i].length) continue;\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tdialog.push('<div class=\"text center\">' + get.cnNumber(i) + \"字</div>\");\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tdialog.push([number[i], \"vcard\"]);\n\t\t\t\t\t}\n\t\t\t\t\treturn dialog;\n\t\t\t\t},\n\t\t\t\tbackup: function (links, player) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tfilterCard: function (card) {\n\t\t\t\t\t\t\tvar selected = ui.selected.cards,\n\t\t\t\t\t\t\t\tnum = get.cardNameLength(links[0][2]);\n\t\t\t\t\t\t\tif (selected.length) {\n\t\t\t\t\t\t\t\tvar num2 = 0;\n\t\t\t\t\t\t\t\tfor (var i = 0; i < selected.length; i++) {\n\t\t\t\t\t\t\t\t\tnum2 += get.cardNameLength(selected[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tnum -= num2;\n\t\t\t\t\t\t\t\treturn get.cardNameLength(card) <= num;\n\t\t\t\t\t\t\t} else return get.cardNameLength(card) <= num;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tselectCard: function () {\n\t\t\t\t\t\t\tvar num = Infinity,\n\t\t\t\t\t\t\t\tselected = ui.selected.cards,\n\t\t\t\t\t\t\t\tnum2 = get.cardNameLength(links[0][2]);\n\t\t\t\t\t\t\tif (selected.length) {\n\t\t\t\t\t\t\t\tvar num3 = 0;\n\t\t\t\t\t\t\t\tfor (var i = 0; i < selected.length; i++) {\n\t\t\t\t\t\t\t\t\tnum3 += get.cardNameLength(selected[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ((num = Infinity)) num = 1;\n\t\t\t\t\t\t\t\tif (num3 != num2) num = num + selected.length;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn num;\n\t\t\t\t\t\t},\n\t\t\t\t\t\taudio: \"baiweimrfz\",\n\t\t\t\t\t\tpopname: true,\n\t\t\t\t\t\tcheck: function (card) {\n\t\t\t\t\t\t\treturn 8 - get.value(card);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tposition: \"h\",\n\t\t\t\t\t\tviewAs: { name: links[0][2], nature: links[0][3] },\n\t\t\t\t\t\tprecontent: function () {\n\t\t\t\t\t\t\tvar name = lib.skill.baiweimrfz_backup.viewAs.name;\n\t\t\t\t\t\t\tplayer.storage.baiweimrfz[name]--;\n\t\t\t\t\t\t\tif (player.storage.baiweimrfz[name] == 0) delete player.storage.baiweimrfz[name];\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tprompt: function (links, player) {\n\t\t\t\t\treturn \"将任意张字数之和为\" + get.cnNumber(links[0][2]) + \"的牌为当做\" + (get.translation(links[0][3]) || \"\") + get.translation(links[0][2]) + \"使用\";\n\t\t\t\t},\n\t\t\t},\n\t\t\thiddenCard: function (player, name) {\n\t\t\t\tif (!lib.inpile.includes(name)) return false;\n\t\t\t\tvar type = get.type(name);\n\t\t\t\treturn (type == \"basic\" || type == \"trick\") && player.storage.baiweimrfz.hasOwnProperty(name) && player.countCards(\"h\") > 0;\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tfireAttack: true,\n\t\t\t\trespondShan: true,\n\t\t\t\trespondSha: true,\n\t\t\t\tskillTagFilter: function (player) {\n\t\t\t\t\tif (!player.countCards(\"h\") || player.hasSkill(\"baiweimrfz_ban\")) return false;\n\t\t\t\t},\n\t\t\t\torder: 1,\n\t\t\t\tresult: {\n\t\t\t\t\tplayer: function (player) {\n\t\t\t\t\t\tif (_status.event.dying) return get.attitude(player, _status.event.dying);\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tgroup: \"baiweimrfz_use\",\n\t\t\tsubSkill: {\n\t\t\t\tban: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t},\n\t\t\t\tuse: {\n\t\t\t\t\tsilent: true,\n\t\t\t\t\ttrigger: { global: \"useCard\" },\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\tif (!event.card || !event.card.isCard || player.hasSkill(\"baiweimrfz_ban\")) return false;\n\t\t\t\t\t\treturn get.type(event.card) == \"trick\" || get.type(event.card) == \"basic\";\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tvar name = trigger.card.name;\n\t\t\t\t\t\tif (!player.storage.baiweimrfz) player.storage.baiweimrfz = {};\n\t\t\t\t\t\tif (player.storage.baiweimrfz.hasOwnProperty(name)) {\n\t\t\t\t\t\t\tplayer.storage.baiweimrfz[name]++;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tplayer.storage.baiweimrfz[name] = 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (trigger.player != player && _status.currentPhase != player) player.addTempSkill(\"baiweimrfz_ban\", { global: \"phaseEnd\" });\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tnuanxiangmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { player: \"useCardAfter\" },\n\t\t\tfilter: function (event, player) {\n\t\t\t\tif (player.hasSkill(\"nuanxiangmrfz_ban\")) return false;\n\t\t\t\treturn event.card && event.card.cards && !event.card.isCard;\n\t\t\t},\n\t\t\tprompt: function (event, player) {\n\t\t\t\treturn \"【暖香】:是否令至多\" + get.cnNumber(event.card.cards.length) + \"名角色摸一张牌？\";\n\t\t\t},\n\t\t\tcontent: function () {\n\t\t\t\t\"step 0\";\n\t\t\t\tvar num = trigger.card.cards.length;\n\t\t\t\tplayer.addTempSkill(\"nuanxiangmrfz_ban\", { global: \"phaseEnd\" });\n\t\t\t\tplayer.chooseTarget(true, [1, num], \"【暖香】:请选择至多\" + get.cnNumber(num) + \"名角色\").ai = function (target) {\n\t\t\t\t\treturn get.attitude(player, target) > 0;\n\t\t\t\t};\n\t\t\t\t(\"step 1\");\n\t\t\t\tif (result.targets) {\n\t\t\t\t\tplayer.logSkill(\"nuanxiangmrfz\");\n\t\t\t\t\tfor (var i of result.targets) {\n\t\t\t\t\t\tplayer.line(i);\n\t\t\t\t\t\ti.draw();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tai: {\n\t\t\t\texpose: 0.1,\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\tban: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\t//梅尔\n\t\tshuitamrfz: {\n\t\t\tintro: {\n\t\t\t\tcontent: \"expansion\",\n\t\t\t\tmarkcount: \"expansion\",\n\t\t\t},\n\t\t\tonremove: function (player, skill) {\n\t\t\t\tvar cards = player.getExpansions(skill);\n\t\t\t\tif (cards.length) player.loseToDiscardpile(cards);\n\t\t\t},\n\t\t\tmod: {\n\t\t\t\tignoredHandcard: function (card, player) {\n\t\t\t\t\tif (card.hasGaintag(\"shuitamrfzx\")) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcardDiscardable: function (card, player, name) {\n\t\t\t\t\tif (name == \"phaseDiscard\" && card.hasGaintag(\"shuitamrfzx\")) return false;\n\t\t\t\t},\n\t\t\t},\n\t\t\taudio: 2,\n\t\t\tderivation: [\"baopomrfz\", \"mihuomrfz\"],\n\t\t\ttrigger: {\n\t\t\t\tglobal: \"phaseBefore\",\n\t\t\t\tplayer: \"enterGame\",\n\t\t\t},\n\t\t\tforced: true,\n\t\t\tlocked: false,\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn (event.name != \"phase\" || game.phaseNumber == 0) && player.countCards(\"h\") > 0;\n\t\t\t},\n\t\t\tcontent: function () {\n\t\t\t\t\"step 0\";\n\t\t\t\tplayer.chooseCard(true, \"【水獭】:请选择至多三张牌并标记为‘咪啵’\", [1, 3]).set(\"ai\", function (card) {\n\t\t\t\t\treturn get.type(card) != \"equip\" && get.type(card) != \"delay\";\n\t\t\t\t});\n\t\t\t\t(\"step 1\");\n\t\t\t\tif (result.cards) {\n\t\t\t\t\tplayer.addGaintag(result.cards, \"shuitamrfzx\");\n\t\t\t\t\tfor (i of result.cards) {\n\t\t\t\t\t\ti.storage.shuitamrfzx = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t(\"step 2\");\n\t\t\t\tplayer\n\t\t\t\t\t.chooseControl(\"爆破\", \"迷惑\")\n\t\t\t\t\t.set(\"prompt\", \"【水獭】:请选择获得一个技能\")\n\t\t\t\t\t.set(\"ai\", function () {\n\t\t\t\t\t\treturn [0, 1].randomGet();\n\t\t\t\t\t});\n\t\t\t\t(\"step 3\");\n\t\t\t\tif (result.index == 0) {\n\t\t\t\t\tplayer.addSkill(\"baopomrfz\");\n\t\t\t\t} else if (result.index == 1) {\n\t\t\t\t\tplayer.addSkill(\"mihuomrfz\");\n\t\t\t\t}\n\t\t\t},\n\t\t\tgroup: [\"shuitamrfz_reget\", \"shuitamrfz_end\"],\n\t\t\tsubSkill: {\n\t\t\t\tend: {\n\t\t\t\t\tdirect: true,\n\t\t\t\t\ttrigger: { global: \"phaseEnd\" },\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn player.getExpansions(\"shuitamrfz\").length > 0;\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\t\"step 0\";\n\t\t\t\t\t\tvar cards = player.getExpansions(\"shuitamrfz\");\n\t\t\t\t\t\tif (cards.length == 1) {\n\t\t\t\t\t\t\tfor (i of cards) {\n\t\t\t\t\t\t\t\ti.storage.shuitamrfzx = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tplayer.gain(cards, \"gain2\").gaintag = [\"shuitamrfzx\"];\n\t\t\t\t\t\t\tgame.log(player, \"收回了\" + get.translation(cards));\n\t\t\t\t\t\t\tplayer.logSkill(\"shuitamrfz\");\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tplayer.chooseButton([\"【水獭】:请选择获得其中一张牌\", cards]).ai = function (button) {\n\t\t\t\t\t\t\t\treturn get.value(button.link);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\t(\"step 1\");\n\t\t\t\t\t\tif (result.links) {\n\t\t\t\t\t\t\tfor (i of result.links) {\n\t\t\t\t\t\t\t\ti.storage.shuitamrfzx = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tplayer.gain(result.links, \"gain2\").gaintag = [\"shuitamrfzx\"];\n\t\t\t\t\t\t\tgame.log(player, \"收回了\" + get.translation(result.links));\n\t\t\t\t\t\t\tplayer.logSkill(\"shuitamrfz\");\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\treget: {\n\t\t\t\t\tdirect: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"loseAfter\",\n\t\t\t\t\t},\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\tvar evt = event.getl(player);\n\t\t\t\t\t\tif (!evt || !evt.hs || !evt.hs.length) return false;\n\t\t\t\t\t\tif (event.name == \"lose\") {\n\t\t\t\t\t\t\tfor (var i in event.gaintag_map) {\n\t\t\t\t\t\t\t\tif (event.gaintag_map[i].includes(\"shuitamrfzx\")) return true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn player.hasHistory(\"lose\", function (evt) {\n\t\t\t\t\t\t\tif (event != evt.getParent()) return false;\n\t\t\t\t\t\t\tfor (var i in evt.gaintag_map) {\n\t\t\t\t\t\t\t\tif (evt.gaintag_map[i].includes(\"shuitamrfzx\")) return true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\t\"step 0\";\n\t\t\t\t\t\tif (trigger.delay == false) game.delay();\n\t\t\t\t\t\t(\"step 1\");\n\t\t\t\t\t\tvar cards = [];\n\t\t\t\t\t\tfor (var i = 0; i < trigger.cards2.length; i++) {\n\t\t\t\t\t\t\tvar card = trigger.cards2[i];\n\t\t\t\t\t\t\tif (card.storage.shuitamrfzx) {\n\t\t\t\t\t\t\t\tcards.push(card);\n\t\t\t\t\t\t\t\tclearTimeout(card.timeout);\n\t\t\t\t\t\t\t\tcard.classList.remove(\"removing\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (cards.length > 0) {\n\t\t\t\t\t\t\tplayer.logSkill(\"shuitamrfz\");\n\t\t\t\t\t\t\tplayer.addToExpansion(cards, player, \"giveAuto\").gaintag.add(\"shuitamrfz\");\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tbaopomrfz: {\n\t\t\tinit: function (player) {\n\t\t\t\tplayer.storage.baopomrfz = false;\n\t\t\t},\n\t\t\taudio: 2,\n\t\t\tlimited: true,\n\t\t\tcharlotte: true,\n\t\t\tskillAnimation: true,\n\t\t\tanimationColor: \"gray\",\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn (\n\t\t\t\t\t!player.storage.baopomrfz &&\n\t\t\t\t\tplayer.countCards(\"h\", function (card) {\n\t\t\t\t\t\treturn card.storage.shuitamrfzx;\n\t\t\t\t\t}) > 0\n\t\t\t\t);\n\t\t\t},\n\t\t\tcheck: function (event, player) {\n\t\t\t\tif (player.hasUnknown()) return false;\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tcontent: function () {\n\t\t\t\t\"step 0\";\n\t\t\t\tplayer.awakenSkill(event.name);\n\t\t\t\tplayer.storage.baopomrfz = true;\n\t\t\t\tplayer.removeGaintag(\"shuitamrfzx\");\n\t\t\t\tfor (var i of player.getCards(\"h\")) {\n\t\t\t\t\tdelete i.storage.shuitamrfzx;\n\t\t\t\t}\n\t\t\t\tplayer.addTempSkill(\"baopomrfz_tmp\", { player: \"baopomrfzAfter\" });\n\t\t\t\tplayer.chooseTarget(true, \"【爆破】:请选择至多三名其他角色\", [1, 3], function (card, player, target) {\n\t\t\t\t\treturn target != player;\n\t\t\t\t}).ai = function (target) {\n\t\t\t\t\treturn get.damageEffect(target, player) && !target.hasSkillTag(\"nofire\");\n\t\t\t\t};\n\t\t\t\t(\"step 1\");\n\t\t\t\tif (result.targets) {\n\t\t\t\t\tevent.targets = result.targets;\n\t\t\t\t\tevent.cards = [];\n\t\t\t\t} else event.finish();\n\t\t\t\t(\"step 2\");\n\t\t\t\tif (event.targets.length) {\n\t\t\t\t\tevent.targets[0].judge(function (card) {\n\t\t\t\t\t\tif (get.color(card) == \"red\") return -4;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}).judge2 = function (result) {\n\t\t\t\t\t\treturn result.bool == false ? true : false;\n\t\t\t\t\t};\n\t\t\t\t} else event.goto(4);\n\t\t\t\t(\"step 3\");\n\t\t\t\tif (result.bool == false) {\n\t\t\t\t\tevent.targets[0].damage(2, \"fire\");\n\t\t\t\t\tplayer.logSkill(\"baopomrfz\", event.targets[0]);\n\t\t\t\t}\n\t\t\t\tevent.cards.push(result.card);\n\t\t\t\tevent.targets.shift();\n\t\t\t\tif (event.targets.length > 0) event.goto(2);\n\t\t\t\t(\"step 4\");\n\t\t\t\tif (event.cards) {\n\t\t\t\t\tvar cards = [];\n\t\t\t\t\tfor (var i = 0; i < event.cards.length; i++) {\n\t\t\t\t\t\tvar card = event.cards[i];\n\t\t\t\t\t\tif (get.position(card, true) == \"d\") cards.push(card);\n\t\t\t\t\t}\n\t\t\t\t\tfor (var i of cards) {\n\t\t\t\t\t\ti.storage.shuitamrfzx = true;\n\t\t\t\t\t}\n\t\t\t\t\tplayer.gain(cards, \"gain2\").gaintag.add(\"shuitamrfzx\");\n\t\t\t\t}\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\ttmp: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tmihuomrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { player: \"damageBegin\" },\n\t\t\tfilter: function (event, player) {\n\t\t\t\tif (event.source == undefined) return false;\n\t\t\t\treturn player.countCards(\"h\") > 0;\n\t\t\t},\n\t\t\tprompt: function (event, player) {\n\t\t\t\treturn \"【迷惑】:你可以令\" + get.translation(event.source) + \"展示你的一张手牌，若为‘咪啵’则此伤害-1\";\n\t\t\t},\n\t\t\tcheck: function (event, player) {\n\t\t\t\tfor (var i of player.getCards(\"h\")) {\n\t\t\t\t\tif (i.storage.shuitamrfzx) return true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tcontent: function () {\n\t\t\t\t\"step 0\";\n\t\t\t\ttrigger.source.choosePlayerCard(player, \"h\", true);\n\t\t\t\t(\"step 1\");\n\t\t\t\tplayer.showCards(result.cards, get.translation(trigger.source) + \"展示了\" + get.translation(player) + \"一张牌</br>此牌\" + (result.cards[0].storage.shuitamrfzx ? \"<font color=#FF0000>有</font>\" : \"<font color=#00FF1A>无</font>\") + \"‘咪啵’标记\");\n\t\t\t\tif (result.cards[0].storage.shuitamrfzx) {\n\t\t\t\t\tplayer.discard(result.cards[0]);\n\t\t\t\t\ttrigger.num--;\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\t//凛冬\n\t\tdongjiangmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn player.countCards(\"h\") > 0;\n\t\t\t},\n\t\t\tcheck: function (event, player) {\n\t\t\t\treturn game.hasPlayer(current => {\n\t\t\t\t\treturn current != player && get.attitude(current, player) > 0;\n\t\t\t\t});\n\t\t\t},\n\t\t\tcontent: function () {\n\t\t\t\t\"step 0\";\n\t\t\t\tplayer.chooseCard(\"【冬将】:请选择你要分配的牌\", true, [1, Infinity]);\n\t\t\t\t(\"step 1\");\n\t\t\t\tevent.cards = result.cards;\n\t\t\t\tplayer.chooseTarget(\"【冬将】:请选择你要分配的角色（\" + get.translation(event.cards) + \"）\", true, function (card, player, target) {\n\t\t\t\t\treturn target != player;\n\t\t\t\t}).ai = function (target) {\n\t\t\t\t\treturn get.attitude(target, player) > 0;\n\t\t\t\t};\n\t\t\t\t(\"step 2\");\n\t\t\t\tplayer.give(event.cards, result.targets[0]);\n\t\t\t\t(\"step 3\");\n\t\t\t\tif (player.countCards(\"h\") > 0) event.goto(0);\n\t\t\t\t(\"step 4\");\n\t\t\t\tif (player.canUseToAnyone(\"sha\")) {\n\t\t\t\t\tplayer.addTempSkill(\"dongjiangmrfz_dam\", \"useCardAfter\");\n\t\t\t\t\tplayer\n\t\t\t\t\t\t.chooseUseTarget(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: \"sha\",\n\t\t\t\t\t\t\t\tisCard: true,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\"请选择【杀】的目标\"\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.set(\"forced\", true)\n\t\t\t\t\t\t.set(\"addCount\", false);\n\t\t\t\t} else event.finish();\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\tdam: {\n\t\t\t\t\tdirect: true,\n\t\t\t\t\ttrigger: { source: \"damageEnd\" },\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn event.card.name == \"sha\" && event.card.cards.length == 0;\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tplayer.drawTo(3);\n\t\t\t\t\t\tplayer.removeSkill(\"dongjiangmrfz_dam\");\n\t\t\t\t\t\tplayer.logSkill(\"dongjiangmrfz\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\txianlingmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { global: \"roundStart\" },\n\t\t\tcontent: function () {\n\t\t\t\t\"step 0\";\n\t\t\t\tvar cards = player.getCards(\"h\");\n\t\t\t\tif (player.countCards(\"h\") < 1) event.goto(1);\n\t\t\t\tfor (var i of cards) {\n\t\t\t\t\tif (player.canUseToAnyone(i, false)) {\n\t\t\t\t\t\tevent.goto(2);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t(\"step 1\");\n\t\t\t\tplayer.draw();\n\t\t\t\tevent.goto(0);\n\t\t\t\t(\"step 2\");\n\t\t\t\tplayer\n\t\t\t\t\t.chooseToUse(\"【先领】:请使用一张牌\", true)\n\t\t\t\t\t.set(\"complexSelect\", true)\n\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\n\t\t\t\t\t\treturn player.canUse(card, target, false);\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"addCount\", false)\n\t\t\t\t\t.set(\"forced\", true);\n\t\t\t\t(\"step 3\");\n\t\t\t\tif (game.roundNumber != 1) {\n\t\t\t\t\tplayer.chooseTarget(\"【先领】:你可以令一名其他角色执行一次相同的流程\", function (card, player, target) {\n\t\t\t\t\t\treturn target != player;\n\t\t\t\t\t}).ai = function (target) {\n\t\t\t\t\t\treturn get.attitude(target, player) > 0;\n\t\t\t\t\t};\n\t\t\t\t} else event.finish();\n\t\t\t\t(\"step 4\");\n\t\t\t\tif (result.targets) {\n\t\t\t\t\tevent.target = result.targets[0];\n\t\t\t\t} else event.finish();\n\t\t\t\t(\"step 5\");\n\t\t\t\tvar cards = event.target.getCards(\"h\");\n\t\t\t\tif (event.target.countCards(\"h\") < 1) event.goto(6);\n\t\t\t\tfor (var i of cards) {\n\t\t\t\t\tif (event.target.canUseToAnyone(i, false)) {\n\t\t\t\t\t\tevent.goto(7);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t(\"step 6\");\n\t\t\t\tevent.target.draw();\n\t\t\t\tevent.goto(5);\n\t\t\t\t(\"step 7\");\n\t\t\t\tevent.target\n\t\t\t\t\t.chooseToUse(\"【先领】:请使用一张牌\")\n\t\t\t\t\t.set(\"complexSelect\", true)\n\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\n\t\t\t\t\t\treturn event.target.canUse(card, target, false);\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"addCount\", false)\n\t\t\t\t\t.set(\"forced\", true);\n\t\t\t},\n\t\t},\n\t\t//陨星\n\t\tdingyuanmrfz: {\n\t\t\tderivation: \"zhimingmrfz\",\n\t\t\tmark: true,\n\t\t\tintro: {\n\t\t\t\tcontent: function (event, player) {\n\t\t\t\t\tvar storage = player.storage.yxliumingmrfz_count;\n\t\t\t\t\tif (player.awakenedSkills && player.awakenedSkills.includes(\"dingyuanmrfz\")) {\n\t\t\t\t\t\treturn \"置于过武将牌上的牌:\" + get.translation(storage[\"card\"]);\n\t\t\t\t\t}\n\t\t\t\t\treturn \"已置于过武将牌上\" + storage[\"count\"] + \"张牌</br>置于过武将牌上的牌（装备牌和延时锦囊除外）:\" + get.translation(storage[\"card\"]);\n\t\t\t\t},\n\t\t\t},\n\t\t\tonremove: true,\n\t\t\taudio: 2,\n\t\t\tforced: true,\n\t\t\tskillAnimation: true,\n\t\t\tanimationColor: \"thunder\",\n\t\t\tunique: true,\n\t\t\tjuexingji: true,\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"phaseZhunbeiBegin\",\n\t\t\t},\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn player.storage.yxliumingmrfz_count[\"count\"] >= 3;\n\t\t\t},\n\t\t\tcontent: function () {\n\t\t\t\tplayer.awakenSkill(\"dingyuanmrfz\");\n\t\t\t\tplayer.loseMaxHp();\n\t\t\t\tplayer.addSkill(\"zhimingmrfz\");\n\t\t\t},\n\t\t},\n\t\tyxliumingmrfz: {\n\t\t\taudio: 2,\n\t\t\tforced: true,\n\t\t\ttrigger: {\n\t\t\t\tglobal: \"phaseBegin\",\n\t\t\t},\n\t\t\tmarktext: \"铭\",\n\t\t\tintro: {\n\t\t\t\tcontent: \"expansion\",\n\t\t\t\tmarkcount: \"expansion\",\n\t\t\t},\n\t\t\tonremove: function (player, skill) {\n\t\t\t\tvar cards = player.getExpansions(skill);\n\t\t\t\tif (cards.length) player.loseToDiscardpile(cards);\n\t\t\t},\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn player.getExpansions(\"yxliumingmrfz\").length < 1;\n\t\t\t},\n\t\t\tcontent: function () {\n\t\t\t\tvar cards = game.cardsGotoOrdering(get.cards(1)).cards[0];\n\t\t\t\tplayer.addToExpansion(cards, player, \"giveAuto\").gaintag.add(\"yxliumingmrfz\");\n\t\t\t},\n\t\t\tgroup: [\"yxliumingmrfz_target\", \"yxliumingmrfz_use\", \"yxliumingmrfz_count\"],\n\t\t\tsubSkill: {\n\t\t\t\tcount: {\n\t\t\t\t\tinit: function (player) {\n\t\t\t\t\t\tplayer.storage.yxliumingmrfz_count = {\n\t\t\t\t\t\t\tcount: 0,\n\t\t\t\t\t\t\tcard: [],\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t\tonremove: function (player) {\n\t\t\t\t\t\tdelete player.storage.yxliumingmrfz_count;\n\t\t\t\t\t},\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"addToExpansionAfter\",\n\t\t\t\t\t},\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn event.getParent().name == \"yxliumingmrfz\";\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tif (!player.storage.yxliumingmrfz_count)\n\t\t\t\t\t\t\tplayer.storage.yxliumingmrfz_count = {\n\t\t\t\t\t\t\t\tcount: 0,\n\t\t\t\t\t\t\t\tcard: [],\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\tif (!player.awakenedSkills || !player.awakenedSkills.includes(\"dingyuanmrfz\")) player.storage.yxliumingmrfz_count[\"count\"]++;\n\t\t\t\t\t\tif (trigger.cards) {\n\t\t\t\t\t\t\tfor (var i of trigger.cards) {\n\t\t\t\t\t\t\t\tif (get.type(i) == \"equip\" || get.type(i) == \"delay\") continue;\n\t\t\t\t\t\t\t\tif (player.storage.yxliumingmrfz_count[\"card\"].includes(i.name)) continue;\n\t\t\t\t\t\t\t\tplayer.storage.yxliumingmrfz_count[\"card\"].add(i.name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tban: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t},\n\t\t\t\tuse: {\n\t\t\t\t\tenable: \"chooseToUse\",\n\t\t\t\t\thiddenCard: function (player, name) {\n\t\t\t\t\t\tif (player.getExpansions(\"yxliumingmrfz\").length < 1) return false;\n\t\t\t\t\t\treturn name == player.getExpansions(\"yxliumingmrfz\")[0].name;\n\t\t\t\t\t},\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\tif (player.getExpansions(\"yxliumingmrfz\").length < 1) return false;\n\t\t\t\t\t\treturn event.filterCard({ name: player.getExpansions(\"yxliumingmrfz\")[0].name, isCard: true }, player, event);\n\t\t\t\t\t},\n\t\t\t\t\tchooseButton: {\n\t\t\t\t\t\tdialog: function (event, player) {\n\t\t\t\t\t\t\tvar vcards = [];\n\t\t\t\t\t\t\tvar card = player.getExpansions(\"yxliumingmrfz\")[0].name;\n\t\t\t\t\t\t\tvar type = get.translation(get.type2(card));\n\t\t\t\t\t\t\tif (event.filterCard({ name: card, isCard: true }, player, event)) vcards.push([type, \"\", card]);\n\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * @type { Dialog }\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tvar dialog = ui.create.dialog(\"流铭\", [vcards, \"vcard\"], \"hidden\");\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tdialog.direct = true;\n\t\t\t\t\t\t\treturn dialog;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbackup: function (links, player) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tfilterCard: card => {\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player;\n\t\t\t\t\t\t\t\t\treturn !!player.getExpansions(\"yxliumingmrfz\")[0];\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tselectCard: -1,\n\t\t\t\t\t\t\t\tposition: \"x\",\n\t\t\t\t\t\t\t\tviewAs: {\n\t\t\t\t\t\t\t\t\tname: links[0][2],\n\t\t\t\t\t\t\t\t\tnature: links[0][3],\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tprecontent: function () {\n\t\t\t\t\t\t\t\t\tplayer.logSkill(\"yxliumingmrfz\");\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprompt: function (links, player) {\n\t\t\t\t\t\t\treturn \"【流铭】：使用一张\" + (links[0][3] ? get.translation(links[0][3]) : \"\") + \"【\" + get.translation(links[0][2]) + \"】\";\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tai: {\n\t\t\t\t\t\torder: function () {\n\t\t\t\t\t\t\tvar player = _status.event.player;\n\t\t\t\t\t\t\tvar card = player.getExpansions(\"yxliumingmrfz\")[0];\n\t\t\t\t\t\t\treturn get.order(card) + 0.1;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tresult: {\n\t\t\t\t\t\t\tplayer: 1,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\ttarget: {\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\ttarget: \"useCardToPlayered\",\n\t\t\t\t\t},\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\tif (event.player == player) return false;\n\t\t\t\t\t\tif (player.getExpansions(\"yxliumingmrfz\").length == 0 || !event.card) return false;\n\t\t\t\t\t\tvar suit = get.suit(event.card);\n\t\t\t\t\t\treturn !!player.getExpansions(\"yxliumingmrfz\").filter(function (magic) {\n\t\t\t\t\t\t\treturn get.suit(magic) == suit || magic.number != event.card.number;\n\t\t\t\t\t\t}).length;\n\t\t\t\t\t},\n\t\t\t\t\tforced: true,\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\t\"step 0\";\n\t\t\t\t\t\tvar card = player.getExpansions(\"yxliumingmrfz\")[0];\n\t\t\t\t\t\tvar num1 = card.number,\n\t\t\t\t\t\t\tnum2 = trigger.card.number;\n\t\t\t\t\t\tif (num1 != num2) {\n\t\t\t\t\t\t\t(\"step 0\");\n\t\t\t\t\t\t\tvar type = get.type2(card);\n\t\t\t\t\t\t\tvar eff = get.effect(player, trigger.card, trigger.player, trigger.player);\n\t\t\t\t\t\t\ttrigger.player\n\t\t\t\t\t\t\t\t.chooseToDiscard(\"【流铭】:请弃置一张\" + get.translation(get.type(card)) + \"牌，否则此牌对\" + get.translation(player) + \"无效\")\n\t\t\t\t\t\t\t\t.set(\"filterCard\", function (card) {\n\t\t\t\t\t\t\t\t\treturn get.type2(card) == _status.event.type;\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.set(\"ai\", function (card) {\n\t\t\t\t\t\t\t\t\tif (_status.event.eff > 0) {\n\t\t\t\t\t\t\t\t\t\treturn 10 - get.value(card);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.set(\"eff\", eff)\n\t\t\t\t\t\t\t\t.set(\"type\", type);\n\t\t\t\t\t\t\t(\"step 1\");\n\t\t\t\t\t\t\tif (result.bool == false) {\n\t\t\t\t\t\t\t\ttrigger.targets.remove(player);\n\t\t\t\t\t\t\t\ttrigger.getParent().triggeredTargets2.remove(player);\n\t\t\t\t\t\t\t\ttrigger.untrigger();\n\t\t\t\t\t\t\t\tplayer.removeSkill(\"yxliumingmrfz_target\");\n\t\t\t\t\t\t\t\tplayer.addTempSkill(\"yxliumingmrfz_reget\", { global: \"phaseBegin\" });\n\t\t\t\t\t\t\t\tplayer.addTempSkill(\"yxliumingmrfz_ban\", { global: \"phaseEnd\" });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t(\"step 1\");\n\t\t\t\t\t\tvar card = player.getExpansions(\"yxliumingmrfz\")[0];\n\t\t\t\t\t\tif (get.suit(card) == get.suit(trigger.card)) {\n\t\t\t\t\t\t\tplayer.gain(card, \"gain2\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.logSkill(\"yxliumingmrfz\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\treget: {\n\t\t\t\t\tsilent: true,\n\t\t\t\t\ttrigger: { global: \"phaseEnd\" },\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tplayer.addSkill(\"yxliumingmrfz_target\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tzhimingmrfz: {\n\t\t\tmark: true,\n\t\t\tintro: {\n\t\t\t\tcontent: function (event, player) {\n\t\t\t\t\tvar storage = player.storage.yxliumingmrfz_count;\n\t\t\t\t\tif (player.awakenedSkills && player.awakenedSkills.includes(\"dingyuanmrfz\")) {\n\t\t\t\t\t\treturn \"置于过武将牌上的牌（装备牌和延时锦囊除外）:\" + get.translation(storage[\"card\"]);\n\t\t\t\t\t}\n\t\t\t\t\treturn \"已置于过武将牌上\" + storage[\"count\"] + \"张牌</br>置于过武将牌上的牌（装备牌和延时锦囊除外）:\" + get.translation(storage[\"card\"]);\n\t\t\t\t},\n\t\t\t},\n\t\t\taudio: 2,\n\t\t\tenable: [\"chooseToUse\", \"chooseToRespond\"],\n\t\t\thiddenCard: function (player, name) {\n\t\t\t\tvar cards = player.storage.yxliumingmrfz_count[\"card\"];\n\t\t\t\tif (player.countCards(\"he\") < 1 || !cards || player.hasSkill(\"zhimingmrfz_ban\")) return false;\n\t\t\t\tfor (var i of cards) {\n\t\t\t\t\tif (name == i) return true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tfilter: function (event, player) {\n\t\t\t\tvar cards = player.storage.yxliumingmrfz_count[\"card\"];\n\t\t\t\tif (player.countCards(\"he\") < 1 || !cards || player.hasSkill(\"zhimingmrfz_ban\")) return false;\n\t\t\t\tfor (var i of cards) {\n\t\t\t\t\tif (event.filterCard({ name: i, isCard: true }, player, event)) return true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tchooseButton: {\n\t\t\t\tdialog: function (event, player) {\n\t\t\t\t\tvar vcards = [];\n\t\t\t\t\tvar list = player.storage.yxliumingmrfz_count[\"card\"];\n\t\t\t\t\tfor (var name of list) {\n\t\t\t\t\t\tvar card = { name: name, isCard: true };\n\t\t\t\t\t\tvar type = get.type(name);\n\t\t\t\t\t\tif (event.filterCard(card, player, event)) vcards.push([type, \"\", name]);\n\t\t\t\t\t}\n\t\t\t\t\t/**\n\t\t\t\t\t * @type { Dialog }\n\t\t\t\t\t */\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tvar dialog = ui.create.dialog(\"祗铭\", [vcards, \"vcard\"], \"hidden\");\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tdialog.direct = true;\n\t\t\t\t\treturn dialog;\n\t\t\t\t},\n\t\t\t\tbackup: function (links, player) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tfilterCard: () => true,\n\t\t\t\t\t\tselectCard: 1,\n\t\t\t\t\t\tviewAs: {\n\t\t\t\t\t\t\tname: links[0][2],\n\t\t\t\t\t\t},\n\t\t\t\t\t\tposition: \"he\",\n\t\t\t\t\t\tprecontent: function () {\n\t\t\t\t\t\t\tplayer.logSkill(\"zhimingmrfz\");\n\t\t\t\t\t\t\tplayer.addTempSkill(\"zhimingmrfz_ban\", { global: \"phaseEnd\" });\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tprompt: function (links, player) {\n\t\t\t\t\treturn \"【祗铭】：将一张牌当作【\" + get.translation(links[0][2]) + \"】使用或打出\";\n\t\t\t\t},\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 1,\n\t\t\t\tresult: {\n\t\t\t\t\tplayer: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\tban: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\t//羽毛笔\n\t\ttiaojiumrfz: {\n\t\t\taudio: 2,\n\t\t\taudioname: [\"longshelanmrfz\"],\n\t\t\tderivation: [\"jiu\"],\n\t\t\tenable: \"chooseToUse\",\n\t\t\tfilterCard: function (card, player) {\n\t\t\t\tif (ui.selected.cards.length) {\n\t\t\t\t\treturn get.color(card) != get.color(ui.selected.cards[0]);\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tcomplexCard: true,\n\t\t\tselectCard: 2,\n\t\t\tviewAs: {\n\t\t\t\tname: \"jiu\",\n\t\t\t},\n\t\t\tposition: \"hs\",\n\t\t\tviewAsFilter: function (player) {\n\t\t\t\tvar hs = player.getCards(\"hs\");\n\t\t\t\tif (hs.length < 2) return false;\n\t\t\t\tvar bool = false,\n\t\t\t\t\tmap = {};\n\t\t\t\tfor (var card of hs) {\n\t\t\t\t\tvar color = get.color(card);\n\t\t\t\t\tif (!map[color]) map[color] = true;\n\t\t\t\t\telse {\n\t\t\t\t\t\tbool = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!bool) return false;\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tprompt: \"【调酒】:将两张不同颜色的手牌当酒使用\",\n\t\t\tcheck: function (card) {\n\t\t\t\treturn 10 - get.value(card);\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tthreaten: 1.5,\n\t\t\t\torder: () => {\n\t\t\t\t\tlet player = _status.event.player;\n\t\t\t\t\tif (_status.event.dying) return 9;\n\t\t\t\t\tlet cards = player.getCards(\"h\", card => {\n\t\t\t\t\t\treturn get.type(card) != \"equip\" && get.type(card) != \"delay\";\n\t\t\t\t\t});\n\t\t\t\t\tif (cards.length > 0) return 13;\n\t\t\t\t\treturn 0;\n\t\t\t\t},\n\t\t\t\tresult: {\n\t\t\t\t\ttarget: 1,\n\t\t\t\t},\n\t\t\t\ttag: {\n\t\t\t\t\tsave: 1,\n\t\t\t\t\trecover: 0.1,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\trujingmrfz: {\n\t\t\taudio: 2,\n\t\t\tdirect: true,\n\t\t\tlastDo: true,\n\t\t\tmark: true,\n\t\t\tintro: {\n\t\t\t\tcontent: function (event, player) {\n\t\t\t\t\tvar storage = player.storage.rujingmrfz;\n\t\t\t\t\tstorage[\"number\"].sort(function (a, b) {\n\t\t\t\t\t\treturn a - b;\n\t\t\t\t\t});\n\t\t\t\t\tvar str1 = \"\",\n\t\t\t\t\t\tstr2 = \"\";\n\t\t\t\t\tif (storage[\"number\"].length) str1 = str1 + storage[\"number\"];\n\t\t\t\t\telse str1 = \"无\";\n\t\t\t\t\tif (storage[\"suit\"].length) str2 = str2 + get.translation(storage[\"suit\"]);\n\t\t\t\t\telse str2 = \"无\";\n\t\t\t\t\treturn \"记录的数字:\" + str1 + \"</br>\" + \"记录的花色:\" + str2;\n\t\t\t\t},\n\t\t\t},\n\t\t\tinit: player => {\n\t\t\t\tplayer.storage.rujingmrfz = {\n\t\t\t\t\tsuit: [],\n\t\t\t\t\tnumber: [],\n\t\t\t\t\tban: [],\n\t\t\t\t\tcard: [],\n\t\t\t\t};\n\t\t\t},\n\t\t\tonremove: player => {\n\t\t\t\tdelete player.storage.rujingmrfz;\n\t\t\t},\n\t\t\ttrigger: { player: \"useCardAfter\" },\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn event.card && (event.card.number || event.card.suit);\n\t\t\t},\n\t\t\tcontent: function () {\n\t\t\t\tif (!player.storage.rujingmrfz)\n\t\t\t\t\tplayer.storage.rujingmrfz = {\n\t\t\t\t\t\tsuit: [],\n\t\t\t\t\t\tnumber: [],\n\t\t\t\t\t\tban: [],\n\t\t\t\t\t\tcard: [],\n\t\t\t\t\t};\n\t\t\t\tvar card = trigger.card,\n\t\t\t\t\tstorage = player.storage.rujingmrfz;\n\t\t\t\tif (!storage[\"card\"].includes(trigger.card)) {\n\t\t\t\t\tif (card.number && !storage[\"number\"].includes(card.number)) {\n\t\t\t\t\t\tplayer.storage.rujingmrfz[\"number\"].add(card.number);\n\t\t\t\t\t}\n\t\t\t\t\tif (card.suit && !storage[\"suit\"].includes(card.suit) && card.suit != \"none\") {\n\t\t\t\t\t\tplayer.storage.rujingmrfz[\"suit\"].add(card.suit);\n\t\t\t\t\t}\n\t\t\t\t} else player.storage.rujingmrfz[\"card\"].remove(trigger.card);\n\t\t\t},\n\t\t\tgroup: [\"rujingmrfz_addcount\", \"rujingmrfz_clear\"],\n\t\t\tsubSkill: {\n\t\t\t\tclear: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tlastDo: true,\n\t\t\t\t\ttrigger: { player: \"phaseUseEnd\" },\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn player.storage.rujingmrfz;\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tplayer.storage.rujingmrfz[\"ban\"] = [];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taddcount: {\n\t\t\t\t\taudio: \"rujingmrfz\",\n\t\t\t\t\ttrigger: { player: \"useCard\" },\n\t\t\t\t\tdirect: true,\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\tvar storage = player.storage.rujingmrfz;\n\t\t\t\t\t\tif (!event.card || !(event.card.number && event.card.suit)) return false;\n\t\t\t\t\t\tvar cardNumber = event.card.number;\n\t\t\t\t\t\tvar cardSuit = event.card.suit;\n\t\t\t\t\t\tif (!storage[\"number\"].includes(cardNumber) && !storage[\"suit\"].includes(cardSuit)) return false;\n\t\t\t\t\t\tif (get.type(event.card) == \"equip\" || get.type(event.card) == \"delay\") return false;\n\t\t\t\t\t\tif ([\"shan\", \"wuxie\"].includes(event.card.name)) return false;\n\t\t\t\t\t\treturn (storage[\"number\"].includes(cardNumber) && !storage[\"ban\"].includes(\"number\")) || (storage[\"suit\"].includes(cardSuit) && !storage[\"ban\"].includes(\"suit\"));\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\t\"step 0\";\n\t\t\t\t\t\tvar storage = player.storage.rujingmrfz,\n\t\t\t\t\t\t\tnumber = trigger.card.number,\n\t\t\t\t\t\t\tsuit = trigger.card.suit;\n\t\t\t\t\t\tvar list = [];\n\t\t\t\t\t\tif (storage[\"number\"].includes(number) && !storage[\"ban\"].includes(\"number\")) list.add(\"number\");\n\t\t\t\t\t\tif (storage[\"suit\"].includes(suit) && !storage[\"ban\"].includes(\"suit\")) list.add(\"suit\");\n\t\t\t\t\t\tevent.list = list;\n\t\t\t\t\t\tif (list.length == 1) {\n\t\t\t\t\t\t\tvar goon = true;\n\t\t\t\t\t\t\tif (trigger.card.name == \"du\") goon = false;\n\t\t\t\t\t\t\tif (trigger.card.name == \"jiedao\") goon = false;\n\t\t\t\t\t\t\tif (trigger.card.name == \"tao\" && player.getDamagedHp() == 1) goon = false;\n\t\t\t\t\t\t\tif (list.includes(\"suit\")) {\n\t\t\t\t\t\t\t\tplayer\n\t\t\t\t\t\t\t\t\t.chooseBool(\"【入境】:是否令此牌额外结算一次？（同花色）\")\n\t\t\t\t\t\t\t\t\t.set(\"ai\", function () {\n\t\t\t\t\t\t\t\t\t\treturn _status.event.goon;\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.set(\"goon\", goon);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tplayer\n\t\t\t\t\t\t\t\t\t.chooseBool(\"【入境】:是否令此牌额外结算一次？（同点数）\")\n\t\t\t\t\t\t\t\t\t.set(\"ai\", function () {\n\t\t\t\t\t\t\t\t\t\treturn _status.event.goon;\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.set(\"goon\", goon);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tplayer\n\t\t\t\t\t\t\t\t.chooseControl(\"点数\", \"花色\", \"全部\", \"cancel2\")\n\t\t\t\t\t\t\t\t.set(\"prompt\", \"【入境】:请选择一项\")\n\t\t\t\t\t\t\t\t.set(\"prompt2\", \"选择‘点数’或者‘花色’为额外结算一次，选择‘全部’为额外结算两次，选择‘取消’为不发动此技能\")\n\t\t\t\t\t\t\t\t.set(\"ai\", function () {\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player,\n\t\t\t\t\t\t\t\t\t\tcard = _status.event.card;\n\t\t\t\t\t\t\t\t\tif (card.name == \"du\" || card.name == \"jiedao\") return \"cancel2\";\n\t\t\t\t\t\t\t\t\tif (card.name == \"tao\") {\n\t\t\t\t\t\t\t\t\t\tvar hp = player.getDamagedHp();\n\t\t\t\t\t\t\t\t\t\tswitch (hp) {\n\t\t\t\t\t\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\t\t\t\t\t\treturn \"cancel2\";\n\t\t\t\t\t\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\t\t\t\t\t\treturn [\"点数\", \"花色\"].randomGet();\n\t\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\t\treturn \"全部\";\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn \"全部\";\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.set(\"card\", trigger.card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t(\"step 1\");\n\t\t\t\t\t\tvar storage = player.storage.rujingmrfz,\n\t\t\t\t\t\t\tnumber = trigger.card.number,\n\t\t\t\t\t\t\tsuit = trigger.card.suit;\n\t\t\t\t\t\tif (result.bool) {\n\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"card\"].add(trigger.card);\n\t\t\t\t\t\t\tif (event.list.includes(\"suit\")) {\n\t\t\t\t\t\t\t\ttrigger.effectCount++;\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"ban\"].add(\"suit\");\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"suit\"].remove(suit);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttrigger.effectCount++;\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"ban\"].add(\"number\");\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"number\"].remove(number);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (result.control != \"cancel2\" && result.bool != false) {\n\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"card\"].add(trigger.card);\n\t\t\t\t\t\t\tif (result.control == \"点数\") {\n\t\t\t\t\t\t\t\ttrigger.effectCount++;\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"ban\"].add(\"number\");\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"number\"].remove(number);\n\t\t\t\t\t\t\t} else if (result.control == \"花色\") {\n\t\t\t\t\t\t\t\ttrigger.effectCount++;\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"ban\"].add(\"suit\");\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"suit\"].remove(suit);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttrigger.effectCount += 2;\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"ban\"].add(\"suit\");\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"suit\"].remove(suit);\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"ban\"].add(\"number\");\n\t\t\t\t\t\t\t\tplayer.storage.rujingmrfz[\"number\"].remove(number);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\t//爱丽丝\n\t\talsmengxiangmrfz: {\n\t\t\taudio: 2,\n\t\t\tfrequent: true,\n\t\t\ttrigger: { global: \"phaseUseBegin\" },\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn event.player.storage.phaseHistory && event.player.storage.phaseHistory.hasOwnProperty(\"phaseUse\");\n\t\t\t}, //QQQ,\n\t\t\tprompt: function (event, player) {\n\t\t\t\treturn \"是否对\" + get.translation(event.player) + \"发动【梦乡】？\";\n\t\t\t},\n\t\t\tcontent: function () {\n\t\t\t\t\"step 0\";\n\t\t\t\tevent.list = [];\n\t\t\t\tfor (var name of lib.inpile) {\n\t\t\t\t\tif (get.type(name) == \"delay\" || get.type(name) == \"equip\") continue;\n\t\t\t\t\tif (get.tag({ name: name }, \"damage\")) continue;\n\t\t\t\t\tevent.list.push([get.type(name), \"\", name]);\n\t\t\t\t}\n\t\t\t\tvar dialog = [\"为\" + get.translation(trigger.player) + \"选择至多三个牌名\"];\n\t\t\t\tif (event.list.length) {\n\t\t\t\t\tdialog.push([event.list, \"vcard\"]);\n\t\t\t\t}\n\t\t\t\tif (!event.list.length) event.finish();\n\t\t\t\telse {\n\t\t\t\t\tplayer\n\t\t\t\t\t\t.chooseButton(dialog, [1, 3])\n\t\t\t\t\t\t.set(\"ai\", function (button) {\n\t\t\t\t\t\t\tlet name = button.link[2],\n\t\t\t\t\t\t\t\tlist = _status.event.list.map(i => i[2]),\n\t\t\t\t\t\t\t\tplayer = _status.event.player,\n\t\t\t\t\t\t\t\ttrigger = _status.event.getTrigger(),\n\t\t\t\t\t\t\t\ttarget = trigger.player,\n\t\t\t\t\t\t\t\tgetv = (name, player) => {\n\t\t\t\t\t\t\t\t\tlet v = trigger.getTempCache(\"alsmengxiangmrfz\", player.id + name);\n\t\t\t\t\t\t\t\t\tif (typeof v === \"number\") return v;\n\t\t\t\t\t\t\t\t\tv = player.getUseValue({ name: name });\n\t\t\t\t\t\t\t\t\ttrigger.putTempCache(\"alsmengxiangmrfz\", player.id + name, v);\n\t\t\t\t\t\t\t\t\treturn v;\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tif (get.attitude(player, target) < 0) {\n\t\t\t\t\t\t\t\tif (!list.includes(name)) return 0;\n\t\t\t\t\t\t\t\tlet val = 0;\n\t\t\t\t\t\t\t\tif (target.getDamagedHp() == 0 && name == \"tao\") val += 25;\n\t\t\t\t\t\t\t\telse if (name === \"wuxie\") val += 20;\n\t\t\t\t\t\t\t\telse if (name === \"shan\") val += 15;\n\t\t\t\t\t\t\t\telse if (name === \"jiu\") val += 6;\n\t\t\t\t\t\t\t\treturn -getv(name, target) + val;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (!list.includes(name)) return 0;\n\t\t\t\t\t\t\t\tlet val = getv(name, target),\n\t\t\t\t\t\t\t\t\tbase = 5;\n\t\t\t\t\t\t\t\tval = Math.min(15, val - base);\n\t\t\t\t\t\t\t\tif (name === \"wuzhong\" || name === \"dongzhuxianji\") val += 20;\n\t\t\t\t\t\t\t\telse if (name === \"tao\" && player.getDamagedHp() > 0) val += 15;\n\t\t\t\t\t\t\t\telse if (name === \"shunshou\") val += 6;\n\t\t\t\t\t\t\t\treturn val;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.set(\"list\", event.list);\n\t\t\t\t}\n\t\t\t\t(\"step 1\");\n\t\t\t\tif (result.bool) {\n\t\t\t\t\tvar names = result.links.map(i => i[2]),\n\t\t\t\t\t\ttarget = trigger.player;\n\t\t\t\t\tif (!target.storage.alsmengxiangmrfz_eff) target.storage.alsmengxiangmrfz_eff = [];\n\t\t\t\t\ttarget.storage.alsmengxiangmrfz_eff = target.storage.alsmengxiangmrfz_eff.concat(names);\n\t\t\t\t\tgame.log(player, \"为\", target, \"选择了\", \"#y\" + get.translation(names));\n\t\t\t\t\ttarget.addTempSkill(\"alsmengxiangmrfz_eff\", { player: \"phaseUseAfter\" });\n\t\t\t\t\ttarget.markSkill(\"alsmengxiangmrfz_eff\");\n\t\t\t\t\tplayer.logSkill(\"alsmengxiangmrfz\", trigger.player);\n\t\t\t\t}\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\teff: {\n\t\t\t\t\taudio: false,\n\t\t\t\t\tonremove: true,\n\t\t\t\t\tintro: {\n\t\t\t\t\t\tmark: function (dialog, storage, player) {\n\t\t\t\t\t\t\tif (!storage || !storage.length) return \"当前无可用牌\";\n\t\t\t\t\t\t\tdialog.add([[storage[0]], \"vcard\"]);\n\t\t\t\t\t\t\tif (storage.length > 1) dialog.addSmall([storage.slice(1), \"vcard\"]);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcontent: \"$\",\n\t\t\t\t\t},\n\t\t\t\t\tmod: {\n\t\t\t\t\t\thiddenCard: function (player, name) {\n\t\t\t\t\t\t\tvar storage = player.getStorage(\"alsmengxiangmrfz_eff\");\n\t\t\t\t\t\t\tif (storage.length) return name == storage[0];\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcardname: function (card, player) {\n\t\t\t\t\t\t\tif (_status.event.name != \"chooseToUse\" || _status.event.skill) return;\n\t\t\t\t\t\t\tvar storage = player.getStorage(\"alsmengxiangmrfz_eff\");\n\t\t\t\t\t\t\tif (storage.length) return storage[0];\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcardnature: function (card, player) {\n\t\t\t\t\t\t\tif (_status.event.name != \"chooseToUse\" || _status.event.skill) return;\n\t\t\t\t\t\t\tvar storage = player.getStorage(\"alsmengxiangmrfz_eff\");\n\t\t\t\t\t\t\tif (storage.length) return false;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: [\"useCard\", \"respond\"],\n\t\t\t\t\t},\n\t\t\t\t\tforced: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn event.cards.length > 0 && player.getStorage(\"alsmengxiangmrfz_eff\").length > 0;\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tplayer.unmarkAuto(\"alsmengxiangmrfz_eff\", [player.getStorage(\"alsmengxiangmrfz_eff\")[0]]);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tthreaten: 1.5,\n\t\t\t},\n\t\t},\n\t\trumianmrfz: {\n\t\t\tmarkimage: \"extension/WhichWay/image/orther/rumianmrfz.png\",\n\t\t\tintro: {\n\t\t\t\tcontent: \"下个结束阶段开始额外执行#个出牌阶段\",\n\t\t\t},\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tplayer: [\"phaseDiscardAfter\", \"damageEnd\"],\n\t\t\t},\n\t\t\tcontent: function () {\n\t\t\t\t\"step 0\";\n\t\t\t\tplayer.chooseTarget(true, \"【入眠】:请选择一名角色，令其于下个结束阶段开始时额外执行一个出牌阶段\").ai = function (target) {\n\t\t\t\t\tif (get.attitude(player, target) > 4) {\n\t\t\t\t\t\treturn get.threaten(target) / Math.sqrt(target.hp + 1) / Math.sqrt(target.countCards(\"h\") + 1);\n\t\t\t\t\t}\n\t\t\t\t\treturn get.attitude(player, target) > 0;\n\t\t\t\t};\n\t\t\t\t(\"step 1\");\n\t\t\t\tif (result.targets) {\n\t\t\t\t\tvar target = result.targets[0];\n\t\t\t\t\ttarget.addMark(\"rumianmrfz\", false);\n\t\t\t\t\ttarget.when({ player: \"phaseJieshuBegin\" }).then(() => {\n\t\t\t\t\t\tvar next = trigger.player.phaseUse();\n\t\t\t\t\t\tevent.next.remove(next);\n\t\t\t\t\t\ttrigger.getParent(\"phase\").next.push(next);\n\t\t\t\t\t\tplayer.removeMark(\"rumianmrfz\", false);\n\t\t\t\t\t\tgame.log(player, \"执行了一个额外的出牌阶段\");\n\t\t\t\t\t});\n\t\t\t\t\t// .emb({ firstDo: true });\n\t\t\t\t\tplayer.line(target);\n\t\t\t\t}\n\t\t\t},\n\t\t\tai: {\n\t\t\t\t//expose: 0.1,\n\t\t\t\tthreaten: 0.7,\n\t\t\t\tmaixie: true,\n\t\t\t\tmaixie_hp: true,\n\t\t\t},\n\t\t},\n\t\t//天火\n\t\tzhuihuomrfz: {\n\t\t\tinit(player, skill) {\n\t\t\t\tplayer.storage[skill] = [];\n\t\t\t},\n\t\t\taudio: 2,\n\t\t\tenable: \"phaseUse\",\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn (\n\t\t\t\t\tplayer.countCards(\"hs\", card => {\n\t\t\t\t\t\treturn (get.name(card) == \"sha\" && get.nature(card) == \"fire\") || get.name(card) == \"huogong\";\n\t\t\t\t\t}) > 0\n\t\t\t\t);\n\t\t\t},\n\t\t\tfilterCard: function (card) {\n\t\t\t\treturn (get.name(card) == \"sha\" && get.nature(card) == \"fire\") || get.name(card) == \"huogong\";\n\t\t\t},\n\t\t\tfilterTarget: function (card, player, target) {\n\t\t\t\treturn target != player && !player.storage.zhuihuomrfz.includes(target);\n\t\t\t},\n\t\t\tdiscard: false,\n\t\t\tlose: false,\n\t\t\tdelay: false,\n\t\t\tcontent: function () {\n\t\t\t\tplayer.storage.zhuihuomrfz.add(target);\n\t\t\t\ttarget.addJudge({ name: \"sjzx_zhuihuomrfz\" }, cards);\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 5,\n\t\t\t\tresult: {\n\t\t\t\t\tplayer: 1,\n\t\t\t\t\ttarget: function (player, target) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tget.attitude(player, target) < 0 &&\n\t\t\t\t\t\t\ttarget.getCards(\"j\", function (card) {\n\t\t\t\t\t\t\t\treturn get.name(card) == \"sjzx_zhuihuomrfz\";\n\t\t\t\t\t\t\t}).length < target.hp\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tif (target.countCards(\"he\") < 2 && target.hp < 2) return -3;\n\t\t\t\t\t\t\tif (target.countCards(\"he\") < 2) return -2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tgroup: [\"zhuihuomrfz_clear\"],\n\t\t\tsubSkill: {\n\t\t\t\tclear: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\ttrigger: { player: \"phaseUseEnd\" },\n\t\t\t\t\tcontent() {\n\t\t\t\t\t\tplayer.storage.zhuihuomrfz = [];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tyihuomrfz: {\n\t\t\tmod: {\n\t\t\t\tcardname: function (card, player) {\n\t\t\t\t\tif (card.storage && card.storage.yihuomrfz == true) return \"sha\";\n\t\t\t\t},\n\t\t\t\tcardnature: function (card, player) {\n\t\t\t\t\tif (card.storage && card.storage.yihuomrfz == true) return \"fire\";\n\t\t\t\t},\n\t\t\t},\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tglobal: \"damageEnd\",\n\t\t\t},\n\t\t\tusable: 2,\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn event.nature == \"fire\";\n\t\t\t},\n\t\t\tforced: true,\n\t\t\tcontent: function () {\n\t\t\t\tplayer.draw(2);\n\t\t\t},\n\t\t\tai: {\n\t\t\t\teffect: {\n\t\t\t\t\ttarget: function (card, player, target, current) {\n\t\t\t\t\t\tif (get.tag(card, \"respondSha\") && current < 0) return 0.6;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\trespondSha: true,\n\t\t\t},\n\t\t\tgroup: [\"yihuomrfz_gain\", \"yihuomrfz_cancel\"],\n\t\t\tsubSkill: {\n\t\t\t\tcancel: {\n\t\t\t\t\tdirect: true,\n\t\t\t\t\ttrigger: { player: \"damageBegin4\" },\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn event.nature == \"fire\";\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t\tplayer.draw(3);\n\t\t\t\t\t\tplayer.logSkill(\"yihuomrfz\");\n\t\t\t\t\t},\n\t\t\t\t\tai: {\n\t\t\t\t\t\teffect: {\n\t\t\t\t\t\t\ttarget: function (card, player, target) {\n\t\t\t\t\t\t\t\tif (get.tag(card, \"fireDamage\")) return [0, 1];\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tgain: {\n\t\t\t\t\tdirect: true,\n\t\t\t\t\ttrigger: { player: \"gainAfter\" },\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\tif (!event.cards || event.cards.length < 2) return false;\n\t\t\t\t\t\treturn event.cards.some(element => player.getCards(\"h\").includes(element));\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\t\"step 0\";\n\t\t\t\t\t\tplayer\n\t\t\t\t\t\t\t.chooseCard(true, \"【溢火】:请选择一张牌，令此牌视为火【杀】\", function (card) {\n\t\t\t\t\t\t\t\treturn trigger.cards.includes(card);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.set(\"ai\", function (card) {\n\t\t\t\t\t\t\t\treturn -get.value(card);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t(\"step 1\");\n\t\t\t\t\t\tif (result.cards) {\n\t\t\t\t\t\t\tresult.cards[0].storage.yihuomrfz = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar color,\n\t\t\t\t\t\t\tbool = true;\n\t\t\t\t\t\tfor (var i of trigger.cards) {\n\t\t\t\t\t\t\tif (typeof color !== \"string\") color = get.color(i, player);\n\t\t\t\t\t\t\tif (get.color(i, player) != color) {\n\t\t\t\t\t\t\t\tbool = false;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (bool == true) player.draw();\n\t\t\t\t\t\tplayer.logSkill(\"yihuomrfz\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\t//临光\n\t\tanranmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tglobal: \"phaseBefore\",\n\t\t\t\tplayer: \"enterGame\",\n\t\t\t},\n\t\t\tforced: true,\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\n\t\t\t},\n\t\t\tcontent: function () {\n\t\t\t\tvar cards = player.getCards(\"h\");\n\t\t\t\tplayer.discard(cards);\n\t\t\t},\n\t\t\tgroup: [\"anranmrfz_draw\"],\n\t\t\tsubSkill: {\n\t\t\t\tdraw: {\n\t\t\t\t\taudio: \"anranmrfz\",\n\t\t\t\t\ttrigger: { player: \"phaseBegin\" },\n\t\t\t\t\tinit: player => {\n\t\t\t\t\t\tplayer.storage.anranmrfz_draw = false;\n\t\t\t\t\t},\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn !player.storage.anranmrfz_draw;\n\t\t\t\t\t},\n\t\t\t\t\tforced: true,\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tvar num = player.hujia + player.hp;\n\t\t\t\t\t\tplayer.storage.anranmrfz_draw = true;\n\t\t\t\t\t\tplayer.draw(2 * num);\n\t\t\t\t\t\tplayer.changeHujia(-player.hujia);\n\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t\tplayer.when(\"phaseDiscardBefore\").then(() => {\n\t\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t\t\tplayer.logSkill(\"anranmrfz\");\n\t\t\t\t\t\t});\n\t\t\t\t\t\t// .emb({ firstDo: true });\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\thuchimrfz: {\n\t\t\taudio: 2,\n\t\t\tusable: 1,\n\t\t\tenable: \"phaseUse\",\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn player.countCards(\"he\") > 0;\n\t\t\t},\n\t\t\tfilterTarget: function (card, player, target) {\n\t\t\t\treturn target != player;\n\t\t\t},\n\t\t\tfilterCard: true,\n\t\t\tposition: \"he\",\n\t\t\tcheck: function (card) {\n\t\t\t\treturn 6 - get.value(card);\n\t\t\t},\n\t\t\tlose: false,\n\t\t\tdiscard: false,\n\t\t\tdelay: false,\n\t\t\tcontent: function () {\n\t\t\t\t\"step 0\";\n\t\t\t\tplayer.give(cards, target, \"give\");\n\t\t\t\tfor (var i of cards) {\n\t\t\t\t\ti.storage.huchimrfz = true;\n\t\t\t\t}\n\t\t\t\t(\"step 1\");\n\t\t\t\tvar view = get.autoViewAs({ name: \"sha\" }, cards);\n\t\t\t\ttarget\n\t\t\t\t\t.chooseTarget(\"【互持】:请选择使用【杀】的目标\", function (card, player, target) {\n\t\t\t\t\t\tvar view = _status.event.view;\n\t\t\t\t\t\tvar playerx = _status.event.playerx;\n\t\t\t\t\t\treturn target != playerx && playerx.canUse(view, target);\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"view\", view)\n\t\t\t\t\t.set(\"playerx\", target).ai = function (target) {\n\t\t\t\t\tvar view = _status.event.view;\n\t\t\t\t\tvar player = _status.event.playerx;\n\t\t\t\t\treturn get.effect(target, view, player, player);\n\t\t\t\t};\n\t\t\t\t(\"step 2\");\n\t\t\t\tif (result.targets) {\n\t\t\t\t\tvar card = get.autoViewAs({ name: \"sha\" }, cards);\n\t\t\t\t\tif (\n\t\t\t\t\t\ttarget.hasCard(card => {\n\t\t\t\t\t\t\treturn card == cards[0];\n\t\t\t\t\t\t}, \"h\")\n\t\t\t\t\t)\n\t\t\t\t\t\ttarget.useCard(result.targets[0], card, cards);\n\t\t\t\t}\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 4,\n\t\t\t\tresult: {\n\t\t\t\t\ttarget: function (player, target) {\n\t\t\t\t\t\tif (get.attitude(player, target) > 2) {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tgame.hasPlayer(current => {\n\t\t\t\t\t\t\t\t\treturn target.canUse(\"sha\", current) && get.attitude(player, target);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\treturn 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tgroup: [\"huchimrfz_recover\", \"huchimrfz_gain\"],\n\t\t\tsubSkill: {\n\t\t\t\trecover: {\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"recoverEnd\",\n\t\t\t\t\t\tglobal: \"recoverEnd\",\n\t\t\t\t\t},\n\t\t\t\t\tusable: 1,\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\tif (!event.source.isIn() || !event.player.isIn() || event.source === undefined || !event.player) return false;\n\t\t\t\t\t\tif (event.source == player && event.player == player) return false;\n\t\t\t\t\t\tif (event.source != player && event.player != player) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},\n\t\t\t\t\tdirect: true,\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\t\"step 0\";\n\t\t\t\t\t\ttrigger.player\n\t\t\t\t\t\t\t.chooseCardTarget({\n\t\t\t\t\t\t\t\tprompt: \"【互持】:你可以将一张牌交给回复来源\",\n\t\t\t\t\t\t\t\tfilterCard: true,\n\t\t\t\t\t\t\t\tposition: \"he\",\n\t\t\t\t\t\t\t\tfilterTarget: function (card, player, target) {\n\t\t\t\t\t\t\t\t\tvar source = _status.event.source;\n\t\t\t\t\t\t\t\t\treturn target != player && target == source;\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tai1: function (card) {\n\t\t\t\t\t\t\t\t\treturn 8 - get.value(card);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tai2: function (target) {\n\t\t\t\t\t\t\t\t\tvar playerx = _status.event.playerx;\n\t\t\t\t\t\t\t\t\treturn get.attitude(playerx, target) > 0;\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.set(\"source\", trigger.source)\n\t\t\t\t\t\t\t.set(\"playerx\", trigger.player);\n\t\t\t\t\t\t(\"step 1\");\n\t\t\t\t\t\tif (result.bool) {\n\t\t\t\t\t\t\ttrigger.player.give(result.cards, result.targets[0]);\n\t\t\t\t\t\t\ttrigger.player.draw();\n\t\t\t\t\t\t\ttrigger.source.draw();\n\t\t\t\t\t\t\ttrigger.player.logSkill(\"huchimrfz\", trigger.source);\n\t\t\t\t\t\t} else player.storage.counttrigger.huchimrfz_recover--;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tgain: {\n\t\t\t\t\tdirect: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"gainEnd\",\n\t\t\t\t\t\tglobal: \"gainEnd\",\n\t\t\t\t\t},\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\tif (event.source == undefined || event.player == undefined) return false;\n\t\t\t\t\t\tif (!event.source.isIn() || !event.player.isIn()) return false;\n\t\t\t\t\t\tif (event.source == player && event.player == player) return false;\n\t\t\t\t\t\tif (event.source != player && event.player != player) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},\n\t\t\t\t\tusable: 1,\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\t\"step 0\";\n\t\t\t\t\t\ttrigger.player\n\t\t\t\t\t\t\t.chooseCardTarget({\n\t\t\t\t\t\t\t\tprompt: \"【互持】:你可以将一张牌交给给予来源\",\n\t\t\t\t\t\t\t\tfilterCard: true,\n\t\t\t\t\t\t\t\tposition: \"he\",\n\t\t\t\t\t\t\t\tfilterTarget: function (card, player, target) {\n\t\t\t\t\t\t\t\t\tvar source = _status.event.source;\n\t\t\t\t\t\t\t\t\treturn target != player && target == source;\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tai1: function (card) {\n\t\t\t\t\t\t\t\t\tif (card.storage.huchimrfz) return 0;\n\t\t\t\t\t\t\t\t\treturn 8 - get.value(card);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tai2: function (target) {\n\t\t\t\t\t\t\t\t\tvar playerx = _status.event.playerx;\n\t\t\t\t\t\t\t\t\treturn get.attitude(playerx, target) > 0;\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.set(\"source\", trigger.source)\n\t\t\t\t\t\t\t.set(\"playerx\", trigger.player);\n\t\t\t\t\t\t(\"step 1\");\n\t\t\t\t\t\tif (result.bool) {\n\t\t\t\t\t\t\ttrigger.player.give(result.cards, result.targets[0]);\n\t\t\t\t\t\t\ttrigger.player.draw();\n\t\t\t\t\t\t\ttrigger.source.draw();\n\t\t\t\t\t\t\ttrigger.player.logSkill(\"huchimrfz\", trigger.source);\n\t\t\t\t\t\t} else player.storage.counttrigger.huchimrfz_gain--;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tchongyaomrfz: {\n\t\t\taudio: 2,\n\t\t\tmark: true,\n\t\t\tintro: {\n\t\t\t\tcontent: function (event, player) {\n\t\t\t\t\treturn `${player.storage.chongyaomrfz_mark[\"count\"]}/5`;\n\t\t\t\t},\n\t\t\t},\n\t\t\tderivation: [\"zhuguangmrfz\"],\n\t\t\tinit: player => {\n\t\t\t\tplayer.storage.chongyaomrfz = false;\n\t\t\t},\n\t\t\ttrigger: {\n\t\t\t\tplayer: [\"huchimrfzAfter\", \"huchimrfz_gainAfter\", \"huchimrfz_recoverAfter\"],\n\t\t\t\tglobal: [\"huchimrfzAfter\", \"huchimrfz_gainAfter\", \"huchimrfz_recoverAfter\"],\n\t\t\t},\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn player.storage.chongyaomrfz_mark[\"count\"] >= 5 && !player.storage.chongyaomrfz;\n\t\t\t},\n\t\t\tjuexingji: true,\n\t\t\tskillAnimation: true,\n\t\t\tanimationColor: \"wood\",\n\t\t\tunique: true,\n\t\t\tforced: true,\n\t\t\tcontent: () => {\n\t\t\t\tplayer.loseMaxHp();\n\t\t\t\tplayer.addSkill(\"zhuguangmrfz\");\n\t\t\t\tplayer.awakenSkill(\"chongyaomrfz\");\n\t\t\t\tgame.log(player, \"获得了技能\", \"#g【逐光】\");\n\t\t\t\tplayer.storage.chongyaomrfz = true;\n\t\t\t\tdelete player.storage.chongyaomrfz_mark;\n\t\t\t\tplayer.unmarkAuto(player.storage.chongyaomrfz);\n\t\t\t\tplayer.removeSkill(\"chongyaomrfz_mark\");\n\t\t\t},\n\t\t\tgroup: [\"chongyaomrfz_mark\", \"chongyaomrfz_clear\"],\n\t\t\tsubSkill: {\n\t\t\t\tclear: {\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tfirstDo: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tglobal: \"phaseBegin\",\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tplayer.storage.chongyaomrfz_mark[\"skill\"] = [];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tmark: {\n\t\t\t\t\tinit: player => {\n\t\t\t\t\t\tplayer.storage.chongyaomrfz_mark = {\n\t\t\t\t\t\t\tcount: 0,\n\t\t\t\t\t\t\tskill: [],\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t\tonremove: player => {\n\t\t\t\t\t\tdelete player.storage.chongyaomrfz_mark;\n\t\t\t\t\t},\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tfirstDo: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: [\"huchimrfzAfter\", \"huchimrfz_gainAfter\", \"huchimrfz_recoverAfter\"],\n\t\t\t\t\t\tglobal: [\"huchimrfzAfter\", \"huchimrfz_gainAfter\", \"huchimrfz_recoverAfter\"],\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tif (!player.storage.chongyaomrfz_mark) player.storage.chongyaomrfz_mark = 0;\n\t\t\t\t\t\tfor (var i of [\"huchimrfz\", \"huchimrfz_gain\", \"huchimrfz_recover\"]) {\n\t\t\t\t\t\t\tif (!player.storage.counttrigger.hasOwnProperty(trigger.name) && i != \"huchimrfz\") continue;\n\t\t\t\t\t\t\tif (player.storage.chongyaomrfz_mark[\"skill\"].includes(trigger.name)) continue;\n\t\t\t\t\t\t\tif (i == \"huchimrfz\" && trigger.name == \"huchimrfz\") {\n\t\t\t\t\t\t\t\tplayer.storage.chongyaomrfz_mark[\"count\"]++;\n\t\t\t\t\t\t\t\tplayer.storage.chongyaomrfz_mark[\"skill\"].add(trigger.name);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (player.storage.counttrigger[trigger.name] > 0) {\n\t\t\t\t\t\t\t\tplayer.storage.chongyaomrfz_mark[\"count\"]++;\n\t\t\t\t\t\t\t\tplayer.storage.chongyaomrfz_mark[\"skill\"].add(trigger.name);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\t//海沫\n\t\txunchaomrfz: {\n\t\t\tintro: {\n\t\t\t\tcontent: \"下次造成的伤害+#\",\n\t\t\t},\n\t\t\taudio: 2,\n\t\t\tenable: \"phaseUse\",\n\t\t\tusable: 1,\n\t\t\tfilter: function (event, player) {\n\t\t\t\tif (player.countCards(\"h\") < 1) return false;\n\t\t\t\treturn game.hasPlayer(current => {\n\t\t\t\t\treturn current != player && (current.hp > player.hp || current.countCards(\"h\") > player.countCards(\"h\") || current.countCards(\"e\") > player.countCards(\"e\"));\n\t\t\t\t});\n\t\t\t},\n\t\t\tcomplexCard: true,\n\t\t\tfilterCard: function (card, player) {\n\t\t\t\tvar selected = ui.selected.cards;\n\t\t\t\tif (!selected.length) return true;\n\t\t\t\tfor (var i = 0; i < selected.length; i++) {\n\t\t\t\t\tif (get.type2(card) == get.type2(selected[i])) return false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tfilterTarget: function (card, player, target) {\n\t\t\t\treturn target != player && (target.hp > player.hp || target.countCards(\"h\") > player.countCards(\"h\") || target.countCards(\"e\") > player.countCards(\"e\"));\n\t\t\t},\n\t\t\tselectCard: [1, Infinity],\n\t\t\tcheck: function (card) {\n\t\t\t\treturn 10 - get.value(card);\n\t\t\t},\n\t\t\tdiscard: false,\n\t\t\tlose: false,\n\t\t\tdelay: false,\n\t\t\tcontent: function () {\n\t\t\t\t\"step 0\";\n\t\t\t\tplayer.give(cards, target);\n\t\t\t\t(\"step 1\");\n\t\t\t\tvar num = cards.length;\n\t\t\t\tif (num >= 1) {\n\t\t\t\t\tplayer.recover();\n\t\t\t\t}\n\t\t\t\tif (num >= 2) {\n\t\t\t\t\tplayer.adjustHandCardTo(target.countCards(\"h\"));\n\t\t\t\t}\n\t\t\t\tif (num >= 3) {\n\t\t\t\t\tplayer.addMark(\"xunchaomrfz\", 1, false);\n\t\t\t\t\tplayer.when({ source: \"damageBegin3\" }).then(() => {\n\t\t\t\t\t\tplayer.removeMark(\"xunchaomrfz\", 1, false);\n\t\t\t\t\t\ttrigger.num++;\n\t\t\t\t\t});\n\t\t\t\t\t// .emb({ firstDo: true });\n\t\t\t\t}\n\t\t\t},\n\t\t\tai: {\n\t\t\t\texpose: 0.1,\n\t\t\t\torder: 3,\n\t\t\t\tresult: {\n\t\t\t\t\ttarget: function (player, target) {\n\t\t\t\t\t\tif (get.attitude(target, player) > 0) {\n\t\t\t\t\t\t\treturn 1 + target.countCards(\"h\") * 0.1;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tpaoyingmrfz: {\n\t\t\taudio: 2,\n\t\t\tforced: true,\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn player.countCards(\"h\") > player.hp && player.getDamagedHp() > 0;\n\t\t\t},\n\t\t\tcontent: function () {\n\t\t\t\t\"step 0\";\n\t\t\t\tplayer.adjustHandCardTo(player.hp);\n\t\t\t\t(\"step 1\");\n\t\t\t\tif (result.cards) {\n\t\t\t\t\tplayer.recover(Math.min(result.cards.length, 2));\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\n\t\t//小满\n\t\tmushoumrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { global: \"phaseEnd\" },\n\t\t\tdirect: true,\n\t\t\tgetCanUseCard: function (event, player) {\n\t\t\t\tvar history = event.player.getHistory(\"lose\", function (evt) {\n\t\t\t\t\t\treturn evt && evt.type == \"discard\";\n\t\t\t\t\t}),\n\t\t\t\t\tcards = [];\n\t\t\t\tif (history.length == 0) return cards;\n\t\t\t\tfor (var i = 0; i < history.length; i++) {\n\t\t\t\t\tvar cardsList = history[i].cards;\n\t\t\t\t\tfor (var j = 0; j < cardsList.length; j++) {\n\t\t\t\t\t\tif (!player.canUseToAnyone(cardsList[j])) continue;\n\t\t\t\t\t\tif (get.position(cardsList[j], true) != \"d\") continue;\n\t\t\t\t\t\tcards.push(cardsList[j]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn cards;\n\t\t\t},\n\t\t\tfilter: function (event, player) {\n\t\t\t\tvar cards = lib.skill.mushoumrfz.getCanUseCard(event, player);\n\t\t\t\treturn cards.length > 0 && event.player != player;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet cards = lib.skill.mushoumrfz.getCanUseCard(trigger, player);\n\t\t\t\twhile (true) {\n\t\t\t\t\tconst {\n\t\t\t\t\t\tresult: { bool, links },\n\t\t\t\t\t} = await player\n\t\t\t\t\t\t.chooseButton([\"【牧兽】：是否使用这些牌？\", cards])\n\t\t\t\t\t\t.set(\"filterButton\", button => {\n\t\t\t\t\t\t\treturn _status.event.player.canUseToAnyone(button.link);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.set(\"ai\", button => {\n\t\t\t\t\t\t\treturn _status.event.player.getUseValue(button.link);\n\t\t\t\t\t\t});\n\t\t\t\t\tif (!bool) return;\n\t\t\t\t\tcards.remove(links[0]);\n\t\t\t\t\tplayer.$gain2(links[0], false);\n\t\t\t\t\tplayer.chooseUseTarget(links[0], true);\n\t\t\t\t\tplayer.logSkill(\"mushoumrfz\");\n\t\t\t\t\tcards = cards.filter(card => {\n\t\t\t\t\t\treturn get.position(card, true) == \"d\" && player.canUseToAnyone(card);\n\t\t\t\t\t});\n\t\t\t\t\tif (cards.length == 0) return;\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\n\t\t//万顷\n\t\tguantianmrfz: {\n\t\t\taudio: 2,\n\t\t\tforced: true,\n\t\t\ttrigger: { global: \"drawBegin\" },\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn _status.currentPhase == player && event.getParent(1).name != \"guantianmrfz\";\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\ttrigger.cancel();\n\t\t\t\ttrigger.player.chooseToGuanxing(trigger.num);\n\t\t\t\ttrigger.player.draw(trigger.num);\n\t\t\t},\n\t\t},\n\t\tyingfengmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { player: \"phaseBeginStart\" },\n\t\t\tfrequent: true,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tvar list = Array.from({ length: lib.phaseName.length }, (_, index) => (index + 1).toString());\n\t\t\t\tconst {index} = await player\n\t\t\t\t\t.chooseControl(list)\n\t\t\t\t\t.set(\"prompt\", \"【万顷】:请选择你要跳过的阶段数\")\n\t\t\t\t\t.set(\"ai\", function () {\n\t\t\t\t\t\tvar player = _status.event.player;\n\t\t\t\t\t\tvar friend = game.filterPlayer(current => {\n\t\t\t\t\t\t\treturn get.attitude(current, player) > 0;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvar list = _status.event.list;\n\t\t\t\t\t\tif (friend.length > 3 && player.getSkillsList().length > 1) return list.length - 1;\n\t\t\t\t\t\tif (player.countCards(\"h\") <= player.getHandcardLimit() && friend.length > 2) return 3;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"list\", list)\n\t\t\t\t\t.forResult();\n\t\t\t\tif (!index) return;\n\t\t\t\tlet phase = [],\n\t\t\t\t\tnum = index + 1;\n\t\t\t\tfor (var i = 0; i < num; i++) {\n\t\t\t\t\tplayer.skip(lib.phaseName[i]);\n\t\t\t\t\tphase.push(lib.phaseName[i]);\n\t\t\t\t}\n\t\t\t\tgame.log(player, \"跳过了\", `#y${get.tranPhase(phase)}`);\n\t\t\t\tplayer\n\t\t\t\t\t.when(\"phaseEnd\")\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tplayer.chooseTarget(true, `【应风】:请选择至多${get.cnNumber(index)}名角色，令其摸${get.cnNumber(Math.floor(index / 2))}张牌`, [1, index]).ai = function (target) {\n\t\t\t\t\t\t\treturn get.attitude(player, target) > 0;\n\t\t\t\t\t\t};\n\t\t\t\t\t})\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tif (result.targets) {\n\t\t\t\t\t\t\tgame.asyncDraw(result.targets, Math.floor(index / 2));\n\t\t\t\t\t\t} else event.finish();\n\t\t\t\t\t})\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tvar list = player.getSkillsList();\n\t\t\t\t\t\tif (index > 4 && list.length > 0) {\n\t\t\t\t\t\t\tif (list.length == 1) {\n\t\t\t\t\t\t\t\tplayer.removeSkill(list[0]);\n\t\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t\t} else\n\t\t\t\t\t\t\t\tplayer\n\t\t\t\t\t\t\t\t\t.chooseControl(list)\n\t\t\t\t\t\t\t\t\t.set(\"prompt\", \"【应风】:请选择失去一个技能\")\n\t\t\t\t\t\t\t\t\t.set(\"ai\", function () {\n\t\t\t\t\t\t\t\t\t\tvar list = _status.event.list;\n\t\t\t\t\t\t\t\t\t\tif (list.includes(\"yingfengmrfz\") && list.length > 1) list.remove(\"yingfengmrfz\");\n\t\t\t\t\t\t\t\t\t\treturn list.randomGet();\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.set(\"list\", list);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tif (result.control) {\n\t\t\t\t\t\t\tplayer.removeSkill(result.control);\n\t\t\t\t\t\t\tgame.log(player, `失去了技能<span class=\"yellowtext\">【${get.translation(result.control)}】</span>`);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.vars({ index: num });\n\t\t\t},\n\t\t\tai: {\n\t\t\t\teffect: {\n\t\t\t\t\ttarget: function (card, player, target, current) {\n\t\t\t\t\t\tif (get.type(card) == \"delay\") return \"zeroplayertarget\";\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t//格劳克斯\n\t\tcichongmrfz: {\n\t\t\taudio: 2,\n\t\t\tinit: (player, skill) => {\n\t\t\t\tplayer.storage.cichongmrfz = [];\n\t\t\t},\n\t\t\tintro: {\n\t\t\t\tcontent: (event, player, storage) => {\n\t\t\t\t\treturn `已经弃置过的类型：${get.translation(player.storage[storage])}`;\n\t\t\t\t},\n\t\t\t},\n\t\t\tenable: \"phaseUse\",\n\t\t\tfilter: function (event, player) {\n\t\t\t\tvar hs = player.countCards(\"he\", function (card) {\n\t\t\t\t\t\treturn !player.storage.cichongmrfz.includes(get.type2(card));\n\t\t\t\t\t}),\n\t\t\t\t\tbool = false;\n\t\t\t\tfor (var i of game.players) {\n\t\t\t\t\tif (player.canUse(\"sha\", i) || i != player) continue;\n\t\t\t\t\tbool = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\treturn hs > 0 && bool;\n\t\t\t},\n\t\t\tfilterCard: function (card) {\n\t\t\t\tvar storage = _status.event.player.storage.cichongmrfz;\n\t\t\t\treturn !storage.includes(get.type2(card));\n\t\t\t},\n\t\t\tfilterTarget: lib.filter.notMe,\n\t\t\tposition: \"he\",\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tplayer.markSkill(\"cichongmrfz\");\n\t\t\t\tconst target = event.targets[0],\n\t\t\t\t\tcard = event.cards[0];\n\t\t\t\tplayer.storage.cichongmrfz.add(get.type2(card));\n\t\t\t\tconst {bool} = await target\n\t\t\t\t\t.chooseToDiscard()\n\t\t\t\t\t.set(\"prompt\", `【磁冲】:请弃置一张【闪】或防具牌，否则受到来自${get.translation(player)}的一点伤害`)\n\t\t\t\t\t.set(\"filterCard\", card => get.name(card, target) == \"shan\" || get.subtype(card) == \"equip2\")\n\t\t\t\t\t.set(\"ai\", card => get.value(card) < 8)\n\t\t\t\t\t.forResult();\n\t\t\t\tif (bool) return;\n\t\t\t\ttarget.damage();\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 4,\n\t\t\t\tresult: {\n\t\t\t\t\ttarget: function (player, target) {\n\t\t\t\t\t\tif (get.attitude(player, target) < 0) {\n\t\t\t\t\t\t\treturn -(1 + target.countCards(\"h\") * 0.1 + target.hp * 0.5);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tgroup: [\"cichongmrfz_add\", \"cichongmrfz_clear\"],\n\t\t\tsubSkill: {\n\t\t\t\tclear: {\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tplayer.unmarkSkill(\"cichongmrfz\");\n\t\t\t\t\t\tplayer.storage.cichongmrfz = [];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tadd: {\n\t\t\t\t\tforced: true,\n\t\t\t\t\tfirstDo: true,\n\t\t\t\t\ttrigger: { source: \"damageBegin3\" },\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn !player.canUse(\"sha\", event.player) && event.player.isIn();\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\ttrigger.num++;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tganraomrfz: {\n\t\t\taudio: 2,\n\t\t\tinit: (player, skill) => {\n\t\t\t\tplayer.storage[skill] = [];\n\t\t\t},\n\t\t\ttrigger: { source: \"damageBegin3\" },\n\t\t\tfilter: function (event, player) {\n\t\t\t\tvar storage = player.storage.ganraomrfz;\n\t\t\t\treturn !storage.includes(event.player) && event.player.isIn();\n\t\t\t},\n\t\t\tcheck: function (event, player) {\n\t\t\t\treturn get.attitude(player, event.player) < 0;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet dialog = [\"【干扰】:请选择一张牌\"],\n\t\t\t\t\tlist = [];\n\t\t\t\tfor (var i = 0; i < lib.inpile.length; i++) {\n\t\t\t\t\tvar name = lib.inpile[i];\n\t\t\t\t\tif (get.type(name) == \"equip\") list.push([\"装备\", \"\", name]);\n\t\t\t\t\telse if (get.type2(name) == \"trick\") list.push([\"锦囊\", \"\", name]);\n\t\t\t\t\telse if (get.type(name) == \"basic\") list.push([\"基本\", \"\", name]);\n\t\t\t\t}\n\t\t\t\tdialog.push([list, \"vcard\"]);\n\t\t\t\tconst {links} = await player\n\t\t\t\t\t.chooseButton(1, true)\n\t\t\t\t\t.set(\"createDialog\", dialog)\n\t\t\t\t\t.set(\"ai\", button => {\n\t\t\t\t\t\tvar target = _status.event.target;\n\t\t\t\t\t\tif (target.hp < 2) return [\"tao\", \"jiu\"].randomGet();\n\t\t\t\t\t\treturn [\"shan\", \"wuxie\", \"tao\"].randomGet();\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"target\", trigger.player)\n\t\t\t\t\t.forResult();\n\t\t\t\tif (!links) return;\n\t\t\t\tif (!trigger.player.storage.ganraomrfz_ban) trigger.player.storage.ganraomrfz_ban = [];\n\t\t\t\ttrigger.player.storage.ganraomrfz_ban.add(links[0][2]);\n\t\t\t\ttrigger.player.addTempSkill(\"ganraomrfz_ban\", { global: \"phaseEnd\" });\n\t\t\t\tplayer.storage.ganraomrfz.add(trigger.player);\n\t\t\t},\n\t\t\tgroup: [\"ganraomrfz_clear\"],\n\t\t\tsubSkill: {\n\t\t\t\tban: {\n\t\t\t\t\tmod: {\n\t\t\t\t\t\tcardEnabled2: function (card, player) {\n\t\t\t\t\t\t\tif (player.storage.ganraomrfz_ban.includes(get.name(card, player))) return false;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tonremove: (player, skill) => {\n\t\t\t\t\t\tdelete player.storage[skill];\n\t\t\t\t\t},\n\t\t\t\t\tmark: true,\n\t\t\t\t\tintro: {\n\t\t\t\t\t\tcontent: (event, player, storage) => {\n\t\t\t\t\t\t\treturn `不能使用或打出${get.translation(player.storage[storage])}`;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tclear: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\ttrigger: { global: \"phaseEnd\" },\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tplayer.storage.ganraomrfz = [];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t//海蒂\n\t\tanxinmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { global: \"gainEnd\" },\n\t\t\tfilter: function (event, player) {\n\t\t\t\tif (event.source === undefined || !event.source.isIn()) return false;\n\t\t\t\tif (event.source != player || !event.cards) return false;\n\t\t\t\treturn event.cards.length > 0;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet num = trigger.cards.length,\n\t\t\t\t\tdialog = [\"【暗信】:请选择一张牌\"],\n\t\t\t\t\tlist = [],\n\t\t\t\t\tcount = 0;\n\t\t\t\tfor (var i = 0; i < lib.inpile.length; i++) {\n\t\t\t\t\tvar name = lib.inpile[i];\n\t\t\t\t\tif (get.type(name) == \"delay\" || get.type(name) == \"equip\") continue;\n\t\t\t\t\tif (name == \"sha\") {\n\t\t\t\t\t\tlist.push([\"基本\", \"\", \"sha\"]);\n\t\t\t\t\t\tfor (var j of lib.inpile_nature) {\n\t\t\t\t\t\t\tlist.push([\"基本\", \"\", \"sha\", j]);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (get.type2(name) == \"trick\") list.push([\"锦囊\", \"\", name]);\n\t\t\t\t\telse if (get.type(name) == \"basic\") list.push([\"基本\", \"\", name]);\n\t\t\t\t}\n\t\t\t\tdialog.push([list, \"vcard\"]);\n\t\t\t\twhile (num--) {\n\t\t\t\t\tvar {links} = await player\n\t\t\t\t\t\t.chooseButton(1, true)\n\t\t\t\t\t\t.set(\"createDialog\", dialog)\n\t\t\t\t\t\t.set(\"ai\", button => {\n\t\t\t\t\t\t\tvar card = {\n\t\t\t\t\t\t\t\t\tname: button.link[2],\n\t\t\t\t\t\t\t\t\tnature: button.link[3],\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tplayer = _status.event.player,\n\t\t\t\t\t\t\t\ttarget = _status.event.target,\n\t\t\t\t\t\t\t\tatt = _status.event.att,\n\t\t\t\t\t\t\t\tnum = target.getUseValue(card, null, true);\n\t\t\t\t\t\t\tif (card.name == \"jiedao\" && att < 0) num -= 10;\n\t\t\t\t\t\t\tif ((card.name == \"tao\" || card.name == \"shan\") && att < 0) num -= 5;\n\t\t\t\t\t\t\treturn num * att;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.set(\"target\", trigger.player)\n\t\t\t\t\t\t.set(\"att\", get.attitude(trigger.player, player) > 0 ? 1 : -1)\n\t\t\t\t\t\t.forResult();\n\t\t\t\t\tif (!links) continue;\n\t\t\t\t\tlet viewCards = {\n\t\t\t\t\t\tname: links[0][2],\n\t\t\t\t\t\tnature: links[0][3],\n\t\t\t\t\t};\n\t\t\t\t\tvar gaincards = trigger.cards.filter(card => {\n\t\t\t\t\t\t\treturn !card.hasGaintag(\"anxinmrfz\") && get.position(card) == \"h\";\n\t\t\t\t\t\t}),\n\t\t\t\t\t\ttmpnum = gaincards.length;\n\t\t\t\t\tif (gaincards.length == 0) return;\n\t\t\t\t\tvar {links} =\n\t\t\t\t\t\tgaincards.length == 1\n\t\t\t\t\t\t\t? {links:gaincards}\n\t\t\t\t\t\t\t: await player\n\t\t\t\t\t\t\t\t\t.chooseCardButton(`【暗信】:请你选择视为${viewCards[\"nature\"] === undefined ? \"\" : get.translation(viewCards[\"nature\"])}${get.translation(viewCards[\"name\"])}的牌`, true, gaincards, [1, tmpnum])\n\t\t\t\t\t\t\t\t\t.set(\"ai\", () => {\n\t\t\t\t\t\t\t\t\t\tif (ui.selected.buttons.length == 0) return 1;\n\t\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.forResult();\n\t\t\t\t\tif (!links) continue;\n\t\t\t\t\tfor (var i = 0; i < links.length; i++) {\n\t\t\t\t\t\tlinks[i].gaintag.add(\"anxinmrfz\");\n\t\t\t\t\t\tlinks[i].storage.anxinmrfz = viewCards;\n\t\t\t\t\t\t//console.log('storage:',links[i].storage);\n\t\t\t\t\t\t//console.log('gaintag:',links[i].gaintag);\n\t\t\t\t\t}\n\t\t\t\t\tvar gaincards = trigger.cards.filter(card => {\n\t\t\t\t\t\treturn !card.hasGaintag(\"anxinmrfz\") && get.position(card) == \"h\";\n\t\t\t\t\t});\n\t\t\t\t\tif (gaincards.length == 0) return;\n\t\t\t\t}\n\t\t\t},\n\t\t\tglobal: \"anxinmrfz_views\",\n\t\t\tgroup: [\"anxinmrfz_use\"],\n\t\t\tsubSkill: {\n\t\t\t\tuse: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tforced: true,\n\t\t\t\t\ttrigger: { global: \"useCardAfter\" },\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn event.player.hasHistory(\"lose\", function (evt) {\n\t\t\t\t\t\t\tif (evt.getParent() != event) return false;\n\t\t\t\t\t\t\tfor (var i in evt.gaintag_map) {\n\t\t\t\t\t\t\t\tif (evt.gaintag_map[i].includes(\"anxinmrfz\")) return true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tcontent: () => {\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\tplayer.logSkill(\"anxinmrfz\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tviews: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tmod: {\n\t\t\t\t\t\taiOrder: function (player, card, num) {\n\t\t\t\t\t\t\tif (get.itemtype(card) == \"card\" && card.hasGaintag(\"anxinmrfz\")) return num + 1;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcardname: function (card, player) {\n\t\t\t\t\t\t\tvar viewsCard = card.storage.anxinmrfz;\n\t\t\t\t\t\t\tif (get.itemtype(card) == \"card\" && card.hasGaintag(\"anxinmrfz\")) return viewsCard.name;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcardnature(card, player) {\n\t\t\t\t\t\t\tvar viewsCard = card.storage.anxinmrfz;\n\t\t\t\t\t\t\tif (get.itemtype(card) == \"card\" && card.hasGaintag(\"anxinmrfz\")) return viewsCard.nature;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tgongchoumrfz: {\n\t\t\taudio: 2,\n\t\t\tenable: \"phaseUse\",\n\t\t\tusable: 1,\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn game.hasPlayer(current => {\n\t\t\t\t\treturn current != player && current.countCards(\"h\") > 0;\n\t\t\t\t});\n\t\t\t},\n\t\t\tfilterTarget: function (card, player, target) {\n\t\t\t\treturn target != player && target.countCards(\"h\") > 0;\n\t\t\t},\n\t\t\tselectTarget: -1,\n\t\t\tmultitarget: true,\n\t\t\tmultiline: true,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet targets = event.targets,\n\t\t\t\t\tlist = [];\n\t\t\t\twhile (true) {\n\t\t\t\t\tif (targets[0].countCards(\"h\") == 0) {\n\t\t\t\t\t\ttargets.shift();\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tvar {cards} = await targets[0]\n\t\t\t\t\t\t.chooseCard(true)\n\t\t\t\t\t\t.set(\"prompt\", `【觥筹】:请选择一张牌交给${get.translation(player)}`)\n\t\t\t\t\t\t.set(\"ai\", function (card) {\n\t\t\t\t\t\t\treturn get.value(card) < 6;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.forResult();\n\t\t\t\t\tif (!cards) {\n\t\t\t\t\t\ttargets.shift();\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\ttargets[0].give(cards, player);\n\t\t\t\t\tlist.add(targets[0]);\n\t\t\t\t\ttargets.shift();\n\t\t\t\t\tif (targets.length == 0) break;\n\t\t\t\t}\n\t\t\t\tif (list.length == 0) return;\n\t\t\t\twhile (true) {\n\t\t\t\t\tif (player.countCards(\"he\") == 0) return;\n\t\t\t\t\tvar {cards} = await player\n\t\t\t\t\t\t.chooseCard(true, \"he\")\n\t\t\t\t\t\t.set(\"prompt\", `【觥筹】:请选择一张牌交给${get.translation(list[0])}`)\n\t\t\t\t\t\t.set(\"ai\", function (card) {\n\t\t\t\t\t\t\treturn get.value(card) < 6;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.forResult();\n\t\t\t\t\tif (!cards) {\n\t\t\t\t\t\tlist.shift();\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tplayer.give(cards, list[0]);\n\t\t\t\t\tlist.shift();\n\t\t\t\t\tif (list.length == 0) break;\n\t\t\t\t}\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 13,\n\t\t\t\tresult: {\n\t\t\t\t\tplayer: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tyinshimrfz: {\n\t\t\tmod: {\n\t\t\t\ttargetEnabled: function (card, player, target) {\n\t\t\t\t\tvar num = 0,\n\t\t\t\t\t\tlist = [\"h\", \"j\", \"e\"];\n\t\t\t\t\tfor (var i = 0; i < list.length; i++) {\n\t\t\t\t\t\tif (target.countCards(list[i]) == 0) continue;\n\t\t\t\t\t\tnum++;\n\t\t\t\t\t}\n\t\t\t\t\tif (player.getHistory(\"useCard\").length < num && _status.currentPhase != target) return false;\n\t\t\t\t},\n\t\t\t},\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tglobal: \"useCard\",\n\t\t\t},\n\t\t\tforced: true,\n\t\t\tfilter: (event, player) => {\n\t\t\t\tvar num = 0,\n\t\t\t\t\tlist = [\"h\", \"j\", \"e\"];\n\t\t\t\tfor (var i = 0; i < list.length; i++) {\n\t\t\t\t\tif (player.countCards(list[i]) == 0) continue;\n\t\t\t\t\tnum++;\n\t\t\t\t}\n\t\t\t\treturn event.player.getHistory(\"useCard\").length < num && _status.currentPhase != player && ((event.card.name == \"nanman\" && player != event.player) || (event.card.name == \"wanjian\" && player != event.player) || (event.card.name == \"taoyuan\" && player.hp < player.maxHp) || event.card.name == \"wugu\");\n\t\t\t},\n\t\t\tcontent: () => {},\n\t\t},\n\n\t\t//崖心\n\t\tlingdingmrfz: {\n\t\t\tinit: (player, skill) => {\n\t\t\t\t/*\n\t\t\t\t\t[记录的牌的数量,[]中的数字]\n\t\t\t\t\t*/\n\t\t\t\tplayer.storage[skill] = [0, 1];\n\t\t\t},\n\t\t\tmark: true,\n\t\t\tintro: {\n\t\t\t\tmarkcount: \"\",\n\t\t\t\tcontent: (event, player, storage) => {\n\t\t\t\t\treturn `${player.storage[storage][0]}/${player.storage[storage][1]}`;\n\t\t\t\t},\n\t\t\t},\n\t\t\taudio: 2,\n\t\t\tdirect: true,\n\t\t\ttrigger: {\n\t\t\t\tplayer: [\"respond\", \"useCard\"],\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tplayer.storage.lingdingmrfz[0]++;\n\t\t\t\tlet usenum = player.storage.lingdingmrfz[0],\n\t\t\t\t\tnum = player.storage.lingdingmrfz[1];\n\t\t\t\tif (usenum < num) return;\n\t\t\t\tconst {bool} = await player\n\t\t\t\t\t.chooseBool(`【凌顶】:你可以摸${num}张牌`)\n\t\t\t\t\t.set(\"frequentSkill\", \"lingdingmrfz\")\n\t\t\t\t\t.set(\"prompt2\", get.prompt2(\"lingdingmrfz\").substring(get.prompt2(\"lingdingmrfz\").indexOf(\"###\", get.prompt2(\"lingdingmrfz\").indexOf(\"###\") + 3) + 3))\n\t\t\t\t\t.forResult();\n\t\t\t\tif (!bool) return;\n\t\t\t\tplayer.storage.lingdingmrfz[0] = 0;\n\t\t\t\tif (player.storage.lingdingmrfz[1] < player.maxHp) player.storage.lingdingmrfz[1]++;\n\t\t\t\tplayer.draw(num);\n\t\t\t\tplayer.logSkill(\"lingdingmrfz\");\n\t\t\t},\n\t\t},\n\t\tyabengmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { player: \"dying\" },\n\t\t\tforced: true,\n\t\t\tcontent: () => {\n\t\t\t\tplayer.draw(Math.min(2, player.storage.lingdingmrfz[0]));\n\t\t\t\tplayer.storage.lingdingmrfz = [0, 0];\n\t\t\t},\n\t\t},\n\n\t\t//初雪\n\t\tshengnvmrfz: {\n\t\t\taudio: 2,\n\t\t\tenable: \"phaseUse\",\n\t\t\tusable: 1,\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn (\n\t\t\t\t\tgame.countPlayer(current => {\n\t\t\t\t\t\treturn current != player;\n\t\t\t\t\t}) > 1\n\t\t\t\t);\n\t\t\t},\n\t\t\tselectTarget: 2,\n\t\t\tfilterTarget: lib.filter.notMe,\n\t\t\tmultitarget: true,\n\t\t\tmultiline: true,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet targets = event.targets,\n\t\t\t\t\ttargets2 = [],\n\t\t\t\t\t// [<第二名角色的选项>，<第一名角色的选项>]\n\t\t\t\t\tcsn = [undefined, undefined];\n\t\t\t\twhile (targets.length > 0) {\n\t\t\t\t\tvar target = targets[0],\n\t\t\t\t\t\tlist = [],\n\t\t\t\t\t\tcsList = [\"收回所有装备区的牌\", \"将一张手牌当【乐不思蜀】置于你的判定区\", \"不能响应下一张指定你为目标的基本牌或普通锦囊牌\"];\n\t\t\t\t\tif (target.countCards(\"e\") > 0) {\n\t\t\t\t\t\tlist.push(\"选项一\");\n\t\t\t\t\t} else csList[0] = '<span style=\"opacity:0.5; \">' + csList[0] + \"（不可选：装备区没有牌）\" + \"</span>\";\n\t\t\t\t\tfor (var i of target.getCards(\"h\")) {\n\t\t\t\t\t\tif (!target.canAddJudge({ name: \"lebu\", cards: [i] })) continue;\n\t\t\t\t\t\tlist.push(\"选项二\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif (!list.includes(\"选项二\")) csList[1] = '<span style=\"opacity:0.5; \">' + csList[1] + \"（不可选：无法对自己使用【乐不思蜀】）\" + \"</span>\";\n\t\t\t\t\tlist.push(\"选项三\");\n\t\t\t\t\tif (list.length == 0) continue;\n\t\t\t\t\tconst {control} = await target\n\t\t\t\t\t\t.chooseControl(list)\n\t\t\t\t\t\t.set(\"choiceList\", csList)\n\t\t\t\t\t\t.set(\"ai\", function () {\n\t\t\t\t\t\t\tvar list = _status.event.list;\n\t\t\t\t\t\t\tif (list.includes(\"选项二\")) list.remove(\"选项二\");\n\t\t\t\t\t\t\treturn list.randomGet();\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.set(\"target\", target)\n\t\t\t\t\t\t.set(\"list\", list)\n\t\t\t\t\t\t.forResult();\n\t\t\t\t\tif (!control) continue;\n\t\t\t\t\tcsn[targets.length - 1] = control;\n\t\t\t\t\ttargets2.add(target);\n\t\t\t\t\tswitch (control) {\n\t\t\t\t\t\tcase \"选项一\":\n\t\t\t\t\t\t\ttarget.gain(target.getCards(\"e\"), \"gain2\");\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"选项二\":\n\t\t\t\t\t\t\tconst {cards} = await target\n\t\t\t\t\t\t\t\t.chooseCard(true)\n\t\t\t\t\t\t\t\t.set(\"prompt\", \"【圣女】:请选择一张手牌当【乐不思蜀】置于你的判定区\")\n\t\t\t\t\t\t\t\t.set(\"filterCard\", card => {\n\t\t\t\t\t\t\t\t\treturn target.canAddJudge({ name: \"lebu\", cards: [card] });\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.set(\"ai\", card => {\n\t\t\t\t\t\t\t\t\treturn 6 - get.value(card);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.forResult();\n\t\t\t\t\t\t\tif (!cards) break;\n\t\t\t\t\t\t\ttarget.useCard({ name: \"lebu\" }, cards, target);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"选项三\":\n\t\t\t\t\t\t\ttarget.addMark(\"shengnvmrfz_direct\", 1, false);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\ttargets.shift();\n\t\t\t\t}\n\t\t\t\tif (csn[0] != csn[1]) {\n\t\t\t\t\tfor (var i of targets2) {\n\t\t\t\t\t\tif (!i.countGainableCards(player, \"he\")) continue;\n\t\t\t\t\t\tplayer.gainPlayerCard(\"he\", i, true).set(\"ai\", lib.card.shunshou.ai.button);\n\t\t\t\t\t}\n\t\t\t\t} else player.draw(2);\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 13,\n\t\t\t\tresult: {\n\t\t\t\t\ttarget: -1,\n\t\t\t\t},\n\t\t\t},\n\t\t\tglobal: \"shengnvmrfz_direct\",\n\t\t\tsubSkill: {\n\t\t\t\tdirect: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tdirect: true,\n\t\t\t\t\tintro: {\n\t\t\t\t\t\tcontent: \"不能响应下#张指定你为目标的基本牌或普通锦囊牌\",\n\t\t\t\t\t},\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\ttarget: \"useCardToPlayered\",\n\t\t\t\t\t},\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn player.countMark(\"shengnvmrfz_direct\") > 0 && (get.type(event.card) == \"basic\" || get.type(event.card) == \"trick\");\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tplayer.logSkill(\"shengnvmrfz\");\n\t\t\t\t\t\tplayer.removeMark(\"shengnvmrfz_direct\", 1, false);\n\t\t\t\t\t\ttrigger.directHit.add(player);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tshenshemrfz: {\n\t\t\taudio: 2,\n\t\t\tforced: true,\n\t\t\ttrigger: { target: \"useCardToTargeted\" },\n\t\t\tfilter: function (event, player) {\n\t\t\t\tif (player.countCards(\"h\", card => get.is.shownCard(card)) < 1) return false;\n\t\t\t\tvar max = 0,\n\t\t\t\t\tshown = player.getCards(\"h\", card => get.is.shownCard(card));\n\t\t\t\tfor (var i of shown) {\n\t\t\t\t\tif (i.number > max) max = i.number;\n\t\t\t\t}\n\t\t\t\tvar number = get.number(event.card);\n\t\t\t\tif (number != null && number > max) return false;\n\t\t\t\treturn event.player.countCards(\"he\") > 0 && event.player != player && get.tag(event.card, \"damage\") > 0;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet list = [],\n\t\t\t\t\tsource = trigger.player,\n\t\t\t\t\ttranTmp = function (str) {\n\t\t\t\t\t\tvar list = [\"e\", \"h\"];\n\t\t\t\t\t\tvar cn = [\"装备\", \"手牌\"];\n\t\t\t\t\t\tfor (var i = 0; i < list.length; i++) {\n\t\t\t\t\t\t\tif (str == list[i]) return cn[i];\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\tif (source.countCards(\"h\") > 0) list.push(\"h\");\n\t\t\t\tif (source.countCards(\"e\") > 0) list.push(\"e\");\n\t\t\t\tlet num = list.length;\n\t\t\t\tif (num == 0) return;\n\t\t\t\tsource\n\t\t\t\t\t.chooseToDiscard(true)\n\t\t\t\t\t.set(\"position\", \"he\")\n\t\t\t\t\t.set(\"prompt\", `【神慑】:请弃置${list.length > 1 ? tranTmp(list[0]) + \"和\" + tranTmp(list[1]) : tranTmp(list[0])}区的一张牌`)\n\t\t\t\t\t.set(\"selectCard\", num)\n\t\t\t\t\t.set(\"filterCard\", card => {\n\t\t\t\t\t\tif (ui.selected.cards.length == 0) return true;\n\t\t\t\t\t\tif (get.position(ui.selected.cards[0]) == \"h\") return get.position(card) == \"e\";\n\t\t\t\t\t\treturn get.position(card) == \"h\";\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"complexCard\", true)\n\t\t\t\t\t.set(\"ai\", card => {\n\t\t\t\t\t\treturn 8 - get.value(card);\n\t\t\t\t\t});\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tthreaten: 0.6,\n\t\t\t},\n\t\t\tgroup: \"shenshemrfz_show\",\n\t\t\tsubSkill: {\n\t\t\t\tshow: {\n\t\t\t\t\taudio: \"shenshemrfz\",\n\t\t\t\t\tforced: true,\n\t\t\t\t\ttrigger: { player: \"phaseJieshuBegin\" },\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn player.countCards(\"h\", card => !get.is.shownCard(card)) > 0 && player.countCards(\"h\", card => get.is.shownCard(card)) == 0;\n\t\t\t\t\t},\n\t\t\t\t\tasync content(trigger, event, player) {\n\t\t\t\t\t\tlet hs = player.getCards(\"h\", card => !get.is.shownCard(card));\n\t\t\t\t\t\tif (hs.length == 0) return;\n\t\t\t\t\t\tplayer.addShownCards(hs, \"visible_shenshemrfz\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t//狮蝎\n\t\tqianzongmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"showCharacterAfter\",\n\t\t\t},\n\t\t\tdirect: true,\n\t\t\thiddenSkill: true,\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn event.toShow.includes(\"shixiemrfz\");\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tif (player == _status.currentPhase) {\n\t\t\t\t\tlet list = [\"摸一张牌\"];\n\t\t\t\t\tif (player.getDamagedHp() > 0) list.push(\"回复体力\");\n\t\t\t\t\tlist.push(\"cancel2\");\n\t\t\t\t\tconst {control} = await player\n\t\t\t\t\t\t.chooseControl(list)\n\t\t\t\t\t\t.set(\"prompt\", \"【潜踪】:你可以回复一点体力或摸一张牌\")\n\t\t\t\t\t\t.set(\"ai\", function () {\n\t\t\t\t\t\t\tvar player = _status.event.player;\n\t\t\t\t\t\t\tif (player.hp < 3) return \"回复体力\";\n\t\t\t\t\t\t\treturn \"摸一张牌\";\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.forResult();\n\t\t\t\t\tif (!control || control == \"cancel2\") return;\n\t\t\t\t\tswitch (control) {\n\t\t\t\t\t\tcase \"摸一张牌\":\n\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"回复体力\":\n\t\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t}\n\t\t\t\t\tplayer.logSkill(\"qianzongmrfz\");\n\t\t\t\t} else {\n\t\t\t\t\tconst {targets} = await player\n\t\t\t\t\t\t.chooseTarget()\n\t\t\t\t\t\t.set(\"prompt\", \"【潜踪】:你可以对一名其他角色造成一点伤害\")\n\t\t\t\t\t\t.set(\"filterTarget\", lib.filter.notMe)\n\t\t\t\t\t\t.set(\"ai\", function (target) {\n\t\t\t\t\t\t\tvar player = _status.event.player;\n\t\t\t\t\t\t\treturn get.attitude(target, player) < 0;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.forResult();\n\t\t\t\t\tif (!targets) return;\n\t\t\t\t\tplayer.logSkill(\"qianzongmrfz\", targets[0]);\n\t\t\t\t\ttargets[0].damage();\n\t\t\t\t}\n\t\t\t},\n\t\t\tgroup: \"qianzongmrfz_rehidden\",\n\t\t\tsubSkill: {\n\t\t\t\trehidden: {\n\t\t\t\t\tdirect: true,\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\tplayer.getHistory(\"lose\", function (evt) {\n\t\t\t\t\t\t\t\treturn evt.type == \"discard\";\n\t\t\t\t\t\t\t}).length == 0 && !player.isUnseen()\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t\tasync content(trigger, event, player) {\n\t\t\t\t\t\tconst {bool} = await player.chooseBool().set(\"prompt\", \"【潜踪】:是否进入隐匿状态？\").forResult();\n\t\t\t\t\t\tif (bool != true) return;\n\t\t\t\t\t\tplayer.reUnseen();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\txiedumrfz: {\n\t\t\tmod: {\n\t\t\t\tcardname(card, player) {\n\t\t\t\t\tif (card.name == \"du\") return \"sha\";\n\t\t\t\t},\n\t\t\t},\n\t\t\taudio: 2,\n\t\t\ttrigger: { source: \"damageSource\" },\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn event.player.isIn() && event.player.countCards(\"he\") > 0 && (player != _status.currentPhase || (event.card && event.card.name == \"sha\"));\n\t\t\t},\n\t\t\tasync content(trigger, event, player) {\n\t\t\t\tvar target = event.player;\n\t\t\t\tconst {cards} = await player\n\t\t\t\t\t.choosePlayerCard(target, \"he\", true, 1, \"【蝎毒】:请选择一张牌\")\n\t\t\t\t\t.set(\"ai\", button => {\n\t\t\t\t\t\treturn get.value(button.link);\n\t\t\t\t\t})\n\t\t\t\t\t.forResult();\n\t\t\t\tif (!cards) return;\n\t\t\t\tfor (var i of cards) {\n\t\t\t\t\tif (get.position(i) == \"e\") {\n\t\t\t\t\t\ttarget.discard(i);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\ti.init([i.suit, i.number, \"du\"]);\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\tlijimrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"useCardToPlayered\",\n\t\t\t},\n\t\t\tmark: true,\n\t\t\tintro: {\n\t\t\t\tmarkcount: function (storage, player) {\n\t\t\t\t\tlet list = [];\n\t\t\t\t\tplayer.getHistory(\"useCard\", function (evt) {\n\t\t\t\t\t\tlist.add(get.suit(evt.card));\n\t\t\t\t\t});\n\t\t\t\t\treturn `${list.length}`;\n\t\t\t\t},\n\t\t\t\tcontent: function (event, player, skill) {\n\t\t\t\t\tlet list = [];\n\t\t\t\t\tplayer.getHistory(\"useCard\", function (evt) {\n\t\t\t\t\t\tlist.add(get.suit(evt.card));\n\t\t\t\t\t});\n\t\t\t\t\treturn `你使用的【杀】需要${list.length}张【闪】才可抵消<br>已经使用的花色：${get.translation(list)}`;\n\t\t\t\t},\n\t\t\t},\n\t\t\tforced: true,\n\t\t\tfilter(event, player) {\n\t\t\t\treturn event.card.name == \"sha\" && !event.getParent().directHit.includes(event.target);\n\t\t\t},\n\t\t\tlogTarget: \"target\",\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet list = [];\n\t\t\t\tawait player.getHistory(\"useCard\", function (evt) {\n\t\t\t\t\tlist.add(get.suit(evt.card));\n\t\t\t\t});\n\t\t\t\tconst needNum = list.length;\n\t\t\t\tconst id = trigger.target.playerid;\n\t\t\t\tconst map = trigger.getParent().customArgs;\n\t\t\t\tif (!map[id]) map[id] = {};\n\t\t\t\tif (typeof map[id].shanRequired == \"number\") {\n\t\t\t\t\tmap[id].shanRequired = needNum;\n\t\t\t\t} else {\n\t\t\t\t\tmap[id].shanRequired = needNum;\n\t\t\t\t}\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tdirectHit_ai: true,\n\t\t\t\tskillTagFilter(player, tag, arg) {\n\t\t\t\t\tlet list = [];\n\t\t\t\t\tplayer.getHistory(\"useCard\", function (evt) {\n\t\t\t\t\t\tlist.add(get.suit(evt.card));\n\t\t\t\t\t});\n\t\t\t\t\tif (arg.card.name != \"sha\" || arg.target.countCards(\"h\", \"shan\") > list.length) return false;\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t//红隼\n\t\tchihenmrfz: {\n\t\t\tmarktext: \"护\",\n\t\t\tintro: {\n\t\t\t\tname: \"护\",\n\t\t\t\tcontent: \"你有#个‘护’标记\",\n\t\t\t},\n\t\t\taudio: 2,\n\t\t\ttrigger: { player: \"phaseDiscardBegin\" },\n\t\t\tforced: true,\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn !player.hasEmptySlot(2);\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet num = player.countCards(\"e\");\n\t\t\t\tconst { targets } = await player\n\t\t\t\t\t.chooseTarget(`【齿痕】:请选择至多${get.cnNumber(num)}角色，令这些角色获得一个‘护’`)\n\t\t\t\t\t.set(\"selectTarget\", function () {\n\t\t\t\t\t\tvar num = _status.event.num;\n\t\t\t\t\t\treturn [0, num];\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"ai\", target => {\n\t\t\t\t\t\tvar player = _status.event.player;\n\t\t\t\t\t\treturn get.attitude(target, player) > 0;\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"num\", num)\n\t\t\t\t\t.forResult();\n\t\t\t\tif (!targets) return;\n\t\t\t\tfor (var i of targets) {\n\t\t\t\t\ti.addMark(\"chihenmrfz\");\n\t\t\t\t}\n\t\t\t},\n\t\t\tglobal: \"chihenmrfz_eff1\",\n\t\t\tgroup: [\"chihenmrfz_eff2\"],\n\t\t\tsubSkill: {\n\t\t\t\teff1: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tmod: {\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\n\t\t\t\t\t\t\treturn (num += player.countMark(\"chihenmrfz\"));\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\teff2: {\n\t\t\t\t\taudio: \"chihenmrfz\",\n\t\t\t\t\tforced: true,\n\t\t\t\t\ttrigger: { global: \"useCardToTargeted\" },\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t\tevent.player 使用者\n\t\t\t\t\t\t\tevent.targets 目标角色\n\t\t\t\t\t\t\t*/\n\t\t\t\t\t\tif (!get.tag(event.card, \"damage\") || !event.targets) return false;\n\t\t\t\t\t\tif (player.hp < event.player.hp) return false;\n\t\t\t\t\t\treturn event.target.hasMark(\"chihenmrfz\");\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tlet target = trigger.target,\n\t\t\t\t\t\t\teff = get.effect(target, trigger.card, trigger.player, trigger.player);\n\t\t\t\t\t\tconst { bool } = await trigger.player\n\t\t\t\t\t\t\t.chooseToDiscard(`【齿痕】:你须弃置一张牌，否则此牌(${get.translation(trigger.card)})对${get.translation(target)}无效`)\n\t\t\t\t\t\t\t.set(\"ai\", function (card) {\n\t\t\t\t\t\t\t\tif (_status.event.eff > 0) return 10 - get.value(card);\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.set(\"eff\", eff)\n\t\t\t\t\t\t\t.forResult();\n\t\t\t\t\t\tif (bool) {\n\t\t\t\t\t\t\ttarget.removeMark(\"chihenmrfz\");\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttrigger.getParent().excluded.add(target);\n\t\t\t\t\t\ttarget.removeMark(\"chihenmrfz\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\thaomingmrfz: {\n\t\t\taudio: 2,\n\t\t\tdirect: true,\n\t\t\ttrigger: { source: \"damageSource\" },\n\t\t\tusable: 1,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tconst { control } = await player\n\t\t\t\t\t.chooseControl(\"basic\", \"trick\", \"equip\", \"cancel2\")\n\t\t\t\t\t.set(\"prompt\", \"【号鸣】:请选择你要获得的牌的类型\")\n\t\t\t\t\t.set(\"ai\", function () {\n\t\t\t\t\t\tvar player = _status.event.player;\n\t\t\t\t\t\tif (player.hp < 3) return \"basic\";\n\t\t\t\t\t\tif (player.countCards(\"e\") >= 3) return [\"equip\", \"trick\", \"trick\", \"trick\", \"basic\"].randomGet();\n\t\t\t\t\t\treturn [\"basic\", \"trick\", \"trick\", \"equip\", \"equip\"].randomGet();\n\t\t\t\t\t})\n\t\t\t\t\t.forResult();\n\t\t\t\tif (!control || control == \"cancel2\") {\n\t\t\t\t\tplayer.storage.counttrigger.haomingmrfz--;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tplayer.logSkill(\"haomingmrfz\");\n\t\t\t\tvar card = get.cardPile2(function (card) {\n\t\t\t\t\treturn get.type(card, \"trick\") == control;\n\t\t\t\t});\n\t\t\t\tif (card) player.gain(card, \"gain2\", \"log\");\n\t\t\t\telse player.chat(`牌堆中没有${get.translation(control)}牌了！`);\n\t\t\t},\n\t\t\tgroup: [\"haomingmrfz_jd\", \"haomingmrfz_find\"],\n\t\t\tsubSkill: {\n\t\t\t\tban: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tmark: true,\n\t\t\t\t\tintro: {\n\t\t\t\t\t\tcontent: \"使用牌不能指定有‘护’标记的牌的角色\",\n\t\t\t\t\t},\n\t\t\t\t\tmod: {\n\t\t\t\t\t\tplayerEnabled: function (card, player, target) {\n\t\t\t\t\t\t\tif (target.hasMark(\"chihenmrfz\")) return false;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tjd: {\n\t\t\t\t\ttrigger: { player: \"phaseJieshuBegin\" },\n\t\t\t\t\tdirect: true,\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn player.canUseToAnyone(\"juedou\");\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tconst { targets } = await player\n\t\t\t\t\t\t\t.chooseTarget(\"【号鸣】:你可以选择一名其他角色，视为对其使用一张【决斗】\")\n\t\t\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\n\t\t\t\t\t\t\t\treturn player.canUse(\"juedou\", target);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.set(\"ai\", target => {\n\t\t\t\t\t\t\t\tvar player = _status.event.player,\n\t\t\t\t\t\t\t\t\teff = get.effect(target, { name: \"juedou\", isCard: true }, player, player);\n\t\t\t\t\t\t\t\tif (eff < 0) return 0;\n\t\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.forResult();\n\t\t\t\t\t\tif (!targets) return;\n\t\t\t\t\t\tplayer\n\t\t\t\t\t\t\t.when({ global: [\"damageEnd\", \"phaseJieshuAfter\"] })\n\t\t\t\t\t\t\t.filter((event, player) => {\n\t\t\t\t\t\t\t\tif (event.name == \"phaseJieshu\") return true;\n\t\t\t\t\t\t\t\treturn event.card && event.card.storage.haomingmrfz == true;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\tif (trigger.name == \"phaseJieshu\") return;\n\t\t\t\t\t\t\t\tvar target = trigger.player,\n\t\t\t\t\t\t\t\t\tnum = Math.ceil(target.countCards(\"h\") / 2);\n\t\t\t\t\t\t\t\tif (num > 0) target.chooseToDiscard(true, num, `【号鸣】:请弃置${get.translation(num)}张手牌`);\n\t\t\t\t\t\t\t\ttarget.addTempSkill(\"haomingmrfz_ban\", { player: \"phaseEnd\" });\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tplayer.useCard({ name: \"juedou\", isCard: true, storage: { haomingmrfz: true } }, targets[0]).logSkill = \"haomingmrfz\";\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tfind: {\n\t\t\t\t\taudio: \"haomingmrfz\",\n\t\t\t\t\tenable: \"phaseUse\",\n\t\t\t\t\tusable: 1,\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn player.countCards(\"h\") > 0;\n\t\t\t\t\t},\n\t\t\t\t\tprompt: \"【号鸣】:你可以弃置任意张手牌，然后从牌堆中获得一张与弃置的牌字数相同的牌\",\n\t\t\t\t\tfilterCard: true,\n\t\t\t\t\tselectCard: [1, Infinity],\n\t\t\t\t\tcheck(card) {\n\t\t\t\t\t\tvar player = _status.event.player;\n\t\t\t\t\t\tif (player.hp < 3) {\n\t\t\t\t\t\t\tif (ui.selected.cards.length == 0) return 6 - get.value(card);\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!player.hasEmptySlot(2)) {\n\t\t\t\t\t\t\tif (ui.selected.cards.length < 2) return 6 - get.value(card);\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (ui.selected.cards.length < 3) return 6 - get.value(card);\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tlet cards = event.cards,\n\t\t\t\t\t\t\tnum = cards.length,\n\t\t\t\t\t\t\tlist = [];\n\t\t\t\t\t\tfor (var i of ui.cardPile.childNodes) {\n\t\t\t\t\t\t\tif (get.cardNameLength(i) != num) continue;\n\t\t\t\t\t\t\tlist.push(i);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (list.length == 0) {\n\t\t\t\t\t\t\tplayer.chat(`牌堆中没有字数为${get.cnNumber(num)}的牌！`);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst { links } =\n\t\t\t\t\t\t\tlist.length == 1\n\t\t\t\t\t\t\t\t? { links: list[0] }\n\t\t\t\t\t\t\t\t: await player\n\t\t\t\t\t\t\t\t\t\t.chooseCardButton(\"【号鸣】:请选择你要获得的牌\", true, list)\n\t\t\t\t\t\t\t\t\t\t.set(\"ai\", function (button) {\n\t\t\t\t\t\t\t\t\t\t\tvar name = button.name,\n\t\t\t\t\t\t\t\t\t\t\t\tplayer = _status.event.player;\n\t\t\t\t\t\t\t\t\t\t\tif (player.hp < 3 && name == \"tao\") return 10;\n\t\t\t\t\t\t\t\t\t\t\treturn get.value(button);\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t.forResult();\n\t\t\t\t\t\tif (!links) return;\n\t\t\t\t\t\tvar card = get.cardPile2(function (card) {\n\t\t\t\t\t\t\treturn card == links[0];\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (card) player.gain(card, \"gain2\", \"log\");\n\t\t\t\t\t\telse player.chat(`牌堆中没有${get.translation(links)}了！`);\n\t\t\t\t\t},\n\t\t\t\t\tai: {\n\t\t\t\t\t\torder: 5,\n\t\t\t\t\t\tresult: {\n\t\t\t\t\t\t\tplayer: 1,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t//稀音\n\t\tsheyingmrfz: {\n\t\t\tmod: {\n\t\t\t\tmaxHandcard: function (player, num) {\n\t\t\t\t\tvar bool = false;\n\t\t\t\t\tfor (var i of game.players) {\n\t\t\t\t\t\tfor (var j of [1, 2, 3, 4, 5]) {\n\t\t\t\t\t\t\tif (i.hasCard(`jingtouE${j}mrfz`, \"e\")) {\n\t\t\t\t\t\t\t\tbool = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (bool) return num + 2;\n\t\t\t\t},\n\t\t\t\tglobalTo(from, to, distance) {\n\t\t\t\t\tvar bool = false;\n\t\t\t\t\tfor (var i of game.players) {\n\t\t\t\t\t\tfor (var j of [1, 2, 3, 4, 5]) {\n\t\t\t\t\t\t\tif (i.hasCard(`jingtouE${j}mrfz`, \"e\")) {\n\t\t\t\t\t\t\t\tbool = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (bool) return distance + 1;\n\t\t\t\t},\n\t\t\t},\n\t\t\taudio: 2,\n\t\t\tderivation: [\"jingtoumrfz_show\"],\n\t\t\tenable: \"phaseUse\",\n\t\t\tfilter: function (event, player) {\n\t\t\t\tvar num = 0;\n\t\t\t\tfor (var i of game.players) {\n\t\t\t\t\tfor (var j of [1, 2, 3, 4, 5]) {\n\t\t\t\t\t\tif (i.hasCard(`jingtouE${j}mrfz`, \"e\")) num++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn player.countCards(\"h\") > 0 && num < 4;\n\t\t\t},\n\t\t\tusable: 2,\n\t\t\tposition: \"he\",\n\t\t\tfilterCard: true,\n\t\t\tfilterTarget: lib.filter.notMe,\n\t\t\tcheck(card) {\n\t\t\t\treturn 6 - get.value(card);\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet targets = event.targets,\n\t\t\t\t\tlist1 = [],\n\t\t\t\t\tlist2 = [];\n\t\t\t\tfor (var i of [1, 2, 3, 4, 5]) list1.push(`jingtouE${i}mrfz`);\n\t\t\t\tfor (var i of list1) {\n\t\t\t\t\tlist2.push([\"装备\", \"\", i]);\n\t\t\t\t}\n\t\t\t\tconst { links } = await player\n\t\t\t\t\t.chooseButton([\"稀音\", [list2, \"vcard\"]], true)\n\t\t\t\t\t.set(\"ai\", function (button) {\n\t\t\t\t\t\tvar target = _status.event.target,\n\t\t\t\t\t\t\tlist = _status.event.list,\n\t\t\t\t\t\t\tcard = { name: button.link[2] },\n\t\t\t\t\t\t\tequip = [];\n\t\t\t\t\t\tfor (var i of target.getCards(\"e\")) equip.push(get.name(i));\n\t\t\t\t\t\tif (equip.includes(card.name)) return 0;\n\t\t\t\t\t\tif (get.subtype(card) == \"equip2\") return 5;\n\t\t\t\t\t\tif (get.subtype(card) == \"equip1\") return 4;\n\t\t\t\t\t\tif (get.subtype(card) == \"equip5\") return 3;\n\t\t\t\t\t\tif (get.subtype(card) == \"equip3\" || get.subtype(card) == \"equip3\") return 2;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"target\", targets[0])\n\t\t\t\t\t.set(\"list\", list1)\n\t\t\t\t\t.forResult();\n\t\t\t\tif (!links) return;\n\t\t\t\tvar suit,\n\t\t\t\t\tlist3 = [\"heart\", \"club\", \"spade\", \"spade\", \"diamond\"];\n\t\t\t\tfor (var i = 0; i < list1.length; i++) {\n\t\t\t\t\tif (links[0][2] == list1[i]) suit = list3[i];\n\t\t\t\t}\n\t\t\t\tvar card = game.createCard(links[0][2], suit, 7);\n\t\t\t\ttargets[0].$gain2(card);\n\t\t\t\tgame.delayx();\n\t\t\t\ttargets[0].equip(card);\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 13,\n\t\t\t\tresult: {\n\t\t\t\t\ttarget: -1,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tchaozaimrfz: {\n\t\t\taudio: 2,\n\t\t\thasJingtou(player) {\n\t\t\t\treturn this.getJingtou(player).length > 0 ? true : false;\n\t\t\t},\n\t\t\tgetJingtou(player) {\n\t\t\t\tlet cards = [];\n\t\t\t\tlet names = Array.from({ length: 5 }, (v, i) => `jingtouE${i + 1}mrfz`);\n\t\t\t\tfor (let card of player.getCards(\"e\")) {\n\t\t\t\t\tif (names.includes(get.name(card))) cards.push(card);\n\t\t\t\t}\n\t\t\t\treturn cards;\n\t\t\t},\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\n\t\t\tfilter(event, player) {\n\t\t\t\treturn game.hasPlayer(current => lib.skill.chaozaimrfz.hasJingtou(current));\n\t\t\t},\n\t\t\tprompt2(event, player) {\n\t\t\t\tlet targets = game.filterPlayer(current => lib.skill.chaozaimrfz.hasJingtou(current));\n\t\t\t\tlet jingtous = [];\n\t\t\t\tfor (let char of game.players) {\n\t\t\t\t\tif (targets.includes(char)) jingtous.addArray(lib.skill.chaozaimrfz.getJingtou(char));\n\t\t\t\t}\n\t\t\t\treturn `你可以弃置${get.translation(targets)}区域中的镜头并摸${jingtous.length}张牌`;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet targets = game.filterPlayer(current => lib.skill.chaozaimrfz.hasJingtou(current));\n\t\t\t\tlet jingtous = [];\n\t\t\t\tfor (let char of game.players) {\n\t\t\t\t\tif (targets.includes(char)) jingtous.addArray(lib.skill.chaozaimrfz.getJingtou(char));\n\t\t\t\t}\n\t\t\t\tgame.cardsDiscard(jingtous);\n\t\t\t\tplayer.draw(jingtous.length);\n\t\t\t\tfor (let i of targets) {\n\t\t\t\t\ti.addSkill(\"chaozaimrfz_eff\");\n\t\t\t\t\ti.storage.chaozaimrfz = player;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\teff: {\n\t\t\t\t\tmark: true,\n\t\t\t\t\tmarkimage: \"extension/WhichWay/image/orther/xiyinchaozaimrfz.png\",\n\t\t\t\t\tintro: {\n\t\t\t\t\t\tname: \"超载\",\n\t\t\t\t\t\tcontent(event, player) {\n\t\t\t\t\t\t\tlet str = `\n\t\t\t\t\t\t\t\t\t·XXX<br>\n\t\t\t\t\t\t\t\t\t·其他角色对你使用牌无次数限制<br>\n\t\t\t\t\t\t\t\t\t·其他角色对你使用牌无距离限制\n\t\t\t\t\t\t\t\t`;\n\t\t\t\t\t\t\tlet str2 = `受到的伤害+1`;\n\t\t\t\t\t\t\tif (player.storage.chaozaimrfz_eff) return str.replace(/XXX/g, `<font color = gray>${str2}（已触发）</font>`);\n\t\t\t\t\t\t\treturn str.replace(/XXX/g, str2);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tglobal: \"chaozaimrfz_eff2\",\n\t\t\t\t\tfirstDo: true,\n\t\t\t\t\tdirect: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"damageBegin2\",\n\t\t\t\t\t\tglobal: [\"dieAfter\", \"phaseBegin\"],\n\t\t\t\t\t},\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\tif (event.name == \"damage\") return true;\n\t\t\t\t\t\treturn player.storage.chaozaimrfz == event.player;\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tif (trigger.name == \"die\" || trigger.name == \"phase\") {\n\t\t\t\t\t\t\tplayer.removeSkill(\"chaozaimrfz_eff\");\n\t\t\t\t\t\t\tdelete player.storage.chaozaimrfz;\n\t\t\t\t\t\t\tdelete player.storage.chaozaimrfz_eff;\n\t\t\t\t\t\t} else if (player.storage.chaozaimrfz_eff != true) {\n\t\t\t\t\t\t\ttrigger.num++;\n\t\t\t\t\t\t\tplayer.logSkill(\"chaozaimrfz\");\n\t\t\t\t\t\t\tplayer.storage.chaozaimrfz_eff = true;\n\t\t\t\t\t\t\tplayer.when({ global: \"phaseEnd\" }).then(() => {\n\t\t\t\t\t\t\t\tdelete player.storage.chaozaimrfz_eff;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\teff2: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tmod: {\n\t\t\t\t\t\ttargetInRange(card, player, target) {\n\t\t\t\t\t\t\tif (target.hasSkill(\"chaozaimrfz_eff\")) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcardUsableTarget(card, player, target) {\n\t\t\t\t\t\t\tif (target.hasSkill(\"chaozaimrfz_eff\")) return true;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t//夜魔\n\t\tbiaolimrfz: {\n\t\t\tmod: {\n\t\t\t\taiOrder(player, card, num) {\n\t\t\t\t\tif (get.itemtype(card) == \"card\" && card.storage && card.storage.biaolimrfz == true) return num + 1;\n\t\t\t\t},\n\t\t\t\tcardname(card, player, name) {\n\t\t\t\t\tvar storage = player.storage.biaolimrfz == \"red\" ? \"tao\" : \"sha\";\n\t\t\t\t\tif (card.storage && card.storage.biaolimrfz == true) return storage;\n\t\t\t\t},\n\t\t\t\ttargetInRange(card, player, target) {\n\t\t\t\t\tif (card.storage && card.storage.biaolimrfz == true && get.name(card) == \"sha\" && target.hp >= player.hp) return true;\n\t\t\t\t},\n\t\t\t},\n\t\t\taudio: 2,\n\t\t\tforced: true,\n\t\t\ttrigger: { player: \"phaseUseBegin\" },\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tconst result = await player.draw(3).forResult();\n\t\t\t\tlet cards = result;\n\t\t\t\tif (!cards) return;\n\t\t\t\tvar red = 0;\n\t\t\t\tfor (var i of cards) {\n\t\t\t\t\tif (get.color(i) == \"red\") red++;\n\t\t\t\t\ti.storage.biaolimrfz = true;\n\t\t\t\t\ti.addGaintag(\"biaolimrfz\");\n\t\t\t\t}\n\t\t\t\tif (red > 1) player.storage.biaolimrfz = \"red\";\n\t\t\t\telse player.storage.biaolimrfz = \"black\";\n\t\t\t},\n\t\t\tgroup: [\"biaolimrfz_nocount\", \"biaolimrfz_set\"],\n\t\t\tsubSkill: {\n\t\t\t\tset: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tunique: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tglobal: \"phaseBefore\",\n\t\t\t\t\t\tplayer: \"enterGame\",\n\t\t\t\t\t},\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\n\t\t\t\t\t},\n\t\t\t\t\tcontent() {\n\t\t\t\t\t\tvar enable = lib.card.tao.enable;\n\t\t\t\t\t\tlib.card.tao.enable = function (card, player) {\n\t\t\t\t\t\t\tif (player.storage.biaolimrfz && player.storage.biaolimrfz == \"red\" && player.isPhaseUsing()) {\n\t\t\t\t\t\t\t\tif (card.storage.biaolimrfz) return true;\n\t\t\t\t\t\t\t\treturn player.hp < player.maxHp;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn enable(card, player);\n\t\t\t\t\t\t};\n\t\t\t\t\t\tvar selectTarget = lib.card.tao.selectTarget;\n\t\t\t\t\t\tlib.card.tao.selectTarget = function () {\n\t\t\t\t\t\t\tvar player = _status.event.player;\n\t\t\t\t\t\t\tif (player.storage.biaolimrfz && player.storage.biaolimrfz == \"red\" && player.isPhaseUsing()) {\n\t\t\t\t\t\t\t\treturn [1, 1]; //QQQ\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn selectTarget;\n\t\t\t\t\t\t};\n\t\t\t\t\t\tvar filterTarget = lib.card.tao.filterTarget;\n\t\t\t\t\t\tlib.card.tao.filterTarget = function (card, player, target) {\n\t\t\t\t\t\t\tif (player.storage.biaolimrfz && player.storage.biaolimrfz == \"red\" && player.isPhaseUsing()) {\n\t\t\t\t\t\t\t\tif (card.storage.biaolimrfz) return target.hp < target.maxHp;\n\t\t\t\t\t\t\t\treturn target.hp < target.maxHp && target == player;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn filterTarget(card, player, target);\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tnocount: {\n\t\t\t\t\tsilent: true,\n\t\t\t\t\ttrigger: { player: \"useCard2\" },\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\tif (!event.card) return false;\n\t\t\t\t\t\tif (event.card.storage.biaolimrfz != true || get.name(event.card) != \"sha\") return false;\n\t\t\t\t\t\tfor (var i of event.targets) {\n\t\t\t\t\t\t\tif (player.hp <= i.hp) return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t},\n\t\t\t\t\tcontent() {\n\t\t\t\t\t\tif (trigger.addCount !== false) {\n\t\t\t\t\t\t\ttrigger.addCount = false;\n\t\t\t\t\t\t\ttrigger.player.getStat().card.sha--;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tymkongwomrfz: {\n\t\t\taudio: 2,\n\t\t\tdirect: true,\n\t\t\ttrigger: { player: \"phaseDrawEnd\" },\n\t\t\tfilter(event, player) {\n\t\t\t\treturn player.countCards(\"he\") > 0;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tconst { bool } = await player\n\t\t\t\t\t.chooseToDiscard()\n\t\t\t\t\t.set(\"position\", \"he\")\n\t\t\t\t\t.set(\"prompt\", \"【控我】:你可以弃置一张牌，然后观看牌堆顶两张牌，并以任意顺序将其置于牌堆顶或牌堆底\")\n\t\t\t\t\t.set(\"ai\", function (card) {\n\t\t\t\t\t\tvar player = _status.event.player;\n\t\t\t\t\t\tif (player.skipList.includes(\"phaseUse\")) return 0;\n\t\t\t\t\t\tif (card.storage.biaolimrfz == true) return 10 - get.value(card);\n\t\t\t\t\t\treturn 6 - get.value(card);\n\t\t\t\t\t})\n\t\t\t\t\t.forResult();\n\t\t\t\tif (!bool) return;\n\t\t\t\tplayer.logSkill(\"ymkongwomrfz\");\n\t\t\t\tvar cards = get.cards(2);\n\t\t\t\tgame.cardsGotoOrdering(cards);\n\t\t\t\tconst { moved } = await player\n\t\t\t\t\t.chooseToMove()\n\t\t\t\t\t.set(\"list\", [[\"牌堆顶\", cards], [\"牌堆底\"]])\n\t\t\t\t\t.set(\"prompt\", \"点击将牌移动到牌堆顶或牌堆底\")\n\t\t\t\t\t.set(\"processAI\", function (list) {\n\t\t\t\t\t\tvar cards = list[0][1],\n\t\t\t\t\t\t\tplayer = _status.event.player;\n\t\t\t\t\t\tvar top = [];\n\t\t\t\t\t\tvar bottom;\n\t\t\t\t\t\tcards.sort(function (a, b) {\n\t\t\t\t\t\t\tvar a_value = get.color(a, player) == \"red\" ? 3 : 5,\n\t\t\t\t\t\t\t\tb_value = get.color(b, player) == \"red\" ? 3 : 5,\n\t\t\t\t\t\t\t\thp = player.hp;\n\t\t\t\t\t\t\tif (hp < 3) {\n\t\t\t\t\t\t\t\tif (get.color(a, player) == \"red\") a_value + 3;\n\t\t\t\t\t\t\t\tif (get.color(b, player) == \"red\") b_value + 3;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn b_value - a_value;\n\t\t\t\t\t\t});\n\t\t\t\t\t\twhile (cards.length) {\n\t\t\t\t\t\t\tvar value = 0;\n\t\t\t\t\t\t\tif (player.hp < 3) {\n\t\t\t\t\t\t\t\tif (get.color(cards[0], player) == \"red\") value++;\n\t\t\t\t\t\t\t} else if (get.color(cards[0], player) == \"black\") value++;\n\t\t\t\t\t\t\tif (value <= 0) break;\n\t\t\t\t\t\t\ttop.unshift(cards.shift());\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbottom = cards;\n\t\t\t\t\t\treturn [top, bottom];\n\t\t\t\t\t})\n\t\t\t\t\t.forResult();\n\t\t\t\tif (!moved) return;\n\t\t\t\tvar top = moved[0];\n\t\t\t\tvar bottom = moved[1];\n\t\t\t\ttop.reverse();\n\t\t\t\tfor (var i = 0; i < top.length; i++) {\n\t\t\t\t\tui.cardPile.insertBefore(top[i], ui.cardPile.firstChild);\n\t\t\t\t}\n\t\t\t\tfor (i = 0; i < bottom.length; i++) {\n\t\t\t\t\tui.cardPile.appendChild(bottom[i]);\n\t\t\t\t}\n\t\t\t\tgame.addCardKnower(top, player);\n\t\t\t\tgame.addCardKnower(bottom, player);\n\t\t\t\tplayer.popup(get.cnNumber(top.length) + \"上\" + get.cnNumber(bottom.length) + \"下\");\n\t\t\t\tgame.log(player, \"将\" + get.cnNumber(top.length) + \"张牌置于牌堆顶\");\n\t\t\t\tgame.updateRoundNumber();\n\t\t\t\tlet { promise, resolve } = Promise.withResolvers();\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tresolve();\n\t\t\t\t}, 500);\n\t\t\t\tawait promise;\n\t\t\t},\n\t\t},\n\n\t\t//惊蛰\n\t\tchunleimrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { global: \"phaseZhunbeiBegin\" },\n\t\t\tdirect: true,\n\t\t\tfilter(event, player) {\n\t\t\t\treturn player.countCards(\"he\", { color: \"black\" }) > 0;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tconst {cards} = await player\n\t\t\t\t\t.chooseCard()\n\t\t\t\t\t.set(\"prompt\", `【春雷】:你可以弃置一张黑色的牌，对${get.translation(trigger.player)}造成一点雷属性的伤害`)\n\t\t\t\t\t.set(\"filterCard\", card => get.color(card) == \"black\")\n\t\t\t\t\t.set(\"position\", \"he\")\n\t\t\t\t\t.set(\"ai\", card => {\n\t\t\t\t\t\tvar player = _status.event.player;\n\t\t\t\t\t\tif (get.damageEffect(_status.event.target, player, player, \"thunder\") > 0) return 6 - get.value(card);\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"target\", trigger.player)\n\t\t\t\t\t.forResult();\n\t\t\t\tif (!cards) return;\n\t\t\t\tplayer.discard(cards);\n\t\t\t\ttrigger.player.damage(\"thunder\");\n\t\t\t\tplayer.logSkill(\"chunleimrfz\", trigger.player);\n\t\t\t},\n\t\t\tai: {\n\t\t\t\texpose: 0.1,\n\t\t\t\tthreaten: 1.3,\n\t\t\t},\n\t\t},\n\t\tzheqimrfz: {\n\t\t\taudio: 2,\n\t\t\tforced: true,\n\t\t\ttrigger: { global: \"damageEnd\" },\n\t\t\tusable: 1,\n\t\t\tfilter(event, player) {\n\t\t\t\treturn event.nature && event.nature == \"thunder\";\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tvar target = _status.currentPhase;\n\t\t\t\tif (!target) return;\n\t\t\t\ttarget.addTempSkill(\"zheqimrfz_eff1\");\n\t\t\t\tplayer.addTempSkill(\"zheqimrfz_eff2\", { global: \"phaseBegin\" });\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\teff1: {\n\t\t\t\t\tmark: true,\n\t\t\t\t\tintro: {\n\t\t\t\t\t\tcontent: \"<i>正月启蛰，言发蛰也。万物出乎震，震为雷，故曰惊蛰。是蛰虫惊而出走矣。<br>————《大戴礼记·夏小正》</i>\",\n\t\t\t\t\t},\n\t\t\t\t\tmod: {\n\t\t\t\t\t\tcardUsable(card) {\n\t\t\t\t\t\t\tif (get.itemtype(card) == \"card\") return Infinity;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tforced: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: { player: \"useCard\" },\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\treturn event.card && get.type(event.card) != \"equip\" && player.countCards(\"h\") > 0;\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tplayer.chooseToDiscard(true, \"【蛰起】:请选择弃置一张手牌\").set(\"ai\", card => 6 - get.value(card));\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\teff2: {\n\t\t\t\t\taudio: \"zheqimrfz\",\n\t\t\t\t\tforced: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: { global: \"phaseEnd\" },\n\t\t\t\t\tgetDiscard: function (event, player) {\n\t\t\t\t\t\tvar history = event.player.getHistory(\"lose\", function (evt) {\n\t\t\t\t\t\t\t\treturn evt && evt.type == \"discard\";\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tcards = [];\n\t\t\t\t\t\tif (history.length == 0) return cards;\n\t\t\t\t\t\tfor (var i = 0; i < history.length; i++) {\n\t\t\t\t\t\t\tvar cardsList = history[i].cards;\n\t\t\t\t\t\t\tfor (var j = 0; j < cardsList.length; j++) {\n\t\t\t\t\t\t\t\tif (get.position(cardsList[j], true) != \"d\") continue;\n\t\t\t\t\t\t\t\tcards.push(cardsList[j]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn cards;\n\t\t\t\t\t},\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\tvar cards = lib.skill.zheqimrfz_eff2.getDiscard(event, player);\n\t\t\t\t\t\treturn cards.length > 0;\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tlet cards = lib.skill.zheqimrfz_eff2.getDiscard(trigger, player);\n\t\t\t\t\t\tconst {links} = await player\n\t\t\t\t\t\t\t.chooseButton([\"【蛰起】:请选择你要获得的牌\", cards])\n\t\t\t\t\t\t\t.set(\"forced\", true)\n\t\t\t\t\t\t\t.set(\"filterButton\", button => {\n\t\t\t\t\t\t\t\tvar player = _status.event.player;\n\t\t\t\t\t\t\t\treturn !ui.selected.buttons.some(i => get.type2(i, player) == get.type2(button, player));\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.set(\"selectButton\", [1, Infinity])\n\t\t\t\t\t\t\t.set(\"ai\", button => {\n\t\t\t\t\t\t\t\treturn _status.event.player.getUseValue(button.link);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.forResult();\n\t\t\t\t\t\tif (!links) return;\n\t\t\t\t\t\tplayer.gain(links, \"gain2\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tthreaten: 1.3,\n\t\t\t},\n\t\t},\n\n\t\t//龙舌兰\n\t\tpianfengmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { source: \"damageSource\" },\n\t\t\tfilter(event, player) {\n\t\t\t\treturn event.player && event.player.isIn() && event.card.isCard && event.cards.filterInD().length > 0 && event.player.countCards(\"h\") > 0;\n\t\t\t},\n\t\t\tprompt(event, player) {\n\t\t\t\tvar num =\n\t\t\t\t\tevent.player.getHistory(\"damage\", evt => {\n\t\t\t\t\t\treturn evt.card && evt.card.name == event.card.name;\n\t\t\t\t\t}).length + 1;\n\t\t\t\treturn `【偏锋】:是否令${get.translation(event.player)}回复一点体力并展示其${get.cnNumber(num)}张手牌`;\n\t\t\t},\n\t\t\tcheck(event, player) {\n\t\t\t\tvar num = event.player.getHistory(\"damage\", evt => {\n\t\t\t\t\t\treturn evt.card && evt.card.name == event.card.name;\n\t\t\t\t\t}).length,\n\t\t\t\t\tatt = get.attitude(event.player.player);\n\t\t\t\t/*\n\t\t\t\t\tif(num<2&&att>0) return true;\n\t\t\t\t\treturn num>1&&att<0&&event.player.countCards('h')>=num;\n\t\t\t\t\t*/\n\t\t\t\treturn att < 0 && event.player.countCards(\"h\") >= num;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet num =\n\t\t\t\t\t\ttrigger.player.getHistory(\"damage\", evt => {\n\t\t\t\t\t\t\treturn evt.card && evt.card.name == trigger.card.name;\n\t\t\t\t\t\t}).length + 1,\n\t\t\t\t\ttarget = trigger.player;\n\t\t\t\ttarget.recover();\n\t\t\t\tconst {cards} = await player\n\t\t\t\t\t.choosePlayerCard()\n\t\t\t\t\t.set(\"selectButton\", num)\n\t\t\t\t\t.set(\"forced\", true)\n\t\t\t\t\t.set(\"position\", \"h\")\n\t\t\t\t\t.set(\"target\", target)\n\t\t\t\t\t.set(\"prompt\", `【偏锋】:请选择展示${get.translation(target)}的${get.cnNumber(num)}张牌`)\n\t\t\t\t\t.forResult();\n\t\t\t\tif (!cards) return;\n\t\t\t\tplayer.showCards(cards, `${get.translation(player)}展示了${get.translation(target)}的${get.cnNumber(num)}张牌`);\n\t\t\t\tgame.delay();\n\t\t\t\tlet bool = false;\n\t\t\t\tfor (var i of cards) {\n\t\t\t\t\tif (get.type2(i) != get.type2(trigger.card)) continue;\n\t\t\t\t\tbool = true;\n\t\t\t\t}\n\t\t\t\tif (!bool) {\n\t\t\t\t\tplayer.draw(num);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\ttarget.discard(cards);\n\t\t\t\ttarget.loseHp(num);\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tthreaten: 1.5,\n\t\t\t},\n\t\t},\n\n\t\t//阿米娅\n\t\ttongganmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tglobal: \"drawAfter\",\n\t\t\t},\n\t\t\tusable: 3,\n\t\t\tforced: true,\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn event.player !== player;\n\t\t\t},\n\t\t\tcontent: function () {\n\t\t\t\tplayer.draw();\n\t\t\t},\n\t\t\tgroup: \"tonggan_discardmrfz\",\n\t\t\tai: {\n\t\t\t\tthreaten: 2,\n\t\t\t},\n\t\t},\n\t\ttonggan_discardmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tglobal: \"loseAfter\",\n\t\t\t},\n\t\t\tusable: 3,\n\t\t\tfilter: function (event, player) {\n\t\t\t\tif (event.type != \"discard\") return false;\n\t\t\t\treturn event.player !== player;\n\t\t\t},\n\t\t\tforced: true,\n\t\t\tcontent: function () {\n\t\t\t\tplayer.chooseToDiscard(\"he\", true, 1);\n\t\t\t},\n\t\t},\n\t\tqinghemrfz: {\n\t\t\taudio: 2,\n\t\t\tzhuSkill: true,\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"loseAfter\",\n\t\t\t\tglobal: \"loseAsyncAfter\",\n\t\t\t},\n\t\t\tfilter: function (event, player) {\n\t\t\t\tif (player == _status.currentPhase) return false;\n\t\t\t\treturn event.type == \"discard\" && event.getl(player).cards2.length > 0 && !player.hasSkill(\"qinghemrfz_ban\");\n\t\t\t},\n\t\t\tdirect: true,\n\t\t\tcontent: function () {\n\t\t\t\t\"step 0\";\n\t\t\t\tvar target = _status.currentPhase;\n\t\t\t\tif (!target) return;\n\t\t\t\ttarget\n\t\t\t\t\t.chooseBool(\"【亲和】：是否让\" + get.translation(player) + \"其弃置的牌中的一张牌？\")\n\t\t\t\t\t.set(\"ai\", () => {\n\t\t\t\t\t\treturn get.attitude(_status.currentPhase, _status.event.targetx) > 0;\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"targetx\", player);\n\t\t\t\t(\"step 1\");\n\t\t\t\tif (result.bool) {\n\t\t\t\t\tvar target = _status.currentPhase;\n\t\t\t\t\tplayer.addTempSkill(\"qinghemrfz_ban\", \"phaseEnd\");\n\t\t\t\t\tif (trigger.cards.length == 1) {\n\t\t\t\t\t\tplayer.gain(trigger.cards, \"gain2\");\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\tif (trigger.cards.length > 1) {\n\t\t\t\t\t\ttarget.chooseButton([\"选择获得令其获得其中的一张牌\", trigger.cards.slice(0)], true).ai = function (button) {\n\t\t\t\t\t\t\treturn get.value(button.link);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t} else event.finish();\n\t\t\t\t(\"step 2\");\n\t\t\t\tif (result.links) {\n\t\t\t\t\tplayer.logSkill(\"qinghemrfz\");\n\t\t\t\t\tplayer.gain(result.links, \"gain2\");\n\t\t\t\t}\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\tban: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t//doc 医生\n\t\tyizhemrfz: {\n\t\t\tmod: {\n\t\t\t\tignoredHandcard: function (card, player) {\n\t\t\t\t\tif (get.name(card) == \"tao\") {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcardDiscardable: function (card, player, name) {\n\t\t\t\t\tif (name == \"phaseDiscard\" && get.name(card) == \"tao\") return false;\n\t\t\t\t},\n\t\t\t},\n\t\t\tinit() {\n\t\t\t\tvar enable = lib.card.tao.enable;\n\t\t\t\tlib.card.tao.enable = function (card, player) {\n\t\t\t\t\tif (player.hasSkill(\"yizhemrfz\")) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn enable(card, player);\n\t\t\t\t};\n\t\t\t\tvar selectTarget = lib.card.tao.selectTarget;\n\t\t\t\tlib.card.tao.selectTarget = function () {\n\t\t\t\t\tvar player = _status.event.player;\n\t\t\t\t\tif (player.hasSkill(\"yizhemrfz\")) {\n\t\t\t\t\t\treturn [1, 1]; //QQQ\n\t\t\t\t\t}\n\t\t\t\t\treturn selectTarget;\n\t\t\t\t};\n\t\t\t\tvar filterTarget = lib.card.tao.filterTarget;\n\t\t\t\tlib.card.tao.filterTarget = function (card, player, target) {\n\t\t\t\t\tif (player.hasSkill(\"yizhemrfz\")) {\n\t\t\t\t\t\treturn target.hp < target.maxHp && (player.inRange(target) || player == target);\n\t\t\t\t\t}\n\t\t\t\t\treturn filterTarget(card, player, target);\n\t\t\t\t};\n\t\t\t\tlib.card.tao.content = function () {\n\t\t\t\t\tif (player.hasSkill(\"yizhemrfz\")) {\n\t\t\t\t\t\tvar num = target.getDamagedHp();\n\t\t\t\t\t\ttarget.recover(5);\n\t\t\t\t\t\tif (5 - num > 0) {\n\t\t\t\t\t\t\ttarget.addSkill(\"yizhemrfz_eff\");\n\t\t\t\t\t\t\ttarget.storage.yizhemrfz_eff = 5 - num;\n\t\t\t\t\t\t\ttarget.changeHujia(5 - num);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else target.recover();\n\t\t\t\t};\n\t\t\t},\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tglobal: \"phaseBefore\",\n\t\t\t\tplayer: \"enterGame\",\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\n\t\t\t},\n\t\t\tforced: true,\n\t\t\tcontent() {\n\t\t\t\tvar cards = [];\n\t\t\t\tif (ui.cardPile.childNodes.length < 1) return;\n\t\t\t\tfor (var i of ui.cardPile.childNodes) {\n\t\t\t\t\tif (cards.length > 2) break;\n\t\t\t\t\tif (i.name == \"tao\") cards.push(i);\n\t\t\t\t}\n\t\t\t\tif (cards.length > 0) player.gain(cards, \"gain2\");\n\t\t\t\telse player.chat(\"byd怎么开局牌堆中的桃就没了？\");\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\teff: {\n\t\t\t\t\tmark: true,\n\t\t\t\t\tintro: {\n\t\t\t\t\t\tcontent(event, player) {\n\t\t\t\t\t\t\treturn `你因【桃】而获得的护甲数:${player.storage.yizhemrfz_eff}`;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tif (!player.hujia) return;\n\t\t\t\t\t\tif (player.storage.yizhemrfz_eff && player.storage.yizhemrfz_eff > 0) {\n\t\t\t\t\t\t\tplayer.storage.yizhemrfz_eff--;\n\t\t\t\t\t\t\tplayer.changeHujia(-1);\n\t\t\t\t\t\t\tplayer.popup(\"失去护甲\");\n\t\t\t\t\t\t\tgame.log(player, \"失去了一点因【桃】而获得的护甲值\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (player.storage.yizhemrfz_eff && player.storage.yizhemrfz_eff == 0) {\n\t\t\t\t\t\t\tplayer.removeSkill(\"yizhemrfz_eff\");\n\t\t\t\t\t\t\tdelete player.storage.yizhemrfz_eff;\n\t\t\t\t\t\t\tplayer.unmarkSkill(\"yizhemrfz_eff\");\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tgroup: \"yizhemrfz_lose\",\n\t\t\t\t},\n\t\t\t\tlose: {\n\t\t\t\t\ttrigger: { player: \"damageEnd\" },\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn event.hujia;\n\t\t\t\t\t},\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tif (player.storage.yizhemrfz_eff && player.storage.yizhemrfz_eff > 0) {\n\t\t\t\t\t\t\tplayer.storage.yizhemrfz_eff--;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (player.storage.yizhemrfz_eff && player.storage.yizhemrfz_eff == 0) {\n\t\t\t\t\t\t\tplayer.removeSkill(\"yizhemrfz_eff\");\n\t\t\t\t\t\t\tdelete player.storage.yizhemrfz_eff;\n\t\t\t\t\t\t\tplayer.unmarkSkill(\"yizhemrfz_eff\");\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tzhulimrfz: {\n\t\t\tmod: {\n\t\t\t\tcardname(card, player, name) {\n\t\t\t\t\tif (card.hasGaintag(\"zhulimrfz\")) return \"tao\";\n\t\t\t\t},\n\t\t\t},\n\t\t\taudio: 2,\n\t\t\ttrigger: { player: \"phaseJieshuBegin\" },\n\t\t\tforced: true,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tif (player.getStat(\"damage\") != undefined) {\n\t\t\t\t\tif (player.countCards(\"he\") > 0) player.chooseToDiscard(\"he\", true, `【医者】:请选择弃置一张牌`);\n\t\t\t\t} else {\n\t\t\t\t\tconst result = await player.draw(2);\n\t\t\t\t\tif (!result) return;\n\t\t\t\t\tvar cards = result.result;\n\t\t\t\t\tfor (var i of cards) {\n\t\t\t\t\t\tvar num = get.number(i);\n\t\t\t\t\t\tif (get.suit(i) == \"heart\" && num >= 2 && num <= 9) {\n\t\t\t\t\t\t\ti.addGaintag(\"zhulimrfz\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\n\t\t//inna 双月\n\t\tshuangzimrfz: {\n\t\t\taudio: 2,\n\t\t\tgroup: [\"shuangzimrfz_eff1\", \"shuangzimrfz_eff2\"],\n\t\t\tsubSkill: {\n\t\t\t\teff1: {\n\t\t\t\t\tdirect: true,\n\t\t\t\t\ttrigger: { player: \"useCardBegin\" },\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\t//复制卡牌、对应元素\n\t\t\t\t\t\tlet cardcopy = { ...trigger.card },\n\t\t\t\t\t\t\tevt = event.getParent(3);\n\t\t\t\t\t\tvar num = get.randomNumberSJZX();\n\t\t\t\t\t\tcardcopy[\"idSJZX\"] = num;\n\t\t\t\t\t\tcardcopy[\"evtP\"] = evt.orderingCards;\n\t\t\t\t\t\tconsole.log(evt.orderingCards);\n\t\t\t\t\t\ttrigger.card[\"idSJZX\"] = num;\n\t\t\t\t\t\tif (!player.storage.shuangzimrfz) player.storage.shuangzimrfz = [];\n\t\t\t\t\t\tplayer.storage.shuangzimrfz.push(cardcopy);\n\t\t\t\t\t\t//删除对应元素\n\t\t\t\t\t\ttrigger.card.cards = [];\n\t\t\t\t\t\tdelete trigger.card.number;\n\t\t\t\t\t\tdelete trigger.card.suit;\n\t\t\t\t\t\tdelete trigger.card.color;\n\t\t\t\t\t\tevt.orderingCards = undefined;\n\t\t\t\t\t\tevt.cards = [];\n\t\t\t\t\t\t//console.log(evt);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\teff2: {\n\t\t\t\t\tdirect: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tsource: [\"damageBegin\"],\n\t\t\t\t\t\tplayer: [\"cardsDiscardAfter\"],\n\t\t\t\t\t},\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\tif (event.name == \"damage\") {\n\t\t\t\t\t\t\tvar storage = player.storage.shuangzimrfz;\n\t\t\t\t\t\t\tif (!event.card) return false;\n\t\t\t\t\t\t\tfor (var i of storage) {\n\t\t\t\t\t\t\t\tif (event.card.idSJZX != i.idSJZX) continue;\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar evt = event.getParent();\n\t\t\t\t\t\t\tvar storage = player.storage.shuangzimrfz;\n\t\t\t\t\t\t\tif (evt.name != \"orderingDiscard\") return false;\n\t\t\t\t\t\t\tfor (var i of storage) {\n\t\t\t\t\t\t\t\tfor (var j in event.cards) {\n\t\t\t\t\t\t\t\t\tif (j.idSJZX != i.idSJZX) continue;\n\t\t\t\t\t\t\t\t\treturn event.cards.filterInD(\"d\").length;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tlet evt = event.getParent(3),\n\t\t\t\t\t\t\tstorage = player.storage.shuangzimrfz;\n\t\t\t\t\t\t//重置\n\t\t\t\t\t\tfor (var i of storage) {\n\t\t\t\t\t\t\tif (i.idSJZX == trigger.card.idSJZX) {\n\t\t\t\t\t\t\t\tevt.cards = i.cards;\n\t\t\t\t\t\t\t\ttrigger.card.cards = i.cards;\n\t\t\t\t\t\t\t\ttrigger.card.number = i.number;\n\t\t\t\t\t\t\t\ttrigger.card.suit = i.suit;\n\t\t\t\t\t\t\t\ttrigger.card.color = i.color;\n\t\t\t\t\t\t\t\tdelete player.storage.shuangzimrfz[i];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsole.log(trigger.card);\n\t\t\t\t\t\tconsole.log(evt);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t//凛视\n\t\t/** @type { Skill } */\n\t\tjiangtumrfz: {\n\t\t\taudio: 2,\n\t\t\tdirect: true,\n\t\t\ttrigger: { player: [\"gainPlayerCardBegin\", \"discardPlayerCardBegin\", \"choosePlayerCardBegin\"] },\n\t\t\tfilter(event, player) {\n\t\t\t\treturn _status.currentPhase == event.target;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\t//@ts-ignore\n\t\t\t\tplayer.logSkill(\"jiangtumrfz\", _status.currentPhase);\n\t\t\t\ttrigger.visible = true;\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tthreaten: 1.1,\n\t\t\t\tviewHandcard: true,\n\t\t\t\tskillTagFilter(player, tag, arg) {\n\t\t\t\t\tif (tag === \"viewHandcard\" && arg !== _status.currentPhase) return false;\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\t/** @type { Skill } */\n\t\tjieshimrfz: {\n\t\t\tmod: {\n\t\t\t\taiOrder: function (player, card, num) {\n\t\t\t\t\tvar list = player.storage.jieshimrfz;\n\t\t\t\t\tif (typeof card == \"object\" && player.isPhaseUsing() && list && list.length > 0) {\n\t\t\t\t\t\tif (get.type2(card) == list[0]) return num + 10;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\taudio: 3,\n\t\t\ttrigger: { global: \"phaseUseBegin\" },\n\t\t\tfilter(event, player) {\n\t\t\t\treturn player.countCards(\"he\") > 0;\n\t\t\t},\n\t\t\tdirect: true,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tconst {cards} = await player\n\t\t\t\t\t.chooseToDiscard(\"he\")\n\t\t\t\t\t.set(\"prompt\", `【揭示】:你可以弃置一张牌，然后猜测${trigger.player == player ? \"你\" : get.translation(trigger.player)}本阶段前三张牌分别使用的类型（对${trigger.player == player ? \"你\" : get.translation(trigger.player)}不可见）。`)\n\t\t\t\t\t.set(\"ai\", function (card) {\n\t\t\t\t\t\treturn 8 - get.value(card);\n\t\t\t\t\t})\n\t\t\t\t\t.forResult();\n\t\t\t\tif (!cards) return;\n\t\t\t\tplayer.logSkill(\"jieshimrfz\");\n\t\t\t\tvar list = [\n\t\t\t\t\t[\"待选择的牌的类型\", [[\"basic\", \"basic\", \"basic\", \"trick\", \"trick\", \"trick\", \"equip\", \"equip\", \"equip\"], \"vcard\"]],\n\t\t\t\t\t[\"请调整顺序<br>从左到右:第一、二、三张牌\", []],\n\t\t\t\t];\n\t\t\t\tconst {moved} = await player\n\t\t\t\t\t.chooseToMove(`【揭示】:请猜测${trigger.player == player ? \"你\" : get.translation(trigger.player)}本阶段前三张牌分别使用的类型`)\n\t\t\t\t\t.set(\"list\", list)\n\t\t\t\t\t.set(\"filterMove\", function (from, to, moved) {\n\t\t\t\t\t\treturn (to == 1 && moved[1].length < 3) || to == 0 || typeof to !== \"number\";\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"processAI\", () => {\n\t\t\t\t\t\tvar moved = [[114514], []],\n\t\t\t\t\t\t\tcards = _status.currentPhase.getCards(\"h\"),\n\t\t\t\t\t\t\torder = [\n\t\t\t\t\t\t\t\t[0, 0],\n\t\t\t\t\t\t\t\t[0, 0],\n\t\t\t\t\t\t\t\t[0, 0],\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\tfor (var i of cards) {\n\t\t\t\t\t\t\tfor (var j = 0; j < order.length; j++) {\n\t\t\t\t\t\t\t\tif (get.order(i) > order[j][1]) {\n\t\t\t\t\t\t\t\t\torder[j] = [i, get.order(i)];\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (var i of order) {\n\t\t\t\t\t\t\tmoved[1].push([\"ByTheLeaderOne\", \"作者：林登万\", get.type2(i[0])]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn moved;\n\t\t\t\t\t})\n\t\t\t\t\t.forResult();\n\t\t\t\tif (!moved) return;\n\t\t\t\tvar list = moved[1].map(i => i[2]);\n\t\t\t\ttrigger.player.addTempSkill(\"jieshimrfz_eff\", { player: \"phaseUseEnd\" });\n\t\t\t\ttrigger.player.storage.jieshimrfz = list;\n\t\t\t\ttrigger.player.storage.jieshimrfz_eff = player;\n\t\t\t\t_status.tmpTotal_jieshimrfz = 0;\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\teff: {\n\t\t\t\t\tonremove(player) {\n\t\t\t\t\t\tdelete player.storage.jieshimrfz;\n\t\t\t\t\t\tdelete player.storage.jieshimrfz_eff;\n\t\t\t\t\t\tdelete _status.tmpTotal_jieshimrfz;\n\t\t\t\t\t},\n\t\t\t\t\tdirect: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tmark: true,\n\t\t\t\t\tintro: {\n\t\t\t\t\t\tcontent(event, player) {\n\t\t\t\t\t\t\tvar storage = player.storage.jieshimrfz;\n\t\t\t\t\t\t\tif (storage === \"error\") return `未知错误`;\n\t\t\t\t\t\t\tif (game.me === player && game.me.hasSkill(\"jieshimrfz\") && storage.length > 0) return get.translation(storage);\n\t\t\t\t\t\t\tif (storage.length == 0) return \"全部已猜测完毕\";\n\t\t\t\t\t\t\treturn `剩余${storage.length}张`;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\ttrigger: { player: \"useCardAfter\" },\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\tif (!player.storage.jieshimrfz_eff.isIn()) return false;\n\t\t\t\t\t\treturn player.storage.jieshimrfz && player.storage.jieshimrfz.length > 0;\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tif (!_status.tmpTotal_jieshimrfz) _status.tmpTotal_jieshimrfz = 0;\n\t\t\t\t\t\tvar target = player.storage.jieshimrfz_eff;\n\t\t\t\t\t\tif (get.type2(trigger.card) == player.storage.jieshimrfz[0]) {\n\t\t\t\t\t\t\t_status.tmpTotal_jieshimrfz++;\n\t\t\t\t\t\t\tif (_status.tmpTotal_jieshimrfz == 3 && target != player) player.chat(\"被看穿了吗？\");\n\t\t\t\t\t\t\telse if (_status.tmpTotal_jieshimrfz == 3) player.chat(\"我猜的真准！\");\n\t\t\t\t\t\t\ttarget.logSkill(\"jieshimrfz\", player);\n\t\t\t\t\t\t\ttarget.popup(\"猜测正确\");\n\t\t\t\t\t\t\ttarget.draw(_status.tmpTotal_jieshimrfz);\n\t\t\t\t\t\t\tif (_status.tmpTotal_jieshimrfz > 1) {\n\t\t\t\t\t\t\t\tvar num = Math.min(_status.tmpTotal_jieshimrfz - 1, 1);\n\t\t\t\t\t\t\t\tconst {bool} = await target\n\t\t\t\t\t\t\t\t\t.chooseBool(`【揭示】:是否对${get.translation(player)}造成${get.cnNumber(num)}点伤害？`)\n\t\t\t\t\t\t\t\t\t.set(\"ai\", () => get.damageEffect(target, player) > 0)\n\t\t\t\t\t\t\t\t\t.forResult();\n\t\t\t\t\t\t\t\tif (bool) player.damage(num, target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (target == player) player.chat(\"<img style='width:100px;height:100px' src=\" + lib.assetURL + \"extension/WhichWay/image/skill/jieshiError.png></img>\");\n\t\t\t\t\t\t\ttarget.popup(\"猜测错误\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.storage.jieshimrfz.shift();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t//医疗阿米娅\n\t\ttongqingmrfz: {\n\t\t\tinit(player, skill) {\n\t\t\t\tplayer.storage[skill] = [];\n\t\t\t},\n\t\t\tonremove: function (player, skill) {\n\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\n\t\t\t\t\treturn card.hasGaintag(\"tongqingmrfzx\");\n\t\t\t\t});\n\t\t\t\tif (cards.length) {\n\t\t\t\t\tplayer.lose(cards, ui.discardPile);\n\t\t\t\t\tplayer.$throw(cards, 1000);\n\t\t\t\t\tgame.log(cards, \"进入了弃牌堆\");\n\t\t\t\t}\n\t\t\t},\n\t\t\tmarktext: \"情绪\",\n\t\t\tintro: {\n\t\t\t\tname: \"情绪\",\n\t\t\t\tmark(dialog, content, player) {\n\t\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\n\t\t\t\t\t\treturn card.hasGaintag(\"tongqingmrfzx\");\n\t\t\t\t\t});\n\t\t\t\t\tif (!cards || cards.length < 1) {\n\t\t\t\t\t\tdialog.addText(`没有‘情绪’`);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdialog.addText(`共有${cards.length}张‘情绪’`);\n\t\t\t\t\t\tdialog.addSmall(cards);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\taudio: 2,\n\t\t\ttrigger: { global: \"phaseJieshuBegin\" },\n\t\t\tgetDiscard: function (event, player) {\n\t\t\t\tlet cards = [];\n\t\t\t\tfor (var character of game.players) {\n\t\t\t\t\tvar history = character.getHistory(\"lose\", function (evt) {\n\t\t\t\t\t\treturn evt && evt.type == \"discard\";\n\t\t\t\t\t});\n\t\t\t\t\tif (history.length == 0) continue;\n\t\t\t\t\tfor (var i = 0; i < history.length; i++) {\n\t\t\t\t\t\tvar cardsList = history[i].cards;\n\t\t\t\t\t\tfor (var j = 0; j < cardsList.length; j++) {\n\t\t\t\t\t\t\tif (get.position(cardsList[j], true) != \"d\") continue;\n\t\t\t\t\t\t\tcards.push(cardsList[j]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn cards;\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\tlet cardsList = lib.skill.tongqingmrfz.getDiscard(event, player);\n\t\t\t\treturn cardsList && cardsList.length > 0;\n\t\t\t},\n\t\t\tprompt2(event, player) {\n\t\t\t\tlet cardsList = lib.skill.tongqingmrfz.getDiscard(event, player),\n\t\t\t\t\tcards = player.getCards(\"s\", function (card) {\n\t\t\t\t\t\treturn card.hasGaintag(\"tongqingmrfzx\");\n\t\t\t\t\t});\n\t\t\t\treturn `【恸请】:你可以将所有的‘情绪’（${cards.length > 0 ? `共有${cards.length}张‘情绪’` : \"没有‘情绪’\"}）置入弃牌堆，然后将${get.translation(cardsList)}置于你的武将牌上，称之为‘情绪’`;\n\t\t\t},\n\t\t\tcheck(event, player) {\n\t\t\t\tlet cardsList = lib.skill.tongqingmrfz.getDiscard(event, player),\n\t\t\t\t\tcards = player.getCards(\"s\", function (card) {\n\t\t\t\t\t\treturn card.hasGaintag(\"tongqingmrfzx\");\n\t\t\t\t\t});\n\t\t\t\tif (cards.length < 1) return true;\n\t\t\t\treturn get.value(cardsList) - get.value(cards) > 0;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tvar cards = player.getCards(\"s\", function (card) {\n\t\t\t\t\treturn card.hasGaintag(\"tongqingmrfzx\");\n\t\t\t\t});\n\t\t\t\tif (cards && cards.length > 0) {\n\t\t\t\t\tawait player.loseToDiscardpile(cards);\n\t\t\t\t}\n\t\t\t\tlet cardsList = lib.skill.tongqingmrfz.getDiscard(trigger, player);\n\t\t\t\tgame.log(player, \"将\", cardsList.length, \"张牌置于在武将牌上\");\n\t\t\t\tplayer.loseToSpecial(cardsList, \"tongqingmrfzx\");\n\t\t\t\tplayer.markSkill(\"tongqingmrfz\");\n\t\t\t},\n\t\t},\n\t\tcibeimrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { player: \"loseAfter\" },\n\t\t\tfilter(event, player) {\n\t\t\t\tvar position = event.cards.map(i => i.original);\n\t\t\t\treturn position.every(item => item != \"h\");\n\t\t\t},\n\t\t\tdirect: true,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tconst {targets} = await player\n\t\t\t\t\t.chooseTarget()\n\t\t\t\t\t.set(\"prompt\", `【慈悲】:你可以令你攻击范围内的一名角色或你回复一点体力或摸一张牌`)\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\n\t\t\t\t\t\treturn player.inRange(target) || target == player;\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"ai\", target => get.attitude(_status.event.player, target) > 0)\n\t\t\t\t\t.forResult();\n\t\t\t\tif (!targets) return;\n\t\t\t\tlet target = targets[0];\n\t\t\t\tif (target.getDamagedHp() < 1) {\n\t\t\t\t\ttarget.draw();\n\t\t\t\t\tplayer.logSkill(\"cibeimrfz\", target);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst {control} = await player\n\t\t\t\t\t.chooseControl(\"回复体力\", \"摸一张牌\")\n\t\t\t\t\t.set(\"prompt\", `【慈悲】:请选择一项`)\n\t\t\t\t\t.set(\"ai\", () => 0)\n\t\t\t\t\t.forResult();\n\t\t\t\tif (!control) return;\n\t\t\t\tif (control == \"回复体力\") {\n\t\t\t\t\ttarget.recover();\n\t\t\t\t} else target.draw();\n\t\t\t\tplayer.logSkill(\"cibeimrfz\", target);\n\t\t\t},\n\t\t},\n\n\t\t// 异格芬 历战锐枪芬\n\t\txiaozhimrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"useCardToPlayered\",\n\t\t\t},\n\t\t\tcheck: function (event, player) {\n\t\t\t\treturn get.attitude(player, event.target) < 0;\n\t\t\t},\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn event.card.name == \"sha\" && player.canCompare(event.target);\n\t\t\t},\n\t\t\tlogTarget: \"target\",\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tvar result = await player.chooseToCompare(trigger.target);\n\t\t\t\tif (!result) return;\n\t\t\t\tresult = result.result;\n\t\t\t\tif (result.winner != player) player.draw(2);\n\t\t\t\tif (result.winner != trigger.target) {\n\t\t\t\t\tvar cards = [result.player, result.target];\n\t\t\t\t\tcards = cards.filter(card => player.hasUseTarget(card) && !get.owner(card));\n\t\t\t\t\tif (cards.length) {\n\t\t\t\t\t\tvar {links} = await player\n\t\t\t\t\t\t\t.chooseButton([\"是否使用其中的牌？\", cards])\n\t\t\t\t\t\t\t.set(\"ai\", button => _status.event.player.getUseValue(button.link))\n\t\t\t\t\t\t\t.forResult();\n\t\t\t\t\t\tif (links) {\n\t\t\t\t\t\t\tvar card = links[0];\n\t\t\t\t\t\t\tplayer.$gain2(card, false);\n\t\t\t\t\t\t\tgame.delayx();\n\t\t\t\t\t\t\tplayer.chooseUseTarget(true, card, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ttrigger.getParent().directHit.add(trigger.target);\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\tzhishoumrfz: {\n\t\t\taudio: 2,\n\t\t\tenable: \"chooseToUse\",\n\t\t\tfilterCard(card) {\n\t\t\t\treturn get.itemtype(card) == \"card\" && card.hasGaintag(\"zhishoumrfz\");\n\t\t\t},\n\t\t\tsubfrequent: [\"addcount\"],\n\t\t\tposition: \"h\",\n\t\t\tviewAs(cards, player) {\n\t\t\t\tif (cards.length) {\n\t\t\t\t\tif (_status.currentPhase == player) return { name: \"sha\" };\n\t\t\t\t\treturn { name: \"shan\" };\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\tviewAsFilter(player) {\n\t\t\t\tif (!player.countCards(\"h\", card => card.hasGaintag(\"zhishoumrfz\"))) return false;\n\t\t\t},\n\t\t\tprompt(event) {\n\t\t\t\treturn `【执守】:将本轮出牌阶段内获得的牌当作${_status.currentPhase === event.player ? \"【闪】\" : \"【杀】\"}使用`;\n\t\t\t},\n\t\t\tcheck(card) {\n\t\t\t\treturn 7 - get.value(card);\n\t\t\t},\n\t\t\tonremove(player) {\n\t\t\t\tplayer.removeGaintag(\"zhishoumrfz\");\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 2,\n\t\t\t\trespondShan: true,\n\t\t\t\trespondSha: true,\n\t\t\t\tskillTagFilter(player, tag, arg) {\n\t\t\t\t\tif (arg == \"respond\" || !player.countCards(\"h\", card => _status.connectMode || card.hasGaintag(\"zhishoumrfz\"))) return false;\n\t\t\t\t},\n\t\t\t\tresult: {\n\t\t\t\t\tplayer: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t\tgroup: [\"zhishoumrfz_mark\", \"zhishoumrfz_addcount\"],\n\t\t\tsubSkill: {\n\t\t\t\taddcount: {\n\t\t\t\t\taudio: \"zhishoumrfz\",\n\t\t\t\t\ttrigger: { player: \"gainAfter\" },\n\t\t\t\t\tlastDo: true,\n\t\t\t\t\tfrequent: true,\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\tvar evt = event.getParent(\"phaseDraw\");\n\t\t\t\t\t\tif (player.hasSkill(\"zhishoumrfz_eff\")) return false;\n\t\t\t\t\t\tif (evt && evt.player == player) return false;\n\t\t\t\t\t\treturn event.getg(player).length > 0;\n\t\t\t\t\t},\n\t\t\t\t\tprompt: \"【执守】:是否令本轮使用【杀】的次数+1？\",\n\t\t\t\t\tcheck() {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},\n\t\t\t\t\tcontent() {\n\t\t\t\t\t\tplayer.addTempSkill(\"zhishoumrfz_eff\", { global: \"roundStart\" });\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\teff: {\n\t\t\t\t\tmark: true,\n\t\t\t\t\tintro: {\n\t\t\t\t\t\tcontent: \"使用【杀】的次数+1\",\n\t\t\t\t\t},\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tmod: {\n\t\t\t\t\t\tcardUsable(card, player, num) {\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num + 1;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tmark: {\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tglobal: \"roundStart\",\n\t\t\t\t\t\tplayer: \"gainBegin\",\n\t\t\t\t\t},\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\tif (event.name == \"gain\") return player.isPhaseUsing();\n\t\t\t\t\t\telse return game.roundNumber > 1;\n\t\t\t\t\t},\n\t\t\t\t\tcontent() {\n\t\t\t\t\t\tif (trigger.name == \"gain\") trigger.gaintag.add(\"zhishoumrfz\");\n\t\t\t\t\t\telse player.removeGaintag(\"zhishoumrfz\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t// 海霓\n\t\tjingchaomrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { player: \"damageEnd\" },\n\t\t\tfilter(event, player) {\n\t\t\t\treturn player.countCards(\"he\") > 1;\n\t\t\t},\n\t\t\tcheck(event, player) {\n\t\t\t\tif (player.getDamagedHp() < 1) return false;\n\t\t\t\treturn 3 - player.getDamagedHp() + player.getCards(\"he\", card => get.value(card) < 7).length;\n\t\t\t},\n\t\t\tasync cost(event, trigger, player) {\n\t\t\t\tconst { result } = await player\n\t\t\t\t\t.chooseToDiscard(2, \"he\")\n\t\t\t\t\t.set(\"prompt2\", `你可以弃置两张牌并回复${trigger.num}点体力，若你弃置的牌类别不同，你将手牌补至5张`)\n\t\t\t\t\t.set(\"ai\", card => {\n\t\t\t\t\t\tvar player = get.event().player,\n\t\t\t\t\t\t\tselected = ui.selected.cards,\n\t\t\t\t\t\t\tnum = get.value(card);\n\t\t\t\t\t\tfor (var i of selected) {\n\t\t\t\t\t\t\tif (get.type2(i) == get.type2(card)) num - 3;\n\t\t\t\t\t\t\telse num + 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 7 - num + player.getDamagedHp();\n\t\t\t\t\t});\n\t\t\t\tevent.result = result;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet cards = event.cards;\n\t\t\t\tplayer.recover(trigger.num);\n\t\t\t\tif (cards.length != 2) return;\n\t\t\t\tif (get.type2(cards[0]) != get.type2(cards[1])) {\n\t\t\t\t\tplayer.drawTo(5);\n\t\t\t\t\tplayer.tempBanSkill(\"jingchaomrfz\", \"phaseEnd\", false);\n\t\t\t\t\tgame.log(this, \"的技能\", `#g【静潮】`, `本回合失效了`);\n\t\t\t\t}\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tmaixie_hp: true,\n\t\t\t\tthreaten: 0.8,\n\t\t\t},\n\t\t},\n\t\tcehuimrfz: {\n\t\t\tinit(player, skill) {\n\t\t\t\tplayer.storage[skill] = 0;\n\t\t\t},\n\t\t\taudio: 2,\n\t\t\tmark: true,\n\t\t\tintro: {\n\t\t\t\tcontent: \"本回合开始时手牌数为：#\",\n\t\t\t},\n\t\t\ttrigger: {\n\t\t\t\tglobal: \"phaseJieshuBegin\",\n\t\t\t},\n\t\t\tgetDiscardCards(event) {\n\t\t\t\tlet cards = [];\n\t\t\t\tfor (var i of game.players.slice().concat(game.dead)) {\n\t\t\t\t\tvar history = i.getHistory(\"lose\", function (evt) {\n\t\t\t\t\t\treturn evt && evt.type == \"discard\";\n\t\t\t\t\t});\n\t\t\t\t\tif (history.length == 0) continue;\n\t\t\t\t\tfor (var k of history) {\n\t\t\t\t\t\tif (k.cards.length == 0) continue;\n\t\t\t\t\t\tfor (var j of k.cards) {\n\t\t\t\t\t\t\tif (get.position(j) != \"d\") continue;\n\t\t\t\t\t\t\tcards.push(j);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn cards;\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\tvar cards = lib.skill.cehuimrfz.getDiscardCards(event);\n\t\t\t\tif (!game.hasPlayer(current => current != player && player.canCompare(current, true, false))) return false;\n\t\t\t\treturn player.countCards(\"h\") != player.storage.cehuimrfz && cards.length > 0;\n\t\t\t},\n\t\t\tasync cost(event, trigger, player) {\n\t\t\t\tvar cards = lib.skill.cehuimrfz.getDiscardCards(trigger);\n\t\t\t\tconst { result } = await player\n\t\t\t\t\t.chooseCardButton(cards)\n\t\t\t\t\t.set(\"prompt2\", `你可以选择一张牌并与一名其他角色进行拼点，若你赢，你使用牌堆顶3张牌`)\n\t\t\t\t\t.set(\"ai\", link => get.number(link));\n\t\t\t\tresult.cost_data = result.links;\n\t\t\t\tevent.result = result;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet card = event.cost_data[0];\n\t\t\t\tvar {targets} = await player\n\t\t\t\t\t.chooseTarget(true)\n\t\t\t\t\t.set(\"prompt\", `【测绘】:请选择一名其他角色进行拼点`)\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => target != player && player.canCompare(target, true, false))\n\t\t\t\t\t.set(\"ai\", target => {\n\t\t\t\t\t\tvar player = get.event().player;\n\t\t\t\t\t\treturn get.attitude(player, target) < 0;\n\t\t\t\t\t})\n\t\t\t\t\t.forResult();\n\t\t\t\tif (!targets) return;\n\t\t\t\tvar tmpfuc = async function () {\n\t\t\t\t\tlet next = player.chooseToCompare(targets[0]);\n\t\t\t\t\tif (!next.fixedResult) next.fixedResult = {};\n\t\t\t\t\tnext.fixedResult[player.playerid] = card;\n\t\t\t\t\treturn next;\n\t\t\t\t};\n\t\t\t\tvar next = await tmpfuc();\n\t\t\t\tif (next.result.bool) {\n\t\t\t\t\tvar cards = game.cardsGotoOrdering(get.cards(3)).cards;\n\t\t\t\t\tplayer.showCards(cards, `${get.translation(player)}展示了牌堆顶三张牌`);\n\t\t\t\t\tlet canUse = cards.filter(i => player.hasUseTarget(i, false));\n\t\t\t\t\tif (canUse.length == 0) return;\n\t\t\t\t\twhile (canUse.length > 0) {\n\t\t\t\t\t\tconst {links} =\n\t\t\t\t\t\t\tcanUse.length == 1\n\t\t\t\t\t\t\t\t? {links:canUse}\n\t\t\t\t\t\t\t\t: await player\n\t\t\t\t\t\t\t\t\t\t.chooseCardButton(canUse, true)\n\t\t\t\t\t\t\t\t\t\t.set(\"prompt\", `【测绘】:请选择你要使用的牌`)\n\t\t\t\t\t\t\t\t\t\t.set(\"ai\", link => get.number(link))\n\t\t\t\t\t\t\t\t\t\t.forResult();\n\t\t\t\t\t\tif (!links) continue;\n\t\t\t\t\t\tawait player\n\t\t\t\t\t\t\t.chooseUseTarget(links[0])\n\t\t\t\t\t\t\t.set(\"nodistance\", true)\n\t\t\t\t\t\t\t.set(\"prompt\", `请选择${get.translation(links[0])}的目标`);\n\t\t\t\t\t\tcanUse.remove(links[0]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tgroup: [\"cehuimrfz_record\"],\n\t\t\tsubSkill: {\n\t\t\t\trecord: {\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tglobal: \"phaseBegin\",\n\t\t\t\t\t},\n\t\t\t\t\tcontent() {\n\t\t\t\t\t\tif (typeof player.storage.cehuimrfz !== \"number\") player.storage.cehuimrfz = 0;\n\t\t\t\t\t\tplayer.storage.cehuimrfz = player.countCards(\"h\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t// 深巡\n\t\tyuchaomrfz: {\n\t\t\taudio: 2,\n\t\t\tenable: \"phaseUse\",\n\t\t\tusable: 1,\n\t\t\tfilter(event, player) {\n\t\t\t\treturn game.hasPlayer(current => current != player && player.canCompare(current, true, false)) && player.countCards(\"hej\") > 0;\n\t\t\t},\n\t\t\tfilterTarget(card, player, target) {\n\t\t\t\treturn player.canCompare(target, true, false) && target != player;\n\t\t\t},\n\t\t\tselectTarget: [1, 2],\n\t\t\tmultitarget: true,\n\t\t\tmultiline: true,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet targets = event.targets;\n\t\t\t\tconst {links} = await player\n\t\t\t\t\t.choosePlayerCard(player, \"hej\", true)\n\t\t\t\t\t.set(\"prompt\", `【御潮】:请选择你的拼点牌`)\n\t\t\t\t\t.set(\"ai\", function (button) {\n\t\t\t\t\t\tvar card = button.link;\n\t\t\t\t\t\tvar player = get.event().player,\n\t\t\t\t\t\t\tnum = 0;\n\t\t\t\t\t\tif (get.position(card) == \"j\") num += 3 + get.value(card) / 2;\n\t\t\t\t\t\tif (get.position(card) == \"e\") num -= 2;\n\t\t\t\t\t\treturn get.number(card) + num - get.value(card) / 2;\n\t\t\t\t\t})\n\t\t\t\t\t.forResult();\n\t\t\t\tif (!links) return;\n\t\t\t\tlet next = player.chooseToCompare(targets);\n\t\t\t\tif (!next.fixedResult) next.fixedResult = {};\n\t\t\t\tnext.fixedResult[player.playerid] = links[0];\n\t\t\t\tnext.callback = lib.skill.yuchaomrfz.callback;\n\t\t\t},\n\t\t\tasync callback(event, trigger, player) {\n\t\t\t\tif (event.num1 < event.num2) player.link(true);\n\t\t\t\telse if (event.num1 > event.num2) {\n\t\t\t\t\tevent.target.link(true);\n\t\t\t\t\tplayer.addTempSkill(\"yuchaomrfz_eff\", \"phaseEnd\");\n\t\t\t\t} else {\n\t\t\t\t\tevent.target.link(true);\n\t\t\t\t\tplayer.link(true);\n\t\t\t\t}\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\teff: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tmod: {\n\t\t\t\t\t\tcardUsableTarget(card, player, target) {\n\t\t\t\t\t\t\tif (target.isLinked()) return true;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 8,\n\t\t\t\tresult: {\n\t\t\t\t\ttarget: -1,\n\t\t\t\t\tplayer: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tyanhuimrfz: {\n\t\t\taudio: 2,\n\t\t\tderivation: [\"binglinchengxia\"],\n\t\t\ttrigger: { player: \"phaseUseBegin\" },\n\t\t\tforced: true,\n\t\t\tfilter(event, player) {\n\t\t\t\tvar card = get.autoViewAs({ name: \"binglinchengxia\" }, [_status.pileTop]);\n\t\t\t\treturn player.canAddJudge(card);\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tawait player.addJudge({ name: \"binglinchengxia\" }, [_status.pileTop]);\n\t\t\t\tplayer.draw(player.hp);\n\t\t\t\tplayer.loseHp();\n\t\t\t},\n\t\t},\n\n\t\t// 明椒\n\t\tsuozemrfz: {\n\t\t\tmark: true,\n\t\t\tintro: {\n\t\t\t\tcontent(event, player) {\n\t\t\t\t\treturn `记录的牌名：${player.storage.suozemrfz.length > 0 ? get.translation(player.storage.suozemrfz) : \"无\"}`;\n\t\t\t\t},\n\t\t\t},\n\t\t\taudio: 2,\n\t\t\tinit(player, skill) {\n\t\t\t\tplayer.storage[skill] = [];\n\t\t\t},\n\t\t\ttrigger: {\n\t\t\t\tplayer: [\"useCardEnd\", \"respondEnd\"],\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\tif (event.cards.length < 1) return false;\n\t\t\t\treturn !player.storage.suozemrfz.includes(event.card.name) && (get.type2(event.card) == \"basic\" || get.type(event.card) == \"trick\");\n\t\t\t},\n\t\t\tprompt2(event, player) {\n\t\t\t\treturn `是否记录${get.translation(event.card)}，然后观看牌堆顶${player.maxHp}张牌，并用等量手牌交换其中至多${player.storage.suozemrfz.length + 1}张牌？`;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tplayer.storage.suozemrfz.add(trigger.card.name);\n\t\t\t\tgame.log(player, `的`, `#g【索赜】`, `记录了`, trigger.card.name);\n\t\t\t\tvar cards = get.cards(player.maxHp);\n\t\t\t\tlet cardsc = cards.slice(0);\n\t\t\t\tconst {moved} = await player\n\t\t\t\t\t.chooseToMove(`【索赜】:请选择你要交换的牌（至多交换${player.storage.suozemrfz.length}张牌）`)\n\t\t\t\t\t.set(\"filterMove\", (from, to) => {\n\t\t\t\t\t\treturn typeof to !== \"number\";\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"list\", [\n\t\t\t\t\t\t[\"牌堆顶\", cardsc],\n\t\t\t\t\t\t[\"你的手牌\", player.getCards(\"h\")],\n\t\t\t\t\t])\n\t\t\t\t\t.set(\"filterOk\", moved => {\n\t\t\t\t\t\tlet h = get.event().cardsh;\n\t\t\t\t\t\treturn h.filter(i => moved[0].includes(i)).length <= get.event().num;\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"processAI\", list => {\n\t\t\t\t\t\tvar player = get.event().player;\n\t\t\t\t\t\tlet cards1 = list[0][1].slice(),\n\t\t\t\t\t\t\tcards2 = player.getCards(\"h\");\n\n\t\t\t\t\t\tif (cards2.length === 0) {\n\t\t\t\t\t\t\treturn [cards1, []];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet maxC = Math.max(...cards1.map(i => get.value(i)));\n\t\t\t\t\t\tlet minH = Math.min(...cards2.map(i => get.value(i)));\n\n\t\t\t\t\t\tlet count = 0,\n\t\t\t\t\t\t\tnum = get.event().num;\n\n\t\t\t\t\t\twhile (minH < maxC && count < num) {\n\t\t\t\t\t\t\tcount++;\n\n\t\t\t\t\t\t\tlet maxCIndex = cards1.map(i => get.value(i)).indexOf(maxC);\n\n\t\t\t\t\t\t\tlet minHIndex = cards2.map(i => get.value(i)).indexOf(minH);\n\n\t\t\t\t\t\t\t[cards1[maxCIndex], cards2[minHIndex]] = [cards2[minHIndex], cards1[maxCIndex]];\n\n\t\t\t\t\t\t\tmaxC = Math.max(...cards1.map(i => get.value(i)));\n\t\t\t\t\t\t\tminH = Math.min(...cards2.map(i => get.value(i)));\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn [cards1, cards2];\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"num\", player.storage.suozemrfz.length)\n\t\t\t\t\t.set(\"cardsh\", player.getCards(\"h\"))\n\t\t\t\t\t.forResult();\n\t\t\t\tconst puts = player.getCards(\"h\", i => moved[0].includes(i));\n\t\t\t\tconst gains = cardsc.filter(i => moved[1].includes(i));\n\t\t\t\tif (puts.length && gains.length) {\n\t\t\t\t\tplayer.$throw(puts.length, 1000);\n\t\t\t\t\tawait player.lose(puts, ui.special);\n\t\t\t\t\tawait player.gain(gains, \"giveAuto\");\n\t\t\t\t}\n\t\t\t\tcardsc = moved[0].slice();\n\t\t\t\tif (cardsc.length) {\n\t\t\t\t\tawait game.cardsGotoOrdering(cardsc);\n\t\t\t\t\tfor (let i = cardsc.length - 1; i >= 0; i--) {\n\t\t\t\t\t\tui.cardPile.insertBefore(cardsc[i], ui.cardPile.firstChild);\n\t\t\t\t\t}\n\t\t\t\t\tgame.log(get.cnNumber(cardsc.length, true), \"张牌被放回了牌堆顶\");\n\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\tyouyimrfz: {\n\t\t\taudio: 2,\n\t\t\tforced: true,\n\t\t\ttrigger: { player: \"phaseJieshuBegin\" },\n\t\t\tfilter(event, player) {\n\t\t\t\treturn player.storage.suozemrfz.length > 0;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tvar list = [];\n\t\t\t\tfor (var i = 0; i < lib.inpile.length; i++) {\n\t\t\t\t\tvar name = lib.inpile[i];\n\t\t\t\t\tif (!player.storage.suozemrfz.includes(name)) continue;\n\t\t\t\t\tif (get.type(name) == \"basic\") list.push([\"基本\", \"\", name]);\n\t\t\t\t\telse if (get.type(name) == \"trick\") list.push([\"锦囊\", \"\", name]);\n\t\t\t\t}\n\t\t\t\tlet {links} = await player\n\t\t\t\t\t.chooseButton([`游移:请移除${Math.ceil(list.length / 2)}张牌`, [list, \"vcard\"]], true)\n\t\t\t\t\t.set(\"selectButton\", Math.ceil(list.length / 2))\n\t\t\t\t\t.set(\"ai\", button => {\n\t\t\t\t\t\treturn _status.event.player.getUseValue(button.link, null, true);\n\t\t\t\t\t})\n\t\t\t\t\t.forResult();\n\t\t\t\tif (!links) return;\n\t\t\t\tplayer.storage.suozemrfz.removeArray(links.map(i => i[2]));\n\t\t\t\tlet names = links.filter(i => player.hasUseTarget(i[2])).map(i => [get.translation(get.type(i[2])), \"\", i[2]]);\n\t\t\t\tif (names.length < 1) return;\n\n\t\t\t\tlet {links2} =\n\t\t\t\t\tnames.length == 1\n\t\t\t\t\t\t? {links2:names}\n\t\t\t\t\t\t: await player\n\t\t\t\t\t\t\t\t.chooseButton([\"游移:请选择一张你要使用的牌\", [names, \"vcard\"]], true)\n\t\t\t\t\t\t\t\t.set(\"ai\", button => {\n\t\t\t\t\t\t\t\t\treturn _status.event.player.getUseValue({ name: button.link[2] }, null, true);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.forResult();\n\t\t\t\tplayer.chooseUseTarget({ name: links2[0][2] }, true);\n\t\t\t},\n\t\t},\n\n\t\t// 戴菲恩\n\t\tzhuofengmrfz: {\n\t\t\taudio: 2,\n\t\t\tusable: 1,\n\t\t\tenable: \"phaseUse\",\n\t\t\tfilter(event, player) {\n\t\t\t\treturn player.countCards(\"h\") > 0;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet list = [];\n\t\t\t\tif (player.getCards(\"h\", { color: \"red\" }).length) list.push(\"red\");\n\t\t\t\tif (player.getCards(\"h\", { color: \"black\" }).length) list.push(\"black\");\n\t\t\t\tlist.push(\"cancel2\");\n\t\t\t\tconst {control} = await player\n\t\t\t\t\t.chooseControl(list)\n\t\t\t\t\t.set(\"prompt\", `是否发动【濯锋】？`)\n\t\t\t\t\t.set(\"prompt2\", `你可以重铸手牌中一种颜色的所有牌，若你重铸了不少于2张牌，你摸一张牌，然后你视为本回合没有使用过【杀】。`)\n\t\t\t\t\t.set(\"ai\", () => {\n\t\t\t\t\t\tlet player = get.player(),\n\t\t\t\t\t\t\tlist = get.event().list;\n\t\t\t\t\t\tlet value = get.value(player.getCards(\"h\", { color: \"red\" })) - get.value(player.getCards(\"h\", { color: \"black\" }));\n\t\t\t\t\t\tif (list.length > 2) {\n\t\t\t\t\t\t\tif (value > 0) return \"red\";\n\t\t\t\t\t\t\treturn \"black\";\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (get.value(player.getCards(\"h\")) < 20) return list[0];\n\t\t\t\t\t\t\treturn \"cancel2\";\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"list\", list)\n\t\t\t\t\t.forResult();\n\t\t\t\tif (control === \"cancel2\") {\n\t\t\t\t\tdelete player.getStat(\"skill\")[\"zhuofengmrfz\"];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet cards = player.getCards(\"h\").filter(i => get.color(i) == control && player.canRecast(i));\n\t\t\t\tif (!cards) return;\n\t\t\t\tplayer.recast(cards);\n\t\t\t\tif (cards.length >= 2) player.draw();\n\t\t\t\tif (player.getStat(\"card\")[\"sha\"]) {\n\t\t\t\t\tdelete player.getStat(\"card\")[\"sha\"];\n\t\t\t\t}\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 3,\n\t\t\t\tresult: {\n\t\t\t\t\tplayer: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tqianggongmrfz: {\n\t\t\tmod: {\n\t\t\t\ttargetInRange(card, player, target, now) {\n\t\t\t\t\tlet mark = player.getStat(\"card\")[\"sha\"];\n\t\t\t\t\tif (card.name == \"sha\" && (!mark || mark == 0)) return true;\n\t\t\t\t},\n\t\t\t},\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"useCard\",\n\t\t\t\tsource: \"damageEnd\",\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\tlet mark = player.getStat(\"card\")[\"sha\"],\n\t\t\t\t\tstorage = player.storage.qianggongmrfz;\n\t\t\t\tif (event.parent.name == \"_lianhuan\" || event.parent.name == \"_lianhuan2\") return false;\n\t\t\t\tif (mark && mark > 1) return false;\n\t\t\t\treturn event.card && event.card.name == \"sha\" && (!storage || event.card == storage);\n\t\t\t},\n\t\t\tforced: true,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tif (!player.storage.qianggongmrfz) {\n\t\t\t\t\tplayer.storage.qianggongmrfz = trigger.card;\n\t\t\t\t\tplayer\n\t\t\t\t\t\t.when({\n\t\t\t\t\t\t\tglobal: \"phaseBegin\",\n\t\t\t\t\t\t\tplayer: \"useCardAfter\",\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.filter((event, player) => {\n\t\t\t\t\t\t\tlet storage = player.storage.qianggongmrfz;\n\t\t\t\t\t\t\tif (event.name == \"phase\") return true;\n\t\t\t\t\t\t\treturn event.card && storage && event.card == storage;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tdelete player.storage.qianggongmrfz;\n\t\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (trigger.name == \"useCard\") {\n\t\t\t\t\tif (typeof trigger.baseDamage != \"number\") trigger.baseDamage = 1;\n\t\t\t\t\ttrigger.baseDamage++;\n\t\t\t\t} else {\n\t\t\t\t\tdelete player.storage.qianggongmrfz;\n\t\t\t\t\tlet skills = player.getStockSkills(true, true);\n\t\t\t\t\tconst {control} = await player\n\t\t\t\t\t\t.chooseControl(skills)\n\t\t\t\t\t\t.set(\"prompt\", \"【抢攻】:请选择你要重置的技能\")\n\t\t\t\t\t\t.set(\"ai\", () => {\n\t\t\t\t\t\t\tlet list = get.event().list,\n\t\t\t\t\t\t\t\tsuffixs = [\"used\", \"round\", \"block\", \"blocker\"],\n\t\t\t\t\t\t\t\tskills = [];\n\t\t\t\t\t\t\tif (list.includes(\"zhuofengmrfz\")) return \"zhuofengmrfz\";\n\t\t\t\t\t\t\tfor (let skill of list) {\n\t\t\t\t\t\t\t\tlet info = get.info(skill);\n\t\t\t\t\t\t\t\tfor (let key of suffixs) {\n\t\t\t\t\t\t\t\t\tif (info[key]) skills.push(skill);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (skills.length == 0) skills.push(list[0]);\n\t\t\t\t\t\t\treturn skills.randomGet();\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.set(\"list\", skills)\n\t\t\t\t\t\t.forResult();\n\t\t\t\t\tif (!control) return;\n\t\t\t\t\tlet skillx = [control];\n\t\t\t\t\tgame.expandSkills(skillx);\n\t\t\t\t\tvar resetSkills = [];\n\t\t\t\t\tvar suffixs = [\"used\", \"round\", \"block\", \"blocker\"];\n\t\t\t\t\tfor (var skill of skillx) {\n\t\t\t\t\t\tvar info = get.info(skill);\n\t\t\t\t\t\tif (typeof info.usable == \"number\") {\n\t\t\t\t\t\t\tif (player.hasSkill(\"counttrigger\") && player.storage.counttrigger[skill] && player.storage.counttrigger[skill] >= 1) {\n\t\t\t\t\t\t\t\tdelete player.storage.counttrigger[skill];\n\t\t\t\t\t\t\t\tresetSkills.add(skill);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (typeof get.skillCount(skill) == \"number\" && get.skillCount(skill) >= 1) {\n\t\t\t\t\t\t\t\tdelete player.getStat(\"skill\")[skill];\n\t\t\t\t\t\t\t\tresetSkills.add(skill);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (info.round && player.storage[skill + \"_roundcount\"]) {\n\t\t\t\t\t\t\tdelete player.storage[skill + \"_roundcount\"];\n\t\t\t\t\t\t\tresetSkills.add(skill);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (player.storage[`temp_ban_${skill}`]) {\n\t\t\t\t\t\t\tdelete player.storage[`temp_ban_${skill}`];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (player.awakenedSkills.includes(skill)) {\n\t\t\t\t\t\t\tplayer.restoreSkill(skill);\n\t\t\t\t\t\t\tresetSkills.add(skill);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (var suffix of suffixs) {\n\t\t\t\t\t\t\tif (player.hasSkill(skill + \"_\" + suffix)) {\n\t\t\t\t\t\t\t\tplayer.removeSkill(skill + \"_\" + suffix);\n\t\t\t\t\t\t\t\tresetSkills.add(skill);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (resetSkills.length) {\n\t\t\t\t\t\tvar str = \"\";\n\t\t\t\t\t\tfor (var i of resetSkills) {\n\t\t\t\t\t\t\tstr += \"【\" + get.translation(i) + \"】、\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.log(player, \"重置了技能\", \"#g\" + str.slice(0, -1));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\n\t\t// 锡人\n\t\tsuximrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { player: \"useCardAfter\" },\n\t\t\tfilter(event, player) {\n\t\t\t\tlet cards = event.card.cards.filter(i => player.hasUseTarget(i, false, false) && get.position(i) == \"d\");\n\t\t\t\treturn !event.card.isCard && event.card.cards.length > 0 && cards.length > 0;\n\t\t\t},\n\t\t\tfrequent: true,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet cards = trigger.card.cards.filter(i => player.hasUseTarget(i, false, false) && get.position(i) == \"d\");\n\t\t\t\twhile (cards.length > 0) {\n\t\t\t\t\tconst {links} =\n\t\t\t\t\t\tcards.length == 1\n\t\t\t\t\t\t\t? {links:cards}\n\t\t\t\t\t\t\t: await player\n\t\t\t\t\t\t\t\t\t.chooseCardButton(\"【宿锡】:请选择你要使用的牌\", cards)\n\t\t\t\t\t\t\t\t\t.set(\"ai\", button => get.player().getUseValue(button, null, true))\n\t\t\t\t\t\t\t\t\t.forResult();\n\t\t\t\t\tif (!links) return;\n\t\t\t\t\tawait player.chooseUseTarget(links[0]).set(\"nodistance\", true).set(\"addCount\", false);\n\t\t\t\t\tcards.remove(links[0]);\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\tsanzhongmrfz: {\n\t\t\tinit(player, skill) {\n\t\t\t\tplayer.storage[skill] = {\n\t\t\t\t\tbasic: false,\n\t\t\t\t\ttrick: false,\n\t\t\t\t\tequip: false,\n\t\t\t\t};\n\t\t\t},\n\t\t\tmaps: {\n\t\t\t\tbasic: \"tao\",\n\t\t\t\ttrick: \"shunshou\",\n\t\t\t\tequip: \"wuzhong\",\n\t\t\t},\n\t\t\tonremove: true,\n\t\t\taudio: 2,\n\t\t\tenable: \"chooseToUse\",\n\t\t\thiddenCard: function (player, name) {\n\t\t\t\tconst maps = lib.skill.sanzhongmrfz.maps;\n\t\t\t\tif (!Object.values(maps).includes(name)) return false;\n\t\t\t\tfor (let key in maps) {\n\t\t\t\t\tif (name == maps[key] && player.countCards(\"hes\", { type: key }) > 0) return true;\n\t\t\t\t}\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\tconst types = Object.entries(player.storage.sanzhongmrfz)\n\t\t\t\t\t.filter(([key, value]) => value === false)\n\t\t\t\t\t.map(([key, value]) => key);\n\t\t\t\tconst maps = lib.skill.sanzhongmrfz.maps;\n\t\t\t\tif (types.length < 1) return false;\n\t\t\t\tfor (let type of types) {\n\t\t\t\t\tif (player.countCards(\"hes\", { type: type }) < 1 || !event.filterCard(get.autoViewAs({ name: maps[type] }, \"unsure\"), player, event)) continue;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t},\n\t\t\tchooseButton: {\n\t\t\t\tdialog: function (event, player) {\n\t\t\t\t\tconst maps = lib.skill.sanzhongmrfz.maps;\n\t\t\t\t\tconst swapped = {};\n\t\t\t\t\tObject.keys(maps).forEach(key => {\n\t\t\t\t\t\tswapped[maps[key]] = key;\n\t\t\t\t\t});\n\t\t\t\t\tlet list = [];\n\t\t\t\t\tfor (let name of Object.values(maps)) {\n\t\t\t\t\t\tif (event.filterCard && event.filterCard({ name: name }, player, event)) {\n\t\t\t\t\t\t\tif (player.storage.sanzhongmrfz[swapped[name]] != false) continue;\n\t\t\t\t\t\t\tif (player.countCards(\"hes\", { type: swapped[name] }) < 1) continue;\n\t\t\t\t\t\t\tif (get.type2(name) == \"trick\") {\n\t\t\t\t\t\t\t\tlist.push([\"锦囊\", \"\", name]);\n\t\t\t\t\t\t\t} else if (get.type(name) == \"basic\") {\n\t\t\t\t\t\t\t\tlist.push([\"基本\", \"\", name]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} //QQQ\n\t\t\t\t\treturn ui.create.dialog(\"三众\", [list, \"vcard\"]);\n\t\t\t\t},\n\t\t\t\tcheck: function (button) {\n\t\t\t\t\tif (_status.event.getParent().type != \"phase\") return 1;\n\t\t\t\t\tvar player = _status.event.player;\n\t\t\t\t\treturn player.getUseValue({\n\t\t\t\t\t\tname: button.link[2],\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tbackup: function (links, player) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tfilterCard(card) {\n\t\t\t\t\t\t\tconst player = get.player();\n\t\t\t\t\t\t\tconst maps = lib.skill.sanzhongmrfz.maps;\n\t\t\t\t\t\t\tconst swapped = {};\n\t\t\t\t\t\t\tObject.keys(maps).forEach(key => {\n\t\t\t\t\t\t\t\tswapped[maps[key]] = key;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tconst name = lib.skill.sanzhongmrfz_backup.card;\n\t\t\t\t\t\t\treturn get.type2(card) == swapped[name];\n\t\t\t\t\t\t},\n\t\t\t\t\t\taudio: \"sanzhongmrfz\",\n\t\t\t\t\t\tpopname: true,\n\t\t\t\t\t\tcheck: function (card) {\n\t\t\t\t\t\t\treturn 8 - get.value(card);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tposition: \"hse\",\n\t\t\t\t\t\tviewAs: { name: links[0][2] },\n\t\t\t\t\t\tcard: links[0][2],\n\t\t\t\t\t\tprecontent: function () {\n\t\t\t\t\t\t\tconst maps = lib.skill.sanzhongmrfz.maps;\n\t\t\t\t\t\t\tconst swapped = {};\n\t\t\t\t\t\t\tObject.keys(maps).forEach(key => {\n\t\t\t\t\t\t\t\tswapped[maps[key]] = key;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tconst name = lib.skill.sanzhongmrfz_backup.card;\n\n\t\t\t\t\t\t\tlet type = swapped[name];\n\t\t\t\t\t\t\tplayer.storage.sanzhongmrfz[type] = true;\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tprompt: function (links, player) {\n\t\t\t\t\tconst swapped = {};\n\t\t\t\t\tconst maps = lib.skill.sanzhongmrfz.maps;\n\t\t\t\t\tconst name = links[0][2];\n\t\t\t\t\tObject.keys(maps).forEach(key => {\n\t\t\t\t\t\tswapped[maps[key]] = key;\n\t\t\t\t\t});\n\t\t\t\t\treturn `将一张${get.translation(swapped[name])}牌当做${get.translation(name)}使用`;\n\t\t\t\t},\n\t\t\t},\n\t\t\tgroup: \"sanzhongmrfz_clear\",\n\t\t\tsubSkill: {\n\t\t\t\tclear: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tdirect: true,\n\t\t\t\t\ttrigger: { global: \"phaseBegin\" },\n\t\t\t\t\tcontent() {\n\t\t\t\t\t\tlib.skill.sanzhongmrfz.init(player, \"sanzhongmrfz\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 1,\n\t\t\t\tresult: {\n\t\t\t\t\tplayer: function (player) {\n\t\t\t\t\t\tif (_status.event.dying) return get.attitude(player, _status.event.dying);\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t// 莎草\n\t\tlanjuanmrfz: {\n\t\t\tintro: {\n\t\t\t\tcontent(event, player) {\n\t\t\t\t\tlet storage = player.storage.lanjuanmrfz;\n\n\t\t\t\t\tlet nameList = storage[\"name\"].length > 0 ? storage[\"name\"] : \"无\";\n\t\t\t\t\tlet numberList = storage[\"number\"].length > 0 ? storage[\"number\"] : \"无\";\n\t\t\t\t\tlet suitTranslation = storage[\"suit\"].length > 0 ? get.translation(storage[\"suit\"]) : \"无\";\n\n\t\t\t\t\tif (Array.isArray(nameList)) {\n\t\t\t\t\t\tnameList.sort((a, b) => a.length - b.length);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Array.isArray(numberList)) {\n\t\t\t\t\t\tnumberList.sort((a, b) => a - b);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn `\n    \t\t\t\t\t    ·牌名: ${get.translation(nameList)}<br>\n    \t\t\t\t\t    ·点数: ${get.translation(numberList)}<br>\n    \t\t\t\t\t    ·花色: ${suitTranslation}\n    \t\t\t\t\t`;\n\t\t\t\t},\n\t\t\t},\n\t\t\tmark: true,\n\t\t\tinit(player, skill) {\n\t\t\t\tplayer.storage[skill] = {\n\t\t\t\t\tname: [],\n\t\t\t\t\tsuit: [],\n\t\t\t\t\tnumber: [],\n\t\t\t\t};\n\t\t\t},\n\t\t\tonremove: true,\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tplayer: [\"useCardAfter\", \"respondAfter\", \"phaseDrawBegin2\"],\n\t\t\t},\n\t\t\tfilterType(card, player, modify) {\n\t\t\t\tlet storage = player.storage.lanjuanmrfz;\n\t\t\t\tlet result = {\n\t\t\t\t\tname: [],\n\t\t\t\t\tsuit: [],\n\t\t\t\t\tnumber: [],\n\t\t\t\t};\n\n\t\t\t\tconst maps = {\n\t\t\t\t\tname: lib.inpile,\n\t\t\t\t\tsuit: lib.suit,\n\t\t\t\t\tnumber: Array.from({ length: 13 }, (v, i) => i + 1),\n\t\t\t\t};\n\n\t\t\t\tfunction checkAndAdd(type) {\n\t\t\t\t\tconst value = get[type](card);\n\t\t\t\t\tif (!storage[type].includes(value)) {\n\t\t\t\t\t\tresult[type].push(value);\n\t\t\t\t\t\tresult[type] = result[type].filter(item => new Set(maps[type]).has(item));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcheckAndAdd(\"name\");\n\t\t\t\tcheckAndAdd(\"suit\");\n\t\t\t\tcheckAndAdd(\"number\");\n\n\t\t\t\tif (modify) {\n\t\t\t\t\tplayer.storage.lanjuanmrfz = {\n\t\t\t\t\t\tname: [...result.name, ...storage.name],\n\t\t\t\t\t\tsuit: [...result.suit, ...storage.suit],\n\t\t\t\t\t\tnumber: [...result.number, ...storage.number],\n\t\t\t\t\t};\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tconst intersection = (arr1, arr2) => arr1.filter(item => new Set(arr2).has(item));\n\n\t\t\t\treturn result.name.length > 0 || result.suit.length > 0 || result.number.length > 0;\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\tif (event.name == \"phaseDraw\") {\n\t\t\t\t\tlet count = Object.values(player.storage.lanjuanmrfz).reduce((sum, arr) => sum + arr.length, 0);\n\t\t\t\t\treturn !event.numFixed && Math.pow(count, 1 / 3) >= 1;\n\t\t\t\t} else return event.card && lib.skill.lanjuanmrfz.filterType(event.card, player, false);\n\t\t\t},\n\t\t\tdirect: true,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\t// 毒哑莎草的嗓子(\n\t\t\t\tif (_status.poison_suocaoSJZX != true) {\n\t\t\t\t\tplayer.logSkill(\"lanjuanmrfz\");\n\t\t\t\t\t_status.poison_suocaoSJZX = true;\n\t\t\t\t\tsetTimeout(() => delete _status.poison_suocaoSJZX, 3000);\n\t\t\t\t}\n\t\t\t\tif (trigger.name == \"phaseDraw\") {\n\t\t\t\t\tlet count = Object.values(player.storage.lanjuanmrfz).reduce((sum, arr) => sum + arr.length, 0);\n\t\t\t\t\ttrigger.num += Math.floor(Math.pow(count, 1 / 3));\n\t\t\t\t} else lib.skill.lanjuanmrfz.filterType(trigger.card, player, true);\n\t\t\t},\n\t\t\tmod: {\n\t\t\t\tmaxHandcard: function (player, num) {\n\t\t\t\t\tlet count = Object.values(player.storage.lanjuanmrfz).reduce((sum, arr) => sum + arr.length, 0);\n\t\t\t\t\treturn num + Math.floor(Math.pow(count, 1 / 3));\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\txinglumrfz: {\n\t\t\taudio: 2,\n\t\t\tenable: \"phaseUse\",\n\t\t\tusable: 1,\n\t\t\tfindCards(info) {\n\t\t\t\tconst { name, suit, number } = info;\n\t\t\t\tconst filter = function (card) {\n\t\t\t\t\treturn get.number(card) == number && get.suit(card) == suit && get.name(card) == name;\n\t\t\t\t};\n\t\t\t\tlet list = [];\n\t\t\t\tfor (let i = 0; i < ui.cardPile.childNodes.length; i++) {\n\t\t\t\t\tvar j = i;\n\t\t\t\t\tif (j >= ui.cardPile.childNodes.length) j -= ui.cardPile.childNodes.length;\n\t\t\t\t\tif (filter(ui.cardPile.childNodes[j])) {\n\t\t\t\t\t\tlist.push(ui.cardPile.childNodes[j]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn list;\n\t\t\t},\n\t\t\tgetResult(info) {\n\t\t\t\tconst { name, suit, number } = info;\n\t\t\t\tlet cardsList = [];\n\t\t\t\tfor (let keyName of name) {\n\t\t\t\t\tfor (let keySuit of suit) {\n\t\t\t\t\t\tfor (let keyNum of number) {\n\t\t\t\t\t\t\tlet find = lib.skill.xinglumrfz.findCards({ name: keyName, suit: keySuit, number: keyNum });\n\t\t\t\t\t\t\tif (find.length > 0) cardsList.push(find);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn cardsList;\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\tlet storage = player.storage.lanjuanmrfz;\n\t\t\t\treturn storage[\"name\"].length > 0 && storage[\"suit\"].length > 0 && storage[\"number\"].length > 0;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tconst storage = player.storage.lanjuanmrfz;\n\n\t\t\t\tconst {control} = await player\n\t\t\t\t\t.chooseControl(\"自动选择\", \"手动选择\")\n\t\t\t\t\t.set(\"prompt\", \"【行路】:是否让系统自动为你提供方案？\")\n\t\t\t\t\t.set(\"ai\", () => \"自动选择\")\n\t\t\t\t\t.forResult();\n\t\t\t\tif (control === \"自动选择\") {\n\t\t\t\t\tlet cards = lib.skill.xinglumrfz.getResult(storage);\n\t\t\t\t\tconst maxIndex = cards.map(i => player.getUseValue(i)).indexOf(Math.max(...cards.map(i => player.getUseValue(i))));\n\t\t\t\t\tif (cards.length < 1) {\n\t\t\t\t\t\tplayer.popup(\"没有符合条件的组合\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tlet control = [];\n\t\t\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\t\t\tcontrol.push([i, `第${get.cnNumber(i + 1, true)}组`]);\n\t\t\t\t\t}\n\t\t\t\t\tlet dialogAuto = [`【行路】:请选择一个组合<br>推荐选择第${get.cnNumber(maxIndex + 1, true)}组(${get.translation(cards[maxIndex])})`, [control, \"tdnodes\"]];\n\n\t\t\t\t\tfor (let i = 0; i < cards.length; i++) {\n\t\t\t\t\t\tdialogAuto.addArray([`第${get.cnNumber(i + 1, true)}组`, cards[i]]);\n\t\t\t\t\t}\n\t\t\t\t\tconst result = !event.isMine() ? { links: [maxIndex] } : await player.chooseButton().set(\"createDialog\", dialogAuto).set(\"cards\", cards).forResult();\n\t\t\t\t\tif (!result) return;\n\t\t\t\t\tplayer.gain(cards[result.links[0]], \"gain2\", \"log\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet dialog = [\"【行路】:请选择牌名、花色和数字各一个\"];\n\t\t\t\tdialog.addArray([\"待选择的牌名\", [storage.name.slice().map(i => [get.type2(i), \"\", i]), \"vcard\"]]);\n\t\t\t\tdialog.addArray([\"待选择的花色\", [storage.suit.slice().map(i => [i, get.translation(i)]), \"tdnodes\"]]);\n\t\t\t\tdialog.addArray([\n\t\t\t\t\t\"待选择的数字\",\n\t\t\t\t\t[\n\t\t\t\t\t\tstorage.number\n\t\t\t\t\t\t\t.slice()\n\t\t\t\t\t\t\t.sort((a, b) => a - b)\n\t\t\t\t\t\t\t.map(i => [i, i]),\n\t\t\t\t\t\t\"tdnodes\",\n\t\t\t\t\t],\n\t\t\t\t]);\n\n\t\t\t\tconst {links} = await player\n\t\t\t\t\t.chooseButton()\n\t\t\t\t\t.set(\"createDialog\", dialog)\n\t\t\t\t\t.set(\"filterButton\", button => {\n\t\t\t\t\t\tlet list = ui.selected.buttons;\n\t\t\t\t\t\tif (Array.isArray(button.link) && list.some(item => Array.isArray(item.link))) return false;\n\t\t\t\t\t\telse if (typeof button.link === \"number\" && list.some(item => typeof item.link === \"number\")) return false;\n\t\t\t\t\t\telse if (typeof button.link === \"string\" && list.some(item => typeof item.link === \"string\")) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"selectButton\", 3)\n\t\t\t\t\t.forResult();\n\t\t\t\tif (!links) return;\n\t\t\t\tconst info = {\n\t\t\t\t\tname: links.filter(i => Array.isArray(i)).map(i => i[2]),\n\t\t\t\t\tsuit: links.filter(i => typeof i === \"string\"),\n\t\t\t\t\tnumber: links.filter(i => typeof i === \"number\"),\n\t\t\t\t};\n\t\t\t\tlet cards = lib.skill.xinglumrfz.findCards(info);\n\t\t\t\tif (cards.length > 0) player.gain(cards, \"gain2\", \"log\");\n\t\t\t\telse {\n\t\t\t\t\tplayer.popup(\"没有符合条件的组合\");\n\t\t\t\t}\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 1,\n\t\t\t\tresult: {\n\t\t\t\t\tplayer: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t// 莱欧斯\n\t\tshijianmrfz: {\n\t\t\taudio: 2,\n\t\t\tderivation: [\"jianzhumrfz\"],\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\n\t\t\tfilter(event, player) {\n\t\t\t\treturn player.countCards(\"he\") > 0 && !player.isDisabled(1) && !player.hasCard(card => card.name == \"jianzhumrfz\", \"e\");\n\t\t\t},\n\t\t\tasync cost(event, trigger, player) {\n\t\t\t\tevent.result = await player\n\t\t\t\t\t.chooseToDiscard(`【拾剑】:你可以弃置一张牌，将【剑助】置入你的武器栏`, \"he\")\n\t\t\t\t\t.set(\"ai\", card => {\n\t\t\t\t\t\treturn 6 - get.value(card);\n\t\t\t\t\t})\n\t\t\t\t\t.forResult();\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tconst card = game.createCard(\"jianzhumrfz\", \"spade\", 12);\n\t\t\t\tplayer.$gain2(card);\n\t\t\t\tplayer.equip(card);\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tthreaten: 0.8,\n\t\t\t},\n\t\t},\n\t\tshimomrfz: {\n\t\t\taudio: 2,\n\t\t\tinit(player, skill) {\n\t\t\t\tplayer.storage[skill] = {};\n\t\t\t\tconst translates = {\n\t\t\t\t\t2: '富甲<font color=\"red\">目标+</font>',\n\t\t\t\t\t3: '空巢<font color=\"red\">摸牌</font>',\n\t\t\t\t\t4: '残躯<font color=\"red\">伤害+</font>',\n\t\t\t\t};\n\t\t\t\tfor (let i = 2; i <= 4; i++) {\n\t\t\t\t\tlib.translate[skill + \"_\" + i] = translates[i];\n\t\t\t\t}\n\t\t\t},\n\t\t\tonremove: true,\n\t\t\tmark: true,\n\t\t\tproficiency: new Proxy(\n\t\t\t\t{\n\t\t\t\t\tbaka: '<font color = \"#FFFFFF\">一无所知</font>',\n\t\t\t\t\tmaster: '<font color = \"#FF0000\">融会贯通</font>',\n\t\t\t\t\t1: '<font color=\"#FFCCCC\">已有耳闻</font>',\n\t\t\t\t\t2: '<font color=\"#FF9999\">略知一二</font>',\n\t\t\t\t\t3: '<font color=\"#FF6666\">初步掌握</font>',\n\t\t\t\t\t4: '<font color=\"#FF3333\">烂熟于心</font>',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tget(target, prop) {\n\t\t\t\t\t\tif (typeof prop !== \"symbol\") {\n\t\t\t\t\t\t\tconst value = Number(prop);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn target[\"baka\"];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!isNaN(value)) {\n\t\t\t\t\t\t\tif (value < 1) return target[\"baka\"];\n\t\t\t\t\t\t\tif (value > 4) return target[\"master\"];\n\t\t\t\t\t\t\treturn target[value];\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn target[\"baka\"];\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t),\n\t\t\tintro: {\n\t\t\t\tname: \"莱欧斯的魔物宝典\",\n\t\t\t\tcontent: function (event, player) {\n\t\t\t\t\tconst storage = player.storage.shimomrfz;\n\t\t\t\t\tlet intro = [];\n\t\t\t\t\tif (storage === undefined) return \"没有记录的魔物\";\n\t\t\t\t\tconst sorted = Object.entries(storage)\n\t\t\t\t\t\t.sort((a, b) => b[1] - a[1])\n\t\t\t\t\t\t.map(([key, value]) => ({ key, value }));\n\t\t\t\t\tfor (let obj of sorted) {\n\t\t\t\t\t\tintro.push(`【${get.translation(obj[\"key\"])}】是${lib.skill.shimomrfz.proficiency[obj[\"value\"]]}（${obj[\"value\"]}）`);\n\t\t\t\t\t}\n\t\t\t\t\treturn `莱欧斯对‘魔物’:<br>` + intro.join(\"<br>\");\n\t\t\t\t},\n\t\t\t},\n\t\t\ttrigger: { player: \"gainAfter\" },\n\t\t\tdirect: true,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\t// 毒哑莱欧斯的嗓子\n\t\t\t\tif (_status.poison_laiousiSJZX != true) {\n\t\t\t\t\tplayer.logSkill(\"shimomrfz\");\n\t\t\t\t\t_status.poison_laiousiSJZX = true;\n\t\t\t\t\tsetTimeout(() => delete _status.poison_laiousiSJZX, 3000);\n\t\t\t\t}\n\t\t\t\tconst cards = trigger.cards,\n\t\t\t\t\tstorage = player.storage.shimomrfz;\n\t\t\t\tfor (let card of cards) {\n\t\t\t\t\tlet name = get.name(card);\n\t\t\t\t\tstorage.hasOwnProperty(name) ? player.storage.shimomrfz[name]++ : (player.storage.shimomrfz[name] = 1);\n\t\t\t\t\tif (storage.hasOwnProperty(name)) {\n\t\t\t\t\t\tlet num = storage[name];\n\t\t\t\t\t\tif (num < 2) continue;\n\t\t\t\t\t\tif (num > 4) num = 4;\n\t\t\t\t\t\tfor (let i = 2; i <= num; i++) player.addGaintag(card, `shimomrfz_${i}`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tgroup: \"shimomrfz_yingbian\",\n\t\t\tsubSkill: {\n\t\t\t\tyingbian: {\n\t\t\t\t\taudio: \"shimomrfz\",\n\t\t\t\t\tsilent: true,\n\t\t\t\t\ttrigger: { player: \"yingbian\" },\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\tevent.card.isCard &&\n\t\t\t\t\t\t\tplayer.hasHistory(\"lose\", evt => {\n\t\t\t\t\t\t\t\treturn evt.getParent() == event && Object.values(evt.gaintag_map).some(value => value.join(\" \").includes(\"shimomrfz_\"));\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tlet tags;\n\t\t\t\t\t\tplayer.getHistory(\"lose\", evt => {\n\t\t\t\t\t\t\tif (evt.getParent() != trigger) return;\n\t\t\t\t\t\t\tconst maps = evt.gaintag_map;\n\t\t\t\t\t\t\tfor (let key in maps) {\n\t\t\t\t\t\t\t\tif (maps[key].join(\" \").includes(\"shimomrfz_\")) tags = maps[key];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst index = Math.max(...tags.filter(i => /^shimomrfz_\\d+$/.test(i)).map(i => Number(i.replace(/\\D+/g, \"\"))));\n\t\t\t\t\t\tif (!Array.isArray(trigger.temporaryYingbian)) trigger.temporaryYingbian = [];\n\t\t\t\t\t\ttrigger.temporaryYingbian.add(\"force\");\n\t\t\t\t\t\tif (index >= 2 && player.satisfyYingbian(\"fujia\", trigger)) {\n\t\t\t\t\t\t\ttrigger.temporaryYingbian.add(\"add\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (index >= 3 && player.satisfyYingbian(\"kongchao\", trigger)) {\n\t\t\t\t\t\t\ttrigger.temporaryYingbian.add(\"draw\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (index >= 4 && player.satisfyYingbian(\"canqu\", trigger)) {\n\t\t\t\t\t\t\ttrigger.temporaryYingbian.add(\"damage\");\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t// 森西\n\t\tmicaimrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tglobal: [\"loseAfter\", \"loseAsyncAfter\"],\n\t\t\t},\n\t\t\tusable: 1,\n\t\t\tfilter(event, player) {\n\t\t\t\tif (event.type != \"discard\" || event.position != ui.discardPile || event.player == player) return false;\n\t\t\t\tlet cards = event.getd();\n\t\t\t\tif (!cards.filter(card => get.position(card, true) == \"d\").length) return false;\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tasync cost(event, trigger, player) {\n\t\t\t\tlet cards = trigger.getd().filter(i => get.position(i, true) == \"d\");\n\t\t\t\tevent.result = await player\n\t\t\t\t\t.chooseCardButton(\"【觅材】:你可以获得一张牌\", cards)\n\t\t\t\t\t.set(\"ai\", button => get.value(button))\n\t\t\t\t\t.forResult();\n\t\t\t\tevent.result.cost_data = event.result;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tplayer.gain(event.cost_data.links, \"gain2\");\n\t\t\t},\n\t\t},\n\t\tbeicaimrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\n\t\t\tinit(player, skill) {\n\t\t\t\tplayer.storage[skill] = {};\n\t\t\t},\n\t\t\tonremove: true,\n\t\t\tfilter(event, player) {\n\t\t\t\treturn player.countCards(\"h\", card => get.cardNameLength(card) > 1) > 0;\n\t\t\t},\n\t\t\tlessNameLength(card) {\n\t\t\t\tconst list = [];\n\t\t\t\tconst original = get.cardNameLength(card);\n\t\t\t\tfor (let name of lib.inpile) {\n\t\t\t\t\tif (get.cardNameLength(name) >= original) continue;\n\t\t\t\t\tlist.push([get.translation(get.type(name)), \"\", name]);\n\t\t\t\t\tif (name == \"sha\") {\n\t\t\t\t\t\tfor (var j of lib.inpile_nature) list.push([\"基本\", \"\", \"sha\", j]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn list;\n\t\t\t},\n\t\t\tasync cost(event, trigger, player) {\n\t\t\t\tevent.result = await player\n\t\t\t\t\t.chooseCard(\"h\")\n\t\t\t\t\t.set(\"prompt2\", \"你可以将一张手牌视为任意小于此牌字数的一张牌。\")\n\t\t\t\t\t.set(\"prompt\", \"是否发动【备材】？\")\n\t\t\t\t\t.set(\"filterCard\", card => get.cardNameLength(card) > 1)\n\t\t\t\t\t.set(\"ai\", card => {\n\t\t\t\t\t\tconst player = get.player();\n\t\t\t\t\t\tif (get.cardNameLength(card) < 2) return -1;\n\t\t\t\t\t\tconst less = lib.skill.beicaimrfz.lessNameLength(card).map(i => i[2]);\n\t\t\t\t\t\tif (!Array.isArray(less.filter(i => player.getUseValue(i) > player.getUseValue(card)))) return -1;\n\t\t\t\t\t\tlet OptimalSolution = less.filter(i => player.getUseValue(i) > player.getUseValue(card)) || null;\n\t\t\t\t\t\tif (OptimalSolution === null || OptimalSolution.length < 1) return -1;\n\t\t\t\t\t\tOptimalSolution = OptimalSolution.reduce((a, b) => (player.getUseValue(a) >= player.getUseValue(b) ? a : b)) || null;\n\t\t\t\t\t\treturn OptimalSolution ? player.getUseValue(OptimalSolution) - player.getUseValue(card) : -1;\n\t\t\t\t\t})\n\t\t\t\t\t.forResult();\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tconst list = lib.skill.beicaimrfz.lessNameLength(event.cards[0]);\n\t\t\t\tconst {links} = await player\n\t\t\t\t\t.chooseButton([`备材<br>把${get.translation(event.cards)}视为：`, [list, \"vcard\"]], true)\n\t\t\t\t\t.set(\"ai\", button => {\n\t\t\t\t\t\tconst player = get.player(),\n\t\t\t\t\t\t\tcard = {\n\t\t\t\t\t\t\t\tname: button.link[2],\n\t\t\t\t\t\t\t\tnature: button.link[3],\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\treturn player.getUseValue(card, null, true);\n\t\t\t\t\t})\n\t\t\t\t\t.forResult();\n\t\t\t\tif (!links) return;\n\t\t\t\tplayer.addGaintag(event.cards, \"beicaimrfzx\");\n\t\t\t\tif (!player.storage.beicaimrfz) player.storage.beicaimrfz = {};\n\t\t\t\tplayer.storage.beicaimrfz[event.cards[0].cardid] = { name: links[0][2], nature: links[0][3] };\n\t\t\t},\n\t\t\tmod: {\n\t\t\t\tcardname(card, player, name) {\n\t\t\t\t\tconst storage = player.storage.beicaimrfz;\n\t\t\t\t\tif (card.hasGaintag(\"beicaimrfzx\") && Object.keys(storage).includes(card.cardid) && storage[card.cardid][\"name\"]) return storage[card.cardid][\"name\"];\n\t\t\t\t},\n\t\t\t\tcardnature(card, player) {\n\t\t\t\t\tconst storage = player.storage.beicaimrfz;\n\t\t\t\t\tif (card.hasGaintag(\"beicaimrfzx\") && Object.keys(storage).includes(card.cardid) && storage[card.cardid][\"nature\"]) return storage[card.cardid][\"nature\"];\n\t\t\t\t},\n\t\t\t},\n\t\t\tgroup: \"beicaimrfz_clear\",\n\t\t\tsubSkill: {\n\t\t\t\tclear: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\ttrigger: { player: \"loseAfter\" },\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\treturn Object.keys(player.storage.beicaimrfz).length > 0;\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tconst hs = player.getCards(\"he\").map(card => card.cardid);\n\t\t\t\t\t\tfor (let id in player.storage.beicaimrfz) {\n\t\t\t\t\t\t\tif (!hs.includes(id)) delete player.storage.beicaimrfz[id];\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tpengcaimrfz: {\n\t\t\taudio: 2,\n\t\t\tenable: \"phaseUse\",\n\t\t\tusable: 1,\n\t\t\tfilterCard(card) {\n\t\t\t\tconst player = get.player();\n\t\t\t\treturn !ui.selected.cards.some(cardx => get.type2(cardx, player) == get.type2(card, player));\n\t\t\t},\n\t\t\tselectCard: 2,\n\t\t\tfilterTarget(card, player, target) {\n\t\t\t\treturn player.canUse(\"wugu\", target);\n\t\t\t},\n\t\t\tselectTarget: [1, 4],\n\t\t\tcheck(card) {\n\t\t\t\treturn 8 - get.value(card);\n\t\t\t},\n\t\t\tcomplexCard: true,\n\t\t\tdiscard: false,\n\t\t\tlose: false,\n\t\t\tmultitarget: true,\n\t\t\tmultiline: true,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tplayer.storage.pengcaimrfz = event.targets.slice();\n\t\t\t\tawait player.useCard({ name: \"wugu\", pengcaimrfz: true }, event.targets, event.cards, false, \"pengcaimrfz\");\n\t\t\t\tconst store = player.storage.pengcaimrfz;\n\t\t\t\tif (!Array.isArray(store)) return;\n\t\t\t\tlet type = [];\n\t\t\t\tfor (let i = 0; i < store.length; i++) {\n\t\t\t\t\tlet target = store[i][0],\n\t\t\t\t\t\tcards = store[i][1];\n\t\t\t\t\tif (!event.targets.includes(target) || !cards) continue;\n\t\t\t\t\ttype.push(...cards.map(i => get.type2(i)));\n\t\t\t\t}\n\t\t\t\tlet SetType = new Set(type.slice());\n\t\t\t\tif (SetType.size !== type.length) return;\n\t\t\t\tawait player.useCard({ name: \"wugu\", pengcaimrfz: true }, event.targets, event.cards, false, \"pengcaimrfz\");\n\t\t\t\tdelete player.storage.pengcaimrfz;\n\t\t\t},\n\t\t\tgroup: [\"pengcaimrfz_wugu\"],\n\t\t\tglobal: \"pengcaimrfz_eff\",\n\t\t\tsubSkill: {\n\t\t\t\teff: {\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: { player: \"yingbian\" },\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\treturn event.card.isCard && event.player.hasHistory(\"lose\", evt => evt.getParent() == event && Object.values(evt.gaintag_map).some(value => value.includes(\"pengcaimrfzx\")));\n\t\t\t\t\t},\n\t\t\t\t\tcontent: () => {\n\t\t\t\t\t\tif (!Array.isArray(trigger.temporaryYingbian)) trigger.temporaryYingbian = [];\n\t\t\t\t\t\ttrigger.temporaryYingbian.add(\"force\");\n\t\t\t\t\t\ttrigger.temporaryYingbian.addArray(get.yingbianEffects());\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\twugu: {\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tlastDo: true,\n\t\t\t\t\ttrigger: { global: \"gainAfter\" },\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\tconst evt = event.getParent();\n\t\t\t\t\t\treturn evt && evt.card && evt.card.pengcaimrfz && player.storage.pengcaimrfz && player.storage.pengcaimrfz.some(i => (Array.isArray(i) ? i[0] == event.player : i == event.player));\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tconst cards = trigger.cards.filter(i => get.itemtype(i) == \"card\");\n\t\t\t\t\t\tplayer.storage.pengcaimrfz[player.storage.pengcaimrfz.indexOf(trigger.player)] = [trigger.player, cards];\n\t\t\t\t\t\ttrigger.player.addGaintag(cards, \"pengcaimrfzx\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 13,\n\t\t\t\tthreaten: 1.8,\n\t\t\t\tresult: {\n\t\t\t\t\ttarget: 1,\n\t\t\t\t\tplayer: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t// 奇尔查克\n\t\ttangongmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { player: [\"drawBegin\", \"damageBegin3\"] },\n\t\t\tinit(player, skill) {\n\t\t\t\tplayer.storage[skill] = [];\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\treturn event.num > 0 && !player.storage.tangongmrfz.includes(event.name);\n\t\t\t},\n\t\t\tcreateDialog(id, showCards) {\n\t\t\t\tvar dialog = ui.create.dialog(\"hidden\");\n\t\t\t\t(dialog.textPrompt = dialog.add(\"探宫\")).style.textAlign = \"center\";\n\t\t\t\tdialog.cards = [];\n\t\t\t\tdialog.rawButtons = [];\n\t\t\t\tdialog.videoId = id;\n\t\t\t\tvar cards = [];\n\t\t\t\tfor (var y = 0; y < 3; y++) {\n\t\t\t\t\tfor (var x = 0; x < 3; x++) {\n\t\t\t\t\t\tvar card = ui.create.card(null, null, true);\n\t\t\t\t\t\tcard.pos = y * 3 + x;\n\t\t\t\t\t\tcard.pos_x = x;\n\t\t\t\t\t\tcard.pos_y = y;\n\t\t\t\t\t\tcards.push(card);\n\t\t\t\t\t\tdialog.rawButtons.push(card);\n\t\t\t\t\t}\n\t\t\t\t\tdialog.add(cards);\n\t\t\t\t\tcards = [];\n\t\t\t\t}\n\t\t\t\tfor (var i of dialog.buttons) {\n\t\t\t\t\ti.pos_x = i.link.pos_x;\n\t\t\t\t\ti.pos_y = i.link.pos_y;\n\t\t\t\t\ti.link = i.link.pos;\n\t\t\t\t}\n\n\t\t\t\t// 放弃选择\n\t\t\t\t// dialog.addAuto([['放弃选择'],\"tdnodes\"]);\n\n\t\t\t\t// 展示待选择的牌\n\t\t\t\tshowCards = showCards ? showCards : game.cardsGotoOrdering(get.cards(9)).cards;\n\n\t\t\t\tshowCards.map(i => (i.tangongmrfz = true));\n\n\t\t\t\tdialog.addAuto(\"待选择的牌\");\n\n\t\t\t\tdialog.showCards = showCards;\n\n\t\t\t\tdialog.add(showCards);\n\n\t\t\t\tdialog.open();\n\t\t\t},\n\t\t\taddCard(card, id, pos) {\n\t\t\t\tvar dialog = get.idDialog(id);\n\t\t\t\tif (!dialog) return;\n\t\t\t\tfor (var i = 0; i < dialog.buttons.length; i++) {\n\t\t\t\t\tvar button = dialog.buttons[i];\n\n\t\t\t\t\tif (button.link == pos) {\n\t\t\t\t\t\tvar card2 = ui.create.button(card, \"card\");\n\t\t\t\t\t\tcard2.pos = button.link;\n\t\t\t\t\t\tcard2.pos_x = button.pos_x;\n\t\t\t\t\t\tcard2.pos_y = button.pos_y;\n\t\t\t\t\t\tcard2.classList.add(\"noclick\");\n\t\t\t\t\t\tbutton.parentNode.insertBefore(card2, button);\n\t\t\t\t\t\tdialog.cards.push(card2);\n\t\t\t\t\t\tbutton.remove();\n\t\t\t\t\t\tdialog.buttons.splice(i, 1);\n\t\t\t\t\t} else if (get.itemtype(button.link) == \"card\") {\n\t\t\t\t\t\tif (button.link == card) {\n\t\t\t\t\t\t\tbutton.remove();\n\t\t\t\t\t\t\tdialog.showCards.remove(card);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tchangePrompt(str, id) {\n\t\t\t\tvar dialog = get.idDialog(id);\n\t\t\t\tif (!dialog) return;\n\t\t\t\tdialog.textPrompt.innerHTML = str;\n\t\t\t},\n\t\t\tgetValidMatrix(suits) {\n\t\t\t\tfunction isValid(matrix, row, col, value) {\n\t\t\t\t\tfor (let i = 0; i < col; i++) {\n\t\t\t\t\t\tif (matrix[row][i] === value) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor (let i = 0; i < row; i++) {\n\t\t\t\t\t\tif (matrix[i][col] === value) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\t// 回溯函数：尝试构建3x3矩阵\n\t\t\t\tfunction backtrack(matrix, suits, row, col) {\n\t\t\t\t\tif (row === 3) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet nextRow = col === 2 ? row + 1 : row;\n\t\t\t\t\tlet nextCol = (col + 1) % 3;\n\n\t\t\t\t\tfor (let i = 0; i < suits.length; i++) {\n\t\t\t\t\t\tlet suit = suits[i];\n\n\t\t\t\t\t\tif (isValid(matrix, row, col, suit)) {\n\t\t\t\t\t\t\tmatrix[row][col] = suit;\n\n\t\t\t\t\t\t\tlet remainingSuits = suits.slice(0, i).concat(suits.slice(i + 1));\n\n\t\t\t\t\t\t\tif (backtrack(matrix, remainingSuits, nextRow, nextCol)) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 如果无法填充成功，则回溯\n\t\t\t\t\t\t\tmatrix[row][col] = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tlet matrix = Array.from({ length: 3 }, () => Array(3).fill(null));\n\n\t\t\t\t// 尝试构建3x3矩阵\n\t\t\t\tif (backtrack(matrix, suits, 0, 0)) {\n\t\t\t\t\treturn matrix;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\t// 限制每回合发动次数\n\t\t\t\tif (!player.storage.tangongmrfz) player.storage.tangongmrfz = [];\n\t\t\t\tplayer.storage.tangongmrfz.add(trigger.name);\n\n\t\t\t\tlet autoMode = false;\n\t\t\t\tconst {bool} = await player\n\t\t\t\t\t.chooseBool(`是否让系统帮你组方阵？`)\n\t\t\t\t\t.set(\"ai\", () => true)\n\t\t\t\t\t.forResult();\n\t\t\t\tif (bool) autoMode = true;\n\n\t\t\t\tlet next = game.createEvent(\"cardsGotoOrdering\");\n\t\t\t\tnext.cards = [];\n\t\t\t\tnext.setContent(\"cardsGotoOrdering\");\n\t\t\t\tevent.videoId = lib.status.videoId++;\n\t\t\t\tevent.forceDie = true;\n\t\t\t\tevent.cards = [];\n\t\t\t\tevent.positions = [0, 1, 2, 3, 4, 5, 6, 7, 8];\n\t\t\t\tlet showCards = game.cardsGotoOrdering(get.cards(12)).cards;\n\t\t\t\tgame.broadcastAll(\n\t\t\t\t\tfunction (id, showCards) {\n\t\t\t\t\t\tlib.skill.tangongmrfz.createDialog(id, showCards);\n\t\t\t\t\t},\n\t\t\t\t\tevent.videoId,\n\t\t\t\t\tshowCards.slice()\n\t\t\t\t);\n\t\t\t\tlet autoSelected = lib.skill.tangongmrfz.getValidMatrix(showCards.slice().map(i => get.suit(i)));\n\t\t\t\tlet cards = [];\n\n\t\t\t\twhile (showCards.length > 0) {\n\t\t\t\t\tlet str = \"请将一张牌放置到方阵中\";\n\t\t\t\t\tif (player == game.me || player.isUnderControl()) {\n\t\t\t\t\t\tlib.skill.tangongmrfz.changePrompt(str, event.videoId);\n\t\t\t\t\t} else if (player.isOnline()) {\n\t\t\t\t\t\tplayer.send(\n\t\t\t\t\t\t\tfunction (str, id) {\n\t\t\t\t\t\t\t\tlib.skill.tangongmrfz.changePrompt(str, event.videoId);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tstr,\n\t\t\t\t\t\t\tid\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tlet links;\n\t\t\t\t\tif ((player.isUnderControl() || game.me == player) && !autoMode) {\n\t\t\t\t\t\t// if(false){\n\t\t\t\t\t\tconst result1 = await player\n\t\t\t\t\t\t\t.chooseButton()\n\t\t\t\t\t\t\t.set(\"filterOk\", button => {\n\t\t\t\t\t\t\t\tconst selected = ui.selected.buttons.slice().map(i => get.itemtype(i.link) || typeof i.link);\n\t\t\t\t\t\t\t\treturn selected.includes(\"card\") && selected.includes(\"number\");\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.set(\"dialog\", event.videoId)\n\t\t\t\t\t\t\t.set(\"filterButton\", function (button) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.set(\"selectButton\", 2)\n\t\t\t\t\t\t\t.set(\"autoSelected\", autoSelected)\n\t\t\t\t\t\t\t.set(\"showCards\", showCards)\n\t\t\t\t\t\t\t.set(\"cards\", cards.slice())\n\t\t\t\t\t\t\t.forResult();\n\t\t\t\t\t\tlinks = result1.links;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (!autoSelected) {\n\t\t\t\t\t\t\tplayer.popup(\"探索失败\");\n\t\t\t\t\t\t\tgame.broadcastAll(\"closeDialog\", event.videoId);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet posx = cards.slice(0).map(i => i[1]);\n\t\t\t\t\t\tlinks = [];\n\t\t\t\t\t\tlet selectedList = [...autoSelected[0], ...autoSelected[1], ...autoSelected[2]];\n\t\t\t\t\t\tfor (let i = 0; i < 9; i++) {\n\t\t\t\t\t\t\tif (posx.includes(i)) continue;\n\t\t\t\t\t\t\tlet getValidSuit = showCards.filter(j => get.suit(j) == selectedList[i])[0];\n\t\t\t\t\t\t\tlinks.push(getValidSuit, i);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!links) {\n\t\t\t\t\t\tplayer.popup(\"探索失败\");\n\t\t\t\t\t\tgame.broadcastAll(\"closeDialog\", event.videoId);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tlet pos = links.filter(i => typeof i == \"number\")[0],\n\t\t\t\t\t\ttranCard = links.filter(i => get.itemtype(i) == \"card\")[0];\n\t\t\t\t\tgame.broadcastAll(\n\t\t\t\t\t\tfunction (card, id, pos, player) {\n\t\t\t\t\t\t\tlib.skill.tangongmrfz.addCard(card, id, pos);\n\t\t\t\t\t\t\tlib.skill.tangongmrfz.changePrompt(get.translation(player) + \"放置了\" + get.translation(card), id);\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttranCard,\n\t\t\t\t\t\tevent.videoId,\n\t\t\t\t\t\tpos,\n\t\t\t\t\t\tplayer\n\t\t\t\t\t);\n\t\t\t\t\tlet { promise, resolve } = Promise.withResolvers();\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}, 1000);\n\t\t\t\t\tawait promise;\n\t\t\t\t\tcards.push([tranCard, pos]);\n\t\t\t\t\tshowCards.remove(tranCard);\n\t\t\t\t\tif (cards.length > 8) {\n\t\t\t\t\t\tgame.broadcastAll(\"closeDialog\", event.videoId);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst suits = cards.map(i => [get.suit(i[0]), i[1]]);\n\t\t\t\tconst matrix = Array.from({ length: 3 }, () => Array(3));\n\t\t\t\tsuits.forEach(([suit, index]) => (matrix[Math.floor(index / 3)][index % 3] = suit));\n\n\t\t\t\t// 检查是否有重复的花色\n\t\t\t\tconst hasDuplicates = matrix.some((row, i) => new Set(row).size < 3 || new Set(matrix.map(r => r[i])).size < 3);\n\n\t\t\t\tif (!hasDuplicates) {\n\t\t\t\t\tconst isDraw = trigger.name === \"draw\" ? true : false;\n\t\t\t\t\tconst {control} = await player\n\t\t\t\t\t\t.chooseControl(`减半`, `翻倍`)\n\t\t\t\t\t\t.set(\"prompt\", `令${trigger.name === \"draw\" ? \"摸牌数\" : \"伤害值\"}(${trigger.num})翻倍或减半`)\n\t\t\t\t\t\t.set(\"ai\", () => {\n\t\t\t\t\t\t\treturn get.event().isDraw ? \"翻倍\" : \"减半\";\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.set(\"isDraw\", isDraw)\n\t\t\t\t\t\t.forResult();\n\t\t\t\t\ttrigger.num = control === `翻倍` ? trigger.num * 2 : Math.floor(trigger.num / 2);\n\t\t\t\t}\n\t\t\t},\n\t\t\tgroup: \"tangongmrfz_clear\",\n\t\t\tsubSkill: {\n\t\t\t\tclear: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tlastDo: true,\n\t\t\t\t\ttrigger: { global: \"phaseEnd\" },\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\treturn player.storage.tangongmrfz;\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tplayer.storage.tangongmrfz = [];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tthreaten: 1.5,\n\t\t\t},\n\t\t},\n\t\truiganmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tglobal: \"useCard1\",\n\t\t\t},\n\t\t\tforced: true,\n\t\t\tfilter(event, player) {\n\t\t\t\treturn get.cardNameLength(event.card) == player.countCards(\"h\") && event.targets.includes(player) && event.player != player;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {},\n\t\t\tmod: {\n\t\t\t\ttargetEnabled(card, player, target) {\n\t\t\t\t\tif (get.cardNameLength(card) == target.countCards(\"h\") && player != target) return false;\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t// 凯瑟琳\n\t\tksl_zhuzhimrfz: {\n\t\t\tonremove(player) {\n\t\t\t\tfor (let t of game.players) {\n\t\t\t\t\tt.removeSkill(\"duantiemrfz\");\n\t\t\t\t}\n\t\t\t},\n\t\t\tderivation: [\"ksl_lulitongxinmrfz\"],\n\t\t\taudio: 2,\n\t\t\ttrigger: { global: \"linkAfter\" },\n\t\t\tsilent: true,\n\t\t\tforced: true,\n\t\t\tfilter(event, player) {\n\t\t\t\treturn event.player != player;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet target = trigger.player;\n\t\t\t\tif (!target.isLinked() && target.hasSkill(\"duantiemrfz\")) target.removeSkill(\"duantiemrfz\");\n\t\t\t\telse if (target.isLinked() && !target.hasSkill(\"duantiemrfz\")) target.addSkill(\"duantiemrfz\");\n\t\t\t},\n\t\t\tgroup: [\"ksl_zhuzhimrfz_add\", \"ksl_zhuzhimrfz_gain\"],\n\t\t\tsubSkill: {\n\t\t\t\tgain: {\n\t\t\t\t\taudio: \"ksl_zhuzhimrfz\",\n\t\t\t\t\tforced: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"phaseZhunbeiBegin\",\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tvar card = get.cardPile(function (card) {\n\t\t\t\t\t\t\treturn get.name(card) == \"ksl_lulitongxinmrfz\";\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (card) player.gain(card, \"gain2\", \"log\");\n\t\t\t\t\t\telse player.draw();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tadd: {\n\t\t\t\t\taudio: \"ksl_zhuzhimrfz\",\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tglobal: \"phaseBefore\",\n\t\t\t\t\t\tplayer: \"enterGame\",\n\t\t\t\t\t},\n\t\t\t\t\tforced: true,\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\treturn (event.name != \"phase\" || game.phaseNumber == 0) && !lib.inpile.includes(\"ksl_lulitongxinmrfz\");\n\t\t\t\t\t},\n\t\t\t\t\tcontent() {\n\t\t\t\t\t\tvar cards = [];\n\t\t\t\t\t\tfor (var i = 0; i < 4; i++) {\n\t\t\t\t\t\t\tcards.push(game.createCard2(\"ksl_lulitongxinmrfz\", lib.suit.randomGet(), [2, 4, 3, 10, 13].randomGet()));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.broadcastAll(function () {\n\t\t\t\t\t\t\tlib.inpile.add(\"ksl_lulitongxinmrfz\");\n\t\t\t\t\t\t});\n\t\t\t\t\t\tgame.cardsGotoPile(cards, () => {\n\t\t\t\t\t\t\treturn ui.cardPile.childNodes[get.rand(0, ui.cardPile.childNodes.length - 1)];\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tduantiemrfz: {\n\t\t\taudio: 2,\n\t\t\tenable: \"phaseUse\",\n\t\t\tusable: 1,\n\t\t\tposition: \"he\",\n\t\t\tfilter(event, player) {\n\t\t\t\tlet list = [];\n\t\t\t\tfor (let card of player.getCards(\"he\")) {\n\t\t\t\t\tlist.add(get.type2(card));\n\t\t\t\t}\n\t\t\t\treturn list.length >= 2;\n\t\t\t},\n\t\t\tfilterCard(card, player) {\n\t\t\t\treturn !ui.selected.cards.some(cardx => get.type2(cardx) == get.type2(card));\n\t\t\t},\n\t\t\tcomplexCard: true,\n\t\t\tselectCard: 2,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tplayer.storage.duantiemrfz_buff = player.name;\n\t\t\t\tlet audio = new Audio(\"extension/WhichWay/audio/up.mp3\");\n\t\t\t\taudio.play();\n\t\t\t\tawait player.reinitCharacter(player.name, \"paxinghaomrfz\", false);\n\t\t\t\tplayer.addSkill(\"duantiemrfz_buff\");\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\tbuff: {\n\t\t\t\t\tonremove: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tmark: true,\n\t\t\t\t\tintro: {\n\t\t\t\t\t\tcontent(event, player) {\n\t\t\t\t\t\t\treturn `当前机甲驾驶员:${get.translation(player.storage.duantiemrfz_buff)}`;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\ttrigger: { player: \"dying\" },\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tlet audio = new Audio(\"extension/WhichWay/audio/down.mp3\");\n\t\t\t\t\t\taudio.play();\n\t\t\t\t\t\tawait player.reinitCharacter(\"paxinghaomrfz\", player.storage.duantiemrfz_buff, false);\n\t\t\t\t\t\tplayer.recoverTo(2);\n\t\t\t\t\t\tplayer.removeSkill(\"duantiemrfz_buff\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 6,\n\t\t\t\tresult: {\n\t\t\t\t\tplayer(player, target) {\n\t\t\t\t\t\tif (player.hp < 3) return 1;\n\t\t\t\t\t\tlet threaten = -(get.skillthreaten(\"jushoumrfz\") + get.skillthreaten(\"yinqingmrfz\"));\n\t\t\t\t\t\tfor (let skill of player.getSkills(null, false, false)) {\n\t\t\t\t\t\t\tthreaten += get.skillthreaten(skill);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn threaten;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t// 波卜\n\t\tqingtingmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { player: [\"loseBegin\", \"loseAsyncBegin\"] },\n\t\t\tfilter(event, player) {\n\t\t\t\tlet evt = event.getParent();\n\t\t\t\tif (event.name === \"lose\") {\n\t\t\t\t\treturn event.type === \"gain\" && event.cards.length >= 1 && evt.player !== player;\n\t\t\t\t} else if (event.name === \"loseAsync\") {\n\t\t\t\t\treturn evt.name === \"swapHandcards\" && event.target != event.player && event.cards1.length >= 1;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tasync cost(event, trigger, player) {\n\t\t\t\tlet evt = trigger.getParent();\n\t\t\t\tevent.result = await player\n\t\t\t\t\t.chooseBool()\n\t\t\t\t\t.set(\"ai\", () => {\n\t\t\t\t\t\tlet evt = get.event().evt;\n\t\t\t\t\t\tlet event = get.event().evt2;\n\t\t\t\t\t\treturn get.attitude2(event.target || evt.player) < 0;\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"qingtingmrfz\"))\n\t\t\t\t\t.set(\"prompt2\", `是否取消${get.translation(trigger.target || evt.player)}获得你的牌${get.translation(trigger.cards1 || trigger.cards)}？`)\n\t\t\t\t\t.set(\"evt\", evt)\n\t\t\t\t\t.set(\"evt2\", trigger)\n\t\t\t\t\t.forResult();\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tif (trigger.name === \"lose\") trigger.cancel();\n\t\t\t\telse {\n\t\t\t\t\tlet evt = trigger.getParent();\n\t\t\t\t\tplayer.directgain(evt.cards1);\n\t\t\t\t\tplayer.$update();\n\t\t\t\t\tevt.cards1 = [];\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\tqingtanmrfz: {\n\t\t\taudio: 2,\n\t\t\tenable: \"phaseUse\",\n\t\t\tusable: 1,\n\t\t\tfilterTarget(card, player, target) {\n\t\t\t\treturn target != player && target.countCards(\"h\") > 0;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet target = event.target;\n\t\t\t\tlet tHs = target.getCards(\"h\"),\n\t\t\t\t\tpHs = player.getCards(\"h\");\n\t\t\t\tawait player.viewHandcards(target);\n\t\t\t\tawait target.viewHandcards(player);\n\t\t\t\tconst {cards:cards1} =\n\t\t\t\t\tpHs.length < 2\n\t\t\t\t\t\t? {cards:pHs}\n\t\t\t\t\t\t: await player\n\t\t\t\t\t\t\t\t.chooseCard(true)\n\t\t\t\t\t\t\t\t.set(\"ai\", card => {\n\t\t\t\t\t\t\t\t\tlet player = get.player();\n\t\t\t\t\t\t\t\t\tlet target = get.event().target;\n\t\t\t\t\t\t\t\t\treturn get.value(card) * get.attitude2(target);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.set(\"prompt\", \"请选择两张类型不同的牌\")\n\t\t\t\t\t\t\t\t.set(\"filterCard\", card => {\n\t\t\t\t\t\t\t\t\treturn !ui.selected.cards.some(cardx => get.type2(cardx, player) == get.type2(card, player));\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.set(\"selectCard\", () => {\n\t\t\t\t\t\t\t\t\tlet hs = get.event().hs;\n\t\t\t\t\t\t\t\t\treturn new Set(hs.map(i => get.type2(i))).size < 2 ? 1 : 2;\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.set(\"complexCard\", true)\n\t\t\t\t\t\t\t\t.set(\"target\", target)\n\t\t\t\t\t\t\t\t.set(\"hs\", pHs)\n\t\t\t\t\t\t\t\t.forResult();\n\t\t\t\tconst {cards:cards2} =\n\t\t\t\t\ttHs.length < 2\n\t\t\t\t\t\t? {cards:tHs}\n\t\t\t\t\t\t: await target\n\t\t\t\t\t\t\t\t.chooseCard(true)\n\t\t\t\t\t\t\t\t.set(\"prompt\", \"请选择两张类型不同的牌\")\n\t\t\t\t\t\t\t\t.set(\"ai\", card => {\n\t\t\t\t\t\t\t\t\tlet player = get.player();\n\t\t\t\t\t\t\t\t\tlet target = get.event().target;\n\t\t\t\t\t\t\t\t\treturn get.value(card) * get.attitude2(target);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.set(\"filterCard\", card => {\n\t\t\t\t\t\t\t\t\treturn !ui.selected.cards.some(cardx => get.type2(cardx, player) == get.type2(card, player));\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.set(\"selectCard\", () => {\n\t\t\t\t\t\t\t\t\tlet hs = get.event().hs;\n\t\t\t\t\t\t\t\t\treturn new Set(hs.map(i => get.type2(i))).size < 2 ? 1 : 2;\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.set(\"complexCard\", true)\n\t\t\t\t\t\t\t\t.set(\"hs\", tHs)\n\t\t\t\t\t\t\t\t.set(\"target\", player)\n\t\t\t\t\t\t\t\t.forResult();\n\t\t\t\tif (cards1 && cards2) {\n\t\t\t\t\tplayer.swapHandcards(target, cards1, cards2);\n\t\t\t\t}\n\t\t\t},\n\t\t\tasync contentAfter(event, trigger, player) {\n\t\t\t\tconst target = event.targets[0];\n\t\t\t\tif (target.countCards(\"h\") === player.countCards(\"h\")) return;\n\t\t\t\tfor (let char of [player, target]) {\n\t\t\t\t\tif (char.hasSkill(\"qingtanmrfz_hd\")) {\n\t\t\t\t\t\tchar.draw();\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tconst {bool} = await char\n\t\t\t\t\t\t.chooseBool()\n\t\t\t\t\t\t.set(\"prompt\", \"是否摸一张牌？\")\n\t\t\t\t\t\t.set(\"prompt2\", \"选择‘取消’则为手牌上限+1\")\n\t\t\t\t\t\t.set(\"ai\", () => {\n\t\t\t\t\t\t\tlet player = get.player();\n\t\t\t\t\t\t\treturn player.countCards(\"h\") < 2 ? true : false;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.forResult();\n\t\t\t\t\tif (bool === true) {\n\t\t\t\t\t\tchar.draw();\n\t\t\t\t\t}\n\t\t\t\t\tif (bool === false) {\n\t\t\t\t\t\tchar.addSkill(\"qingtanmrfz_hd\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\thd: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tmark: true,\n\t\t\t\t\tintro: {\n\t\t\t\t\t\tcontent: \"手牌上限+1\",\n\t\t\t\t\t},\n\t\t\t\t\tmod: {\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\n\t\t\t\t\t\t\treturn num + 1;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 13,\n\t\t\t\tresult: {\n\t\t\t\t\ttarget: -1,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t// 菲莱\n\t\tqianxiumrfz: {\n\t\t\taudio: 2,\n\t\t\tintro: {\n\t\t\t\tcontent(event, player) {\n\t\t\t\t\treturn `少女祈祷中...`;\n\t\t\t\t},\n\t\t\t},\n\t\t\ttrigger: { player: \"phaseDrawBegin1\" },\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn !event.numFixed;\n\t\t\t},\n\t\t\tprompt(event, player) {\n\t\t\t\treturn get.prompt(\"qianxiumrfz\");\n\t\t\t},\n\t\t\tprompt2(event, player) {\n\t\t\t\treturn `你可以放弃摸牌，并展示牌堆顶${player.maxHp}张牌`;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\ttrigger.changeToZero();\n\t\t\t\tlet shows = game.cardsGotoOrdering(get.cards(player.maxHp)).cards;\n\t\t\t\tawait player.showCards(shows, get.translation(player) + \"发动了【虔修】\");\n\t\t\t\tif (shows.filter(i => get.tag(i, \"damage\") > 0).length < 1) {\n\t\t\t\t\tplayer.gain(shows);\n\t\t\t\t\tif (player.countMark(\"qianxiumrfz\") < 5) player.addMark(\"qianxiumrfz\", 1, false);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst {links} = await player\n\t\t\t\t\t.chooseButton([\"【虔修】:你可以使用一张带有伤害类标签的牌\", shows])\n\t\t\t\t\t.set(\"filterButton\", button => {\n\t\t\t\t\t\tlet player = get.player();\n\t\t\t\t\t\treturn get.tag(button.link, \"damage\") > 0 && player.hasUseTarget(button.link);\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"ai\", button => {\n\t\t\t\t\t\tlet player = get.player();\n\t\t\t\t\t\tif (player.countMark(\"qianxiumrfz\") < 3) return false;\n\t\t\t\t\t\treturn get.value(button.link);\n\t\t\t\t\t})\n\t\t\t\t\t.forResult();\n\t\t\t\tif (links) {\n\t\t\t\t\tlet nums = player.countMark(\"qianxiumrfz\");\n\t\t\t\t\tlinks[0].storage.qianxiumrfz = nums;\n\t\t\t\t\tplayer.removeAllmark(\"qianxiumrfz\");\n\t\t\t\t\tplayer.chooseUseTarget(links[0]);\n\t\t\t\t} else {\n\t\t\t\t\tplayer.gain(shows);\n\t\t\t\t\tif (player.countMark(\"qianxiumrfz\") < 5) player.addMark(\"qianxiumrfz\", 1, false);\n\t\t\t\t}\n\t\t\t},\n\t\t\tgroup: [\"qianxiumrfz_add\"],\n\t\t\tsubSkill: {\n\t\t\t\tadd: {\n\t\t\t\t\taudio: \"qianxiumrfz\",\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\ttrigger: { source: \"damageBegin3\" },\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\treturn event.card && event.card.storage && typeof event.card.storage.qianxiumrfz === \"number\" && event.card.storage.qianxiumrfz > 0;\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\ttrigger.num += trigger.card.storage.qianxiumrfz;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tmingzhoumrfz: {\n\t\t\taudio: 2,\n\t\t\tforced: true,\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"gainAfter\",\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\treturn event.cards.length > 0 && _status.currentPhase !== player;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tplayer.chooseToDiscard(true, `he`, `请弃置${trigger.cards.length}张牌`, trigger.cards.length).set(\"ai\", card => -get.value(card));\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tthreaten: 0.9,\n\t\t\t\tnogain: 1,\n\t\t\t\tskillTagFilter: function (player) {\n\t\t\t\t\treturn player != _status.currentPhase;\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t// 裁度\n\t\tcaiyimrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { player: \"equipBefore\" },\n\t\t\tforced: true,\n\t\t\tfilter(event, player) {\n\t\t\t\treturn event.card && get.type(event.card) === \"equip\" && event.getParent().name != \"caiyimrfz\";\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tconst subtype = [\"equip1\", \"equip2\", \"equip3\", \"equip4\", \"equip5\"];\n\t\t\t\tconst {control} = await player\n\t\t\t\t\t.chooseControl(subtype)\n\t\t\t\t\t.set(\"prompt\", `请选择将${get.translation(trigger.card)}置入一个装备栏`)\n\t\t\t\t\t.set(\"ai\", () => {\n\t\t\t\t\t\tlet player = get.player();\n\t\t\t\t\t\tlet subtype = get.event().subtype.filter(i => player.hasEmptySlot(i));\n\t\t\t\t\t\tlet card = get.event().card;\n\t\t\t\t\t\tif (subtype.length > 0) {\n\t\t\t\t\t\t\treturn subtype.includes(\"equip2\") && subtype.length > 1 ? subtype.remove(\"equip2\").randomGet() : subtype.randomGet();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlet equips = player.getCards(\"e\").sort((a, b) => get.value(b) - get.value(a));\n\t\t\t\t\t\t\tfor (let equip of equips) {\n\t\t\t\t\t\t\t\tif (get.value(card) > get.value(equip)) return get.subtype(equip);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn [\"equip1\", \"equip2\", \"equip3\", \"equip4\", \"equip5\"].randomGet();\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"subtype\", subtype)\n\t\t\t\t\t.set(\"card\", trigger.card)\n\t\t\t\t\t.forResult();\n\t\t\t\tif (!control) return;\n\t\t\t\ttrigger.card.subtypes = [control];\n\t\t\t},\n\t\t},\n\t\tmingjiangmrfz: {\n\t\t\taudio: 2,\n\t\t\tinit(player, skill) {\n\t\t\t\tlet puyuanEquip = Object.keys(lib.card).filter(i => {\n\t\t\t\t\treturn get.type(i) === \"equip\" && lib.card?.[i]?.skills && (lib.card[i]?.derivation === \"ol_puyuan\" || lib.card[i]?.derivation === \"puyuan\");\n\t\t\t\t});\n\t\t\t\tplayer.storage[skill] = [...lib.inpile.filter(i => get.type(i) === \"equip\"), ...puyuanEquip];\n\t\t\t\t_status.mingjiangmrfz = puyuanEquip;\n\t\t\t},\n\t\t\ttrigger: { player: \"phaseUseBegin\" },\n\t\t\tfilter(event, player) {\n\t\t\t\treturn game.hasPlayer(current => {\n\t\t\t\t\treturn current.hasEmptySlot(2);\n\t\t\t\t});\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet list = player.storage.mingjiangmrfz;\n\t\t\t\tawait player.draw();\n\t\t\t\tif (player.countCards(\"h\") < 1) return;\n\t\t\t\tconst {links} = await player\n\t\t\t\t\t.chooseButton([\"名匠\", [list, \"vcard\"]], true)\n\t\t\t\t\t.set(\"ai\", button => {\n\t\t\t\t\t\tlet card = {\n\t\t\t\t\t\t\tname: button.link[2],\n\t\t\t\t\t\t\tnature: button.link[3],\n\t\t\t\t\t\t};\n\t\t\t\t\t\tlet num = get.value(card);\n\t\t\t\t\t\tif (_status.mingjiangmrfz.includes(card.name)) num += 5;\n\t\t\t\t\t\tif (player.countCards(\"e\", card => get.subtype(card) === \"equip2\") < 1) get.subtype(card) === \"equip2\" ? (num += 5) : (num -= 2);\n\t\t\t\t\t\treturn num;\n\t\t\t\t\t})\n\t\t\t\t\t.forResult();\n\t\t\t\tif (!links) return;\n\t\t\t\tconst { result } = await player.chooseCardTarget({\n\t\t\t\t\tprompt: `将一张手牌视为${get.translation(links[0][2])}置入一名角色的装备区`,\n\t\t\t\t\tfilterCard: true,\n\t\t\t\t\tforced: true,\n\t\t\t\t\tfilterTarget: function (card, player, target) {\n\t\t\t\t\t\treturn target.hasEmptySlot(2);\n\t\t\t\t\t},\n\t\t\t\t\tai1(card) {\n\t\t\t\t\t\treturn -get.value(card);\n\t\t\t\t\t},\n\t\t\t\t\tai2(target) {\n\t\t\t\t\t\tlet player = get.player();\n\t\t\t\t\t\tlet att = get.attitude2(target);\n\t\t\t\t\t\treturn att > 0 ? att + (5 - target.countCards(\"e\")) : -1;\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tif (!result) return;\n\t\t\t\tconst { targets, cards } = result;\n\t\t\t\tlet card = get.autoViewAs({ name: links[0][2] }, cards);\n\t\t\t\ttargets[0].equip(card);\n\t\t\t},\n\t\t},\n\n\t\t// 特克诺\n\t\tsuoumrfz: {\n\t\t\tinit(player) {\n\t\t\t\tgame.addGlobalSkill(\"autoswap\");\n\t\t\t},\n\t\t\tonremove(player) {\n\t\t\t\tfor (let i of game.players) {\n\t\t\t\t\tif (i.name === \"muouwuzhemrfz\") i.die();\n\t\t\t\t}\n\t\t\t},\n\t\t\taudio: 2,\n\t\t\ttrigger: { source: \"damageEnd\" },\n\t\t\tfilter(event, player) {\n\t\t\t\treturn event.player && event.player.isIn() && event.player.name !== \"muouwuzhemrfz\" && event.player.getNext().name != \"muouwuzhemrfz\";\n\t\t\t},\n\t\t\tprompt(event, player) {\n\t\t\t\treturn `【塑偶】:是否在${get.translation(event.player)}和${get.translation(event.player.getNext())}之间放置一个‘木偶舞者’？`;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet target = trigger.player.getNext();\n\t\t\t\tvar fellow = game.addPlayer(trigger.player.getSeatNum(), \"muouwuzhemrfz\").animate(\"start\");\n\t\t\t\tfellow.getId();\n\t\t\t\tfellow.host = player;\n\t\t\t\tif (player.identity != \"zhu\" || get.mode() === \"doudizhu\") fellow.identity = player.identity;\n\t\t\t\telse fellow.identity = \"zhong\";\n\t\t\t\tfellow.node.identity.dataset.color = fellow.identity;\n\t\t\t\tfellow.identityShown = true;\n\t\t\t\tfellow.init(\"muouwuzhemrfz\");\n\t\t\t\tfellow.draw(3);\n\t\t\t\tfellow.update();\n\t\t\t\tfellow.addSkill(\"suoumrfz_dead\");\n\t\t\t\tfellow.suoumrfz = player;\n\t\t\t\tlet skillList = trigger.player.getOriginalSkills();\n\t\t\t\tlet introSkill = skillList.map(i => get.translation(i) + \":\" + get.skillInfoTranslation(i));\n\t\t\t\tconst {index} = skillList.length === 1 ? {index:0} : await player.chooseControl().set(\"choiceList\", introSkill).forResult();\n\t\t\t\tfellow.addSkill(skillList[index] === \"suoumrfz\" ? \"yingzi\" : skillList[index]);\n\t\t\t\tfor (let i = 0; i < game.players.length; i++) {\n\t\t\t\t\tlet current = game.players[i];\n\t\t\t\t\tcurrent.seatNum = i + 1;\n\t\t\t\t\tcurrent.update();\n\t\t\t\t}\n\t\t\t\tawait game.updateRoundNumber();\n\t\t\t\tfor (let i of game.players) {\n\t\t\t\t\tif (i === player || i.suoumrfz === true) {\n\t\t\t\t\t\ti.draw();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tgroup: [\"suoumrfz_swap\", \"suoumrfz_die\"],\n\t\t\tsubSkill: {\n\t\t\t\tdie: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\ttrigger: { global: \"dieBegin\" },\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tif (trigger.player === player) lib.skill.suoumrfz.onremove(player);\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tlet chars = game.players.slice();\n\t\t\t\t\t\t\tchars.remove(player);\n\t\t\t\t\t\t\tchars.remove(trigger.player);\n\t\t\t\t\t\t\tchars = chars.map(i => i.name);\n\t\t\t\t\t\t\tif (chars.every(i => i === \"muouwuzhemrfz\") || chars.length === 0) {\n\t\t\t\t\t\t\t\tplayer.when({ global: \"dieAfter\" }).then(() => {\n\t\t\t\t\t\t\t\t\tgame.over(true);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tswap: {\n\t\t\t\t\tinit(player, skill) {\n\t\t\t\t\t\tplayer.storage[skill] = player;\n\t\t\t\t\t},\n\t\t\t\t\tonremove: true,\n\t\t\t\t\tfirstDo: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tglobal: [\"playercontrol\", \"chooseToUseBegin\", \"chooseToRespondBegin\", \"chooseToDiscardBegin\", \"chooseToCompareBegin\", \"chooseButtonBegin\", \"chooseCardBegin\", \"chooseTargetBegin\", \"chooseCardTargetBegin\", \"chooseControlBegin\", \"chooseBoolBegin\", \"choosePlayerCardBegin\", \"discardPlayerCardBegin\", \"gainPlayerCardBegin\", \"chooseToMoveBegin\", \"chooseToPlayBeatmapBegin\", \"chooseToGiveBegin\"],\n\t\t\t\t\t},\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\treturn !event.player.isUnderControl(true) && !_status.auto && (event.player.suoumrfz || event.player === player.storage.suoumrfz_swap);\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tgame.swapPlayer(trigger.player);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdead: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\ttrigger: { player: \"dieBegin\" },\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tif (game.me != player.suoumrfz) await game.swapPlayer(player.suoumrfz);\n\t\t\t\t\t\tgame.removePlayer(player);\n\t\t\t\t\t\tgame.log(player, `被移出游戏`);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t// 瑰盐\n\t\tqiyimrfz: {\n\t\t\taudio: 2,\n\t\t\tenable: [\"phaseUse\", \"chooseToUse\"],\n\t\t\tusable: 1,\n\t\t\thiddenCard: function (player, name) {\n\t\t\t\tlet event = get.event();\n\t\t\t\tlet evt = event.getParent(\"phaseUse\");\n\t\t\t\t// if(_status.currentPhase===player && evt && evt.player == player) return true;\n\t\t\t\tif (player.countCards(\"he\") < 1 || _status.currentPhase == player) return false;\n\t\t\t\tif (name != \"tao\") return false;\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\tlet evt = event.getParent(\"phaseUse\");\n\t\t\t\tif (player.countCards(\"he\") < 1) return false;\n\t\t\t\tif (evt && evt.player == player) return true;\n\t\t\t\telse {\n\t\t\t\t\treturn event.filterCard({ name: \"tao\", isCard: true }, player, event) && _status.currentPhase != player;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tfilterTarget(card, player, target) {\n\t\t\t\treturn target.getDamagedHp() > 0;\n\t\t\t},\n\t\t\tfilterCard: true,\n\t\t\tselectTarget() {\n\t\t\t\treturn [1, Infinity];\n\t\t\t},\n\t\t\tselectCard() {\n\t\t\t\treturn [1, Infinity];\n\t\t\t},\n\t\t\tfilterOk() {\n\t\t\t\tlet player = get.player();\n\t\t\t\tif (_status.auto || !player.isUnderControl(true)) return true;\n\t\t\t\treturn ui.selected.cards.length === ui.selected.targets.length;\n\t\t\t},\n\t\t\tposition: \"he\",\n\t\t\tdiscard: false,\n\t\t\tlose: false,\n\t\t\tmultitarget: true,\n\t\t\tmultiline: true,\n\t\t\tcheck(card) {\n\t\t\t\treturn lib.skill.qiyimrfz.getResult(get.player()) === false ? false : true;\n\t\t\t},\n\t\t\tgetResult(player) {\n\t\t\t\tlet cards = player.getCards(\"h\");\n\t\t\t\tif (!player.hasSkill(\"guiyaomrfz\")) {\n\t\t\t\t\tlet choiceCards = cards.filter(card => 6 - get.value(card));\n\t\t\t\t\tlet choiceTargets = player.getFriends().filter(i => i.getDamagedHp() > 0);\n\t\t\t\t\tif (choiceCards.length !== choiceTargets.length) {\n\t\t\t\t\t\tif (choiceCards.length > choiceTargets.length) choiceCards = choiceCards.slice(0, choiceTargets);\n\t\t\t\t\t\telse choiceTargets = choiceTargets.slice(0, choiceCards);\n\t\t\t\t\t}\n\t\t\t\t\tif (choiceTargets.length < 1 || choiceCards.length < 1) return false;\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttargets: choiceTargets,\n\t\t\t\t\t\tcards: choiceCards,\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tif (game.countPlayer(current => get.attitude2(current) > 2 && current.getDamagedHp() > 0) > 1) {\n\t\t\t\t\t\tlet choiceCards = cards.filter(card => 8 - get.value(card) && get.color(card) === \"red\");\n\t\t\t\t\t\tlet choiceTargets = player\n\t\t\t\t\t\t\t.getFriends()\n\t\t\t\t\t\t\t.filter(i => i.getDamagedHp() > 0)\n\t\t\t\t\t\t\t.sort((i, j) => j.hp - i.hp);\n\t\t\t\t\t\tif (choiceCards.length !== choiceTargets.length) {\n\t\t\t\t\t\t\tif (choiceCards.length > choiceTargets.length) choiceCards = choiceCards.slice(0, choiceTargets.length);\n\t\t\t\t\t\t\telse choiceTargets = choiceTargets.slice(0, choiceCards.length);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (choiceTargets.length < 1 || choiceCards.length < 1) return false;\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttargets: choiceTargets,\n\t\t\t\t\t\t\tcards: choiceCards,\n\t\t\t\t\t\t};\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet choiceCards = cards.filter(card => 6 - get.value(card));\n\t\t\t\t\t\tlet choiceTargets = player.getEnemies().filter(i => i.getDamagedHp() > 0);\n\t\t\t\t\t\tchoiceCards = choiceCards.sort((i, j) => get.value(i) - get.value(j));\n\t\t\t\t\t\tif (choiceCards.length !== choiceTargets.length) {\n\t\t\t\t\t\t\tif (choiceCards.length > choiceTargets.length) choiceCards = choiceCards.slice(0, choiceTargets.length);\n\t\t\t\t\t\t\telse choiceTargets = choiceTargets.slice(0, choiceCards.length);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (choiceCards.every(i => get.color(i) === \"red\")) {\n\t\t\t\t\t\t\tlet lowValueRed = choiceCards[0];\n\t\t\t\t\t\t\tlet lowValueOther = cards.filter(card => 6 - get.value(card) && get.color(card) !== \"red\").sort((i, j) => get.value(i) - get.value(j));\n\t\t\t\t\t\t\tif (lowValueOther.length === 0) return false;\n\t\t\t\t\t\t\tchoiceCards = [lowValueRed, lowValueOther[0]];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (choiceTargets.length < 1 || choiceCards.length < 1) return false;\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttargets: choiceTargets,\n\t\t\t\t\t\t\tcards: choiceCards,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tif (!player.isUnderControl(true) || _status.auto) {\n\t\t\t\t\tlet result = lib.skill.qiyimrfz.getResult(player);\n\t\t\t\t\tplayer.useCard({ name: \"tao\" }, result.targets, result.cards);\n\t\t\t\t} else {\n\t\t\t\t\tlet targets = event.targets;\n\t\t\t\t\tlet cards = event.cards;\n\t\t\t\t\tplayer.useCard({ name: \"tao\" }, targets, cards);\n\t\t\t\t}\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 8,\n\t\t\t\tresult: {\n\t\t\t\t\tplayer: 1,\n\t\t\t\t\ttarget(player, target) {\n\t\t\t\t\t\tif (!player.hasSkill(\"guiyaomrfz\")) return 1;\n\t\t\t\t\t\tlet result = lib.skill.qiyimrfz.getResult(player);\n\t\t\t\t\t\tif (result === false) return 0;\n\t\t\t\t\t\tlet att = get.attitude2(lib.skill.qiyimrfz.getResult(player).targets[0]);\n\t\t\t\t\t\treturn att > 2 ? 1 : -1;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tguiyaomrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tglobal: \"recoverBegin\",\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\treturn event.cards && event.cards.length > 0 && event.source && event.source === player;\n\t\t\t},\n\t\t\tforced: true,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tconst cards = trigger.cards;\n\t\t\t\tlet target = trigger.player;\n\t\t\t\ttarget.addTempSkill(\"guiyaomrfz_eff\", { player: \"phaseEnd\" });\n\t\t\t\tif (cards.every(card => get.color(card) === \"red\")) {\n\t\t\t\t\tif (!target.storage.guiyaomrfz_eff) target.storage.guiyaomrfz_eff = 0;\n\t\t\t\t\ttarget.storage.guiyaomrfz_eff++;\n\t\t\t\t} else {\n\t\t\t\t\tif (!target.storage.guiyaomrfz_eff) target.storage.guiyaomrfz_eff = 0;\n\t\t\t\t\ttarget.storage.guiyaomrfz_eff--;\n\t\t\t\t\ttarget.loseHp(2);\n\t\t\t\t}\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\teff: {\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tmark: true,\n\t\t\t\t\tintro: {\n\t\t\t\t\t\tcontent(event, player) {\n\t\t\t\t\t\t\tlet num = player.storage.guiyaomrfz_eff;\n\t\t\t\t\t\t\tif (num === 0) return `无效果`;\n\t\t\t\t\t\t\treturn `额定摸牌数、手牌上限、使用牌的次数和攻击范围${num > 0 ? \"+\" : \"\"}${num}`;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tonremove(player) {\n\t\t\t\t\t\tdelete player.storage.guiyaomrfz_eff;\n\t\t\t\t\t},\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"phaseDrawBegin2\",\n\t\t\t\t\t},\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\treturn !event.numFixed && player.storage.guiyaomrfz_eff != 0;\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\ttrigger.num += player.storage.guiyaomrfz_eff;\n\t\t\t\t\t},\n\t\t\t\t\tmod: {\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\n\t\t\t\t\t\t\treturn (num += player.storage.guiyaomrfz_eff);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcardUsable(card, player, num) {\n\t\t\t\t\t\t\treturn (num += player.storage.guiyaomrfz_eff);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tattackRange: function (player, num) {\n\t\t\t\t\t\t\treturn (num += player.storage.guiyaomrfz_eff);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\txiadumrfz: {\n\t\t\taudio: 2,\n\t\t\tforced: true,\n\t\t\ttrigger: {\n\t\t\t\tglobal: \"roundStart\",\n\t\t\t},\n\t\t\tfirstDo: true,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet cards = player.getCards(\"h\", card => card.hasGaintag(\"xiadumrfz\"));\n\t\t\t\tif (cards) await player.discard(cards);\n\t\t\t\tawait player.changeHujia(-1);\n\t\t\t\tconst { result } = await player.draw(2).forResult();\n\t\t\t\tplayer.addGaintag(result, \"xiadumrfz\");\n\t\t\t\tplayer.changeHujia(1);\n\t\t\t},\n\t\t},\n\n\t\t// 行著\n\t\txingzhumrfz: {\n\t\t\tmarktext: \"帙\",\n\t\t\tintro: {\n\t\t\t\tname: \"帙\",\n\t\t\t\tcontent: \"expansion\",\n\t\t\t\tmarkcount: \"expansion\",\n\t\t\t},\n\t\t\tonremove: function (player, skill) {\n\t\t\t\tvar cards = player.getExpansions(skill);\n\t\t\t\tif (cards.length) player.loseToDiscardpile(cards);\n\t\t\t},\n\t\t\taudio: 2,\n\t\t\tforced: true,\n\t\t\ttrigger: {\n\t\t\t\tglobal: [\"loseAfter\", \"loseAsyncAfter\"],\n\t\t\t},\n\t\t\tfilter: function (event, player) {\n\t\t\t\tif (event.type != \"discard\") return false;\n\t\t\t\tfor (let current of game.players) {\n\t\t\t\t\tif (current === player) continue;\n\t\t\t\t\tlet evt = event.getl(current);\n\t\t\t\t\tif (!evt || !evt.cards2) continue;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet cards = [];\n\t\t\t\tvar players = game.filterPlayer();\n\t\t\t\tfor (var current of players) {\n\t\t\t\t\tif (current === player) continue;\n\t\t\t\t\tvar evt = trigger.getl(current);\n\t\t\t\t\tif (!evt || !evt.cards2) continue;\n\t\t\t\t\tvar cardsx = evt.cards2.filterInD(\"d\");\n\t\t\t\t\tcards.addArray(cardsx);\n\t\t\t\t}\n\t\t\t\tif (cards.length) {\n\t\t\t\t\tplayer.addToExpansion(cards, player, \"giveAuto\").gaintag.add(\"xingzhumrfz\");\n\t\t\t\t}\n\t\t\t},\n\t\t\tgroup: [\"xingzhumrfz_start\", \"xingzhumrfz_check\", \"xingzhumrfz_init\"],\n\t\t\tsubSkill: {\n\t\t\t\tcheck: {\n\t\t\t\t\taudio: false,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"addToExpansionEnd\",\n\t\t\t\t\t},\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn event.gaintag.includes(\"xingzhumrfz\");\n\t\t\t\t\t},\n\t\t\t\t\tlastDo: true,\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tlet cards = player.getExpansions(\"xingzhumrfz\");\n\t\t\t\t\t\tif (cards.length >= 9) {\n\t\t\t\t\t\t\tconst {links} = await player\n\t\t\t\t\t\t\t\t.chooseCardButton(`【行著】:请弃置${Math.max(1, cards.length - 9)}张‘帙’`, true, cards)\n\t\t\t\t\t\t\t\t.set(\"selectButton\", () => {\n\t\t\t\t\t\t\t\t\tlet cards2 = get.player().getExpansions(\"xingzhumrfz\");\n\t\t\t\t\t\t\t\t\treturn Math.max(1, cards2.length - 9);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.set(\"ai\", button => {\n\t\t\t\t\t\t\t\t\treturn -get.value(button.link);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.forResult();\n\t\t\t\t\t\t\tif (!links) return;\n\t\t\t\t\t\t\tplayer.loseToDiscardpile(links);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tstart: {\n\t\t\t\t\taudio: \"xingzhumrfz\",\n\t\t\t\t\tforced: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tglobal: \"phaseBefore\",\n\t\t\t\t\t\tplayer: \"enterGame\",\n\t\t\t\t\t},\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tplayer.addToExpansion(get.cards(3), \"draw\").gaintag.add(\"xingzhumrfz\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tinit: {\n\t\t\t\t\taudio: \"xingzhumrfz\",\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: [\"loseEnd\", \"dying\", \"phaseBefore\", \"phaseAfter\", \"dyingAfter\", \"die\"],\n\t\t\t\t\t\tglobal: [\"equipEnd\", \"addJudgeEnd\", \"gainEnd\", \"loseAsyncEnd\", \"addToExpansionEnd\"],\n\t\t\t\t\t},\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn (player.getExpansions(\"xingzhumrfz\").length > 0) ^ player.hasSkill(\"xingzhumrfz_in\");\n\t\t\t\t\t},\n\t\t\t\t\tforced: true,\n\t\t\t\t\tfirstDo: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tforceDie: true,\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tif (player.getExpansions(\"xingzhumrfz\").length) {\n\t\t\t\t\t\t\tvar cards = player.getExpansions(\"xingzhumrfz\");\n\t\t\t\t\t\t\tvar cardsx = cards.map(card => {\n\t\t\t\t\t\t\t\tvar cardx = ui.create.card();\n\t\t\t\t\t\t\t\tcardx.init(get.cardInfo(card));\n\t\t\t\t\t\t\t\tcardx._cardid = card.cardid;\n\t\t\t\t\t\t\t\treturn cardx;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tplayer.directgains(cardsx, null, \"xingzhumrfz_tag\");\n\t\t\t\t\t\t\tplayer.addSkill(\"xingzhumrfz_in\");\n\t\t\t\t\t\t} else player.removeSkill(\"xingzhumrfz_in\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tin: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\taudio: false,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"addToExpansionEnd\",\n\t\t\t\t\t},\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn event.gaintag.includes(\"xingzhumrfz\");\n\t\t\t\t\t},\n\t\t\t\t\tforced: true,\n\t\t\t\t\tlocked: false,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\t\"step 0\";\n\t\t\t\t\t\tvar cards2 = player.getCards(\"s\", card => card.hasGaintag(\"xingzhumrfz_tag\"));\n\t\t\t\t\t\tif (player.isOnline2()) {\n\t\t\t\t\t\t\tplayer.send(\n\t\t\t\t\t\t\t\tfunction (cards, player) {\n\t\t\t\t\t\t\t\t\tcards.forEach(i => i.delete());\n\t\t\t\t\t\t\t\t\tif (player == game.me) ui.updatehl();\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcards2,\n\t\t\t\t\t\t\t\tplayer\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcards2.forEach(i => i.delete());\n\t\t\t\t\t\tif (player == game.me) ui.updatehl();\n\t\t\t\t\t\t(\"step 1\");\n\t\t\t\t\t\tvar cards = player.getExpansions(\"xingzhumrfz\");\n\t\t\t\t\t\tvar cardsx = cards.map(card => {\n\t\t\t\t\t\t\tvar cardx = ui.create.card();\n\t\t\t\t\t\t\tcardx.init(get.cardInfo(card));\n\t\t\t\t\t\t\tcardx._cardid = card.cardid;\n\t\t\t\t\t\t\treturn cardx;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tplayer.directgains(cardsx, null, \"xingzhumrfz_tag\");\n\t\t\t\t\t},\n\t\t\t\t\tonremove: function (player) {\n\t\t\t\t\t\tvar cards2 = player.getCards(\"s\", card => card.hasGaintag(\"xingzhumrfz_tag\"));\n\t\t\t\t\t\tif (player.isOnline2()) {\n\t\t\t\t\t\t\tplayer.send(\n\t\t\t\t\t\t\t\tfunction (cards, player) {\n\t\t\t\t\t\t\t\t\tcards.forEach(i => i.delete());\n\t\t\t\t\t\t\t\t\tif (player == game.me) ui.updatehl();\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcards2,\n\t\t\t\t\t\t\t\tplayer\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcards2.forEach(i => i.delete());\n\t\t\t\t\t\tif (player == game.me) ui.updatehl();\n\t\t\t\t\t},\n\t\t\t\t\tgroup: [\"xingzhumrfz_use\", \"xingzhumrfz_sync\"],\n\t\t\t\t},\n\t\t\t\tuse: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: [\"useCardBefore\", \"respondBefore\"],\n\t\t\t\t\t},\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\tvar cards = player.getCards(\"s\", card => card.hasGaintag(\"xingzhumrfz_tag\") && card._cardid);\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\tevent.cards &&\n\t\t\t\t\t\t\tevent.cards.some(card => {\n\t\t\t\t\t\t\t\treturn cards.includes(card);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t\tforced: true,\n\t\t\t\t\tpopup: false,\n\t\t\t\t\tfirstDo: true,\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\tvar idList = player.getCards(\"s\", card => card.hasGaintag(\"xingzhumrfz_tag\")).map(i => i._cardid);\n\t\t\t\t\t\tvar cards = player.getExpansions(\"xingzhumrfz\");\n\t\t\t\t\t\tvar cards2 = [];\n\t\t\t\t\t\tfor (var card of trigger.cards) {\n\t\t\t\t\t\t\tvar cardx = cards.find(cardx => cardx.cardid == card._cardid);\n\t\t\t\t\t\t\tif (cardx) cards2.push(cardx);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar cards3 = trigger.cards.slice();\n\t\t\t\t\t\ttrigger.cards = cards2;\n\t\t\t\t\t\ttrigger.card.cards = cards2;\n\t\t\t\t\t\tif (player.isOnline2()) {\n\t\t\t\t\t\t\tplayer.send(\n\t\t\t\t\t\t\t\tfunction (cards, player) {\n\t\t\t\t\t\t\t\t\tcards.forEach(i => i.delete());\n\t\t\t\t\t\t\t\t\tif (player == game.me) ui.updatehl();\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcards3,\n\t\t\t\t\t\t\t\tplayer\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcards3.forEach(i => i.delete());\n\t\t\t\t\t\tif (player == game.me) ui.updatehl();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tsync: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\taudio: false,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: [\"loseToDiscardpileEnd\"],\n\t\t\t\t\t},\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\tlet cardsx = player.getCards(\"s\", card => card.hasGaintag(\"xingzhumrfz_tag\"));\n\t\t\t\t\t\tlet cards = player.getExpansions(\"xingzhumrfz\");\n\t\t\t\t\t\treturn cardsx.length !== cards.length;\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tlet cardsx = player.getCards(\"s\", card => card.hasGaintag(\"xingzhumrfz_tag\"));\n\t\t\t\t\t\tlet cards = player.getExpansions(\"xingzhumrfz\");\n\t\t\t\t\t\tcardsx.forEach(i => {\n\t\t\t\t\t\t\tif (!cards.map(i => i.cardid).includes(i._cardid)) i.delete();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tui.updatehl();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tzhizhumrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { player: \"useCardAfter\" },\n\t\t\tinit(player, skill) {\n\t\t\t\tplayer.storage[skill] = [];\n\t\t\t},\n\t\t\tmark: true,\n\t\t\tintro: {\n\t\t\t\tcontent(event, player) {\n\t\t\t\t\tlet storage = player.storage.zhizhumrfz;\n\t\t\t\t\treturn `·本轮已使用的花色：${get.translation(storage)}`;\n\t\t\t\t},\n\t\t\t},\n\t\t\tfirstDo: true,\n\t\t\tfilter(event, player) {\n\t\t\t\tif (!player.storage.zhizhumrfz_check || player.storage.zhizhumrfz.includes(get.suit(event.card)) || get.position(event.card) !== \"d\") return false;\n\t\t\t\tfor (let current of game.players) {\n\t\t\t\t\tif (current === player) continue;\n\t\t\t\t\tfor (let key in player.storage.zhizhumrfz_check) {\n\t\t\t\t\t\tif (event.card.cardid !== key) continue;\n\t\t\t\t\t\tlet arrs = player.storage.zhizhumrfz_check[key];\n\t\t\t\t\t\tfor (let arr of arrs) {\n\t\t\t\t\t\t\tif (arr[0] === current && arr[1] != current.countCards(\"h\")) return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tplayer.storage.zhizhumrfz.push(get.suit(trigger.card));\n\t\t\t\tplayer.addToExpansion(trigger.cards, player, \"giveAuto\").gaintag.add(\"xingzhumrfz\");\n\t\t\t},\n\t\t\tgroup: [\"zhizhumrfz_check\", \"zhizhumrfz_remove\"],\n\t\t\tsubSkill: {\n\t\t\t\tremove: {\n\t\t\t\t\taudio: false,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tglobal: \"roundStart\",\n\t\t\t\t\t\tplayer: \"useCardAfter\",\n\t\t\t\t\t},\n\t\t\t\t\tlastDo: true,\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tif (trigger.name === \"useCard\") {\n\t\t\t\t\t\t\tif (player.storage.zhizhumrfz_check.hasOwnProperty(trigger.card.cardid)) {\n\t\t\t\t\t\t\t\tdelete player.storage.zhizhumrfz_check[trigger.card.cardid];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tplayer.storage.zhizhumrfz = [];\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcheck: {\n\t\t\t\t\taudio: false,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"useCard\",\n\t\t\t\t\t},\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tif (!player.storage.zhizhumrfz_check) player.storage.zhizhumrfz_check = {};\n\t\t\t\t\t\tfor (let current of game.players) {\n\t\t\t\t\t\t\tif (current === player) continue;\n\t\t\t\t\t\t\tif (!player.storage.zhizhumrfz_check[trigger.card.cardid]) player.storage.zhizhumrfz_check[trigger.card.cardid] = [];\n\t\t\t\t\t\t\tplayer.storage.zhizhumrfz_check[trigger.card.cardid].push([current, current.countCards(\"h\")]);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t// 寻澜\n\t\ttanxunmrfz: {\n\t\t\taudio: 2,\n\t\t\tforced: true,\n\t\t\ttrigger: { player: \"phaseBegin\" },\n\t\t\tfilter(event, player) {\n\t\t\t\treturn !event.audioed;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\ttrigger.audioed = true;\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tviewHandcard: true,\n\t\t\t\tskillTagFilter(player, tag, arg) {\n\t\t\t\t\tif (player === arg || !player.inRange(arg) || _status.currentPhase !== player) return false;\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tdongximrfz: {\n\t\t\taudio: 2,\n\t\t\tenable: \"phaseUse\",\n\t\t\tfilter(event, player) {\n\t\t\t\treturn player.countCards(\"h\", card => player.canRecast(card)) > 0 && game.hasPlayer(current => current != player && player.inRange(current) && !current.hasSkill(\"dongximrfz_ban\") && current.countCards(\"h\", card => current.canRecast(card)) > 0);\n\t\t\t},\n\t\t\tfilterTarget(card, player, target) {\n\t\t\t\treturn target != player && player.inRange(target) && !target.hasSkill(\"dongximrfz_ban\") && target.countCards(\"h\", cardx => target.canRecast(cardx)) > 0;\n\t\t\t},\n\t\t\tfilterCard(card) {\n\t\t\t\treturn get.player().canRecast(card);\n\t\t\t},\n\t\t\tselectCard: [1, 2],\n\t\t\tcheck(card) {\n\t\t\t\treturn 1;\n\t\t\t},\n\t\t\tdiscard: false,\n\t\t\tlose: false,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tconst target = event.targets[0];\n\n\t\t\t\ttarget.addTempSkill(\"dongximrfz_ban\", { global: \"phaseUseEnd\" });\n\n\t\t\t\tlet cards1;\n\t\t\t\tif (_status.auto || !player.isUnderControl(true)) {\n\t\t\t\t\tlet cards = [];\n\n\t\t\t\t\tfor (let i of target.getCards(\"h\")) {\n\t\t\t\t\t\tif (get.attitude(player, target) > 0) {\n\t\t\t\t\t\t\tfor (let j of player.getCards(\"h\")) {\n\t\t\t\t\t\t\t\tif (get.suit(i) !== get.suit(j)) continue;\n\t\t\t\t\t\t\t\tcards.push(j);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfor (let j of player.getCards(\"h\")) {\n\t\t\t\t\t\t\t\tif (get.suit(i) === get.suit(j)) continue;\n\t\t\t\t\t\t\t\tcards.push(j);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (cards.length > 2) cards = cards.slice(0, 2);\n\t\t\t\t\tcards1 = cards.length > 0 ? cards : player.getCards(\"h\").randomGet();\n\t\t\t\t} else {\n\t\t\t\t\tcards1 = event.cards;\n\t\t\t\t}\n\n\t\t\t\tconst {cards:cards2} = await target\n\t\t\t\t\t.chooseCard([1, 2], true)\n\t\t\t\t\t.set(\"filterCard\", card => {\n\t\t\t\t\t\treturn get.event().playerx.canRecast(card);\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"prompt\", `【洞悉】:你可以重铸至多两张牌`)\n\t\t\t\t\t.set(\"prompt2\", get.prompt2(\"dongximrfz\"))\n\t\t\t\t\t.set(\"ai\", card => {\n\t\t\t\t\t\tlet target = get.event().target,\n\t\t\t\t\t\t\tplayer = get.event().playerx;\n\t\t\t\t\t\tif (target.countCards(\"h\") > 2 && ui.selected.cards.length > 0 && get.attitude(player, target) < 0) return -1;\n\t\t\t\t\t\treturn 8 - get.value(card, player);\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"playerx\", target)\n\t\t\t\t\t.set(\"target\", player)\n\t\t\t\t\t.forResult();\n\t\t\t\tlet bool = true;\n\t\t\t\touterLoop: for (let i = 0; i < cards1.length; i++) {\n\t\t\t\t\tfor (let j = 0; j < cards2.length; j++) {\n\t\t\t\t\t\tif (get.suit(cards1[i]) === get.suit(cards2[j])) {\n\t\t\t\t\t\t\tbool = false;\n\t\t\t\t\t\t\tbreak outerLoop;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tplayer.recast(cards1);\n\t\t\t\ttarget.recast(cards2);\n\t\t\t\tlet num = cards2.length;\n\t\t\t\tif (bool) {\n\t\t\t\t\tif (num < 1) return;\n\t\t\t\t\tif (target.countGainableCards(player, \"h\")) await player.gainPlayerCard(\"h\", target, num, true).set(\"target\", target).set(\"complexSelect\", false).set(\"ai\", lib.card.shunshou.ai.button);\n\t\t\t\t\tawait target.damage(num, player);\n\t\t\t\t} else {\n\t\t\t\t\tplayer.disableSkill(\"dongximrfz\", [\"dongximrfz\"]);\n\t\t\t\t\tplayer.addTempSkill(\"dongximrfz_restore\", { player: \"phaseUseEnd\" });\n\t\t\t\t\tgame.log(player, \"的技能\", \"#g\" + get.translation(\"dongximrfz\"), \"失效了\");\n\t\t\t\t}\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\tban: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t},\n\t\t\t\trestore: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tforced: true,\n\t\t\t\t\tpopup: false,\n\t\t\t\t\tonremove: function (player) {\n\t\t\t\t\t\tplayer.enableSkill(\"dongximrfz\");\n\t\t\t\t\t\tgame.log(player, \"恢复了技能\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 2,\n\t\t\t\tresult: {\n\t\t\t\t\tplayer: 1,\n\t\t\t\t\ttarget: -1,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t// 诺威尔\n\t\tbutingmrfz: {\n\t\t\taudio: 2,\n\t\t\tcomboSkill: true,\n\t\t\tmod: {\n\t\t\t\taiOrder(player, card, num) {\n\t\t\t\t\tif (typeof card == \"object\") {\n\t\t\t\t\t\tconst evt = player.getLastUsed(1);\n\t\t\t\t\t\tif (evt?.card && get.type2(evt.card) === get.type2(card)) {\n\t\t\t\t\t\t\treturn num + 10;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"useCardAfter\",\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\tlet evt = player.getLastUsed(1);\n\t\t\t\treturn evt && get.type2(evt.card) === get.type2(event.card);\n\t\t\t},\n\t\t\tfrequent: true,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tplayer.draw();\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tthreaten: 1.5,\n\t\t\t},\n\t\t},\n\t\tbuximrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"dyingAfter\",\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\treturn player.hasUseTarget(\"tao\");\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tplayer.chooseUseTarget({ name: \"tao\" }, true);\n\t\t\t},\n\t\t},\n\n\t\t// 濯尘芙蓉\n\t\tdichenmrfz: {\n\t\t\tinit(player, skill) {\n\t\t\t\tplayer.storage[skill] = [\n\t\t\t\t\ttarget => {\n\t\t\t\t\t\ttarget.discard(target.getCards(\"j\"));\n\t\t\t\t\t},\n\t\t\t\t\ttarget => {\n\t\t\t\t\t\ttarget.draw(2);\n\t\t\t\t\t},\n\t\t\t\t\ttarget => {\n\t\t\t\t\t\ttarget.recover();\n\t\t\t\t\t\ttarget\n\t\t\t\t\t\t\t.when({ player: \"phaseEnd\" })\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\tif (player.countCards(\"h\") < 5) player.gain(lib.card.ying.getYing(5 - player.countCards(\"h\")), \"gain2\");\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.assign({\n\t\t\t\t\t\t\t\tmark: true,\n\t\t\t\t\t\t\t\tintro: {\n\t\t\t\t\t\t\t\t\tname: \"涤尘\",\n\t\t\t\t\t\t\t\t\tcontent(_, player) {\n\t\t\t\t\t\t\t\t\t\treturn `在你的回合结束获得${Math.max(5 - player.countCards(\"h\"), 0)}张【影】`;\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tdichenmrfz: true,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.translation(\"涤尘\")\n\t\t\t\t\t\t\t.finish();\n\t\t\t\t\t\tlet skillList = target.getSkills();\n\t\t\t\t\t\tskillList.forEach(skill => {\n\t\t\t\t\t\t\tlet info = lib.skill[skill];\n\t\t\t\t\t\t\tif (info.dichenmrfz) {\n\t\t\t\t\t\t\t\ttarget.markSkill(skill);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\ttarget => {\n\t\t\t\t\t\ttarget.link(false);\n\t\t\t\t\t\ttarget.turnOver(false);\n\n\t\t\t\t\t\t// 并入上一项\n\t\t\t\t\t\tconst player = get.player();\n\t\t\t\t\t\tconst storage = player.storage.dichenmrfz;\n\t\t\t\t\t\tconst index = storage.length - 1;\n\t\t\t\t\t\tif (index <= 0) return;\n\n\t\t\t\t\t\tconst prevFunc = storage[index - 1];\n\t\t\t\t\t\tconst currentFunc = storage[index];\n\n\t\t\t\t\t\tstorage[index - 1] = target => {\n\t\t\t\t\t\t\tprevFunc(target);\n\t\t\t\t\t\t\tcurrentFunc(target);\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tstorage.splice(index, 1);\n\t\t\t\t\t},\n\t\t\t\t];\n\t\t\t},\n\t\t\taudio: 2,\n\t\t\tenable: \"phaseUse\",\n\t\t\tusable: 1,\n\t\t\tonremove: true,\n\t\t\tfilterTarget(card, player, target) {\n\t\t\t\tlet num = player.getAttackRange() - get.distance(player, target) + 1;\n\t\t\t\tlet prompt = num < player.storage.dichenmrfz.length ? `执行至第${num}项` : `执行所有项`;\n\t\t\t\tif (player.inRange(target) || target === player) target.showPrompt(prompt);\n\t\t\t\treturn player.inRange(target) || target === player;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet target = event.targets[0];\n\t\t\t\tlet storage = player.storage.dichenmrfz;\n\t\t\t\tlet num = Math.min(player.getAttackRange() - get.distance(player, target) + 1, 4);\n\t\t\t\tif (storage[0] && num > 0) storage[0](target);\n\t\t\t\tif (storage[1] && num > 1) storage[1](target);\n\t\t\t\tif (storage[2] && num > 2) storage[2](target);\n\t\t\t\tif (storage[3] && num > 3) storage[3](target);\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 7.49,\n\t\t\t\tresult: {\n\t\t\t\t\tplayer: 1,\n\t\t\t\t\ttarget(player, target) {\n\t\t\t\t\t\tlet storage = player.storage.dichenmrfz;\n\t\t\t\t\t\tlet x = Math.min(player.getAttackRange() - get.distance(player, target) + 1, 4);\n\t\t\t\t\t\tlet num = 1;\n\t\t\t\t\t\tif (get.attitude2(target) < 0) return 0;\n\t\t\t\t\t\tif (x >= storage.length && storage.length > 2) num += 5;\n\t\t\t\t\t\tif (target.hp < 2) num += 3;\n\t\t\t\t\t\tif (target.countCards(\"h\") < 3) num += 1;\n\t\t\t\t\t\tif (target.isTurnedOver()) num += 5;\n\t\t\t\t\t\tif (target.isLinked()) num += 0.5;\n\t\t\t\t\t\tif (target.hasSkill(\"zhuoxinmrfz\")) num += 0.5;\n\t\t\t\t\t\treturn num;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tzhuoxinmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\n\t\t\tfilter(event, player) {\n\t\t\t\treturn game.hasPlayer(current => {\n\t\t\t\t\treturn current !== player && get.distance(player, current) < 2 && player.canUse({ name: \"tuixinzhifu\" }, current);\n\t\t\t\t});\n\t\t\t},\n\t\t\tprompt(event, player, name) {\n\t\t\t\tgame.players.forEach(char => {\n\t\t\t\t\tif (get.distance(player, char) < 2 && char !== player && player.canUse({ name: \"tuixinzhifu\" }, char)) char.showPrompt(\"距离不大于2\");\n\t\t\t\t});\n\t\t\t\treturn get.prompt(\"zhuoxinmrfz\");\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tplayer\n\t\t\t\t\t.chooseToUse()\n\t\t\t\t\t.set(\"openskilldialog\", \"视为使用一张【推心置腹】\")\n\t\t\t\t\t.set(\"norestore\", true)\n\t\t\t\t\t.set(\"_backupevent\", \"zhuoxinmrfz_backup\")\n\t\t\t\t\t.set(\"custom\", {\n\t\t\t\t\t\tadd: {},\n\t\t\t\t\t\treplace: { window() {} },\n\t\t\t\t\t})\n\t\t\t\t\t.backup(\"zhuoxinmrfz_backup\");\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\tbackup: {\n\t\t\t\t\tfilterCard: () => false,\n\t\t\t\t\tfilterTarget(card, player, target) {\n\t\t\t\t\t\treturn target !== player && get.distance(player, target) < 2 && player.canUse({ name: \"tuixinzhifu\" }, target);\n\t\t\t\t\t},\n\t\t\t\t\tselectTarget: -1,\n\t\t\t\t\tselectCard: -1,\n\t\t\t\t\tlog: false,\n\t\t\t\t\tviewAs: {\n\t\t\t\t\t\tname: \"tuixinzhifu\",\n\t\t\t\t\t\tisCard: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t// 新术士阿米娅\n\t\tnewtongganmrfz: {\n\t\t\taudio: \"tongganmrfz\",\n\t\t\ttrigger: {\n\t\t\t\tglobal: \"phaseEnd\",\n\t\t\t},\n\t\t\tfindGainAndDiscardHistory() {\n\t\t\t\tlet result = {\n\t\t\t\t\tgain: [],\n\t\t\t\t\tdiscard: [],\n\t\t\t\t};\n\t\t\t\tgame.players.forEach(char => {\n\t\t\t\t\tchar.getHistory(\"gain\", evt => {\n\t\t\t\t\t\tif (evt.name === \"gain\") result.gain.add(char);\n\t\t\t\t\t});\n\t\t\t\t\tchar.getHistory(\"lose\", evt => {\n\t\t\t\t\t\tif (evt.type === \"discard\") result.discard.add(char);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\treturn result;\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\tlet result = lib.skill.newtongganmrfz.findGainAndDiscardHistory();\n\t\t\t\treturn (result.gain.length > 0 || result.discard.length > 0) && event.player !== player;\n\t\t\t},\n\t\t\tforced: true,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet { gain, discard } = lib.skill.newtongganmrfz.findGainAndDiscardHistory();\n\t\t\t\tawait player.draw(gain.length);\n\t\t\t\tif (discard.length) player.chooseToDiscard(discard.length, true, `【同感】:请弃置${discard.length}张牌`, \"he\");\n\t\t\t},\n\t\t},\n\t\tshijiemrfz: {\n\t\t\tmod: {\n\t\t\t\tcanBeDiscarded(card, target, player) {\n\t\t\t\t\tif (get.position(card) === \"h\" && player.countCards(\"h\") <= 5) return false;\n\t\t\t\t},\n\t\t\t},\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tplayer: [\"gainBegin\", \"loseBegin\"],\n\t\t\t},\n\t\t\tforced: true,\n\t\t\tfilter(event, player) {\n\t\t\t\treturn event.name === \"gain\" ? player.countCards(\"h\") >= 10 && event.getParent().name === \"draw\" : player.countCards(\"h\") <= 5 && event.type === \"discard\";\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tif (event.name === \"gain\") {\n\t\t\t\t\tlet cards = trigger.getParent().result;\n\t\t\t\t\tgame.cardsDiscard(cards);\n\t\t\t\t\tgame.log(player, \"取消了此次摸牌\");\n\t\t\t\t} else {\n\t\t\t\t\tgame.log(player, \"取消了此次弃牌\");\n\t\t\t\t}\n\t\t\t\ttrigger.cancel();\n\t\t\t},\n\t\t},\n\n\t\t// 新近卫阿米娅\n\t\tchenxianmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"phaseDrawBegin2\",\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\treturn game.countPlayer(current => current.getDamagedHp() > 0) > 0 && !event.numFixed;\n\t\t\t},\n\t\t\tprompt() {\n\t\t\t\treturn `【沉弦】:是否多摸${game.countPlayer(current => current.getDamagedHp() > 0)}张牌,然后其中每包含一张【万箭齐发】、【杀】或【酒】，你便弃置一张牌？`;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet num = game.countPlayer(current => current.getDamagedHp() > 0);\n\t\t\t\ttrigger.num += num;\n\t\t\t\tplayer.when({ player: \"phaseDrawAfter\" }).then(() => {\n\t\t\t\t\tlet cards = trigger.cards;\n\t\t\t\t\tlet num = cards.filter(card => {\n\t\t\t\t\t\treturn card.name === \"wanjian\" || card.name === \"sha\" || card.name === \"jiu\";\n\t\t\t\t\t}).length;\n\t\t\t\t\tif (num > 0) player.chooseToDiscard(\"he\", true, `【沉弦】:请弃置${get.cnNumber(num)}张牌`, num);\n\t\t\t\t});\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tthreaten: 2,\n\t\t\t},\n\t\t},\n\t\tbenyemrfz: {\n\t\t\taudio: \"amy_qingyanmrfz\",\n\t\t\tenable: \"phaseUse\",\n\t\t\tusable: 1,\n\t\t\tfilter(event, player) {\n\t\t\t\treturn game.hasPlayer(current => {\n\t\t\t\t\treturn current !== player && current.countCards(\"h\") > 0;\n\t\t\t\t});\n\t\t\t},\n\t\t\tfilterTarget(card, player, target) {\n\t\t\t\treturn target !== player && target.countCards(\"h\") > 0;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet target = event.targets[0];\n\t\t\t\tconst { cards } = await player\n\t\t\t\t\t.choosePlayerCard(target, \"h\")\n\t\t\t\t\t.set(\"prompt\", `【奔夜】:你可以使用其中一张【杀】或【顺手牵羊】`)\n\t\t\t\t\t.set(\"visible\", true)\n\t\t\t\t\t.set(\"filterButton\", button => {\n\t\t\t\t\t\tlet link = button.link;\n\t\t\t\t\t\treturn link.name === \"sha\" || link.name === \"shunshou\";\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"ai\", button => {\n\t\t\t\t\t\tlet link = button.link;\n\t\t\t\t\t\tlet player = get.player();\n\t\t\t\t\t\tlet max = 0;\n\t\t\t\t\t\tgame.players.forEach(char => {\n\t\t\t\t\t\t\tif (player.canUse(link, char)) {\n\t\t\t\t\t\t\t\tmax = Math.max(max, get.effect(char, link, player, player));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn max;\n\t\t\t\t\t})\n\t\t\t\t\t.forResult();\n\t\t\t\tif (!cards) return;\n\t\t\t\tif (player.hasUseTarget(cards[0])) {\n\t\t\t\t\tawait player.$gain2(cards[0], false);\n\t\t\t\t\tplayer.chooseUseTarget(cards[0]).set(\"addCount\", false);\n\t\t\t\t}\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 3,\n\t\t\t\tresult: {\n\t\t\t\t\tplayer: 1,\n\t\t\t\t\ttarget(player, target) {\n\t\t\t\t\t\tlet att = get.attitude(player, target);\n\t\t\t\t\t\treturn att > 0 ? 0 : -1 * target.countCards(\"h\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tnewjueyingmrfz: {\n\t\t\taudio: \"yingxiaomrfz\",\n\t\t\ttrigger: { global: \"phaseEnd\" },\n\t\t\tskillAnimation: true,\n\t\t\tanimationColor: \"red\",\n\t\t\tmark: true,\n\t\t\tunique: true,\n\t\t\tlimited: true,\n\t\t\tfilter: function (event, player) {\n\t\t\t\tlet color = new Set(\n\t\t\t\t\tget\n\t\t\t\t\t\t.discarded()\n\t\t\t\t\t\t.filter(card => card.name === \"sha\")\n\t\t\t\t\t\t.map(card => get.color(card))\n\t\t\t\t);\n\t\t\t\tif (color.size < 2) return false;\n\t\t\t\treturn !player.storage.newjueyingmrfz;\n\t\t\t},\n\t\t\tinit: (player, skill) => (player.storage[skill] = false),\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tplayer.awakenSkill(\"newjueyingmrfz\");\n\t\t\t\tplayer.storage.newjueyingmrfz = true;\n\n\t\t\t\tlet skills = player.getSkills(null, false, null).filter(skill => lib.translate[skill + \"_info\"]);\n\t\t\t\tlet awakenedSkills = player.awakenedSkills.filter(skill => lib.translate[skill + \"_info\"]);\n\t\t\t\tskills.add(...awakenedSkills);\n\t\t\t\tlet cards = [];\n\t\t\t\tlet names = {};\n\t\t\t\tlib.inpile.forEach(i => {\n\t\t\t\t\tnames[i] = get.translation(i);\n\t\t\t\t});\n\n\t\t\t\tlet pattern = new RegExp(Object.values(names).join(\"|\"), \"g\");\n\t\t\t\tskills.forEach(skill => {\n\t\t\t\t\tlet translate = lib.translate[skill + \"_info\"];\n\t\t\t\t\tlet matches = translate.match(pattern);\n\t\t\t\t\tif (matches) {\n\t\t\t\t\t\tlet arr = matches.map(match => {\n\t\t\t\t\t\t\treturn Object.keys(names).find(key => names[key] === match);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (arr.length > 0) {\n\t\t\t\t\t\t\tcards.push(...arr);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\twhile (cards.length) {\n\t\t\t\t\tlet card = { name: cards.shift(), isCard: true };\n\t\t\t\t\tif (player.hasUseTarget(card)) {\n\t\t\t\t\t\tawait player.chooseUseTarget(card).set(\"prompt2\", `待使用：${get.translation(cards)}`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t},\n};\n"],"names":["event","player","card","target","trigger","targets","cards","i","id","card2","cards2","num","evt","result","name","view","index","list","targets2","top","bottom","value","moved","next","suffixs","skills","skill","info","control","matrix","suits","showCards","str","pos","subtype","cardx"],"mappings":"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"}