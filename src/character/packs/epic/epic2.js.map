{"version":3,"file":"epic2.js","sources":["../../../../../../../../packages/extension/WhichWay/src/character/packs/epic/epic2.js"],"sourcesContent":["import { lib, game, ui, get, ai, _status } from \"noname\";\r\nimport { skillCustomFunc } from \"../../../nonameEx/custom/skill.ts\";\r\nimport { whichWayTips } from \"../../../tips/index.ts\";\r\nimport { whichWayToast } from \"../../../toast/index.ts\";\r\nimport { whichWayUtil } from \"../../../utill.js\";\r\n\r\nconst tmpSave = window.whichWaySave.tmpSave;\r\n\r\n/** @type {WhichWayCharacterPack} */\r\nexport default {\r\n\tcharacter: {\r\n\t\tshuidengxinmrfz: [\"female\", \"weimrfz\", 3, [\"sanyanmrfz\", \"dongqumrfz\"], []],\r\n\t\tmuqianmrfz: [\"female\", \"samrfz\", 4, [\"cangshimrfz\"], []],\r\n\t\talannamrfz: [\"female\", \"leimrfz\", 4, [\"qixiemrfz\"], []],\r\n\t\tlingyinmrfz: [\"female\", \"lamrfz\", 4, [\"qiansongmrfz\", \"qiancimrfz\"], []],\r\n\t\tdibimrfz: [\"female\", \"gemrfz\", 4, [\"penhuimrfz\"], []],\r\n\t\tChristinemrfz: [\"female\", \"weimrfz\", 3, [\"mixumrfz\", \"yashimrfz\"], []],\r\n\t\tspheijiaomrfz: [\"male\", \"luomrfz\", 3, [\"lianqimrfz\", \"juhemrfz\", \"denglongmrfz\"], []],\r\n\t\tyunqingpingmrfz: [\"male\", \"yanmrfz\", 4, [\"luwumrfz\", \"baizhaomrfz\"], []],\r\n\t\tsongtongmrfz: {\r\n\t\t\tsex: \"male\",\r\n\t\t\thp: 3,\r\n\t\t\tmaxHp: 4,\r\n\t\t\tgroup: \"dongmrfz\",\r\n\t\t\tskills: [\"xianchoumrfz\"],\r\n\t\t},\r\n\t\tjixingmrfz: {\r\n\t\t\tsex: \"female\",\r\n\t\t\thp: 4,\r\n\t\t\tgroup: \"dongmrfz\",\r\n\t\t\tskills: [\"tiandingmrfz\", \"renweimrfz\"],\r\n\t\t},\r\n\t\tlandumrfz: {\r\n\t\t\tsex: \"female\",\r\n\t\t\thp: 3,\r\n\t\t\tgroup: \"yimrfz\",\r\n\t\t\tskills: [\"landu_shixinmrfz\", \"picaimrfz\"],\r\n\t\t},\r\n\t\truoyemumrfz: {\r\n\t\t\tsex: \"female\",\r\n\t\t\tgroup: \"othermrfz\",\r\n\t\t\thp: 1,\r\n\t\t\tmaxHp: 3,\r\n\t\t\tskills: [\"lingwomrfz\", \"pojianmrfz\", \"wuweimrfz\"],\r\n\t\t\tclans: [\"AveMujica\"],\r\n\t\t},\r\n\t\tyoutiansiruomaimrfz: {\r\n\t\t\tsex: \"female\",\r\n\t\t\tgroup: \"othermrfz\",\r\n\t\t\thp: 4,\r\n\t\t\tskills: [\"leigumrfz\", \"jiaoyingmrfz\", \"wuweimrfz\"],\r\n\t\t\tclans: [\"AveMujica\"],\r\n\t\t},\r\n\t\tsanjiaochuhuamrfz: {\r\n\t\t\tsex: \"female\",\r\n\t\t\tgroup: \"othermrfz\",\r\n\t\t\thp: 5,\r\n\t\t\tskills: [\"weimianmrfz\", \"weiquanmrfz\", \"wuweimrfz\"],\r\n\t\t\tclans: [\"AveMujica\"],\r\n\t\t},\r\n\t\tbafanhailingmrfz: {\r\n\t\t\tsex: \"female\",\r\n\t\t\tgroup: \"othermrfz\",\r\n\t\t\thp: 3,\r\n\t\t\tskills: [\"chendiemrfz\", \"umiri_chenxianmrfz\", \"wuweimrfz\"],\r\n\t\t\tclans: [\"AveMujica\"],\r\n\t\t},\r\n\t\tinnamrfz: {\r\n\t\t\tsex: \"female\",\r\n\t\t\tgroup: \"othermrfz\",\r\n\t\t\thp: 3,\r\n\t\t\tskills: [\"guiyingmrfz\", \"sheguomrfz\"],\r\n\t\t},\r\n\t\tfengwanmrfz: {\r\n\t\t\tsex: \"female\",\r\n\t\t\tgroup: \"dongmrfz\",\r\n\t\t\thp: 3,\r\n\t\t\tskills: [\"zhiyimrfz\", \"huayingmrfz\"],\r\n\t\t},\r\n\t\tzheyamrfz: {\r\n\t\t\tsex: \"female\",\r\n\t\t\tgroup: \"wumrfz\",\r\n\t\t\thp: 3,\r\n\t\t\tskills: [\"mingzhongmrfz\", \"zhiyanmrfz\", \"hanshengmrfz\"],\r\n\t\t},\r\n\t\tyelamrfz: {\r\n\t\t\tsex: \"female\",\r\n\t\t\tgroup: \"xiemrfz\",\r\n\t\t\thp: 4,\r\n\t\t\tskills: [\"shengshimrfz\", \"xueweimrfz\"],\r\n\t\t},\r\n\t\thadiyamrfz: {\r\n\t\t\tsex: \"female\",\r\n\t\t\tgroup: \"samrfz\",\r\n\t\t\thp: 4,\r\n\t\t\tskills: [\"juetumrfz\"],\r\n\t\t},\r\n\t\txueliemrfz: {\r\n\t\t\tsex: \"female\",\r\n\t\t\tgroup: \"xiemrfz\",\r\n\t\t\thp: 4,\r\n\t\t\tskills: [\"queliemrfz\", \"liexuemrfz\"],\r\n\t\t},\r\n\t\ttiankonghemrfz: {\r\n\t\t\tsex: \"male\",\r\n\t\t\tgroup: \"gemrfz\",\r\n\t\t\thp: 4,\r\n\t\t\tskills: [\"souchamrfz\", \"tiankonghe_zhenlimrfz\"],\r\n\t\t},\r\n\t\tbaidurenmrfz: {\r\n\t\t\tsex: \"male\",\r\n\t\t\tgroup: \"mimrfz\",\r\n\t\t\thp: 4,\r\n\t\t\tskills: [\"wenchoumrfz\"],\r\n\t\t},\r\n\t\txiangshimrfz: {\r\n\t\t\tsex: \"female\",\r\n\t\t\tgroup: \"gemrfz\",\r\n\t\t\thp: 3,\r\n\t\t\tskills: [\"xuanshuimrfz\", \"pozemrfz\"],\r\n\t\t\tdesigner: [\"培嵩\", \"林登万\"],\r\n\t\t},\r\n\t\tsptiaoxiangshimrfz: {\r\n\t\t\tsex: \"female\",\r\n\t\t\tgroup: \"samrfz\",\r\n\t\t\thp: 3,\r\n\t\t\tskills: [\"youchenmrfz\", \"biaodaomrfz\"],\r\n\t\t\tdesigner: [\"涵涵\"],\r\n\t\t},\r\n\t},\r\n\tskill: {\r\n\t\t//撷英调香师\r\n\t\tyouchenmrfz: {\r\n\t\t\taudio: [\"作战中1\", \"作战中2\"],\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") >= 2 && game.hasPlayer(c => c !== player && c.countCards(\"he\") >= 2);\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tmark: function (dialog, storage, player) {\r\n\t\t\t\t\tif (!storage) return `·没有使用过【诱嗔】`;\r\n\t\t\t\t\tdialog.addText(`·首次【诱嗔】的角色：${get.translation(storage)}`);\r\n\t\t\t\t\tdialog.addSmall([[storage].slice().map(i=>i.name), \"character\"]);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tevent.result = await player\r\n\t\t\t\t\t.chooseTarget()\r\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"youchenmrfz\"))\r\n\t\t\t\t\t.set(\"prompt2\", get.skillInfoTranslation(\"youchenmrfz\"))\r\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\r\n\t\t\t\t\t\treturn player !== target && target.countCards(\"he\") >= 2;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\r\n\t\t\t\t\t\t\"ai\",\r\n\t\t\t\t\t\t/** @param {Player} target  */\r\n\t\t\t\t\t\ttarget => {\r\n\t\t\t\t\t\t\tconst player = get.player();\r\n\t\t\t\t\t\t\tif (player.countCards(\"he\", card => get.value(card) < 8) < 2) return -1;\r\n\t\t\t\t\t\t\tif (get.attitude(player, target) > 0) return -1;\r\n\t\t\t\t\t\t\treturn 1145141919810 - target.countCards(\"he\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\ttargets: [target],\r\n\t\t\t\t} = event;\r\n\t\t\t\tif (!target) return;\r\n\t\t\t\tfor (let char of [target, player].sort(lib.sort.seat)) {\r\n\t\t\t\t\tawait char.chooseToDiscard(\"he\", true, `【诱嗔】:请弃置两张牌`, 2).set(\"ai\", card => -get.value(card));\r\n\t\t\t\t}\r\n\t\t\t\tif (!player.isMaxHandcard(false)) await player.draw(2);\r\n\t\t\t\tif (!player.storage.youchenmrfz) {\r\n\t\t\t\t\tplayer.storage.youchenmrfz = target;\r\n\t\t\t\t\ttarget.addSkill(\"biaodaomrfz_distance\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst playerx = player;\r\n\r\n\t\t\t\ttarget.when({ player: \"useCardAfter\", global: \"roundStart\" }).step(async (event, trigger, player) => {\r\n\t\t\t\t\tif (trigger.name === \"useCard\") {\r\n\t\t\t\t\t\tif (!trigger.targets) discard();\r\n\t\t\t\t\t\tif (!trigger.targets.includes(playerx)) discard();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfunction discard() {\r\n\t\t\t\t\t\tplayer.chooseToDiscard(\"he\", true, `【诱嗔】:请弃置一张牌`);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t},\r\n\t\t},\r\n\t\tbiaodaomrfz: {\r\n\t\t\tforced: true,\r\n\t\t\taudio: [\"作战中3\", \"作战中4\"],\r\n\t\t\tderivation: [\"clananran\"],\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tgame.broadcastAll(player => {\r\n\t\t\t\t\tlet info = get.info(\"clananran\");\r\n\t\t\t\t\tif (!info.audioname2) info.audioname2 = {};\r\n\t\t\t\t\tinfo.audioname2[player.name] = \"biaodaomrfz\";\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t}, player);\r\n\t\t\t\tplayer.storage[skill] = 0;\r\n\t\t\t},\r\n\t\t\tgroup: [\"clananran\",\"biaodaomrfz_clearTips\"],\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"loseAfter\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tconst target = player.storage.youchenmrfz;\r\n\t\t\t\treturn target && target.isAlive() && player.countCards(\"h\") - target.countCards(\"h\") < 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.refreshSkill(\"clananran\");\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * @type {Player}\r\n\t\t\t\t */\r\n\t\t\t\tconst target = player.storage.youchenmrfz;\r\n\t\t\t\tif (!target) return;\r\n\r\n\t\t\t\tlet index;\r\n\r\n\t\t\t\tif (player.storage.biaodaomrfz > 2) index = 0;\r\n\t\t\t\telse {\r\n\t\t\t\t\tconst result = await target\r\n\t\t\t\t\t\t.chooseControl(\"获得护甲\", \"增加距离\")\r\n\t\t\t\t\t\t.set(\"prompt\", `【镳道】:请选择一项`)\r\n\t\t\t\t\t\t.set(\"displayIndex\", false)\r\n\t\t\t\t\t\t.set(\"choiceList\", [`获得护甲:你与${get.translation(player)}各获得一点护甲值`, `增加距离:你与${get.translation(player)}计算与对方的距离+1（当前+${player.storage.biaodaomrfz}）`])\r\n\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\tconst player = get.player();\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tconst target = get.event().targetx;\r\n\t\t\t\t\t\t\tif (get.attitude(player, target) > 0 || player.hp <= 2) return 0;\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"targetx\", target)\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (typeof result.index === \"number\") index = result.index;\r\n\t\t\t\t\telse index = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tswitch (index) {\r\n\t\t\t\t\tcase 0: {\r\n\t\t\t\t\t\t[player, target].sort(lib.sort.seat).forEach(char => char.changeHujia(1));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcase 1: {\r\n\t\t\t\t\t\tplayer.storage.biaodaomrfz += 1;\r\n\t\t\t\t\t\twhichWayTips.addPrompt(player, `与${get.translation(target)}的距离+${player.storage.biaodaomrfz}`,\"biaodaomrfz_distance\")\r\n\t\t\t\t\t\twhichWayTips.addPrompt(target, `与${get.translation(player)}的距离+${player.storage.biaodaomrfz}`,\"biaodaomrfz_distance\")\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmod:{\r\n\t\t\t\tglobalFrom(from, to, num) {\r\n\t\t\t\t\tconst target = from?.storage?.youchenmrfz;\r\n\t\t\t\t\tif(target && to === target && typeof from.storage.biaodaomrfz === \"number\"){\r\n\t\t\t\t\t\treturn num + from.storage.biaodaomrfz;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclearTips:{\r\n\t\t\t\t\ttrigger:{\r\n\t\t\t\t\t\tglobal:\"dieAfter\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent:true,\r\n\t\t\t\t\tcharlotte:true,\r\n\t\t\t\t\tforceDie:true,\r\n\t\t\t\t\tfilter(event,player){\r\n\t\t\t\t\t\treturn [player, player.storage.youchenmrfz].includes(event.player);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event,trigger,player){\r\n\t\t\t\t\t\twhichWayTips.removePrompt(player, \"biaodaomrfz_distance\");\r\n\t\t\t\t\t\tif(player.storage.youchenmrfz) whichWayTips.removePrompt(player.storage.youchenmrfz, \"biaodaomrfz_distance\");\r\n\t\t\t\t\t\tdelete player.storage.youchenmrfz;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tdistance: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tglobalFrom(from, to, num) {\r\n\t\t\t\t\t\t\tconst target = to?.storage?.youchenmrfz;\r\n\t\t\t\t\t\t\tif (target && from === target && typeof to.storage.biaodaomrfz === \"number\") {\r\n\t\t\t\t\t\t\t\treturn num + to.storage.biaodaomrfz;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//响石\r\n\t\txuanshuimrfz: {\r\n\t\t\taudio: [\"作战中1\", \"作战中2\", \"作战中3\"],\r\n\t\t\tzhuanhuanji(player, skill) {\r\n\t\t\t\tif (!player.storage.xuanshuimrfz) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tlib.skill.xuanshuimrfz.init(player, skill);\r\n\t\t\t\t}\r\n\t\t\t\tlet storage = player.storage.xuanshuimrfz;\r\n\t\t\t\tif (storage.index >= 3) storage.index = 0;\r\n\t\t\t\telse storage.index += 1;\r\n\t\t\t\tlib.skill.xuanshuimrfz.updateSuit(player);\r\n\t\t\t},\r\n\t\t\t/**@param {Player} player  */\r\n\t\t\tupdateSuit(player) {\r\n\t\t\t\tgame.broadcastAll(player => {\r\n\t\t\t\t\tlib.translate[`xuanshuimrfz_bg`] = get.translation(lib.skill.xuanshuimrfz.suitList[player.storage.xuanshuimrfz.index || 0]);\r\n\t\t\t\t\tconst ui = player.marks?.xuanshuimrfz?.querySelector(\".background.skillmark\");\r\n\t\t\t\t\tif (ui) {\r\n\t\t\t\t\t\tui.innerHTML = lib.translate[`xuanshuimrfz_bg`];\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t}, player);\r\n\t\t\t},\r\n\t\t\t/**@param {Player} player  */\r\n\t\t\tgetUsedSuit(player) {\r\n\t\t\t\tconst used = [];\r\n\t\t\t\tconst histroies = player.getHistory(\"useSkill\", evt => evt.skill === \"xuanshuimrfz\");\r\n\t\t\t\tfor (const history of histroies) {\r\n\t\t\t\t\tconst event = history.event;\r\n\t\t\t\t\t/** @type {GameEvent} */\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tconst evt = event.getParent(2);\r\n\t\t\t\t\tif (Object.keys(evt).length > 0 && evt !== null && evt.card) {\r\n\t\t\t\t\t\tif (lib.skill.xuanshuimrfz.suitList.includes(get.suit(evt.card))) used.add(get.suit(evt.card));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn used;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = {\r\n\t\t\t\t\tindex: 0,\r\n\t\t\t\t\tget used() {\r\n\t\t\t\t\t\treturn lib.skill.xuanshuimrfz.getUsedSuit(player);\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t\tlib.skill.xuanshuimrfz.updateSuit(player);\r\n\t\t\t},\r\n\t\t\tsuitList: [\"spade\", \"club\", \"heart\", \"diamond\"],\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent(storage, player) {\r\n\t\t\t\t\treturn `·当前花色:${get.translation(lib.skill.xuanshuimrfz.suitList[player.storage.xuanshuimrfz.index || 0])}<br>·已使用花色:${get.translation(player.storage.xuanshuimrfz.used)}`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCard1\",\r\n\t\t\t},\r\n\t\t\tprompt(event) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tconst num = lib.skill.xuanshuimrfz.suitList.indexOf(get.suit(event.card)) || 0;\r\n\t\t\t\treturn `【旋说】:是否摸${num + 1}张牌`;\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn _status.currentPhase === player;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet used = player.storage.xuanshuimrfz.used;\r\n\t\t\t\tif (used.length >= 4) {\r\n\t\t\t\t\tplayer.disableSkill(\"xuanshuimrfz\", [\"xuanshuimrfz\"]);\r\n\t\t\t\t\tplayer.when({ global: \"phaseEnd\" }).step(async (event, trigger, player) => {\r\n\t\t\t\t\t\tplayer.enableSkill(\"xuanshuimrfz\");\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (get.is.zhuanhuanji(\"xuanshuimrfz\", player)) {\r\n\t\t\t\t\tconst num = player.storage.xuanshuimrfz.index + 1 || 1;\r\n\t\t\t\t\tplayer.changeZhuanhuanji(\"xuanshuimrfz\");\r\n\t\t\t\t\tplayer.draw(num);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst num = lib.skill.xuanshuimrfz.suitList.indexOf(get.suit(trigger.card));\r\n\t\t\t\t\tif (num !== -1) player.draw(num + 1);\r\n\t\t\t\t\tlib.skill.xuanshuimrfz.updateSuit(player);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tcardEnabled(card, player) {\r\n\t\t\t\t\tconst suit = lib.skill.xuanshuimrfz.suitList[player.storage.xuanshuimrfz.index || 0];\r\n\t\t\t\t\tif (get.suit(card) !== suit && lib.skill.xuanshuimrfz.forced === true && _status.currentPhase === player) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcardSavable(card, player) {\r\n\t\t\t\t\tconst suit = lib.skill.xuanshuimrfz.suitList[player.storage.xuanshuimrfz.index || 0];\r\n\t\t\t\t\tif (get.suit(card) !== suit && lib.skill.xuanshuimrfz.forced === true && _status.currentPhase === player) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tpozemrfz: {\r\n\t\t\taudio: [\"部署2\", \"进驻设施\"],\r\n\t\t\tlimited: true,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tonremove: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tconst skills = player.getOriginalSkills().filter(skill => {\r\n\t\t\t\t\tconst info = get.info(skill);\r\n\t\t\t\t\treturn Object.keys(info).some(key => [\"forced\", \"zhuanhuanji\", \"juexingji\", \"limited\"].includes(key));\r\n\t\t\t\t});\r\n\t\t\t\treturn player.storage.pozemrfz !== true && skills.length > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.awakenSkill(\"pozemrfz\");\r\n\r\n\t\t\t\tconst skills = player.getOriginalSkills().filter(skill => {\r\n\t\t\t\t\tconst info = get.info(skill);\r\n\t\t\t\t\t//就这么多吧，其它的技能标签懒得加了\r\n\t\t\t\t\treturn Object.keys(info).some(key => [\"forced\", \"locked\", \"zhuanhuanji\", \"juexingji\", \"limited\", \"dutySkill\"].includes(key));\r\n\t\t\t\t});\r\n\t\t\t\tconst { index } = await player\r\n\t\t\t\t\t.chooseControl(skills.map(skill => get.translation(skill)))\r\n\t\t\t\t\t.set(\r\n\t\t\t\t\t\t\"choiceList\",\r\n\t\t\t\t\t\tskills.map(skill => `${get.translation(skill)}:${get.skillInfoTranslation(skill)}`)\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"displayIndex\", false)\r\n\t\t\t\t\t.set(\"prompt\", `请选择你要删除标签的技能`)\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tconst { skills, player } = get.event();\r\n\t\t\t\t\t\tif (!skills.includes(\"xuanshuimrfz\")) return \"pozemrfz\";\r\n\t\t\t\t\t\tif (player.countCards(\"he\", \"zhuge\") > 0 || player.countCards(\"h\", card => get.type(card) === \"equip\" || get.type(card) === \"trick\") > 2) return \"xuanshuimrfz\";\r\n\t\t\t\t\t\tif (player.hp <= 1) return \"xuanshuimrfz\";\r\n\t\t\t\t\t\treturn \"pozemrfz\";\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"skills\", skills)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (typeof index === \"number\") {\r\n\t\t\t\t\tlet num = 0;\r\n\t\t\t\t\tconst skill = skills[index];\r\n\t\t\t\t\tlet info = get.info(skill);\r\n\t\t\t\t\ttmpSave[`${player.playerid}_pozemrfz`] = { name: skill, info: { ...info } };\r\n\r\n\t\t\t\t\tconst tags = [\"forced\", \"locked\", \"zhuanhuanji\", \"juexingji\", \"limited\", \"dutySkill\"];\r\n\r\n\t\t\t\t\ttags.forEach(tag => {\r\n\t\t\t\t\t\tif (info[tag]) {\r\n\t\t\t\t\t\t\tnum++;\r\n\t\t\t\t\t\t\tif (tag === \"limited\") player.restoreSkill(skill);\r\n\t\t\t\t\t\t\tdelete info[tag];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (num > 0) player.draw(num);\r\n\r\n\t\t\t\t\tplayer.when({ player: \"phaseEnd\", global: \"phaseEnd\" }).step(async (event, trigger, player) => {\r\n\t\t\t\t\t\tconst save = tmpSave[`${player.playerid}_pozemrfz`];\r\n\t\t\t\t\t\tif (save && Object.keys(save).length > 0) {\r\n\t\t\t\t\t\t\tlib.skill[save.name] = save.info;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//摆渡人\r\n\t\twenchoumrfz: {\r\n\t\t\taudio: [\"作战中3\", \"作战中4\", \"作战中1\", \"作战中2\"],\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseChange\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"he\", card => player.canRecast(card)) > 0;\r\n\t\t\t},\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = 4;\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tevent.result = await player\r\n\t\t\t\t\t.chooseCard(\"he\")\r\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"wenchoumrfz\"))\r\n\t\t\t\t\t.set(\"prompt2\", whichWayUtil.colorize(`你可以重铸一张牌,若你重铸的牌是：<br>①【杀】或武器牌：令包含你在内的至多两名角色将手牌调整至#r${player.storage.wenchoumrfz || 4}#并跳过此阶段；<br>②非伤害类基本牌：你视为使用一张无距离和次数限制的【杀】，然后此技能本回合失效，并令此技能中的红色数字-1。`))\r\n\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\tconst player = get.player(),\r\n\t\t\t\t\t\t\tnum = player.storage.wenchoumrfz || 4,\r\n\t\t\t\t\t\t\tval = get.value(card);\r\n\t\t\t\t\t\tlet res = 8 - val;\r\n\t\t\t\t\t\tif (get.subtype(card) === \"equip1\" || get.name(card) === \"sha\") {\r\n\t\t\t\t\t\t\tif (player.countCards(\"h\") < num) res += 2;\r\n\t\t\t\t\t\t\telse res -= player.countCards(\"h\") - num;\r\n\r\n\t\t\t\t\t\t\tif (game.hasPlayer(char => get.attitude2(char) > 0 && char.countCards(\"h\") < num)) res += 2;\r\n\t\t\t\t\t\t\tif (game.hasPlayer(char => get.attitude2(char) < 0 && char.countCards(\"h\") >= num)) res += 2;\r\n\t\t\t\t\t\t} else if (get.type(card) === \"basic\" && !get.tag(card, \"damage\")) {\r\n\t\t\t\t\t\t\tres -= 4 - num;\r\n\t\t\t\t\t\t\tlet tmp_res = 0;\r\n\t\t\t\t\t\t\tfor (const char of game.players) {\r\n\t\t\t\t\t\t\t\ttmp_res = Math.max(tmp_res, get.effect(char, { name: \"sha\" }, player, player));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tres += tmp_res;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"filterCard\", card => get.player().canRecast(card))\r\n\t\t\t\t\t.forResult();\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tcards: [card],\r\n\t\t\t\t} = event;\r\n\t\t\t\tif (!card) return;\r\n\t\t\t\tawait player.recast(card);\r\n\t\t\t\tif (get.subtype(card) === \"equip1\" || get.name(card) === \"sha\") {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.skip(trigger.phaseList[trigger.num]);\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tgame.log(player, \"跳过了\", get.translation(trigger.phaseList[trigger.num]));\r\n\t\t\t\t\tconst {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttargets: [target],\r\n\t\t\t\t\t} = await player\r\n\t\t\t\t\t\t.chooseTarget(true, [0, 1])\r\n\t\t\t\t\t\t.set(\"prompt\", whichWayUtil.colorize(`【问丑】：请选择一名其他角色，令其和#r你#将手牌调整至${player.storage.wenchoumrfz || 4}`))\r\n\t\t\t\t\t\t.set(\"prompt2\", whichWayUtil.colorize(`#s或许，旧时的恩怨已经结束了#`))\r\n\t\t\t\t\t\t.set(\"filterTarget\", lib.filter.notMe)\r\n\t\t\t\t\t\t.set(\r\n\t\t\t\t\t\t\t\"ai\",\r\n\t\t\t\t\t\t\t/**@param {Player} target */ target => {\r\n\t\t\t\t\t\t\t\tconst player = get.player();\r\n\t\t\t\t\t\t\t\tconst num = player.storage.wenchoumrfz || 4;\r\n\t\t\t\t\t\t\t\tconst att = get.attitude2(target) > 0 ? 1 : -1;\r\n\t\t\t\t\t\t\t\treturn att * (num - target.countCards(\"h\"));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (!target) return;\r\n\t\t\t\t\t[target, player].sort(lib.sort.seat).forEach(i => adjust(i));\r\n\t\t\t\t\t/**@param {Player} target */\r\n\t\t\t\t\tfunction adjust(target) {\r\n\t\t\t\t\t\tconst num = player.storage.wenchoumrfz || 4;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (target.countCards(\"h\") < num) target.drawTo(num);\r\n\t\t\t\t\t\telse if (target.countCards(\"h\") > num) {\r\n\t\t\t\t\t\t\ttarget\r\n\t\t\t\t\t\t\t\t.chooseToDiscard(target.countCards(\"h\") - num, true)\r\n\t\t\t\t\t\t\t\t.set(\"ai\", card => -get.value(card))\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", `【问仇】：将手牌调整至${num}张`)\r\n\t\t\t\t\t\t\t\t.set(\"prompt2\", whichWayUtil.colorize(`#s化干戈为玉帛，也是需要代价的#`));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (get.type(card) === \"basic\" && !get.tag(card, \"damage\")) {\r\n\t\t\t\t\tawait player.chooseUseTarget({ name: \"sha\", isCard: true }).set(\"forced\", true).set(\"addCount\", false).set(\"nodistance\", true).set(\"prompt\", \"你视为使用一张无距离和次数限制的【杀】，然后此技能本回合失效\").set(\"prompt2\", whichWayUtil.colorize(`#s血债血偿！#`));\r\n\t\t\t\t\tplayer.storage.wenchoumrfz--;\r\n\t\t\t\t\tplayer.disableSkill(\"wenchoumrfz\", [\"wenchoumrfz\"]);\r\n\t\t\t\t\tplayer.when({ global: \"phaseEnd\" }).step(async (event, trigger, player) => {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.enableSkill(\"wenchoumrfz\");\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//天空盒\r\n\t\tsouchamrfz: {\r\n\t\t\taudio: [\"任命队长\", \"行动开始\"],\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"damageEnd\",\r\n\t\t\t\tsource: \"damageSource\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\t/** @type {Player} */\r\n\t\t\t\tconst source = event.source;\r\n\t\t\t\tif (source === player) return event.player && event.player.isIn() && player.canCompare(event.player);\r\n\t\t\t\treturn source && source.isIn() && player.canCompare(source);\r\n\t\t\t},\r\n\t\t\tprompt2(event) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\treturn `你可以与${get.translation(get.player() === event.player ? event.player : event.source)}拼点,若你赢,你观看其手牌并获得其中一张牌`;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst target = trigger.source === player ? trigger.player : trigger.source;\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t.chooseToCompare(target)\r\n\t\t\t\t\t.set(\"prompt\", `【搜查】：请选择一张手牌与${get.translation(target)}拼点`)\r\n\t\t\t\t\t.set(\"forced\", true)\r\n\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\tconst player = get.player();\r\n\t\t\t\t\t\tlet max;\r\n\t\t\t\t\t\tfor (let card of player.getCards(\"h\")) {\r\n\t\t\t\t\t\t\tif (!max) max = card;\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tif (get.number(max) <= get.number(card)) max = get.value(card) > get.number(max) ? max : card;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn card === max ? 1 : 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!result) return;\r\n\t\t\t\tif (result.winner === player) {\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.gainPlayerCard(target, true, \"h\")\r\n\t\t\t\t\t\t.set(\"visible\", true)\r\n\t\t\t\t\t\t.set(\"filterButton\", () => true)\r\n\t\t\t\t\t\t.set(\"prompt\", `获得${get.translation(target)}的一张手牌`);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\ttiankonghe_zhenlimrfz: {\r\n\t\t\taudio: [\"作战中3\", \"作战中4\"],\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"compare\",\r\n\t\t\t\ttarget: \"compare\",\r\n\t\t\t},\r\n\t\t\tusable: 1,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (event.player === player && event.num1 > event.num2) return false;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (event.player !== player && event.num1 < event.num2) return false;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\treturn !event.iwhile;\r\n\t\t\t},\r\n\t\t\tcheck(event) {\r\n\t\t\t\tlet player = get.player();\r\n\t\t\t\treturn game.hasPlayer(char => char !== player && get.effect(char, { name: \"sha\" }, player, player) > 0 && event.list.includes(char));\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t/** @type {Array<Player>} */\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tconst targets = trigger.list.filter(char => char !== player);\r\n\t\t\t\tconst random = whichWayUtil.getRandomNumber();\r\n\t\t\t\tawait player\r\n\t\t\t\t\t.chooseUseTarget({ name: \"sha\", isCard: true, storage: { tiankonghe_zhenlimrfz: random } })\r\n\t\t\t\t\t.set(\"forced\", true)\r\n\t\t\t\t\t.set(\"addCount\", false)\r\n\t\t\t\t\t.set(\"nodistance\", true)\r\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => targets.includes(target))\r\n\t\t\t\t\t.set(\"prompt\", `【真理】:对参与拼点的其他角色视为使用一张【杀】`);\r\n\t\t\t\tif (player.hasHistory(\"sourceDamage\", evt => evt.card && evt.card?.storage.tiankonghe_zhenlimrfz === random)) {\r\n\t\t\t\t\ttrigger[trigger.player === player ? \"num1\" : \"num2\"] += 1908;\r\n\t\t\t\t\tgame.log(whichWayUtil.colorize(`#r天空管理局突击中#`));\r\n\t\t\t\t\tgame.log(player, \"的拼点牌点数+1908\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//雪猎\r\n\t\tqueliemrfz: {\r\n\t\t\taudio: [\"闲置\", \"行动出发\"],\r\n\t\t\ttrigger: {\r\n\t\t\t\tsource: \"damageSource\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.getHistory(\"sourceDamage\", evt => evt !== event).length > 0 && event.player.isIn();\r\n\t\t\t},\r\n\t\t\tcheck(event) {\r\n\t\t\t\treturn get.attitude(get.player(), event.player) > 0;\r\n\t\t\t},\r\n\t\t\tprompt2(event) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\treturn `你可以令${get.translation(event.player)}回复${event.num}点体力？`;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet target = trigger.player;\r\n\t\t\t\ttarget.recover(trigger.num);\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\ttarget.markSkill(\"queliemrfz\", {\r\n\t\t\t\t\tcontent: `下次获得牌后，${get.translation(player)}摸等量的牌`,\r\n\t\t\t\t});\r\n\t\t\t\tif (\r\n\t\t\t\t\ttarget.getSkills().filter(skill => {\r\n\t\t\t\t\t\tlet info = get.info(skill);\r\n\t\t\t\t\t\treturn info && info.queliemrfz_release;\r\n\t\t\t\t\t}).length < 1\r\n\t\t\t\t)\r\n\t\t\t\t\ttarget\r\n\t\t\t\t\t\t.when({ player: \"gainAfter\" })\r\n\t\t\t\t\t\t.step(async (event, trigger, playerx) => {\r\n\t\t\t\t\t\t\tif (player.isIn()) {\r\n\t\t\t\t\t\t\t\tplayer.draw(trigger.cards.length);\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tplayer.logSkill(\"queliemrfz\", playerx);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayerx.unmarkSkill(\"queliemrfz\");\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.assign({\r\n\t\t\t\t\t\t\tqueliemrfz_release: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t},\r\n\t\tliexuemrfz: {\r\n\t\t\taudio: [\"作战中1\", \"作战中4\"],\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * @param { Player } player\r\n\t\t\t * @param { Player } target\r\n\t\t\t */\r\n\t\t\tgetTargets(player, target) {\r\n\t\t\t\tif (target === player) return [];\r\n\r\n\t\t\t\tconst clockwise = [],\r\n\t\t\t\t\tanticlockwise = [];\r\n\t\t\t\tlet current;\r\n\t\t\t\t//优先逆时针找，再顺时针找，最后取角色最多的边，若相同则取逆时针的一边\r\n\t\t\t\twhile (true) {\r\n\t\t\t\t\tif (current === target) break;\r\n\t\t\t\t\telse current = current ? current.getNext() : player.getNext();\r\n\r\n\t\t\t\t\tanticlockwise.push(current);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcurrent = null;\r\n\t\t\t\twhile (true) {\r\n\t\t\t\t\tif (current === target) break;\r\n\t\t\t\t\telse current = current ? current.getPrevious() : player.getPrevious();\r\n\r\n\t\t\t\t\tclockwise.push(current);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn clockwise.length > anticlockwise.length ? clockwise : anticlockwise;\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.card.name === \"sha\" && event.targets && event.targets.length === 1 && lib.skill.liexuemrfz.getTargets(player, event.targets[0]).length > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet targets = lib.skill.liexuemrfz.getTargets(player, trigger.targets[0]);\r\n\t\t\t\ttrigger.targets.addArray(targets);\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.line(targets);\r\n\t\t\t},\r\n\t\t\tgroup: [\"liexuemrfz_direct\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdirect: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCard\",\r\n\t\t\t\t\t\tsource: \"damageBegin3\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tconst neighbour = [player.getPrevious(), player.getNext()];\r\n\t\t\t\t\t\tif (event.name === \"damage\") return event.card && event.card.name === \"sha\" && !event.numFixed && neighbour.includes(event.player);\r\n\t\t\t\t\t\treturn event.card.name === \"sha\" && event.targets.some(t => neighbour.includes(t));\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (trigger.name === \"damage\") trigger.num += 1;\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\t\t\t\treturn current != player && [player.getPrevious(), player.getNext()].includes(current);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\t\t\tskillTagFilter(player, tag, arg) {\r\n\t\t\t\t\t\t\treturn [player.getPrevious(), player.getNext()].includes(arg.target);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//哈蒂娅\r\n\t\tjuetumrfz: {\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = {\r\n\t\t\t\t\tdraw: 3,\r\n\t\t\t\t\trecord: [],\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tintro: {\r\n\t\t\t\tcontent(storage) {\r\n\t\t\t\t\tif (!storage) return `无信息`;\r\n\t\t\t\t\treturn `·获胜过的点数：${storage.record.length > 0 ? storage.record.join(\"、\") : \"无\"}`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\taudio: [\"作战中1\", \"作战中2\"],\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tfilterTarget(card, target, player) {\r\n\t\t\t\treturn player.canCompare(target, true);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\ttargets: [target],\r\n\t\t\t\t} = event;\r\n\t\t\t\tawait player.draw(player.storage.juetumrfz.draw);\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tconst result = await player.chooseToCompare().set(\"target\", target).forResult();\r\n\t\t\t\tconst { num1, winner } = result;\r\n\t\t\t\tif (winner === player && !player.storage.juetumrfz.record.includes(num1)) {\r\n\t\t\t\t\tplayer.storage.juetumrfz.record.add(num1);\r\n\t\t\t\t\tplayer.storage.juetumrfz.draw++;\r\n\t\t\t\t\tplayer.popup(\"数字+1\");\r\n\t\t\t\t} else if (winner !== player) {\r\n\t\t\t\t\tif (player.storage.juetumrfz.draw > 1) player.storage.juetumrfz.draw--;\r\n\t\t\t\t\tplayer.popup(\"数字-1\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (winner !== player) player.damage(target);\r\n\t\t\t\tif (winner !== target) target.damage(player);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 5,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget(player, target) {\r\n\t\t\t\t\t\tlet att = get.attitude2(target);\r\n\t\t\t\t\t\tif (att > 0) return;\r\n\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//耶拉纲徳 耶拉 冈门\r\n\t\tshengshimrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\taiValue(player, card, num) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (card?.cards?.some(i => i.hasGaintag(\"shengshimrfz_pile\"))) return num - 10;\r\n\t\t\t\t},\r\n\t\t\t\tcardUsable(card, player) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (card?.cards?.some(i => i.hasGaintag(\"shengshimrfz_pile\"))) return false;\r\n\t\t\t\t},\r\n\t\t\t\tcardEnabled(card, player) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (card?.cards?.some(i => i.hasGaintag(\"shengshimrfz_pile\"))) return false;\r\n\t\t\t\t},\r\n\t\t\t\tcardEnabled2(card, player) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (card?.cards?.some(i => i.hasGaintag(\"shengshimrfz_pile\"))) return false;\r\n\t\t\t\t},\r\n\t\t\t\tcardSavable(card, player) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (card?.cards?.some(i => i.hasGaintag(\"shengshimrfz_pile\"))) return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: [\"任命队长\", \"行动出发\"],\r\n\t\t\tonremove(player, skill) {\r\n\t\t\t\tplayer.getCards(\"s\", card => card.hasGaintag(\"shengshimrfz_pile\")).forEach(i => i.delete());\r\n\t\t\t\tif (!player.playerid) return;\r\n\t\t\t\ttmpSave[player.playerid][\"observer_shengshimrfz\"].disconnect();\r\n\t\t\t\ttmpSave[player.playerid][\"observer_shengshimrfz\"].takeRecords();\r\n\t\t\t\ttmpSave[player.playerid][\"observer_shengshimrfz\"] = null;\r\n\t\t\t},\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tlib.translate[\"shengshimrfz_pile\"] = \"牌堆顶\";\r\n\r\n\t\t\t\tlet recordCount;\r\n\t\t\t\tconst observer = new MutationObserver(() => {\r\n\t\t\t\t\tif (player.isDead()) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tlib.skill.shengshimrfz.onremove(player, skill);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet currentCount = ui.cardPile.childNodes.length;\r\n\t\t\t\t\tif (currentCount !== recordCount) {\r\n\t\t\t\t\t\trecordCount = currentCount;\r\n\r\n\t\t\t\t\t\tlet pileCards = player.getCards(\"s\", card => card.hasGaintag(\"shengshimrfz_pile\"));\r\n\t\t\t\t\t\tpileCards.forEach(card => card.delete());\r\n\r\n\t\t\t\t\t\tlet cards = get.cards(4, true);\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tlet copy_cards = cards.map(card => {\r\n\t\t\t\t\t\t\tlet copy_card = ui.create.card();\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tcopy_card.init(get.cardInfo(card));\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tcopy_card._cardid = card.cardid;\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tcopy_card._destroy = true;\r\n\t\t\t\t\t\t\treturn copy_card;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tfor (let i = 0; i < copy_cards.length; i++) {\r\n\t\t\t\t\t\t\t/** @type { Card } */\r\n\t\t\t\t\t\t\tlet card = copy_cards[i];\r\n\t\t\t\t\t\t\twhichWayTips.addPrompt(card, `第${i + 1}张`, \"shengshimrfz_pile\");\r\n\t\t\t\t\t\t\tskillCustomFunc.invisableJiZhan(card, player);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tplayer.directgains(copy_cards, null, \"shengshimrfz_pile\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tobserver.observe(ui.cardPile, {\r\n\t\t\t\t\tchildList: true,\r\n\t\t\t\t\tsubtree: false,\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (player.playerid) {\r\n\t\t\t\t\ttmpSave[player.playerid] ??= {};\r\n\t\t\t\t\ttmpSave[player.playerid][\"observer_shengshimrfz\"] = observer;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"chooseToDiscardBegin\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (typeof trigger.position === \"string\") trigger.position += \"s\";\r\n\t\t\t\telse trigger.position = \"hs\";\r\n\t\t\t},\r\n\t\t\tgroup: [\"shengshimrfz_replace\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\treplace: {\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"chooseToDiscardEnd\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tif (!event.result?.cards) return false;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tlet cardsid = get.cards(4, true).map(i => i.cardid);\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn event.result.cards.some(card => cardsid.includes(card._cardid));\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tlet cardsid = get.cards(4, true).map(i => i.cardid);\r\n\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttrigger.result.cards = trigger.result.cards.map(card => {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tif (!cardsid.includes(card._cardid)) return card;\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\treturn get.cards(4, true).find(cardx => cardx.cardid === card._cardid);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttrigger.done = game.cardsDiscard(trigger.result.cards);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txueweimrfz: {\r\n\t\t\taudio: [\"作战中3\", \"作战中4\"],\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\tgetSelect(player) {\r\n\t\t\t\tlet evts = player.getHistory(\"useCard\", evt => evt.card.name === \"huogong\");\r\n\t\t\t\tif (evts.length < 1) return 3;\r\n\t\t\t\tlet evt = evts[evts.length - 1];\r\n\t\t\t\tlet card = evt.card,\r\n\t\t\t\t\tnum = 0,\r\n\t\t\t\t\t/** @type { Array<Player> } */\r\n\t\t\t\t\ttargets = evt.targets;\r\n\t\t\t\tfor (let target of targets) {\r\n\t\t\t\t\tlet historys = target.getHistory(\"damage\", evtx => evtx.card === card);\r\n\t\t\t\t\tif (historys.length > 0) num += historys.length;\r\n\t\t\t\t}\r\n\t\t\t\treturn num;\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tlet num = lib.skill.xueweimrfz.getSelect(player);\r\n\t\t\t\treturn player.countCards(\"h\") > 0 && player.hasUseTarget(\"huogong\") && num > 0;\r\n\t\t\t},\r\n\t\t\tfilterCard: true,\r\n\t\t\tlose: false,\r\n\t\t\tdiscard: false,\r\n\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\treturn player.canUse(\"huogong\", target) === true;\r\n\t\t\t},\r\n\t\t\tselectTarget() {\r\n\t\t\t\tlet player = get.player();\r\n\t\t\t\tlet num = lib.skill.xueweimrfz.getSelect(player);\r\n\t\t\t\treturn [1, num];\r\n\t\t\t},\r\n\t\t\tmultitarget: true,\r\n\t\t\tmultiline: true,\r\n\t\t\tcheck(card) {\r\n\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tawait player\r\n\t\t\t\t\t.chooseUseTarget({ name: \"huogong\", xueweimrfz: true }, event.cards, event.targets)\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => get.event().targetx.includes(target))\r\n\t\t\t\t\t.set(\"selectTarget\", event.targets.length)\r\n\t\t\t\t\t.set(\"forced\", true)\r\n\t\t\t\t\t.set(\"targetx\", event.targets);\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (!lib.skill.xueweimrfz.filter(trigger, player)) return;\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseCardTarget({\r\n\t\t\t\t\t\tprompt: `是否将一张手牌当【火攻】（目标数:${lib.skill.xueweimrfz.getSelect(player)}）使用？`,\r\n\t\t\t\t\t\tfilterCard: true,\r\n\t\t\t\t\t\tfilterTarget: lib.skill.xueweimrfz.filterTarget,\r\n\t\t\t\t\t\tselectTarget: lib.skill.xueweimrfz.selectTarget,\r\n\t\t\t\t\t\tai1: card => 8 - get.value(card),\r\n\t\t\t\t\t\tai2: target => {\r\n\t\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\t\treturn get.damageEffect(target, player, player, \"ice\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (result.bool !== true) return;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tawait lib.skill.xueweimrfz.content(\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t...event,\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tcards: result.cards,\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttargets: result.targets,\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger,\r\n\t\t\t\t\tplayer\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tgroup: \"xueweimrfz_ice\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tice: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\ttrigger: { source: \"damageBegin\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn event.card && event.card.xueweimrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.nature = \"ice\";\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget(player, target) {\r\n\t\t\t\t\t\tlet val = get.damageEffect(target, player, player, \"ice\");\r\n\t\t\t\t\t\tif (val > 0) return -val;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//折桠\r\n\t\tmingzhongmrfz: {\r\n\t\t\taudio: [\"任命队长\", \"行动出发\"],\r\n\t\t\tderivation: [\"shijingmrfz\"],\r\n\t\t\tround: 1,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"useCard2\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.targets && event.targets.includes(player) && event.player !== player;\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tevent.result = await player\r\n\t\t\t\t\t.chooseBool()\r\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"mingzhongmrfz\"))\r\n\t\t\t\t\t.set(\"prompt2\", `是否将此牌的类型（${get.translation(get.type2(trigger.card))}）标记为“警”获得'示警'直到本轮结束？`)\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\tlet event = get.event();\r\n\t\t\t\t\t\treturn get.type2(event.card, player) === \"equip\";\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.addTempSkill(\"shijingmrfz\", { global: \"roundStart\" });\r\n\t\t\t\tif (player.storage.shijingmrfz) player.storage.shijingmrfz = [];\r\n\t\t\t\tplayer.storage.shijingmrfz.add(get.type2(trigger.card));\r\n\t\t\t},\r\n\t\t},\r\n\t\tshijingmrfz: {\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tmarktext: \"警\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"警\",\r\n\t\t\t\tcontent(stroage) {\r\n\t\t\t\t\tif (!Array.isArray(stroage)) return `没有“警”`;\r\n\t\t\t\t\treturn `·成为${get.translation(stroage)}牌的目标后摸一张牌<br>·<span class=\"text\" style=\"font-family: yuanli;color:red\">钟声来过，钟声记得。</span>`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: [\"行动开始\"],\r\n\t\t\tonremove: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\ttarget: \"useCardToTargeted\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\t/**@type {Array} */\r\n\t\t\t\tlet types = player.getStorage(\"shijingmrfz\");\r\n\t\t\t\treturn types.includes(get.type2(event.card));\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tawait player.draw();\r\n\t\t\t\tconst { targets } = await player\r\n\t\t\t\t\t.chooseTarget()\r\n\t\t\t\t\t.set(\"prompt\", \"你令至多一名没有“示警”的角色获得“示警”直到本轮结束\")\r\n\t\t\t\t\t.set(\"selectTarget\", [0, 1])\r\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\r\n\t\t\t\t\t\treturn !target.hasSkill(\"shijingmrfz\");\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", target => get.attitude2(target) > 0)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (Array.isArray(targets) && targets.length > 0) {\r\n\t\t\t\t\tlet target = targets[0];\r\n\t\t\t\t\ttarget.addTempSkill(\"shijingmrfz\", { global: \"roundStart\" });\r\n\t\t\t\t\tif (target.storage.shijingmrfz) target.storage.shijingmrfz = [];\r\n\t\t\t\t\ttarget.storage.shijingmrfz.addArray(player.storage.shijingmrfz);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhiyanmrfz: {\r\n\t\t\taudio: [\"选中干员1\", \"选中干员2\"],\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardAfter\",\r\n\t\t\t\tglobal: \"phaseChange\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tonremove: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent(storage) {\r\n\t\t\t\t\tif (!Array.isArray(storage) || storage.length < 1) return `没有需要额外结算的牌`;\r\n\t\t\t\t\treturn storage.map(info => `·对${get.translation(info[0])}使用${get.translation(info[1])}`).join(\"<br>\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn (event.name === \"useCard\" && event.targets && event.targets.length > 0 && event.card && [\"basic\", \"trick\"].includes(get.type(event.card))) || (event.name !== \"useCard\" && Array.isArray(player.storage.zhiyanmrfz) && player.storage.zhiyanmrfz.length > 0);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (trigger.name === \"useCard\") {\r\n\t\t\t\t\tif (!Array.isArray(player.storage.zhiyanmrfz)) player.storage.zhiyanmrfz = [];\r\n\t\t\t\t\tplayer.storage.zhiyanmrfz.push([trigger.targets, trigger.card]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet infos = (player.storage.zhiyanmrfz || []).slice();\r\n\r\n\t\t\t\t\tfor (let info of infos) {\r\n\t\t\t\t\t\tlet [targets, card] = info;\r\n\t\t\t\t\t\ttargets.forEach(target => {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tif (!player.canUse(card, target, true, false)) info[0].remove(target);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tawait player.useCard(card, targets, false);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tplayer.storage.zhiyanmrfz = [];\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"zhiyanmrfz_respond\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\trespond: {\r\n\t\t\t\t\taudio: \"zhiyanmrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"chooseToRespondBegin\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst { bool } = await player\r\n\t\t\t\t\t\t\t.chooseToDiscard()\r\n\t\t\t\t\t\t\t.set(\"prompt\", `你需要弃置一张牌，否则无法打出牌`)\r\n\t\t\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tlet trigger = get.event().triggerx;\r\n\t\t\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tlet respond = get.canRespond(trigger.respondTo[1], player);\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tlet respondNum = player.countCards(\"h\", card => !respond.includes(get.name(card)));\r\n\t\t\t\t\t\t\t\tif (respondNum < 1) return -114514;\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tif (respond.includes(get.name(card))) return 4 - get.value(card);\r\n\t\t\t\t\t\t\t\tif (player.hp < 2) return 10 - get.value(card);\r\n\t\t\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.set(\"triggerx\", trigger)\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (bool !== true) {\r\n\t\t\t\t\t\t\ttrigger.result = {\r\n\t\t\t\t\t\t\t\tbool: false,\r\n\t\t\t\t\t\t\t\tconfirm: \"cancel\",\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\ttrigger.cancel(undefined, undefined, true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thanshengmrfz: {\r\n\t\t\taudio: [\"作战中1\", \"作战中2\"],\r\n\t\t\tenable: [\"chooseToUse\", \"chooseToRespond\"],\r\n\t\t\t/**@param {Player} player  */\r\n\t\t\tgetSkillCount(player) {\r\n\t\t\t\treturn player.getAllHistory(\"useSkill\", evt => {\r\n\t\t\t\t\treturn evt.skill === \"hanshengmrfz\";\r\n\t\t\t\t}).length;\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn game.hasPlayer(char => char.countCards(\"he\") >= this.getSkillCount(player) + 1 && char !== player) && event.filterCard({ name: \"tao\" }, player, event);\r\n\t\t\t},\r\n\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\treturn target !== player && target.countCards(\"he\") >= lib.skill.hanshengmrfz.getSkillCount(player);\r\n\t\t\t},\r\n\t\t\thiddenCard(player, name) {\r\n\t\t\t\tif (!game.hasPlayer(char => char.countCards(\"he\") >= lib.skill.hanshengmrfz.getSkillCount(player) && char !== player)) return false;\r\n\t\t\t\treturn name === \"tao\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst num = lib.skill.hanshengmrfz.getSkillCount(player);\r\n\t\t\t\tconst {\r\n\t\t\t\t\ttargets: [target],\r\n\t\t\t\t} = event;\r\n\t\t\t\tconst { cards } = await target\r\n\t\t\t\t\t.chooseCard()\r\n\t\t\t\t\t.set(\"prompt\", `你可以交给${get.translation(player)}${get.cnNumber(num)}张牌，然后其视为使用一张【桃】`)\r\n\t\t\t\t\t.set(\"filterCard\", () => true)\r\n\t\t\t\t\t.set(\"selectCard\", num)\r\n\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\tlet event = get.event;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (event.att < 0) return -114514;\r\n\t\t\t\t\t\treturn event.name === \"dying\" ? 10 - get.value(card) : 6 - get.value(card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"att\", get.attitude(target, player))\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (cards && cards.length > 0) {\r\n\t\t\t\t\tawait target.give(cards, player, true);\r\n\t\t\t\t\tplayer.chooseUseTarget({ name: \"tao\", isCard: true }).set(\"forced\", true);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayer.disableSkill(\"hanshengmrfz\", [\"hanshengmrfz\"]);\r\n\t\t\t\t\tplayer.when({ global: \"phaseEnd\" }).then(() => {\r\n\t\t\t\t\t\tplayer.enableSkill(\"hanshengmrfz\");\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\ttarget(player, target) {\r\n\t\t\t\t\t\tif (get.attitude(player, target) < 0) return;\r\n\t\t\t\t\t\treturn target.countCards(\"he\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//风丸\r\n\t\tzhiyimrfz: {\r\n\t\t\taudio: [\"作战中2\", \"作战中3\", \"作战中4\"],\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"roundStart\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0 && player.countEnabledSlot() > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { cards } = await player.chooseCard(\"h\", true).set(\"prompt\", `你展示一张手牌，然后令“纸偶”随机获得技能描述中包含此牌牌名的技能`).forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\tconst card = cards[0];\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.showCards(card);\r\n\t\t\t\tconst manager = lib.skill.zhiyimrfz.cardManager;\r\n\t\t\t\tlet skill = await manager.getSkill(card, player);\r\n\t\t\t\tif (skill === undefined) {\r\n\t\t\t\t\tplayer.chat(`没有技能描述中存在【${get.translation(get.name(card))}】！`);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet subtype = get.rand(1, 5);\r\n\t\t\t\tmanager.addSlot(player, subtype);\r\n\r\n\t\t\t\tif (!lib.card[`zhiyimrfz_card_${skill}`]) {\r\n\t\t\t\t\tgame.broadcastAll(\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tfunction (skill, subtype, manager) {\r\n\t\t\t\t\t\t\tmanager.createCard(skill, subtype);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tskill,\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tsubtype,\r\n\t\t\t\t\t\tmanager\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet equip = game.createCard(`zhiyimrfz_card_${skill}`, \"none\", \"none\");\r\n\r\n\t\t\t\tplayer.$gain2(equip);\r\n\t\t\t\tgame.delayx();\r\n\t\t\t\tplayer.equip(equip);\r\n\t\t\t},\r\n\t\t\tcardManager: {\r\n\t\t\t\tcache: {},\r\n\t\t\t\taddSlot(player, subtype) {\r\n\t\t\t\t\tif (typeof subtype === \"number\") subtype = `equip${subtype}`;\r\n\t\t\t\t\tgame.broadcastAll(\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tfunction (player, subtype) {\r\n\t\t\t\t\t\t\tif (typeof player.expandedSlots[subtype] !== \"number\") player.expandedSlots[subtype] = 0;\r\n\t\t\t\t\t\t\tplayer.expandedSlots[subtype]++;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tplayer,\r\n\t\t\t\t\t\tsubtype\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t\tloseSlot(player, subtype) {\r\n\t\t\t\t\tif (typeof subtype === \"number\") subtype = `equip${subtype}`;\r\n\t\t\t\t\tgame.broadcastAll(\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tfunction (player, subtype) {\r\n\t\t\t\t\t\t\tif (typeof player.expandedSlots[subtype] !== \"number\" || player.expandedSlots[subtype] === 0) return;\r\n\t\t\t\t\t\t\tplayer.expandedSlots[subtype]--;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tplayer,\r\n\t\t\t\t\t\tsubtype\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t\tupdateCard(name, hp) {\r\n\t\t\t\t\tlet info = lib.card[name];\r\n\t\t\t\t\tinfo.characterManager.maxHp = hp[1];\r\n\t\t\t\t\tinfo.characterManager.hp = hp[0];\r\n\t\t\t\t},\r\n\t\t\t\tcreateCard(skills, subtype, charName, hp) {\r\n\t\t\t\t\tskills = Array.isArray(skills) ? skills : [skills];\r\n\t\t\t\t\tlet name = `zhiyimrfz_card_${skills.join(\"_\")}`;\r\n\r\n\t\t\t\t\tif (!charName) charName = \"fengwan_zhioumrfz\";\r\n\t\t\t\t\tconst character = get.character(charName);\r\n\t\t\t\t\tlet characterName = charName !== \"fengwan_zhioumrfz\" ? charName : `${charName}_${skills.join(\"_\")}`;\r\n\r\n\t\t\t\t\tif (!lib.character[characterName]) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tlib.character[characterName] = {\r\n\t\t\t\t\t\t\t...character,\r\n\t\t\t\t\t\t\tmaxHp: Array.isArray(hp) ? hp[1] : 2,\r\n\t\t\t\t\t\t\thp: Array.isArray(hp) ? hp[0] : 1,\r\n\t\t\t\t\t\t\tskills: [...skills],\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tlib.translate[characterName] = `纸偶·${skills.map(i => get.translation(i)).join(\"-\")}`;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet card = {\r\n\t\t\t\t\t\tcharacterManager: {\r\n\t\t\t\t\t\t\tname: characterName,\r\n\t\t\t\t\t\t\tmaxHp: Array.isArray(hp) ? hp[1] : 2,\r\n\t\t\t\t\t\t\thp: Array.isArray(hp) ? hp[0] : 1,\r\n\t\t\t\t\t\t\tgroup: character.group,\r\n\t\t\t\t\t\t\tskills: [...skills],\r\n\t\t\t\t\t\t\tisCharacter: !charName.startsWith(\"fengwan_zhioumrfz\"),\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfullimage: true,\r\n\t\t\t\t\t\timage: \"character:fengwan_zhioumrfz\",\r\n\t\t\t\t\t\ttype: \"equip\",\r\n\t\t\t\t\t\tsubtype: `equip${subtype}`,\r\n\t\t\t\t\t\tenable: true,\r\n\t\t\t\t\t\tselectTarget: -1,\r\n\t\t\t\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\t\t\t\tif (player != target) {\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn target.canEquip(card, true);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tmodTarget: true,\r\n\t\t\t\t\t\tallowMultiple: false,\r\n\t\t\t\t\t\tcontent: lib.element.content.equipCard,\r\n\t\t\t\t\t\ttoself: true,\r\n\t\t\t\t\t\tai: {\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tequipValue(card, player) {\r\n\t\t\t\t\t\t\t\treturn player.hasSkill(\"zhiyimrfz\") ? 1.2 : 1.6;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tskills: [\"zhiyimrfz_destroy\", ...skills],\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (card.subtype === \"equip1\") {\r\n\t\t\t\t\t\tcard.distance = { attackFrom: -2 };\r\n\t\t\t\t\t} else if (card.subtype === \"equip4\") {\r\n\t\t\t\t\t\tcard.distance = { globalFrom: -1 };\r\n\t\t\t\t\t} else if (card.subtype === \"equip3\") {\r\n\t\t\t\t\t\tcard.distance = { globalTo: 1 };\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet node = ui.create.buttonPresets.character(characterName, \"character\", null, false);\r\n\t\t\t\t\tnode.style.width = \"100%\";\r\n\t\t\t\t\tlet hpNode = node.querySelector(\".hp .text\");\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\thpNode.innerHTML = Array.isArray(hp) ? hp.join(\"/\") : \"1/2\";\r\n\t\t\t\t\tlib.translate[`${name}_info`] = `锁定技，你视为拥有技能${skills.map(s => \"〖\" + get.translation(s) + \"〗\").join(\"、\")}，此牌不因【化影】而离开你的装备区后，销毁之。<br>` + node.outerHTML + \"<br>\";\r\n\t\t\t\t\tlet append = \"\";\r\n\t\t\t\t\tfor (var skill of skills) {\r\n\t\t\t\t\t\tif (lib.skill[skill].nobracket) {\r\n\t\t\t\t\t\t\tappend += '<div class=\"skilln\">' + get.translation(skill) + '</div><div><span style=\"font-family: yuanli\">' + get.plainText(get.skillInfoTranslation(skill)) + \"</span></div><br><br>\";\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar translation = lib.translate[skill + \"_ab\"] || get.translation(skill).slice(0, 2);\r\n\t\t\t\t\t\t\tappend += '<div class=\"skill\">【' + translation + '】</div><div><span style=\"font-family: yuanli\">' + get.plainText(get.skillInfoTranslation(skill)) + \"</span></div><br><br>\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlib.translate[`${name}_append`] = append;\r\n\t\t\t\t\tlib.card[name] = card;\r\n\t\t\t\t\tlib.translate[name] = card.characterManager.isCharacter ? get.translation(card.characterManager.name) : `纸偶·${skills.map(i => get.translation(i)).join(\"-\")}`;\r\n\t\t\t\t},\r\n\t\t\t\tasync change(player, card) {\r\n\t\t\t\t\tlet characterManager = { ...get.info(card).characterManager };\r\n\t\t\t\t\tconst expandedSlots = { ...player.expandedSlots };\r\n\t\t\t\t\tawait player.reinitCharacter(player.name, characterManager.name);\r\n\t\t\t\t\tplayer.expandedSlots = expandedSlots;\r\n\t\t\t\t\tplayer.hp = characterManager.hp;\r\n\t\t\t\t\tplayer.maxHp = characterManager.maxHp;\r\n\t\t\t\t\tplayer.update();\r\n\t\t\t\t\tplayer.zhiyimrfz_linkCard = get.name(card);\r\n\r\n\t\t\t\t\tthis.loseSlot(player, get.subtype(card));\r\n\r\n\t\t\t\t\tif (player.hp <= 0) {\r\n\t\t\t\t\t\tplayer.dying();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tasync getSkill(card, player) {\r\n\t\t\t\t\tconst cache = this.cache;\r\n\t\t\t\t\tlet name = get.name(card);\r\n\t\t\t\t\tif (!name) return;\r\n\t\t\t\t\tif (cache[name]) {\r\n\t\t\t\t\t\treturn cache[name].filter(i => !player.getSkills().includes(i) && !lib.skill[i].charlotte).randomGet();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet list = [];\r\n\t\t\t\t\tfor (let skill in lib.skill) {\r\n\t\t\t\t\t\tlet info = lib.skill[skill];\r\n\t\t\t\t\t\tif (info.charlotte || info.equipSkill || info.zhuSkill) continue;\r\n\t\t\t\t\t\tlet intro = get.skillInfoTranslation(skill);\r\n\t\t\t\t\t\tif (intro && intro.includes(`【${get.translation(name)}】`)) list.add(skill);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgame.broadcastAll(\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tfunction (list, name) {\r\n\t\t\t\t\t\t\tlib.skill.zhiyimrfz.cardManager.cache[name] = list;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tlist,\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tname\r\n\t\t\t\t\t);\r\n\t\t\t\t\treturn await this.getSkill(card, player);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdestroy: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"loseBegin\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tequipSkill: true,\r\n\t\t\t\t\tforceDie: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn event.cards.some(card => card.name.indexOf(\"zhiyimrfz_card_\") === 0);\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst manager = lib.skill.zhiyimrfz.cardManager;\r\n\t\t\t\t\t\tfor (let card of trigger.cards) {\r\n\t\t\t\t\t\t\tif (card.name.indexOf(\"zhiyimrfz_card_\") === 0) {\r\n\t\t\t\t\t\t\t\tif (Object.keys(trigger.getParent(\"huayingmrfz\") || {}).length > 0) {\r\n\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\tcard._destroy = true;\r\n\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\ttrigger.zhiyimrfz_trigger = true;\r\n\t\t\t\t\t\t\t\t\tplayer.addTempSkill(\"zhiyimrfz_destroy2\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tlet subtype = get.subtype(card);\r\n\t\t\t\t\t\t\t\tmanager.loseSlot(player, subtype);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdestroy2: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"loseAfter\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tequipSkill: true,\r\n\t\t\t\t\tforceDie: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn event.cards.some(card => card.name.indexOf(\"zhiyimrfz_card_\") === 0) && event.zhiyimrfz_trigger === true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst manager = lib.skill.zhiyimrfz.cardManager;\r\n\t\t\t\t\t\tfor (let card of trigger.cards) {\r\n\t\t\t\t\t\t\tif (card.name.indexOf(\"zhiyimrfz_card_\") !== 0) continue;\r\n\t\t\t\t\t\t\tlet info = get.info(card);\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tlet name = player.zhiyimrfz_linkCard;\r\n\t\t\t\t\t\t\tif (info.characterManager?.isCharacter) {\r\n\t\t\t\t\t\t\t\tif (name) {\r\n\t\t\t\t\t\t\t\t\tif (!lib.card[name]) {\r\n\t\t\t\t\t\t\t\t\t\tgame.broadcastAll(\r\n\t\t\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\t\t\tfunction (skill, subtype, manager) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tmanager.createCard(skill, subtype);\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\t\t\tplayer.getOriginalSkills(),\r\n\t\t\t\t\t\t\t\t\t\t\tget.rand(1, 5),\r\n\t\t\t\t\t\t\t\t\t\t\tmanager\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tlet cardx = game.createCard(name, \"none\", \"none\");\r\n\t\t\t\t\t\t\t\t\tmanager.addSlot(player, get.subtype(cardx));\r\n\t\t\t\t\t\t\t\t\tplayer.equip(cardx);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tawait manager.change(player, card);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thuayingmrfz: {\r\n\t\t\taudio: [\"选中干员2\", \"部署2\"],\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"dying\",\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"e\", card => card.name.indexOf(\"zhiyimrfz_card_\") === 0) > 0;\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tevent.result = await player\r\n\t\t\t\t\t.chooseCard(\"e\")\r\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"huayingmrfz\"))\r\n\t\t\t\t\t.set(\"prompt2\", `你可以切换一个“纸偶”和你当前的武将牌`)\r\n\t\t\t\t\t.set(\"filterCard\", card => card.name.indexOf(\"zhiyimrfz_card_\") === 0)\r\n\t\t\t\t\t.set(\"ai\", card => get.value(card) < 4)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet manager = lib.skill.zhiyimrfz.cardManager;\r\n\t\t\t\tlet equip = event.cards[0];\r\n\t\t\t\tlet subtype = get.rand(1, 5);\r\n\r\n\t\t\t\tlet skills = player.getOriginalSkills();\r\n\r\n\t\t\t\tif (!lib.card[`zhiyimrfz_card_${skills.join(\"_\")}`]) {\r\n\t\t\t\t\tgame.broadcastAll(\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tfunction (skill, subtype, manager, name, hp) {\r\n\t\t\t\t\t\t\tmanager.createCard(skill, subtype, name, hp);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tskills,\r\n\t\t\t\t\t\tsubtype,\r\n\t\t\t\t\t\tmanager,\r\n\t\t\t\t\t\tget.name(player),\r\n\t\t\t\t\t\t[player.hp, player.maxHp]\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet card = game.createCard(`zhiyimrfz_card_${skills.join(\"_\")}`, \"none\", \"none\");\r\n\t\t\t\tlet info = get.info(card);\r\n\t\t\t\tgame.broadcastAll(\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tfunction (manager, name, hp) {\r\n\t\t\t\t\t\tmanager.updateCard(name, hp);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmanager,\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tget.name(card),\r\n\t\t\t\t\t[player.hp, player.maxHp]\r\n\t\t\t\t);\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tequip._destroy = true;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.loseToDiscardpile(equip).log = false;\r\n\t\t\t\tawait manager.change(player, equip);\r\n\t\t\t\tmanager.addSlot(player, subtype);\r\n\t\t\t\tif (info?.characterManager) {\r\n\t\t\t\t\tlet characterManager = info.characterManager;\r\n\t\t\t\t\tif (!characterManager.isCharacter && (characterManager.hp === 0 || characterManager.maxHp === 0)) {\r\n\t\t\t\t\t\tgame.log(`#y${get.translation(info.characterManager.name)}`, \"被销毁了\");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tplayer.equip(card);\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//inna 双月\r\n\t\tguiyingmrfz: {\r\n\t\t\taudio: [\"晋升后交谈1\", \"行动出发\"],\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"chooseToUseAfter\", \"chooseToRespondAfter\"],\r\n\t\t\t\tglobal: \"_wuxieAfter\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (event.name === \"chooseToUse\" && event.type === \"wuxie\") {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (event.name === \"_wuxie\") {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (event.wuxieresult && event.wuxieresult === player) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (event._info_map.player === player) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\treturn event.respondTo && event.respondTo[0] !== player && !event.result.bool;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tlet triggerCard = trigger.name === \"_wuxie\" ? trigger._info_map.card : trigger.respondTo[1];\r\n\t\t\t\tlet canRespond = get.canRespond(triggerCard, player);\r\n\t\t\t\tif (trigger.name === \"_wuxie\") canRespond.add(\"wuxie\");\r\n\r\n\t\t\t\tcanRespond = canRespond.filter(\r\n\t\t\t\t\tname =>\r\n\t\t\t\t\t\t!player\r\n\t\t\t\t\t\t\t.getCards(\"h\")\r\n\t\t\t\t\t\t\t.map(i => get.name(i))\r\n\t\t\t\t\t\t\t.includes(name)\r\n\t\t\t\t);\r\n\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (canRespond.length < 1) player.draw().log = false;\r\n\t\t\t\telse {\r\n\t\t\t\t\tlet cards = canRespond.map(function (card) {\r\n\t\t\t\t\t\treturn get.cardPile(card);\r\n\t\t\t\t\t});\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (cards.length < 1) player.draw().log = false;\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tconst result = await player\r\n\t\t\t\t\t\t\t.chooseCardButton(\"【诡影】:请选择你要获得的牌<br>选择‘取消’则模一张牌\", cards)\r\n\t\t\t\t\t\t\t.set(\"ai\", card => get.value(card) > 8)\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (result.bool === false) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.draw().log = false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tplayer.gain(result.links[0]).log = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tgame.log(player, \"从牌堆中获得了一张牌\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tsheguomrfz: {\r\n\t\t\taudio: [\"交谈2\", \"交谈1\"],\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"damageEnd\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (!event.card) return false;\r\n\t\t\t\tlet canRespond = get.canRespond(event.card, player).concat(get.canRespond(get.type2(event.card)));\r\n\t\t\t\treturn player.countCards(\"h\", card => canRespond.includes(get.name(card) || \"\")) > 0;\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseControl(\"cancel2\")\r\n\t\t\t\t\t.set(\"choiceList\", [`视为对${trigger.source && trigger.source.isIn() ? get.translation(trigger.source) : \"上天（不存在伤害来源）\"}使用一张【杀】`, \"回复一点体力、摸两张牌且此技能本回合失效\"])\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\tlet { source, player } = get.event();\r\n\t\t\t\t\t\tif (!source || !source.isIn() || player.hp < 2) return 1;\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"source\", trigger.source)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tevent.result = {\r\n\t\t\t\t\t...result,\r\n\t\t\t\t\tcost_data: {\r\n\t\t\t\t\t\tindex: result.index,\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst index = event.cost_data.index;\r\n\t\t\t\tif (index === 0 && trigger.source && trigger.source.isIn() && player.canUse(\"sha\", trigger.source, false, false)) {\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.chooseUseTarget({ name: \"sha\" })\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => target === get.event().source)\r\n\t\t\t\t\t\t.set(\"forced\", true)\r\n\t\t\t\t\t\t.set(\"nodistance\", true)\r\n\t\t\t\t\t\t.set(\"addCount\", false)\r\n\t\t\t\t\t\t.set(\"source\", trigger.source);\r\n\t\t\t\t} else if (index === 1) {\r\n\t\t\t\t\tplayer.draw(2);\r\n\t\t\t\t\tplayer.recover();\r\n\t\t\t\t\tplayer.disableSkill(\"sheguomrfz_disable\", [\"sheguomrfz\"]);\r\n\t\t\t\t\tplayer.when({ global: \"phaseEnd\" }).then(() => {\r\n\t\t\t\t\t\tplayer.enableSkill(\"sheguomrfz_disable\");\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//八幡海铃\r\n\t\tchendiemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardBegin\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tlet num = lib.skill.wuweimrfz.getNum(player, \"chendiemrfz\");\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (event.noTrigger_chendiemrfz) return false;\r\n\t\t\t\treturn player.getHistory(\"useCard\").length < num + 2 && player.isPhaseUsing();\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent(_, player) {\r\n\t\t\t\t\tif (!player.isPhaseUsing()) return `不是你的出牌阶段`;\r\n\t\t\t\t\treturn `已使用的牌数/上限：${player.getHistory(\"useCard\").length}/${lib.skill.wuweimrfz.getNum(player, \"chendiemrfz\") + 2}`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet cards = trigger.cards;\r\n\t\t\t\tawait player.recast(trigger.cards, () => {});\r\n\r\n\t\t\t\tlet cardsTags = cards.map(card => card.gaintag).flat();\r\n\t\t\t\tif (cardsTags) {\r\n\t\t\t\t\tcardsTags.forEach(tag => player.addGaintag(player.getCards(\"h\"), tag));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tumiri_chenxianmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"gainAfter\",\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tinit(player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tgame.broadcastAll(() => {\r\n\t\t\t\t\tlib.translate[\"umiri_chenxianmrfz_yingbian\"] = \"无视条件\";\r\n\t\t\t\t\tArray.from(lib.yingbian.effect.keys()).forEach(tag => (lib.translate[`yingbian_${tag}`] = lib.translate[`yingbian_${tag}_tag`]));\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\treturn player === _status.currentPhase;\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet effTag = Array.from(lib.yingbian.effect.keys()).map(tag => `yingbian_${tag}`);\r\n\t\t\t\ttrigger.cards.forEach(card => {\r\n\t\t\t\t\tcard.addGaintag(\"umiri_chenxianmrfz_yingbian\");\r\n\t\t\t\t\tif (!get.is.yingbian(card)) {\r\n\t\t\t\t\t\tlet num = lib.skill.wuweimrfz.getNum(player, \"umiri_chenxianmrfz\") + 1;\r\n\t\t\t\t\t\tfor (let i = 0; i < num; i++) {\r\n\t\t\t\t\t\t\tcard.addGaintag(effTag.randomGet());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgroup: \"umiri_chenxianmrfz_yingbian\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tyingbian: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"yingbian\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tfilter: (event, player) => event.card.isCard && player.hasHistory(\"lose\", evt => evt.getParent() == event && Object.values(evt.gaintag_map).some(value => value.includes(\"umiri_chenxianmrfz_yingbian\"))),\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet tags;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.getHistory(\"lose\", evt => {\r\n\t\t\t\t\t\t\tif (evt.getParent() !== trigger) return;\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tconst maps = evt.gaintag_map;\r\n\t\t\t\t\t\t\tfor (let key in maps) {\r\n\t\t\t\t\t\t\t\tif (maps[key].join(\" \").includes(\"yingbian_\")) tags = maps[key];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (!Array.isArray(trigger.temporaryYingbian)) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\ttrigger.temporaryYingbian = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttrigger.temporaryYingbian.add(\"force\");\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tfor (let tag of tags) {\r\n\t\t\t\t\t\t\tif (tag.startsWith(\"yingbian_\")) {\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\ttrigger.temporaryYingbian.add(tag.slice(9));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//三角初华\r\n\t\tweimianmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardAfter\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn [\"basic\", \"trick\"].includes(get.type(event.card)) && player.countCards(\"he\", card => player.canRecast(card)) > 0;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet num = lib.skill.wuweimrfz.getNum(player, \"weimianmrfz\");\r\n\t\t\t\tlet centralArea = get.discarded().slice();\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tlet max = centralArea.length > 0 ? Math.max(...centralArea.map(card => get.number(card))) : 0;\r\n\r\n\t\t\t\tconst { cards } = await player\r\n\t\t\t\t\t.chooseCard(\"he\", true)\r\n\t\t\t\t\t.set(\"prompt\", `【伪面】:请重铸一张牌,然后若重铸的牌的点数为${get.poptip(\"sjzx_centralArea\")}的牌中点数最大的，你摸${2 * num}张牌。`)\r\n\t\t\t\t\t.set(\"prompt2\", `${get.poptip(\"sjzx_centralArea\")}点数最大的牌：${max}`)\r\n\t\t\t\t\t.set(\"filterCard\", card => player.canRecast(card))\r\n\t\t\t\t\t.set(\"ai\", card => -get.value(card))\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\tlet card = cards[0];\r\n\t\t\t\tif (card) await player.recast(card);\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (get.number(card) > max && num > 0) await player.draw(2 * num);\r\n\t\t\t},\r\n\t\t},\r\n\t\tweiquanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"damageBegin3\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn !!event.card;\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet num = lib.skill.wuweimrfz.getNum(player, \"weiquanmrfz\");\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (get.number(trigger.card) > 3 * num) trigger.num++;\r\n\t\t\t\telse num--;\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//佑天寺若麦 祐天寺若麦\r\n\t\tleigumrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardAfter\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tif (!event.leigumrfz || !event.leigumrfz[player.playerid]) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\treturn event.leigumrfz[player.playerid].some(value => value === true);\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tif (trigger.leigumrfz[player.playerid][0] === true) await player.draw();\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tif (trigger.leigumrfz[player.playerid][1] === true) {\r\n\t\t\t\t\tconst { cards } = await player\r\n\t\t\t\t\t\t.chooseCard(\"he\")\r\n\t\t\t\t\t\t.set(\"prompt\", `你可以重铸一张牌`)\r\n\t\t\t\t\t\t.set(\"filterCard\", card => player.canRecast(card))\r\n\t\t\t\t\t\t.set(\"ai\", card => 7 - get.value(card))\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (cards) await player.recast(cards);\r\n\t\t\t\t}\r\n\t\t\t\tconst num = lib.skill.wuweimrfz.getNum(player, \"leigumrfz\");\r\n\t\t\t\tif (num > 0) {\r\n\t\t\t\t\tplayer.markSkill(\"leigumrfz_eff\");\r\n\t\t\t\t\tplayer.storage.leigumrfz_eff = Math.max(player.storage.leigumrfz_eff || 0, num);\r\n\t\t\t\t\tplayer.addTempSkill(\"leigumrfz_eff\", { global: [\"phaseEnd\", \"roundStart\"] });\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"leigumrfz_mark\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent(storage) {\r\n\t\t\t\t\t\t\treturn `本回合所有牌的使用次数+${storage}`;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tcardUsable(card, player, num) {\r\n\t\t\t\t\t\t\tif (typeof num === \"number\") return (num += player.storage.leigumrfz_eff || 0);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tmark: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCardBegin\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tconst cards = player.getCards(\"h\");\r\n\t\t\t\t\t\tif (!cards.length) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn (event.cards || []).some(card => cards[0] === card || cards[cards.length - 1] === card);\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tconst cards = player.getCards(\"h\");\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tif (!trigger.leigumrfz) {\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\ttrigger.leigumrfz = {};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\ttrigger.leigumrfz[player.playerid] = [trigger.cards.some(card => cards[0] === card), trigger.cards.some(card => cards[cards.length - 1] === card)];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\taiOrder(player, card, num) {\r\n\t\t\t\t\tif (typeof card == \"object\") {\r\n\t\t\t\t\t\tconst cards = player.getCards(\"h\");\r\n\t\t\t\t\t\tif (cards.indexOf(card) === 0) return num + 10;\r\n\t\t\t\t\t\tif (cards.indexOf(card) === cards.length - 1) return num + 9;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tnoSortCard: true,\r\n\t\t\t},\r\n\t\t},\r\n\t\tjiaoyingmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"phaseUseBegin\", \"phaseUseEnd\"],\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tconst num = lib.skill.wuweimrfz.getNum(player, \"jiaoyingmrfz\");\r\n\t\t\t\treturn player.countCards(\"he\") > 0 && num > 0;\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tconst num = lib.skill.wuweimrfz.getNum(player, \"jiaoyingmrfz\");\r\n\t\t\t\tevent.result = await player\r\n\t\t\t\t\t.chooseCard()\r\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"jiaoyingmrfz\"))\r\n\t\t\t\t\t.set(\"prompt2\", `你可以${get.poptip(\"sjzx_zhiheng\")}${num}`)\r\n\t\t\t\t\t.set(\"ai\", card => 8 - get.value(card))\r\n\t\t\t\t\t.set(\"selectCard\", () => {\r\n\t\t\t\t\t\treturn [1, get.event().num];\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"num\", num)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.discard(event.cards);\r\n\t\t\t\tplayer.draw(event.cards.length);\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//若叶睦\r\n\t\tlingwomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"dying\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.countCards(\"he\", card => {\r\n\t\t\t\t\t\treturn game.hasPlayer(target => target.canEquip(card) || get.type(card) !== \"equip\");\r\n\t\t\t\t\t}) > 0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst num = lib.skill.wuweimrfz.getNum(player, event.name);\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseCardTarget({\r\n\t\t\t\t\t\tforced: true,\r\n\t\t\t\t\t\tprompt: `你${get.poptip(\"sjzx_byRecast\")}将一张牌赠予一名其他角色，并将体力至调整至${Math.max(1, num)}`,\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tfilterTarget: (card, player, target) =>\r\n\t\t\t\t\t\t\tui.selected.cards.every(value => {\r\n\t\t\t\t\t\t\t\treturn target !== player && (target.canEquip(value) || get.type(value) !== \"equip\");\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\tfilterCard(card) {\r\n\t\t\t\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\t\t\t\treturn current.canEquip(card) || get.type(card) !== \"equip\";\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tposition: \"he\",\r\n\t\t\t\t\t\tai1: card => {\r\n\t\t\t\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tai2: target => {\r\n\t\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\treturn lib.skill._gifting.ai.result.target(player, target);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tconst { cards, targets } = result;\r\n\t\t\t\tif (!cards || !targets) return;\r\n\t\t\t\tconst target = targets[0];\r\n\t\t\t\tplayer.recast(cards);\r\n\t\t\t\tplayer.gift(cards, target);\r\n\t\t\t\tplayer.recoverTo(Math.max(1, lib.skill.wuweimrfz.getNum(player, event.name)));\r\n\r\n\t\t\t\tlet skills = player.getSkills(null, null, false).filter(skill => {\r\n\t\t\t\t\tlet info = get.info(skill);\r\n\t\t\t\t\treturn info && !info.charlotte && !info.equipSkill;\r\n\t\t\t\t});\r\n\t\t\t\tconst { control } = await player\r\n\t\t\t\t\t.chooseControl(skills)\r\n\t\t\t\t\t.set(\"prompt\", `请选择失去一个技能直到本轮结束`)\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tlet { skills, player } = get.event();\r\n\t\t\t\t\t\tif (skills.includes(\"wuweimrfz\")) return \"wuweimrfz\";\r\n\t\t\t\t\t\tif (skills.length > 1 && skills.includes(\"pojianmrfz\")) skills.remove(\"pojianmrfz\");\r\n\t\t\t\t\t\treturn skills.randomGet();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"skills\", skills)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (control) {\r\n\t\t\t\t\tplayer.removeSkill(control);\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.when({ global: \"roundStart\" })\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t.step(async (event, trigger, player) => {\r\n\t\t\t\t\t\t\tplayer.addSkill(control);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 0.8,\r\n\t\t\t},\r\n\t\t},\r\n\t\tpojianmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"damageEnd\",\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0 && player.hasUseTarget(\"taoyuan\");\r\n\t\t\t},\r\n\t\t\tusable: 3,\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tlet skills = player.getSkills(null, null, false).filter(skill => {\r\n\t\t\t\t\tlet info = get.info(skill);\r\n\t\t\t\t\treturn info && !info.charlotte;\r\n\t\t\t\t});\r\n\t\t\t\tlet num = lib.skill.wuweimrfz.getNum(player, \"pojianmrfz\");\r\n\t\t\t\tconst { result } = await player\r\n\t\t\t\t\t.chooseCardTarget({\r\n\t\t\t\t\t\tprompt: `你可以将一张牌${get.poptip(\"sjzx_byRecast\")}当目标数至多为${Math.max(1, num)}的【桃园结义】使用，然后因此回复体力值的角色摸${num}张牌，反之其本回合使用的下一张牌额外结算${num}次`,\r\n\t\t\t\t\t\tfilterCard: true,\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\t\t\t\treturn player.canUse(\"taoyuan\", target);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tselectTarget() {\r\n\t\t\t\t\t\t\tlet num = get.event().num;\r\n\t\t\t\t\t\t\treturn [1, num];\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tai1(card) {\r\n\t\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\t\tif (player.isPhaseUsing() && player.countCards(\"h\", card => player.hasUseTarget(card) && [\"equip\", \"delay\"].includes(get.type(card))) > 0) return false;\r\n\t\t\t\t\t\t\tif (!player.isPhaseUsing() && !game.hasPlayer(char => get.attitude2(char) > 0 && char.getDamagedHp() > 0)) return false;\r\n\t\t\t\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tai2(target) {\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\t\tlet num = 0;\r\n\t\t\t\t\t\t\tif (get.attitude2(target) < 0) return -1;\r\n\t\t\t\t\t\t\tif (target.getDamagedHp() > 0) num += target.hp === 1 ? 5 : 2;\r\n\t\t\t\t\t\t\tif (target.isPhaseUsing() && target.getDamagedHp() < 1 && game.hasPlayer(char => char.countCards(\"h\", card => char.hasUseTarget(card) && [\"equip\", \"delay\"].includes(get.type(card))) > 0)) num += 1;\r\n\t\t\t\t\t\t\treturn num;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"num\", num);\r\n\t\t\t\tevent.result = result;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { cards, targets } = event;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tlet randomId = get.randomNumberSJZX();\r\n\t\t\t\tlet damageCard = trigger.card;\r\n\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.when({ player: \"useCardAfter\" })\r\n\t\t\t\t\t.filter((event, player) => {\r\n\t\t\t\t\t\treturn event.card?.storage?.pojianmrfz;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.step(async (event, trigger, player) => {\r\n\t\t\t\t\t\tconst num = lib.skill.wuweimrfz.getNum(player, \"pojianmrfz\");\r\n\t\t\t\t\t\tif (num < 1) return;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tgame.getRoundHistory(\"changeHp\", evt => {\r\n\t\t\t\t\t\t\t/** @type { GameEvent } */\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tlet evtx = evt.getParent();\r\n\t\t\t\t\t\t\tif (evtx.name === \"recover\" && targets.includes(evtx.player) && evtx.card && evtx.card?.storage?.pojianmrfz_id === randomId) {\r\n\t\t\t\t\t\t\t\tevtx.player.draw(num);\r\n\t\t\t\t\t\t\t\ttargets.remove(evtx.player);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\ttargets.forEach(target => {\r\n\t\t\t\t\t\t\ttarget.markSkill(\"pojianmrfz\", {\r\n\t\t\t\t\t\t\t\tcontent: `本回合下次使用牌额外结算${lib.skill.wuweimrfz.getNum(player, \"pojianmrfz\")}次`,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\ttarget\r\n\t\t\t\t\t\t\t\t.when({\r\n\t\t\t\t\t\t\t\t\tplayer: \"useCard\",\r\n\t\t\t\t\t\t\t\t\tglobal: \"phaseEnd\",\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t.filter((event, player) => {\r\n\t\t\t\t\t\t\t\t\tif (event.name !== \"useCard\") return true;\r\n\t\t\t\t\t\t\t\t\treturn !event.card?.storage?.pojianmrfz && event.card !== damageCard;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\tplayer.unmarkSkill(\"pojianmrfz\");\r\n\t\t\t\t\t\t\t\t\tif (trigger.name !== \"useCard\") return;\r\n\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\tif (numx > 0) trigger.effectCount += numx;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.vars({\r\n\t\t\t\t\t\t\t\t\tnumx: lib.skill.wuweimrfz.getNum(player, \"pojianmrfz\"),\r\n\t\t\t\t\t\t\t\t\tdamageCard: damageCard,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tplayer.recast(cards);\r\n\t\t\t\tawait player\r\n\t\t\t\t\t.chooseUseTarget(\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tname: \"taoyuan\",\r\n\t\t\t\t\t\t\tisCard: true,\r\n\t\t\t\t\t\t\tstorage: {\r\n\t\t\t\t\t\t\t\tpojianmrfz: true,\r\n\t\t\t\t\t\t\t\tpojianmrfz_id: randomId,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcards,\r\n\t\t\t\t\t\ttargets\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"forced\", true);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 0.5,\r\n\t\t\t\tmaixie: true,\r\n\t\t\t\tmaixie_hp: true,\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget(card, player, target) {\r\n\t\t\t\t\t\tif (player.hasSkillTag(\"jueqing\", false, target)) {\r\n\t\t\t\t\t\t\treturn [1, -1.5];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (target.hasFriend() && get.tag(card, \"damage\")) {\r\n\t\t\t\t\t\t\treturn [1, 0, 0, -0.7];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//蓝毒\r\n\t\tlandu_shixinmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t},\r\n\t\t\tinit() {\r\n\t\t\t\tlib.translate[\"landu_shixinmrfz_tag\"] = \"毒\";\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (!event.targets || event.targets.length > 1) return false;\r\n\t\t\t\tlet target = event.targets[0];\r\n\t\t\t\treturn target !== player && target.countCards(\"h\", card => !card.storage.landu_shixinmrfz) > 0;\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tlet target = trigger.targets[0];\r\n\t\t\t\tevent.result = await player\r\n\t\t\t\t\t.choosePlayerCard(target, \"h\")\r\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"landu_shixinmrfz\"))\r\n\t\t\t\t\t.set(\"filterButton\", button => {\r\n\t\t\t\t\t\treturn !button.link.storage.landu_shixinmrfz;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet target = trigger.targets[0];\r\n\t\t\t\tlet cards = event.cards;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.showCards(cards, `${get.translation(player)}因【蚀心】展示了${get.translation(target)}的${get.cnNumber(cards.length)}张牌`);\r\n\t\t\t\tgame.delay(1);\r\n\t\t\t\tcards.forEach(card => {\r\n\t\t\t\t\tcard.addGaintag(\"landu_shixinmrfz_tag\");\r\n\t\t\t\t\tcard.storage.landu_shixinmrfz = true;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgroup: [\"landu_shixinmrfz_lose\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tlose: {\r\n\t\t\t\t\taudio: \"landu_shixinmrfz\",\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"loseAfter\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn event.cards.some(card => card.storage.landu_shixinmrfz);\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet cardsx = trigger.cards.filter(card => card.storage.landu_shixinmrfz && get.position(card) === \"d\");\r\n\t\t\t\t\t\tlet target = trigger.player;\r\n\t\t\t\t\t\ttrigger.cards.forEach(card => {\r\n\t\t\t\t\t\t\tif (card.storage.landu_shixinmrfz) delete card.storage.landu_shixinmrfz;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (cardsx.length > 0) player.gain(cardsx, \"gain2\");\r\n\r\n\t\t\t\t\t\tconst { cards } =\r\n\t\t\t\t\t\t\ttarget.countCards(\"h\", card => !card.storage.landu_shixinmrfz) < 1\r\n\t\t\t\t\t\t\t\t? { cards: undefined }\r\n\t\t\t\t\t\t\t\t: await target\r\n\t\t\t\t\t\t\t\t\t\t.chooseCard(\"h\")\r\n\t\t\t\t\t\t\t\t\t\t.set(\"prompt\", `是否将一张手牌标记为“毒”并令${get.translation(player)}模一张牌，否则失去一点体力`)\r\n\t\t\t\t\t\t\t\t\t\t.set(\"filterCard\", card => !card.storage.landu_shixinmrfz)\r\n\t\t\t\t\t\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (player.hp < 2) return 114514 - get.value(card);\r\n\t\t\t\t\t\t\t\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (cards) {\r\n\t\t\t\t\t\t\tcards.forEach(card => {\r\n\t\t\t\t\t\t\t\tcard.addGaintag(\"landu_shixinmrfz_tag\");\r\n\t\t\t\t\t\t\t\tcard.storage.landu_shixinmrfz = true;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\t} else target.loseHp();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tpicaimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tusable: 1,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"damageBegin3\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0 && event.num > 0;\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tlet str = trigger.card ? `若你展示的牌的花色是${get.translation(get.suit(trigger.card))}，则此伤害-1` : \"<font color='red'>此伤害为无来源伤害！</font>\";\r\n\t\t\t\tevent.result = await player\r\n\t\t\t\t\t.chooseCard()\r\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"picaimrfz\"))\r\n\t\t\t\t\t.set(\"prompt2\", str)\r\n\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tlet cardx = get.event().cardx;\r\n\t\t\t\t\t\tif (!cardx) return -114514;\r\n\t\t\t\t\t\tif (get.suit(cardx) !== get.suit(card)) return -114514;\r\n\t\t\t\t\t\treturn Math.random();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"cardx\", trigger.card)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet source = trigger.source;\r\n\t\t\t\ttrigger.num--;\r\n\t\t\t\tif (source && source.isIn() && source.countCards(\"h\", card => !card.storage.landu_shixinmrfz) > 0) {\r\n\t\t\t\t\tconst { cards } = await player\r\n\t\t\t\t\t\t.choosePlayerCard(source, \"h\")\r\n\t\t\t\t\t\t.set(\"prompt\", get.prompt(\"landu_shixinmrfz\"))\r\n\t\t\t\t\t\t.set(\"filterButton\", button => {\r\n\t\t\t\t\t\t\treturn !button.link.storage.landu_shixinmrfz;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (cards) {\r\n\t\t\t\t\t\tcards.forEach(card => {\r\n\t\t\t\t\t\t\tcard.addGaintag(\"landu_shixinmrfz_tag\");\r\n\t\t\t\t\t\t\tcard.storage.landu_shixinmrfz = true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 0.8,\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//吉星\r\n\t\trenweimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tusable: 1,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseChange\",\r\n\t\t\t},\r\n\t\t\tfirstDo: true,\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tlet phase = trigger.phaseList[trigger.num];\r\n\t\t\t\tevent.result = await player\r\n\t\t\t\t\t.chooseCard()\r\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"renweimrfz\"))\r\n\t\t\t\t\t.set(\"prompt\", `你可以交换牌堆顶和手牌中的一张牌<br>当前阶段:<font color='red'>${get.translation(phase)}</font>`)\r\n\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tlet phase = get.event().phaseName;\r\n\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\tswitch (phase) {\r\n\t\t\t\t\t\t\tcase \"phaseDraw\":\r\n\t\t\t\t\t\t\tcase \"phaseUse\":\r\n\t\t\t\t\t\t\t\treturn get.color(card) === \"red\" ? 100 - get.value(card) : 0;\r\n\t\t\t\t\t\t\tcase \"phaseDiscard\":\r\n\t\t\t\t\t\t\t\treturn get.color(card) === \"black\" ? 100 - get.value(card) : 0;\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\treturn player.hasSkill(\"tiandingmrfz\") ? 0 : 6 - get.value(card);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"phaseName\", phase)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet card = event.cards[0];\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tawait player.gain(_status.pileTop);\r\n\t\t\t\tui.cardPile.insertBefore(card, ui.cardPile.firstChild);\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tlet name = trigger.phaseList[trigger.num + 1] ? trigger.phaseList[trigger.num + 1] + \"End\" : \"phaseEnd\";\r\n\t\t\t\tplayer.addTempSkill(\"renweimrfz_knowFirstCard\", { player: name });\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tknowFirstCard: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\ttiandingmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseChange\",\r\n\t\t\t},\r\n\t\t\tlastDo: true,\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = 2;\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tlet num = player.getHistory(\"useSkill\", evt => evt.skill === \"tiandingmrfz\").length;\r\n\t\t\t\treturn player.storage.tiandingmrfz > num;\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tlet phase = event.phaseList[event.num];\r\n\t\t\t\tlet know = player.hasSkill(\"renweimrfz_knowFirstCard\");\r\n\t\t\t\tif (know) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tlet color = get.color(_status.pileTop);\r\n\t\t\t\t\tswitch (phase) {\r\n\t\t\t\t\t\tcase \"phaseDraw\":\r\n\t\t\t\t\t\tcase \"phaseUse\":\r\n\t\t\t\t\t\t\tif (color !== \"red\") return false;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"phaseDiscard\":\r\n\t\t\t\t\t\t\tif (color !== \"black\" && player.countCards(\"h\") + 1 > player.getHandcardLimit()) return false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn ![\"phaseUse\", \"phaseDraw\"].includes(phase);\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tlet phase = event.phaseList[event.num];\r\n\t\t\t\treturn `是否进行判定，若判定牌为红，你本回合使用【杀】的次数和攻击距离+1且本技能本回合发动次数+1，反之你跳过此阶段(${get.translation(phase)})？`;\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { card, color } = await player\r\n\t\t\t\t\t.judge()\r\n\t\t\t\t\t.set(\"judge\", card => {\r\n\t\t\t\t\t\tlet color = get.color(card);\r\n\t\t\t\t\t\treturn color === \"red\" ? -4 : 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"judge2\", result => result.bool === false)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (get.position(card) === \"d\") player.gain(card, \"gain2\");\r\n\t\t\t\tif (color === \"red\") {\r\n\t\t\t\t\tplayer.storage.tiandingmrfz++;\r\n\t\t\t\t\tif (!player.hasSkill(\"tiandingmrfz_eff\")) player.addTempSkill(\"tiandingmrfz_eff\", { player: \"phaseEnd\" });\r\n\t\t\t\t\tplayer.addMark(\"tiandingmrfz_eff\", 1, false);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer.skip(trigger.phaseList[trigger.num]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"tiandingmrfz_clear\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.tiandingmrfz = 2;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"·使用【杀】的次数+#<br>·攻击距离+#\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable(card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name === \"sha\") {\r\n\t\t\t\t\t\t\t\treturn num + player.countMark(\"tiandingmrfz_eff\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tattackRange: function (player, num) {\r\n\t\t\t\t\t\t\treturn num + player.countMark(\"tiandingmrfz_eff\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//松桐\r\n\t\txianchoumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent(_, player) {\r\n\t\t\t\t\tlet str = [];\r\n\t\t\t\t\tif (player.hasSkill(\"xianchoumrfz\")) {\r\n\t\t\t\t\t\tstr.push(`·已经使用过的类型:${get.translation(player.storage[\"xianchoumrfz\"])}`);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn str.join(\"<br>\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\treturn event.card && !event.card.xianchoumrfz && !player.storage[\"xianchoumrfz\"].includes(get.type2(event.card));\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tlet num = game.getRoundHistory(\"everything\", evt => evt.name === \"xianchoumrfz\").length + 1;\r\n\t\t\t\tevent.result = await player\r\n\t\t\t\t\t.chooseTarget()\r\n\t\t\t\t\t.set(\"prompt\", `你可以令一名其他角色视为使用${num}张【无中生有】并弃置${num}张牌`)\r\n\t\t\t\t\t.set(\"ai\", target => get.attitude2(target) > 0)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tplayer.storage[\"xianchoumrfz\"].add(get.type2(trigger.card));\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst [target] = event.targets;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tlet num = game.getRoundHistory(\"everything\", evt => evt.name === \"xianchoumrfz\").length;\r\n\r\n\t\t\t\tfor (let i = 0; i < num; i++) {\r\n\t\t\t\t\tawait target.useCard({ name: \"wuzhong\", isCard: true, xianchoumrfz: true }, target);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tawait target.chooseToDiscard(num, true, \"he\").set(\"ai\", card => {\r\n\t\t\t\t\tconst evt = _status.event;\r\n\t\t\t\t\treturn evt.name === \"phaseUse\" && evt.player === get.player() ? -get.player().getUseValue(card) : -get.value(card);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tconst { cards } = await target\r\n\t\t\t\t\t.chooseCard([0, num])\r\n\t\t\t\t\t.set(\"filterCard\", card => {\r\n\t\t\t\t\t\treturn !card.hasGaintag(\"xianchoumrfz\");\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t.set(\"ai\", (card, player) => {\r\n\t\t\t\t\t\tlet info = get.info(card);\r\n\t\t\t\t\t\tif (typeof info.usable === \"number\") return 114514;\r\n\t\t\t\t\t\treturn get.value(card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"prompt\", `你可以令至多${num}张手牌本轮使用无次数限制`)\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\tif (cards) {\r\n\t\t\t\t\ttarget.addGaintag(cards, \"xianchoumrfz\");\r\n\t\t\t\t\tif (!target.storage.xianchoumrfz_igCount) {\r\n\t\t\t\t\t\ttarget.storage.xianchoumrfz_igCount = true;\r\n\t\t\t\t\t\ttarget\r\n\t\t\t\t\t\t\t.when({ global: \"roundStart\" })\r\n\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\tdelete player.storage.xianchoumrfz_igCount;\r\n\t\t\t\t\t\t\t\tplayer.removeGaintag(\"xianchoumrfz\");\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.assign({\r\n\t\t\t\t\t\t\t\tmod: {\r\n\t\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t\tcardUsable(card, player, num) {\r\n\t\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\t\tif (card.cards && card.cards.length === 1 && card.cards[0].hasGaintag(\"xianchoumrfz\")) return Infinity;\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t\taiOrder(player, card, num) {\r\n\t\t\t\t\t\t\t\t\t\tif (card.hasGaintag && card.hasGaintag(\"xianchoumrfz\")) return (num -= 0.1);\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"xianchoumrfz_clear\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage[\"xianchoumrfz\"] = [];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//录武官 云青萍\r\n\t\tluwumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tusable: 1,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"cardsDiscardAfter\",\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tinit() {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tgame.broadcastAll(() => {\r\n\t\t\t\t\tlib.translate[\"luwumrfz_tag\"] = \"invisible\";\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tlet target = _status.currentPhase;\r\n\t\t\t\treturn (\r\n\t\t\t\t\ttarget &&\r\n\t\t\t\t\ttarget.hasHistory(\"sourceDamage\", evt => {\r\n\t\t\t\t\t\treturn evt.cards && evt.cards.every(card => event.cards.includes(card));\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tmarktext: \"录武簿\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"录武簿\",\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tcontent(storage, player) {\r\n\t\t\t\t\tif (!Array.isArray(storage) || storage.length === 0) return `没有招式被记录`;\r\n\t\t\t\t\tlet trans = storage.map(arr => {\r\n\t\t\t\t\t\tlet cn = [];\r\n\t\t\t\t\t\tcn.add(arr[1] === undefined ? get.translation(arr[0]) : get.translation(arr[1]) + get.translation(arr[0]));\r\n\t\t\t\t\t\treturn cn.join(\"、\");\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn `记录的招式:${trans}`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\t// @ts-ignore\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tlet target = _status.currentPhase;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\treturn `是否令${get.translation(target)}模一张牌，然后你获得${get.cnNumber(event.cards.length)}张牌(${get.translation(event.cards)})，然后你将一张手牌视为【影】?`;\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\tif (event.cards?.some(card => get.value(card) < 0)) return false;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\treturn get.attitude2(_status.currentPhase) > 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tlet target = _status.currentPhase;\r\n\t\t\t\ttarget.draw();\r\n\t\t\t\tawait player.gain(trigger.cards, \"gain2\");\r\n\t\t\t\tif (player.countCards(\"h\", card => get.name(card) !== \"ying\") < 1) return;\r\n\t\t\t\tconst { cards } = await player\r\n\t\t\t\t\t.chooseCard(1, true)\r\n\t\t\t\t\t.set(\"prompt\", \"请选择一张手牌视为【影】\")\r\n\t\t\t\t\t.set(\"ai\", card => -get.value(card))\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\tlet card = cards[0];\r\n\t\t\t\tcard.addGaintag(\"luwumrfz_tag\");\r\n\t\t\t\ttarget\r\n\t\t\t\t\t.when({ player: \"phaseEnd\" })\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tplayer.unmarkSkill(event.name);\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tgame.broadcastAll(skill => {\r\n\t\t\t\t\t\t\tdelete lib.translate[skill];\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t}, event.name);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.assign({\r\n\t\t\t\t\t\tmod: {\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tcardUsable(card, player, num) {\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tif (card.name === trigger.getParent(2)?.card?.name) return (num += 1);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tintro: {\r\n\t\t\t\t\t\t\tname: \"录武\",\r\n\t\t\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\treturn `本回合使用的${get.translation(trigger.getParent(2).card.name)}次数+1`;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tluwumrfz: true,\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tluwumrfzName: trigger.getParent(2).card.name,\r\n\t\t\t\t\t});\r\n\t\t\t\tif (!Array.isArray(player.storage.luwumrfz)) player.storage.luwumrfz = [];\r\n\t\t\t\tlet storage = player.storage.luwumrfz;\r\n\t\t\t\tfor (let card of trigger.cards) {\r\n\t\t\t\t\tif (storage.some(arr => arr[0] === get.name(card) && arr[1] === get.nature(card))) continue;\r\n\t\t\t\t\tplayer.storage.luwumrfz.add([card.name, card.nature]);\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttarget.getSkills().forEach(skill => {\r\n\t\t\t\t\tif (skill.startsWith(\"player_when\")) {\r\n\t\t\t\t\t\tlet info = get.info(skill);\r\n\t\t\t\t\t\tif (info.luwumrfz) {\r\n\t\t\t\t\t\t\tgame.broadcastAll(\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t(skill, name) => {\r\n\t\t\t\t\t\t\t\t\tlib.translate[skill] = `${get.translation(name)[0]}↑`;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tskill,\r\n\t\t\t\t\t\t\t\tinfo.luwumrfzName\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\ttarget.markSkill(skill);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.2,\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tcardname(card, player, name) {\r\n\t\t\t\t\tif (card.hasGaintag(\"luwumrfz_tag\")) {\r\n\t\t\t\t\t\treturn \"ying\";\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tbaizhaomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"chooseToUse\",\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tlet storage = player.storage.luwumrfz;\r\n\t\t\t\tif (!Array.isArray(storage) || storage.length === 0) return false;\r\n\t\t\t\tlet names = storage.map(arr => arr[0]);\r\n\t\t\t\tfor (let name of names) {\r\n\t\t\t\t\tif (!event.filterCard({ name: name }, player, event)) continue;\r\n\t\t\t\t\treturn player.countCards(\"h\", card => get.name(card) === \"ying\") > 0;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tchooseButton: {\r\n\t\t\t\tdialog(event, player) {\r\n\t\t\t\t\tlet list = [];\r\n\t\t\t\t\tlet storage = player.storage.luwumrfz;\r\n\t\t\t\t\tfor (let arr of storage) {\r\n\t\t\t\t\t\tlist.push([get.translation(get.type(arr[0])), \"\", arr[0], arr[1]]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * @type {Dialog}\r\n\t\t\t\t\t */\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tconst dialog = ui.create.dialog(\"百招\", [list, \"vcard\"]);\r\n\t\t\t\t\treturn dialog;\r\n\t\t\t\t},\r\n\t\t\t\tfilter(button, player) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\treturn _status.event.getParent().filterCard({ name: button.link[2] }, player, _status.event.getParent());\r\n\t\t\t\t},\r\n\t\t\t\tcheck(button) {\r\n\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (player.countCards(\"hs\", button.link[2]) > 0) {\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (button.link[2] == \"wugu\") {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tvar effect = player.getUseValue(button.link[2]);\r\n\t\t\t\t\tif (effect > 0) {\r\n\t\t\t\t\t\treturn effect;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t},\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tbackup(links, player) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tfilterCard(card, player) {\r\n\t\t\t\t\t\t\treturn get.name(card) === \"ying\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\taudio: \"baizhaomrfz\",\r\n\t\t\t\t\t\tselectCard: 1,\r\n\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t\tcheck(card) {\r\n\t\t\t\t\t\t\treturn 6 - get.value(card);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tposition: \"h\",\r\n\t\t\t\t\t\tviewAs: { name: links[0][2], nature: links[0][3] },\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tprompt(links, player) {\r\n\t\t\t\t\treturn \"将一张【影】当做\" + (get.translation(links[0][3]) || \"\") + get.translation(links[0][2]) + \"使用\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 10,\r\n\t\t\t\tcombo: \"luwumrfz\",\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//火龙S黑角 太刀侠\r\n\t\tlianqimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCard2\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.card && get.tag(event.card, \"damage\") && player.countMark(\"lianqimrfz\") < 3;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tmarktext: \"刃\",\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"气刃\",\r\n\t\t\t\tcontent(storage) {\r\n\t\t\t\t\tswitch (storage) {\r\n\t\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\t\treturn \"黑龙歼灭刀已解放不屈白刃！\";\r\n\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\treturn \"黑龙歼灭刀已解放华贵黄刃！\";\r\n\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t\treturn \"黑龙歼灭刀已解放至尊红刃！\";\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\treturn \"孩子别怕，我带着黑龙歼灭刀来救你了！\";\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.addMark(\"lianqimrfz\", 1);\r\n\t\t\t},\r\n\t\t\tgroup: \"lianqimrfz_damage\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\taudio: \"lianqimrfz\",\r\n\t\t\t\t\ttrigger: { source: \"damageBegin\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn event.card !== undefined;\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet evt = trigger.getParent(2);\r\n\t\t\t\t\t\tlet num = player.countMark(\"lianqimrfz\");\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (typeof evt.baseDamage === \"number\") num += evt.baseDamage - 1;\r\n\t\t\t\t\t\ttrigger.num = num;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tcombo: \"denglongmrfz\",\r\n\t\t\t\tthreaten: 1.8,\r\n\t\t\t},\r\n\t\t},\r\n\t\tdenglongmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.card.name === \"sha\" && event.targets && event.targets.length === 1;\r\n\t\t\t},\r\n\t\t\tusable: 1,\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\treturn get.effect(event.targets[0], event.card, player, player) > 0;\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.when(\"useCardAfter\")\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t.filter((event, player) => {\r\n\t\t\t\t\t\treturn event.card === trigger.card;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tplayer.removeMark(\"lianqimrfz\", 1);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tlet data = lib.config.sjzxDenglongData || {\r\n\t\t\t\t\ttotal: 0,\r\n\t\t\t\t\tsuccess: 0,\r\n\t\t\t\t};\r\n\t\t\t\t//获取玩家操作的登龙的成功率\r\n\t\t\t\tlet probability = data.success / data.total || 0;\r\n\t\t\t\tif (_status.auto || !player.isUnderControl(true)) {\r\n\t\t\t\t\tprobability = Math.max(0.6, probability); //设置一个最小值\r\n\t\t\t\t\tif (Math.random() < probability) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttrigger.getParent().effectCount++;\r\n\t\t\t\t\t\tplayer.say(\"黑龙歼灭刀大人登龙成功！其他武器原地纳刀敬礼！\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tplayer.say(\"力竭倒下\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet target = trigger.targets[0];\r\n\t\t\t\tlet targetCopy = target.cloneNode(true);\r\n\t\t\t\tlet playerCopy = player.cloneNode(true);\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\ttargetCopy.trueElement = target;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayerCopy.trueElement = player;\r\n\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayerCopy.style.position = \"absolute\";\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayerCopy.style.left = \"50%\";\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayerCopy.style.zIndex = 114514;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayerCopy.style.transform = \"scale(0.2)\";\r\n\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\ttargetCopy.style.zIndex = 114514;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\ttargetCopy.style.position = \"absolute\";\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\ttargetCopy.style.transform = \"scale(0.5)\";\r\n\r\n\t\t\t\tdocument.body.appendChild(targetCopy);\r\n\t\t\t\tdocument.body.appendChild(playerCopy);\r\n\t\t\t\ttarget.hide();\r\n\t\t\t\tplayer.hide();\r\n\t\t\t\tgame.pause();\r\n\r\n\t\t\t\t//开登！\r\n\t\t\t\tconst enemy = {\r\n\t\t\t\t\telement: targetCopy,\r\n\t\t\t\t\tx: target.getBoundingClientRect().x,\r\n\t\t\t\t\ty: target.getBoundingClientRect().y,\r\n\t\t\t\t\tdx: 0,\r\n\t\t\t\t\tdy: 0,\r\n\t\t\t\t\twidth: 0,\r\n\t\t\t\t\theight: 0,\r\n\t\t\t\t\tbodyRect: null,\r\n\r\n\t\t\t\t\tinit() {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tconst rect = this.element.getBoundingClientRect();\r\n\t\t\t\t\t\tconst bodyRect = document.body.getBoundingClientRect();\r\n\r\n\t\t\t\t\t\tthis.x = rect.left;\r\n\t\t\t\t\t\tthis.y = rect.top;\r\n\t\t\t\t\t\tthis.width = rect.width;\r\n\t\t\t\t\t\tthis.height = rect.height;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tthis.bodyRect = bodyRect;\r\n\r\n\t\t\t\t\t\tthis.dx = (Math.random() * 3 + 0.5) * (Math.random() > 0.5 ? 1 : -1);\r\n\t\t\t\t\t\tthis.dy = (Math.random() * 3 + 0.5) * (Math.random() > 0.5 ? 1 : -1);\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\tupdate() {\r\n\t\t\t\t\t\tthis.x += this.dx;\r\n\t\t\t\t\t\tthis.y += this.dy;\r\n\r\n\t\t\t\t\t\t//@ts-ignore 左右边界反弹\r\n\t\t\t\t\t\tif (this.x <= 0 || this.x + this.width >= this.bodyRect.width) {\r\n\t\t\t\t\t\t\tthis.dx *= -1;\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tthis.x = Math.max(0, Math.min(this.x, this.bodyRect.width - this.width));\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// 上边界反弹\r\n\t\t\t\t\t\tif (this.y <= 0) {\r\n\t\t\t\t\t\t\tthis.dy *= -1;\r\n\t\t\t\t\t\t\tthis.y = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tconst bottomMargin = 1.2 * (this.bodyRect.height - playerCopy.getBoundingClientRect().y);\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif (this.y + this.height >= this.bodyRect.height - bottomMargin) {\r\n\t\t\t\t\t\t\tthis.dy *= -1;\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tthis.y = this.bodyRect.height - this.height - bottomMargin;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tthis.element.style.left = `${this.x}px`;\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tthis.element.style.top = `${this.y}px`;\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t\tconst taidaoxia = {\r\n\t\t\t\t\telement: playerCopy,\r\n\t\t\t\t\tx: 0,\r\n\t\t\t\t\ty: 0,\r\n\t\t\t\t\ttargetX: null,\r\n\t\t\t\t\ttargetY: null,\r\n\t\t\t\t\tmoving: false,\r\n\t\t\t\t\tduration: 500,\r\n\t\t\t\t\tstartTimestamp: null,\r\n\t\t\t\t\tlisten: [],\r\n\t\t\t\t\tclickCount: 0,\r\n\t\t\t\t\thasMoved: false,\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tinit(playerElement = this.element) {\r\n\t\t\t\t\t\tthis.element = playerElement;\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tthis.x = this.element.offsetLeft;\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tthis.y = this.element.offsetTop;\r\n\r\n\t\t\t\t\t\tfunction listen(e) {\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tconst targetX = e.clientX - taidaoxia.element.offsetWidth / 2;\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tconst targetY = e.clientY - taidaoxia.element.offsetHeight / 2;\r\n\r\n\t\t\t\t\t\t\ttaidaoxia.setTarget(targetX, targetY);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tthis.listen.push(listen);\r\n\r\n\t\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\t\tdocument.addEventListener(\"click\", listen);\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\tsetTarget(x, y) {\r\n\t\t\t\t\t\tthis.targetX = x;\r\n\t\t\t\t\t\tthis.targetY = y;\r\n\t\t\t\t\t\tthis.moving = true;\r\n\t\t\t\t\t\tthis.startTimestamp = null;\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\tupdate() {\r\n\t\t\t\t\t\tif (!this.moving || this.targetX === null || this.targetY === null) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tconst now = performance.now();\r\n\r\n\t\t\t\t\t\tif (!this.startTimestamp) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tthis.startTimestamp = now;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tconst elapsed = now - this.startTimestamp;\r\n\t\t\t\t\t\tconst progress = Math.min(elapsed / this.duration, 1);\r\n\r\n\t\t\t\t\t\tconst prevX = this.x;\r\n\t\t\t\t\t\tconst prevY = this.y;\r\n\r\n\t\t\t\t\t\tthis.x += (this.targetX - this.x) * progress;\r\n\t\t\t\t\t\tthis.y += (this.targetY - this.y) * progress;\r\n\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tthis.element.style.left = `${Math.round(this.x)}px`;\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tthis.element.style.top = `${Math.round(this.y)}px`;\r\n\r\n\t\t\t\t\t\tif (Math.abs(this.x - prevX) > 1 || Math.abs(this.y - prevY) > 1) {\r\n\t\t\t\t\t\t\tthis.hasMoved = true;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (progress >= 1) {\r\n\t\t\t\t\t\t\tthis.moving = false;\r\n\t\t\t\t\t\t\tthis.startTimestamp = null;\r\n\r\n\t\t\t\t\t\t\tif (this.hasMoved) {\r\n\t\t\t\t\t\t\t\tthis.clickCount++;\r\n\t\t\t\t\t\t\t\tthis.hasMoved = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\r\n\t\t\t\ttaidaoxia.init();\r\n\t\t\t\tenemy.init();\r\n\t\t\t\tmainLoop();\r\n\r\n\t\t\t\tfunction recover() {\r\n\t\t\t\t\tdata.total++;\r\n\r\n\t\t\t\t\ttarget.show();\r\n\t\t\t\t\tplayer.show();\r\n\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\ttargetCopy.delete();\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tplayerCopy.delete();\r\n\r\n\t\t\t\t\ttaidaoxia.listen.forEach(listen => {\r\n\t\t\t\t\t\tdocument.removeEventListener(\"click\", listen);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tgame.resume();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction success() {\r\n\t\t\t\t\trecover();\r\n\t\t\t\t\tdata.success++;\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\ttrigger.getParent().effectCount++;\r\n\t\t\t\t\tplayer.say(\"黑龙歼灭刀大人登龙成功！其他武器原地纳刀敬礼！\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction detectCollisions() {\r\n\t\t\t\t\tconst playerEl = taidaoxia.element;\r\n\t\t\t\t\tconst enemyEl = enemy.element;\r\n\r\n\t\t\t\t\treturn isColliding(playerEl, enemyEl);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction mainLoop() {\r\n\t\t\t\t\ttaidaoxia.update();\r\n\t\t\t\t\tenemy.update();\r\n\r\n\t\t\t\t\tconst collided = detectCollisions();\r\n\r\n\t\t\t\t\tif (collided) {\r\n\t\t\t\t\t\tsuccess();\r\n\t\t\t\t\t\tgame.saveConfig(\"sjzxDenglongData\", data);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (taidaoxia.clickCount >= 1) {\r\n\t\t\t\t\t\trecover();\r\n\t\t\t\t\t\tgame.saveConfig(\"sjzxDenglongData\", data);\r\n\t\t\t\t\t\tplayer.say(\"力竭倒下\");\r\n\t\t\t\t\t\twhichWayToast.showToast(\"🦐太刀侠\", 2000);\r\n\t\t\t\t\t\tif (probability !== 0 && probability <= 0.5) {\r\n\t\t\t\t\t\t\ttarget.chat(\"玩太刀玩的\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\trequestAnimationFrame(mainLoop);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction isColliding(elementA, elementB) {\r\n\t\t\t\t\tconst rectA = elementA.getBoundingClientRect();\r\n\t\t\t\t\tconst rectB = elementB.getBoundingClientRect();\r\n\r\n\t\t\t\t\treturn !(rectA.top > rectB.bottom || rectA.bottom < rectB.top || rectA.right < rectB.left || rectA.left > rectB.right);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tjuhemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\ttarget: \"shaMiss\",\r\n\t\t\t\tglobal: \"eventNeutralized\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player, name) {\r\n\t\t\t\tif (event.type !== \"card\" || event.player === player) return false;\r\n\t\t\t\tif (name !== \"shaMiss\" && event._neutralize_event.player !== player) return false;\r\n\t\t\t\treturn event.player;\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tprompt(event, player) {\r\n\t\t\t\treturn `是否视为对${get.translation(event.player)}使用一张【杀】？`;\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\treturn get.effect(event.player, { name: \"sha\", isCard: true }, player, player) > 0;\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.useCard({ name: \"sha\", isCard: true }, trigger.player).set(\"addCount\", false);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 0.8,\r\n\t\t\t},\r\n\t\t},\r\n\t\t//Christine\r\n\t\tmixumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: [\"loseAfter\", \"loseAsyncAfter\"],\r\n\t\t\t},\r\n\t\t\tonremove(player, skill) {\r\n\t\t\t\tconst cards = player.getExpansions(skill);\r\n\t\t\t\tif (cards.length) player.loseToDiscardpile(cards);\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tconst cards = player.getExpansions(\"mixumrfz\");\r\n\t\t\t\tif (cards.length >= player.maxHp * 2) return false;\r\n\t\t\t\tif (event.type !== \"discard\") return false;\r\n\t\t\t\treturn game.hasPlayer(current => {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tlet evt = event.getl(current);\r\n\t\t\t\t\treturn !(!evt || !evt.cards2 || evt.cards2.filterInD(\"d\").length < 1);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tlet cardsList = [];\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tlet players = game.filterPlayer().sortBySeat(_status.currentPhase);\r\n\t\t\t\tfor (var current of players) {\r\n\t\t\t\t\tvar cards = [];\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tvar evt = trigger.getl(current);\r\n\t\t\t\t\tif (!evt || !evt.cards2) continue;\r\n\t\t\t\t\tlet cardsx = evt.cards2.filterInD(\"d\");\r\n\t\t\t\t\tcards.addArray(cardsx);\r\n\t\t\t\t\tif (cards.length) {\r\n\t\t\t\t\t\tcardsList.push(...cards);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseButton([\"选择置于武将牌上的牌\", cardsList])\r\n\t\t\t\t\t.set(\"selectButton\", () => {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\treturn [1, get.event().numx];\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"numx\", player.maxHp * 2 - player.getExpansions(\"mixumrfz\").length)\r\n\t\t\t\t\t.set(\"ai\", button => get.value(button.link))\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tevent.result = {\r\n\t\t\t\t\t...result,\r\n\t\t\t\t\tcost_data: {\r\n\t\t\t\t\t\tcards: result.links,\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst next = player.addToExpansion(event.cost_data.cards, player, \"give\");\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tnext.gaintag.add(\"mixumrfz\");\r\n\t\t\t\tawait next;\r\n\t\t\t},\r\n\t\t\tmarktext: \"绪\",\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"expansion\",\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tcombo: \"yashimrfz\",\r\n\t\t\t},\r\n\t\t},\r\n\t\tyashimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tinit() {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tgame.broadcastAll(() => {\r\n\t\t\t\t\tlib.translate[\"yashimrfz_backup\"] = \"雅食\";\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tconst cards = player.getExpansions(\"mixumrfz\");\r\n\t\t\t\tif (cards.length < 1) return false;\r\n\t\t\t\tlet list = [\"color\", \"type2\", \"suit\"];\r\n\t\t\t\tfor (let i = 0; i < list.length; i++) {\r\n\t\t\t\t\tif (judge(list[i], cards).size === i + 2) return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t\tfunction judge(item, cards) {\r\n\t\t\t\t\treturn new Set(cards.map(card => get[item](card)));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tchooseButton: {\r\n\t\t\t\tdialog(event, player) {\r\n\t\t\t\t\tlet cards = player.getExpansions(\"mixumrfz\");\r\n\t\t\t\t\tlet check = {\r\n\t\t\t\t\t\tsuit: [],\r\n\t\t\t\t\t\ttype: [],\r\n\t\t\t\t\t\tcolor: [],\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tlet seenSuit = new Set();\r\n\t\t\t\t\tlet seenType = new Set();\r\n\t\t\t\t\tlet seenColor = new Set();\r\n\r\n\t\t\t\t\tfor (let card of cards) {\r\n\t\t\t\t\t\tconst suit = get.suit(card);\r\n\t\t\t\t\t\tconst type = get.type2(card);\r\n\t\t\t\t\t\tconst color = get.color(card);\r\n\r\n\t\t\t\t\t\tif (!seenSuit.has(suit)) {\r\n\t\t\t\t\t\t\tseenSuit.add(suit);\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tcheck.suit.push(card);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (!seenType.has(type)) {\r\n\t\t\t\t\t\t\tseenType.add(type);\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tcheck.type.push(card);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (!seenColor.has(color)) {\r\n\t\t\t\t\t\t\tseenColor.add(color);\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tcheck.color.push(card);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (let key in check) {\r\n\t\t\t\t\t\tlet info = check[key];\r\n\t\t\t\t\t\tif (key === \"suit\" && info.length === 4) {\r\n\t\t\t\t\t\t\tgame.broadcastAll(\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tfunction (event, info) {\r\n\t\t\t\t\t\t\t\t\tevent.yashimrfz_aiCheck = info;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tevent,\r\n\t\t\t\t\t\t\t\tinfo\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (key === \"type\" && info.length === 3) {\r\n\t\t\t\t\t\t\tgame.broadcastAll(\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tfunction (event, info) {\r\n\t\t\t\t\t\t\t\t\tevent.yashimrfz_aiCheck = info;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tevent,\r\n\t\t\t\t\t\t\t\tinfo\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (key === \"color\" && info.length === 2) {\r\n\t\t\t\t\t\t\tgame.broadcastAll(\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tfunction (event, info) {\r\n\t\t\t\t\t\t\t\t\tevent.yashimrfz_aiCheck = info;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tevent,\r\n\t\t\t\t\t\t\t\tinfo\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn ui.create.dialog(\"雅食\", cards, \"hidden\");\r\n\t\t\t\t},\r\n\t\t\t\tcheck(button) {\r\n\t\t\t\t\tlet event = get.event().parent;\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tlet check = event.yashimrfz_aiCheck;\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\treturn check.includes(button.link);\r\n\t\t\t\t},\r\n\t\t\t\tselect() {\r\n\t\t\t\t\treturn [1, Infinity];\r\n\t\t\t\t},\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tfilterOk() {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tconst player = get.player();\r\n\t\t\t\t\tconst buttons = ui.selected.buttons;\r\n\t\t\t\t\tlet list = [\"color\", \"type2\", \"suit\"];\r\n\t\t\t\t\tlet bool = false;\r\n\t\t\t\t\tfor (let i = 0; i < list.length; i++) {\r\n\t\t\t\t\t\tlet tmp = buttons.map(button => get[list[i]](button));\r\n\t\t\t\t\t\tif (tmp.length === i + 2 && new Set(tmp).size === i + 2) {\r\n\t\t\t\t\t\t\tbool = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn bool;\r\n\t\t\t\t},\r\n\t\t\t\tcomplexSelect: true,\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tbackup(links, player) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\taudio: \"yashimrfz\",\r\n\t\t\t\t\t\tfilterCard() {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tselectCard: -1,\r\n\t\t\t\t\t\tcard: links,\r\n\t\t\t\t\t\tdelay: false,\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\t\tconst lines = [\"Are people so unhappy when they love?\", \"Pitiful creature of darkness, what kind of life have you known? God, give me courage to show you you are not alone!\", \"I am your angel of music.\"];\r\n\t\t\t\t\t\t\tconst cards = lib.skill.yashimrfz_backup.card;\r\n\t\t\t\t\t\t\tawait player.loseToDiscardpile(cards);\r\n\t\t\t\t\t\t\tawait player.draw(cards.length);\r\n\r\n\t\t\t\t\t\t\tconst cardsx = player.getExpansions(\"mixumrfz\");\r\n\t\t\t\t\t\t\tif (cardsx.length > 0) {\r\n\t\t\t\t\t\t\t\tlet i = Math.min(3, cardsx.length);\r\n\t\t\t\t\t\t\t\tplayer.say(lines[i - 1]);\r\n\t\t\t\t\t\t\t\tplayer.recover();\r\n\t\t\t\t\t\t\t\tplayer.loseToDiscardpile(cardsx);\r\n\t\t\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tcombo: \"mixumrfz\",\r\n\t\t\t\tthreaten: 1.5,\r\n\t\t\t\torder: 13,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//蒂比\r\n\t\tpenhuimrfz: {\r\n\t\t\taudio: 3,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardAfter\",\r\n\t\t\t},\r\n\t\t\ttransferRGB(card) {\r\n\t\t\t\tlet [r, g, b] = [0, 0, 0];\r\n\t\t\t\tlet number = get.number(card),\r\n\t\t\t\t\tcolor = get.color(card),\r\n\t\t\t\t\ttype = get.type2(card);\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tlet num = (number || 0) * 10;\r\n\t\t\t\tif (color === \"red\") {\r\n\t\t\t\t\tif (type === \"basic\") r += num;\r\n\t\t\t\t\tif (type === \"equip\") b += num;\r\n\t\t\t\t\tif (type === \"trick\") g += num;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (type === \"basic\") r -= num;\r\n\t\t\t\t\tif (type === \"equip\") b -= num;\r\n\t\t\t\t\tif (type === \"trick\") g -= num;\r\n\t\t\t\t}\r\n\t\t\t\treturn {\r\n\t\t\t\t\tr: r,\r\n\t\t\t\t\tg: g,\r\n\t\t\t\t\tb: b,\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tasync addColors(color1, color2) {\r\n\t\t\t\tfunction parseColor(color) {\r\n\t\t\t\t\tif (typeof color === \"string\") {\r\n\t\t\t\t\t\tconst [r, g, b] = color.split(/[,|]/).map(Number);\r\n\t\t\t\t\t\treturn { r, g, b };\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn color;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst c1 = parseColor(color1);\r\n\t\t\t\tconst c2 = parseColor(color2);\r\n\r\n\t\t\t\tfunction convert(num) {\r\n\t\t\t\t\treturn ((num % 256) + 256) % 256;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tr: convert(c1.r + c2.r),\r\n\t\t\t\t\tg: convert(c1.g + c2.g),\r\n\t\t\t\t\tb: convert(c1.b + c2.b),\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tclassifyColor(rgb) {\r\n\t\t\t\tconst colorCenters = {\r\n\t\t\t\t\tred: { r: 255, g: 0, b: 0 },\r\n\t\t\t\t\tgreen: { r: 0, g: 255, b: 0 },\r\n\t\t\t\t\tblue: { r: 0, g: 0, b: 255 },\r\n\t\t\t\t};\r\n\r\n\t\t\t\tlet minDist = Infinity;\r\n\t\t\t\tlet closestType = null;\r\n\r\n\t\t\t\tfor (let key in colorCenters) {\r\n\t\t\t\t\tconst dist = getDistance(rgb, colorCenters[key]);\r\n\t\t\t\t\tif (dist < minDist) {\r\n\t\t\t\t\t\tminDist = dist;\r\n\t\t\t\t\t\tclosestType = key;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn closestType;\r\n\r\n\t\t\t\tfunction getDistance(c1, c2) {\r\n\t\t\t\t\treturn Math.sqrt(Math.pow(c1.r - c2.r, 2) + Math.pow(c1.g - c2.g, 2) + Math.pow(c1.b - c2.b, 2));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.card && typeof get.number(event.card) === \"number\";\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tmark(dialog, storage) {\r\n\t\t\t\t\tif (storage === undefined)\r\n\t\t\t\t\t\tstorage = {\r\n\t\t\t\t\t\t\tr: 64,\r\n\t\t\t\t\t\t\tg: 128,\r\n\t\t\t\t\t\t\tb: 128,\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\tconst content = dialog.querySelector(\".content-container .content\");\r\n\r\n\t\t\t\t\tconst hsvFromRGB = rgbToHsv(storage.r, storage.g, storage.b);\r\n\t\t\t\t\tconst v = hsvFromRGB.v;\r\n\r\n\t\t\t\t\tconst panelSize = {\r\n\t\t\t\t\t\twidth: 150,\r\n\t\t\t\t\t\theight: 75,\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tconst panelContainer = ui.create.div(\r\n\t\t\t\t\t\t\"penhuimrfz_color_panel_container\",\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\twidth: `${panelSize.width}px`,\r\n\t\t\t\t\t\t\theight: `${panelSize.height}px`,\r\n\t\t\t\t\t\t\tmargin: \"10px auto\",\r\n\t\t\t\t\t\t\tposition: \"relative\",\r\n\t\t\t\t\t\t\tborder: \"1px solid #ccc\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcontent\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tconst canvas = document.createElement(\"canvas\");\r\n\t\t\t\t\tcanvas.width = panelSize.width;\r\n\t\t\t\t\tcanvas.height = panelSize.height;\r\n\t\t\t\t\tconst ctx = canvas.getContext(\"2d\");\r\n\r\n\t\t\t\t\tfor (let x = 0; x < panelSize.width; x++) {\r\n\t\t\t\t\t\tfor (let y = 0; y < panelSize.height; y++) {\r\n\t\t\t\t\t\t\tconst hue = (x / panelSize.width) * 360;\r\n\t\t\t\t\t\t\tconst sat = y / panelSize.height;\r\n\r\n\t\t\t\t\t\t\tconst rgb = hsvToRgb(hue, sat, v);\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tconst pixelData = ctx.createImageData(1, 1);\r\n\t\t\t\t\t\t\tconst data = pixelData.data;\r\n\t\t\t\t\t\t\tdata[0] = rgb.r;\r\n\t\t\t\t\t\t\tdata[1] = rgb.g;\r\n\t\t\t\t\t\t\tdata[2] = rgb.b;\r\n\t\t\t\t\t\t\tdata[3] = 255;\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tctx.putImageData(pixelData, x, y);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tpanelContainer.appendChild(canvas);\r\n\r\n\t\t\t\t\tfunction getMarkerPosition(r, g, b) {\r\n\t\t\t\t\t\tconst hsv = rgbToHsv(r, g, b);\r\n\t\t\t\t\t\tconst x = (hsv.h / 360) * panelSize.width;\r\n\t\t\t\t\t\tconst y = hsv.s * panelSize.height;\r\n\t\t\t\t\t\treturn { x, y };\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst markerPos = getMarkerPosition(storage.r, storage.g, storage.b);\r\n\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tconst marker = ui.create.div(\r\n\t\t\t\t\t\t\"penhuimrfz_2d_marker\",\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\twidth: \"8px\",\r\n\t\t\t\t\t\t\theight: \"8px\",\r\n\t\t\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\t\t\ttop: `${markerPos.y - 4}px`,\r\n\t\t\t\t\t\t\tleft: `${markerPos.x - 4}px`,\r\n\t\t\t\t\t\t\tborder: \"2px solid white\",\r\n\t\t\t\t\t\t\tborderRadius: \"50%\",\r\n\t\t\t\t\t\t\tboxShadow: \"0 0 2px black\",\r\n\t\t\t\t\t\t\tpointerEvents: \"none\",\r\n\t\t\t\t\t\t\tzIndex: \"2\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tpanelContainer\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tconst valueSliderContainer = ui.create.div(\r\n\t\t\t\t\t\t\"penhuimrfz_value_slider_container\",\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\twidth: \"150px\",\r\n\t\t\t\t\t\t\theight: \"10px\",\r\n\t\t\t\t\t\t\tmargin: \"10px auto\",\r\n\t\t\t\t\t\t\tbackground: \"linear-gradient(to right, black, white)\",\r\n\t\t\t\t\t\t\tposition: \"relative\",\r\n\t\t\t\t\t\t\tborderRadius: \"5px\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcontent\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tconst valueSliderMarker = ui.create.div(\r\n\t\t\t\t\t\t\"penhuimrfz_value_slider_marker\",\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\twidth: \"4px\",\r\n\t\t\t\t\t\t\theight: \"100%\",\r\n\t\t\t\t\t\t\tbackground: \"red\",\r\n\t\t\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\t\t\tleft: `${v * 100}%`,\r\n\t\t\t\t\t\t\ttransform: \"translateX(-2px)\",\r\n\t\t\t\t\t\t\tpointerEvents: \"none\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tvalueSliderContainer\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tconst colorPreview = ui.create.div(\"penhuimrfz_preview\", {\r\n\t\t\t\t\t\twidth: \"40px\",\r\n\t\t\t\t\t\theight: \"20px\",\r\n\t\t\t\t\t\tdisplay: \"inline-block\",\r\n\t\t\t\t\t\tbackgroundColor: `rgb(${storage.r},${storage.g},${storage.b})`,\r\n\t\t\t\t\t\tborder: \"1px solid #999\",\r\n\t\t\t\t\t\tmarginRight: \"10px\",\r\n\t\t\t\t\t\tposition: \"relative\",\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tconst rgbDisplay = ui.create.div(\r\n\t\t\t\t\t\t\"penhuimrfz_rgb_display\",\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\t\tfontSize: \"14px\",\r\n\t\t\t\t\t\t\tjustifyContent: \"center\",\r\n\t\t\t\t\t\t\talignItems: \"center\",\r\n\t\t\t\t\t\t\tmarginTop: \"5px\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcontent\r\n\t\t\t\t\t);\r\n\t\t\t\t\trgbDisplay.appendChild(colorPreview);\r\n\t\t\t\t\trgbDisplay.innerHTML += `RGB(${storage.r}, ${storage.g}, ${storage.b})`;\r\n\r\n\t\t\t\t\t// HSV/RGB conversion utils\r\n\t\t\t\t\tfunction hsvToRgb(h, s, v) {\r\n\t\t\t\t\t\tlet f = (n, k = (n + h / 60) % 6) => v - v * s * Math.max(Math.min(k, 4 - k, 1), 0);\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tr: Math.round(f(5) * 255),\r\n\t\t\t\t\t\t\tg: Math.round(f(3) * 255),\r\n\t\t\t\t\t\t\tb: Math.round(f(1) * 255),\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction rgbToHsv(r, g, b) {\r\n\t\t\t\t\t\t((r /= 255), (g /= 255), (b /= 255));\r\n\t\t\t\t\t\tlet max = Math.max(r, g, b),\r\n\t\t\t\t\t\t\tmin = Math.min(r, g, b);\r\n\t\t\t\t\t\tlet h,\r\n\t\t\t\t\t\t\ts,\r\n\t\t\t\t\t\t\tv = max;\r\n\t\t\t\t\t\tlet d = max - min;\r\n\t\t\t\t\t\ts = max === 0 ? 0 : d / max;\r\n\r\n\t\t\t\t\t\tif (max === min) {\r\n\t\t\t\t\t\t\th = 0;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tswitch (max) {\r\n\t\t\t\t\t\t\t\tcase r:\r\n\t\t\t\t\t\t\t\t\th = (g - b) / d + (g < b ? 6 : 0);\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase g:\r\n\t\t\t\t\t\t\t\t\th = (b - r) / d + 2;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase b:\r\n\t\t\t\t\t\t\t\t\th = (r - g) / d + 4;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\th /= 6;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn { h: h * 360, s: s, v: v };\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet rgb = lib.skill.penhuimrfz.transferRGB(trigger.card);\r\n\t\t\t\tgame.broadcastAll(\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tasync function (rgb, player) {\r\n\t\t\t\t\t\tplayer.storage.penhuimrfz = await lib.skill.penhuimrfz.addColors(player.storage.penhuimrfz, rgb);\r\n\t\t\t\t\t},\r\n\t\t\t\t\trgb,\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tplayer\r\n\t\t\t\t);\r\n\r\n\t\t\t\tlet color = lib.skill.penhuimrfz.classifyColor(player.storage.penhuimrfz);\r\n\t\t\t\tconst translate = {\r\n\t\t\t\t\tblue: \"蓝色\",\r\n\t\t\t\t\tgreen: \"绿色\",\r\n\t\t\t\t\tred: \"红色\",\r\n\t\t\t\t};\r\n\t\t\t\tplayer.popup(translate[color]);\r\n\t\t\t\tswitch (color) {\r\n\t\t\t\t\tcase \"blue\":\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"green\":\r\n\t\t\t\t\t\tplayer.markSkill(\"penhuimrfz_mark\");\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t.when({ player: \"useCardEnd\" })\r\n\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\tplayer.unmarkSkill(\"penhuimrfz_mark\");\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.assign({\r\n\t\t\t\t\t\t\t\tmod: {\r\n\t\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t\ttargetInRange(card, player, target, now) {\r\n\t\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"red\": {\r\n\t\t\t\t\t\tconst { targets } = await player\r\n\t\t\t\t\t\t\t.chooseTarget(true)\r\n\t\t\t\t\t\t\t.set(\"prompt\", `对一名其他角色造成一点伤害`)\r\n\t\t\t\t\t\t\t.set(\"ai\", target => get.attitude(player, target) < 0)\r\n\t\t\t\t\t\t\t.set(\"filterTarget\", lib.filter.notMe)\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (!targets) return;\r\n\t\t\t\t\t\tif (targets[0]) targets[0].damage();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"penhuimrfz_init\", \"penhuimrfz_tip\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tmark: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"下次使用牌无距离限制\",\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tinit: {\r\n\t\t\t\t\taudio: \"penhuimrfz\",\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.penhuimrfz = {\r\n\t\t\t\t\t\t\tr: 64,\r\n\t\t\t\t\t\t\tg: 128,\r\n\t\t\t\t\t\t\tb: 128,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttip: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tinit() {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tgame.broadcastAll(function () {\r\n\t\t\t\t\t\t\tlib.translate[\"penhuimrfz_tip_blue\"] = \"<font color = blue>摸牌</font>\";\r\n\t\t\t\t\t\t\tlib.translate[\"penhuimrfz_tip_red\"] = \"<font color = red>伤害</font>\";\r\n\t\t\t\t\t\t\tlib.translate[\"penhuimrfz_tip_green\"] = \"<font color = green>距离</font>\";\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"useCardAfter\", \"loseBegin\", \"gainBegin\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet tag = [\"penhuimrfz_tip_blue\", \"penhuimrfz_tip_red\", \"penhuimrfz_tip_green\"];\r\n\t\t\t\t\t\ttag.forEach(t => {\r\n\t\t\t\t\t\t\tplayer.removeGaintag(t);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tlet cards = trigger.name === \"useCard\" ? player.getCards(\"h\") : player.getCards(\"h\").concat(trigger.cards);\r\n\t\t\t\t\t\tfor (let card of cards) {\r\n\t\t\t\t\t\t\tlet rgb = lib.skill.penhuimrfz.transferRGB(card);\r\n\t\t\t\t\t\t\tlet color = lib.skill.penhuimrfz.classifyColor(await lib.skill.penhuimrfz.addColors(player.storage.penhuimrfz, rgb));\r\n\t\t\t\t\t\t\tcard.addGaintag(`penhuimrfz_tip_${color}`);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//聆音\r\n\t\tqiansongmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"回合结束时摸三张牌\",\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"h\", card => !get.tag(card, \"damage\") && player.canRecast(card)) > 0;\r\n\t\t\t},\r\n\t\t\tprompt2() {\r\n\t\t\t\tlet cards = get.player().getCards(\"h\", card => !get.tag(card, \"damage\") && get.player().canRecast(card));\r\n\t\t\t\treturn `重铸${get.translation(cards)}，然后若你所有手牌均带有伤害类标签，你于回合结束时摸两张牌。`;\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\tlet cards = get.player().getCards(\"h\", card => !get.tag(card, \"damage\") && get.player().canRecast(card));\r\n\t\t\t\tlet value = cards.reduce((prev, card) => prev + get.value(card), 0);\r\n\t\t\t\treturn value <= 15;\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet cards = player.getCards(\"h\", card => !get.tag(card, \"damage\") && player.canRecast(card));\r\n\t\t\t\tawait player.recast(cards);\r\n\t\t\t\tlet a = player.countCards(\"h\", card => get.tag(card, \"damage\"));\r\n\t\t\t\tlet b = player.countCards(\"h\", card => !get.tag(card, \"damage\"));\r\n\t\t\t\tif (a > b) {\r\n\t\t\t\t\tplayer.markSkill(\"qiansongmrfz\");\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.when({ player: \"phaseEnd\" })\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t.step(() => {\r\n\t\t\t\t\t\t\tplayer.draw(3);\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"qiansongmrfz\");\r\n\t\t\t\t\t\t\tplayer.unmarkSkill(\"qiansongmrfz\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet card = get.cardPile2(\"sha\", \"random\");\r\n\t\t\t\t\tif (card) player.gain(card, \"gain2\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tqiancimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tinit() {\r\n\t\t\t\tlib.translate[\"qiancimrfz_tips\"] = \"伤害类牌\";\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tusable(skill, player) {\r\n\t\t\t\tlet num = player.storage.qiancimrfz || 0;\r\n\t\t\t\treturn num + 1;\r\n\t\t\t},\r\n\t\t\tintro: {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\treturn `【虔赐】出牌阶段使用次数上限：${(player.storage.qiancimrfz || 0) + 1}`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tfilterTarget: lib.filter.notMe,\r\n\t\t\tfilterCard: () => true,\r\n\t\t\tdiscard: false,\r\n\t\t\tlose: false,\r\n\t\t\tonremove: true,\r\n\t\t\tcheck(card) {\r\n\t\t\t\treturn get.tag(card, \"damage\") > 0;\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet {\r\n\t\t\t\t\tcards: cardsx,\r\n\t\t\t\t\ttargets: [target],\r\n\t\t\t\t} = event;\r\n\t\t\t\tawait player.give(cardsx, target);\r\n\t\t\t\tconst { cards } =\r\n\t\t\t\t\ttarget.getCards(\"h\").length <= 3\r\n\t\t\t\t\t\t? { cards: target.getCards(\"h\") }\r\n\t\t\t\t\t\t: await player\r\n\t\t\t\t\t\t\t\t.choosePlayerCard(\"h\", target, true)\r\n\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t.set(\"ai\", card => get.rand(0, 1))\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", `请展示${get.translation(target)}的三张手牌`)\r\n\t\t\t\t\t\t\t\t.set(\"selectButton\", 3)\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tawait player.showCards(cards, `${get.translation(player)}展示了${get.translation(target)}${get.cnNumber(cards.length)}张手牌`);\r\n\t\t\t\tlet damage = cards.filter(card => get.tag(card, \"damage\")).length;\r\n\t\t\t\tif (damage > 0) {\r\n\t\t\t\t\tplayer.line(target);\r\n\t\t\t\t\ttarget.damage(damage, player).set(\"qiancimrfz\", true);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"qiancimrfz_recover\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\trecover: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { source: [\"damageEnd\", \"dieAfter\"] },\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\treturn (event.qiancimrfz && event.name === \"damage\") || (event.name === \"die\" && event.getParent(2).qiancimrfz);\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (trigger.name === \"damage\") player.recover();\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tif (!player.storage.qiancimrfz) {\r\n\t\t\t\t\t\t\t\tplayer.storage.qiancimrfz = 0;\r\n\t\t\t\t\t\t\t\tplayer.markSkill(\"qiancimrfz\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tplayer.storage.qiancimrfz++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 5,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer(player) {\r\n\t\t\t\t\t\treturn player.countCards(\"h\", card => get.value(card) < 8) > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttarget(player, target) {\r\n\t\t\t\t\t\tlet att = get.attitude(player, target);\r\n\t\t\t\t\t\tlet cards = target.getCards(\"h\");\r\n\t\t\t\t\t\tlet num = -1.5;\r\n\t\t\t\t\t\tif (att < 0) {\r\n\t\t\t\t\t\t\tif (cards.length < 2) num += 1;\r\n\t\t\t\t\t\t\tif (target.hp < 3) num -= 1.5;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn num;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 钼铅\r\n\t\tcangshimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tonremove(player) {\r\n\t\t\t\tplayer.removeTip(\"cangshimrfz_tip\");\r\n\t\t\t},\r\n\t\t\tintro: {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\treturn `当你获得${get.translation(player.storage.cangshimrfz)}的牌时，你摸两张牌`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { control } = await player\r\n\t\t\t\t\t.chooseControl(lib.suit)\r\n\t\t\t\t\t.set(\"prompt\", `【藏石】：请选择一种花色，当你获得这种花色的牌后你摸两张牌`)\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\treturn \"diamond\";\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (control) {\r\n\t\t\t\t\tplayer.storage.cangshimrfz = control;\r\n\t\t\t\t\tplayer.markSkill(\"cangshimrfz\");\r\n\t\t\t\t\tplayer.addTip(\"cangshimrfz_tip\", `藏石 ${get.translation(control)}`);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"cangshimrfz_draw\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\taudio: \"cangshimrfz\",\r\n\t\t\t\t\ttrigger: { player: \"gainAfter\" },\r\n\t\t\t\t\tfilter: (event, player) => {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tif (!player.storage.cangshimrfz || event.getParent(2).name === \"cangshimrfz_draw\") return false;\r\n\t\t\t\t\t\treturn event.cards && event.cards.some(card => get.suit(card) === player.storage.cangshimrfz);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tawait player.draw(2);\r\n\t\t\t\t\t\tlet next = game.createEvent(\"cangshimrfz\");\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tnext.player = player;\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tnext.setContent(lib.skill.cangshimrfz.content);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.3,\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 水灯心\r\n\t\tsanyanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseEnd\",\r\n\t\t\t},\r\n\t\t\tgetSatisfied(player, stroage) {\r\n\t\t\t\tlet history = player.getHistory();\r\n\t\t\t\tlet result = [];\r\n\t\t\t\tfor (let key in history) {\r\n\t\t\t\t\tif (!stroage.includes(key)) continue;\r\n\t\t\t\t\tlet subHistory = history[key];\r\n\t\t\t\t\tif (key === \"useCard\") {\r\n\t\t\t\t\t\tfor (let evt of subHistory) {\r\n\t\t\t\t\t\t\tif (evt.card && get.type2(evt.card) === \"equip\") {\r\n\t\t\t\t\t\t\t\tresult.add(key);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (key === \"gain\") {\r\n\t\t\t\t\t\tif (subHistory.length > 0) {\r\n\t\t\t\t\t\t\tresult.add(key);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (player.hasSkill(\"sanyanmrfz_recovered\") && stroage.includes(\"recover\")) result.add(\"recover\");\r\n\r\n\t\t\t\treturn result;\r\n\t\t\t},\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = [\"gain\", \"useCard\", \"recover\"];\r\n\t\t\t},\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\tlet result = lib.skill.sanyanmrfz.getSatisfied(event.player, player.storage.sanyanmrfz);\r\n\t\t\t\treturn `你可以摸${get.cnNumber(2 * result.length)}张牌，然后令至多${get.cnNumber(result.length)}名其他角色摸一张牌`;\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn lib.skill.sanyanmrfz.getSatisfied(event.player, player.storage.sanyanmrfz).length > 0;\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet result = lib.skill.sanyanmrfz.getSatisfied(trigger.player, player.storage.sanyanmrfz);\r\n\t\t\t\tlet num = result.length;\r\n\t\t\t\tawait player.draw(2 * num);\r\n\t\t\t\tconst { targets } = await player\r\n\t\t\t\t\t.chooseTarget()\r\n\t\t\t\t\t.set(\"filterTarget\", lib.filter.notMe)\r\n\t\t\t\t\t.set(\"selectTarget\", [1, num])\r\n\t\t\t\t\t.set(\"ai\", target => get.attitude2(target) > 0)\r\n\t\t\t\t\t.set(\"prompt\", `【三焰】：你可以令至多${get.cnNumber(num)}名其他角色摸一张牌`)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (targets) {\r\n\t\t\t\t\ttargets.forEach(target => player.line(target));\r\n\t\t\t\t\tawait game.asyncDraw(targets, 1);\r\n\t\t\t\t}\r\n\t\t\t\tplayer.storage.sanyanmrfz.remove(...result);\r\n\t\t\t},\r\n\t\t\tgroup: [\"sanyanmrfz_count\", \"sanyanmrfz_reset\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\treset: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: \"roundStart\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage[\"sanyanmrfz\"] = [\"gain\", \"useCard\", \"recover\"];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tcount: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"recoverEnd\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\treturn event.player === _status.currentPhase && !player.hasSkill(\"sanyanmrfz_recovered\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.addTempSkill(\"sanyanmrfz_recovered\", { global: \"phaseAfter\" });\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.8,\r\n\t\t\t},\r\n\t\t},\r\n\t\tdongqumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn game.hasPlayer(current => current.countCards(\"h\", card => current.canRecast(card)) > 0);\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tevent.result = await player\r\n\t\t\t\t\t.chooseTarget()\r\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"dongqumrfz\"))\r\n\t\t\t\t\t.set(\"prompt2\", `你可以令至多${get.cnNumber(player.maxHp)}名角色重铸一张手牌，若重铸的牌点数之和大于21，则这些角色回复一点体力`)\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => target.countCards(\"h\", card => target.canRecast(card)) > 0)\r\n\t\t\t\t\t.set(\"selectTarget\", [1, player.maxHp])\r\n\t\t\t\t\t.set(\"ai\", target => get.attitude2(target) > 0)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet targets = [...event.targets];\r\n\t\t\t\tlet cards = [];\r\n\t\t\t\twhile (targets.length > 0) {\r\n\t\t\t\t\tlet target = targets.shift();\r\n\t\t\t\t\tif (target) {\r\n\t\t\t\t\t\tlet { cards: cardsx } = await target\r\n\t\t\t\t\t\t\t.chooseCard(true)\r\n\t\t\t\t\t\t\t.set(\"ai\", card => -get.value(card))\r\n\t\t\t\t\t\t\t.set(\"prompt\", \"【冬去】:请重铸一张手牌\")\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t.set(\"filterCard\", card => get.event().targetx.canRecast(card))\r\n\t\t\t\t\t\t\t.set(\"targetx\", target)\r\n\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\tif (cardsx) {\r\n\t\t\t\t\t\t\tcards.push(...cardsx);\r\n\t\t\t\t\t\t\ttarget.recast(cardsx);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tlet sum = Number(cards.map(card => get.number(card)).reduce((acc, num) => acc + num, 0)) || 0;\r\n\t\t\t\tif (sum > 21) {\r\n\t\t\t\t\tevent.targets.forEach(target => {\r\n\t\t\t\t\t\ttarget.recover();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 阿兰娜\r\n\t\tqixiemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"h\", card => !player.storage.qixiemrfz.includes(get.type2(card))) > 0;\r\n\t\t\t},\r\n\t\t\tfilterCard(card, player) {\r\n\t\t\t\treturn !player.storage.qixiemrfz.includes(get.type2(card));\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\treturn (target === player || target.inRange(player)) && target.hasEnabledSlot();\r\n\t\t\t},\r\n\t\t\tcheck(card) {\r\n\t\t\t\tlet player = get.player();\r\n\t\t\t\tlet num = 8 - get.value(card, player);\r\n\t\t\t\tif (card.name === \"sha\" || card.name === \"shan\") num += 5;\r\n\t\t\t\tif (get.type2(card) === \"equip\") num -= 5;\r\n\t\t\t\treturn num;\r\n\t\t\t},\r\n\t\t\tdiscard: false,\r\n\t\t\tlose: false,\r\n\t\t\tdelay: 0,\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet card = event.cards[0];\r\n\t\t\t\tlet target = event.targets[0];\r\n\t\t\t\tplayer.storage.qixiemrfz.push(get.type2(card));\r\n\t\t\t\tlet skillpool = Object.keys(lib.skill).filter(skill => {\r\n\t\t\t\t\tlet info = get.info(skill);\r\n\t\t\t\t\tif (!info || info.charlotte || !lib.translate[skill + \"_info\"]) return false;\r\n\t\t\t\t\treturn get.skillInfoTranslation(skill).includes(`【${get.translation(card.name)}】`);\r\n\t\t\t\t});\r\n\t\t\t\tif (!skillpool.length) {\r\n\t\t\t\t\tplayer.chat(\"无对应的技能\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet subtypes = [\"equip1\", \"equip2\", \"equip3\", \"equip4\", \"equip5\"];\r\n\t\t\t\tsubtypes = subtypes.filter(i => player.hasEnabledSlot(i));\r\n\t\t\t\tconst { control } = await player\r\n\t\t\t\t\t.chooseControl(subtypes)\r\n\t\t\t\t\t.set(\"prompt\", \"请选择一个装备栏\")\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tlet subtypes = get.event().subtypes;\r\n\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\tlet list = subtypes.filter(i => !player.getEquip(i));\r\n\t\t\t\t\t\treturn list.length > 0 ? list.randomGet() : subtypes.randomGet();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"subtypes\", subtypes)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tlet name = skillpool.randomGet();\r\n\t\t\t\tawait lib.skill.qixiemrfz.createEquip(name, control);\r\n\t\t\t\tlet cardx = {\r\n\t\t\t\t\tname: \"qixiemrfz_\" + name,\r\n\t\t\t\t\tsuit: \"none\",\r\n\t\t\t\t\tnumber: \"none\",\r\n\t\t\t\t};\r\n\t\t\t\ttarget.useCard(cardx, [card], target);\r\n\t\t\t},\r\n\t\t\tasync createEquip(skill, subtype) {\r\n\t\t\t\tif (!lib.card[\"qixiemrfz_\" + skill]) {\r\n\t\t\t\t\tif (lib.translate[skill + \"_ab\"]) lib.translate[\"qixiemrfz_\" + skill] = lib.translate[skill + \"_ab\"] + \"-\" + get.translation(subtype)[subtype === \"equip2\" ? 1 : 0];\r\n\t\t\t\t\telse lib.translate[\"qixiemrfz_\" + skill] = lib.translate[skill] + \"-\" + get.translation(subtype)[subtype === \"equip2\" ? 1 : 0];\r\n\t\t\t\t\tlib.translate[\"qixiemrfz_\" + skill + \"_info\"] = `锁定技，你视为拥有【${get.translation(skill)}】；当此牌离开你的装备区后，销毁之`;\r\n\t\t\t\t\tlib.translate[\"qixiemrfz_\" + skill + \"_append\"] = '<div class=\"skill\">【' + get.translation(skill) + '】</div><div><span style=\"font-family: yuanli\">' + get.skillInfoTranslation(skill) + \"</span></div><br><br>\";\r\n\t\t\t\t\tvar card = {\r\n\t\t\t\t\t\tfullimage: true,\r\n\t\t\t\t\t\timage: \"ext:whitherHelm/image/orther/alannamrfz_equip.png\",\r\n\t\t\t\t\t\ttype: \"equip\",\r\n\t\t\t\t\t\tenable: true,\r\n\t\t\t\t\t\tselectTarget: -1,\r\n\t\t\t\t\t\tfilterCard(card, player, target) {\r\n\t\t\t\t\t\t\tif (player != target) return false;\r\n\t\t\t\t\t\t\treturn target.canEquip(card, true);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tmodTarget: true,\r\n\t\t\t\t\t\tallowMultiple: false,\r\n\t\t\t\t\t\tcontent: lib.element.content.equipCard,\r\n\t\t\t\t\t\ttoself: true,\r\n\t\t\t\t\t\tai: {},\r\n\t\t\t\t\t\tskills: [],\r\n\t\t\t\t\t\tdestroy: true,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (subtype === \"equip1\") card.distance = { attackFrom: -2 };\r\n\t\t\t\t\telse if (subtype === \"equip3\") card.distance = { globalTo: 1 };\r\n\t\t\t\t\telse if (subtype === \"equip4\") card.distance = { globalFrom: -1 };\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tcard.ai.equipValue = function (card, player) {\r\n\t\t\t\t\t\tlet val = 10;\r\n\t\t\t\t\t\tif (player.hasSkill(\"qixiemrfz\")) val *= 0.4;\r\n\t\t\t\t\t\telse val *= 0.6;\r\n\t\t\t\t\t\treturn val;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tcard.subtype = subtype;\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tcard.skills.add(skill);\r\n\r\n\t\t\t\t\tlib.card[\"qixiemrfz_\" + skill] = card;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"qixiemrfz_clear\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.qixiemrfz = [];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 10,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer(player) {\r\n\t\t\t\t\t\tif (game.countPlayer(char => char.hasEmptySlot() && get.attitude(player, char) > 2) < 1) return 0;\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttarget(player, target) {\r\n\t\t\t\t\t\tlet att = get.attitude(player, target);\r\n\t\t\t\t\t\tlet num = 1;\r\n\t\t\t\t\t\tif (att > 2 && target.hasEmptySlot()) num += 1;\r\n\t\t\t\t\t\tif (target === player) num += 0.5;\r\n\t\t\t\t\t\treturn num;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n};\r\n"],"names":["player","event","trigger","target","ui","skills","card","evt","skill","subtype","manager","list","name","num","phase","color","cards","info","v","rgb","subtypes"],"mappings":"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"}