{"version":3,"file":"special1SJZX.js","sources":["../../../../../../../../packages/extension/WhichWay/src/character/packs/special/special1SJZX.js"],"sourcesContent":["import { lib, game, ui, get, ai, _status } from \"noname\";\r\n\r\n/**\r\n* 特殊武将的第一部分\r\n */\r\nconst tmpSave = window.whichWaySave.tmpSave;\r\n\r\n/** @type {WhichWayCharacterPack} */\r\nexport default {\r\n\tcharacter: {\r\n\t\ttalaidingzhenmrfz: ['female', 'luomrfz', 4, ['xuebaomrfz'], [\"forbidai\"]],\r\n\t\tpaxinghaomrfz:['male','weimrfz',1,['yinqingmrfz','jushoumrfz'],[\"forbidai\"]],\r\n\t\tmuouwuzhemrfz:['female','bomrfz',2,[],[\"forbidai\"]],\r\n\t\tceshimrfz:['female','wei',10,[\"ceshiSkillmrfz\"],[\"forbidai\"]],\r\n\t\tfengwan_zhioumrfz:{\r\n\t\t\tsex:\"female\",\r\n\t\t\tgroup:\"dongmrfz\",\r\n\t\t\thp:1,\r\n\t\t\tmaxHp:2,\r\n\t\t\tskills:[],\r\n\t\t\tisAiForbidden:true\r\n\t\t},\r\n\t},\r\n\tskill: {\r\n\t\t// 测试\r\n\t\tceshiSkillmrfz:{\r\n\t\t\taudio:false,\r\n\t\t\ttrigger:{player:\"drawBegin\"},\r\n\t\t\tasync content(event,trigger,player){\r\n\t\t\t\ttrigger.num *= 2;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\ttrigger.gaintag.push(\"example_tag\");\r\n\t\t\t},\r\n\t\t},\r\n\t\t// 泰拉丁真\r\n\t\txuebaomrfz:{\r\n\t\t\taudio:2,\r\n\t\t\ttrigger:{\r\n\t\t\t\tglobal:\"phaseBefore\",\r\n\t\t\t\tplayer:\"enterGame\",\r\n\t\t\t},\r\n\t\t\tforced:true,\r\n\t\t\tcharlotte:true,\r\n\t\t\tderivation:['olluanji'],\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t},\r\n\t\t\tasync content(event,trigger,player){\r\n\t\t\t\t// 一些函数\r\n\r\n\t\t\t\t// 统计中文字符数\r\n\t\t\t\tfunction countChineseCharacters(str) {\r\n\t\t\t\t\tvar chineseRegex = /[\\u4e00-\\u9fa5]/g;\r\n\t\t\t\t\tvar chineseMatches = str.match(chineseRegex);\r\n\r\n\t\t\t\t\treturn chineseMatches ? chineseMatches.length : 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor(var target of game.players){\r\n\t\t\t\t\tif(target==player){\r\n\t\t\t\t\t\tplayer.addSkills('olluanji');\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar skills = target.getSkills(true,false,false);\r\n\t\t\t\t\tif(skills.length==0) continue;\r\n\t\t\t\t\tfor(var skillName of skills){\r\n\t\t\t\t\t\tvar info = get.skillInfoTranslation(skillName);\r\n\t\t\t\t\t\tif(countChineseCharacters(info)>=50) await target.removeSkill(skillName);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(target.skills.length==0) target.addSkills('olluanji');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 爬行号\r\n\t\tyinqingmrfz:{\r\n\t\t\tmod:{\r\n\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\treturn num + 2;\r\n\t\t\t\t},\r\n\t\t\t\tattackRange: function (player, num) {\r\n\t\t\t\t\treturn (num += 2);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio:2,\r\n\t\t\ttrigger:{player:[\"phaseJudgeBefore\",\"phaseDrawBegin2\"]},\r\n\t\t\tforced:true,\r\n\t\t\tasync content(event,trigger,player){\r\n\t\t\t\tif(trigger.name==='name') trigger.cancel();\r\n\t\t\t\telse trigger.num+=2;\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.5,\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget: function (card, player, target, current) {\r\n\t\t\t\t\t\tif (get.type(card) == \"delay\")\r\n\t\t\t\t\t\t\treturn \"zeroplayertarget\";\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tjushoumrfz:{\r\n\t\t\taudio:2,\r\n\t\t\tusable:1,\r\n\t\t\ttrigger:{source:\"damageBegin\"},\r\n\t\t\tfilter:function(event,player){\r\n\t\t\t\treturn event.player!=player&&event.player.node.hp.dataset.condition == 'high';\r\n\t\t\t},\r\n\t\t\tprompt(event,player){\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tlet num = Math.floor(event.player.maxHp/3);\r\n\t\t\t\treturn `【巨兽】:是否令${get.translation(event.player)}将体力调整至${num}?`;\r\n\t\t\t},\r\n\t\t\tcheck(event,player){\r\n\t\t\t\treturn get.attitude2(event.player)<0;\r\n\t\t\t},\r\n\t\t\tasync content(event,trigger,player){\r\n\t\t\t\tlet num = Math.floor(trigger.player.maxHp/3);\r\n\t\t\t\tlet draw = trigger.player.hp - num;\r\n\t\t\t\ttrigger.player.hp = num;\r\n\t\t\t\ttrigger.player.$update();\r\n\t\t\t\tgame.log(trigger.player,'的体力被调整至',num);\r\n\t\t\t\tplayer.draw(draw);\r\n\t\t\t},\r\n\t\t\tai:{\r\n\t\t\t\tthreaten:1.2,\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n}\r\n"],"names":[],"mappings":"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"}