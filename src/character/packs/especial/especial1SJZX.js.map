{"version":3,"file":"especial1SJZX.js","sources":["../../../../../../../../packages/extension/WhichWay/src/character/packs/especial/especial1SJZX.js"],"sourcesContent":["import { lib, game, ui, get, ai, _status } from \"noname\";\n\n/**\n * 二星武将的第一部分\n */\nconst tmpSave = window.whichWaySave.tmpSave;\n\n/** @type {WhichWayCharacterPack} */\nexport default {\n\tcharacter: {\n\t},\n\tskill: {\n\t\t//friston3 弗里斯腾3\n\t\tshantanmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: { global: \"gainAfter\" },\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn event.player != player && !player.hasSkill(\"shantanmrfz_ban\");\n\t\t\t},\n\t\t\tprompt: \"【善谈】:是否摸一张牌？\",\n\t\t\tcontent: function () {\n\t\t\t\t\"step 0\";\n\t\t\t\tplayer.draw();\n\t\t\t\t(\"step 1\");\n\t\t\t\tif (player.isMaxHandcard(true)) {\n\t\t\t\t\tplayer.addTempSkill(\"shantanmrfz_ban\", { global: \"roundStart\" });\n\t\t\t\t}\n\t\t\t},\n\t\t\tgroup: \"shantanmrfz_give\",\n\t\t\tsubSkill: {\n\t\t\t\tgive: {\n\t\t\t\t\taudio: \"shantanmrfz\",\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tglobal: [\"loseAfter\", \"loseAsyncAfter\"],\n\t\t\t\t\t},\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\tif (event.type != \"discard\") return false;\n\t\t\t\t\t\tif (player.countCards(\"he\") < 1) return false;\n\t\t\t\t\t\tif (player.hasSkill(\"shantanmrfz_used\")) return false;\n\t\t\t\t\t\treturn game.hasPlayer(current => {\n\t\t\t\t\t\t\tif (current == player) return false;\n\t\t\t\t\t\t\tvar evt = event.getl(current);\n\t\t\t\t\t\t\tif (!evt || !evt.cards2 || evt.cards2.filterInD(\"d\").length < 1) return false;\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tcheck: function (event, player) {\n\t\t\t\t\t\treturn get.attitude(player, event.player) > 0;\n\t\t\t\t\t},\n\t\t\t\t\tprompt: function (event, player) {\n\t\t\t\t\t\treturn \"【善谈】:你可以弃置一张牌令\" + get.translation(event.player) + \"获得其弃置的牌\";\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\t\"step 0\";\n\t\t\t\t\t\tif (player.countCards(\"he\") > 0) player.chooseToDiscard(true, 1, \"he\", \"【善谈】:请弃置一张牌\");\n\t\t\t\t\t\t(\"step 1\");\n\t\t\t\t\t\tif (result.cards) {\n\t\t\t\t\t\t\tvar targets = [],\n\t\t\t\t\t\t\t\tcardsList = [];\n\t\t\t\t\t\t\tvar players = game.filterPlayer().sortBySeat(_status.currentPhase);\n\t\t\t\t\t\t\tfor (var current of players) {\n\t\t\t\t\t\t\t\tif (current == player) continue;\n\t\t\t\t\t\t\t\tvar cards = [];\n\t\t\t\t\t\t\t\tvar evt = trigger.getl(current);\n\t\t\t\t\t\t\t\tif (!evt || !evt.cards2) continue;\n\t\t\t\t\t\t\t\tvar cardsx = evt.cards2.filterInD(\"d\");\n\t\t\t\t\t\t\t\tcards.addArray(cardsx);\n\t\t\t\t\t\t\t\tif (cards.length) {\n\t\t\t\t\t\t\t\t\ttargets.push(current);\n\t\t\t\t\t\t\t\t\tcardsList.push(cards);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttargets[0].gain(cardsList[0], \"gain2\");\n\t\t\t\t\t\t\tplayer.addTempSkill(\"shantanmrfz_used\", { global: \"phaseEnd\" });\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tused: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t},\n\t\t\t\tban: {\n\t\t\t\t\tmark: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tintro: {\n\t\t\t\t\t\tcontent: \"【善谈①】本轮失效\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t},\n};\n"],"names":["player"],"mappings":";AAKgB,OAAO,aAAa;AAGpC,MAAA,gBAAe;AAAA,EACd,WAAW,CACZ;AAAA,EACC,OAAO;AAAA;AAAA,IAEN,aAAa;AAAA,MACZ,OAAO;AAAA,MACP,SAAS,EAAE,QAAQ,YAAW;AAAA,MAC9B,QAAQ,SAAU,OAAOA,SAAQ;AAChC,eAAO,MAAM,UAAUA,WAAU,CAACA,QAAO,SAAS,iBAAiB;AAAA,MACpE;AAAA,MACA,QAAQ;AAAA,MACR,SAAS,WAAY;AACpB;AACA,eAAO,KAAI;AAEX,YAAI,OAAO,cAAc,IAAI,GAAG;AAC/B,iBAAO,aAAa,mBAAmB,EAAE,QAAQ,aAAY,CAAE;AAAA,QAChE;AAAA,MACD;AAAA,MACA,OAAO;AAAA,MACP,UAAU;AAAA,QACT,MAAM;AAAA,UACL,OAAO;AAAA,UACP,SAAS;AAAA,YACR,QAAQ,CAAC,aAAa,gBAAgB;AAAA,UAC5C;AAAA,UACK,QAAQ,SAAU,OAAOA,SAAQ;AAChC,gBAAI,MAAM,QAAQ,UAAW,QAAO;AACpC,gBAAIA,QAAO,WAAW,IAAI,IAAI,EAAG,QAAO;AACxC,gBAAIA,QAAO,SAAS,kBAAkB,EAAG,QAAO;AAChD,mBAAO,KAAK,UAAU,aAAW;AAChC,kBAAI,WAAWA,QAAQ,QAAO;AAC9B,kBAAI,MAAM,MAAM,KAAK,OAAO;AAC5B,kBAAI,CAAC,OAAO,CAAC,IAAI,UAAU,IAAI,OAAO,UAAU,GAAG,EAAE,SAAS,EAAG,QAAO;AACxE,qBAAO;AAAA,YACR,CAAC;AAAA,UACF;AAAA,UACA,OAAO,SAAU,OAAOA,SAAQ;AAC/B,mBAAO,IAAI,SAASA,SAAQ,MAAM,MAAM,IAAI;AAAA,UAC7C;AAAA,UACA,QAAQ,SAAU,OAAOA,SAAQ;AAChC,mBAAO,mBAAmB,IAAI,YAAY,MAAM,MAAM,IAAI;AAAA,UAC3D;AAAA,UACA,SAAS,WAAY;AACpB;AACA,gBAAI,OAAO,WAAW,IAAI,IAAI,EAAG,QAAO,gBAAgB,MAAM,GAAG,MAAM,aAAa;AAEpF,gBAAI,OAAO,OAAO;AACjB,kBAAI,UAAU,CAAA,GACb,YAAY,CAAA;AACb,kBAAI,UAAU,KAAK,aAAY,EAAG,WAAW,QAAQ,YAAY;AACjE,uBAAS,WAAW,SAAS;AAC5B,oBAAI,WAAW,OAAQ;AACvB,oBAAI,QAAQ,CAAA;AACZ,oBAAI,MAAM,QAAQ,KAAK,OAAO;AAC9B,oBAAI,CAAC,OAAO,CAAC,IAAI,OAAQ;AACzB,oBAAI,SAAS,IAAI,OAAO,UAAU,GAAG;AACrC,sBAAM,SAAS,MAAM;AACrB,oBAAI,MAAM,QAAQ;AACjB,0BAAQ,KAAK,OAAO;AACpB,4BAAU,KAAK,KAAK;AAAA,gBACrB;AAAA,cACD;AACA,sBAAQ,CAAC,EAAE,KAAK,UAAU,CAAC,GAAG,OAAO;AACrC,qBAAO,aAAa,oBAAoB,EAAE,QAAQ,WAAU,CAAE;AAAA,YAC/D;AAAA,UACD;AAAA,QACL;AAAA,QACI,MAAM;AAAA,UACL,WAAW;AAAA,QAChB;AAAA,QACI,KAAK;AAAA,UACJ,MAAM;AAAA,UACN,WAAW;AAAA,UACX,OAAO;AAAA,YACN,SAAS;AAAA,UACf;AAAA,QACA;AAAA,MACA;AAAA,IACA;AAAA,EACA;AACA;"}