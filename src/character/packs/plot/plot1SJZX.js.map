{"version":3,"file":"plot1SJZX.js","sources":["../../../../../../../../packages/extension/WhichWay/src/character/packs/plot/plot1SJZX.js"],"sourcesContent":["import { lib, game, ui, get, ai, _status } from \"noname\";\r\n\r\nconst tmpSave = window.whichWaySave.tmpSave;\r\n\r\n/** @type {WhichWayCharacterPack} */\r\nexport default {\r\n\tcharacter: {\r\n\t\tacemrfz: [\"male\", \"luomrfz\", \"4/6\", [\"newsizhanmrfz\", \"ehoumrfz\"], []],\r\n\t\tbaocunzhemrfz: [\"male\", \"qianmrfz\", 10, [\"shouwangmrfz\", \"jingmomrfz\", \"xijimrfz\"], []],\r\n\t\tyizumikemrfz: [\"male\", \"haimrfz\", 3, [\"chanshimrfz\"], []],\r\n\t\tkelisitengmrfz: [\"female\", \"lymrfz\", 4, [\"xingtumrfz\", \"poqiongmrfz\"], []],\r\n\t\taiguozhemrfz: [\"male\", \"zhmrfz\", 4, [\"xinjunxingmrfz\", \"youjimrfz\"], []],\r\n\t\tdoushitalulamrfz: [\"female\", \"zhmrfz\", 4, [\"zhuoximrfz\", \"talula_shixinmrfz\"], []],\r\n\t\tteleixiyamrfz: [\"female\", \"bamrfz\", 3, [\"bojimrfz\", \"caijianmrfz\"], []],\r\n\t\tteleixisimrfz: [\"male\", \"junmrfz\", 4, [\"yuanfumrfz\", \"fenzhoumrfz\"], []],\r\n\t\tqiaojiakelifumrfz: [\"male\", \"gemrfz\", 4, [\"chongxiemrfz\", \"qj_chongjimrfz\", \"leitingmrfz\"], []],\r\n\t\tpuruisaisimrfz: [\"female\", \"qianmrfz\", 3, [\"qianmianmrfz\", \"neihuamrfz\"], []],\r\n\t\tshuangwangmrfz: [\"female\", \"kaizidaiermrfz\", 8, [\"chenke1mrfz\", \"chenke2mrfz\", \"chenke3mrfz\", \"gujimrfz\", \"jiangqingmrfz\"], []],\r\n\t\tkeluxiermrfz: [\"female\", \"bamrfz\", 4, [\"fuzhimrfz\", \"kuorongmrfz\"], []],\r\n\t\tminermrfz: {\r\n\t\t\tgroup: \"wumrfz\",\r\n\t\t\tsex: \"male\",\r\n\t\t\tskills: [\"xunkaimrfz\"],\r\n\t\t\thp: 3,\r\n\t\t},\r\n\t\txierdamrfz: {\r\n\t\t\tgroup: \"weimrfz\",\r\n\t\t\tsex: \"female\",\r\n\t\t\tskills: [\"shencimrfz\", \"lanshengmrfz\"],\r\n\t\t\thp: 3,\r\n\t\t},\r\n\t},\r\n\tskill: {\r\n\t\t//希尔达\r\n\t\tshencimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { global: \"phaseBegin\" },\r\n\t\t\tforced: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"h\", card => card.hasGaintag(\"shencimrfz\")) < 1;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet cards = [];\r\n\t\t\t\tfor (let name of lib.inpile) {\r\n\t\t\t\t\tif (![\"basic\", \"trick\"].includes(get.type(name))) continue;\r\n\t\t\t\t\tlet list = lib.card.list.filter(arr => arr[2] === name).randomGet();\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tcards.push(game.createCard(name, list[0], list[1], list[3]));\r\n\t\t\t\t}\r\n\t\t\t\tconst  result  = await player\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t.chooseCardHand()\r\n\t\t\t\t\t.set(\"ai\", card => get.player().getUseValue(card))\r\n\t\t\t\t\t.set(\"cards\", cards)\r\n\t\t\t\t\t.set(\"forced\", true)\r\n\t\t\t\t\t.set(\"complexSelect\",true)\r\n\t\t\t\t\t.set(\"prompt\", `【神赐】:请选择你要获得的牌`).forResult();\r\n\t\t\t\tif(!result?.cards) return;\r\n\t\t\t\tconst { name, suit, number, nature } = result.cards[0];\r\n\t\t\t\tlet card = game.createCard(name, suit, number, nature);\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tcard._destroy = true;\r\n\t\t\t\tplayer.gain(card, \"gain2\").set(\"gaintag\", [\"shencimrfz\"]);\r\n\t\t\t},\r\n\t\t\tgroup: [\"shencimrfz_onlose\", \"shencimrfz_dying\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdying: {\r\n\t\t\t\t\taudio: \"shencimrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"dying\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn player.countCards(\"h\", card => card.hasGaintag(\"shencimrfz\")) > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event,trigger,player){\r\n\t\t\t\t\t\tawait player.discard(player.getCards(\"h\",card=>card.hasGaintag(\"shencimrfz\")));\r\n\t\t\t\t\t\tplayer.recoverTo(1);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tonlose: {\r\n\t\t\t\t\taudio:false,\r\n\t\t\t\t\tsilent:true,\r\n\t\t\t\t\tcharlotte:true,\r\n\t\t\t\t\ttrigger: { player: \"loseAfter\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tfor (let id in event.gaintag_map) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tlet tags = event.gaintag_map[id];\r\n\t\t\t\t\t\t\tif (event.cards.some(card => card.cardid === id) && tags.includes(\"shencimrfz\")) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\t//补一个销毁的log\r\n\t\t\t\t\t\tlet destory = [];\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tfor(let id in trigger.gaintag_map){\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tlet tags = trigger.gaintag_map[id];\r\n\t\t\t\t\t\t\tif(!tags.includes(\"shencimrfz\")) continue;\r\n\t\t\t\t\t\t\tdestory.addArray(trigger.cards.filter(card => card.cardid === id))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgame.log(destory,`被销毁了`);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tlanshengmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger:{\r\n\t\t\t\tplayer:\"damageEnd\",\r\n\t\t\t\tsource:\"damageEnd\"\r\n\t\t\t},\r\n\t\t\tfilter(event,player){\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\treturn new Set(game.getAllGlobalHistory(\"everything\",evt=>evt.name===\"gain\"&&evt.gaintag.includes(\"shencimrfz\")).map(evt=>evt.cards.map(i=>get.suit(i))).flat()).size>0;\r\n\t\t\t},\r\n\t\t\tasync cost(event,trigger,player){\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tlet suits = new Set(game.getAllGlobalHistory(\"everything\",evt=>evt.name===\"gain\"&&evt.gaintag.includes(\"shencimrfz\")).map(evt=>evt.cards.map(i=>get.suit(i))).flat());\r\n\t\t\t\tevent.result = await player.chooseCard()\r\n\t\t\t\t\t.set(\"prompt\",get.prompt(\"lanshengmrfz\"))\r\n\t\t\t\t\t.set(\"prompt2\",`你可以重铸至多${suits.size}张牌，若包含了与获得过的“神赐”牌相同牌名的牌，你摸一张牌`)\r\n\t\t\t\t\t.set(\"filterCard\",(card)=>{\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tif(get.event().shenciCard.has(get.name(card))){\r\n\t\t\t\t\t\t\tlet info = ui.create.div(\".promptSJZX\",card);\r\n\t\t\t\t\t\t\tinfo.classList.add(\"promptCardSJZX\");\r\n\t\t\t\t\t\t\tinfo.innerHTML = `可摸牌`;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\",card=>{\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tlet names = get.event().shenciCard;\r\n\t\t\t\t\t\treturn 6 - get.value(card) + (names.has(get.name(card))&&!ui.selected.cards.map(i=>get.name(i)).includes(get.name(card)) ? 5 : 0);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"selectCard\",[1,suits.size])\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t.set(\"shenciCard\",new Set(game.getAllGlobalHistory(\"everything\",evt=>evt.name===\"gain\"&&evt.gaintag.includes(\"shencimrfz\")).map(evt=>evt.cards.map(i=>get.name(i))).flat()))\r\n\t\t\t\t\t.forResult();\r\n\r\n\t\t\t\tplayer.getCards(\"hes\",card=>{\r\n\t\t\t\t\tif(card.querySelector(\".promptSJZX\")){\r\n\t\t\t\t\t\tcard.querySelector(\".promptSJZX\")?.remove();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tasync content(event,trigger,player){\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tlet names = new Set(game.getAllGlobalHistory(\"everything\",evt=>evt.name===\"gain\"&&evt.gaintag.includes(\"shencimrfz\")).map(evt=>evt.cards.map(i=>get.name(i))).flat());\r\n\t\t\t\tlet { cards } = event;\r\n\t\t\t\tplayer.recast(cards,undefined,(player,cards)=>{\r\n\t\t\t\t\tif(cards.map(i=>get.name(i)).some(i=>names.has(i))){\r\n\t\t\t\t\t\tplayer.draw(cards.length + 1);\r\n\t\t\t\t\t} else player.draw(cards.length);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//矿工游击队\r\n\t\txunkaimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\tderivation: [\"xinjuejing\", \"weijing\"],\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"dying\", \"enterGame\"],\r\n\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.name !== \"phase\" || game.phaseNumber === 0;\r\n\t\t\t},\r\n\t\t\tfirstDo: true,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (player.maxHp > 1) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tlet gains = [\"xinjuejing\", \"weijing\"].map(i => `${i}_${get.randomNumberSJZX()}`);\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tgame.broadcastAll(skills => {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tskills.forEach(skill => {\r\n\t\t\t\t\t\t\tlet original = skill.split(\"_\")[0];\r\n\t\t\t\t\t\t\tlet info = get.info(original);\r\n\t\t\t\t\t\t\tlib.skill[skill] = {\r\n\t\t\t\t\t\t\t\t...info,\r\n\t\t\t\t\t\t\t\taudio: original,\r\n\t\t\t\t\t\t\t\txunkaimrfz: true,\r\n\t\t\t\t\t\t\t\tonremove: true,\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tlib.translate[skill] = lib.translate[original];\r\n\t\t\t\t\t\t\tlib.translate[`${skill}_info`] = lib.translate[`${original}_info`];\r\n\r\n\t\t\t\t\t\t\tif (original === \"weijing\") {\r\n\t\t\t\t\t\t\t\tlib.dynamicTranslate[skill] = (player, skill) => {\r\n\t\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t\treturn player.storage[skill] ? \"每轮限一次，当你需要使用基本牌时，你可以视为使用之\" : lib.translate.weijing_info;\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tlib.skill[skill] = {\r\n\t\t\t\t\t\t\t\t\t...lib.skill[skill],\r\n\t\t\t\t\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\t\t\t\t\tif (event.type === \"wuxie\" || player.hasSkill(`${skill}_used`)) {\r\n\t\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tlet names = player.storage[skill] ? lib.inpile.filter(i => get.type(i) === \"basic\") : [\"sha\", \"shan\"];\r\n\t\t\t\t\t\t\t\t\t\tfor (var name of names) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (event.filterCard({ name: name, isCard: true }, player, event)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\thiddenCard(player, name) {\r\n\t\t\t\t\t\t\t\t\t\tlet names = player.storage[skill] ? lib.inpile.filter(i => get.type(i) === \"basic\") : [\"sha\", \"shan\"];\r\n\t\t\t\t\t\t\t\t\t\treturn names.includes(name) && !player.hasSkill(`${skill}_used`);\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tchooseButton: {\r\n\t\t\t\t\t\t\t\t\t\t...lib.skill[skill].chooseButton,\r\n\t\t\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t\t\tbackup: function (links, player) {\r\n\t\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\t\taudio: \"weijing\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tviewAs: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: links[0][2],\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\tfilterCard: () => false,\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectCard: -1,\r\n\t\t\t\t\t\t\t\t\t\t\t\tposition: \"hes\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tpopname: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\tcheck(card) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn 6 / Math.max(1, get.value(card));\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t\t\t\t\tasync precontent(event, trigger, player) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplayer.addTempSkill(`${skill}_used`, \"roundEnd\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\tdialog(event, player) {\r\n\t\t\t\t\t\t\t\t\t\t\tlet names = player.storage[skill] ? lib.inpile.filter(i => get.type(i) === \"basic\") : [\"sha\", \"shan\"];\r\n\t\t\t\t\t\t\t\t\t\t\tvar vcards = [];\r\n\t\t\t\t\t\t\t\t\t\t\tfor (var name of names) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar card = { name: name, isCard: true };\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (event.filterCard(card, player, event)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvcards.push([\"基本\", \"\", name]);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tvar dialog = ui.create.dialog(\"卫境\", [vcards, \"vcard\"], \"hidden\");\r\n\t\t\t\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t\t\t\tdialog.direct = true;\r\n\t\t\t\t\t\t\t\t\t\t\treturn dialog;\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t}, gains);\r\n\r\n\t\t\t\t\tawait player.addSkills(gains);\r\n\r\n\t\t\t\t\tawait player.loseMaxHp();\r\n\t\t\t\t\tplayer.recoverTo(1);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet skills = player.getSkills().filter(skill => {\r\n\t\t\t\t\t\tlet info = get.info(skill);\r\n\t\t\t\t\t\treturn info && info.xunkaimrfz && skill.startsWith(\"weijing\");\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (skills.length < 1) return;\r\n\t\t\t\t\tlet skill = skills.randomGet();\r\n\t\t\t\t\tplayer.storage[skill] = true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 可露希尔\r\n\t\tjingxiangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\ttrigger: { player: \"pointless\" }, //免得十周年ui技能溢出屏幕,这是一个无意义的时机\r\n\t\t\tviewAs: {\r\n\t\t\t\tname: \"sha\",\r\n\t\t\t\tisCard: true,\r\n\t\t\t},\r\n\t\t\tlimited: true,\r\n\t\t\tmark: false,\r\n\t\t\tfilterCard: () => false,\r\n\t\t\tselectCard: -1,\r\n\t\t\treplaced: false,\r\n\t\t\tusedSJZX: false,\r\n\t\t\tasync precontent(event, trigger, player) {\r\n\t\t\t\tlet name = event.name.replace(\"pre_\", \"\");\r\n\t\t\t\tplayer.awakenSkill(name);\r\n\t\t\t\tlib.skill[name].usedSJZX = true;\r\n\t\t\t},\r\n\t\t},\r\n\t\tfuzhimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\ttarget: \"useCardToTargeted\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tlet skills = player.getSkills().filter(skill => {\r\n\t\t\t\t\tif (!skill.startsWith(\"jingxiangmrfz\")) return false;\r\n\t\t\t\t\tlet info = get.info(skill);\r\n\t\t\t\t\treturn !info.replaced;\r\n\t\t\t\t});\r\n\t\t\t\treturn skills.length > 0 && get.type(event.card) !== \"delay\" && get.type(event.card) !== \"equip\";\r\n\t\t\t},\r\n\t\t\tprompt(event) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\treturn `是否将一个“镜像”中的‘undefined’替换为‘${get.translation(event.card.name)}’?`;\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\tlet skills = player.getSkills().filter(skill => {\r\n\t\t\t\t\tif (!skill.startsWith(\"jingxiangmrfz\")) return false;\r\n\t\t\t\t\tlet info = get.info(skill);\r\n\t\t\t\t\treturn info.replaced && !info.usedSJZX;\r\n\t\t\t\t});\r\n\t\t\t\tlet calculate = {};\r\n\t\t\t\tskills.forEach(skill => {\r\n\t\t\t\t\tlet info = get.info(skill);\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tlet viewName = info.viewAs.name;\r\n\t\t\t\t\tif (!calculate[viewName]) calculate[viewName] = 0;\r\n\t\t\t\t\tcalculate[viewName]++;\r\n\t\t\t\t});\r\n\t\t\t\treturn calculate[event.card.name] < (get.value(event.card) >= 6 ? 4 : 3);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet name = player.getSkills().filter(skill => {\r\n\t\t\t\t\tif (!skill.startsWith(\"jingxiangmrfz\")) return false;\r\n\t\t\t\t\tlet info = get.info(skill);\r\n\t\t\t\t\treturn !info.replaced;\r\n\t\t\t\t})[0];\r\n\t\t\t\tconst info = get.info(name);\r\n\t\t\t\tinfo.enable = \"chooseToUse\";\r\n\t\t\t\tinfo.trigger = undefined;\r\n\t\t\t\tinfo.replaced = true;\r\n\t\t\t\tinfo.audio = \"jingxiangmrfz\";\r\n\t\t\t\tinfo.viewAs = {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t...info.viewAs,\r\n\t\t\t\t\tname: trigger.card.name,\r\n\t\t\t\t\tnature: trigger.card.nature,\r\n\t\t\t\t};\r\n\t\t\t\tinfo.filter = () => true;\r\n\t\t\t\tlet cardname = (get.translation(trigger.card.nature) ? get.translation(trigger.card.nature) : \"\") + get.translation(trigger.card.name);\r\n\t\t\t\tlib.translate[name] = lib.translate[name] + cardname.slice(0, 2);\r\n\t\t\t\tlib.translate[name + \"_info\"] = lib.translate[name + \"_info\"].replace(\"undefined\", cardname);\r\n\t\t\t},\r\n\t\t},\r\n\t\tkuorongmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\tderivation: [\"jingxiangmrfz\", \"clanzhongliu\"],\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tfor (let i = 0; i < 15; i++) {\r\n\t\t\t\t\tlet name = \"jingxiangmrfz\" + i;\r\n\t\t\t\t\tlet info = {\r\n\t\t\t\t\t\t...lib.skill.jingxiangmrfz,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tlib.skill[name] = info;\r\n\t\t\t\t\tlib.translate[name] = lib.translate[\"jingxiangmrfz\"];\r\n\t\t\t\t\tlib.translate[name + \"_info\"] = lib.translate[\"jingxiangmrfz_info\"];\r\n\t\t\t\t\tplayer.addSkill(name);\r\n\t\t\t\t}\r\n\t\t\t\tlet random = Math.random();\r\n\t\t\t\tif (random >= 0.95 || lib.config.lucky_star) {\r\n\t\t\t\t\tplayer.addSkill(\"clanzhongliu\");\r\n\t\t\t\t\tlet info = get.info(\"clanzhongliu\");\r\n\t\t\t\t\tif (!info.audioname2) info.audioname2 = {};\r\n\t\t\t\t\tinfo.audioname2[\"keluxiermrfz\"] = \"clanzhongliu_keluxiermrfz\";\r\n\t\t\t\t\tplayer.addSkill(\"kuorongmrfz_reset\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\treset: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"clanzhongliuAfter\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet skills = player.awakenedSkills.filter(skill => {\r\n\t\t\t\t\t\t\treturn skill.startsWith(\"jingxiangmrfz\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tskills.forEach(skill => {\r\n\t\t\t\t\t\t\tif (player.awakenedSkills && player.awakenedSkills.includes(skill)) {\r\n\t\t\t\t\t\t\t\tgame.log(player, \"重置了技能\", \"#g\" + `【${get.translation(skill)}】`);\r\n\t\t\t\t\t\t\t\tplayer.awakenedSkills.remove(skill);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (player.disabledSkills) {\r\n\t\t\t\t\t\t\t\tfor (let key in player.disabledSkills) {\r\n\t\t\t\t\t\t\t\t\tif (key === skill) delete player.disabledSkills[key];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlib.skill[skill].usedSJZX = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tclanzhongliu_keluxiermrfz: {\r\n\t\t\t//仅用作配音\r\n\t\t\taudio: 2,\r\n\t\t},\r\n\r\n\t\t//Ace\r\n\t\tsizhanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"die\" },\r\n\t\t\tforced: true,\r\n\t\t\tforceDie: true,\r\n\t\t\tunique: true,\r\n\t\t\tmark: true,\r\n\t\t\tlimited: true,\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationStr: \"死战\",\r\n\t\t\tanimationColor: \"fire\",\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.sizhanmrfz = false;\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.storage.sizhanmrfz;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tvar targets = game.filterPlayer(function (current) {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\treturn current != player && current.isZhu;\r\n\t\t\t\t});\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tevent._result = { bool: true, targets: targets };\r\n\t\t\t\t\"step 1\";\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tvar target = result.targets[0];\r\n\t\t\t\t\ttarget.addSkill(\"sizhanmrfz2\");\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tplayer.storage.sizhanmrfz = true;\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tplayer.awakenSkill(\"sizhanmrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tsizhanmrfz2: {\r\n\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\tforced: true,\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\tfor (var i = 0; i < game.dead.length && game.dead[i].name != \"acemrfz\"; i++);\r\n\t\t\t\tvar dead = game.dead[i];\r\n\t\t\t\tdead.revive(dead.maxHp);\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tevent.dead = dead;\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tplayer.removeSkill(\"sizhanmrfz2\");\r\n\t\t\t\tdead.insertPhase();\r\n\t\t\t\tdead.addSkill(\"sizhanmrfz3\");\r\n\t\t\t\tdead.chat(\"快走，我来断后！\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tsizhanmrfz3: {\r\n\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\tforced: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tplayer.die()._triggered = null;\r\n\t\t\t},\r\n\t\t\tgroup: [\"sizhanmrfz3_draw\", \"sizhanmrfz3_damage\", \"sizhanmrfz3_sha\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\ttrigger.num += Math.min(game.roundNumber, 5);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\ttrigger: { source: \"damageBegin\" },\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tsha: {\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\ttargetInRange: function (card, player, target, now) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return true;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tcardname: function (card, player) {\r\n\t\t\t\t\t\t\tif ([\"basic\"].includes(lib.card[card.name].type)) return \"sha\";\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tguanyongmrfz: {\r\n\t\t\tshaRelated: true,\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"useCardToPlayered\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tif (event.getParent().name != \"useCard\" || player != _status.currentPhase) return false;\r\n\t\t\t\treturn event.card.name == \"sha\" && event.target.countDiscardableCards(player, \"he\") > 0;\r\n\t\t\t},\r\n\t\t\tpreHidden: true,\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\treturn get.attitude(player, event.target) <= 0;\r\n\t\t\t},\r\n\t\t\tlogTarget: \"target\",\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tplayer.discardPlayerCard(trigger.target, get.prompt(\"guanyongmrfz\", trigger.target), true).set(\"att\", get.attitude(player, trigger.target) <= 0);\r\n\t\t\t\t\"step 1\";\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tif (result.bool && result.links && result.links.length) {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tif (get.type(result.links[0], null, result.links[0].original == \"h\" ? player : false) == \"basic\") {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\ttrigger.getParent().directHit.add(trigger.target);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tplayer.draw(2);\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tplayer.addTempSkill(\"guanyongmrfz2\");\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tif (player.countMark(\"guanyongmrfz2\") < 2 || player.storage.sizhanmrfz) {\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tplayer.addMark(\"guanyongmrfz2\", false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tunequip_ai: true,\r\n\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\tif (tag == \"directHit_ai\")\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\targ.card.name == \"sha\" &&\r\n\t\t\t\t\t\t\targ.target.countCards(\"e\", function (card) {\r\n\t\t\t\t\t\t\t\treturn get.value(card) > 1;\r\n\t\t\t\t\t\t\t}) > 0\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\tif (arg && arg.name == \"sha\" && arg.target.getEquip(2)) return true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tguanyongmrfz2: {\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\tif (card.name == \"sha\") return num + player.countMark(\"guanyongmrfz2\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t},\r\n\t\t//克丽斯腾莱特 总辖\r\n\t\txingtumrfz: {\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tvar list = [\"手牌上限+1\", \"额定摸牌数+1\", \"使用【杀】的次数+1\", \"将手牌和体力值补至体力上限\"];\r\n\t\t\t\t\tvar show = {\r\n\t\t\t\t\t\thandlit: [],\r\n\t\t\t\t\t\tdraw: [],\r\n\t\t\t\t\t\tsha: [],\r\n\t\t\t\t\t\trecover: [],\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\t\t\t\tvar player = game.players[i];\r\n\t\t\t\t\t\tif (!player.storage.xingtumrfz) continue;\r\n\r\n\t\t\t\t\t\tif (player.storage.xingtumrfz.includes(\"手牌上限+1\")) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tshow.handlit.push(player);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (player.storage.xingtumrfz.includes(\"额定摸牌数+1\")) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tshow.draw.push(player);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (player.storage.xingtumrfz.includes(\"使用【杀】的次数+1\")) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tshow.sha.push(player);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (player.storage.xingtumrfz.includes(\"将手牌和体力值补至体力上限\")) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tshow.recover.push(player);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn \"【星途】已选择选项的角色</br>手牌上限:\" + get.translation(show.handlit) + \"</br>额定摸牌:\" + get.translation(show.draw) + \"</br>使用【杀】:\" + get.translation(show.sha) + \"</br>补牌和体力:\" + get.translation(show.recover);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tselectTarget: [0, 2],\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player && target.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tmultitarget: true,\r\n\t\t\tmultiline: true,\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t//QQQ\r\n\t\t\t\tvar cardx;\r\n\t\t\t\tconst targets = event.targets.add(player);\r\n\t\t\t\tconst cards = [];\r\n\t\t\t\tfor (var i of targets) {\r\n\t\t\t\t\tconst  result  = await i.chooseCard(\"【星途】:你可以重铸一张牌\", \"he\", lib.filter.cardRecastable).set(\"ai\", function (card) {\r\n\t\t\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t\t\t}).forResult();\r\n\t\t\t\t\tif (result.cards) {\r\n\t\t\t\t\t\tif (i != player) {\r\n\t\t\t\t\t\t\tcards.push(result.cards[0]);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcardx = result.cards[0];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ti.recast(result.cards);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (targets.length > 1 && cards.filter(q => get.color(q) == get.color(cardx)).length >= cards.length / 2) {\r\n\t\t\t\t\tfor (var targety of targets) {\r\n\t\t\t\t\t\tvar list = [],\r\n\t\t\t\t\t\t\tcompare = [\"手牌上限+1\", \"额定摸牌数+1\", \"使用【杀】的次数+1\", \"将手牌和体力值补至体力上限\"];\r\n\t\t\t\t\t\tif (!targety.storage.xingtumrfz) targety.storage.xingtumrfz = [];\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tfor (var i of compare) {\r\n\t\t\t\t\t\t\tif (!targety.storage.xingtumrfz.includes(i)) {\r\n\t\t\t\t\t\t\t\tlist.push(i);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (list.length) {\r\n\t\t\t\t\t\t\tconst  result1  = await targety\r\n\t\t\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t\t\t.set(\"prompt\", \"【星途】:请选择一项\")\r\n\t\t\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\t\t\tif (list.includes(\"将手牌和体力值补至体力上限\") && targety.getDamagedHp() * 2 + targety.getHandcardLimit() - targety.countCards(\"h\") >= 5) {\r\n\t\t\t\t\t\t\t\t\t\treturn \"将手牌和体力值补至体力上限\";\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (list.includes(\"额定摸牌数+1\")) return \"额定摸牌数+1\";\r\n\t\t\t\t\t\t\t\t\treturn [\"手牌上限+1\", \"使用【杀】的次数+1\"].randomGet();\r\n\t\t\t\t\t\t\t\t}).forResult();\r\n\t\t\t\t\t\t\tif (result1.control) {\r\n\t\t\t\t\t\t\t\ttargety.storage.xingtumrfz.add(result1.control);\r\n\t\t\t\t\t\t\t\tgame.log(targety, \"选择了\", result1.control);\r\n\t\t\t\t\t\t\t\tif (result1.control == \"手牌上限+1\") targety.addSkill(\"xingtumrfz_handlit\");\r\n\t\t\t\t\t\t\t\tif (result1.control == \"使用【杀】的次数+1\") targety.addSkill(\"xingtumrfz_sha\");\r\n\t\t\t\t\t\t\t\tif (result1.control == \"额定摸牌数+1\") targety.addSkill(\"xingtumrfz_draw\");\r\n\t\t\t\t\t\t\t\tif (result1.control == \"将手牌和体力值补至体力上限\") {\r\n\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\ttargety.drawTo(targety.maxHp);\r\n\t\t\t\t\t\t\t\t\ttargety.recoverTo(targety.maxHp);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\thandlit: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn num + 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tsha: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num + 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\texpose: 0.1,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t\ttarget: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tpoqiongmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tderivation: [\"xingyoumrfz\", \"jiexiangmrfz\"],\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tlimited: true,\r\n\t\t\tskillAnimation: \"epic\",\r\n\t\t\tanimationColor: \"thunder\",\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"limited\",\r\n\t\t\t},\r\n\t\t\tinit: (player, skill) => (player.storage[skill] = false),\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.storage.poqiongmrfz == false;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tevent.lose = 0;\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tevent.num = 0;\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tevent.showed = [];\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tevent.pd = [];\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tplayer.storage.poqiongmrfz = true;\r\n\t\t\t\t\"step 1\";\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tif (event.num < 6) {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tplayer.chooseCard(\"he\", function (card) {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\treturn !event.showed.includes(card);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\telse event.goto(3);\r\n\t\t\t\t\"step 2\";\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tif (result.cards) {\r\n\t\t\t\t\tvar cards1 = game.cardsGotoOrdering(get.cards(1)).cards;\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tvar cards2 = result.cards[0];\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tplayer.showCards(cards2, get.translation(player) + \"展示的牌</br>点数为:\" + cards2.number);\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tplayer.showCards(cards1, \"牌堆顶的牌</br>点数为:\" + cards1[0].number);\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tevent.showed.push(cards2);\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tevent.pd.push(cards1[0]);\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (cards1?.[0].number > cards2.number) {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tplayer.loseMaxHp();\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tevent.lose++;\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tplayer.popup(\"失败：\" + event.lose);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgame.cardsDiscard(cards1);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar cards1 = game.cardsGotoOrdering(get.cards(1)).cards;\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tplayer.showCards(cards1, \"牌堆顶的牌</br>点数为:\" + cards1[0].number);\r\n\t\t\t\t\tgame.cardsDiscard(cards1);\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tplayer.loseMaxHp();\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tevent.lose++;\r\n\t\t\t\t}\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tevent.num++;\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tevent.goto(1);\r\n\t\t\t\t\"step 3\";\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tif (event.lose < 3) {\r\n\t\t\t\t\tvar num = Math.random();\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tif (get.isLuckyStar(player)) num = 0.1;\r\n\t\t\t\t\tif (num < 0.2 && lib.config.FTLmrfz != true) {\r\n\t\t\t\t\t\tui.backgroundMusic.src = lib.assetURL + \"extension/whitherHelm/audio/BGM/fasterthanlight.mp3\";\r\n\t\t\t\t\t\t//TODO:成就\r\n\t\t\t\t\t\t// whitherHelm.ShowGetAch(\"FTLmrfz\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tplayer.removeSkill(\"xingtumrfz\");\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tplayer.addSkill(\"xingyoumrfz\");\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tplayer.addSkill(\"jiexiangmrfz\");\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tplayer.gainMaxHp(3);\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tplayer.recoverTo(player.maxHp);\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tplayer.gain(event.pd, \"gain2\");\r\n\t\t\t\t}\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\telse player.popup(\"失败\");\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 12,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tplayer: function (player, target, card) {\r\n\t\t\t\t\t\tvar cards = player.getCards(\"he\"),\r\n\t\t\t\t\t\t\tnum = 0;\r\n\t\t\t\t\t\tfor (var i = 0; i < cards.length; i++) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tnum += cards[i].number;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (player.storage.xingtumrfz == undefined) return -1;\r\n\t\t\t\t\t\tif (player.storage.xingtumrfz.length < 3) return -1;\r\n\t\t\t\t\t\treturn num - 42;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txingyoumrfz: {\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"[其他角色/你]计算与[你/其他角色]的距离+#\",\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.countCards(\"he\", function (card) {\r\n\t\t\t\t\t\tfor (var i = 0; i < player.storage.xingyoumrfz.length; i++) {\r\n\t\t\t\t\t\t\tvar storage = player.storage.xingyoumrfz[i];\r\n\t\t\t\t\t\t\tif (get.suit(card) == storage) return false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}) > 0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tselectCard: 1,\r\n\t\t\tfilterCard: function (card) {\r\n\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\tfor (var i = 0; i < player.storage.xingyoumrfz.length; i++) {\r\n\t\t\t\t\tvar storage = player.storage.xingyoumrfz[i];\r\n\t\t\t\t\tif (get.suit(card) == storage) return false;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tcheck: function (card) {\r\n\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t},\r\n\t\t\tinit: (player, skill) => (player.storage[skill] = []),\r\n\t\t\tcontent: function () {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tplayer.recast(cards[0]);\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tplayer.storage.xingyoumrfz.add(cards[0].suit);\r\n\t\t\t},\r\n\t\t\tgroup: [\"xingyoumrfz_del\", \"xingyoumrfz_dis\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdel: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tplayer.storage.xingyoumrfz = [];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdis: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tplayer.addMark(\"xingyoumrfz_dis\", false);\r\n\t\t\t\t\t\t\"step 1\";\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\treturn current != player && player.inRange(current);\r\n\t\t\t\t\t\t\t}) == 0\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tplayer.loseMaxHp();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tglobalTo: function (from, to, distance) {\r\n\t\t\t\t\t\t\treturn (distance += to.countMark(\"xingyoumrfz_dis\"));\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tglobalFrom: function (from, to, distance) {\r\n\t\t\t\t\t\t\treturn (distance += from.countMark(\"xingyoumrfz_dis\"));\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 6,\r\n\t\t\t},\r\n\t\t},\r\n\t\tjiexiangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"die\" },\r\n\t\t\tforceDie: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tvar target = game.filterPlayer();\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tevent.targets = target.remove(player);\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tplayer.draw(Math.max(event.targets.length + 1, player.recastCount()));\r\n\t\t\t\t\"step 1\";\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tif (event.targets.length) {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tvar num = player.countCards(\"he\") - event.targets.length;\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tplayer.chooseCard(true, \"【揭相】:请选择至少一张牌将其分配给\" + get.translation(event.targets[0]), [1, num + 1], \"he\");\r\n\t\t\t\t}\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\telse event.goto(3);\r\n\t\t\t\t\"step 2\";\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tif (result.cards) {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tvar target = event.targets[0];\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\ttarget.gain(result.cards, \"gain2\");\r\n\t\t\t\t}\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tevent.targets.remove(target);\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tevent.goto(1);\r\n\t\t\t\t\"step 3\";\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tif (current != player) {\r\n\t\t\t\t\t\tcurrent.gainMaxHp();\r\n\t\t\t\t\t\tcurrent.recover();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (\r\n\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\treturn current != player && current.name == \"baocunzhemrfz\";\r\n\t\t\t\t\t})\r\n\t\t\t\t) {\r\n\t\t\t\t\tvar audio = new Audio(\"extension/whitherHelm/audio/CN/caidankelisitengmrfz.mp3\");\r\n\t\t\t\t\taudio.play();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\t//保存者 弗里斯顿\r\n\t\tshouwangmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t\tplayer: \"enterGame\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tunique: true,\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn event.name != \"phase\" || game.phaseNumber == 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tplayer.chooseTarget(true, \"【守望】:请选择一名其他角色\", function (card, player, target) {\r\n\t\t\t\t\treturn target != player;\r\n\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\treturn get.attitude(player, target) > 0;\r\n\t\t\t\t};\r\n\t\t\t\t\"step 1\";\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tresult.targets[0].addSkill(\"shouwangmrfz2\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"shouwangmrfz_die\", \"shouwangmrfz_recover\", \"shouwangmrfz_draw\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdie: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"dieBegin\" },\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player.hasSkill(\"shouwangmrfz2\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t//player.die()._triggered=null;\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tplayer.loseMaxHp(player.maxHp);\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"shouwangmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\trecover: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"dying\" },\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tplayer.recoverTo(1);\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"shouwangmrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\taudio: 2,\r\n\t\t\t\t\ttrigger: { player: \"drawAfter\" },\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\treturn event.getParent().name != \"shouwangmrfz2\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tcheck: function (event, player) {\r\n\t\t\t\t\t\tvar target = game.findPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn current.hasSkill(\"shouwangmrfz2\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn get.attitude(player, target) > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tprompt: function (event, player) {\r\n\t\t\t\t\t\tvar target = game.findPlayer(function (current) {\r\n\t\t\t\t\t\t\treturn current.hasSkill(\"shouwangmrfz2\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn \"是否令\" + get.translation(target) + \"摸一张牌？\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"shouwangmrfz\");\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\t\t\tif (current.hasSkill(\"shouwangmrfz2\")) current.draw();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\teffect: {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\ttarget(card, player, target, current) {\r\n\t\t\t\t\t\tif (get.type(card) == \"trick\" || card.name == \"sha\") return \"zeroplayertarget\";\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tshouwangmrfz2: {\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent: \"文明的消亡\",\r\n\t\t\t},\r\n\t\t\ttrigger: { player: \"drawAfter\" },\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\treturn event.getParent().name != \"shouwangmrfz_draw\";\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tprompt: function (event, player) {\r\n\t\t\t\tvar target = game.findPlayer(function (current) {\r\n\t\t\t\t\treturn current.hasSkill(\"shouwangmrfz\");\r\n\t\t\t\t});\r\n\t\t\t\treturn \"是否令\" + get.translation(target) + \"摸一张牌？\";\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tvar target = game.findPlayer(function (current) {\r\n\t\t\t\t\treturn current.hasSkill(\"shouwangmrfz\");\r\n\t\t\t\t});\r\n\t\t\t\treturn get.attitude(player, target) > 0;\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tplayer.logSkill(\"shouwangmrfz\");\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tgame.countPlayer(function (current) {\r\n\t\t\t\t\tif (current.hasSkill(\"shouwangmrfz\")) current.draw();\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t},\r\n\t\txijimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: \"dieBegin\" },\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"hej\") > 0;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tplayer.chooseTarget(\"【希冀】:你可以将你区域内所有的牌交给一名其他角色\", function (card, player, target) {\r\n\t\t\t\t\treturn target != player;\r\n\t\t\t\t}).ai = function (target) {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\treturn get.attitude(player, target) > 2 && target.hp > 0;\r\n\t\t\t\t};\r\n\t\t\t\t\"step 1\";\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tvar hej = player.getCards(\"hej\"),\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\ttarget = result.targets[0];\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tplayer.give(hej, target);\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"xijimrfz\", target);\r\n\t\t\t\t\ttarget.addSkill(\"xijimrfz_eff\");\r\n\t\t\t\t\ttarget.addMark(\"xijimrfz_eff\", hej.length, false);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"xijimrfz_die\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdie: {\r\n\t\t\t\t\taudio: \"xijimrfz\",\r\n\t\t\t\t\tenable: \"phaseUse\",\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn player.maxHp <= 5;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tplayer.chooseBool(\"【希冀】:是否失去所有体力上限？\");\r\n\t\t\t\t\t\t\"step 1\";\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tif (result.bool) {\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tvar num = Math.floor(player.maxHp / 2);\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tplayer.draw(Math.min(3, num > 1 ? num : 1));\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tplayer.loseMaxHp(player.maxHp);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"攻击距离、使用【杀】的次数+#\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num + player.countMark(\"xijimrfz_eff\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tattackRange: function (player, num) {\r\n\t\t\t\t\t\t\treturn num + player.countMark(\"xijimrfz_eff\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tplayer.removeMark(\"xijimrfz_eff\", player.countMark(\"xijimrfz_eff\"), false);\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tplayer.removeSkill(\"xijimrfz_eff\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tjingmomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\tcontent: function () {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tplayer.loseMaxHp();\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tmaxHandcardBase: function (player, num) {\r\n\t\t\t\t\treturn 5;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//伊祖米克 水月\r\n\t\tchanshimrfz: {\r\n\t\t\taudio: false,\r\n\t\t\ttrigger: {\r\n\t\t\t\tsource: \"damageEnd\",\r\n\t\t\t\tglobal: \"roundStart\",\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !player.hasSkill(\"chanshimrfz_ban\");\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tplayer.addTempSkill(\"chanshimrfz_ban\", \"phaseEnd\");\r\n\t\t\t\tvar list;\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tif (_status.characterlist) {\r\n\t\t\t\t\tlist = [];\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tfor (var i = 0; i < _status.characterlist.length; i++) {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tvar name = _status.characterlist[i];\r\n\t\t\t\t\t\tlist.push(name);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (_status.connectMode) {\r\n\t\t\t\t\tlist = get.charactersOL();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlist = get.gainableCharacters();\r\n\t\t\t\t}\r\n\t\t\t\tvar players = game.players.concat(game.dead);\r\n\t\t\t\tfor (var i = 0; i < players.length; i++) {\r\n\t\t\t\t\tlist.remove(players[i].name);\r\n\t\t\t\t\tlist.remove(players[i].name1);\r\n\t\t\t\t\tlist.remove(players[i].name2);\r\n\t\t\t\t}\r\n\t\t\t\tlist = list.randomGets(2);\r\n\t\t\t\tvar skills = [];\r\n\t\t\t\tfor (var i of list) {\r\n\t\t\t\t\tskills.addArray(lib.character[i][3]);\r\n\t\t\t\t}\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tif (!list.length || !skills.length) {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tif (player.isUnderControl()) {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tgame.swapPlayerAuto(player);\r\n\t\t\t\t}\r\n\t\t\t\tvar switchToAuto = function () {\r\n\t\t\t\t\t_status.imchoosing = false;\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tevent._result = {\r\n\t\t\t\t\t\tbool: true,\r\n\t\t\t\t\t\tskills: skills.randomGets(1),\r\n\t\t\t\t\t};\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tif (event.dialog) event.dialog.close();\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tif (event.control) event.control.close();\r\n\t\t\t\t};\r\n\t\t\t\tvar chooseButton = function (list, skills) {\r\n\t\t\t\t\tvar event = _status.event;\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tif (!event._result) event._result = {};\r\n\t\t\t\t\tevent._result.skills = [];\r\n\t\t\t\t\tvar rSkill = event._result.skills;\r\n\t\t\t\t\tvar dialog = ui.create.dialog(\"请获得一个技能\", [list, \"character\"], \"hidden\");\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tevent.dialog = dialog;\r\n\t\t\t\t\tvar table = document.createElement(\"div\");\r\n\t\t\t\t\ttable.classList.add(\"add-setting\");\r\n\t\t\t\t\ttable.style.margin = \"0\";\r\n\t\t\t\t\ttable.style.width = \"100%\";\r\n\t\t\t\t\ttable.style.position = \"relative\";\r\n\t\t\t\t\tfor (var i = 0; i < skills.length; i++) {\r\n\t\t\t\t\t\tvar td = ui.create.div(\".shadowed.reduce_radius.pointerdiv.tdnode\");\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\ttd.link = skills[i];\r\n\t\t\t\t\t\ttable.appendChild(td);\r\n\t\t\t\t\t\ttd.innerHTML = \"<span>\" + get.translation(skills[i]) + \"</span>\";\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttd.addEventListener(lib.config.touchscreen ? \"touchend\" : \"click\", function () {\r\n\t\t\t\t\t\t\tif (_status.dragged) return;\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tif (_status.justdragged) return;\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t_status.tempNoButton = true;\r\n\t\t\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t_status.tempNoButton = false;\r\n\t\t\t\t\t\t\t}, 500);\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tvar link = this.link;\r\n\t\t\t\t\t\t\tif (!this.classList.contains(\"bluebg\")) {\r\n\t\t\t\t\t\t\t\tif (rSkill.length >= 1) return;\r\n\t\t\t\t\t\t\t\trSkill.add(link);\r\n\t\t\t\t\t\t\t\tthis.classList.add(\"bluebg\");\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.classList.remove(\"bluebg\");\r\n\t\t\t\t\t\t\t\trSkill.remove(link);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdialog.content.appendChild(table);\r\n\t\t\t\t\tdialog.add(\"　　\");\r\n\t\t\t\t\tdialog.open();\r\n\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tevent.switchToAuto = function () {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tevent.dialog.close();\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tevent.control.close();\r\n\t\t\t\t\t\tgame.resume();\r\n\t\t\t\t\t\t_status.imchoosing = false;\r\n\t\t\t\t\t};\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tevent.control = ui.create.control(\"ok\", function (link) {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tevent.dialog.close();\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tevent.control.close();\r\n\t\t\t\t\t\tgame.resume();\r\n\t\t\t\t\t\t_status.imchoosing = false;\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tfor (var i = 0; i < event.dialog.buttons.length; i++) {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tevent.dialog.buttons[i].classList.add(\"selectable\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgame.pause();\r\n\t\t\t\t\tgame.countChoose();\r\n\t\t\t\t};\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tif (event.isMine()) {\r\n\t\t\t\t\tchooseButton(list, skills);\r\n\t\t\t\t}\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\telse if (event.isOnline()) {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tevent.player.send(chooseButton, list, skills);\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tevent.player.wait();\r\n\t\t\t\t\tgame.pause();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tswitchToAuto();\r\n\t\t\t\t}\r\n\t\t\t\t\"step 1\";\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tvar map = event.result || result;\r\n\t\t\t\tif (map && map.skills && map.skills.length) {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tfor (var i of map.skills) player.addSkillLog(i);\r\n\t\t\t\t}\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tgame.broadcastAll(function (list) {\r\n\t\t\t\t\tgame.expandSkills(list);\r\n\t\t\t\t\tfor (var i of list) {\r\n\t\t\t\t\t\tvar info = lib.skill[i];\r\n\t\t\t\t\t\tif (!info) continue;\r\n\t\t\t\t\t\tif (!info.audioname2) info.audioname2 = {};\r\n\t\t\t\t\t\tinfo.audioname2.old_yuanshu = \"weidi\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}, map.skills);\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//爱国者\r\n\t\txinjunxingmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tdirect: true,\r\n\t\t\tlocked: true,\r\n\t\t\tderivation: [\"sptunjiang\", \"reqiaobian\", \"xinlvli\", \"rezhanjue\"],\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"phaseChange\", \"drawAfter\", \"loseAfter\"],\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (event.name === \"draw\") return event.num > 0;\r\n\t\t\t\telse if (event.name === \"lose\") return event.type == \"discard\";\r\n\t\t\t\telse if (event.name === \"phase\") return !player.storage.xinjunxingmrfz || !player.storage.xinjunxingmrfz.isSubset(player.getSkills(null, false, false));\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (!Array.isArray(player.storage.xinjunxingmrfz)) player.storage.xinjunxingmrfz = [];\r\n\t\t\t\tif (trigger.name === \"draw\") {\r\n\t\t\t\t\tplayer.storage.xinjunxingmrfz = [\"sptunjiang\", \"reqiaobian\"];\r\n\t\t\t\t} else if (trigger.name === \"lose\") {\r\n\t\t\t\t\tplayer.storage.xinjunxingmrfz = [\"xinlvli\", \"rezhanjue\"];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tawait player.removeSkill([\"sptunjiang\", \"reqiaobian\", \"xinlvli\", \"rezhanjue\"]);\r\n\t\t\t\t\tplayer.addSkill(player.storage.xinjunxingmrfz);\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"xinjunxingmrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tyoujimrfz: {\r\n\t\t\t//audio:2,\r\n\t\t\tonremove: true,\r\n\t\t\tforced: true,\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.youjimrfz = [];\r\n\t\t\t},\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseBegin\",\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tif (player.isUnderControl()) {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tgame.swapPlayerAuto(player);\r\n\t\t\t\t}\r\n\t\t\t\tvar chooseButton = function (phases) {\r\n\t\t\t\t\tvar event = _status.event;\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tif (!event._result) event._result = {};\r\n\t\t\t\t\tevent._result.phases = [];\r\n\t\t\t\t\tevent._result.phases2 = [];\r\n\t\t\t\t\tvar endphases = event._result.phases;\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tvar rphases = event._result.phases2;\r\n\t\t\t\t\tvar dialog = ui.create.dialog(\"【游击】:你可以掉换执行阶段的顺序</br>执行顺序为由左到右依次执行\", \"hidden\");\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tevent.dialog = dialog;\r\n\t\t\t\t\tvar table = document.createElement(\"div\");\r\n\t\t\t\t\ttable.classList.add(\"add-setting\");\r\n\t\t\t\t\ttable.style.margin = \"0\";\r\n\t\t\t\t\ttable.style.width = \"100%\";\r\n\t\t\t\t\ttable.style.position = \"relative\";\r\n\t\t\t\t\tvar tdList = [];\r\n\t\t\t\t\tvar clickHandler = function () {\r\n\t\t\t\t\t\tif (_status.dragged) return;\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tif (_status.justdragged) return;\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t_status.tempNoButton = true;\r\n\t\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t_status.tempNoButton = false;\r\n\t\t\t\t\t\t}, 500);\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tvar link = this.link;\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tif (!this.classList.contains(\"bluebg\")) {\r\n\t\t\t\t\t\t\tif (endphases.length >= 2) return;\r\n\t\t\t\t\t\t\tendphases.push(link);\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tthis.classList.add(\"bluebg\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tthis.classList.remove(\"bluebg\");\r\n\t\t\t\t\t\t\tendphases.splice(endphases.indexOf(link), 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var i = 0; i < tdList.length; i++) {\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tif (tdList[i] !== this) {\r\n\t\t\t\t\t\t\t\ttdList[i].classList.remove(\"bluebg\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (endphases.length == 2) {\r\n\t\t\t\t\t\t\tvar index1 = phases.indexOf(endphases[0]);\r\n\t\t\t\t\t\t\tvar index2 = phases.indexOf(endphases[1]);\r\n\t\t\t\t\t\t\tif (index1 >= 0 && index2 >= 0 && index1 < tdList.length && index2 < tdList.length) {\r\n\t\t\t\t\t\t\t\tvar tempNode = tdList[index1];\r\n\t\t\t\t\t\t\t\tvar tempNode2 = tdList[index2];\r\n\t\t\t\t\t\t\t\tvar tempLink = tempNode.link;\r\n\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\tvar tempIndex = phases.indexOf(tempNode.link);\r\n\r\n\t\t\t\t\t\t\t\ttempNode.link = tempNode2.link;\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\ttempNode.innerHTML = \"<span>\" + get.tranPhase(tempNode2.link) + \"</span>\";\r\n\t\t\t\t\t\t\t\ttempNode2.link = tempLink;\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\ttempNode2.innerHTML = \"<span>\" + get.tranPhase(tempLink) + \"</span>\";\r\n\r\n\t\t\t\t\t\t\t\tphases[index1] = tempNode.link;\r\n\t\t\t\t\t\t\t\tphases[index2] = tempNode2.link;\r\n\r\n\t\t\t\t\t\t\t\ttempNode.classList.remove(\"bluebg\");\r\n\t\t\t\t\t\t\t\ttempNode2.classList.remove(\"bluebg\");\r\n\r\n\t\t\t\t\t\t\t\tevent._result.phases2 = phases;\r\n\r\n\t\t\t\t\t\t\t\tevent._result.phases.length = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tfor (var i = 0; i < phases.length; i++) {\r\n\t\t\t\t\t\tvar td = ui.create.div(\".shadowed.reduce_radius.pointerdiv.tdnode\");\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\ttd.link = phases[i];\r\n\t\t\t\t\t\ttable.appendChild(td);\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttd.innerHTML = \"<span>\" + get.tranPhase(phases[i]) + \"</span>\";\r\n\t\t\t\t\t\ttdList.push(td);\r\n\t\t\t\t\t\ttd.addEventListener(lib.config.touchscreen ? \"touchend\" : \"click\", clickHandler);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdialog.content.appendChild(table);\r\n\t\t\t\t\tdialog.add(\"　　\");\r\n\t\t\t\t\tdialog.open();\r\n\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tevent.switchToAuto = function () {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tevent.dialog.close();\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tevent.control.close();\r\n\t\t\t\t\t\tgame.resume();\r\n\t\t\t\t\t\t_status.imchoosing = false;\r\n\t\t\t\t\t};\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tevent.control = ui.create.control(\"ok\", function (link) {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tevent.dialog.close();\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tevent.control.close();\r\n\t\t\t\t\t\tgame.resume();\r\n\t\t\t\t\t\t_status.imchoosing = false;\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tfor (var i = 0; i < event.dialog.buttons.length; i++) {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tevent.dialog.buttons[i].classList.add(\"selectable\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgame.pause();\r\n\t\t\t\t};\r\n\t\t\t\tvar switchToAuto = function () {\r\n\t\t\t\t\t_status.imchoosing = false;\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tevent._result = {\r\n\t\t\t\t\t\tbool: true,\r\n\t\t\t\t\t\tphases2: [\"phaseUse\", \"phaseDraw\", \"phaseDiscard\", \"phaseZhunbei\", \"phaseJieshu\", \"phaseJudge\"],\r\n\t\t\t\t\t};\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tif (event.dialog) event.dialog.close();\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tif (event.control) event.control.close();\r\n\t\t\t\t};\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tif (event.isMine()) {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tchooseButton(trigger.phaseList);\r\n\t\t\t\t}\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\telse if (event.isOnline()) {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tevent.player.send(chooseButton, trigger.phaseList);\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tevent.player.wait();\r\n\t\t\t\t\tgame.pause();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tswitchToAuto();\r\n\t\t\t\t}\r\n\t\t\t\t\"step 1\";\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tvar map = event.result || result;\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\ttrigger.phaseList = map.phases2.length ? map.phases2 : trigger.phaseList; //怎么真的会有人不选阶段的Xd\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tgame.log(player, \"阶段执行顺序为\", `#y${get.translation(trigger.phaseList)}`);\r\n\t\t\t},\r\n\t\t},\r\n\t\t//斗士塔露拉\r\n\t\tjuhuomrfz: {\r\n\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.hasSkill(\"juhuomrfz_ban\")) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tevent.card &&\r\n\t\t\t\t\tget.tag(event.card, \"damage\") > 0 &&\r\n\t\t\t\t\tgame.hasPlayer2(current => {\r\n\t\t\t\t\t\treturn current.hasHistory(\"damage\", evt => {\r\n\t\t\t\t\t\t\treturn event.card == evt.card;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tprompt2: function (event, player) {\r\n\t\t\t\tvar num = player.getHistory(\"sourceDamage\", function (evt) {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\treturn evt.card == event.card;\r\n\t\t\t\t}).length;\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tvar num2 = event.card.number;\r\n\t\t\t\treturn \"【聚火】:是否增加\" + num + \"点体力上限（此牌点数<span class=firetext>\" + (player.hp < num2 ? \"大于\" : \"不大于\") + \"</span>你的体力值）\";\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tvar num = player.getHistory(\"sourceDamage\", function (evt) {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\treturn evt.card == trigger.card;\r\n\t\t\t\t}).length;\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tplayer.gainMaxHp(num);\r\n\t\t\t\t\"step 1\";\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tvar num2 = trigger.card.number;\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tif (num2 > player.hp) {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tplayer.drawTo(player.maxHp);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tplayer.loseMaxHp(player.maxHp - num2);\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tplayer.recoverTo(player.maxHp);\r\n\t\t\t\t}\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tplayer.addTempSkill(\"juhuomrfz_ban\", { global: \"phaseEnd\" });\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\txuehengmrfz: {\r\n\t\t\tmode: [\"identity\"],\r\n\t\t\tforced: true,\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationColor: \"thunder\",\r\n\t\t\tunique: true,\r\n\t\t\tjuexingji: true,\r\n\t\t\tderivation: [\"shihunmrfz\", \"hantianmrfz\"],\r\n\t\t\ttrigger: { player: \"phaseBegin\" },\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\treturn player.maxHp > game.countPlayer();\r\n\t\t\t},\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tplayer.awakenSkill(\"xuehengmrfz\");\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tplayer.removeSkill(\"juhuomrfz\");\r\n\t\t\t\t\"step 1\";\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tvar hasfriendDeath = function (player, identity) {\r\n\t\t\t\t\tvar bool = false;\r\n\t\t\t\t\tif (identity == \"zhu\") identity = \"zhong\";\r\n\t\t\t\t\tfor (var i of game.players) {\r\n\t\t\t\t\t\tif (!game.dead.includes(i)) continue;\r\n\t\t\t\t\t\tif (identity == \"zhu\" && i.identity == \"zhong\") bool = true;\r\n\t\t\t\t\t\tif (identity == i.identity) bool = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn bool;\r\n\t\t\t\t};\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tvar dead = hasfriendDeath(player, player.identity);\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tif (player.countCards(\"h\") > player.hp && dead == false) {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tplayer.addSkill(\"hantianmrfz\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tplayer.node.name.innerHTML = \"塔露拉？\";\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tgame.broadcastAll(function (player, shown) {\r\n\t\t\t\t\t\tvar identity = player.identity;\r\n\t\t\t\t\t\tif (identity != \"zhu\") {\r\n\t\t\t\t\t\t\tplayer.identity = \"nei\";\r\n\t\t\t\t\t\t\tif (player == game.me) {\r\n\t\t\t\t\t\t\t\tplayer.setIdentity();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfor (var i of game.players) {\r\n\t\t\t\t\t\t\t\tif (player == i) continue;\r\n\t\t\t\t\t\t\t\tif (i.identity == \"fan\") continue;\r\n\t\t\t\t\t\t\t\ti.identity = \"fan\";\r\n\t\t\t\t\t\t\t\ti.setIdentity();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t}, player);\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tplayer.addSkill(\"shihunmrfz\");\r\n\t\t\t\t}\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tplayer.recoverTo(player.maxHp);\r\n\t\t\t},\r\n\t\t},\r\n\t\tshihunmrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tcardUsable: function (card, player, num) {\r\n\t\t\t\t\treturn Infinity;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\tcontent: function () {\r\n\t\t\t\tfor (var i of game.players) {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tplayer.line(i);\r\n\t\t\t\t\ti.damage(2, \"fire\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 3,\r\n\t\t\t},\r\n\t\t\tgroup: [\"shihunmrfz_onedamage\", \"shihunmrfz_draw\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseJieshuBegin\" },\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn game.dead.length > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tplayer.draw(game.dead.length);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tthreaten: function () {\r\n\t\t\t\t\t\t\treturn Math.max(game.dead.length, 1.5);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tonedamage: {\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"damageBegin4\" },\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.num > 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\ttrigger.num = 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\thantianmrfz: {\r\n\t\t\tmarktext: \"志城\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"志城\",\r\n\t\t\t\tcontent: \"众志成城\",\r\n\t\t\t},\r\n\t\t\ttrigger: { player: \"phaseZhunbeiBegin\" },\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn !game.hasPlayer(current => {\r\n\t\t\t\t\treturn current.hasMark(\"hantianmrfz\");\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tcontent: function () {\r\n\t\t\t\t\"step 0\";\r\n\t\t\t\tfor (var i of game.players) {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tif (player.identity == \"nei\" && i == player) i.addMark(\"hantianmrfz\");\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tif ((player.identity == \"zhu\" && i.identity == \"zhong\") || (player.identity == \"zhong\" && i.identity == \"zhu\")) {\r\n\t\t\t\t\t\ti.addMark(\"hantianmrfz\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tif (player.identity == i.identity) i.addMark(\"hantianmrfz\");\r\n\t\t\t\t}\r\n\t\t\t\t\"step 1\";\r\n\t\t\t\tvar targets = game.filterPlayer(current => {\r\n\t\t\t\t\treturn current.hasMark(\"hantianmrfz\");\r\n\t\t\t\t});\r\n\t\t\t\tvar num = 0;\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tfor (var i = 0; i < targets.length; i++) {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tvar maxhp = targets[i].maxHp;\r\n\t\t\t\t\tif (maxhp > num) num = maxhp;\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i of targets) {\r\n\t\t\t\t\ti.gainMaxHp(num - i.maxHp);\r\n\t\t\t\t}\r\n\t\t\t\t\"step 2\";\r\n\t\t\t\tvar targets = game.filterPlayer(current => {\r\n\t\t\t\t\treturn current.hasMark(\"hantianmrfz\");\r\n\t\t\t\t});\r\n\t\t\t\tfor (var i of targets) {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\ti.recoverTo(player.maxHp);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"hantianmrfz_sha\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tban: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\tsha: {\r\n\t\t\t\t\ttrigger: { global: \"useCardAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (player.hasSkill(\"hantianmrfz_ban\") || event.card.name != \"sha\" || !event.targets.length) return false;\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tif (event.getParent(2).name == \"hantianmrfz_sha\") return false;\r\n\t\t\t\t\t\tif (!event.player.hasMark(\"hantianmrfz\")) return false;\r\n\t\t\t\t\t\tvar list = game.filterPlayer(current => {\r\n\t\t\t\t\t\t\t\treturn current.hasMark(\"hantianmrfz\");\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\ttargets = event.targets;\r\n\t\t\t\t\t\tfor (var i of list) {\r\n\t\t\t\t\t\t\tfor (var j of targets) {\r\n\t\t\t\t\t\t\t\tif (i == event.player || !i.isIn()) continue;\r\n\t\t\t\t\t\t\t\tif (!i.canUse(\"sha\", j, false)) continue;\r\n\t\t\t\t\t\t\t\tif (_status.connectMode && i.countCards(\"hs\") > 0) return true;\r\n\t\t\t\t\t\t\t\tif (i.hasSha()) return true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t\"step 0\";\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tevent.sources = game\r\n\t\t\t\t\t\t\t.filterPlayer(current => {\r\n\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\treturn current.hasMark(\"hantianmrfz\") && current != trigger.player;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.sortBySeat();\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tevent.targets = trigger.targets;\r\n\t\t\t\t\t\t\"step 1\";\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tvar current = event.sources.shift();\r\n\t\t\t\t\t\tvar targets = [];\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tevent.draw = current;\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tfor (var i of event.targets) {\r\n\t\t\t\t\t\t\tif (!i.isIn()) continue;\r\n\t\t\t\t\t\t\tif (!current.canUse(\"sha\", i, false)) continue;\r\n\t\t\t\t\t\t\ttargets.push(i);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (current.isIn() && (_status.connectMode || current.hasSha())) {\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tcurrent\r\n\t\t\t\t\t\t\t\t.chooseToUse(function (card, player, event) {\r\n\t\t\t\t\t\t\t\t\tif (get.name(card) != \"sha\") return false;\r\n\t\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t\treturn lib.filter.filterCard.apply(this, arguments);\r\n\t\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t}, \"【熯天】：是否对\" + get.translation(targets) + \"使用一张杀？\")\r\n\t\t\t\t\t\t\t\t.set(\"targetRequired\", true)\r\n\t\t\t\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t\tif (!_status.event.sourcex.includes(target)) return false;\r\n\t\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t\treturn lib.filter.targetEnabled.apply(this, arguments);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"sourcex\", targets)\r\n\t\t\t\t\t\t\t\t.set(\"logSkill\", \"hantianmrfz\")\r\n\t\t\t\t\t\t\t\t.set(\"addCount\", false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\"step 2\";\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tif (result.bool) event.draw.draw();\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tif (event.sources.length > 0) event.goto(1);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//特蕾西娅\r\n\t\tbojimrfz: {\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = {\r\n\t\t\t\t\tcolor: null,\r\n\t\t\t\t\tplayers: [],\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilterTarget(card, player, target) {\r\n\t\t\t\treturn target.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tselectTarget: -1,\r\n\t\t\tmultitarget: true,\r\n\t\t\tmultiline: true,\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar targets = event.targets.slice(),\r\n\t\t\t\t\tcardsx = [];\r\n\t\t\t\twhile (targets.length > 0) {\r\n\t\t\t\t\tvar prompt = `【博济】:请展示一张手牌\r\n                        ${player == targets[0] && player.storage.bojimrfz.color != null ? \"\" : \"<br>\" + get.translation(player) + \"展示的牌的颜色为：\" + get.translation(player.storage.bojimrfz.color)}`;\r\n\t\t\t\t\tconst {cards} = await targets[0]\r\n\t\t\t\t\t\t.chooseCard(true)\r\n\t\t\t\t\t\t.set(\"prompt\", prompt)\r\n\t\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tvar att = get.attitude(_status.event.player, _status.event.targetx),\r\n\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\tcolor = _status.event.color;\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tif (_status.event.targetx == _status.event.player) return Math.random();\r\n\t\t\t\t\t\t\telse if (att > 0) {\r\n\t\t\t\t\t\t\t\tif (get.color(card) == color) return 10;\r\n\t\t\t\t\t\t\t\telse return 1;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (get.color(card) == color) return 1;\r\n\t\t\t\t\t\t\t\telse return 10;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"targetx\", player)\r\n\t\t\t\t\t\t.set(\"color\", player.storage.bojimrfz.color)\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (!cards) return;\r\n\t\t\t\t\tcardsx.push(cards[0]);\r\n\t\t\t\t\tif (targets[0] == player) {\r\n\t\t\t\t\t\tplayer.storage.bojimrfz.color = get.color(cards[0]);\r\n\t\t\t\t\t\tplayer.storage.bojimrfz.players.add(player);\r\n\t\t\t\t\t} else if (get.color(cards[0]) == player.storage.bojimrfz.color) {\r\n\t\t\t\t\t\tplayer.storage.bojimrfz.players.add(targets[0]);\r\n\t\t\t\t\t\ttargets[0].popup(\"追随殿下\");\r\n\t\t\t\t\t} else targets[0].popup(\"拒绝殿下\");\r\n\t\t\t\t\tgame.log(targets[0], \"展示了\", cards);\r\n\t\t\t\t\ttargets.shift();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tevent.videoId = lib.status.videoId++;\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tgame.broadcastAll(\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tfunction (targets, cards, id, player) {\r\n\t\t\t\t\t\tvar dialog = ui.create.dialog(get.translation(player) + \"发动了【博济】<br>\" + get.translation(player) + \"展示牌的颜色为\" + get.translation(player.storage.bojimrfz.color), cards);\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tdialog.videoId = id;\r\n\t\t\t\t\t\tvar getName = function (target) {\r\n\t\t\t\t\t\t\tif (target._tempTranslate) return target._tempTranslate;\r\n\t\t\t\t\t\t\tvar name = target.name;\r\n\t\t\t\t\t\t\tif (lib.translate[name + \"_ab\"]) return lib.translate[name + \"_ab\"];\r\n\t\t\t\t\t\t\treturn get.translation(name);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tfor (var i = 0; i < targets.length; i++) {\r\n\t\t\t\t\t\t\tvar showstr = getName(targets[i]),\r\n\t\t\t\t\t\t\t\tcolor = get.color(cards[i]);\r\n\t\t\t\t\t\t\tswitch (color) {\r\n\t\t\t\t\t\t\t\tcase \"red\":\r\n\t\t\t\t\t\t\t\t\tshowstr = \"<font color=#FF0000>\" + showstr + \"</font>\";\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"black\":\r\n\t\t\t\t\t\t\t\t\tshowstr = \"<font color=#000000>\" + showstr + \"</font>\";\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\tshowstr = \"<font color=#FFFAFA>\" + showstr + \"</font>\";\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (color == player.storage.bojimrfz.color) showstr = showstr + \"<font color=#00FF00>√</font>\";\r\n\t\t\t\t\t\t\telse showstr = showstr + \"×\";\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tdialog.buttons[i].querySelector(\".info\").innerHTML = showstr;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t},\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tevent.targets,\r\n\t\t\t\t\tcardsx,\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tevent.videoId,\r\n\t\t\t\t\tplayer\r\n\t\t\t\t);\r\n\t\t\t\tfor (var i of player.storage.bojimrfz[\"players\"]) {\r\n\t\t\t\t\ti.addSkill([\"bojimrfz_mark\", \"bojimrfz_eff1\"]);\r\n\t\t\t\t\ti.storage.bojimrfz_mark = player;\r\n\t\t\t\t}\r\n\t\t\t\tplayer.addTempSkill(\"bojimrfz_eff2\", { player: \"phaseUseBegin\" });\r\n\t\t\t\tlet { promise, resolve } = Promise.withResolvers();\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tgame.broadcastAll(\"closeDialog\", event.videoId);\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t}, 3000);\r\n\t\t\t\tawait promise;\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\tthreaten: 2.3,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgroup: [\"bojimrfz_clear\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tmark: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\t\t\tvar target = game.findPlayer(current => {\r\n\t\t\t\t\t\t\t\treturn current == player.storage.bojimrfz_mark;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tvar storage = target.storage.bojimrfz.players.slice();\r\n\t\t\t\t\t\t\tstorage.remove(target);\r\n\t\t\t\t\t\t\tif (storage.length == 0) return `<font color=#FFD700>${get.translation(target)}</font>孤身一人`;\r\n\t\t\t\t\t\t\treturn `<font color=#FFD700>${get.translation(storage)}</font>追随着<font color=#FFD700>${get.translation(target)}</font>殿下`;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tforceDie: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"die\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\tvar target = game.findPlayer(current => {\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\treturn current == player.storage.bojimrfz_mark;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (!target) return;\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\ttarget.storage.bojimrfz.players.remove(trigger.player);\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tplayer.removeSkill(\"bojimrfz_mark\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: [\"phaseUseBegin\", \"die\"] },\r\n\t\t\t\t\tforceDie: true,\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn player.storage.bojimrfz[\"players\"].length > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tfor (var i of player.storage.bojimrfz[\"players\"]) {\r\n\t\t\t\t\t\t\ti.removeSkill(\"bojimrfz_eff1\");\r\n\t\t\t\t\t\t\ti.removeSkill(\"bojimrfz_group\");\r\n\t\t\t\t\t\t\ti.removeSkill(\"bojimrfz_mark\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tplayer.storage.bojimrfz = {\r\n\t\t\t\t\t\t\tcolor: null,\r\n\t\t\t\t\t\t\tplayers: [],\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff1: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: [\"loseEnd\", \"equipEnd\", \"addJudgeEnd\", \"gainEnd\", \"loseAsyncEnd\", \"addToExpansionEnd\", \"bojimrfzAfter\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\treturn Boolean(player.hasSkill(\"bojimrfz_mark\") ^ player.hasSkill(\"bojimrfz_group\"));\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tif (player.hasSkill(\"bojimrfz_mark\")) {\r\n\t\t\t\t\t\t\tvar cards = [],\r\n\t\t\t\t\t\t\t\ttarget = game.findPlayer(current => {\r\n\t\t\t\t\t\t\t\t\treturn current == player.storage.bojimrfz_mark;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tfor (var i of target.storage.bojimrfz.players) {\r\n\t\t\t\t\t\t\t\tif (i.countCards(\"h\") == 0) continue;\r\n\t\t\t\t\t\t\t\tif (i == player) continue;\r\n\t\t\t\t\t\t\t\tfor (var j of i.getCards(\"h\")) cards.push(j);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar cardsx = cards.map(card => {\r\n\t\t\t\t\t\t\t\tvar cardx = ui.create.card();\r\n\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\tcardx.init(get.cardInfo(card));\r\n\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\tcardx._cardid = card.cardid;\r\n\t\t\t\t\t\t\t\treturn cardx;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tplayer.directgains(cardsx, null, \"bojimrfz\");\r\n\t\t\t\t\t\t\tplayer.addSkill(\"bojimrfz_group\");\r\n\t\t\t\t\t\t} else player.removeSkill(\"bojimrfz_group\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tgroup: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tgroup: [\"bojimrfz_eff_use\", \"bojimrfz_eff_lose\"],\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: [\"addJudgeAfter\", \"gainAfter\", \"loseAfter\", \"loseAsyncAfter\", \"cardsDiscardAfter\", \"equipAfter\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.name == \"gain\") return event.cards && event.cards.length;\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tvar cards = event.getd();\r\n\t\t\t\t\t\treturn cards.length;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: function (player) {\r\n\t\t\t\t\t\tvar cards2 = player.getCards(\"s\", card => {\r\n\t\t\t\t\t\t\treturn card.hasGaintag(\"bojimrfz\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (player.isOnline2()) {\r\n\t\t\t\t\t\t\tplayer.send(\r\n\t\t\t\t\t\t\t\tfunction (cards, player) {\r\n\t\t\t\t\t\t\t\t\tcards.forEach(i => i.delete());\r\n\t\t\t\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcards2,\r\n\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcards2.forEach(i => i.delete());\r\n\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar cards = [];\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tvar idList = player.getCards(\"s\", card => card.hasGaintag(\"bojimrfz\")).map(i => i._cardid);\r\n\t\t\t\t\t\tvar target = game.findPlayer(current => {\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\treturn current == player.storage.bojimrfz_mark;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tfor (var i of target.storage.bojimrfz.players) {\r\n\t\t\t\t\t\t\tif (i.countCards(\"h\") == 0) continue;\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tif (i == player) continue;\r\n\t\t\t\t\t\t\tfor (var j of i.getCards(\"h\")) {\r\n\t\t\t\t\t\t\t\tif (idList.includes(j.cardid)) continue;\r\n\t\t\t\t\t\t\t\tcards.push(j);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar cards2 = cards.map(card => {\r\n\t\t\t\t\t\t\tvar cardx = ui.create.card();\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tcardx.init(get.cardInfo(card));\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tcardx._cardid = card.cardid;\r\n\t\t\t\t\t\t\treturn cardx;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tplayer.directgains(cards2, null, \"bojimrfz\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff_use: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"useCardBefore\", \"respondBefore\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tvar cards = player.getCards(\"s\", card => card.hasGaintag(\"bojimrfz\") && card._cardid);\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.cards &&\r\n\t\t\t\t\t\t\tevent.cards.some(card => {\r\n\t\t\t\t\t\t\t\treturn cards.includes(card);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tvar idList = player.getCards(\"s\", card => card.hasGaintag(\"bojimrfz\")).map(i => i._cardid);\r\n\t\t\t\t\t\tvar cards = [];\r\n\t\t\t\t\t\tvar target = game.findPlayer(current => {\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\treturn current == player.storage.bojimrfz_mark;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tfor (var i of target.storage.bojimrfz.players) {\r\n\t\t\t\t\t\t\tif (i.countCards(\"h\") == 0) continue;\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tif (i == player) continue;\r\n\t\t\t\t\t\t\tfor (var j of i.getCards(\"h\")) {\r\n\t\t\t\t\t\t\t\tif (!idList.includes(j.cardid)) continue;\r\n\t\t\t\t\t\t\t\tcards.push(j);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar cards2 = [];\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tfor (var card of trigger.cards) {\r\n\t\t\t\t\t\t\tvar cardx = cards.find(cardx => cardx.cardid == card._cardid);\r\n\t\t\t\t\t\t\tif (cardx) cards2.push(cardx);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tvar cards3 = trigger.cards.slice();\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\ttrigger.cards = cards2;\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\ttrigger.card.cards = cards2;\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tif (player.isOnline2()) {\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tplayer.send(\r\n\t\t\t\t\t\t\t\tfunction (cards, player) {\r\n\t\t\t\t\t\t\t\t\tcards.forEach(i => i.delete());\r\n\t\t\t\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcards3,\r\n\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcards3.forEach(i => i.delete());\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff_lose: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: [\"loseEnd\", \"equipEnd\", \"addJudgeEnd\", \"gainEnd\", \"loseAsyncEnd\", \"addToExpansionEnd\", \"cardsGotoOrderingBegin\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tfirstDo: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tvar idList = player.getCards(\"s\", card => card.hasGaintag(\"bojimrfz\")).map(i => i._cardid);\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.cards &&\r\n\t\t\t\t\t\t\tevent.cards.some(card => {\r\n\t\t\t\t\t\t\t\treturn idList.includes(card.cardid);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\tvar cards2;\r\n\t\t\t\t\t\tvar idList = [];\r\n\t\t\t\t\t\tvar target = game.findPlayer(current => {\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\treturn current == player.storage.bojimrfz_mark;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tfor (var i of target.storage.bojimrfz.players) {\r\n\t\t\t\t\t\t\tif (i.countCards(\"h\") == 0) continue;\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tif (i == player) continue;\r\n\t\t\t\t\t\t\tfor (var j of i.getCards(\"h\")) {\r\n\t\t\t\t\t\t\t\tidList.add(j.cardid);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tcards2 = player.getCards(\"s\", card => {\r\n\t\t\t\t\t\t\treturn card.hasGaintag(\"bojimrfz\") && !idList.includes(card._cardid);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tif (player.isOnline2()) {\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tplayer.send(\r\n\t\t\t\t\t\t\t\tfunction (cards, player) {\r\n\t\t\t\t\t\t\t\t\tcards.forEach(i => i.delete());\r\n\t\t\t\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcards2,\r\n\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcards2.forEach(i => i.delete());\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff2: {\r\n\t\t\t\t\taudio: \"bojimrfz\",\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"loseAfter\", \"changeHp\", \"gainMaxHpAfter\", \"loseMaxHpAfter\", \"bojimrfzAfter\"],\r\n\t\t\t\t\t\tglobal: [\"equipAfter\", \"addJudgeAfter\", \"gainAfter\", \"loseAsyncAfter\", \"addToExpansionAfter\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tif (event.getl && !event.getl(player)) return false;\r\n\t\t\t\t\t\treturn player.countCards(\"h\") < player.storage.bojimrfz.players.length;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tplayer.draw(player.storage.bojimrfz.players.length - player.countCards(\"h\"));\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tnoh: true,\r\n\t\t\t\t\t\tskillTagFilter: function (player, tag) {\r\n\t\t\t\t\t\t\tif (tag == \"noh\" && player.maxHp - player.hp < player.storage.bojimrfz.players.length) {\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tcaijianmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tforbid: [\"boss\"],\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"die\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tforceDie: true,\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationColor: \"gray\",\r\n\t\t\tfilter: function (event) {\r\n\t\t\t\treturn event.source && event.source.isIn();\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t// 删库\r\n\t\t\t\tvar doc = trigger.source;\r\n\t\t\t\tdoc.clearSkills();\r\n\t\t\t\tdoc.discard(doc.getCards(\"hej\"));\r\n\t\t\t\tdoc.link(false);\r\n\t\t\t\tdoc.turnOver(false);\r\n\t\t\t\tdoc.draw(3);\r\n\t\t\t\t// 获得技能\r\n\t\t\t\tvar skillsList = [];\r\n\t\t\t\tfor (var i of game.players) {\r\n\t\t\t\t\tif (i == player) continue;\r\n\t\t\t\t\tif (!lib.character[i.name][3]) continue;\r\n\t\t\t\t\tfor (var j of lib.character[i.name][3]) skillsList.push(j);\r\n\t\t\t\t}\r\n\t\t\t\tif (skillsList.length == 0) return;\r\n\t\t\t\tdoc.addSkill(skillsList.randomGets(Math.min(2, skillsList.length)));\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tmaixie_defend: true,\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tthreaten: function (player, target) {\r\n\t\t\t\t\tif (target.hp == 1) return 0.5;\r\n\t\t\t\t\treturn 1.5;\r\n\t\t\t\t},\r\n\t\t\t\teffect: {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\ttarget: function (card, player, target, current) {\r\n\t\t\t\t\t\tif (!target.hasFriend()) return;\r\n\t\t\t\t\t\tif (target.hp <= 1 && get.tag(card, \"damage\")) {\r\n\t\t\t\t\t\t\tif (player.hasSkillTag(\"jueqing\", false, target)) return 3;\r\n\t\t\t\t\t\t\treturn [1, 0, 0, -3 * get.threaten(player)];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 桥夹克里夫\r\n\t\tchongxiemrfz: {\r\n\t\t\tmarktext: \"弹药\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"弹药\",\r\n\t\t\t\tcontent: \"共有#枚弹药\",\r\n\t\t\t},\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardToPlayered\",\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tif (event.getParent().triggeredTargets3.length > 1) return false;\r\n\t\t\t\tif (get.name(event.card) == \"sha\") return true;\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tdirect: true,\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst {targets} = await player\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t.chooseTarget(get.prompt(\"chongxiemrfz\"), \"你可以弃置其中一名角色的手牌\", function (card, player, target) {\r\n\t\t\t\t\t\treturn (_status.event.targets.includes(target) || target == player) && target.countDiscardableCards(player, \"h\");\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", function (target) {\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tplayer.countCards(\"h\", card => {\r\n\t\t\t\t\t\t\t\treturn get.value(card) < 6;\r\n\t\t\t\t\t\t\t}) &&\r\n\t\t\t\t\t\t\tplayer == target\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\treturn 114514;\r\n\t\t\t\t\t\treturn 2 - get.attitude(_status.event.player, target);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"targets\", trigger.targets)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!targets) return;\r\n\t\t\t\tvar target = targets[0];\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tplayer.logSkill(\"chongxiemrfz\", target);\r\n\t\t\t\tconst {links} = await player.discardPlayerCard(\"h\", target, true).set(\"target\", target).set(\"complexSelect\", false).set(\"ai\", lib.card.guohe.ai.button).forResult();\r\n\t\t\t\tif (!links) return;\r\n\t\t\t\tif (player == target) player.draw();\r\n\t\t\t\tif (get.color(links[0]) == \"black\") {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tif (trigger.addCount !== false) {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\ttrigger.addCount = false;\r\n\t\t\t\t\t\ttrigger.player.getStat().card.sha--;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (get.color(links[0]) == \"red\") {\r\n\t\t\t\t\tplayer.addMark(\"chongxiemrfz\", 1, false);\r\n\t\t\t\t} else return;\r\n\t\t\t},\r\n\t\t},\r\n\t\tqj_chongjimrfz: {\r\n\t\t\tenable: \"chooseToUse\",\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\tif (player.countMark(\"chongxiemrfz\") < 1 || !player.isPhaseUsing()) return false;\r\n\t\t\t\treturn event.filterCard({ name: \"sha\" }, player, event);\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tawait player.chooseUseTarget({ name: \"sha\", nature: \"thunder\", isCard: true }, true, \"nodistance\");\r\n\t\t\t\tplayer.removeMark(\"chongxiemrfz\", 1, false);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 2.95,\r\n\t\t\t\trespondSha: true,\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\tif (player.countMark(\"chongxiemrfz\") < 1 || !player.isPhaseUsing()) return false;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tleitingmrfz: {\r\n\t\t\tinit: function (player) {\r\n\t\t\t\tplayer.storage.leitingmrfz = false;\r\n\t\t\t},\r\n\t\t\tlimited: true,\r\n\t\t\tskillAnimation: true,\r\n\t\t\tanimationColor: \"gray\",\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseUseBegin\",\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countMark(\"chongxiemrfz\") > 5 && !player.storage.leitingmrfz;\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tif (player.hasUnknown()) return false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.removeMark(\"chongxiemrfz\", 6, false);\r\n\t\t\t\tconst {targets} = await player\r\n\t\t\t\t\t.chooseTarget(true, \"【雷霆】:请选择一个其他角色，对其使用6张雷【杀】\")\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\r\n\t\t\t\t\t\treturn player.canUse({ name: \"sha\", nature: \"thunder\", isCard: true }, target, false) && player != target;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\treturn get.attitude(_status.event.player, target) < 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!targets) return;\r\n\t\t\t\tlet num = 6;\r\n\t\t\t\twhile (num > 0) {\r\n\t\t\t\t\tif (!targets[0].isIn()) break;\r\n\t\t\t\t\tif (player.canUse({ name: \"sha\", nature: \"thunder\", isCard: true }, targets[0], false)) {\r\n\t\t\t\t\t\tawait player.useCard({ name: \"sha\", nature: \"thunder\", isCard: true }, targets[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnum--;\r\n\t\t\t\t}\r\n\t\t\t\tplayer.storage.leitingmrfz = true;\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\t_status.SJZX_tmpleitingmrfz = targets[0];\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.when({\r\n\t\t\t\t\t\tplayer: \"phaseEnd\",\r\n\t\t\t\t\t\tglobal: \"dieAfter\",\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t.filter((event, player) => {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tvar target = _status.SJZX_tmpleitingmrfz;\r\n\t\t\t\t\t\tif (event.name == \"phase\") return true;\r\n\t\t\t\t\t\telse return event.player == target;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tvar target = _status.SJZX_tmpleitingmrfz;\r\n\t\t\t\t\t\tif (trigger.name == \"die\") {\r\n\t\t\t\t\t\t\tplayer.storage.leitingmrfz = false;\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tplayer.logSkill(\"leitingmrfz\", target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tdelete _status.SJZX_tmpleitingmrfz;\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 特雷西斯\r\n\t\tyuanfumrfz: {\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseDrawEnd\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst {cards} = await player\r\n\t\t\t\t\t.chooseCard(true)\r\n\t\t\t\t\t.set(\"prompt\", \"【怨府】:请展示一张手牌\")\r\n\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\tvar storage = player.storage.yuanfumrfz;\r\n\t\t\t\t\t\tif (storage.length > 1) return Math.random();\r\n\t\t\t\t\t\tif (storage.includes(get.color(card))) return -9999;\r\n\t\t\t\t\t\treturn get.color(card) == \"red\" ? 10 : 0 - get.value(card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"storage\", player.storage.yuanfumrfz)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tplayer.showCards(cards, `${get.translation(player)}因【怨府】而展示的牌`);\r\n\t\t\t\tfor (var i of game.players) {\r\n\t\t\t\t\tif (i == player) continue;\r\n\t\t\t\t\ti.addTempSkill(\"yuanfumrfz_eff\", { global: \"phaseAfter\" });\r\n\t\t\t\t\tif (!i.storage.yuanfumrfz_eff) i.storage.yuanfumrfz_eff = [];\r\n\t\t\t\t\ti.storage.yuanfumrfz_eff.add(get.color(cards[0]));\r\n\t\t\t\t}\r\n\t\t\t\tplayer.storage.yuanfumrfz.add(get.color(cards[0]));\r\n\t\t\t\tplayer.addTempSkill(\"yuanfumrfz_clear\", { global: \"phaseBegin\" });\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"yuanfumrfz\");\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tplayer.storage.yuanfumrfz = [];\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tplayer.loseHp();\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tvar num = player.getStat(\"damage\");\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tif (num && num > 0) player.draw(Math.min(5, num));\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\t\t\treturn `无法使用或打出手牌中${get.translation(player.storage.yuanfumrfz_eff)}的牌`;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardEnabled: function (card, player) {\r\n\t\t\t\t\t\t\tvar colors = player.storage.yuanfumrfz_eff;\r\n\t\t\t\t\t\t\tif (colors && colors.includes(get.color(card)) && get.position(card) == \"h\" && !player.isDying()) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcardSavable: function (card, player) {\r\n\t\t\t\t\t\t\tvar colors = player.storage.yuanfumrfz_eff;\r\n\t\t\t\t\t\t\tif (colors && colors.includes(get.color(card)) && get.position(card) == \"h\" && !player.isDying()) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcardEnabled2(card, player) {\r\n\t\t\t\t\t\t\tvar colors = player.storage.yuanfumrfz_eff;\r\n\t\t\t\t\t\t\tif (colors && colors.includes(get.color(card)) && get.position(card) == \"h\" && !player.isDying()) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tdelete player.storage.yuanfumrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\teffect: {\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\ttarget(card, player, target) {\r\n\t\t\t\t\t\t\t\tvar colors = target.storage.yuanfumrfz_eff;\r\n\t\t\t\t\t\t\t\tif (get.tag(card, \"damage\") && colors && colors.includes(get.color(card))) return [0, -999999];\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tfenzhoumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.hasEnabledSlot(1) || player.hasEnabledSlot(2) || player.hasEnabledSlot(5) || player.hasEnabledSlot(\"horse\");\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar {control} = await player\r\n\t\t\t\t\t.chooseToDisable(true)\r\n\t\t\t\t\t.set(\"ai\", function (event, player, list) {\r\n\t\t\t\t\t\tif (list.includes(\"equip5\")) return \"equip5\";\r\n\t\t\t\t\t\telse if (list.includes(\"equip2\")) return \"equip2\";\r\n\t\t\t\t\t\telse if (list.includes(\"horse\")) return \"horse\";\r\n\t\t\t\t\t\treturn \"equip1\";\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!control) return;\r\n\t\t\t\tlet targets = game.players.slice().remove(player);\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tvar getChooseList = function (event, player, target) {\r\n\t\t\t\t\tlet list = [];\r\n\t\t\t\t\tlet chooseList = [`弃置一张牌，本回合你下次受到的伤害+1`, `交给${get.translation(player)}一张牌，本回合${get.translation(player)}使用【杀】的次数+1`, `令${get.translation(player)}摸一张牌，本回合${get.translation(player)}下次造成的伤害+1`];\r\n\t\t\t\t\tif (target.countCards(\"h\") > 0) {\r\n\t\t\t\t\t\tlist.push(\"选项一\");\r\n\t\t\t\t\t\tlist.push(\"选项二\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tchooseList[0] = '<span style=\"opacity:0.5; \">' + chooseList[0] + \"（你没有牌）</span>\";\r\n\t\t\t\t\t\tchooseList[1] = '<span style=\"opacity:0.5; \">' + chooseList[1] + \"（你没有牌）</span>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlist.push(\"选项三\");\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tlist: list,\r\n\t\t\t\t\t\tchooseList: chooseList,\r\n\t\t\t\t\t};\r\n\t\t\t\t};\r\n\t\t\t\twhile (targets.length > 0) {\r\n\t\t\t\t\tvar target = targets[0];\r\n\t\t\t\t\tif (!target.isIn()) {\r\n\t\t\t\t\t\ttargets.shift();\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!player.isIn()) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar list = getChooseList(event, player, target).list,\r\n\t\t\t\t\t\tchooseList = getChooseList(event, player, target).chooseList;\r\n\t\t\t\t\tvar {control} = await target\r\n\t\t\t\t\t\t.chooseControl(list)\r\n\t\t\t\t\t\t.set(\"choiceList\", chooseList)\r\n\t\t\t\t\t\t.set(\"prompt\", \"请选择一项\")\r\n\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tvar list = _status.event.list,\r\n\t\t\t\t\t\t\t\tplayer = _status.event.player,\r\n\t\t\t\t\t\t\t\ttarget = _status.event.target;\r\n\t\t\t\t\t\t\tif (get.attitude(player, target) > 0) {\r\n\t\t\t\t\t\t\t\tif (list.includes(\"选项二\")) return [\"选项二\", \"选项三\"].randomGet();\r\n\t\t\t\t\t\t\t\treturn \"选项三\";\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (list.includes(\"选项二\") && player.getCards(\"h\").filter(card => get.value(card) < 6)) return \"选项二\";\r\n\t\t\t\t\t\t\t\tif (list.includes(\"选项一\")) return \"选项一\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn list.randomGet();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"list\", list)\r\n\t\t\t\t\t\t.set(\"target\", player)\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (!control) {\r\n\t\t\t\t\t\ttargets.shift();\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tswitch (control) {\r\n\t\t\t\t\t\tcase \"选项一\":\r\n\t\t\t\t\t\t\ttarget.chooseToDiscard(true, \"【焚舟】:请弃置一张手牌\", \"h\");\r\n\t\t\t\t\t\t\ttarget.addMark(\"fenzhoumrfz_eff1\", 1, false);\r\n\t\t\t\t\t\t\ttarget.addTempSkill(\"fenzhoumrfz_eff1\", { player: [\"damageEnd\", \"phaseEnd\"] });\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"选项二\":\r\n\t\t\t\t\t\t\tvar {cards} = await target\r\n\t\t\t\t\t\t\t\t.chooseCard(\"h\", `【焚舟】:请交给${get.translation(player)}一张手牌`, true)\r\n\t\t\t\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\t\t\t\tvar player = _status.event.player,\r\n\t\t\t\t\t\t\t\t\t\ttarget = _status.event.target;\r\n\t\t\t\t\t\t\t\t\tvar num = get.value(card),\r\n\t\t\t\t\t\t\t\t\t\tatt = get.attitude(player, target);\r\n\t\t\t\t\t\t\t\t\tif (get.tag(card, \"damage\")) num += (att > 0 ? 1 : -1) * get.value(card);\r\n\t\t\t\t\t\t\t\t\treturn (att > 0 ? 1 : -1) * get.value(card);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"target\", player)\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\t\t\tif (cards) {\r\n\t\t\t\t\t\t\t\ttarget.give(cards, player);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tplayer.addMark(\"fenzhoumrfz_eff2\", 1, false);\r\n\t\t\t\t\t\t\tplayer.addTempSkill(\"fenzhoumrfz_eff2\", { player: \"phaseEnd\" });\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"选项三\":\r\n\t\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\t\tplayer.addMark(\"fenzhoumrfz_eff3\", 1, false);\r\n\t\t\t\t\t\t\tplayer.addTempSkill(\"fenzhoumrfz_eff3\", {\r\n\t\t\t\t\t\t\t\tplayer: \"phaseEnd\",\r\n\t\t\t\t\t\t\t\tsource: \"damageEnd\",\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttargets.shift();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff1: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"本回合下次受到的伤害+#\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"damageBegin2\" },\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn player.countMark(\"fenzhoumrfz_eff1\") > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\ttrigger.num += player.countMark(\"fenzhoumrfz_eff1\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff2: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"本回合使用【杀】的次数+#\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardUsable(card, player, num) {\r\n\t\t\t\t\t\t\tif (card.name == \"sha\") return num + player.countMark(\"fenzhoumrfz_eff2\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\teff3: {\r\n\t\t\t\t\tmark: true,\r\n\t\t\t\t\tintro: {\r\n\t\t\t\t\t\tcontent: \"本回合下次造成的伤害+#\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonremove: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { source: \"damageBegin2\" },\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn player.countMark(\"fenzhoumrfz_eff3\") > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\ttrigger.num += player.countMark(\"fenzhoumrfz_eff3\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 10,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 普瑞赛斯\r\n\t\t// TODO 等剧情更新后在重新设计\r\n\t\tbianyimrfz: {\r\n\t\t\taudio: 4,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"roundStart\",\r\n\t\t\t\tsource: \"damageEnd\",\r\n\t\t\t},\r\n\t\t\tGetAllSkills(player) {\r\n\t\t\t\tvar list = {};\r\n\t\t\t\tvar ownSkills = get.translation(player.getSkills(true, false, false));\r\n\t\t\t\tfor (var key in lib.character) {\r\n\t\t\t\t\tif (!lib.character[key][3]) continue;\r\n\t\t\t\t\tvar skills = lib.character[key][3];\r\n\t\t\t\t\tfor (var i of skills) {\r\n\t\t\t\t\t\tif (!lib.translate[i]) continue;\r\n\t\t\t\t\t\tif (ownSkills.includes(lib.translate[i])) continue;\r\n\t\t\t\t\t\tlist[i] = lib.translate[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn list;\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t// 一些函数\r\n\r\n\t\t\t\t// 随机获取任意个键值\r\n\t\t\t\tfunction getRandomKeys(obj, num) {\r\n\t\t\t\t\tvar keys = Object.keys(obj);\r\n\t\t\t\t\tvar selectedKeys = [];\r\n\t\t\t\t\tvar i;\r\n\t\t\t\t\tfor (i = 0; i < num; i++) {\r\n\t\t\t\t\t\tvar randomIndex = Math.floor(Math.random() * keys.length);\r\n\t\t\t\t\t\tselectedKeys.push(keys[randomIndex]);\r\n\t\t\t\t\t\tkeys.splice(randomIndex, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn selectedKeys;\r\n\t\t\t\t}\r\n\t\t\t\t// 获取不重复的中文字符\r\n\t\t\t\tfunction extractChineseCharacters(arr) {\r\n\t\t\t\t\tvar chineseRegex = /[\\u4e00-\\u9fa5]/g;\r\n\t\t\t\t\tvar chineseSet = new Set();\r\n\r\n\t\t\t\t\tarr.forEach(function (str) {\r\n\t\t\t\t\t\tvar chineseChars = str.match(chineseRegex);\r\n\t\t\t\t\t\tif (chineseChars) {\r\n\t\t\t\t\t\t\tchineseChars.forEach(function (char) {\r\n\t\t\t\t\t\t\t\tchineseSet.add(char);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn Array.from(chineseSet);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 随机从数组中获取元素\r\n\t\t\t\tfunction getRandomElements(arr, num) {\r\n\t\t\t\t\tvar result = [];\r\n\t\t\t\t\tvar len = arr.length;\r\n\t\t\t\t\tvar indices = [];\r\n\r\n\t\t\t\t\tfor (var i = 0; i < len; i++) {\r\n\t\t\t\t\t\tindices.push(i);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (var j = 0; j < num; j++) {\r\n\t\t\t\t\t\tvar randomIndex = Math.floor(Math.random() * indices.length);\r\n\t\t\t\t\t\tvar index = indices[randomIndex];\r\n\t\t\t\t\t\tresult.push(arr[index]);\r\n\t\t\t\t\t\tindices.splice(randomIndex, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 检查存在的技能\r\n\t\t\t\tfunction findWordCombinations(arrA, arrB) {\r\n\t\t\t\t\tvar combinations = [];\r\n\r\n\t\t\t\t\tfor (var i = 0; i < arrB.length - 1; i++) {\r\n\t\t\t\t\t\tfor (var j = i + 1; j < arrB.length; j++) {\r\n\t\t\t\t\t\t\tvar word1 = arrB[i] + arrB[j];\r\n\t\t\t\t\t\t\tvar word2 = arrB[j] + arrB[i];\r\n\t\t\t\t\t\t\t// console.log(word1, word2);\r\n\t\t\t\t\t\t\tif (arrA.includes(word1)) {\r\n\t\t\t\t\t\t\t\tcombinations.push(word1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (arrA.includes(word2)) {\r\n\t\t\t\t\t\t\t\tcombinations.push(word2);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn combinations;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 通过值找键\r\n\t\t\t\tfunction findKeysByValue(obj, value) {\r\n\t\t\t\t\tvar keys = [];\r\n\t\t\t\t\tfor (var key in obj) {\r\n\t\t\t\t\t\tif (obj[key] && obj[key] === value) {\r\n\t\t\t\t\t\t\tkeys.push(key);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (keys.length == 0) return null;\r\n\t\t\t\t\treturn keys;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// ai自动选择\r\n\t\t\t\tfunction autoChoose(list, findWord) {\r\n\t\t\t\t\tvar index = [];\r\n\t\t\t\t\tvar list = list.map(i => i[1]);\r\n\t\t\t\t\tvar findWord = findWord.randomGet();\r\n\t\t\t\t\tfor (var i of findWord) {\r\n\t\t\t\t\t\tfor (var j = 0; j < list.length; j++) {\r\n\t\t\t\t\t\t\tif (i != list[j]) continue;\r\n\t\t\t\t\t\t\tindex.push(j);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn index;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 获取完全没法组成技能的汉字\r\n\t\t\t\tfunction getCannotCharacters(arr, skills) {\r\n\t\t\t\t\tvar index = [];\r\n\t\t\t\t\tvar list = arr.map(i => i[1]);\r\n\t\t\t\t\tfor (var name of skills) {\r\n\t\t\t\t\t\tfor (var j of name) {\r\n\t\t\t\t\t\t\tfor (var k = 0; k < list.length; k++) {\r\n\t\t\t\t\t\t\t\tif (j != list[k]) continue;\r\n\t\t\t\t\t\t\t\tindex.push(k);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn index;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//技能部分\r\n\t\t\t\tvar allCNSkills = [],\r\n\t\t\t\t\tENSkills = lib.skill.bianyimrfz.GetAllSkills(player);\r\n\t\t\t\tfor (var key in ENSkills) {\r\n\t\t\t\t\tallCNSkills.push(ENSkills[key]);\r\n\t\t\t\t}\r\n\t\t\t\t// 性能挑战（划掉）\r\n\t\t\t\twhile (true) {\r\n\t\t\t\t\tvar skillsList = getRandomKeys(lib.skill.bianyimrfz.GetAllSkills(player), 100);\r\n\t\t\t\t\tvar CNSkills = [];\r\n\t\t\t\t\tfor (var i of skillsList) {\r\n\t\t\t\t\t\tCNSkills.add(get.translation(i));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar CNCharacters = extractChineseCharacters(CNSkills);\r\n\t\t\t\t\tvar randomCN = getRandomElements(CNCharacters, Math.min(CNCharacters.length, 50));\r\n\t\t\t\t\tvar findWord = findWordCombinations(allCNSkills, randomCN);\r\n\t\t\t\t\t//保底技能数 默认15 不给调了喵\r\n\t\t\t\t\tvar num = 15;\r\n\t\t\t\t\tif (findWord.length > num) break;\r\n\t\t\t\t}\r\n\t\t\t\tvar list = [];\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tfor (var i = 0; i < randomCN.length; i++) {\r\n\t\t\t\t\tlist[i] = [i, randomCN[i]];\r\n\t\t\t\t}\r\n\t\t\t\tif (list.length == 0) {\r\n\t\t\t\t\tplayer.popup(\"纳尼？没有技能了？！\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar fun1 = list => {\r\n\t\t\t\t\t//不给调了喵\r\n\t\t\t\t\tvar per = 75;\r\n\t\t\t\t\tif (per == 0) return [];\r\n\t\t\t\t\tvar filterEnd = getRandomElements(list, Math.floor(list.length * per));\r\n\t\t\t\t\treturn filterEnd;\r\n\t\t\t\t};\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tgame.broadcastAll(function (player) {\r\n\t\t\t\t\tplayer.forceCountChoose = { chooseButton: 30 };\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t}, player);\r\n\t\t\t\tvar buttonList = [`编译:请选择至少两个汉字（推荐选两个汉字）`];\r\n\t\t\t\tvar count = 0;\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tfor (var i = 0; i < Math.ceil(list.length / 10); i++) {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tbuttonList.push([list.slice(count, count + 10 >= list.length ? list.length : count + 10), \"tdnodes\"]);\r\n\t\t\t\t\tcount += 10;\r\n\t\t\t\t}\r\n\t\t\t\tbuttonList.push(`存在有${findWord.length}个技能`);\r\n\t\t\t\tconst {links} =\r\n\t\t\t\t\tevent.isMine() == false\r\n\t\t\t\t\t\t? {links:autoChoose(list, findWord)}\r\n\t\t\t\t\t\t: await player\r\n\t\t\t\t\t\t\t\t.chooseButton(buttonList)\r\n\t\t\t\t\t\t\t\t.set(\"forced\", true)\r\n\t\t\t\t\t\t\t\t.set(\"selectButton\", [2, Infinity])\r\n\t\t\t\t\t\t\t\t.set(\"filterButton\", function (button) {\r\n\t\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t\tvar list = _status.event.cannot;\r\n\t\t\t\t\t\t\t\t\tif (list.length == 0) return true;\r\n\t\t\t\t\t\t\t\t\tif (list.includes(button.link)) return true;\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t\t_status.tmp_PRTS_endTime = true;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.set(\"cannot\", fun1(getCannotCharacters(list, findWord)))\r\n\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tgame.broadcastAll(function (player) {\r\n\t\t\t\t\tdelete player.forceCountChoose;\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t}, player);\r\n\t\t\t\tvar fun2 = (player, end = false) => {\r\n\t\t\t\t\tif (!end) player.popup(`没有${CsSkill}`);\r\n\t\t\t\t\telse player.popup(`时间耗尽`);\r\n\t\t\t\t\tgame.log(`可组成的技能有:${findWord}`);\r\n\t\t\t\t};\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tif (!links || _status.tmp_PRTS_endTime) {\r\n\t\t\t\t\tfun2(player, true);\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tdelete _status.tmp_PRTS_endTime;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar CsSkill = \"\";\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tfor (var i of links) {\r\n\t\t\t\t\tCsSkill = CsSkill + list[i][1];\r\n\t\t\t\t}\r\n\t\t\t\tvar findkey = findKeysByValue(ENSkills, CsSkill);\r\n\t\t\t\tif (findkey != null) {\r\n\t\t\t\t\tvar introSkills = [];\r\n\t\t\t\t\tfor (var i of findkey) {\r\n\t\t\t\t\t\tintroSkills.push(get.skillInfoTranslation(i));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst {index} =\r\n\t\t\t\t\t\tfindkey.length == 1\r\n\t\t\t\t\t\t\t? {index:0}\r\n\t\t\t\t\t\t\t: await player\r\n\t\t\t\t\t\t\t\t\t.chooseControl()\r\n\t\t\t\t\t\t\t\t\t.set(\"choiceList\", introSkills)\r\n\t\t\t\t\t\t\t\t\t.set(\"prompt\", `请选择一个版本的【${get.translation(findkey[0])}】`)\r\n\t\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t\t.set(\"ai\", () => get.rand(0, findkey.length - 1))\r\n\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (!index && index != 0) return;\r\n\t\t\t\t\tlet info = get.info(findkey[index]);\r\n\t\t\t\t\tif (!info.audioname2) info.audioname2 = {};\r\n\t\t\t\t\tinfo.audioname2[player.name] = \"bianyimrfz\";\r\n\t\t\t\t\tplayer.addSkill(findkey[index]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfun2(player);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 新 斗士塔露拉\r\n\t\ttalula_shixinmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tsource: \"damageEnd\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.player && event.player.isIn() && !!event.player.countGainableCards(player, \"hes\");\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar pos = [];\r\n\t\t\t\tfor (var i of trigger.player.getCards(\"hes\")) {\r\n\t\t\t\t\tpos.add(get.position(i));\r\n\t\t\t\t}\r\n\t\t\t\tvar {cards} = await player\r\n\t\t\t\t\t.choosePlayerCard(\"hes\", trigger.player, true)\r\n\t\t\t\t\t.set(\"prompt\", `【拾薪】:请选择其各区域内的一张牌`)\r\n\t\t\t\t\t.set(\"selectButton\", pos.length)\r\n\t\t\t\t\t.set(\"filterButton\", button => {\r\n\t\t\t\t\t\tlet cards = ui.selected.cards;\r\n\t\t\t\t\t\tlet pos = cards.slice().map(card => get.position(card));\r\n\t\t\t\t\t\treturn !pos.includes(get.position(button));\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t.set(\"ai\", lib.card.shunshou.ai.button)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!cards) return;\r\n\t\t\t\tif (_status.connectMode)\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tgame.broadcastAll(function () {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t_status.noclearcountdown = true;\r\n\t\t\t\t\t});\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tevent.given_map = {};\r\n\t\t\t\twhile (cards.length > 0) {\r\n\t\t\t\t\tvar {links} =\r\n\t\t\t\t\t\tcards.length == 1\r\n\t\t\t\t\t\t\t? {links:cards}\r\n\t\t\t\t\t\t\t: await player\r\n\t\t\t\t\t\t\t\t\t.chooseCardButton(\"【拾薪】:请选择要分配的牌\", true, cards, [1, cards.length])\r\n\t\t\t\t\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\t\t\t\t\tif (ui.selected.buttons.length == 0) return 1;\r\n\t\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.forResult();\r\n\t\t\t\t\tif (!links) continue;\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tevent.togive = links.slice();\r\n\t\t\t\t\tcards.removeArray(links);\r\n\t\t\t\t\tconst {targets} = await player\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t.chooseTarget(\"选择一名角色获得\" + get.translation(event.togive), true)\r\n\t\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\t\tconst att = get.attitude(_status.event.player, target);\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tif (_status.event.enemy) {\r\n\t\t\t\t\t\t\t\treturn -att;\r\n\t\t\t\t\t\t\t} else if (att > 0) {\r\n\t\t\t\t\t\t\t\treturn att / (1 + target.countCards(\"h\"));\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn att / 100;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t.set(\"enemy\", get.value(event.togive[0], player, \"raw\") < 0).forResult();\r\n\t\t\t\t\tif (targets) {\r\n\t\t\t\t\t\tconst id = targets[0].playerid,\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tmap = event.given_map;\r\n\t\t\t\t\t\tif (!map[id]) map[id] = [];\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tmap[id].addArray(event.togive);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (_status.connectMode) {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tgame.broadcastAll(function () {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tdelete _status.noclearcountdown;\r\n\t\t\t\t\t\tgame.stopCountChoose();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tconst list = [];\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tfor (const i in event.given_map) {\r\n\t\t\t\t\tconst source = (_status.connectMode ? lib.playerOL : game.playerMap)[i];\r\n\t\t\t\t\tplayer.line(source, \"green\");\r\n\t\t\t\t\tif (player !== source && (get.mode() !== \"identity\" || player.identity !== \"nei\")) player.addExpose(0.2);\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tlist.push([source, event.given_map[i]]);\r\n\t\t\t\t}\r\n\t\t\t\tgame.loseAsync({\r\n\t\t\t\t\tgain_list: list,\r\n\t\t\t\t\tgiver: player,\r\n\t\t\t\t\tanimate: \"draw\",\r\n\t\t\t\t}).setContent(\"gaincardMultiple\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tzhuoximrfz: {\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCard\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (!event.card) return false;\r\n\t\t\t\treturn (\r\n\t\t\t\t\t!player.storage.zhuoximrfz.includes(get.type2(event.card)) &&\r\n\t\t\t\t\tgame.hasPlayer(current => {\r\n\t\t\t\t\t\treturn get.distance(current, player) == player.hp && current != player;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tconst { result } = await player\r\n\t\t\t\t\t.chooseTarget(`【灼息】:你可以对一名与你距离为${player.hp}的角色造成一点火焰伤害`)\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t.set(\"filterTarget\", (card, player, target) => {\r\n\t\t\t\t\t\treturn get.distance(target, player) == player.hp && target != player;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", target => {\r\n\t\t\t\t\t\tvar player = get.event().player;\r\n\t\t\t\t\t\treturn get.damageEffect(target, player, player, \"fire\") > 0;\r\n\t\t\t\t\t});\r\n\t\t\t\tif (!result) return;\r\n\t\t\t\tevent.result = result;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet target = event.targets[0];\r\n\t\t\t\ttarget.damage(\"fire\");\r\n\t\t\t\tplayer.line(target);\r\n\t\t\t\tif (!player.storage.zhuoximrfz) player.storage.zhuoximrfz = [];\r\n\t\t\t\tplayer.storage.zhuoximrfz.add(get.type2(trigger.card));\r\n\t\t\t},\r\n\t\t\tgroup: \"zhuoximrfz_clear\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseEnd\" },\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tplayer.storage.zhuoximrfz = [];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 双王 特蕾西娅&&特雷西斯\r\n\t\tchenke1mrfz: {\r\n\t\t\taudio: \"chenkemrfz\",\r\n\t\t},\r\n\t\tchenke2mrfz: {\r\n\t\t\taudio: \"chenkemrfz\",\r\n\t\t},\r\n\t\tchenke3mrfz: {\r\n\t\t\taudio: \"chenkemrfz\",\r\n\t\t},\r\n\t\tchenkemrfz: {\r\n\t\t\textraSkills: [\"duwu\", \"neifa\", \"maihuo\", \"spyanhuo\", \"xinfu_sidao\", \"dclibang\", \"zengou\", \"drlt_siyong\", \"jiaozi\", \"rewangzun\", \"nzry_cunmu\", \"jiuchi\", \"benghuai\", \"zhaoluan\", \"wumo\", \"taoluan\", \"jishe\", \"huisheng\", \"shifei\", \"huaiyi\", \"oltuishi\", \"olxiaofan\", \"oljuanxia\", \"olgoude\", \"dcwujie\"],\r\n\t\t\tgetNegative(player) {\r\n\t\t\t\tlet banSkills = [\"nscesuan\", \"zhaohuo\", \"rekurou\"];\r\n\t\t\t\tlet skillTemps = [];\r\n\t\t\t\tlet arrs = Object.keys(lib.skill);\r\n\t\t\t\tlet hasSkills = Object.values(lib.character)\r\n\t\t\t\t\t.map(i => i[3])\r\n\t\t\t\t\t.flat();\r\n\t\t\t\tfor (let key of arrs) {\r\n\t\t\t\t\tif (banSkills.includes(key)) continue;\r\n\t\t\t\t\tif (hasSkills.includes(key) && lib.translate[key] && !player.hasSkill(key) && (lib.skill.chenkemrfz.extraSkills.includes(key) || get.skillRank(key) < 0)) skillTemps.push(key);\r\n\t\t\t\t}\r\n\t\t\t\treturn skillTemps.randomGet() || [];\r\n\t\t\t},\r\n\t\t\tinit(player) {\r\n\t\t\t\tplayer.storage.chenkemrfz = [\"chenke1mrfz\", \"chenke2mrfz\", \"chenke3mrfz\", \"gujimrfz\", \"jiangqingmrfz\"];\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\tfirstDo: true,\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet skill = lib.skill.chenkemrfz.getNegative(player);\r\n\t\t\t\tawait player.addSkill(skill);\r\n\t\t\t\tplayer.storage.chenkemrfz.add(skill);\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tgame.broadcastAll(\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tfunction (list) {\r\n\t\t\t\t\t\tgame.expandSkills(list);\r\n\t\t\t\t\t\tfor (var i of list) {\r\n\t\t\t\t\t\t\tvar info = lib.skill[i];\r\n\t\t\t\t\t\t\tif (!info) continue;\r\n\t\t\t\t\t\t\tif (!info.audioname2) info.audioname2 = {};\r\n\t\t\t\t\t\t\tinfo.audioname2.shuangwangmrfz = \"chenkemrfz\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t[skill]\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\tgujimrfz: {\r\n\t\t\tonremove(player) {\r\n\t\t\t\tdelete player.storage.chenkemrfz;\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tderivation: [\"bengjiemrfz\"],\r\n\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn game.roundNumber > 4;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet skills = player.getOriginalSkills();\r\n\t\t\t\tskills.push(...[\"guguomrfz\", \"xingjunmrfz\", \"datongmrfz\"]);\r\n\t\t\t\tfor (let skill of skills) {\r\n\t\t\t\t\tawait player.removeSkill(skill);\r\n\t\t\t\t}\r\n\t\t\t\tplayer.addSkill(\"bengjiemrfz\");\r\n\t\t\t\tplayer.sex = \"male\";\r\n\t\t\t\tgame.log(player, \"将性别变为了\", \"#y男性\");\r\n\t\t\t\tplayer.node.avatar.setBackgroundImage(\"extension/whitherHelm/image/orther/shuangwang2mrfz.jpg\");\r\n\t\t\t},\r\n\t\t},\r\n\t\tjiangqingmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tderivation: [\"guguomrfz\", \"xingjunmrfz\", \"datongmrfz\"],\r\n\t\t\tinit(player) {\r\n\t\t\t\tplayer.storage.jiangqingmrfz = {\r\n\t\t\t\t\t0: {\r\n\t\t\t\t\t\tintro: \"弃置两种不同颜色的牌，获得“固国”\",\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\t\treturn [\"red\", \"black\"].every(i =>\r\n\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t\t.getCards(\"hes\")\r\n\t\t\t\t\t\t\t\t\t.map(j => get.color(j))\r\n\t\t\t\t\t\t\t\t\t.includes(i)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\t\tconst bool = await player\r\n\t\t\t\t\t\t\t\t.chooseToDiscard(true, \"弃置两种不同颜色的牌，获得“固国”\", 2)\r\n\t\t\t\t\t\t\t\t.set(\"ai\", card => 8 - get.value(card))\r\n\t\t\t\t\t\t\t\t.set(\"filterCard\", (card, player) => !ui.selected.cards.some(cardx => get.color(cardx, player) == get.color(card, player)))\r\n\t\t\t\t\t\t\t\t.set(\"complexCard\", true)\r\n\t\t\t\t\t\t\t\t.forResult(\"bool\");\r\n\t\t\t\t\t\t\tif (bool === true) {\r\n\t\t\t\t\t\t\t\tplayer.addSkill(\"guguomrfz\");\r\n\t\t\t\t\t\t\t\tdelete player.storage.jiangqingmrfz[0];\r\n\t\t\t\t\t\t\t\tlet original = player.getSkills(null, false, false).filter(i => {\r\n\t\t\t\t\t\t\t\t\treturn player.getOriginalSkills().includes(i);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tplayer.removeSkill(original[0]);\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\t1: {\r\n\t\t\t\t\t\tintro: \"弃置三种不同类型的牌，获得“兴军”\",\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\t\treturn [\"trick\", \"basic\", \"equip\"].every(i =>\r\n\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t\t.getCards(\"hes\")\r\n\t\t\t\t\t\t\t\t\t.map(j => get.type2(j))\r\n\t\t\t\t\t\t\t\t\t.includes(i)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\t\tconst bool = await player\r\n\t\t\t\t\t\t\t\t.chooseToDiscard(true, \"弃置三种不同类型的牌，获得“兴军”\", 3)\r\n\t\t\t\t\t\t\t\t.set(\"ai\", card => 8 - get.value(card))\r\n\t\t\t\t\t\t\t\t.set(\"filterCard\", (card, player) => !ui.selected.cards.some(cardx => get.type2(cardx, player) == get.type2(card, player)))\r\n\t\t\t\t\t\t\t\t.set(\"complexCard\", true)\r\n\t\t\t\t\t\t\t\t.forResult(\"bool\");\r\n\t\t\t\t\t\t\tif (bool === true) {\r\n\t\t\t\t\t\t\t\tplayer.addSkill(\"xingjunmrfz\");\r\n\t\t\t\t\t\t\t\tdelete player.storage.jiangqingmrfz[1];\r\n\t\t\t\t\t\t\t\tlet original = player.getSkills(null, false, false).filter(i => {\r\n\t\t\t\t\t\t\t\t\treturn player.getOriginalSkills().includes(i);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tplayer.removeSkill(original[0]);\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\t2: {\r\n\t\t\t\t\t\tintro: \"弃置四种不同花色的牌，获得“大同”\",\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\t\treturn lib.suit.every(i =>\r\n\t\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t\t\t\t.getCards(\"hes\")\r\n\t\t\t\t\t\t\t\t\t.map(j => get.suit(j))\r\n\t\t\t\t\t\t\t\t\t.includes(i)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\t\tconst bool = await player\r\n\t\t\t\t\t\t\t\t.chooseToDiscard(true, \"弃置四种不同花色的牌，获得“大同”\", 4)\r\n\t\t\t\t\t\t\t\t.set(\"ai\", card => 8 - get.value(card))\r\n\t\t\t\t\t\t\t\t.set(\"filterCard\", (card, player) => !ui.selected.cards.some(cardx => get.suit(cardx, player) == get.suit(card, player)))\r\n\t\t\t\t\t\t\t\t.set(\"complexCard\", true)\r\n\t\t\t\t\t\t\t\t.forResult(\"bool\");\r\n\t\t\t\t\t\t\tif (bool === true) {\r\n\t\t\t\t\t\t\t\tplayer.addSkill(\"datongmrfz\");\r\n\t\t\t\t\t\t\t\tdelete player.storage.jiangqingmrfz[2];\r\n\t\t\t\t\t\t\t\tlet original = player.getSkills(null, false, false).filter(i => {\r\n\t\t\t\t\t\t\t\t\treturn player.getOriginalSkills().includes(i);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tplayer.removeSkill(original[0]);\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\t3: {\r\n\t\t\t\t\t\tintro: \"失去两点体力和体力上限、失去所有不因此技能而获得的技能。\",\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\t\tawait player.loseHp(3);\r\n\t\t\t\t\t\t\tawait player.loseMaxHp(3);\r\n\t\t\t\t\t\t\tlet gainSkills = [\"guguomrfz\", \"xingjunmrfz\", \"datongmrfz\"];\r\n\t\t\t\t\t\t\tlet skills = player.getSkills(null, false, false).filter(i => {\r\n\t\t\t\t\t\t\t\tconst info = get.info(i);\r\n\t\t\t\t\t\t\t\tif (gainSkills.includes(i)) return false;\r\n\t\t\t\t\t\t\t\treturn !info || !info.charlotte;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tfor (let skill of skills) {\r\n\t\t\t\t\t\t\t\tplayer.removeSkill(skill);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tplayer.drawTo(player.maxHp);\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tlet info = player.storage.jiangqingmrfz;\r\n\t\t\t\tlet keys = Object.keys(info);\r\n\t\t\t\treturn info[keys[0]].filter(event, player);\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet info = player.storage.jiangqingmrfz;\r\n\t\t\t\tfor (let i of [0, 1, 2, 3]) {\r\n\t\t\t\t\tif (!get.is.object(info[i])) continue;\r\n\t\t\t\t\tif (!info[i].filter(event, player)) return;\r\n\t\t\t\t\tconst bool = await info[i].content(event, trigger, player);\r\n\t\t\t\t\tif (bool !== true) break;\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tplayer.logSkill(\"jiangqingmrfz\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tbengjiemrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tintro: {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\tlet num = lib.skill.bengjiemrfz.getX(player);\r\n\t\t\t\t\treturn `当前X为:${num}`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgetX(player) {\r\n\t\t\t\treturn Math.max(\r\n\t\t\t\t\t0,\r\n\t\t\t\t\tplayer.getSkills(null, false, false).filter(i => {\r\n\t\t\t\t\t\tconst info = get.info(i);\r\n\t\t\t\t\t\tconst banSkills = player.storage.chenkemrfz || [];\r\n\t\t\t\t\t\tif (banSkills.includes(i)) return false;\r\n\t\t\t\t\t\treturn !info || !info.charlotte;\r\n\t\t\t\t\t}).length - player.countMark(\"bengjiemrfz\")\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"phaseEnd\", \"damageBegin\"],\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (trigger.name === \"damage\") {\r\n\t\t\t\t\ttrigger.num += game.roundNumber;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet num = lib.skill.bengjiemrfz.getX(player);\r\n\t\t\t\t\tawait player.draw(num);\r\n\t\t\t\t\tplayer.addMark(\"bengjiemrfz\", Math.floor(num / 2), false);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tguguomrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tglobalFrom(from, to, distance) {\r\n\t\t\t\t\treturn distance - lib.skill.bengjiemrfz.getX(from);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 1,\r\n\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn !event.numFixed;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\ttrigger.num += lib.skill.bengjiemrfz.getX(player);\r\n\t\t\t},\r\n\t\t},\r\n\t\txingjunmrfz: {\r\n\t\t\taudio: 1,\r\n\t\t\ttrigger: { source: \"damageEnd\" },\r\n\t\t\tforced: true,\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.card && event.card.name === \"sha\";\r\n\t\t\t},\r\n\t\t\tcontent() {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tplayer.draw();\r\n\t\t\t},\r\n\t\t\tmod: {\r\n\t\t\t\tcardUsable(card, player, num) {\r\n\t\t\t\t\tif (card.name == \"sha\") return num + lib.skill.bengjiemrfz.getX(player);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tdatongmrfz: {\r\n\t\t\tinit(player) {\r\n\t\t\t\tplayer.link(true);\r\n\t\t\t},\r\n\t\t\tglobal: \"datongmrfz_buff\",\r\n\t\t\taudio: 1,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"linkBefore\", \"enterGame\"],\r\n\t\t\t\tglobal: \"phaseBefore\",\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (event.name == \"link\") return player.isLinked();\r\n\t\t\t\treturn (event.name != \"phase\" || game.phaseNumber == 0) && !player.isLinked();\r\n\t\t\t},\r\n\t\t\tcontent() {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tif (trigger.name != \"link\") player.link(true);\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\telse trigger.cancel();\r\n\t\t\t},\r\n\t\t\tgroup: \"datongmrfz_revival\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\trevival: {\r\n\t\t\t\t\taudio: \"datongmrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { source: \"dieAfter\" },\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn get.mode() == \"identity\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet target = trigger.player;\r\n\t\t\t\t\t\tawait target.revive();\r\n\t\t\t\t\t\ttarget.recoverTo(2);\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\ttarget.drawTo(2);\r\n\t\t\t\t\t\tif (player.identity != \"zhu\") target.identity = player.identity;\r\n\t\t\t\t\t\telse target.identity = \"zhong\";\r\n\t\t\t\t\t\ttarget.node.identity.dataset.color = target.identity;\r\n\t\t\t\t\t\ttarget.identityShown = true;\r\n\t\t\t\t\t\ttarget.setIdentity(target.identity);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tbuff: {\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard(player, num) {\r\n\t\t\t\t\t\t\tif (game.hasPlayer(current => current.hasSkill(\"datongmrfz\")) && player.isLinked()) return num + lib.skill.bengjiemrfz.getX(player);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget(card) {\r\n\t\t\t\t\t\tif (card.name == \"tiesuo\") return \"zeroplayertarget\";\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 新ACE\r\n\t\tnewsizhanmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"loseAfter\",\r\n\t\t\t\tglobal: [\"equipAfter\", \"addJudgeAfter\", \"gainAfter\", \"loseAsyncAfter\", \"addToExpansionAfter\"],\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (player.countCards(\"h\")) return false;\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tconst evt = event.getl(player);\r\n\t\t\t\treturn evt && evt.player == player && evt.hs && evt.hs.length > 0;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst {index} = await player\r\n\t\t\t\t\t.chooseControl(\"流失体力\", \"失去体力上限\")\r\n\t\t\t\t\t.set(\"prompt\", \"【死战】:流失一点体力或失去体力上限\")\r\n\t\t\t\t\t.set(\"ai\", () => {\r\n\t\t\t\t\t\tlet player = get.player();\r\n\t\t\t\t\t\tif (player.hp >= 4) return 0;\r\n\t\t\t\t\t\tif (player.getDamagedHp() === 0) return 0;\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (typeof index !== \"number\") return;\r\n\t\t\t\tif (index === 0) player.loseHp();\r\n\t\t\t\telse player.loseMaxHp();\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tplayer.drawTo(5);\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 0.7,\r\n\t\t\t\tnoh: true,\r\n\t\t\t\tskillTagFilter(player, tag) {\r\n\t\t\t\t\tif (tag == \"noh\") {\r\n\t\t\t\t\t\tif (player.countCards(\"h\") != 1) return false;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\teffect: {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tplayer_use(card, player, target) {\r\n\t\t\t\t\t\tif (player.countCards(\"h\") === 1) return [1, 0.8];\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\ttarget(card, player, target) {\r\n\t\t\t\t\t\tif (get.tag(card, \"loseCard\") && target.countCards(\"h\") === 1) return 0.5;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tehoumrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tcardname(card, player, name) {\r\n\t\t\t\t\tif (get.position(card) === \"h\" && player.storage.ehoumrfz) return \"sha\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"damageEnd\",\r\n\t\t\t\tglobal: \"damageEnd\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (!event.source || !event.source.isIn()) return false;\r\n\t\t\t\treturn (event.player === player || get.distance(player, event.player) <= 1) && player.canUse(\"juedou\", event.source);\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tprompt(event, player) {\r\n\t\t\t\treturn `【扼后】:是否视为对${get.translation(event.source)}使用一张【决斗】？`;\r\n\t\t\t},\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\tlet target = event.source;\r\n\t\t\t\tif (get.attitude2(event.player) < 0) return false;\r\n\t\t\t\treturn get.effect(target, { name: \"juedou\" }, player, player) > 0 && player.countCards(\"h\") * 2 > target.countCards(\"h\");\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.storage.ehoumrfz = true;\r\n\t\t\t\tplayer.useCard({ name: \"juedou\", isCard: true, storage: { jumpDying: true } }, trigger.source, true);\r\n\t\t\t},\r\n\t\t\tgroup: [\"ehoumrfz_clear\", \"ehoumrfz_jumpDying\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tjumpDying: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"dying\" },\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn event.card && event.card.storage && event.card.storage.jumpDying;\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tplayer.die();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { player: \"useCardEnd\" },\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn event.card && event.card.storage && event.card.storage.jumpDying;\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tdelete player.storage.ehoumrfz;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 新普瑞赛斯\r\n\t\tqianmianmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: [\"chooseToUseBegin\", \"chooseToRespondBegin\"] },\r\n\t\t\tgetResAndUseCard(event, player) {\r\n\t\t\t\tlet result = [];\r\n\t\t\t\tfor (let name of lib.inpile) {\r\n\t\t\t\t\tif (event.filterCard && event.filterCard({ name: name, suit: \"none\", number: null }, player, event)) result.add(name);\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\thiddenCard(player, name) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\treturn ((event.respondTo && event.respondTo[0] !== player) || event.type === \"wuxie\") && player.countCards(\"h\") > 0 && lib.skill.qianmianmrfz.getResAndUseCard(event, player).length > 0;\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet names = lib.skill.qianmianmrfz.getResAndUseCard(trigger, player);\r\n\t\t\t\tlet cardx = trigger.card;\r\n\t\t\t\tif (names.length === 1) {\r\n\t\t\t\t\tplayer\r\n\t\t\t\t\t\t.when({ player: [\"chooseToUseAfter\", \"chooseToRespondAfter\"] })\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t.step(() => {})\r\n\t\t\t\t\t\t.assign({\r\n\t\t\t\t\t\t\tmod: {\r\n\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\tcardname(card, player, name) {\r\n\t\t\t\t\t\t\t\t\tif (card !== cardx) return names[0];\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tneihuamrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: { player: [\"useCardAfter\", \"respondAfter\"] },\r\n\t\t\t// @ts-ignore\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage.neihuamrfz = [];\r\n\t\t\t\tlib.translate[\"neihuamrfzx\"] = \"信息流\";\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tlet nameList = player.getExpansions(\"neihuamrfz\").map(card => card.name);\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\treturn !nameList.includes(event.card.name) && !event.cards.some(card => card.neihuamrfz);\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tmark: true,\r\n\t\t\tmarktext: \"信息流\",\r\n\t\t\tintro: {\r\n\t\t\t\tname: \"信息流\",\r\n\t\t\t\tcontent: \"expansion\",\r\n\t\t\t\tmarkcount: \"expansion\",\r\n\t\t\t},\r\n\t\t\tonremove(player, skill) {\r\n\t\t\t\tconst cards = player.getExpansions(skill);\r\n\t\t\t\tif (cards.length) player.loseToDiscardpile(cards);\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet card = trigger.card;\r\n\t\t\t\tlet cardcopy = ui.create.card();\r\n\t\t\t\tlet info = [\"none\", null, get.name(card), get.nature(card), undefined];\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tcardcopy.init(info);\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tcardcopy.neihuamrfz = true;\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tplayer.addToExpansion(cardcopy, player, \"give\").gaintag.add(\"neihuamrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: [\"neihuamrfz_snyc\", \"neihuamrfz_destroy\", \"neihuamrfz_snyc_lose\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdestroy: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: [\"loseEnd\", \"cardsDiscardEnd\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\tif (event.name == \"lose\" && event.position != ui.discardPile) return false;\r\n\t\t\t\t\t\tfor (let card of event.cards) {\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tif (card.neihuamrfz) return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet cards = [];\r\n\t\t\t\t\t\tfor (let card of trigger.cards) {\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tif (card.neihuamrfz) cards.push(card);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgame.cardsGotoSpecial(cards);\r\n\t\t\t\t\t\tgame.log(cards, \"被移出了游戏\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tsnyc: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"addToExpansionAfter\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\treturn event.cards.some(card => card.neihuamrfz);\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tlet cards = trigger.cards.filter(card => card.neihuamrfz);\r\n\t\t\t\t\t\tlet cardsx = cards.map(card => {\r\n\t\t\t\t\t\t\tlet cardx = ui.create.card();\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tcardx.init(get.cardInfo(card));\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tcardx._cardid = card.cardid;\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tcardx.neihuamrfz = true;\r\n\t\t\t\t\t\t\treturn cardx;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tplayer.directgains(cardsx, null, \"neihuamrfzx\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tsnyc_lose: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: [\"loseBegin\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\treturn event.cards.filter(card => card.neihuamrfz);\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet cards = trigger.cards;\r\n\t\t\t\t\t\tlet loseCards = player.getExpansions(\"neihuamrfz\").filter(card => {\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\treturn cards.some(cardt => cardt._cardid === card.cardid);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tgame.cardsGotoSpecial(loseCards, false);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n};\r\n"],"names":["event","player","trigger","cards","name","result","card","skill","info","target","list","skills","i","current","targets","cards2","cardx","chooseList","num","key","findWord","pos"],"mappings":"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"}