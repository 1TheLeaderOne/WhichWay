{"version":3,"file":"rare1SJZX.js","sources":["../../../../../../../../packages/extension/WhichWay/src/character/packs/rare/rare1SJZX.js"],"sourcesContent":["import { lib, game, ui, get, ai, _status } from \"noname\";\r\nimport { whichWayMath } from \"./../../../math/index.ts\";\r\n\r\nconst tmpSave = window.whichWaySave.tmpSave;\r\n\r\n/** @type {WhichWayCharacterPack} */\r\nexport default {\r\n\tcharacter: {\r\n\t\tshuangyemrfz: [\"female\", \"luomrfz\", 4, [\"canyinmrfz\", \"bingrenmrfz\"], []],\r\n\t\tyueyuemrfz: [\"female\", \"bomrfz\", 4, [\"xiyumrfz\"], []],\r\n\t\tlutuomrfz: [\"female\", \"bomrfz\", 4, [\"zhengyimrfz\", \"daosimrfz\"], []],\r\n\t\tshendianmrfz: [\"female\", \"yimrfz\", 3, [\"fumumrfz\", \"rouguangmrfz\", \"mizongmrfz\"], []],\r\n\t\tyunjimrfz: [\"female\", \"gemrfz\", 3, [\"lingkongmrfz\", \"mijianmrfz\"], []],\r\n\t\tchengfengmrfz: [\"male\", \"yanmrfz\", 3, [\"xiadaomrfz\", \"qunxiamrfz\"], []],\r\n\t\tdongshimrfz: {\r\n\t\t\tsex: \"female\",\r\n\t\t\tgroup: \"wumrfz\",\r\n\t\t\thp: 3,\r\n\t\t\tskills: [\"gelimrfz\"],\r\n\t\t},\r\n\t\txielvmrfz: {\r\n\t\t\tsex: \"female\",\r\n\t\t\tgroup: \"laimrfz\",\r\n\t\t\thp: 3,\r\n\t\t\tskills: [\"lvmaimrfz\", \"tiaoxiemrfz\"],\r\n\t\t},\r\n\t},\r\n\tskill: {\r\n\t\t//协律\r\n\t\tlvmaimrfz: {\r\n\t\t\taudio: [\"作战中1\", \"作战中2\"],\r\n\t\t\tzhuanhuanji(player, skill) {\r\n\t\t\t\tif (player.storage[skill] < 3) player.storage[skill]++;\r\n\t\t\t\telse player.storage[skill] = 0;\r\n\t\t\t},\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage.lvmaimrfz = 0;\r\n\t\t\t\tplayer.addTip(\"lvmaimrfz_tip\", `律脉 ${get.translation(lib.skill.lvmaimrfz.transfer(player))}`);\r\n\t\t\t},\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"useCardAfter\", \"respondAfter\"],\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent(storage, player) {\r\n\t\t\t\t\treturn `当你使用或打出一张牌后，你可以重铸至多一张牌，然后若你的手牌中最多的花色为${get.translation(lib.skill.lvmaimrfz.transfer(player))}，你摸一张牌。`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tevent.result = await player\r\n\t\t\t\t\t.chooseCard()\r\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"lvmaimrfz\"))\r\n\t\t\t\t\t.set(\"prompt2\", `你可以重铸一张牌,然后若你手牌中最多的花色为${get.translation(lib.skill.lvmaimrfz.transfer(player))},你摸一张牌`)\r\n\t\t\t\t\t.set(\"filterCard\", card => {\r\n\t\t\t\t\t\treturn get.player().canRecast(card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"ai\", function (card) {\r\n\t\t\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"position\", \"he\")\r\n\t\t\t\t\t.forResult();\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tawait player.recast(event.cards);\r\n\t\t\t\tlet suit = lib.skill.lvmaimrfz.transfer(player);\r\n\t\t\t\tlet suitcount = lib.suit.map(s => player.countCards(\"h\", { suit: s }));\r\n\t\t\t\tlet max = Math.max(...suitcount);\r\n\t\t\t\tif (player.countCards(\"h\", { suit: suit }) === max) {\r\n\t\t\t\t\tawait player.draw();\r\n\t\t\t\t\tplayer.changeZhuanhuanji(\"lvmaimrfz\");\r\n\t\t\t\t\tplayer.addTip(\"lvmaimrfz_tip\", `律脉 ${get.translation(lib.skill.lvmaimrfz.transfer(player))}`);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttransfer(player) {\r\n\t\t\t\tswitch (player.storage.lvmaimrfz) {\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\treturn \"spade\";\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\treturn \"club\";\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\treturn \"heart\";\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\treturn \"diamond\";\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn \"\";\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\ttiaoxiemrfz: {\r\n\t\t\taudio: [\"作战中3\", \"作战中4\"],\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = [];\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent(storage, player) {\r\n\t\t\t\t\treturn `已使用的花色：${get.translation(storage)}`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tenable: \"chooseToUse\",\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplayer.getCards(\"h\", card => {\r\n\t\t\t\t\t\tif (![\"basic\", \"trick\"].includes(get.type(card))) return false;\r\n\t\t\t\t\t\tlet suit = get.suit(card);\r\n\t\t\t\t\t\treturn player.countCards(\"h\", card => get.suit(card) !== suit) > 0 && event.filterCard(card, player, event);\r\n\t\t\t\t\t}).length > 0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tfilterCard(card) {\r\n\t\t\t\tlet player = get.player(),\r\n\t\t\t\t\tevent = get.event();\r\n\t\t\t\tlet suit = get.suit(card);\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (event.skillDialog instanceof HTMLElement) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tevent.skillDialog.remove();\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tevent.skillDialog = ui.create.dialog(`###【调协】###${lib.skill.tiaoxiemrfz.prompt()}`);\r\n\t\t\t\t}\r\n\t\t\t\tif (ui.selected.cards.length < 1) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (Object.keys(event.getParent(\"phaseUse\")).length > 0 && event.getParent(\"phaseUse\").player === player && !player.hasUseTarget(card)) return false;\r\n\t\t\t\t\telse if (!event._backup.filterCard(card, player)) return false;\r\n\t\t\t\t\treturn player.countCards(\"h\", card => get.suit(card) !== suit) > 0 && [\"basic\", \"trick\"].includes(get.type(card)) && !player.getStorage(\"tiaoxiemrfz\").includes(suit);\r\n\t\t\t\t}\r\n\t\t\t\treturn suit !== get.suit(ui.selected.cards[0]);\r\n\t\t\t},\r\n\t\t\tselectCard: 2,\r\n\t\t\tcheck(card) {\r\n\t\t\t\tlet player = get.player();\r\n\t\t\t\tif (ui.selected.cards.length < 1) return player.getUseValue(card);\r\n\t\t\t\treturn player.getUseValue(card) - player.getUseValue(ui.selected.cards[0]);\r\n\t\t\t},\r\n\t\t\tprompt() {\r\n\t\t\t\tlet player = get.player();\r\n\t\t\t\treturn ui.selected.cards.length < 1 ? `【调协】:请选择你要被当作使用的牌<br>(当前已使用的花色：${get.translation(player.getStorage(\"tiaoxiemrfz\"))})` : `你可以将一张手牌当【${get.translation(ui.selected.cards[0].name)}】使用`;\r\n\t\t\t},\r\n\t\t\tcomplexCard: true,\r\n\t\t\tdiscard: false,\r\n\t\t\tlose: false,\r\n\t\t\tdelay: 0,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tplayer.storage.tiaoxiemrfz.push(get.suit(event.cards[0]));\r\n\t\t\t\tlet name = get.name(event.cards[0]);\r\n\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tif (Object.keys(event.getParent(\"phaseUse\")).length>0 && event.getParent(\"phaseUse\").player === player) await player.chooseUseTarget({ name: name }, [event.cards[1]]).set(\"forced\", true);\r\n\t\t\t\telse {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (name === \"wuxie\") event._trigger = event.getParent(2)._trigger;\r\n\t\t\t\t\tconst result = await player.useCard({ name: name }, [event.cards[1]]).set(\"forced\", true).forResult();\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tevent.getParent(2)._result = result;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: [\"tiaoxiemrfz_clear\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.tiaoxiemrfz = [];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 10,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//冬时\r\n\t\tgelimrfz: {\r\n\t\t\taudio: [\"作战中1\", \"作战中2\", \"作战中3\", \"作战中4\"],\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardAfter\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tlet discarded = Array.from(ui.discardPile.childNodes)\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t.map(i => get.number(i))\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t.filter(i => ![null, \"unsure\", undefined].includes(i));\r\n\t\t\t\tif (discarded.length < 1) return false;\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tlet mean = whichWayMath.mean(discarded);\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tlet sd = whichWayMath.std(discarded);\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\treturn get.number(event.card) > mean + sd || get.number(event.card) < mean - sd;\r\n\t\t\t},\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\tcontent() {\r\n\t\t\t\t\tlet discarded = Array.from(ui.discardPile.childNodes)\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t.map(i => get.number(i))\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t.filter(i => ![null, \"unsure\", undefined].includes(i));\r\n\t\t\t\t\tif (discarded.length < 1) return `弃牌堆中没有牌!`;\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tlet mean = whichWayMath.mean(discarded);\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tlet sd = whichWayMath.std(discarded);\r\n\t\t\t\t\tlet str = [];\r\n\t\t\t\t\tfor (let i = 1; i < 4; i++) {\r\n\t\t\t\t\t\tstr.push(`正负${i}个标准差:(${mean - i * sd} , ${mean + i * sd})`);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn str.join(\"<br>\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tlet discarded = Array.from(ui.discardPile.childNodes)\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t.map(i => get.number(i))\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t.filter(i => ![null, \"unsure\", undefined].includes(i));\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tlet mean = whichWayMath.mean(discarded);\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tlet sd = whichWayMath.std(discarded);\r\n\t\t\t\tlet num = get.number(trigger.card);\r\n\t\t\t\tlet draw = 0;\r\n\r\n\t\t\t\tfor (let i = 1; i < 4; i++) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tif (num > mean + i * sd || num < mean - i * sd) {\r\n\t\t\t\t\t\tdraw = i;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (draw > 0) player.draw(draw);\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t//霜叶\r\n\t\tcanyinmrfz: {\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tcontent: function (event, player) {\r\n\t\t\t\t\tvar storage = player.storage.canyinmrfz;\r\n\t\t\t\t\tif (!storage || !player.isPhaseUsing()) return \"无\";\r\n\t\t\t\t\treturn \"本阶段不能使用或打出\" + get.translation(storage) + \"牌\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\tforced: true,\r\n\t\t\ttrigger: { player: \"phaseUseBegin\" },\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tvar cs = 1;\r\n\t\t\t\tif (player.hp < 2 && player.countCards(\"h\", \"tao\") > 0) cs = 2;\r\n\t\t\t\telse if (\r\n\t\t\t\t\tplayer.hasSha() &&\r\n\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\treturn get.type(card) == \"equip\";\r\n\t\t\t\t\t}) < 3 &&\r\n\t\t\t\t\tplayer.canUseCardAtt(\"sha\", false, true)\r\n\t\t\t\t)\r\n\t\t\t\t\tcs = 2;\r\n\t\t\t\telse if (\r\n\t\t\t\t\tplayer.countCards(\"h\", function (card) {\r\n\t\t\t\t\t\treturn get.type2(card) == \"trick\" && card.name != \"wuxie\";\r\n\t\t\t\t\t}) > 2\r\n\t\t\t\t)\r\n\t\t\t\t\tcs = 0;\r\n\t\t\t\tconst result = await player\r\n\t\t\t\t\t.chooseControl()\r\n\t\t\t\t\t.set(\"choiceList\", [\"基本：使用牌无距离限制且不可响应\", \"锦囊：摸两张牌\", \"装备：本阶段使用的第一张带有伤害类标签的牌伤害值或回复值+1\"])\r\n\t\t\t\t\t.set(\"prompt\", \"【蚕吟】:请选择你不能使用的类型\")\r\n\t\t\t\t\t.set(\"ai\", function () {\r\n\t\t\t\t\t\treturn _status.event.cs;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"cs\", cs).forResult();\r\n\r\n\t\t\t\tif (result.control) {\r\n\t\t\t\t\tvar list = [\"basic\", \"trick\", \"equip\"];\r\n\t\t\t\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\t\t\t\tif (result.index == i) {\r\n\t\t\t\t\t\t\tif (result.index != 1) player.addTempSkill(\"canyinmrfz_\" + list[i], \"phaseUseEnd\");\r\n\t\t\t\t\t\t\telse player.draw(2);\r\n\t\t\t\t\t\t\tplayer.addTempSkill(\"canyinmrfz_ban\", \"phaseUseEnd\");\r\n\t\t\t\t\t\t\tplayer.storage.canyinmrfz = list[i];\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"canyinmrfz_rec\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\trec: {\r\n\t\t\t\t\taudio: \"canyinmrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { source: \"dieAfter\" },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.player != player;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tplayer.recoverTo(player.maxHp);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tused: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t},\r\n\t\t\t\tban: {\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tcardEnabled: function (card, player) {\r\n\t\t\t\t\t\t\tif (get.type2(card) == player.storage.canyinmrfz) return false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tbasic: {\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\ttargetInRange(card, player, target, now) {\r\n\t\t\t\t\t\t\tif ([\"trick\", \"delay\", \"basic\"].includes(get.type(card))) return true;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\taudio: \"canyinmrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCard\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tevent.card &&\r\n\t\t\t\t\t\t\t(get.type(event.card) == \"trick\" || (get.type(event.card) == \"basic\" && ![\"shan\", \"tao\", \"jiu\", \"du\"].includes(event.card.name))) &&\r\n\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\r\n\t\t\t\t\t\t\t\treturn current != player;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\treturn current != player;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tai: {\r\n\t\t\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tequip: {\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tplayer: \"useCard\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tusable: 1,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn get.tag(event.card, \"damage\") > 0 || get.tag(event.card, \"recover\") > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tif (!trigger.baseDamage) trigger.baseDamage = 1;\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\ttrigger.baseDamage += 1;\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tgame.log(trigger.card, \"的伤害值/回复值\", \"#y+1\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tbingrenmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCardToTargeted\",\r\n\t\t\t\ttarget: \"useCardToTargeted\",\r\n\t\t\t},\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tif (event.card.name != \"sha\" || event.getParent(2).name == \"bingrenmrfz\") return false;\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\treturn player == event.target || event.getParent().triggeredTargets3.length == 1;\r\n\t\t\t},\r\n\t\t\tcheck: function (event, player) {\r\n\t\t\t\tvar target = player == event.player ? event.target : event.player;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tget.attitude(target, player) < 0 &&\r\n\t\t\t\t\t(player.countCards(\"h\", card => {\r\n\t\t\t\t\t\treturn card.name == \"tao\" || card.name == \"jiu\";\r\n\t\t\t\t\t}) > 0 ||\r\n\t\t\t\t\t\tplayer.hp > 1)\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tprompt2: function (event, player) {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tvar target = player == event.player ? event.target : event.player;\r\n\t\t\t\treturn \"【冰刃】:你可以<span class=firetext>流失一点体力</span>并视为对\" + get.translation(target) + \"使用一张冰【杀】\";\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t//成为目标 player==trigger.target\r\n\t\t\t\t//指定目标 player==trigger.player\r\n\t\t\t\tawait player.loseHp();\r\n\r\n\t\t\t\tif (player.isAlive()) {\r\n\t\t\t\t\tvar target = player == trigger.player ? trigger.target : trigger.player;\r\n\t\t\t\t\tplayer.addTempSkill(\"bingrenmrfz_dam\", \"bingrenmrfzAfter\");\r\n\t\t\t\t\tplayer.useCard({ name: \"sha\", nature: \"ice\", isCard: true, bingrenmrfz: true }, target).set(\"addCount\", false);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdam: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tsource: \"damageEnd\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (!event.card) return false;\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\treturn event.card.bingrenmrfz == true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet result;\r\n\t\t\t\t\t\tif (trigger.player.countCards(\"he\") < 2) {\r\n\t\t\t\t\t\t\tplayer.removeSkill(\"bingrenmrfz_dam\");\r\n\t\t\t\t\t\t\ttrigger.player.turnOver();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tresult = await trigger.player.chooseToDiscard(\"【冰刃】:请弃置两张牌，或选择取消翻面\", 2, \"he\").set(\"ai\", function (card) {\r\n\t\t\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\t\t\tif (player.isTurnedOver()) return -1;\r\n\t\t\t\t\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t\t\t\t\t}).forResult();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (result.bool == false) {\r\n\t\t\t\t\t\t\ttrigger.player.turnOver();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tplayer.removeSkill(\"bingrenmrfz_dam\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t//跃跃\r\n\t\txiyumrfz: {\r\n\t\t\tonremove: true,\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\t// @ts-ignore\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter: function (event, player) {\r\n\t\t\t\treturn player.countCards(\"h\") > 0;\r\n\t\t\t},\r\n\t\t\tfilterCard: true,\r\n\t\t\t// @ts-ignore\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilterTarget: function (card, player, target) {\r\n\t\t\t\treturn target != player;\r\n\t\t\t},\r\n\t\t\tcheck: card => {\r\n\t\t\t\tvar ban = [\"shan\", \"tao\", \"jiu\"];\r\n\t\t\t\tfor (var i of ban) {\r\n\t\t\t\t\tif (card.name == i) return false;\r\n\t\t\t\t}\r\n\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t},\r\n\t\t\tdiscard: false,\r\n\t\t\tlose: false,\r\n\t\t\tdelay: false,\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tconst { cards, target } = event;\r\n\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\ti.storage.xiyumrfz_give = true;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tawait player.give(cards, target);\r\n\r\n\t\t\t\tif (player.canUse(\"sha\", target, false)) {\r\n\t\t\t\t\tplayer.storage.xiyumrfz = target;\r\n\t\t\t\t\ttarget.addTempSkill(\"xiyumrfz_suit\", { global: \"phaseUseEnd\" });\r\n\t\t\t\t\tplayer.addTempSkill(\"xiyumrfz_gain\", \"phaseUseEnd\");\r\n\t\t\t\t\tplayer.useCard({ name: \"sha\", storage: { xiyumrfz: true } }, target).set(\"addCount\", false);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tgain: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\treturn event.card && event.card.storage.xiyumrfz == true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tvar target = player.storage.xiyumrfz,\r\n\t\t\t\t\t\t\tcards = target.getCards(\"he\"),\r\n\t\t\t\t\t\t\tsuit = target.getCards(\"he\", card => {\r\n\t\t\t\t\t\t\t\treturn card.storage.xiyumrfz_give;\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tevent.cards = [];\r\n\t\t\t\t\t\tvar storage = target.storage.xiyumrfz_suit;\r\n\t\t\t\t\t\tfor (var i of suit) {\r\n\t\t\t\t\t\t\tif (!storage.includes(i.suit)) storage.add(i.suit);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var i of cards) {\r\n\t\t\t\t\t\t\tif (storage.includes(i.suit)) event.cards.push(i);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (event.cards.length) player.gain(event.cards, \"gain2\");\r\n\r\n\t\t\t\t\t\tplayer.removeSkill(\"xiyumrfz_gain\");\r\n\r\n\t\t\t\t\t\tplayer.removeSkill(\"xiyumrfz_suit\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tsuit: {\r\n\t\t\t\t\taudio: false,\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tlastDo: true,\r\n\t\t\t\t\tonremove: player => {\r\n\t\t\t\t\t\tdelete player.storage.xiyumrfz_suit;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tinit: player => {\r\n\t\t\t\t\t\tplayer.storage.xiyumrfz_suit = [];\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttrigger: { player: [\"useCard\", \"respond\"] },\r\n\t\t\t\t\tfilter: function (event, player) {\r\n\t\t\t\t\t\tif (event.card.suit == undefined) return false;\r\n\t\t\t\t\t\treturn lib.suit.includes(event.card.suit) && (!player.storage.xiyumrfz_suit || !player.storage.xiyumrfz_suit.includes(event.card.suit));\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: function () {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tif (!player.storage.xiyumrfz_suit) player.storage.xiyumrfz_suit = [];\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tplayer.storage.xiyumrfz_suit.add(trigger.card.suit);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 10,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t// 露托\r\n\t\tzhengyimrfz: {\r\n\t\t\tmod: {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tignoredHandcard: function (card, player) {\r\n\t\t\t\t\tif (card.hasGaintag(\"zhengyimrfz\")) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tcardDiscardable: function (card, player, name) {\r\n\t\t\t\t\tif (name == \"phaseDiscard\" && card.hasGaintag(\"zhengyimrfz\")) return false;\r\n\t\t\t\t},\r\n\t\t\t\ttargetInRange: function (card) {\r\n\t\t\t\t\tif (card.hasGaintag && card.hasGaintag(\"zhengyimrfz\")) return true;\r\n\t\t\t\t}, //QQQ\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"die\",\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.player.countCards(\"hej\") > 0;\r\n\t\t\t},\r\n\t\t\tfrequent: true,\r\n\t\t\t// @ts-ignore\r\n\t\t\t// @ts-ignore\r\n\t\t\tprompt2(event, player) {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\treturn `是否获得${get.translation(event.player)}区域内的${event.player.countCards(\"hej\")}张牌？`;\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tevent.togain = trigger.player.getCards(\"hej\");\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tplayer.gain(event.togain, trigger.player, \"giveAuto\", \"bySelf\").gaintag.add(\"zhengyimrfz\");\r\n\t\t\t},\r\n\t\t\tgroup: \"zhengyimrfz_draw\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdraw: {\r\n\t\t\t\t\taudio: \"zhengyimrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"useCardAfter\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn player.hasHistory(\"lose\", function (evt) {\r\n\t\t\t\t\t\t\tif (event != evt.getParent()) return false;\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tfor (var i in evt.gaintag_map) {\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t\tevt.gaintag_map[i].includes(\"zhengyimrfz\")\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tlet tagCards = player.getCards(\"h\").filter(i => i.hasGaintag(\"zhengyimrfz\"));\r\n\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\tplayer.drawTo(player.maxHp + tagCards.length);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tdaosimrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: [\"chooseToUse\", \"chooseToRespond\"],\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\treturn (\r\n\t\t\t\t\tui.discardPile.lastChild &&\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tget.type(ui.discardPile.lastChild) != \"equip\" &&\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tevent.filterCard({ name: ui.discardPile.lastChild.name }, player, event)\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tfilterCard: true,\r\n\t\t\tcheck(card) {\r\n\t\t\t\treturn get.value(ui.discardPile.lastChild) - get.value(card);\r\n\t\t\t},\r\n\t\t\tviewAs() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tname: ui.discardPile.lastChild.name,\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tnature: ui.discardPile.lastChild.nature,\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tprompt() {\r\n\t\t\t\treturn `你可以将一张手牌当做${get.translation(ui.discardPile.lastChild)}使用或打出`;\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 8,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 深靛\r\n\t\tfumumrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCard\",\r\n\t\t\t\ttarget: \"useCardToTargeted\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (event.name !== \"useCard\" && event.player == player) return false;\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\treturn get.isView(event.card);\r\n\t\t\t},\r\n\t\t\tforced: true,\r\n\t\t\tcontent() {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tif (trigger.name == \"useCard\") {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\treturn current != player;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\ttrigger.getParent().excluded.add(player);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\tskillTagFilter: function (player, tag, arg) {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\treturn get.isView(arg.card);\r\n\t\t\t\t},\r\n\t\t\t\teffect: {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\ttarget: function (card, player, target, current) {\r\n\t\t\t\t\t\tif (!card.isCard) return \"zeroplayertarget\";\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\trouguangmrfz: {\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage[skill] = {\r\n\t\t\t\t\tx: 0,\r\n\t\t\t\t\ttype: [],\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tonremove: true,\r\n\t\t\tmark: true,\r\n\t\t\tintro: {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tcontent(event, player) {\r\n\t\t\t\t\tlet storage = player.storage.rouguangmrfz;\r\n\t\t\t\t\treturn `·额定摸牌数和手牌上限+${storage[\"x\"]}<br>·本轮已使用的类型:${get.translation(storage[\"type\"])}`;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: \"roundStart\",\r\n\t\t\t\tplayer: \"useCardAfter\",\r\n\t\t\t},\r\n\t\t\tsilent: true,\r\n\t\t\tforced: true,\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tlet storage = player.storage.rouguangmrfz;\r\n\t\t\t\tif (event.name === \"useCard\") return !storage[\"type\"].includes(get.type2(event.card));\r\n\t\t\t\telse return true;\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (trigger.name === \"useCard\") {\r\n\t\t\t\t\tplayer.storage.rouguangmrfz[\"type\"].push(get.type2(trigger.card));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet storage = player.storage.rouguangmrfz;\r\n\t\t\t\t\tif (game.roundNumber > 1 && storage[\"x\"] < 3 && storage[\"type\"].length === 3) {\r\n\t\t\t\t\t\tplayer.storage.rouguangmrfz[\"x\"]++;\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tplayer.logSkill(\"rouguangmrfz\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplayer.storage.rouguangmrfz[\"type\"] = [];\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgroup: \"rouguangmrfz_eff\",\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\r\n\t\t\t\t\t\t\treturn (num += player.storage.rouguangmrfz[\"x\"]);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\taudio: \"rouguangmrfz\",\r\n\t\t\t\t\tforced: true,\r\n\t\t\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\treturn !event.numFixed && player.storage.rouguangmrfz[\"x\"] > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.num += player.storage.rouguangmrfz[\"x\"];\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tmizongmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tenable: \"phaseUse\",\r\n\t\t\tusable: 1,\r\n\t\t\t// @ts-ignore\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tlet targets = game.players.slice().filter(i => player.inRange(i) || player == i);\r\n\t\t\t\tlet names = targets.map(i => i.name);\r\n\t\t\t\tlet {moved} = await player\r\n\t\t\t\t\t.chooseToMove(`【迷踪】:请为${get.cnNumber(targets.length, true)}名角色分配效果`)\r\n\t\t\t\t\t.set(\"list\", [[`你攻击范围内的角色`, [names, \"character\"]], [`直到该角色的出牌阶段<font color = red>开始时</font>，所有当前时机<font color = red>可以使用</font>的牌随机视为当前时机<font color = red>不可使用</font>的牌`], [`直到该角色的出牌阶段<font color = red>结束时</font>，所有当前时机<font color = red>不可以使用</font>的牌随机视为当前时机<font color = red>可使用</font>的牌`]])\r\n\t\t\t\t\t.set(\"processAI\", list => {\r\n\t\t\t\t\t\tlet moved = [[], [], []],\r\n\t\t\t\t\t\t\tplayer = get.player(),\r\n\t\t\t\t\t\t\ttargets = list[0][1][0].map(i =>\r\n\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t_status.event.chars.find(t => t.name === i)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\tlet func = function (to) {\r\n\t\t\t\t\t\t\tlet previous;\r\n\t\t\t\t\t\t\twhile (true) {\r\n\t\t\t\t\t\t\t\tprevious = previous || to.getPrevious();\r\n\t\t\t\t\t\t\t\tif (previous === player && get.attitude(player, previous) > 2) return true;\r\n\t\t\t\t\t\t\t\telse if (previous !== player && get.attitude(player, previous) > 2) {\r\n\t\t\t\t\t\t\t\t\tprevious.getPrevious();\r\n\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tfor (var target of targets) {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tif (target === player) moved[2].push(target);\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\telse if (get.attitude(target, player) < 2) moved[1].push(target);\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\telse if (func(target)) moved[2].push(target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn moved;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"chars\", targets)\r\n\t\t\t\t\t.forResult();\r\n\t\t\t\tif (!moved) return;\r\n\r\n\t\t\t\tlet findPlayer = function (name, targets) {\r\n\t\t\t\t\tif (typeof name === \"string\") return targets.find(t => t.name === name);\r\n\t\t\t\t\treturn name;\r\n\t\t\t\t};\r\n\t\t\t\tmoved = [moved[0], moved[1].map(i => findPlayer(i, targets)), moved[2].map(i => findPlayer(i, targets))];\r\n\r\n\t\t\t\tfor (var i of moved[1]) {\r\n\t\t\t\t\ti.addTempSkill(\"mizongmrfz_eff\", { player: \"phaseUseBegin\" });\r\n\t\t\t\t\ti.storage.mizongmrfz_eff = true;\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i of moved[2]) {\r\n\t\t\t\t\ti.addTempSkill(\"mizongmrfz_eff\", { player: \"phaseUseEnd\" });\r\n\t\t\t\t\ti.storage.mizongmrfz_eff = false;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\teff: {\r\n\t\t\t\t\tinit(player) {\r\n\t\t\t\t\t\tif (!player.storage.mizongmrfz_cardData) {\r\n\t\t\t\t\t\t\tplayer.storage.mizongmrfz_cardData = {};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlib.skill.mizongmrfz_eff.inpile = lib.inpile.filter(i => get.type(i) != \"equip\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgroup: \"mizongmrfz_cardData\",\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\tonremove(player) {\r\n\t\t\t\t\t\tdelete player.storage.mizongmrfz_cardData;\r\n\t\t\t\t\t\tdelete player.storage.mizongmrfz_eff;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tinpile: [],\r\n\t\t\t\t\tmod: {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tcardname(card, player, name) {\r\n\t\t\t\t\t\t\tconst storage = player.storage.mizongmrfz_eff;\r\n\t\t\t\t\t\t\tconst event = get.event();\r\n\r\n\t\t\t\t\t\t\tif (event.name === \"_wuxie\") {\r\n\t\t\t\t\t\t\t\tif (card.name !== \"wuxie\" && storage === false) return \"wuxie\";\r\n\t\t\t\t\t\t\t\tif (card.name === \"wuxie\" && storage === true) {\r\n\t\t\t\t\t\t\t\t\treturn lib.skill.mizongmrfz_eff.inpile.filter(i => i.name !== \"wuxie\").randomGet();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (![\"chooseToUse\", \"chooseToRespond\"].includes(event.name)) return;\r\n\r\n\t\t\t\t\t\t\tconst canUse = [];\r\n\t\t\t\t\t\t\tconst notUse = [];\r\n\t\t\t\t\t\t\tlib.skill.mizongmrfz_eff.inpile.forEach(i => {\r\n\t\t\t\t\t\t\t\tconst autoViewCard = get.autoViewAs({ name: i }, \"unsure\");\r\n\t\t\t\t\t\t\t\tif (event.filterCard(autoViewCard, player, event)) {\r\n\t\t\t\t\t\t\t\t\tcanUse.push(i);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tnotUse.push(i);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tconst cardClone = game.createCard(card.name, card.suit, card.number, card.natrue);\r\n\t\t\t\t\t\t\tObject.assign(cardClone, {\r\n\t\t\t\t\t\t\t\t_cardid: card.cardid,\r\n\t\t\t\t\t\t\t\tstorage: card.storage,\r\n\t\t\t\t\t\t\t\tgaintag: card.gaintag,\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tconst cardData = player.storage.mizongmrfz_cardData[card.cardid];\r\n\r\n\t\t\t\t\t\t\tif ((!cardData || event.filterCard({ name: cardData }, player, event)) && storage === true && event.filterCard(cardClone, player, event)) {\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tplayer.storage.mizongmrfz_cardData[card.cardid] = notUse.randomGet();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ((!cardData || !event.filterCard({ name: cardData }, player, event)) && storage === false && !event.filterCard(cardClone, player, event)) {\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tplayer.storage.mizongmrfz_cardData[card.cardid] = canUse.randomGet();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\treturn player.storage.mizongmrfz_cardData[card.cardid];\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tcardData: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: {\r\n\t\t\t\t\t\tglobal: [\"loseAfter\", \"gainAfter\", \"loseAsyncAfter\", \"_wuxieAfter\"],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent() {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tplayer.storage.mizongmrfz_cardData = {};\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\torder: 13,\r\n\t\t\t\tresult: {\r\n\t\t\t\t\tplayer: 1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 云迹\r\n\t\tlingkongmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"phaseChange\",\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\t// @ts-ignore\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tconst count = player.getHistory(\"useSkill\", evt => evt.skill === \"lingkongmrfz\").length;\r\n\t\t\t\treturn player.countCards(\"hs\", card => player.hasUseTarget(card)) >= count + 1;\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\t// @ts-ignore\r\n\t\t\tcheck(event, player) {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\treturn event.phaseList[event.num] !== \"phaseDraw\";\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tlet count = player.getHistory(\"useSkill\", evt => evt.skill === \"lingkongmrfz\").length;\r\n\t\t\t\twhile (count + 1 > 0) {\r\n\t\t\t\t\tconst  result  = await player\r\n\t\t\t\t\t\t.chooseToUse()\r\n\t\t\t\t\t\t.set(\"prompt\", `【翎空】:请选择的你要使用的牌`)\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t.set(\"prompt2\", `还需使用${count + 1}张牌即可将本阶段(${get.translation(trigger.phaseList[trigger.num])})改为出牌阶段`).forResult();\r\n\t\t\t\t\tif (result.card) count--;\r\n\t\t\t\t\telse break;\r\n\t\t\t\t}\r\n\t\t\t\tevent.result = {};\r\n\t\t\t\tif (count + 1 > 0) event.result.bool = false;\r\n\t\t\t\telse event.result.bool = true;\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tgame.log(player, `的`, trigger.phaseList[trigger.num], `被改为了`, \"#y出牌阶段\");\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\ttrigger.phaseList[trigger.num] = \"phaseUse|lingkongmrfz\";\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tthreaten: 1.5,\r\n\t\t\t},\r\n\t\t},\r\n\t\tmijianmrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: [\"phaseUseBegin\", \"damageEnd\"],\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\tif (event.name === \"damage\") return player.getDamagedHp() > 0;\r\n\t\t\t\treturn player.countCards(\"he\") > 0;\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\tlet count = player.getHistory(\"useSkill\", evt => evt.skill === \"mijianmrfz\").length;\r\n\t\t\t\tif (trigger.name === \"damage\") {\r\n\t\t\t\t\tevent.result = await player\r\n\t\t\t\t\t\t.chooseBool()\r\n\t\t\t\t\t\t.set(\"prompt\", get.prompt(\"mijianmrfz\"))\r\n\t\t\t\t\t\t.set(\"prompt2\", `你可以摸${count + 1}张牌`)\r\n\t\t\t\t\t\t.set(\"ai\", () => true)\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tevent.result = await player\r\n\t\t\t\t\t\t.chooseCard(\"he\")\r\n\t\t\t\t\t\t.set(\"prompt\", get.prompt(\"mijianmrfz\"))\r\n\t\t\t\t\t\t.set(\"prompt2\", `你可以制衡${count + 1}`)\r\n\t\t\t\t\t\t.set(\"selectCard\", () => {\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\treturn [1, get.event().count + 1];\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"ai\", card => {\r\n\t\t\t\t\t\t\treturn 8 - get.value(card);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.set(\"count\", count)\r\n\t\t\t\t\t\t.forResult();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (trigger.name === \"damage\") {\r\n\t\t\t\t\tplayer.draw(player.getHistory(\"useSkill\", evt => evt.skill === \"mijianmrfz\").length + 1);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet num = 1;\r\n\t\t\t\t\tfor (let card of player.getCards(\"h\")) {\r\n\t\t\t\t\t\tif (!event.cards.includes(card)) {\r\n\t\t\t\t\t\t\tnum--;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tawait player.discard(event.cards);\r\n\t\t\t\t\tawait player.draw(event.cards.length + num);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tmaixie: true,\r\n\t\t\t\tmaixie_hp: true,\r\n\t\t\t\teffect: {\r\n\t\t\t\t\ttarget(card, player, target) {\r\n\t\t\t\t\t\tif (get.tag(card, \"damage\")) {\r\n\t\t\t\t\t\t\tif (player.hasSkillTag(\"jueqing\", false, target)) return [1, -2];\r\n\t\t\t\t\t\t\tif (!target.hasFriend()) return;\r\n\t\t\t\t\t\t\tlet num = 1;\r\n\t\t\t\t\t\t\tif (get.attitude(player, target) > 0) {\r\n\t\t\t\t\t\t\t\tif (player.needsToDiscard()) num = 0.7;\r\n\t\t\t\t\t\t\t\telse num = 0.5;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (target.hp >= 4) return [1, num * 2];\r\n\t\t\t\t\t\t\tif (target.hp == 3) return [1, num * 1.5];\r\n\t\t\t\t\t\t\tif (target.hp == 2) return [1, num * 0.5];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// 骋风\r\n\t\txiadaomrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\ttrigger: {\r\n\t\t\t\tglobal: [\"gainAfter\", \"loseAsyncAfter\"],\r\n\t\t\t},\r\n\t\t\tinit() {\r\n\t\t\t\tlib.translate[\"xiadaomrfz_tag\"] = \"待分配\";\r\n\t\t\t\tlib.translate[\"xiadaomrfz_tag_allocated\"] = \"已分配\";\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tif (event.getParent(2).name === \"xiadaomrfz\") return false;\r\n\t\t\t\treturn event.player !== player && event.cards && event.cards.filter(i => get.position(i) === \"h\").length > 1;\r\n\t\t\t},\r\n\t\t\tasync cost(event, trigger, player) {\r\n\t\t\t\ttrigger.player.addTempSkill(\"xiadaomrfz_damage\", { global: \"xiadaoAfter\" });\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tconst { result } = await player\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t.chooseToUse(\r\n\t\t\t\t\t\tfunction (card, player, event) {\r\n\t\t\t\t\t\t\tif (get.name(card) != \"sha\") return false;\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\treturn lib.filter.filterCard.apply(this, arguments);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t`【侠盗】:是否对${get.translation(trigger.player)}使用一张【杀】，若造成伤害，你获得其本次获得的（${get.cnNumber(trigger.cards.filter(i => get.position(i) === \"h\").length)}张）牌？`\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.set(\"complexSelect\", true)\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tif (target != _status.event.sourcex && !ui.selected.targets.includes(_status.event.sourcex)) return false;\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\treturn lib.filter.targetEnabled.apply(this, arguments);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.set(\"sourcex\", trigger.player);\r\n\t\t\t\tevent.result = result;\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\tif (!player.storage.xiadaomrfz_damage) return false;\r\n\t\t\t\tdelete player.storage.xiadaomrfz_damage;\r\n\t\t\t\tlet cards = trigger.cards.filter(i => get.position(i) === \"h\");\r\n\t\t\t\tif (cards.length < 1) return;\r\n\t\t\t\tlet cardsx = cards.map(card => {\r\n\t\t\t\t\tvar cardx = ui.create.card();\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tcardx.init(get.cardInfo(card));\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tcardx._cardid = card.cardid;\r\n\t\t\t\t\treturn cardx;\r\n\t\t\t\t});\r\n\t\t\t\tawait player.directgains(cardsx, null, \"xiadaomrfz_tag\");\r\n\t\t\t\tlet list = [];\r\n\t\t\t\twhile (player.countCards(\"s\", card => card.hasGaintag(\"xiadaomrfz_tag\")) > 0) {\r\n\t\t\t\t\tconst { result } = await player.chooseCardTarget({\r\n\t\t\t\t\t\tforced: true,\r\n\t\t\t\t\t\tprompt: `分配获得的牌`,\r\n\t\t\t\t\t\tfilterCard(card) {\r\n\t\t\t\t\t\t\treturn card.hasGaintag(\"xiadaomrfz_tag\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tselectCard: [1, Infinity],\r\n\t\t\t\t\t\tselectTarget: [1, Infinity],\r\n\t\t\t\t\t\tposition: \"s\",\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tai1: card => {\r\n\t\t\t\t\t\t\tif (ui.selected.cards.length === 0) return 1;\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tai2: target => {\r\n\t\t\t\t\t\t\tconst att = get.attitude(_status.event.player, target);\r\n\t\t\t\t\t\t\tif (get.value(ui.selected.cards[0], target) < 0) {\r\n\t\t\t\t\t\t\t\treturn -att;\r\n\t\t\t\t\t\t\t} else if (att > 0) {\r\n\t\t\t\t\t\t\t\treturn att / (1 + target.countCards(\"h\"));\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn att / 100;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tlist.add([result.targets[0], result.cards]);\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tresult.cards.forEach(i => {\r\n\t\t\t\t\t\ti.removeGaintag(\"xiadaomrfz_tag\");\r\n\t\t\t\t\t\ti.addGaintag(\"xiadaomrfz_tag_allocated\");\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tlet deleteCards = player.getCards(\"s\", card => card.hasGaintag(\"xiadaomrfz_tag_allocated\"));\r\n\t\t\t\tif (player.isOnline2()) {\r\n\t\t\t\t\tplayer.send(\r\n\t\t\t\t\t\tfunction (cards, player) {\r\n\t\t\t\t\t\t\tcards.forEach(i => i.delete());\r\n\t\t\t\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tdeleteCards,\r\n\t\t\t\t\t\tplayer\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\tdeleteCards.forEach(i => i.delete());\r\n\t\t\t\tif (player == game.me) ui.updatehl();\r\n\t\t\t\tlist = list.map(arr => {\r\n\t\t\t\t\tlet cards = arr[1];\r\n\t\t\t\t\tlet gain = [];\r\n\t\t\t\t\tlet j = trigger.player.getCards(\"h\");\r\n\t\t\t\t\tfor (let card of j) {\r\n\t\t\t\t\t\tif (cards.some(cardx => cardx._cardid == card.cardid)) gain.push(card);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn [arr[0], gain];\r\n\t\t\t\t});\r\n\t\t\t\tgame.loseAsync({\r\n\t\t\t\t\tgain_list: list,\r\n\t\t\t\t\tgiver: player,\r\n\t\t\t\t\tanimate: \"draw\",\r\n\t\t\t\t}).setContent(\"gaincardMultiple\");\r\n\t\t\t},\r\n\t\t\tsubSkill: {\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { player: \"damageEnd\" },\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tfilter(event, player) {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\treturn event.getParent(4).name === \"xiadaomrfz_cost\" && event.source && event.card && event.card.name === \"sha\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\ttrigger.source.storage.xiadaomrfz_damage = true;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tthreaten(player, target) {\r\n\t\t\t\t\treturn target.hasSkill(\"qunxiamrfz\") ? 5 : 2;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tqunxiamrfz: {\r\n\t\t\taudio: 2,\r\n\t\t\tgetUntapped(player) {\r\n\t\t\t\tlet result = [];\r\n\t\t\t\tplayer.getRoundHistory(\"useCard\", evt => {\r\n\t\t\t\t\tif (evt.player === player) {\r\n\t\t\t\t\t\tresult.add(get.suit(evt.card));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn result;\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\t// @ts-ignore\r\n\t\t\tinit(player, skill) {\r\n\t\t\t\tplayer.storage.qunxiamrfz = [];\r\n\t\t\t\tlet trans = \"\";\r\n\t\t\t\tfor (let i of player.storage.qunxiamrfz) {\r\n\t\t\t\t\ttrans += get.translation(i);\r\n\t\t\t\t}\r\n\t\t\t\tplayer.addTip(\"qunxiamrfz\", `群侠 ${player.storage.qunxiamrfz.length > 0 ? trans : \"无记录\"}`);\r\n\t\t\t},\r\n\t\t\ttrigger: {\r\n\t\t\t\tplayer: \"useCard\",\r\n\t\t\t},\r\n\t\t\tfilter(event, player) {\r\n\t\t\t\treturn event.card && !player.storage.qunxiamrfz.includes(get.suit(event.card));\r\n\t\t\t},\r\n\t\t\tcheck(event) {\r\n\t\t\t\treturn [\"basic\", \"trick\"].includes(get.type(event.card)) && [\"tao\", \"shan\", \"jiu\", \"wugu\"].includes(event.card.name);\r\n\t\t\t},\r\n\t\t\tprompt(event) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\treturn `【群侠】:是否令${get.translation(event.card)}不可被其他角色响应？`;\r\n\t\t\t},\r\n\t\t\t// @ts-ignore\r\n\t\t\t// @ts-ignore\r\n\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\ttrigger.directHit.addArray(\r\n\t\t\t\t\tgame.filterPlayer(function (current) {\r\n\t\t\t\t\t\treturn current !== player;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t\tplayer.storage.qunxiamrfz.add(get.suit(trigger.card));\r\n\t\t\t\tlet trans = \"\";\r\n\t\t\t\tfor (let i of player.storage.qunxiamrfz) {\r\n\t\t\t\t\ttrans += get.translation(i);\r\n\t\t\t\t}\r\n\t\t\t\tplayer.addTip(\"qunxiamrfz\", `群侠 ${player.storage.qunxiamrfz.length > 0 ? trans : \"无记录\"}`);\r\n\t\t\t},\r\n\t\t\tgroup: [\"qunxiamrfz_clear\", \"qunxiamrfz_sha\"],\r\n\t\t\tsubSkill: {\r\n\t\t\t\tclear: {\r\n\t\t\t\t\tcharlotte: true,\r\n\t\t\t\t\tsilent: true,\r\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tasync content(event, trigger, player) {\r\n\t\t\t\t\t\tplayer.storage.qunxiamrfz = [];\r\n\t\t\t\t\t\tlet trans = \"\";\r\n\t\t\t\t\t\tfor (let i of player.storage.qunxiamrfz) {\r\n\t\t\t\t\t\t\ttrans += get.translation(i);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tplayer.addTip(\"qunxiamrfz\", `群侠 ${player.storage.qunxiamrfz.length > 0 ? trans : \"无记录\"}`);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tsha: {\r\n\t\t\t\t\taudio: \"qunxiamrfz\",\r\n\t\t\t\t\tenable: [\"chooseToUse\"],\r\n\t\t\t\t\tfilterCard(card, player) {\r\n\t\t\t\t\t\treturn !lib.skill.qunxiamrfz.getUntapped(player).includes(get.suit(card));\r\n\t\t\t\t\t},\r\n\t\t\t\t\tposition: \"hes\",\r\n\t\t\t\t\tviewAs: {\r\n\t\t\t\t\t\tname: \"sha\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tviewAsFilter(player) {\r\n\t\t\t\t\t\treturn player.countCards(\"hes\", card => !lib.skill.qunxiamrfz.getUntapped(player).includes(get.suit(card))) > 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprompt: \"将一张本轮未使用的花色的牌当杀使用\",\r\n\t\t\t\t\tcheck(card) {\r\n\t\t\t\t\t\tconst val = get.value(card);\r\n\t\t\t\t\t\treturn 5 - val;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tai: {\r\n\t\t\t\tdirectHit_ai: true,\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tskillTagFilter(player, tag, arg) {\r\n\t\t\t\t\treturn arg && arg.card && !player.storage.qunxiamrfz.includes(get.suit(arg.card));\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n};\r\n"],"names":["player","trigger","card","i","moved","targets","event","cards"],"mappings":"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"}