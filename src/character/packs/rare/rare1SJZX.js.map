{"version":3,"file":"rare1SJZX.js","sources":["../../../../../../../../packages/extension/WhichWay/src/character/packs/rare/rare1SJZX.js"],"sourcesContent":["import { lib, game, ui, get, ai, _status } from \"noname\";\nimport { whichWayMath } from \"./../../../math/index.ts\";\n\nconst tmpSave = window.whichWaySave.tmpSave;\n\n/** @type {WhichWayCharacterPack} */\nexport default {\n\tcharacter: {\n\t\tshuangyemrfz: [\"female\", \"luomrfz\", 4, [\"canyinmrfz\", \"bingrenmrfz\"], []],\n\t\tyueyuemrfz: [\"female\", \"bomrfz\", 4, [\"xiyumrfz\"], []],\n\t\tlutuomrfz: [\"female\", \"bomrfz\", 4, [\"zhengyimrfz\", \"daosimrfz\"], []],\n\t\tshendianmrfz: [\"female\", \"yimrfz\", 3, [\"fumumrfz\", \"rouguangmrfz\", \"mizongmrfz\"], []],\n\t\tyunjimrfz: [\"female\", \"gemrfz\", 3, [\"lingkongmrfz\", \"mijianmrfz\"], []],\n\t\tchengfengmrfz: [\"male\", \"yanmrfz\", 3, [\"xiadaomrfz\", \"qunxiamrfz\"], []],\n\t\tdongshimrfz: {\n\t\t\tsex: \"female\",\n\t\t\tgroup: \"wumrfz\",\n\t\t\thp: 3,\n\t\t\tskills: [\"gelimrfz\"],\n\t\t},\n\t\txielvmrfz: {\n\t\t\tsex: \"female\",\n\t\t\tgroup: \"laimrfz\",\n\t\t\thp: 3,\n\t\t\tskills: [\"lvmaimrfz\", \"tiaoxiemrfz\"],\n\t\t},\n\t},\n\tskill: {\n\t\t//协律\n\t\tlvmaimrfz: {\n\t\t\taudio: [\"作战中1\", \"作战中2\"],\n\t\t\tzhuanhuanji(player, skill) {\n\t\t\t\tif (player.storage[skill] < 3) player.storage[skill]++;\n\t\t\t\telse player.storage[skill] = 0;\n\t\t\t},\n\t\t\tinit(player, skill) {\n\t\t\t\tplayer.storage.lvmaimrfz = 0;\n\t\t\t\tplayer.addTip(\"lvmaimrfz_tip\", `律脉 ${get.translation(lib.skill.lvmaimrfz.transfer(player))}`);\n\t\t\t},\n\t\t\ttrigger: {\n\t\t\t\tplayer: [\"useCardAfter\", \"respondAfter\"],\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\treturn player.countCards(\"he\") > 0;\n\t\t\t},\n\t\t\tmark: true,\n\t\t\tintro: {\n\t\t\t\tcontent(storage, player) {\n\t\t\t\t\treturn `当你使用或打出一张牌后，你可以重铸至多一张牌，然后若你的手牌中最多的花色为${get.translation(lib.skill.lvmaimrfz.transfer(player))}，你摸一张牌。`;\n\t\t\t\t},\n\t\t\t},\n\t\t\tasync cost(event, trigger, player) {\n\t\t\t\tevent.result = await player\n\t\t\t\t\t.chooseCard()\n\t\t\t\t\t.set(\"prompt\", get.prompt(\"lvmaimrfz\"))\n\t\t\t\t\t.set(\"prompt2\", `你可以重铸一张牌,然后若你手牌中最多的花色为${get.translation(lib.skill.lvmaimrfz.transfer(player))},你摸一张牌`)\n\t\t\t\t\t.set(\"filterCard\", card => {\n\t\t\t\t\t\treturn get.player().canRecast(card);\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"ai\", function (card) {\n\t\t\t\t\t\treturn 8 - get.value(card);\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"position\", \"he\")\n\t\t\t\t\t.forResult();\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tawait player.recast(event.cards);\n\t\t\t\tlet suit = lib.skill.lvmaimrfz.transfer(player);\n\t\t\t\tlet suitcount = lib.suit.map(s => player.countCards(\"h\", { suit: s }));\n\t\t\t\tlet max = Math.max(...suitcount);\n\t\t\t\tif (player.countCards(\"h\", { suit: suit }) === max) {\n\t\t\t\t\tawait player.draw();\n\t\t\t\t\tplayer.changeZhuanhuanji(\"lvmaimrfz\");\n\t\t\t\t\tplayer.addTip(\"lvmaimrfz_tip\", `律脉 ${get.translation(lib.skill.lvmaimrfz.transfer(player))}`);\n\t\t\t\t}\n\t\t\t},\n\t\t\ttransfer(player) {\n\t\t\t\tswitch (player.storage.lvmaimrfz) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\treturn \"spade\";\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\treturn \"club\";\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\treturn \"heart\";\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\treturn \"diamond\";\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn \"\";\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\ttiaoxiemrfz: {\n\t\t\taudio: [\"作战中3\", \"作战中4\"],\n\t\t\tinit(player, skill) {\n\t\t\t\tplayer.storage[skill] = [];\n\t\t\t},\n\t\t\tonremove: true,\n\t\t\tmark: true,\n\t\t\tintro: {\n\t\t\t\tcontent(storage, player) {\n\t\t\t\t\treturn `已使用的花色：${get.translation(storage)}`;\n\t\t\t\t},\n\t\t\t},\n\t\t\tenable: \"chooseToUse\",\n\t\t\tfilter(event, player) {\n\t\t\t\treturn (\n\t\t\t\t\tplayer.getCards(\"h\", card => {\n\t\t\t\t\t\tif (![\"basic\", \"trick\"].includes(get.type(card))) return false;\n\t\t\t\t\t\tlet suit = get.suit(card);\n\t\t\t\t\t\treturn player.countCards(\"h\", card => get.suit(card) !== suit) > 0 && event.filterCard(card, player, event);\n\t\t\t\t\t}).length > 0\n\t\t\t\t);\n\t\t\t},\n\t\t\tfilterCard(card) {\n\t\t\t\tlet player = get.player(),\n\t\t\t\t\tevent = get.event();\n\t\t\t\tlet suit = get.suit(card);\n\t\t\t\t//@ts-ignore\n\t\t\t\tif (event.skillDialog instanceof HTMLElement) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tevent.skillDialog.remove();\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tevent.skillDialog = ui.create.dialog(`###【调协】###${lib.skill.tiaoxiemrfz.prompt()}`);\n\t\t\t\t}\n\t\t\t\tif (ui.selected.cards.length < 1) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tif (Object.keys(event.getParent(\"phaseUse\")).length > 0 && event.getParent(\"phaseUse\").player === player && !player.hasUseTarget(card)) return false;\n\t\t\t\t\telse if (!event._backup.filterCard(card, player)) return false;\n\t\t\t\t\treturn player.countCards(\"h\", card => get.suit(card) !== suit) > 0 && [\"basic\", \"trick\"].includes(get.type(card)) && !player.getStorage(\"tiaoxiemrfz\").includes(suit);\n\t\t\t\t}\n\t\t\t\treturn suit !== get.suit(ui.selected.cards[0]);\n\t\t\t},\n\t\t\tselectCard: 2,\n\t\t\tcheck(card) {\n\t\t\t\tlet player = get.player();\n\t\t\t\tif (ui.selected.cards.length < 1) return player.getUseValue(card);\n\t\t\t\treturn player.getUseValue(card) - player.getUseValue(ui.selected.cards[0]);\n\t\t\t},\n\t\t\tprompt() {\n\t\t\t\tlet player = get.player();\n\t\t\t\treturn ui.selected.cards.length < 1 ? `【调协】:请选择你要被当作使用的牌<br>(当前已使用的花色：${get.translation(player.getStorage(\"tiaoxiemrfz\"))})` : `你可以将一张手牌当【${get.translation(ui.selected.cards[0].name)}】使用`;\n\t\t\t},\n\t\t\tcomplexCard: true,\n\t\t\tdiscard: false,\n\t\t\tlose: false,\n\t\t\tdelay: 0,\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tplayer.storage.tiaoxiemrfz.push(get.suit(event.cards[0]));\n\t\t\t\tlet name = get.name(event.cards[0]);\n\n\t\t\t\t//@ts-ignore\n\t\t\t\tif (Object.keys(event.getParent(\"phaseUse\")).length>0 && event.getParent(\"phaseUse\").player === player) await player.chooseUseTarget({ name: name }, [event.cards[1]]).set(\"forced\", true);\n\t\t\t\telse {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tif (name === \"wuxie\") event._trigger = event.getParent(2)._trigger;\n\t\t\t\t\tconst result = await player.useCard({ name: name }, [event.cards[1]]).set(\"forced\", true).forResult();\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tevent.getParent(2)._result = result;\n\t\t\t\t}\n\t\t\t},\n\t\t\tgroup: [\"tiaoxiemrfz_clear\"],\n\t\t\tsubSkill: {\n\t\t\t\tclear: {\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tplayer.storage.tiaoxiemrfz = [];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 10,\n\t\t\t\tresult: {\n\t\t\t\t\tplayer: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t//冬时\n\t\tgelimrfz: {\n\t\t\taudio: [\"作战中1\", \"作战中2\", \"作战中3\", \"作战中4\"],\n\t\t\tforced: true,\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"useCardAfter\",\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\t//@ts-ignore\n\t\t\t\tlet discarded = Array.from(ui.discardPile.childNodes)\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t.map(i => get.number(i))\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t.filter(i => ![null, \"unsure\", undefined].includes(i));\n\t\t\t\tif (discarded.length < 1) return false;\n\t\t\t\t//@ts-ignore\n\t\t\t\tlet mean = whichWayMath.mean(discarded);\n\t\t\t\t//@ts-ignore\n\t\t\t\tlet sd = whichWayMath.std(discarded);\n\t\t\t\t//@ts-ignore\n\t\t\t\treturn get.number(event.card) > mean + sd || get.number(event.card) < mean - sd;\n\t\t\t},\n\t\t\tmark: true,\n\t\t\tintro: {\n\t\t\t\tcontent() {\n\t\t\t\t\tlet discarded = Array.from(ui.discardPile.childNodes)\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t.map(i => get.number(i))\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t.filter(i => ![null, \"unsure\", undefined].includes(i));\n\t\t\t\t\tif (discarded.length < 1) return `弃牌堆中没有牌!`;\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tlet mean = whichWayMath.mean(discarded);\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tlet sd = whichWayMath.std(discarded);\n\t\t\t\t\tlet str = [];\n\t\t\t\t\tfor (let i = 1; i < 4; i++) {\n\t\t\t\t\t\tstr.push(`正负${i}个标准差:(${mean - i * sd} , ${mean + i * sd})`);\n\t\t\t\t\t}\n\t\t\t\t\treturn str.join(\"<br>\");\n\t\t\t\t},\n\t\t\t},\n\t\t\t// @ts-ignore\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\t//@ts-ignore\n\t\t\t\tlet discarded = Array.from(ui.discardPile.childNodes)\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t.map(i => get.number(i))\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t.filter(i => ![null, \"unsure\", undefined].includes(i));\n\t\t\t\t//@ts-ignore\n\t\t\t\tlet mean = whichWayMath.mean(discarded);\n\t\t\t\t//@ts-ignore\n\t\t\t\tlet sd = whichWayMath.std(discarded);\n\t\t\t\tlet num = get.number(trigger.card);\n\t\t\t\tlet draw = 0;\n\n\t\t\t\tfor (let i = 1; i < 4; i++) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tif (num > mean + i * sd || num < mean - i * sd) {\n\t\t\t\t\t\tdraw = i;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (draw > 0) player.draw(draw);\n\t\t\t},\n\t\t},\n\n\t\t//霜叶\n\t\tcanyinmrfz: {\n\t\t\tmark: true,\n\t\t\tintro: {\n\t\t\t\t// @ts-ignore\n\t\t\t\tcontent: function (event, player) {\n\t\t\t\t\tvar storage = player.storage.canyinmrfz;\n\t\t\t\t\tif (!storage || !player.isPhaseUsing()) return \"无\";\n\t\t\t\t\treturn \"本阶段不能使用或打出\" + get.translation(storage) + \"牌\";\n\t\t\t\t},\n\t\t\t},\n\t\t\taudio: 2,\n\t\t\tforced: true,\n\t\t\ttrigger: { player: \"phaseUseBegin\" },\n\t\t\tcontent: function () {\n\t\t\t\t\"step 0\";\n\t\t\t\tvar cs = 1;\n\t\t\t\t// @ts-ignore\n\t\t\t\tif (player.hp < 2 && player.countCards(\"h\", \"tao\") > 0) cs = 2;\n\t\t\t\t// @ts-ignore\n\t\t\t\telse if (\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tplayer.hasSha() &&\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tplayer.countCards(\"h\", function (card) {\n\t\t\t\t\t\treturn get.type(card) == \"equip\";\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t}) < 3 &&\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tplayer.canUseCardAtt(\"sha\", false, true)\n\t\t\t\t)\n\t\t\t\t\tcs = 2;\n\t\t\t\t// @ts-ignore\n\t\t\t\telse if (\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tplayer.countCards(\"h\", function (card) {\n\t\t\t\t\t\treturn get.type2(card) == \"trick\" && card.name != \"wuxie\";\n\t\t\t\t\t}) > 2\n\t\t\t\t)\n\t\t\t\t\tcs = 0;\n\t\t\t\t// @ts-ignore\n\t\t\t\tplayer\n\t\t\t\t\t.chooseControl()\n\t\t\t\t\t.set(\"choiceList\", [\"基本：使用牌无距离限制且不可响应\", \"锦囊：摸两张牌\", \"装备：本阶段使用的第一张带有伤害类标签的牌伤害值或回复值+1\"])\n\t\t\t\t\t.set(\"prompt\", \"【蚕吟】:请选择你不能使用的类型\")\n\t\t\t\t\t.set(\"ai\", function () {\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\treturn _status.event.cs;\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"cs\", cs);\n\t\t\t\t(\"step 1\");\n\t\t\t\t// @ts-ignore\n\t\t\t\tif (result.control) {\n\t\t\t\t\tvar list = [\"basic\", \"trick\", \"equip\"];\n\t\t\t\t\tfor (var i = 0; i < list.length; i++) {\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tif (result.index == i) {\n\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\tif (result.index != 1) player.addTempSkill(\"canyinmrfz_\" + list[i], \"phaseUseEnd\");\n\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\telse player.draw(2);\n\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\tplayer.addTempSkill(\"canyinmrfz_ban\", \"phaseUseEnd\");\n\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\tplayer.storage.canyinmrfz = list[i];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tgroup: \"canyinmrfz_rec\",\n\t\t\tsubSkill: {\n\t\t\t\trec: {\n\t\t\t\t\taudio: \"canyinmrfz\",\n\t\t\t\t\tforced: true,\n\t\t\t\t\ttrigger: { source: \"dieAfter\" },\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn event.player != player;\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tplayer.recoverTo(player.maxHp);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tused: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t},\n\t\t\t\tban: {\n\t\t\t\t\tmod: {\n\t\t\t\t\t\tcardEnabled: function (card, player) {\n\t\t\t\t\t\t\tif (get.type2(card) == player.storage.canyinmrfz) return false;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tbasic: {\n\t\t\t\t\tmod: {\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\ttargetInRange(card, player, target, now) {\n\t\t\t\t\t\t\tif ([\"trick\", \"delay\", \"basic\"].includes(get.type(card))) return true;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\taudio: \"canyinmrfz\",\n\t\t\t\t\tforced: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"useCard\",\n\t\t\t\t\t},\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\tevent.card &&\n\t\t\t\t\t\t\t(get.type(event.card) == \"trick\" || (get.type(event.card) == \"basic\" && ![\"shan\", \"tao\", \"jiu\", \"du\"].includes(event.card.name))) &&\n\t\t\t\t\t\t\tgame.hasPlayer(function (current) {\n\t\t\t\t\t\t\t\treturn current != player;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\ttrigger.directHit.addArray(\n\t\t\t\t\t\t\tgame.filterPlayer(function (current) {\n\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\treturn current != player;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t\tai: {\n\t\t\t\t\t\tdirectHit_ai: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tequip: {\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tplayer: \"useCard\",\n\t\t\t\t\t},\n\t\t\t\t\tusable: 1,\n\t\t\t\t\tforced: true,\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn get.tag(event.card, \"damage\") > 0 || get.tag(event.card, \"recover\") > 0;\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tif (!trigger.baseDamage) trigger.baseDamage = 1;\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\ttrigger.baseDamage += 1;\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tgame.log(trigger.card, \"的伤害值/回复值\", \"#y+1\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tbingrenmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"useCardToTargeted\",\n\t\t\t\ttarget: \"useCardToTargeted\",\n\t\t\t},\n\t\t\tfilter: function (event, player) {\n\t\t\t\t// @ts-ignore\n\t\t\t\tif (event.card.name != \"sha\" || event.getParent(2).name == \"bingrenmrfz\") return false;\n\t\t\t\t// @ts-ignore\n\t\t\t\treturn player == event.target || event.getParent().triggeredTargets3.length == 1;\n\t\t\t},\n\t\t\tcheck: function (event, player) {\n\t\t\t\tvar target = player == event.player ? event.target : event.player;\n\t\t\t\treturn (\n\t\t\t\t\tget.attitude(target, player) < 0 &&\n\t\t\t\t\t(player.countCards(\"h\", card => {\n\t\t\t\t\t\treturn card.name == \"tao\" || card.name == \"jiu\";\n\t\t\t\t\t}) > 0 ||\n\t\t\t\t\t\tplayer.hp > 1)\n\t\t\t\t);\n\t\t\t},\n\t\t\tprompt2: function (event, player) {\n\t\t\t\t// @ts-ignore\n\t\t\t\tvar target = player == event.player ? event.target : event.player;\n\t\t\t\treturn \"【冰刃】:你可以<span class=firetext>流失一点体力</span>并视为对\" + get.translation(target) + \"使用一张冰【杀】\";\n\t\t\t},\n\t\t\tcontent: function () {\n\t\t\t\t//成为目标 player==trigger.target\n\t\t\t\t//指定目标 player==trigger.player\n\t\t\t\t\"step 0\";\n\t\t\t\t// @ts-ignore\n\t\t\t\tplayer.loseHp();\n\t\t\t\t(\"step 1\");\n\t\t\t\t// @ts-ignore\n\t\t\t\tif (player.isAlive()) {\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tvar target = player == trigger.player ? trigger.target : trigger.player;\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tplayer.addTempSkill(\"bingrenmrfz_dam\", \"bingrenmrfzAfter\");\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tplayer.useCard({ name: \"sha\", nature: \"ice\", isCard: true, bingrenmrfz: true }, target).set(\"addCount\", false);\n\t\t\t\t}\n\t\t\t\t// @ts-ignore\n\t\t\t\telse event.finish();\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\tdam: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tsource: \"damageEnd\",\n\t\t\t\t\t},\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\tif (!event.card) return false;\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\treturn event.card.bingrenmrfz == true;\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\t\"step 0\";\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tif (trigger.player.countCards(\"he\") < 2) {\n\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\tplayer.removeSkill(\"bingrenmrfz_dam\");\n\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\ttrigger.player.turnOver();\n\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\ttrigger.player.chooseToDiscard(\"【冰刃】:请弃置两张牌，或选择取消翻面\", 2, \"he\").set(\"ai\", function (card) {\n\t\t\t\t\t\t\t\tvar player = _status.event.player;\n\t\t\t\t\t\t\t\tif (player.isTurnedOver()) return -1;\n\t\t\t\t\t\t\t\treturn 8 - get.value(card);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\t(\"step 1\");\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tif (result.bool == false) {\n\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\ttrigger.player.turnOver();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tplayer.removeSkill(\"bingrenmrfz_dam\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\t//跃跃\n\t\txiyumrfz: {\n\t\t\tonremove: true,\n\t\t\taudio: 2,\n\t\t\tenable: \"phaseUse\",\n\t\t\tusable: 1,\n\t\t\t// @ts-ignore\n\t\t\t// @ts-ignore\n\t\t\tfilter: function (event, player) {\n\t\t\t\treturn player.countCards(\"h\") > 0;\n\t\t\t},\n\t\t\tfilterCard: true,\n\t\t\t// @ts-ignore\n\t\t\t// @ts-ignore\n\t\t\tfilterTarget: function (card, player, target) {\n\t\t\t\treturn target != player;\n\t\t\t},\n\t\t\tcheck: card => {\n\t\t\t\tvar ban = [\"shan\", \"tao\", \"jiu\"];\n\t\t\t\tfor (var i of ban) {\n\t\t\t\t\tif (card.name == i) return false;\n\t\t\t\t}\n\t\t\t\treturn 8 - get.value(card);\n\t\t\t},\n\t\t\tdiscard: false,\n\t\t\tlose: false,\n\t\t\tdelay: false,\n\t\t\tcontent: function () {\n\t\t\t\t\"step 0\";\n\t\t\t\t// @ts-ignore\n\t\t\t\tfor (var i of cards) {\n\t\t\t\t\ti.storage.xiyumrfz_give = true;\n\t\t\t\t}\n\t\t\t\t// @ts-ignore\n\t\t\t\tplayer.give(cards, target);\n\t\t\t\t(\"step 1\");\n\t\t\t\t// @ts-ignore\n\t\t\t\tif (player.canUse(\"sha\", target, false)) {\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tplayer.storage.xiyumrfz = target;\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\ttarget.addTempSkill(\"xiyumrfz_suit\", { global: \"phaseUseEnd\" });\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tplayer.addTempSkill(\"xiyumrfz_gain\", \"phaseUseEnd\");\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tplayer.useCard({ name: \"sha\", storage: { xiyumrfz: true } }, target).set(\"addCount\", false);\n\t\t\t\t}\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\tgain: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tforced: true,\n\t\t\t\t\ttrigger: { player: \"useCardAfter\" },\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\treturn event.card && event.card.storage.xiyumrfz == true;\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\t\"step 0\";\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tvar target = player.storage.xiyumrfz,\n\t\t\t\t\t\t\tcards = target.getCards(\"he\"),\n\t\t\t\t\t\t\tsuit = target.getCards(\"he\", card => {\n\t\t\t\t\t\t\t\treturn card.storage.xiyumrfz_give;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tevent.cards = [];\n\t\t\t\t\t\tvar storage = target.storage.xiyumrfz_suit;\n\t\t\t\t\t\tfor (var i of suit) {\n\t\t\t\t\t\t\tif (!storage.includes(i.suit)) storage.add(i.suit);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (var i of cards) {\n\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\tif (storage.includes(i.suit)) event.cards.push(i);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t(\"step 1\");\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tif (event.cards.length) player.gain(event.cards, \"gain2\");\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tplayer.removeSkill(\"xiyumrfz_gain\");\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tplayer.removeSkill(\"xiyumrfz_suit\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tsuit: {\n\t\t\t\t\taudio: false,\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tlastDo: true,\n\t\t\t\t\tonremove: player => {\n\t\t\t\t\t\tdelete player.storage.xiyumrfz_suit;\n\t\t\t\t\t},\n\t\t\t\t\tinit: player => {\n\t\t\t\t\t\tplayer.storage.xiyumrfz_suit = [];\n\t\t\t\t\t},\n\t\t\t\t\ttrigger: { player: [\"useCard\", \"respond\"] },\n\t\t\t\t\tfilter: function (event, player) {\n\t\t\t\t\t\tif (event.card.suit == undefined) return false;\n\t\t\t\t\t\treturn lib.suit.includes(event.card.suit) && (!player.storage.xiyumrfz_suit || !player.storage.xiyumrfz_suit.includes(event.card.suit));\n\t\t\t\t\t},\n\t\t\t\t\tcontent: function () {\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tif (!player.storage.xiyumrfz_suit) player.storage.xiyumrfz_suit = [];\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tplayer.storage.xiyumrfz_suit.add(trigger.card.suit);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 10,\n\t\t\t\tresult: {\n\t\t\t\t\tplayer: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\t// 露托\n\t\tzhengyimrfz: {\n\t\t\tmod: {\n\t\t\t\t// @ts-ignore\n\t\t\t\t// @ts-ignore\n\t\t\t\tignoredHandcard: function (card, player) {\n\t\t\t\t\tif (card.hasGaintag(\"zhengyimrfz\")) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t// @ts-ignore\n\t\t\t\t// @ts-ignore\n\t\t\t\tcardDiscardable: function (card, player, name) {\n\t\t\t\t\tif (name == \"phaseDiscard\" && card.hasGaintag(\"zhengyimrfz\")) return false;\n\t\t\t\t},\n\t\t\t\ttargetInRange: function (card) {\n\t\t\t\t\tif (card.hasGaintag && card.hasGaintag(\"zhengyimrfz\")) return true;\n\t\t\t\t}, //QQQ\n\t\t\t},\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tglobal: \"die\",\n\t\t\t},\n\t\t\t// @ts-ignore\n\t\t\t// @ts-ignore\n\t\t\tfilter(event, player) {\n\t\t\t\treturn event.player.countCards(\"hej\") > 0;\n\t\t\t},\n\t\t\tfrequent: true,\n\t\t\t// @ts-ignore\n\t\t\t// @ts-ignore\n\t\t\tprompt2(event, player) {\n\t\t\t\t// @ts-ignore\n\t\t\t\treturn `是否获得${get.translation(event.player)}区域内的${event.player.countCards(\"hej\")}张牌？`;\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\t// @ts-ignore\n\t\t\t\tevent.togain = trigger.player.getCards(\"hej\");\n\t\t\t\t// @ts-ignore\n\t\t\t\tplayer.gain(event.togain, trigger.player, \"giveAuto\", \"bySelf\").gaintag.add(\"zhengyimrfz\");\n\t\t\t},\n\t\t\tgroup: \"zhengyimrfz_draw\",\n\t\t\tsubSkill: {\n\t\t\t\tdraw: {\n\t\t\t\t\taudio: \"zhengyimrfz\",\n\t\t\t\t\tforced: true,\n\t\t\t\t\ttrigger: { player: \"useCardAfter\" },\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\treturn player.hasHistory(\"lose\", function (evt) {\n\t\t\t\t\t\t\tif (event != evt.getParent()) return false;\n\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\tfor (var i in evt.gaintag_map) {\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\tevt.gaintag_map[i].includes(\"zhengyimrfz\")\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tlet tagCards = player.getCards(\"h\").filter(i => i.hasGaintag(\"zhengyimrfz\"));\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tplayer.drawTo(player.maxHp + tagCards.length);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tdaosimrfz: {\n\t\t\taudio: 2,\n\t\t\tenable: [\"chooseToUse\", \"chooseToRespond\"],\n\t\t\tfilter(event, player) {\n\t\t\t\t// @ts-ignore\n\t\t\t\treturn (\n\t\t\t\t\tui.discardPile.lastChild &&\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tget.type(ui.discardPile.lastChild) != \"equip\" &&\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tevent.filterCard({ name: ui.discardPile.lastChild.name }, player, event)\n\t\t\t\t);\n\t\t\t},\n\t\t\tfilterCard: true,\n\t\t\tcheck(card) {\n\t\t\t\treturn get.value(ui.discardPile.lastChild) - get.value(card);\n\t\t\t},\n\t\t\tviewAs() {\n\t\t\t\treturn {\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tname: ui.discardPile.lastChild.name,\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tnature: ui.discardPile.lastChild.nature,\n\t\t\t\t};\n\t\t\t},\n\t\t\tprompt() {\n\t\t\t\treturn `你可以将一张手牌当做${get.translation(ui.discardPile.lastChild)}使用或打出`;\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 8,\n\t\t\t\tresult: {\n\t\t\t\t\tplayer: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t// 深靛\n\t\tfumumrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"useCard\",\n\t\t\t\ttarget: \"useCardToTargeted\",\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\tif (event.name !== \"useCard\" && event.player == player) return false;\n\t\t\t\t// @ts-ignore\n\t\t\t\treturn get.isView(event.card);\n\t\t\t},\n\t\t\tforced: true,\n\t\t\tcontent() {\n\t\t\t\t// @ts-ignore\n\t\t\t\tif (trigger.name == \"useCard\") {\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\ttrigger.directHit.addArray(\n\t\t\t\t\t\tgame.filterPlayer(function (current) {\n\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\treturn current != player;\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\ttrigger.getParent().excluded.add(player);\n\t\t\t\t}\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tdirectHit_ai: true,\n\t\t\t\tskillTagFilter: function (player, tag, arg) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\treturn get.isView(arg.card);\n\t\t\t\t},\n\t\t\t\teffect: {\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\ttarget: function (card, player, target, current) {\n\t\t\t\t\t\tif (!card.isCard) return \"zeroplayertarget\";\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\trouguangmrfz: {\n\t\t\tinit(player, skill) {\n\t\t\t\tplayer.storage[skill] = {\n\t\t\t\t\tx: 0,\n\t\t\t\t\ttype: [],\n\t\t\t\t};\n\t\t\t},\n\t\t\tonremove: true,\n\t\t\tmark: true,\n\t\t\tintro: {\n\t\t\t\t// @ts-ignore\n\t\t\t\t// @ts-ignore\n\t\t\t\tcontent(event, player) {\n\t\t\t\t\tlet storage = player.storage.rouguangmrfz;\n\t\t\t\t\treturn `·额定摸牌数和手牌上限+${storage[\"x\"]}<br>·本轮已使用的类型:${get.translation(storage[\"type\"])}`;\n\t\t\t\t},\n\t\t\t},\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tglobal: \"roundStart\",\n\t\t\t\tplayer: \"useCardAfter\",\n\t\t\t},\n\t\t\tsilent: true,\n\t\t\tforced: true,\n\t\t\tfilter(event, player) {\n\t\t\t\tlet storage = player.storage.rouguangmrfz;\n\t\t\t\tif (event.name === \"useCard\") return !storage[\"type\"].includes(get.type2(event.card));\n\t\t\t\telse return true;\n\t\t\t},\n\t\t\t// @ts-ignore\n\t\t\t// @ts-ignore\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tif (trigger.name === \"useCard\") {\n\t\t\t\t\tplayer.storage.rouguangmrfz[\"type\"].push(get.type2(trigger.card));\n\t\t\t\t} else {\n\t\t\t\t\tlet storage = player.storage.rouguangmrfz;\n\t\t\t\t\tif (game.roundNumber > 1 && storage[\"x\"] < 3 && storage[\"type\"].length === 3) {\n\t\t\t\t\t\tplayer.storage.rouguangmrfz[\"x\"]++;\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tplayer.logSkill(\"rouguangmrfz\");\n\t\t\t\t\t}\n\t\t\t\t\tplayer.storage.rouguangmrfz[\"type\"] = [];\n\t\t\t\t}\n\t\t\t},\n\t\t\tgroup: \"rouguangmrfz_eff\",\n\t\t\tsubSkill: {\n\t\t\t\teff: {\n\t\t\t\t\tmod: {\n\t\t\t\t\t\tmaxHandcard: function (player, num) {\n\t\t\t\t\t\t\treturn (num += player.storage.rouguangmrfz[\"x\"]);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\taudio: \"rouguangmrfz\",\n\t\t\t\t\tforced: true,\n\t\t\t\t\ttrigger: { player: \"phaseDrawBegin2\" },\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\treturn !event.numFixed && player.storage.rouguangmrfz[\"x\"] > 0;\n\t\t\t\t\t},\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\ttrigger.num += player.storage.rouguangmrfz[\"x\"];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tmizongmrfz: {\n\t\t\taudio: 2,\n\t\t\tenable: \"phaseUse\",\n\t\t\tusable: 1,\n\t\t\t// @ts-ignore\n\t\t\t// @ts-ignore\n\t\t\tfilter(event, player) {\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\t// @ts-ignore\n\t\t\t// @ts-ignore\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tlet targets = game.players.slice().filter(i => player.inRange(i) || player == i);\n\t\t\t\tlet names = targets.map(i => i.name);\n\t\t\t\tlet {moved} = await player\n\t\t\t\t\t.chooseToMove(`【迷踪】:请为${get.cnNumber(targets.length, true)}名角色分配效果`)\n\t\t\t\t\t.set(\"list\", [[`你攻击范围内的角色`, [names, \"character\"]], [`直到该角色的出牌阶段<font color = red>开始时</font>，所有当前时机<font color = red>可以使用</font>的牌随机视为当前时机<font color = red>不可使用</font>的牌`], [`直到该角色的出牌阶段<font color = red>结束时</font>，所有当前时机<font color = red>不可以使用</font>的牌随机视为当前时机<font color = red>可使用</font>的牌`]])\n\t\t\t\t\t.set(\"processAI\", list => {\n\t\t\t\t\t\tlet moved = [[], [], []],\n\t\t\t\t\t\t\tplayer = get.player(),\n\t\t\t\t\t\t\ttargets = list[0][1][0].map(i =>\n\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t_status.event.chars.find(t => t.name === i)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\tlet func = function (to) {\n\t\t\t\t\t\t\tlet previous;\n\t\t\t\t\t\t\twhile (true) {\n\t\t\t\t\t\t\t\tprevious = previous || to.getPrevious();\n\t\t\t\t\t\t\t\tif (previous === player && get.attitude(player, previous) > 2) return true;\n\t\t\t\t\t\t\t\telse if (previous !== player && get.attitude(player, previous) > 2) {\n\t\t\t\t\t\t\t\t\tprevious.getPrevious();\n\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tfor (var target of targets) {\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tif (target === player) moved[2].push(target);\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\telse if (get.attitude(target, player) < 2) moved[1].push(target);\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\telse if (func(target)) moved[2].push(target);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn moved;\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"chars\", targets)\n\t\t\t\t\t.forResult();\n\t\t\t\tif (!moved) return;\n\n\t\t\t\tlet findPlayer = function (name, targets) {\n\t\t\t\t\tif (typeof name === \"string\") return targets.find(t => t.name === name);\n\t\t\t\t\treturn name;\n\t\t\t\t};\n\t\t\t\tmoved = [moved[0], moved[1].map(i => findPlayer(i, targets)), moved[2].map(i => findPlayer(i, targets))];\n\n\t\t\t\tfor (var i of moved[1]) {\n\t\t\t\t\ti.addTempSkill(\"mizongmrfz_eff\", { player: \"phaseUseBegin\" });\n\t\t\t\t\ti.storage.mizongmrfz_eff = true;\n\t\t\t\t}\n\t\t\t\tfor (var i of moved[2]) {\n\t\t\t\t\ti.addTempSkill(\"mizongmrfz_eff\", { player: \"phaseUseEnd\" });\n\t\t\t\t\ti.storage.mizongmrfz_eff = false;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\teff: {\n\t\t\t\t\tinit(player) {\n\t\t\t\t\t\tif (!player.storage.mizongmrfz_cardData) {\n\t\t\t\t\t\t\tplayer.storage.mizongmrfz_cardData = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlib.skill.mizongmrfz_eff.inpile = lib.inpile.filter(i => get.type(i) != \"equip\");\n\t\t\t\t\t},\n\t\t\t\t\tgroup: \"mizongmrfz_cardData\",\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\tonremove(player) {\n\t\t\t\t\t\tdelete player.storage.mizongmrfz_cardData;\n\t\t\t\t\t\tdelete player.storage.mizongmrfz_eff;\n\t\t\t\t\t},\n\t\t\t\t\tinpile: [],\n\t\t\t\t\tmod: {\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tcardname(card, player, name) {\n\t\t\t\t\t\t\tconst storage = player.storage.mizongmrfz_eff;\n\t\t\t\t\t\t\tconst event = get.event();\n\n\t\t\t\t\t\t\tif (event.name === \"_wuxie\") {\n\t\t\t\t\t\t\t\tif (card.name !== \"wuxie\" && storage === false) return \"wuxie\";\n\t\t\t\t\t\t\t\tif (card.name === \"wuxie\" && storage === true) {\n\t\t\t\t\t\t\t\t\treturn lib.skill.mizongmrfz_eff.inpile.filter(i => i.name !== \"wuxie\").randomGet();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (![\"chooseToUse\", \"chooseToRespond\"].includes(event.name)) return;\n\n\t\t\t\t\t\t\tconst canUse = [];\n\t\t\t\t\t\t\tconst notUse = [];\n\t\t\t\t\t\t\tlib.skill.mizongmrfz_eff.inpile.forEach(i => {\n\t\t\t\t\t\t\t\tconst autoViewCard = get.autoViewAs({ name: i }, \"unsure\");\n\t\t\t\t\t\t\t\tif (event.filterCard(autoViewCard, player, event)) {\n\t\t\t\t\t\t\t\t\tcanUse.push(i);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tnotUse.push(i);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\tconst cardClone = game.createCard(card.name, card.suit, card.number, card.natrue);\n\t\t\t\t\t\t\tObject.assign(cardClone, {\n\t\t\t\t\t\t\t\t_cardid: card.cardid,\n\t\t\t\t\t\t\t\tstorage: card.storage,\n\t\t\t\t\t\t\t\tgaintag: card.gaintag,\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tconst cardData = player.storage.mizongmrfz_cardData[card.cardid];\n\n\t\t\t\t\t\t\tif ((!cardData || event.filterCard({ name: cardData }, player, event)) && storage === true && event.filterCard(cardClone, player, event)) {\n\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\tplayer.storage.mizongmrfz_cardData[card.cardid] = notUse.randomGet();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ((!cardData || !event.filterCard({ name: cardData }, player, event)) && storage === false && !event.filterCard(cardClone, player, event)) {\n\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\tplayer.storage.mizongmrfz_cardData[card.cardid] = canUse.randomGet();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\treturn player.storage.mizongmrfz_cardData[card.cardid];\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcardData: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\ttrigger: {\n\t\t\t\t\t\tglobal: [\"loseAfter\", \"gainAfter\", \"loseAsyncAfter\", \"_wuxieAfter\"],\n\t\t\t\t\t},\n\t\t\t\t\tcontent() {\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tplayer.storage.mizongmrfz_cardData = {};\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tai: {\n\t\t\t\torder: 13,\n\t\t\t\tresult: {\n\t\t\t\t\tplayer: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t// 云迹\n\t\tlingkongmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"phaseChange\",\n\t\t\t},\n\t\t\t// @ts-ignore\n\t\t\t// @ts-ignore\n\t\t\tfilter(event, player) {\n\t\t\t\tconst count = player.getHistory(\"useSkill\", evt => evt.skill === \"lingkongmrfz\").length;\n\t\t\t\treturn player.countCards(\"hs\", card => player.hasUseTarget(card)) >= count + 1;\n\t\t\t},\n\t\t\t// @ts-ignore\n\t\t\t// @ts-ignore\n\t\t\tcheck(event, player) {\n\t\t\t\t// @ts-ignore\n\t\t\t\treturn event.phaseList[event.num] !== \"phaseDraw\";\n\t\t\t},\n\t\t\tasync cost(event, trigger, player) {\n\t\t\t\tlet count = player.getHistory(\"useSkill\", evt => evt.skill === \"lingkongmrfz\").length;\n\t\t\t\twhile (count + 1 > 0) {\n\t\t\t\t\tconst  result  = await player\n\t\t\t\t\t\t.chooseToUse()\n\t\t\t\t\t\t.set(\"prompt\", `【翎空】:请选择的你要使用的牌`)\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t.set(\"prompt2\", `还需使用${count + 1}张牌即可将本阶段(${get.translation(trigger.phaseList[trigger.num])})改为出牌阶段`).forResult();\n\t\t\t\t\tif (result.card) count--;\n\t\t\t\t\telse break;\n\t\t\t\t}\n\t\t\t\tevent.result = {};\n\t\t\t\tif (count + 1 > 0) event.result.bool = false;\n\t\t\t\telse event.result.bool = true;\n\t\t\t},\n\t\t\t// @ts-ignore\n\t\t\t// @ts-ignore\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\t// @ts-ignore\n\t\t\t\tgame.log(player, `的`, trigger.phaseList[trigger.num], `被改为了`, \"#y出牌阶段\");\n\t\t\t\t// @ts-ignore\n\t\t\t\ttrigger.phaseList[trigger.num] = \"phaseUse|lingkongmrfz\";\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tthreaten: 1.5,\n\t\t\t},\n\t\t},\n\t\tmijianmrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tplayer: [\"phaseUseBegin\", \"damageEnd\"],\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\tif (event.name === \"damage\") return player.getDamagedHp() > 0;\n\t\t\t\treturn player.countCards(\"he\") > 0;\n\t\t\t},\n\t\t\tasync cost(event, trigger, player) {\n\t\t\t\tlet count = player.getHistory(\"useSkill\", evt => evt.skill === \"mijianmrfz\").length;\n\t\t\t\tif (trigger.name === \"damage\") {\n\t\t\t\t\tevent.result = await player\n\t\t\t\t\t\t.chooseBool()\n\t\t\t\t\t\t.set(\"prompt\", get.prompt(\"mijianmrfz\"))\n\t\t\t\t\t\t.set(\"prompt2\", `你可以摸${count + 1}张牌`)\n\t\t\t\t\t\t.set(\"ai\", () => true)\n\t\t\t\t\t\t.forResult();\n\t\t\t\t} else {\n\t\t\t\t\tevent.result = await player\n\t\t\t\t\t\t.chooseCard(\"he\")\n\t\t\t\t\t\t.set(\"prompt\", get.prompt(\"mijianmrfz\"))\n\t\t\t\t\t\t.set(\"prompt2\", `你可以制衡${count + 1}`)\n\t\t\t\t\t\t.set(\"selectCard\", () => {\n\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\treturn [1, get.event().count + 1];\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.set(\"ai\", card => {\n\t\t\t\t\t\t\treturn 8 - get.value(card);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.set(\"count\", count)\n\t\t\t\t\t\t.forResult();\n\t\t\t\t}\n\t\t\t},\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tif (trigger.name === \"damage\") {\n\t\t\t\t\tplayer.draw(player.getHistory(\"useSkill\", evt => evt.skill === \"mijianmrfz\").length + 1);\n\t\t\t\t} else {\n\t\t\t\t\tlet num = 1;\n\t\t\t\t\tfor (let card of player.getCards(\"h\")) {\n\t\t\t\t\t\tif (!event.cards.includes(card)) {\n\t\t\t\t\t\t\tnum--;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tawait player.discard(event.cards);\n\t\t\t\t\tawait player.draw(event.cards.length + num);\n\t\t\t\t}\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tmaixie: true,\n\t\t\t\tmaixie_hp: true,\n\t\t\t\teffect: {\n\t\t\t\t\ttarget(card, player, target) {\n\t\t\t\t\t\tif (get.tag(card, \"damage\")) {\n\t\t\t\t\t\t\tif (player.hasSkillTag(\"jueqing\", false, target)) return [1, -2];\n\t\t\t\t\t\t\tif (!target.hasFriend()) return;\n\t\t\t\t\t\t\tlet num = 1;\n\t\t\t\t\t\t\tif (get.attitude(player, target) > 0) {\n\t\t\t\t\t\t\t\tif (player.needsToDiscard()) num = 0.7;\n\t\t\t\t\t\t\t\telse num = 0.5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (target.hp >= 4) return [1, num * 2];\n\t\t\t\t\t\t\tif (target.hp == 3) return [1, num * 1.5];\n\t\t\t\t\t\t\tif (target.hp == 2) return [1, num * 0.5];\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\t// 骋风\n\t\txiadaomrfz: {\n\t\t\taudio: 2,\n\t\t\ttrigger: {\n\t\t\t\tglobal: [\"gainAfter\", \"loseAsyncAfter\"],\n\t\t\t},\n\t\t\tinit() {\n\t\t\t\tlib.translate[\"xiadaomrfz_tag\"] = \"待分配\";\n\t\t\t\tlib.translate[\"xiadaomrfz_tag_allocated\"] = \"已分配\";\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\t// @ts-ignore\n\t\t\t\tif (event.getParent(2).name === \"xiadaomrfz\") return false;\n\t\t\t\treturn event.player !== player && event.cards && event.cards.filter(i => get.position(i) === \"h\").length > 1;\n\t\t\t},\n\t\t\tasync cost(event, trigger, player) {\n\t\t\t\ttrigger.player.addTempSkill(\"xiadaomrfz_damage\", { global: \"xiadaoAfter\" });\n\t\t\t\t// @ts-ignore\n\t\t\t\tconst { result } = await player\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t.chooseToUse(\n\t\t\t\t\t\tfunction (card, player, event) {\n\t\t\t\t\t\t\tif (get.name(card) != \"sha\") return false;\n\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\treturn lib.filter.filterCard.apply(this, arguments);\n\t\t\t\t\t\t},\n\t\t\t\t\t\t`【侠盗】:是否对${get.translation(trigger.player)}使用一张【杀】，若造成伤害，你获得其本次获得的（${get.cnNumber(trigger.cards.filter(i => get.position(i) === \"h\").length)}张）牌？`\n\t\t\t\t\t)\n\t\t\t\t\t.set(\"complexSelect\", true)\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t.set(\"filterTarget\", function (card, player, target) {\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tif (target != _status.event.sourcex && !ui.selected.targets.includes(_status.event.sourcex)) return false;\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\treturn lib.filter.targetEnabled.apply(this, arguments);\n\t\t\t\t\t})\n\t\t\t\t\t.set(\"sourcex\", trigger.player);\n\t\t\t\tevent.result = result;\n\t\t\t},\n\t\t\t// @ts-ignore\n\t\t\t// @ts-ignore\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\tif (!player.storage.xiadaomrfz_damage) return false;\n\t\t\t\tdelete player.storage.xiadaomrfz_damage;\n\t\t\t\tlet cards = trigger.cards.filter(i => get.position(i) === \"h\");\n\t\t\t\tif (cards.length < 1) return;\n\t\t\t\tlet cardsx = cards.map(card => {\n\t\t\t\t\tvar cardx = ui.create.card();\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tcardx.init(get.cardInfo(card));\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tcardx._cardid = card.cardid;\n\t\t\t\t\treturn cardx;\n\t\t\t\t});\n\t\t\t\tawait player.directgains(cardsx, null, \"xiadaomrfz_tag\");\n\t\t\t\tlet list = [];\n\t\t\t\twhile (player.countCards(\"s\", card => card.hasGaintag(\"xiadaomrfz_tag\")) > 0) {\n\t\t\t\t\tconst { result } = await player.chooseCardTarget({\n\t\t\t\t\t\tforced: true,\n\t\t\t\t\t\tprompt: `分配获得的牌`,\n\t\t\t\t\t\tfilterCard(card) {\n\t\t\t\t\t\t\treturn card.hasGaintag(\"xiadaomrfz_tag\");\n\t\t\t\t\t\t},\n\t\t\t\t\t\tselectCard: [1, Infinity],\n\t\t\t\t\t\tselectTarget: [1, Infinity],\n\t\t\t\t\t\tposition: \"s\",\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tai1: card => {\n\t\t\t\t\t\t\tif (ui.selected.cards.length === 0) return 1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2: target => {\n\t\t\t\t\t\t\tconst att = get.attitude(_status.event.player, target);\n\t\t\t\t\t\t\tif (get.value(ui.selected.cards[0], target) < 0) {\n\t\t\t\t\t\t\t\treturn -att;\n\t\t\t\t\t\t\t} else if (att > 0) {\n\t\t\t\t\t\t\t\treturn att / (1 + target.countCards(\"h\"));\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn att / 100;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tlist.add([result.targets[0], result.cards]);\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tresult.cards.forEach(i => {\n\t\t\t\t\t\ti.removeGaintag(\"xiadaomrfz_tag\");\n\t\t\t\t\t\ti.addGaintag(\"xiadaomrfz_tag_allocated\");\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tlet deleteCards = player.getCards(\"s\", card => card.hasGaintag(\"xiadaomrfz_tag_allocated\"));\n\t\t\t\tif (player.isOnline2()) {\n\t\t\t\t\tplayer.send(\n\t\t\t\t\t\tfunction (cards, player) {\n\t\t\t\t\t\t\tcards.forEach(i => i.delete());\n\t\t\t\t\t\t\tif (player == game.me) ui.updatehl();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdeleteCards,\n\t\t\t\t\t\tplayer\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tdeleteCards.forEach(i => i.delete());\n\t\t\t\tif (player == game.me) ui.updatehl();\n\t\t\t\tlist = list.map(arr => {\n\t\t\t\t\tlet cards = arr[1];\n\t\t\t\t\tlet gain = [];\n\t\t\t\t\tlet j = trigger.player.getCards(\"h\");\n\t\t\t\t\tfor (let card of j) {\n\t\t\t\t\t\tif (cards.some(cardx => cardx._cardid == card.cardid)) gain.push(card);\n\t\t\t\t\t}\n\t\t\t\t\treturn [arr[0], gain];\n\t\t\t\t});\n\t\t\t\tgame.loseAsync({\n\t\t\t\t\tgain_list: list,\n\t\t\t\t\tgiver: player,\n\t\t\t\t\tanimate: \"draw\",\n\t\t\t\t}).setContent(\"gaincardMultiple\");\n\t\t\t},\n\t\t\tsubSkill: {\n\t\t\t\tdamage: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\ttrigger: { player: \"damageEnd\" },\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tfilter(event, player) {\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\treturn event.getParent(4).name === \"xiadaomrfz_cost\" && event.source && event.card && event.card.name === \"sha\";\n\t\t\t\t\t},\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\ttrigger.source.storage.xiadaomrfz_damage = true;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tai: {\n\t\t\t\t// @ts-ignore\n\t\t\t\t// @ts-ignore\n\t\t\t\tthreaten(player, target) {\n\t\t\t\t\treturn target.hasSkill(\"qunxiamrfz\") ? 5 : 2;\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tqunxiamrfz: {\n\t\t\taudio: 2,\n\t\t\tgetUntapped(player) {\n\t\t\t\tlet result = [];\n\t\t\t\tplayer.getRoundHistory(\"useCard\", evt => {\n\t\t\t\t\tif (evt.player === player) {\n\t\t\t\t\t\tresult.add(get.suit(evt.card));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn result;\n\t\t\t},\n\t\t\t// @ts-ignore\n\t\t\t// @ts-ignore\n\t\t\tinit(player, skill) {\n\t\t\t\tplayer.storage.qunxiamrfz = [];\n\t\t\t\tlet trans = \"\";\n\t\t\t\tfor (let i of player.storage.qunxiamrfz) {\n\t\t\t\t\ttrans += get.translation(i);\n\t\t\t\t}\n\t\t\t\tplayer.addTip(\"qunxiamrfz\", `群侠 ${player.storage.qunxiamrfz.length > 0 ? trans : \"无记录\"}`);\n\t\t\t},\n\t\t\ttrigger: {\n\t\t\t\tplayer: \"useCard\",\n\t\t\t},\n\t\t\tfilter(event, player) {\n\t\t\t\treturn event.card && !player.storage.qunxiamrfz.includes(get.suit(event.card));\n\t\t\t},\n\t\t\tcheck(event) {\n\t\t\t\treturn [\"basic\", \"trick\"].includes(get.type(event.card)) && [\"tao\", \"shan\", \"jiu\", \"wugu\"].includes(event.card.name);\n\t\t\t},\n\t\t\tprompt(event) {\n\t\t\t\t//@ts-ignore\n\t\t\t\treturn `【群侠】:是否令${get.translation(event.card)}不可被其他角色响应？`;\n\t\t\t},\n\t\t\t// @ts-ignore\n\t\t\t// @ts-ignore\n\t\t\tasync content(event, trigger, player) {\n\t\t\t\t//@ts-ignore\n\t\t\t\ttrigger.directHit.addArray(\n\t\t\t\t\tgame.filterPlayer(function (current) {\n\t\t\t\t\t\treturn current !== player;\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\tplayer.storage.qunxiamrfz.add(get.suit(trigger.card));\n\t\t\t\tlet trans = \"\";\n\t\t\t\tfor (let i of player.storage.qunxiamrfz) {\n\t\t\t\t\ttrans += get.translation(i);\n\t\t\t\t}\n\t\t\t\tplayer.addTip(\"qunxiamrfz\", `群侠 ${player.storage.qunxiamrfz.length > 0 ? trans : \"无记录\"}`);\n\t\t\t},\n\t\t\tgroup: [\"qunxiamrfz_clear\", \"qunxiamrfz_sha\"],\n\t\t\tsubSkill: {\n\t\t\t\tclear: {\n\t\t\t\t\tcharlotte: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\ttrigger: { global: \"roundStart\" },\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tasync content(event, trigger, player) {\n\t\t\t\t\t\tplayer.storage.qunxiamrfz = [];\n\t\t\t\t\t\tlet trans = \"\";\n\t\t\t\t\t\tfor (let i of player.storage.qunxiamrfz) {\n\t\t\t\t\t\t\ttrans += get.translation(i);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.addTip(\"qunxiamrfz\", `群侠 ${player.storage.qunxiamrfz.length > 0 ? trans : \"无记录\"}`);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tsha: {\n\t\t\t\t\taudio: \"qunxiamrfz\",\n\t\t\t\t\tenable: [\"chooseToUse\"],\n\t\t\t\t\tfilterCard(card, player) {\n\t\t\t\t\t\treturn !lib.skill.qunxiamrfz.getUntapped(player).includes(get.suit(card));\n\t\t\t\t\t},\n\t\t\t\t\tposition: \"hes\",\n\t\t\t\t\tviewAs: {\n\t\t\t\t\t\tname: \"sha\",\n\t\t\t\t\t},\n\t\t\t\t\tviewAsFilter(player) {\n\t\t\t\t\t\treturn player.countCards(\"hes\", card => !lib.skill.qunxiamrfz.getUntapped(player).includes(get.suit(card))) > 0;\n\t\t\t\t\t},\n\t\t\t\t\tprompt: \"将一张本轮未使用的花色的牌当杀使用\",\n\t\t\t\t\tcheck(card) {\n\t\t\t\t\t\tconst val = get.value(card);\n\t\t\t\t\t\treturn 5 - val;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tai: {\n\t\t\t\tdirectHit_ai: true,\n\t\t\t\t// @ts-ignore\n\t\t\t\tskillTagFilter(player, tag, arg) {\n\t\t\t\t\treturn arg && arg.card && !player.storage.qunxiamrfz.includes(get.suit(arg.card));\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t},\n};\n"],"names":["player","event","trigger","card","result","target","cards","i","moved","targets"],"mappings":"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"}