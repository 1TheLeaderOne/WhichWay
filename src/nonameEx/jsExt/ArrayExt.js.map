{"version":3,"file":"ArrayExt.js","sources":["../../../../../../../packages/extension/WhichWay/src/nonameEx/jsExt/ArrayExt.js"],"sourcesContent":["export class ArrayExt extends Array {\r\n\t/**\r\n\t * 判断两个数组是否相等\r\n\t * @param { Array } arr\r\n\t * @returns { boolean } \r\n\t */\r\n\tisEquip(arr) {\r\n\t\tif (this.length !== arr.length) return false;\r\n\t\tfor (let i = 0; i < this.length; i++) {\r\n\t\t\tif (this[i] !== arr[i]) return false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/**\r\n\t * 异步串行遍历数组，对每个元素执行 async 回调（一个接一个地 await）。\r\n\t * @param {(value: any, index: number, array: any[]) => Promise<void>} callback - 异步回调函数\r\n\t * @param {any} [thisArg] - 回调中 `this` 的值（可选）\r\n\t * @returns {Promise<void>}\r\n\t */\r\n\tasync asyncForEach(callback, thisArg) {\r\n\t\tfor (let i = 0; i < this.length; i++) {\r\n\t\t\tawait callback.call(thisArg, this[i], i, this);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @deprecated\r\n\t */\r\n\tadd2() {\r\n\t\tfor (var i = 0; i < arguments.length; i++) {\r\n\t\t\tthis.push(arguments[i]);\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * @deprecated\r\n\t */\r\n\trandomGet2(n) {\r\n\t\treturn this.randomGets(n);\r\n\t}\r\n\r\n\tisSubset(superset) {\r\n\t\treturn this.every(element => superset.includes(element));\r\n\t}\r\n\r\n\t/**\r\n\t * 在数组中插入元素\r\n\t *\r\n\t * @param {*} target - 目标元素或索引位置\r\n\t * @param {*} element - 要插入的元素\r\n\t * @param {boolean} [isAfter=true] - 是否插入到目标元素之后，默认为true\r\n\t * @param {boolean} [fix=true] - 是否直接修改原数组，默认为true\r\n\t * @param {boolean} [byIndex=false] - 是否按索引查找目标位置，默认为false\r\n\t * @returns {Array} 返回修改后的数组或新数组\r\n\t *\r\n\t * @description\r\n\t * 该方法允许在数组的指定位置插入元素，支持按值查找或按索引定位。\r\n\t * 当byIndex为true时，target被视为索引；否则target被视为要查找的元素值。\r\n\t * 支持负数索引，-1表示最后一个元素，-2表示倒数第二个元素，以此类推。\r\n\t *\r\n\t * @example\r\n\t * // 按值查找插入\r\n\t * let arr = [1, 2, 4];\r\n\t * arr.insert(2, 3); // 在元素2之后插入3，结果为[1, 2, 3, 4]\r\n\t *\r\n\t * @example\r\n\t * // 按索引插入\r\n\t * let arr = [1, 2, 4];\r\n\t * arr.insert(1, 3, true, true, true); // 在索引1之后插入3，结果为[1, 2, 3, 4]\r\n\t *\r\n\t * @example\r\n\t * // 在开头插入（不修改原数组）\r\n\t * let arr = [2, 3, 4];\r\n\t * let newArr = arr.insert(2, 1, false, false); // 在元素2之前插入1，返回新数组[1, 2, 3, 4]\r\n\t *\r\n\t * @example\r\n\t * // 使用负数索引\r\n\t * let arr = [1, 2, 4];\r\n\t * arr.insert(-1, 3, true, true, true); // 在倒数第一个元素之后插入3，结果为[1, 2, 4, 3]\r\n\t */\r\n\tinsert(target, element, isAfter = true, fix = true, byIndex = false) {\r\n\t\tlet newArray = fix ? this : deepClone(this);\r\n\r\n\t\tif (byIndex) {\r\n\t\t\tif (typeof target === \"number\" && target >= -newArray.length - 1 && target <= newArray.length) {\r\n\t\t\t\tlet index = target < 0 ? newArray.length + target + 1 : target;\r\n\t\t\t\tlet insertIndex = isAfter ? index + 1 : index;\r\n\t\t\t\tnewArray.splice(insertIndex, 0, element);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tlet index = newArray.indexOf(target);\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\tlet insertIndex = isAfter ? index + 1 : index;\r\n\t\t\t\tnewArray.splice(insertIndex, 0, element);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn fix ? this : newArray;\r\n\r\n\t\tfunction deepClone(obj) {\r\n\t\t\tif (obj === null || typeof obj !== \"object\") {\r\n\t\t\t\treturn obj;\r\n\t\t\t}\r\n\r\n\t\t\tif (obj instanceof Date) {\r\n\t\t\t\treturn new Date(obj.getTime());\r\n\t\t\t}\r\n\r\n\t\t\tif (obj instanceof Array) {\r\n\t\t\t\treturn obj.map(item => deepClone(item));\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof obj === \"object\") {\r\n\t\t\t\tconst clonedObj = {};\r\n\t\t\t\tfor (let key in obj) {\r\n\t\t\t\t\tif (obj[key]) {\r\n\t\t\t\t\t\tclonedObj[key] = deepClone(obj[key]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn clonedObj;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// export const arrayExtWhither = patchPrototypeWhitherHelm(ArrayExt, Array.prototype, Array.prototype);\r\n"],"names":[],"mappings":"AAAO,MAAM,iBAAiB,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMnC,QAAQ,KAAK;AACZ,QAAI,KAAK,WAAW,IAAI,OAAQ,QAAO;AACvC,aAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK;AACrC,UAAI,KAAK,CAAC,MAAM,IAAI,CAAC,EAAG,QAAO;AAAA,IAChC;AACA,WAAO;AAAA,EACR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,MAAM,aAAa,UAAU,SAAS;AACrC,aAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK;AACrC,YAAM,SAAS,KAAK,SAAS,KAAK,CAAC,GAAG,GAAG,IAAI;AAAA,IAC9C;AAAA,EACD;AAAA;AAAA;AAAA;AAAA,EAKA,OAAO;AACN,aAAS,IAAI,GAAG,IAAI,UAAU,QAAQ,KAAK;AAC1C,WAAK,KAAK,UAAU,CAAC,CAAC;AAAA,IACvB;AACA,WAAO;AAAA,EACR;AAAA;AAAA;AAAA;AAAA,EAKA,WAAW,GAAG;AACb,WAAO,KAAK,WAAW,CAAC;AAAA,EACzB;AAAA,EAEA,SAAS,UAAU;AAClB,WAAO,KAAK,MAAM,aAAW,SAAS,SAAS,OAAO,CAAC;AAAA,EACxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAqCA,OAAO,QAAQ,SAAS,UAAU,MAAM,MAAM,MAAM,UAAU,OAAO;AACpE,QAAI,WAAW,MAAM,OAAO,UAAU,IAAI;AAE1C,QAAI,SAAS;AACZ,UAAI,OAAO,WAAW,YAAY,UAAU,CAAC,SAAS,SAAS,KAAK,UAAU,SAAS,QAAQ;AAC9F,YAAI,QAAQ,SAAS,IAAI,SAAS,SAAS,SAAS,IAAI;AACxD,YAAI,cAAc,UAAU,QAAQ,IAAI;AACxC,iBAAS,OAAO,aAAa,GAAG,OAAO;AAAA,MACxC;AAAA,IACD,OAAO;AACN,UAAI,QAAQ,SAAS,QAAQ,MAAM;AACnC,UAAI,UAAU,IAAI;AACjB,YAAI,cAAc,UAAU,QAAQ,IAAI;AACxC,iBAAS,OAAO,aAAa,GAAG,OAAO;AAAA,MACxC;AAAA,IACD;AAEA,WAAO,MAAM,OAAO;AAEpB,aAAS,UAAU,KAAK;AACvB,UAAI,QAAQ,QAAQ,OAAO,QAAQ,UAAU;AAC5C,eAAO;AAAA,MACR;AAEA,UAAI,eAAe,MAAM;AACxB,eAAO,IAAI,KAAK,IAAI,QAAO,CAAE;AAAA,MAC9B;AAEA,UAAI,eAAe,OAAO;AACzB,eAAO,IAAI,IAAI,UAAQ,UAAU,IAAI,CAAC;AAAA,MACvC;AAEA,UAAI,OAAO,QAAQ,UAAU;AAC5B,cAAM,YAAY,CAAA;AAClB,iBAAS,OAAO,KAAK;AACpB,cAAI,IAAI,GAAG,GAAG;AACb,sBAAU,GAAG,IAAI,UAAU,IAAI,GAAG,CAAC;AAAA,UACpC;AAAA,QACD;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,EACD;AACD;"}