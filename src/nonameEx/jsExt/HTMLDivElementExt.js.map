{"version":3,"file":"HTMLDivElementExt.js","sources":["../../../../../../../packages/extension/WhichWay/src/nonameEx/jsExt/HTMLDivElementExt.js"],"sourcesContent":["export class HTMLDivElementExt extends HTMLDivElement {\r\n\t/**\r\n\t * 当HTMLDivElement被移除时触发的回调方法\r\n\t * @param {Function} callback - 元素被移除时执行的回调函数\r\n\t * @returns {Function} 返回一个可以手动取消监听的方法\r\n\t */\r\n\t//@ts-ignore\r\n\tonRemoved(callback) {\r\n\t\tif (typeof callback !== 'function') {\r\n\t\t\tthrow new TypeError('Callback must be a function');\r\n\t\t}\r\n\r\n\t\tconst element = this;\r\n\t\tlet observer;\r\n\r\n\t\tconst checkAndTrigger = () => {\r\n\t\t\tif (!document.body.contains(element)) {\r\n\t\t\t\tobserver.disconnect();\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t}, 10);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tobserver = new MutationObserver((mutations) => {\r\n\t\t\tcheckAndTrigger();\r\n\t\t});\r\n\r\n\t\tobserver.observe(document.documentElement, {\r\n\t\t\tchildList: true,\r\n\t\t\tsubtree: true,\r\n\t\t});\r\n\r\n\t\tif (!document.body.contains(element)) {\r\n\t\t\tobserver.disconnect();\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tcallback();\r\n\t\t\t}, 10);\r\n\t\t\treturn () => {};\r\n\t\t}\r\n\r\n\t\treturn () => {\r\n\t\t\tobserver?.disconnect();\r\n\t\t};\r\n\t}\r\n}\r\n\r\n// export const HTMLDivElementExtWhitherHelm = patchPrototypeWhitherHelm(HTMLDivElementExt, HTMLDivElement.prototype);\r\n"],"names":[],"mappings":"AAAO,MAAM,0BAA0B,eAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOrD,UAAU,UAAU;AACnB,QAAI,OAAO,aAAa,YAAY;AACnC,YAAM,IAAI,UAAU,6BAA6B;AAAA,IAClD;AAEA,UAAM,UAAU;AAChB,QAAI;AAEJ,UAAM,kBAAkB,MAAM;AAC7B,UAAI,CAAC,SAAS,KAAK,SAAS,OAAO,GAAG;AACrC,iBAAS,WAAU;AACnB,mBAAW,MAAM;AAChB;QACD,GAAG,EAAE;AAAA,MACN;AAAA,IACD;AAEA,eAAW,IAAI,iBAAiB,CAAC,cAAc;AAC9C;IACD,CAAC;AAED,aAAS,QAAQ,SAAS,iBAAiB;AAAA,MAC1C,WAAW;AAAA,MACX,SAAS;AAAA,IACZ,CAAG;AAED,QAAI,CAAC,SAAS,KAAK,SAAS,OAAO,GAAG;AACrC,eAAS,WAAU;AACnB,iBAAW,MAAM;AAChB;MACD,GAAG,EAAE;AACL,aAAO,MAAM;AAAA,MAAC;AAAA,IACf;AAEA,WAAO,MAAM;AACZ,gBAAU,WAAU;AAAA,IACrB;AAAA,EACD;AACD;"}