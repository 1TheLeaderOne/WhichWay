{"version":3,"file":"HTMLDivElementExt.js","sources":["../../../../../../../packages/extension/WhichWay/src/nonameEx/jsExt/HTMLDivElementExt.js"],"sourcesContent":["export class HTMLDivElementExt extends HTMLDivElement {\n\t/**\n\t * 当HTMLDivElement被移除时触发的回调方法\n\t * @param {Function} callback - 元素被移除时执行的回调函数\n\t * @returns {Function} 返回一个可以手动取消监听的方法\n\t */\n\t//@ts-ignore\n\tonRemoved(callback) {\n\t\tif (typeof callback !== 'function') {\n\t\t\tthrow new TypeError('Callback must be a function');\n\t\t}\n\n\t\tconst element = this;\n\t\tlet observer;\n\n\t\tconst checkAndTrigger = () => {\n\t\t\tif (!document.body.contains(element)) {\n\t\t\t\tobserver.disconnect();\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tcallback();\n\t\t\t\t}, 10);\n\t\t\t}\n\t\t};\n\n\t\tobserver = new MutationObserver((mutations) => {\n\t\t\tcheckAndTrigger();\n\t\t});\n\n\t\tobserver.observe(document.documentElement, {\n\t\t\tchildList: true,\n\t\t\tsubtree: true,\n\t\t});\n\n\t\tif (!document.body.contains(element)) {\n\t\t\tobserver.disconnect();\n\t\t\tsetTimeout(() => {\n\t\t\t\tcallback();\n\t\t\t}, 10);\n\t\t\treturn () => {};\n\t\t}\n\n\t\treturn () => {\n\t\t\tobserver?.disconnect();\n\t\t};\n\t}\n}\n\n// export const HTMLDivElementExtWhitherHelm = patchPrototypeWhitherHelm(HTMLDivElementExt, HTMLDivElement.prototype);\n"],"names":[],"mappings":"AAAO,MAAM,0BAA0B,eAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOrD,UAAU,UAAU;AACnB,QAAI,OAAO,aAAa,YAAY;AACnC,YAAM,IAAI,UAAU,6BAA6B;AAAA,IAClD;AAEA,UAAM,UAAU;AAChB,QAAI;AAEJ,UAAM,kBAAkB,MAAM;AAC7B,UAAI,CAAC,SAAS,KAAK,SAAS,OAAO,GAAG;AACrC,iBAAS,WAAU;AACnB,mBAAW,MAAM;AAChB,mBAAQ;AAAA,QACT,GAAG,EAAE;AAAA,MACN;AAAA,IACD;AAEA,eAAW,IAAI,iBAAiB,CAAC,cAAc;AAC9C,sBAAe;AAAA,IAChB,CAAC;AAED,aAAS,QAAQ,SAAS,iBAAiB;AAAA,MAC1C,WAAW;AAAA,MACX,SAAS;AAAA,IACZ,CAAG;AAED,QAAI,CAAC,SAAS,KAAK,SAAS,OAAO,GAAG;AACrC,eAAS,WAAU;AACnB,iBAAW,MAAM;AAChB,iBAAQ;AAAA,MACT,GAAG,EAAE;AACL,aAAO,MAAM;AAAA,MAAC;AAAA,IACf;AAEA,WAAO,MAAM;AACZ,gBAAU,WAAU;AAAA,IACrB;AAAA,EACD;AACD;"}