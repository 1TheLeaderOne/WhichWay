{"version":3,"file":"index.js","sources":["../../../../../../packages/extension/WhichWay/src/nonameEx/index.js"],"sourcesContent":["import { lib, game, ui, get, ai, _status, Game, Get } from \"noname\";\r\nimport { ContentExt } from \"./library/element/content.js\";\r\nimport { PlayerExt } from \"./library/element/player.js\";\r\nimport { CardExt } from \"./library/element/card.js\";\r\nimport { GameExt } from \"./game/index.js\";\r\nimport { GetExt } from \"./get/index.js\";\r\nimport { GameEventExt } from \"./library/element/gameEvent.js\";\r\nimport { onBeforeContent } from \"../hooks/index.js\";\r\nimport { skillCustomFunc } from \"./custom/skill.ts\";\r\nimport { ArrayExt } from \"./jsExt/ArrayExt.js\";\r\nimport { HTMLDivElementExt } from \"./jsExt/HTMLDivElementExt.js\";\r\nimport { weinaData } from \"./custom/weina.js\";\r\n\r\n\r\nwindow.whichWaySave.weinaData = weinaData;\r\n\r\nwindow.whichWay.nonameEx ??= {};\r\nconst nonameEx = window.whichWay.nonameEx;\r\n/**\r\n * 拓展的一些函数,这些函数只会在写武将的时候用到\r\n */\r\nnonameEx[\"customFuc\"] = {\r\n\tskill: skillCustomFunc,\r\n};\r\n\r\n/**\r\n * 这一坨都要废弃,至于为什么没有废弃,因为我懒得改了\r\n * @deprecated\r\n */\r\n\r\nnonameEx.jsExt ??= {};\r\nnonameEx[\"ArrayExt\"] = patchPrototypeWhitherHelm(ArrayExt, Array.prototype, Array.prototype)\r\nnonameEx[\"HTMLDivElementExt\"] = patchPrototypeWhitherHelm(HTMLDivElementExt, HTMLDivElement.prototype)\r\n\r\nonBeforeContent({\r\n\tname: \"WhichWayNonameEx\",\r\n\tfn: async () => {\r\n\t\t// nonameEx[\"CardExt\"] = patchPrototypeWhitherHelm(CardExt, Card.prototype);\r\n\t\t// nonameEx[\"PlayerExt\"] = patchPrototypeWhitherHelm(PlayerExt, lib.element.player.prototype);\r\n\t\tnonameEx[\"GameExt\"] = patchPrototypeWhitherHelm(GameExt, Game.prototype);\r\n\t\tnonameEx[\"GetExt\"] = patchPrototypeWhitherHelm(GetExt, Get.prototype);\r\n\t\tnonameEx[\"GameEventExt\"] = patchPrototypeWhitherHelm(GameEventExt, lib.element.GameEvent.prototype);\r\n\r\n\t\tnonameEx[\"ContentExt\"] = ContentExt;\r\n\t\tObject.assign(lib.element.content, ContentExt);\r\n\r\n\t\tnonameEx[\"CardExt\"] = new CardExt();\r\n\t\tObject.assign(lib.element.card, nonameEx[\"CardExt\"]);\r\n\r\n\t\tnonameEx[\"PlayerExt\"] = new PlayerExt();\r\n\t\tObject.assign(lib.element.player, nonameEx[\"PlayerExt\"]);\r\n\r\n\t\tawait import(\"./custom/override.js\");\r\n\t},\r\n});\r\n\r\nfunction patchPrototypeWhitherHelm(ExtensionClass, NativePrototype, BasePrototype) {\r\n\tBasePrototype = BasePrototype || Object.getPrototypeOf(NativePrototype);\r\n\tconst descriptors = Object.getOwnPropertyDescriptors(ExtensionClass.prototype);\r\n\tconst injectedMethods = {};\r\n\r\n\tfor (const [key, descriptor] of Object.entries(descriptors)) {\r\n\t\tif (key === \"constructor\") continue;\r\n\r\n\t\tif (typeof descriptor.value !== \"function\") continue;\r\n\r\n\t\tif (key in BasePrototype) continue;\r\n\r\n\t\tObject.defineProperty(NativePrototype, key, {\r\n\t\t\t...descriptor,\r\n\t\t\tenumerable: false,\r\n\t\t\tconfigurable: true,\r\n\t\t\twritable: true,\r\n\t\t});\r\n\r\n\t\tinjectedMethods[key] = descriptor.value;\r\n\t}\r\n\r\n\treturn {\r\n\t\tinjected: injectedMethods,\r\n\t\tcount: Object.keys(injectedMethods).length,\r\n\t\ttarget: NativePrototype,\r\n\t\tsource: ExtensionClass,\r\n\t\tbase: BasePrototype,\r\n\t\ttimestamp: Date.now(),\r\n\t};\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAcA,OAAO,aAAa,YAAY;AAEhC,OAAO,SAAS,aAAa;AAC7B,MAAM,WAAW,OAAO,SAAS;AAIjC,SAAS,WAAW,IAAI;AAAA,EACvB,OAAO;AACR;AAOA,SAAS,UAAU,CAAA;AACnB,SAAS,UAAU,IAAI,0BAA0B,UAAU,MAAM,WAAW,MAAM,SAAS;AAC3F,SAAS,mBAAmB,IAAI,0BAA0B,mBAAmB,eAAe,SAAS;AAErG,gBAAgB;AAAA,EACf,MAAM;AAAA,EACN,IAAI,YAAY;AAGf,aAAS,SAAS,IAAI,0BAA0B,SAAS,KAAK,SAAS;AACvE,aAAS,QAAQ,IAAI,0BAA0B,QAAQ,IAAI,SAAS;AACpE,aAAS,cAAc,IAAI,0BAA0B,cAAc,IAAI,QAAQ,UAAU,SAAS;AAElG,aAAS,YAAY,IAAI;AACzB,WAAO,OAAO,IAAI,QAAQ,SAAS,UAAU;AAE7C,aAAS,SAAS,IAAI,IAAI;AAC1B,WAAO,OAAO,IAAI,QAAQ,MAAM,SAAS,SAAS,CAAC;AAEnD,aAAS,WAAW,IAAI,IAAI;AAC5B,WAAO,OAAO,IAAI,QAAQ,QAAQ,SAAS,WAAW,CAAC;AAEvD,UAAM,OAAO,sBAAsB;AAAA,EACpC;AACD,CAAC;AAED,SAAS,0BAA0B,gBAAgB,iBAAiB,eAAe;AAClF,kBAAgB,iBAAiB,OAAO,eAAe,eAAe;AACtE,QAAM,cAAc,OAAO,0BAA0B,eAAe,SAAS;AAC7E,QAAM,kBAAkB,CAAA;AAExB,aAAW,CAAC,KAAK,UAAU,KAAK,OAAO,QAAQ,WAAW,GAAG;AAC5D,QAAI,QAAQ,cAAe;AAE3B,QAAI,OAAO,WAAW,UAAU,WAAY;AAE5C,QAAI,OAAO,cAAe;AAE1B,WAAO,eAAe,iBAAiB,KAAK;AAAA,MAC3C,GAAG;AAAA,MACH,YAAY;AAAA,MACZ,cAAc;AAAA,MACd,UAAU;AAAA,IACb,CAAG;AAED,oBAAgB,GAAG,IAAI,WAAW;AAAA,EACnC;AAEA,SAAO;AAAA,IACN,UAAU;AAAA,IACV,OAAO,OAAO,KAAK,eAAe,EAAE;AAAA,IACpC,QAAQ;AAAA,IACR,QAAQ;AAAA,IACR,MAAM;AAAA,IACN,WAAW,KAAK,IAAG;AAAA,EACrB;AACA;"}