{"version":3,"file":"player.js","sources":["../../../../../../../../packages/extension/WhichWay/src/nonameEx/library/element/player.js"],"sourcesContent":["import { lib, game, ui, get, ai, _status } from \"noname\";\r\n\r\nexport class PlayerExt extends lib.element.Player {\r\n\t/**\r\n\t * 移除手牌中所有的（驶舰之向）提示\r\n\t * @param { string } id 删除指定id的描述，不填删除所有\r\n\t */\r\n\tremovePromptSJZX(id){\r\n\t\tlet cards = this.getCards(\"h\");\r\n\t\tcards.forEach(card=>card.removePromptSJZX(id));\r\n\t}\r\n\r\n\t/**\r\n\t * 设置某一个技能的使用次数\r\n\t * @param { number } num 清除次数\r\n\t * @param { string } skill 技能名  \r\n\t */\r\n\tsetSkillCount(skill,num){\r\n\t\tif(!this.getSkills().includes(skill)){\r\n\t\t\tconsole.warn(`${get.translation(this)}(${this.name}) 没有技能 ${skill}`)\r\n\t\t}\r\n\r\n\t\tif(this.getStat(\"skill\")?.[skill]){ \r\n\t\t\tthis.getStat(\"skill\")[skill] += num;\r\n\t\t\t//@ts-ignore\r\n\t\t\tif(typeof this.stat.allSkills === \"number\") this.stat.allSkills += num;\r\n\t\t}\r\n\r\n\t\tif(typeof this.storage?.counttrigger?.[skill] === \"number\"){\r\n\t\t\tthis.storage.counttrigger[skill] += num;\r\n\t\t}\r\n\t}\r\n\r\n\t//@ts-ignore\r\n\tchooseCardHand(choose) {\r\n\t\tvar next = game.createEvent(\"chooseCardHand\");\r\n\t\t//@ts-ignore\r\n\t\tnext.player = this;\r\n\t\tif (arguments.length == 1 && get.is.object(choose)) {\r\n\t\t\tfor (var i in choose) {\r\n\t\t\t\tnext[i] = choose[i];\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t//@ts-ignore\r\n\t\t\tfor (var i = 0; i < arguments.length; i++) {\r\n\t\t\t\tif(Array.isArray(arguments[i])){\r\n\t\t\t\t\tnext.cards = arguments[i];\r\n\t\t\t\t}\r\n\t\t\t\telse if (typeof arguments[i] == \"number\") {\r\n\t\t\t\t\tnext.selectCard = [arguments[i], arguments[i]];\r\n\t\t\t\t} else if (get.itemtype(arguments[i]) == \"select\") {\r\n\t\t\t\t\tnext.selectCard = arguments[i];\r\n\t\t\t\t} else if (typeof arguments[i] == \"boolean\") {\r\n\t\t\t\t\tnext.forced = arguments[i];\r\n\t\t\t\t} else if (get.itemtype(arguments[i]) == \"position\") {\r\n\t\t\t\t\tnext.position = arguments[i];\r\n\t\t\t\t} else if (typeof arguments[i] == \"function\") {\r\n\t\t\t\t\tif (next.filterCard) {\r\n\t\t\t\t\t\tnext.ai = arguments[i];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnext.filterCard = arguments[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (typeof arguments[i] == \"object\" && arguments[i]) {\r\n\t\t\t\t\tnext.filterCard = get.filter(arguments[i]);\r\n\t\t\t\t} else if (arguments[i] == \"glow_result\") {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tnext.glow_result = true;\r\n\t\t\t\t} else if (arguments[i] == \"allowChooseAll\") {\r\n\t\t\t\t\tnext.allowChooseAll = true;\r\n\t\t\t\t} else if (typeof arguments[i] == \"string\") {\r\n\t\t\t\t\tget.evtprompt(next, arguments[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (next.filterCard == undefined) {\r\n\t\t\tnext.filterCard = lib.filter.all;\r\n\t\t}\r\n\t\tif (next.selectCard == undefined) {\r\n\t\t\tnext.selectCard = [1, 1];\r\n\t\t}\r\n\t\tif (next.ai == undefined) {\r\n\t\t\tnext.ai = get.unuseful3;\r\n\t\t}\r\n\t\t//@ts-ignore\r\n\t\tnext.autochoose = function () {\r\n\t\t\tif (!this.forced) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (typeof this.selectCard == \"function\") {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (this.complexCard || this.complexSelect || this.filterOk) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (this.type === \"compare\") {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar cards = this.player.getCards(this.position);\r\n\t\t\tif (cards.some(card => !this.filterCard(card, this.player, this))) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn get.select(this.selectCard)[0] >= this.player.countCards(this.position);\r\n\t\t};\r\n\t\t//@ts-ignore\r\n\t\tnext.setContent(\"chooseCardHand\");\r\n\t\tnext._args = Array.from(arguments);\r\n\t\treturn next;\r\n\t}\r\n\r\n\t/**\r\n\t * 显示提示\r\n\t * @param {string} str 显示的内容\r\n\t * @param {string} nature 颜色\r\n\t * @param {boolean} [clear=false] 是否清除原内容\r\n\t */\r\n\tshowPrompt(str, nature, clear = false) {\r\n\t\tlet node;\r\n\t\tif(clear === true) {\r\n\t\t\tif(this.node.prompt){\r\n\t\t\t\tthis.node.prompt.remove();\r\n\t\t\t\tdelete this.node.prompt;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (this.node.prompt) {\r\n\t\t\tnode = this.node.prompt;\r\n\t\t\tnode.innerHTML = node.innerHTML;\r\n\t\t} else {\r\n\t\t\tnode = ui.create.div(\"promptCharacterSJZX\", this);\r\n\t\t\tthis.node.prompt = node;\r\n\t\t\tui.refresh(node);\r\n\t\t}\r\n\t\tnode.classList.add(\"promptCharacterSJZX\");\r\n\t\tnode.classList.add(\"hiddenSJZX\");\r\n\t\tnode.innerHTML = node.innerHTML + str;\r\n\t\tnode.dataset.nature = nature || \"soil\";\r\n\r\n\t\t/**\r\n\t\t * @param {HTMLElement} container - 要调整字体大小的元素。\r\n\t\t * @description 调整字体大小，直到元素内容完全显示在容器中。\r\n\t\t */\r\n\t\tconst adjustFontSizeForLines = function (container) {\r\n\t\t\tif (!container) return;\r\n\r\n\t\t\tconst lines = container.querySelectorAll(\".promptTextSJZX\");\r\n\t\t\tconst containerWidth = container.clientWidth;\r\n\r\n\t\t\tlines.forEach(line => {\r\n\t\t\t\tlet fontSize = parseFloat(window.getComputedStyle(line).fontSize);\r\n\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\tconst isOverflowing = () => line.offsetWidth > containerWidth - 10;\r\n\r\n\t\t\t\twhile (isOverflowing() && fontSize > 12) {\r\n\t\t\t\t\tfontSize -= 1;\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tline.style.fontSize = `${fontSize}px`;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tadjustFontSizeForLines(node);\r\n\r\n\t\trequestAnimationFrame(() => {\r\n\t\t\tnode.classList.remove(\"hiddenSJZX\");\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * @description: 获取卡牌的使用次数，cardusable返回的是false则为0次\r\n\t * @param {string | VCard} card 牌\r\n\t * @param {boolean} pure 是否仅返回次数\r\n\t *\r\n\t * @return {number}\r\n\t */\r\n\tgetCardUsable2(card, pure) {\r\n\t\tvar player = this;\r\n\t\tif (typeof card == \"string\") {\r\n\t\t\tcard = { name: card };\r\n\t\t}\r\n\t\tcard = get.autoViewAs(card);\r\n\t\tvar num = get.info(card).usable;\r\n\t\tif (typeof num == \"function\") num = num(card, player);\r\n\t\tnum = game.checkMod(card, player, num, \"cardUsable\", player);\r\n\t\tif (typeof num === \"boolean\" && num === false) return 0;\r\n\t\tif (typeof num != \"number\") return Infinity;\r\n\t\tif (!pure && _status.currentPhase == player) {\r\n\t\t\treturn num - player.countUsed(card);\r\n\t\t}\r\n\t\treturn num;\r\n\t}\r\n\r\n\t/**\r\n\t * @description: 是否满足某个应变条件\r\n\t * @param {string | 'kongchao' | 'canqu' | 'zhuzhan' | 'fujia' } conditional 条件\r\n\t * @param {GameEvent} event 事件\r\n\t *\r\n\t * @return {boolean}\r\n\t */\r\n\tsatisfyYingbian(conditional, event = get.event()) {\r\n\t\tconst newConditions = new Map([...lib.yingbian.condition.simple, ...lib.yingbian.condition.complex]);\r\n\t\tif (typeof conditional !== \"string\") throw new TypeError(\"The parameter type is incorrect\");\r\n\t\tif (!Array.from(newConditions.keys()).includes(conditional)) throw new Error(\"The conditional does not exist\");\r\n\t\tconst targetCondition = newConditions.get(conditional);\r\n\t\treturn event.forceYingbian === true ? true : targetCondition(event);\r\n\t}\r\n\r\n\t/**\r\n\t * @description: 重新隐匿\r\n\t * @param {boolean} noChange 是否不改变体力/体力上限\r\n\t * @return {void}\r\n\t */\r\n\tasync reUnseen(noChange) {\r\n\t\tvar player = this;\r\n\t\tvar name = player.name || player.name1;\r\n\t\tlet skillName = \"noChangeSJZX_mark\" + name;\r\n\t\tif (noChange != false) {\r\n\t\t\tlib.skill[skillName] = {\r\n\t\t\t\tcharlotte: true,\r\n\t\t\t\tmark: true,\r\n\t\t\t\tintro: {\r\n\t\t\t\t\tcontent: \"隐匿前体力值\",\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t\tlib.translate[skillName] = `${player.hp}/${player.maxHp}`;\r\n\t\t\tplayer.storage[skillName] = {\r\n\t\t\t\thp: player.hp,\r\n\t\t\t\tmaxHp: player.maxHp,\r\n\t\t\t};\r\n\t\t\tplayer.addTempSkill(skillName, { player: \"showCharacterAfter\" });\r\n\t\t\tplayer\r\n\t\t\t\t.when(\"showCharacterAfter\")\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tplayer.hp = hp;\r\n\t\t\t\t\tplayer.maxHp = maxHp;\r\n\t\t\t\t\tdelete player.storage[skillName];\r\n\t\t\t\t})\r\n\t\t\t\t.vars({\r\n\t\t\t\t\thp: player.hp,\r\n\t\t\t\t\tmaxHp: player.maxHp,\r\n\t\t\t\t\tskillName: skillName,\r\n\t\t\t\t});\r\n\t\t\t// .emb({ firstDo: true });\r\n\t\t}\r\n\t\tif (name && lib.character[name]) {\r\n\t\t\tplayer.storage.rawHp = player.hp;\r\n\t\t\tplayer.storage.rawMaxHp = player.maxHp;\r\n\t\t\tplayer.hp = 1;\r\n\t\t\tplayer.maxHp = 1;\r\n\t\t\tplayer.update();\r\n\t\t\tvar skills = lib.character[name][3];\r\n\t\t\tif (player.name2) {\r\n\t\t\t\tfor (var i of lib.character[player.name2][3]) {\r\n\t\t\t\t\tskills.add(i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < skills.length; i++) {\r\n\t\t\t\tif (!lib.translate[skills[i] + \"_info\"]) {\r\n\t\t\t\t\tskills.splice(i--, 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (var i of skills) {\r\n\t\t\t\tplayer.removeSkill(i);\r\n\t\t\t}\r\n\t\t\tif (!player.hiddenSkills) player.hiddenSkills = [];\r\n\t\t\tplayer.hiddenSkills.addArray(skills);\r\n\t\t\tplayer.classList.add(\"unseen\");\r\n\t\t\tif (player.name2) player.classList.add(\"unseen2\");\r\n\t\t\tplayer.name = \"unknown\";\r\n\t\t\tif (!player.node.name_seat && !_status.video) {\r\n\t\t\t\tplayer.node.name_seat = ui.create.div(\".name.name_seat\", get.verticalStr(get.translation(player.name)), player);\r\n\t\t\t\tplayer.node.name_seat.dataset.nature = get.groupnature(player.group);\r\n\t\t\t}\r\n\t\t\tplayer.sex = \"male\";\r\n\t\t\tplayer.storage.nohp = true;\r\n\t\t\tplayer.node.hp.hide();\r\n\t\t\tplayer.update();\r\n\t\t}\r\n\t\tif (noChange != false) {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tlet text = document.querySelector(\".mark-text.small-text\");\r\n\t\t\t\tif (text && text.textContent) text.textContent = lib.translate[skillName];\r\n\t\t\t}, 500);\r\n\t\t}\r\n\t}\r\n\r\n\tadjustHandCardTo(num) {\r\n\t\tif (typeof num !== \"number\") return console.error(\"ERROR:num must be number!\");\r\n\t\tlet differ = this.countCards(\"h\") - num;\r\n\t\tif (differ > 0) this.chooseToDiscard(true, `请弃置${get.cnNumber(this.countCards(\"h\") - num)}张牌`, differ);\r\n\t\telse if (differ < 0) this.draw(Math.abs(differ));\r\n\t}\r\n\r\n\tcanUseCardAtt(card, isfriend, distance) {\r\n\t\tif (distance === undefined) distance = true;\r\n\t\tif (isfriend === undefined) isfriend = true;\r\n\t\treturn game.hasPlayer(current => {\r\n\t\t\tvar att = get.attitude(current, this);\r\n\t\t\treturn this.canUse(card, current, distance) && (isfriend == true ? att > 0 : att < 0);\r\n\t\t});\r\n\t}\r\n\r\n\tgetNumberInRange() {\r\n\t\tvar num = 0,\r\n\t\t\tplayers = game.filterPlayer();\r\n\t\tfor (var i = 0; i < players.length; i++) {\r\n\t\t\tif (this.inRange(players[i])) {\r\n\t\t\t\tnum++;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn num;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} mark\r\n\t * @param {string} path\r\n\t * @param {boolean} bool\r\n\t * @description 改变标记图片\r\n\t */\r\n\tchangeMarkImage(mark, path, bool = false) {\r\n\t\tif (bool) path = 'url(\"' + path + '\")';\r\n\t\telse path = 'url(\"extension/驶舰之向/image/orther/' + path + '.png\")';\r\n\t\tif (this.marks[mark]) {\r\n\t\t\tthis.marks[mark].style.backgroundImage = path;\r\n\t\t}\r\n\t}\r\n\r\n\trecastCount() {\r\n\t\tif (!this.storage._recastGain || typeof this.storage._recastGain != \"number\") return 0;\r\n\t\treturn this.storage._recastGain;\r\n\t}\r\n\r\n\tisAction() {\r\n\t\tvar history = this.actionHistory;\r\n\t\tfor (var i = history.length - 1; i >= 0; i--) {\r\n\t\t\tif (history[i].isMe) return true;\r\n\t\t\tif (history[i].isRound) break;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tremoveAllmark(str, bool = true) {\r\n\t\tthis.unmarkSkill(str);\r\n\t\tif (bool == false) {\r\n\t\t\treturn this.removeMark(str, this.countMark(str), false);\r\n\t\t} else return this.removeMark(str, this.countMark(str));\r\n\t}\r\n\r\n\tisTypeExpansions(str, type) {\r\n\t\tif (\r\n\t\t\tthis.getExpansions(str).filter(function (magic) {\r\n\t\t\t\treturn get.type2(magic) == type;\r\n\t\t\t}).length\r\n\t\t)\r\n\t\t\treturn true;\r\n\t\treturn false;\r\n\t}\r\n\r\n\tisPhase(phase, notmeisok) {\r\n\t\tif (!notmeisok && _status.currentPhase != this) return false;\r\n\t\treturn _status.event.name == phase || _status.event.getParent(phase).name == phase;\r\n\t}\r\n\r\n\tcanUseToAnyone(card, distance = true, includeme = true) {\r\n\t\tif (typeof card == \"string\") card = { name: card, isCard: true };\r\n\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\tif (includeme == false && game.players[i] == this) continue;\r\n\t\t\tif (distance != false) {\r\n\t\t\t\tif (this.canUse(card, game.players[i], false)) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (this.canUse(card, game.players[i])) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tisMaxHandCardLimit(equal) {\r\n\t\tvar nh = this.getHandcardLimit();\r\n\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\tif (game.players[i].isOut() || game.players[i] == this) continue;\r\n\t\t\tif (equal) {\r\n\t\t\t\tif (game.players[i].getHandcardLimit() >= nh) return false;\r\n\t\t\t} else {\r\n\t\t\t\tif (game.players[i].getHandcardLimit() > nh) return false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tisMinHandCardLimit(equal) {\r\n\t\tvar nh = this.getHandcardLimit();\r\n\t\tfor (var i = 0; i < game.players.length; i++) {\r\n\t\t\tif (game.players[i].isOut() || game.players[i] == this) continue;\r\n\t\t\tif (equal) {\r\n\t\t\t\tif (game.players[i].getHandcardLimit() <= nh) return false;\r\n\t\t\t} else {\r\n\t\t\t\tif (game.players[i].getHandcardLimit() < nh) return false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tgetSkillsList(disable, tag) {\r\n\t\tif (disable !== true) disable = false;\r\n\t\tif (typeof tag === \"string\") tag = [tag];\r\n\t\tlet player = this;\r\n\t\tvar list = [];\r\n\t\tvar listm = [];\r\n\t\tvar listv = [];\r\n\t\tif (player.name1 != undefined) listm = lib.character[player.name1][3];\r\n\t\telse listm = lib.character[player.name][3];\r\n\t\tif (player.name2 != undefined) listv = lib.character[player.name2][3];\r\n\t\tlistm = listm.concat(listv);\r\n\t\tvar func = function (skill) {\r\n\t\t\tvar info = get.info(skill);\r\n\t\t\tif (!info || info.charlotte) return false;\r\n\t\t\tif (Array.isArray(tag)) {\r\n\t\t\t\tfor (var i of tag) {\r\n\t\t\t\t\tif (info[i]) return false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t};\r\n\t\tfor (var i = 0; i < listm.length; i++) {\r\n\t\t\tif (func(listm[i])) list.add(listm[i]);\r\n\t\t}\r\n\t\tif (player.disabledSkills && disable) {\r\n\t\t\tfor (var key in player.disabledSkills) {\r\n\t\t\t\tlist.remove(key);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn list;\r\n\t}\r\n};"],"names":["i"],"mappings":"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"}