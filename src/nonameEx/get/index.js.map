{"version":3,"file":"index.js","sources":["../../../../../../../packages/extension/WhichWay/src/nonameEx/get/index.js"],"sourcesContent":["import { lib, game, ui, get, ai, _status, Get } from \"noname\";\n\nexport class GetExt extends Get {\n\t/**\n\t * 获取此牌的目标数\n\t * @param { VCard | string } card\n\t * @returns {number}\n\t */\n\ttargetCounts(card){\n\t\t//@ts-ignore\n\t\tlet name = card?.name;\n\t\tif(typeof card === \"string\") name = card;\n\t\telse if(card === undefined) return 0;\n\n\t\tlet info = lib.card[name];\n\t\tif (info.notarget) {\n\t\t\treturn 0;\n\t\t}\n\t\tif (info.selectTarget !== undefined) {\n\t\t\tif (Array.isArray(info.selectTarget)) {\n\t\t\t\treturn Math.max(info.selectTarget);\n\t\t\t}\n\t\t\telse if(info.selectTarget === -1 && info.toself){\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn info.selectTarget === -1 ? Infinity : info.selectTarget;\n\t\t\t}\n\t\t}\n\t\treturn info.filterTarget ? 1 : 0;\n\t}\n\n\t/**\n\t * @description: 判断该牌是否为单一目标\n\t * @param {Card | string} card\n\t *\n\t * @return {boolean}\n\t */\n\tisSingle(card){\n\t\tif(typeof card === \"string\") card = {name:card};\n\t\tlet info = get.info(card);\n\n\t\treturn !info.notarget && info.selectTarget && info.selectTarget === 1;\n\t}\n\n\tisView(card) {\n\t\tif (Array.isArray(card)) {\n\t\t\tfor (var i of card) {\n\t\t\t\tthis.isView(i);\n\t\t\t}\n\t\t}\n\t\telse if (card && get.is.object(card)) {\n\t\t\tif (!card.cards || !card.cards[0]) return true;\n\t\t\tif (card.cards.length > 1) return true;\n\t\t\tif (card.name != card.cards[0].name) return true;\n\t\t\treturn false;\n\t\t}\n\t\telse {\n\t\t\tthrow new Error(\n\t\t\t\t`The first parameter of type must be Array or VCard!`\n\t\t\t);\n\t\t}\n\t}\n\n\ttranPhase (input) {\n\t\tlet phase = [\n\t\t\t\"phaseZhunbei\",\n\t\t\t\"phaseJudge\",\n\t\t\t\"phaseDraw\",\n\t\t\t\"phaseUse\",\n\t\t\t\"phaseDiscard\",\n\t\t\t\"phaseJieshu\",\n\t\t];\n\t\tlet cn = [\n\t\t\t\"准备阶段\",\n\t\t\t\"判定阶段\",\n\t\t\t\"摸牌阶段\",\n\t\t\t\"出牌阶段\",\n\t\t\t\"弃牌阶段\",\n\t\t\t\"结束阶段\",\n\t\t];\n\n\t\tif (typeof input === \"string\") {\n\t\t\tfor (let i = 0; i < phase.length; i++) {\n\t\t\t\tif (input === phase[i]) {\n\t\t\t\t\treturn cn[i];\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (Array.isArray(input)) {\n\t\t\tlet result = [];\n\t\t\tinput.forEach((item) => {\n\t\t\t\tfor (let i = 0; i < phase.length; i++) {\n\t\t\t\t\tif (item === phase[i]) {\n\t\t\t\t\t\tresult.push(cn[i]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn result;\n\t\t}\n\t}\n\n\trandomNumberSJZX() {\n\t\tconst randomNumber = Math.floor(Math.random() * 1000000);\n\t\tconst paddedNumber = randomNumber.toString().padStart(6, \"0\");\n\t\treturn paddedNumber + \"SJZX\";\n\t}\n}"],"names":[],"mappings":";AAEO,MAAM,eAAe,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAM/B,aAAa,MAAK;AAEjB,QAAI,OAAO,MAAM;AACjB,QAAG,OAAO,SAAS,SAAU,QAAO;AAAA,aAC5B,SAAS,OAAW,QAAO;AAEnC,QAAI,OAAO,IAAI,KAAK,IAAI;AACxB,QAAI,KAAK,UAAU;AAClB,aAAO;AAAA,IACR;AACA,QAAI,KAAK,iBAAiB,QAAW;AACpC,UAAI,MAAM,QAAQ,KAAK,YAAY,GAAG;AACrC,eAAO,KAAK,IAAI,KAAK,YAAY;AAAA,MAClC,WACQ,KAAK,iBAAiB,MAAM,KAAK,QAAO;AAC/C,eAAO;AAAA,MACR,OACI;AACH,eAAO,KAAK,iBAAiB,KAAK,WAAW,KAAK;AAAA,MACnD;AAAA,IACD;AACA,WAAO,KAAK,eAAe,IAAI;AAAA,EAChC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,SAAS,MAAK;AACb,QAAG,OAAO,SAAS,SAAU,QAAO,EAAC,MAAK,KAAI;AAC9C,QAAI,OAAO,IAAI,KAAK,IAAI;AAExB,WAAO,CAAC,KAAK,YAAY,KAAK,gBAAgB,KAAK,iBAAiB;AAAA,EACrE;AAAA,EAEA,OAAO,MAAM;AACZ,QAAI,MAAM,QAAQ,IAAI,GAAG;AACxB,eAAS,KAAK,MAAM;AACnB,aAAK,OAAO,CAAC;AAAA,MACd;AAAA,IACD,WACS,QAAQ,IAAI,GAAG,OAAO,IAAI,GAAG;AACrC,UAAI,CAAC,KAAK,SAAS,CAAC,KAAK,MAAM,CAAC,EAAG,QAAO;AAC1C,UAAI,KAAK,MAAM,SAAS,EAAG,QAAO;AAClC,UAAI,KAAK,QAAQ,KAAK,MAAM,CAAC,EAAE,KAAM,QAAO;AAC5C,aAAO;AAAA,IACR,OACK;AACJ,YAAM,IAAI;AAAA,QACT;AAAA,MACJ;AAAA,IACE;AAAA,EACD;AAAA,EAEA,UAAW,OAAO;AACjB,QAAI,QAAQ;AAAA,MACX;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACH;AACE,QAAI,KAAK;AAAA,MACR;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACH;AAEE,QAAI,OAAO,UAAU,UAAU;AAC9B,eAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACtC,YAAI,UAAU,MAAM,CAAC,GAAG;AACvB,iBAAO,GAAG,CAAC;AAAA,QACZ;AAAA,MACD;AAAA,IACD,WAAW,MAAM,QAAQ,KAAK,GAAG;AAChC,UAAI,SAAS,CAAA;AACb,YAAM,QAAQ,CAAC,SAAS;AACvB,iBAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACtC,cAAI,SAAS,MAAM,CAAC,GAAG;AACtB,mBAAO,KAAK,GAAG,CAAC,CAAC;AACjB;AAAA,UACD;AAAA,QACD;AAAA,MACD,CAAC;AACD,aAAO;AAAA,IACR;AAAA,EACD;AAAA,EAEA,mBAAmB;AAClB,UAAM,eAAe,KAAK,MAAM,KAAK,OAAM,IAAK,GAAO;AACvD,UAAM,eAAe,aAAa,SAAQ,EAAG,SAAS,GAAG,GAAG;AAC5D,WAAO,eAAe;AAAA,EACvB;AACD;"}