{"version":3,"file":"index.js","sources":["../../../../../../../packages/extension/WhichWay/src/nonameEx/get/index.js"],"sourcesContent":["import { lib, game, ui, get, ai, _status, Get } from \"noname\";\r\n\r\nexport class GetExt extends Get {\r\n\t/**\r\n\t * 获取此牌的目标数\r\n\t * @param { VCard | string } card\r\n\t * @returns {number}\r\n\t */\r\n\ttargetCounts(card){\r\n\t\t//@ts-ignore\r\n\t\tlet name = card?.name;\r\n\t\tif(typeof card === \"string\") name = card;\r\n\t\telse if(card === undefined) return 0;\r\n\r\n\t\tlet info = lib.card[name];\r\n\t\tif (info.notarget) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\tif (info.selectTarget !== undefined) {\r\n\t\t\tif (Array.isArray(info.selectTarget)) {\r\n\t\t\t\treturn Math.max(info.selectTarget);\r\n\t\t\t}\r\n\t\t\telse if(info.selectTarget === -1 && info.toself){\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\treturn info.selectTarget === -1 ? Infinity : info.selectTarget;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn info.filterTarget ? 1 : 0;\r\n\t}\r\n\r\n\t/**\r\n\t * @description: 判断该牌是否为单一目标\r\n\t * @param {Card | string} card\r\n\t *\r\n\t * @return {boolean}\r\n\t */\r\n\tisSingle(card){\r\n\t\tif(typeof card === \"string\") card = {name:card};\r\n\t\tlet info = get.info(card);\r\n\r\n\t\treturn !info.notarget && info.selectTarget && info.selectTarget === 1;\r\n\t}\r\n\r\n\tisView(card) {\r\n\t\tif (Array.isArray(card)) {\r\n\t\t\tfor (var i of card) {\r\n\t\t\t\tthis.isView(i);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (card && get.is.object(card)) {\r\n\t\t\tif (!card.cards || !card.cards[0]) return true;\r\n\t\t\tif (card.cards.length > 1) return true;\r\n\t\t\tif (card.name != card.cards[0].name) return true;\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthrow new Error(\r\n\t\t\t\t`The first parameter of type must be Array or VCard!`\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\ttranPhase (input) {\r\n\t\tlet phase = [\r\n\t\t\t\"phaseZhunbei\",\r\n\t\t\t\"phaseJudge\",\r\n\t\t\t\"phaseDraw\",\r\n\t\t\t\"phaseUse\",\r\n\t\t\t\"phaseDiscard\",\r\n\t\t\t\"phaseJieshu\",\r\n\t\t];\r\n\t\tlet cn = [\r\n\t\t\t\"准备阶段\",\r\n\t\t\t\"判定阶段\",\r\n\t\t\t\"摸牌阶段\",\r\n\t\t\t\"出牌阶段\",\r\n\t\t\t\"弃牌阶段\",\r\n\t\t\t\"结束阶段\",\r\n\t\t];\r\n\r\n\t\tif (typeof input === \"string\") {\r\n\t\t\tfor (let i = 0; i < phase.length; i++) {\r\n\t\t\t\tif (input === phase[i]) {\r\n\t\t\t\t\treturn cn[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (Array.isArray(input)) {\r\n\t\t\tlet result = [];\r\n\t\t\tinput.forEach((item) => {\r\n\t\t\t\tfor (let i = 0; i < phase.length; i++) {\r\n\t\t\t\t\tif (item === phase[i]) {\r\n\t\t\t\t\t\tresult.push(cn[i]);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn result;\r\n\t\t}\r\n\t}\r\n\r\n\trandomNumberSJZX() {\r\n\t\tconst randomNumber = Math.floor(Math.random() * 1000000);\r\n\t\tconst paddedNumber = randomNumber.toString().padStart(6, \"0\");\r\n\t\treturn paddedNumber + \"SJZX\";\r\n\t}\r\n}"],"names":[],"mappings":";AAEO,MAAM,eAAe,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAM/B,aAAa,MAAK;AAEjB,QAAI,OAAO,MAAM;AACjB,QAAG,OAAO,SAAS,SAAU,QAAO;AAAA,aAC5B,SAAS,OAAW,QAAO;AAEnC,QAAI,OAAO,IAAI,KAAK,IAAI;AACxB,QAAI,KAAK,UAAU;AAClB,aAAO;AAAA,IACR;AACA,QAAI,KAAK,iBAAiB,QAAW;AACpC,UAAI,MAAM,QAAQ,KAAK,YAAY,GAAG;AACrC,eAAO,KAAK,IAAI,KAAK,YAAY;AAAA,MAClC,WACQ,KAAK,iBAAiB,MAAM,KAAK,QAAO;AAC/C,eAAO;AAAA,MACR,OACI;AACH,eAAO,KAAK,iBAAiB,KAAK,WAAW,KAAK;AAAA,MACnD;AAAA,IACD;AACA,WAAO,KAAK,eAAe,IAAI;AAAA,EAChC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,SAAS,MAAK;AACb,QAAG,OAAO,SAAS,SAAU,QAAO,EAAC,MAAK,KAAI;AAC9C,QAAI,OAAO,IAAI,KAAK,IAAI;AAExB,WAAO,CAAC,KAAK,YAAY,KAAK,gBAAgB,KAAK,iBAAiB;AAAA,EACrE;AAAA,EAEA,OAAO,MAAM;AACZ,QAAI,MAAM,QAAQ,IAAI,GAAG;AACxB,eAAS,KAAK,MAAM;AACnB,aAAK,OAAO,CAAC;AAAA,MACd;AAAA,IACD,WACS,QAAQ,IAAI,GAAG,OAAO,IAAI,GAAG;AACrC,UAAI,CAAC,KAAK,SAAS,CAAC,KAAK,MAAM,CAAC,EAAG,QAAO;AAC1C,UAAI,KAAK,MAAM,SAAS,EAAG,QAAO;AAClC,UAAI,KAAK,QAAQ,KAAK,MAAM,CAAC,EAAE,KAAM,QAAO;AAC5C,aAAO;AAAA,IACR,OACK;AACJ,YAAM,IAAI;AAAA,QACT;AAAA,MACJ;AAAA,IACE;AAAA,EACD;AAAA,EAEA,UAAW,OAAO;AACjB,QAAI,QAAQ;AAAA,MACX;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACH;AACE,QAAI,KAAK;AAAA,MACR;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACH;AAEE,QAAI,OAAO,UAAU,UAAU;AAC9B,eAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACtC,YAAI,UAAU,MAAM,CAAC,GAAG;AACvB,iBAAO,GAAG,CAAC;AAAA,QACZ;AAAA,MACD;AAAA,IACD,WAAW,MAAM,QAAQ,KAAK,GAAG;AAChC,UAAI,SAAS,CAAA;AACb,YAAM,QAAQ,CAAC,SAAS;AACvB,iBAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACtC,cAAI,SAAS,MAAM,CAAC,GAAG;AACtB,mBAAO,KAAK,GAAG,CAAC,CAAC;AACjB;AAAA,UACD;AAAA,QACD;AAAA,MACD,CAAC;AACD,aAAO;AAAA,IACR;AAAA,EACD;AAAA,EAEA,mBAAmB;AAClB,UAAM,eAAe,KAAK,MAAM,KAAK,OAAM,IAAK,GAAO;AACvD,UAAM,eAAe,aAAa,SAAQ,EAAG,SAAS,GAAG,GAAG;AAC5D,WAAO,eAAe;AAAA,EACvB;AACD;"}