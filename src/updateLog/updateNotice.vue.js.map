{"version":3,"file":"updateNotice.vue.js","sources":["../../../../../../packages/extension/WhichWay/src/updateLog/updateNotice.vue"],"sourcesContent":["<template>\r\n  <div class=\"update-notice\">\r\n    <div class=\"notice-header\">\r\n      <h2>È©∂Ëà∞‰πãÂêë v{{ version }} Êõ¥Êñ∞ÂÖ¨Âëä</h2>\r\n      <button @click=\"handleClose\" class=\"close-btn\">√ó</button>\r\n    </div>\r\n    \r\n    <div class=\"notice-content\">\r\n      <!-- ÊúÄ‰ΩéÈÄÇÈÖçÁâàÊú¨ÊèêÁ§∫ -->\r\n      <div class=\"update-section\">ÊúÄ‰ΩéÈÄÇÈÖçÁâàÊú¨: {{ over }}</div>\r\n\r\n      <!-- Êõ¥Êñ∞ÁÆÄ‰ªã -->\r\n      <section v-if=\"info.intro?.length\" class=\"update-section\">\r\n        <h3>üìù Êõ¥Êñ∞Ê¶ÇË¶Å</h3>\r\n        <ul class=\"intro-list\">\r\n          <li v-for=\"(item, index) in info.intro\" :key=\"index\">{{ item }}</li>\r\n        </ul>\r\n      </section>\r\n\r\n      <!-- Êñ∞Â¢ûÂπ≤Âëò -->\r\n      <section v-if=\"info.player?.length\" class=\"update-section\">\r\n        <h3>üë• Êñ∞Â¢ûÂπ≤Âëò</h3>\r\n        <div ref=\"playerContainer\" class=\"character-grid\"></div>\r\n      </section>\r\n\r\n      <!-- Êñ∞Â¢ûÂç°Áâá -->\r\n      <section v-if=\"info.cards?.length\" class=\"update-section\">\r\n        <h3>üÉè Êñ∞Â¢ûÂç°Áâá</h3>\r\n        <div ref=\"cardsContainer\" class=\"card-grid\"></div>\r\n      </section>\r\n\r\n      <!-- Á©∫Áä∂ÊÄÅÊèêÁ§∫ -->\r\n      <div v-if=\"!hasContent\" class=\"empty-state\">ÊöÇÊó†Êõ¥Êñ∞ÂÜÖÂÆπ</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, watch, onMounted, onBeforeUnmount, nextTick } from 'vue';\r\nimport { whichWayVersion } from '../version.js';\r\n\r\nlet version = whichWayVersion.ext;\r\nlet over = whichWayVersion.noname.over;\r\n\r\n// Props\r\nconst props = defineProps({\r\n  info: {\r\n    type: Object,\r\n    required: true,\r\n    default: () => ({ intro: [], player: [], cards: [] })\r\n  },\r\n  onClose: {\r\n    type: Function,\r\n    default: () => {}\r\n  }\r\n});\r\n\r\n// Emits\r\nconst emit = defineEmits(['close']);\r\n\r\n// Refs\r\nconst playerContainer = ref(null);\r\nconst cardsContainer = ref(null);\r\nconst hasRendered = ref(false);\r\n\r\n// Computed\r\nconst hasContent = computed(() => {\r\n  return props.info.intro?.length || props.info.player?.length || props.info.cards?.length;\r\n});\r\n\r\n// Methods\r\nconst clearContainer = (containerRef) => {\r\n  const container = containerRef.value;\r\n  if (!container) return;\r\n  while (container.firstChild) {\r\n    container.removeChild(container.firstChild);\r\n  }\r\n};\r\n\r\nconst renderPlayers = () => {\r\n  if (!playerContainer.value || !Array.isArray(props.info.player)) return;\r\n  clearContainer(playerContainer);\r\n\r\n  props.info.player.forEach(name => {\r\n    try {\r\n      if (typeof window?.ui?.create?.buttonPresets?.character !== 'function') {\r\n        console.warn(`[UpdateNotice] character API not available for: ${name}`);\r\n        return;\r\n      }\r\n      const btn = window.ui.create.buttonPresets.character(name);\r\n      //@ts-ignore\r\n      if (btn?.nodeType === 1) playerContainer.value.appendChild(btn);\r\n    } catch (e) {\r\n      console.error(`Ê∏≤ÊüìÂπ≤ÂëòÊåâÈíÆÂ§±Ë¥• (${name}):`, e);\r\n    }\r\n  });\r\n};\r\n\r\nconst renderCards = () => {\r\n  if (!cardsContainer.value || !Array.isArray(props.info.cards)) return;\r\n  clearContainer(cardsContainer);\r\n\r\n  props.info.cards.forEach(name => {\r\n    try {\r\n      if (typeof window?.ui?.create?.buttonPresets?.vcard !== 'function') {\r\n        console.warn(`[UpdateNotice] vcard API not available for: ${name}`);\r\n        return;\r\n      }\r\n      const btn = window.ui.create.buttonPresets.vcard(name);\r\n      //@ts-ignore\r\n      if (btn?.nodeType === 1) cardsContainer.value.appendChild(btn);\r\n    } catch (e) {\r\n      console.error(`Ê∏≤ÊüìÂç°ÁâáÊåâÈíÆÂ§±Ë¥• (${name}):`, e);\r\n    }\r\n  });\r\n};\r\n\r\nconst handleClose = () => {\r\n  emit('close');\r\n  if (typeof props.onClose === 'function') {\r\n    props.onClose();\r\n  }\r\n};\r\n\r\n// Lifecycle Hooks\r\nonMounted(() => {\r\n  nextTick(() => {\r\n    renderPlayers();\r\n    renderCards();\r\n    hasRendered.value = true;\r\n  });\r\n});\r\n\r\nonBeforeUnmount(() => {\r\n  clearContainer(playerContainer);\r\n  clearContainer(cardsContainer);\r\n});\r\n\r\n// Watchers\r\nwatch(\r\n  () => props.info.player,\r\n  () => {\r\n    renderPlayers();\r\n  },\r\n  { deep: true }\r\n);\r\n\r\nwatch(\r\n  () => props.info.cards,\r\n  () => {\r\n    renderCards();\r\n  },\r\n  { deep: true }\r\n);\r\n</script>\r\n<style scoped>\r\n.update-notice {\r\n\tbackground: linear-gradient(145deg, #1a1a2e, #16213e);\r\n\tcolor: #e6e6e6;\r\n\tborder-radius: 16px;\r\n\tbox-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\r\n\twidth: 70%;\r\n\theight: 60%;\r\n\tfont-family: \"Segoe UI\", \"Microsoft YaHei\", sans-serif;\r\n\toverflow: hidden;\r\n}\r\n.notice-header {\r\n\tposition: relative;\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tpadding: 16px 24px;\r\n\tbackground: rgba(30, 30, 50, 0.9);\r\n\tborder-bottom: 1px solid #4a4a7a;\r\n\theight: 10%;\r\n}\r\n.notice-header h2 {\r\n\tmargin: 0;\r\n\tfont-size: 1.5rem;\r\n\t-webkit-background-clip: text;\r\n\tbackground-clip: text;\r\n\tletter-spacing: 1px;\r\n}\r\n.close-btn {\r\n\tbackground: rgba(200, 50, 50, 0.2);\r\n\tcolor: #ff8888;\r\n\tborder: none;\r\n\twidth: 32px;\r\n\theight: 32px;\r\n\tborder-radius: 50%;\r\n\tfont-size: 1.5rem;\r\n\tcursor: pointer;\r\n\ttransition: all 0.2s;\r\n}\r\n.close-btn:hover {\r\n\tbackground: rgba(220, 40, 40, 0.4);\r\n\ttransform: scale(1.1);\r\n}\r\n.notice-content {\r\n\tposition: relative;\r\n\twidth: 90%;\r\n\theight: 70%;\r\n\tpadding: 20px;\r\n\toverflow-y: auto;\r\n}\r\n.update-section {\r\n  position: relative;\r\n\tmargin-bottom: 24px;\r\n\tpadding-bottom: 16px;\r\n\tborder-bottom: 1px dashed #3a3a6a;\r\n  min-width: 100%;\r\n}\r\n.update-section:last-child {\r\n\tborder-bottom: none;\r\n\tmargin-bottom: 0;\r\n\tpadding-bottom: 0;\r\n}\r\n.update-section h3 {\r\n\tcolor: #a1c4fd;\r\n\tmargin: 0 0 12px 0;\r\n\tfont-size: 1.3rem;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n}\r\n.update-section h3::before {\r\n\tcontent: \"\";\r\n\tdisplay: inline-block;\r\n\twidth: 8px;\r\n\theight: 16px;\r\n\tbackground: #ff9a9e;\r\n\tborder-radius: 2px;\r\n\tmargin-right: 10px;\r\n}\r\n.intro-list {\r\n\tpadding-left: 20px;\r\n\tline-height: 1.6;\r\n}\r\n.intro-list li {\r\n\tmargin-bottom: 8px;\r\n\tposition: relative;\r\n}\r\n.intro-list li::before {\r\n\tcontent: \"‚Ä¢\";\r\n\tcolor: #ff9a9e;\r\n\tfont-weight: bold;\r\n\tposition: absolute;\r\n\tleft: -15px;\r\n}\r\n.character-grid,\r\n.card-grid {\r\n\twidth: 100%;\r\n\tdisplay: grid;\r\n\tgrid-template-columns: repeat(auto-fill, minmax(80px, 1fr));\r\n\tgap: 12px;\r\n\tmargin-top: 8px;\r\n}\r\n.empty-state {\r\n\ttext-align: center;\r\n\tcolor: #7a7a9a;\r\n\tpadding: 20px;\r\n\tfont-style: italic;\r\n}\r\n/* ÊªöÂä®Êù°ÁæéÂåñ */\r\n.notice-content::-webkit-scrollbar {\r\n\twidth: 6px;\r\n}\r\n.notice-content::-webkit-scrollbar-track {\r\n\tbackground: #1e1e3a;\r\n\tborder-radius: 3px;\r\n}\r\n.notice-content::-webkit-scrollbar-thumb {\r\n\tbackground: #5a5a8a;\r\n\tborder-radius: 3px;\r\n}\r\n.notice-content::-webkit-scrollbar-thumb:hover {\r\n\tbackground: #7a7aad;\r\n}\r\n</style>\r\n"],"names":["_openBlock","_createElementBlock","_createElementVNode","_toDisplayString","_unref","_Fragment"],"mappings":"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"}