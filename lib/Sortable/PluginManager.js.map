{"version":3,"file":"PluginManager.js","sources":["../../../../../../packages/extension/WhichWay/lib/Sortable/PluginManager.js"],"sourcesContent":["let plugins = [];\n\nconst defaults = {\n\tinitializeByDefault: true\n};\n\nexport default {\n\tmount(plugin) {\n\t\t// Set default static properties\n\t\tfor (let option in defaults) {\n\t\t\tif (defaults.hasOwnProperty(option) && !(option in plugin)) {\n\t\t\t\tplugin[option] = defaults[option];\n\t\t\t}\n\t\t}\n\n\t\tplugins.forEach(p => {\n\t\t\tif (p.pluginName === plugin.pluginName) {\n\t\t\t\tthrow (`Sortable: Cannot mount plugin ${ plugin.pluginName } more than once`);\n\t\t\t}\n\t\t});\n\n\t\tplugins.push(plugin);\n\t},\n\tpluginEvent(eventName, sortable, evt) {\n\t\tthis.eventCanceled = false;\n\t\tevt.cancel = () => {\n\t\t\tthis.eventCanceled = true;\n\t\t};\n\t\tconst eventNameGlobal = eventName + 'Global';\n\t\tplugins.forEach(plugin => {\n\t\t\tif (!sortable[plugin.pluginName]) return;\n\t\t\t// Fire global events if it exists in this sortable\n\t\t\tif (\n\t\t\t\tsortable[plugin.pluginName][eventNameGlobal]\n\t\t\t) {\n\t\t\t\tsortable[plugin.pluginName][eventNameGlobal]({ sortable, ...evt });\n\t\t\t}\n\n\t\t\t// Only fire plugin event if plugin is enabled in this sortable,\n\t\t\t// and plugin has event defined\n\t\t\tif (\n\t\t\t\tsortable.options[plugin.pluginName] &&\n\t\t\t\tsortable[plugin.pluginName][eventName]\n\t\t\t) {\n\t\t\t\tsortable[plugin.pluginName][eventName]({ sortable, ...evt });\n\t\t\t}\n\t\t});\n\t},\n\tinitializePlugins(sortable, el, defaults, options) {\n\t\tplugins.forEach(plugin => {\n\t\t\tconst pluginName = plugin.pluginName;\n\t\t\tif (!sortable.options[pluginName] && !plugin.initializeByDefault) return;\n\n\t\t\tlet initialized = new plugin(sortable, el, sortable.options);\n\t\t\tinitialized.sortable = sortable;\n\t\t\tinitialized.options = sortable.options;\n\t\t\tsortable[pluginName] = initialized;\n\n\t\t\t// Add default options from plugin\n\t\t\tObject.assign(defaults, initialized.defaults);\n\t\t});\n\n\t\tfor (let option in sortable.options) {\n\t\t\tif (!sortable.options.hasOwnProperty(option)) continue;\n\t\t\tlet modified = this.modifyOption(sortable, option, sortable.options[option]);\n\t\t\tif (typeof(modified) !== 'undefined') {\n\t\t\t\tsortable.options[option] = modified;\n\t\t\t}\n\t\t}\n\t},\n\tgetEventProperties(name, sortable) {\n\t\tlet eventProperties = {};\n\t\tplugins.forEach(plugin => {\n\t\t\tif (typeof(plugin.eventProperties) !== 'function') return;\n\t\t\tObject.assign(eventProperties, plugin.eventProperties.call(sortable[plugin.pluginName], name));\n\t\t});\n\n\t\treturn eventProperties;\n\t},\n\tmodifyOption(sortable, name, value) {\n\t\tlet modifiedValue;\n\t\tplugins.forEach(plugin => {\n\t\t\t// Plugin must exist on the Sortable\n\t\t\tif (!sortable[plugin.pluginName]) return;\n\n\t\t\t// If static option listener exists for this option, call in the context of the Sortable's instance of this plugin\n\t\t\tif (plugin.optionListeners && typeof(plugin.optionListeners[name]) === 'function') {\n\t\t\t\tmodifiedValue = plugin.optionListeners[name].call(sortable[plugin.pluginName], value);\n\t\t\t}\n\t\t});\n\n\t\treturn modifiedValue;\n\t}\n};\n"],"names":["defaults"],"mappings":"AAAA,IAAI,UAAU,CAAA;AAEd,MAAM,WAAW;AAAA,EAChB,qBAAqB;AACtB;AAEA,MAAA,gBAAe;AAAA,EACd,MAAM,QAAQ;AAEb,aAAS,UAAU,UAAU;AAC5B,UAAI,SAAS,eAAe,MAAM,KAAK,EAAE,UAAU,SAAS;AAC3D,eAAO,MAAM,IAAI,SAAS,MAAM;AAAA,MACjC;AAAA,IACD;AAEA,YAAQ,QAAQ,OAAK;AACpB,UAAI,EAAE,eAAe,OAAO,YAAY;AACvC,cAAO,iCAAkC,OAAO,UAAU;AAAA,MAC3D;AAAA,IACD,CAAC;AAED,YAAQ,KAAK,MAAM;AAAA,EACpB;AAAA,EACA,YAAY,WAAW,UAAU,KAAK;AACrC,SAAK,gBAAgB;AACrB,QAAI,SAAS,MAAM;AAClB,WAAK,gBAAgB;AAAA,IACtB;AACA,UAAM,kBAAkB,YAAY;AACpC,YAAQ,QAAQ,YAAU;AACzB,UAAI,CAAC,SAAS,OAAO,UAAU,EAAG;AAElC,UACC,SAAS,OAAO,UAAU,EAAE,eAAe,GAC1C;AACD,iBAAS,OAAO,UAAU,EAAE,eAAe,EAAE,EAAE,UAAU,GAAG,KAAK;AAAA,MAClE;AAIA,UACC,SAAS,QAAQ,OAAO,UAAU,KAClC,SAAS,OAAO,UAAU,EAAE,SAAS,GACpC;AACD,iBAAS,OAAO,UAAU,EAAE,SAAS,EAAE,EAAE,UAAU,GAAG,KAAK;AAAA,MAC5D;AAAA,IACD,CAAC;AAAA,EACF;AAAA,EACA,kBAAkB,UAAU,IAAIA,WAAU,SAAS;AAClD,YAAQ,QAAQ,YAAU;AACzB,YAAM,aAAa,OAAO;AAC1B,UAAI,CAAC,SAAS,QAAQ,UAAU,KAAK,CAAC,OAAO,oBAAqB;AAElE,UAAI,cAAc,IAAI,OAAO,UAAU,IAAI,SAAS,OAAO;AAC3D,kBAAY,WAAW;AACvB,kBAAY,UAAU,SAAS;AAC/B,eAAS,UAAU,IAAI;AAGvB,aAAO,OAAOA,WAAU,YAAY,QAAQ;AAAA,IAC7C,CAAC;AAED,aAAS,UAAU,SAAS,SAAS;AACpC,UAAI,CAAC,SAAS,QAAQ,eAAe,MAAM,EAAG;AAC9C,UAAI,WAAW,KAAK,aAAa,UAAU,QAAQ,SAAS,QAAQ,MAAM,CAAC;AAC3E,UAAI,OAAO,aAAc,aAAa;AACrC,iBAAS,QAAQ,MAAM,IAAI;AAAA,MAC5B;AAAA,IACD;AAAA,EACD;AAAA,EACA,mBAAmB,MAAM,UAAU;AAClC,QAAI,kBAAkB,CAAA;AACtB,YAAQ,QAAQ,YAAU;AACzB,UAAI,OAAO,OAAO,oBAAqB,WAAY;AACnD,aAAO,OAAO,iBAAiB,OAAO,gBAAgB,KAAK,SAAS,OAAO,UAAU,GAAG,IAAI,CAAC;AAAA,IAC9F,CAAC;AAED,WAAO;AAAA,EACR;AAAA,EACA,aAAa,UAAU,MAAM,OAAO;AACnC,QAAI;AACJ,YAAQ,QAAQ,YAAU;AAEzB,UAAI,CAAC,SAAS,OAAO,UAAU,EAAG;AAGlC,UAAI,OAAO,mBAAmB,OAAO,OAAO,gBAAgB,IAAI,MAAO,YAAY;AAClF,wBAAgB,OAAO,gBAAgB,IAAI,EAAE,KAAK,SAAS,OAAO,UAAU,GAAG,KAAK;AAAA,MACrF;AAAA,IACD,CAAC;AAED,WAAO;AAAA,EACR;AACD;"}