{"version":3,"file":"PluginManager.js","sources":["../../../../../../packages/extension/WhichWay/lib/Sortable/PluginManager.js"],"sourcesContent":["let plugins = [];\r\n\r\nconst defaults = {\r\n\tinitializeByDefault: true\r\n};\r\n\r\nexport default {\r\n\tmount(plugin) {\r\n\t\t// Set default static properties\r\n\t\tfor (let option in defaults) {\r\n\t\t\tif (defaults.hasOwnProperty(option) && !(option in plugin)) {\r\n\t\t\t\tplugin[option] = defaults[option];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tplugins.forEach(p => {\r\n\t\t\tif (p.pluginName === plugin.pluginName) {\r\n\t\t\t\tthrow (`Sortable: Cannot mount plugin ${ plugin.pluginName } more than once`);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tplugins.push(plugin);\r\n\t},\r\n\tpluginEvent(eventName, sortable, evt) {\r\n\t\tthis.eventCanceled = false;\r\n\t\tevt.cancel = () => {\r\n\t\t\tthis.eventCanceled = true;\r\n\t\t};\r\n\t\tconst eventNameGlobal = eventName + 'Global';\r\n\t\tplugins.forEach(plugin => {\r\n\t\t\tif (!sortable[plugin.pluginName]) return;\r\n\t\t\t// Fire global events if it exists in this sortable\r\n\t\t\tif (\r\n\t\t\t\tsortable[plugin.pluginName][eventNameGlobal]\r\n\t\t\t) {\r\n\t\t\t\tsortable[plugin.pluginName][eventNameGlobal]({ sortable, ...evt });\r\n\t\t\t}\r\n\r\n\t\t\t// Only fire plugin event if plugin is enabled in this sortable,\r\n\t\t\t// and plugin has event defined\r\n\t\t\tif (\r\n\t\t\t\tsortable.options[plugin.pluginName] &&\r\n\t\t\t\tsortable[plugin.pluginName][eventName]\r\n\t\t\t) {\r\n\t\t\t\tsortable[plugin.pluginName][eventName]({ sortable, ...evt });\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tinitializePlugins(sortable, el, defaults, options) {\r\n\t\tplugins.forEach(plugin => {\r\n\t\t\tconst pluginName = plugin.pluginName;\r\n\t\t\tif (!sortable.options[pluginName] && !plugin.initializeByDefault) return;\r\n\r\n\t\t\tlet initialized = new plugin(sortable, el, sortable.options);\r\n\t\t\tinitialized.sortable = sortable;\r\n\t\t\tinitialized.options = sortable.options;\r\n\t\t\tsortable[pluginName] = initialized;\r\n\r\n\t\t\t// Add default options from plugin\r\n\t\t\tObject.assign(defaults, initialized.defaults);\r\n\t\t});\r\n\r\n\t\tfor (let option in sortable.options) {\r\n\t\t\tif (!sortable.options.hasOwnProperty(option)) continue;\r\n\t\t\tlet modified = this.modifyOption(sortable, option, sortable.options[option]);\r\n\t\t\tif (typeof(modified) !== 'undefined') {\r\n\t\t\t\tsortable.options[option] = modified;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetEventProperties(name, sortable) {\r\n\t\tlet eventProperties = {};\r\n\t\tplugins.forEach(plugin => {\r\n\t\t\tif (typeof(plugin.eventProperties) !== 'function') return;\r\n\t\t\tObject.assign(eventProperties, plugin.eventProperties.call(sortable[plugin.pluginName], name));\r\n\t\t});\r\n\r\n\t\treturn eventProperties;\r\n\t},\r\n\tmodifyOption(sortable, name, value) {\r\n\t\tlet modifiedValue;\r\n\t\tplugins.forEach(plugin => {\r\n\t\t\t// Plugin must exist on the Sortable\r\n\t\t\tif (!sortable[plugin.pluginName]) return;\r\n\r\n\t\t\t// If static option listener exists for this option, call in the context of the Sortable's instance of this plugin\r\n\t\t\tif (plugin.optionListeners && typeof(plugin.optionListeners[name]) === 'function') {\r\n\t\t\t\tmodifiedValue = plugin.optionListeners[name].call(sortable[plugin.pluginName], value);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn modifiedValue;\r\n\t}\r\n};\r\n"],"names":["defaults"],"mappings":"AAAA,IAAI,UAAU,CAAA;AAEd,MAAM,WAAW;AAAA,EAChB,qBAAqB;AACtB;AAEA,MAAA,gBAAe;AAAA,EACd,MAAM,QAAQ;AAEb,aAAS,UAAU,UAAU;AAC5B,UAAI,SAAS,eAAe,MAAM,KAAK,EAAE,UAAU,SAAS;AAC3D,eAAO,MAAM,IAAI,SAAS,MAAM;AAAA,MACjC;AAAA,IACD;AAEA,YAAQ,QAAQ,OAAK;AACpB,UAAI,EAAE,eAAe,OAAO,YAAY;AACvC,cAAO,iCAAkC,OAAO,UAAU;AAAA,MAC3D;AAAA,IACD,CAAC;AAED,YAAQ,KAAK,MAAM;AAAA,EACpB;AAAA,EACA,YAAY,WAAW,UAAU,KAAK;AACrC,SAAK,gBAAgB;AACrB,QAAI,SAAS,MAAM;AAClB,WAAK,gBAAgB;AAAA,IACtB;AACA,UAAM,kBAAkB,YAAY;AACpC,YAAQ,QAAQ,YAAU;AACzB,UAAI,CAAC,SAAS,OAAO,UAAU,EAAG;AAElC,UACC,SAAS,OAAO,UAAU,EAAE,eAAe,GAC1C;AACD,iBAAS,OAAO,UAAU,EAAE,eAAe,EAAE,EAAE,UAAU,GAAG,IAAG,CAAE;AAAA,MAClE;AAIA,UACC,SAAS,QAAQ,OAAO,UAAU,KAClC,SAAS,OAAO,UAAU,EAAE,SAAS,GACpC;AACD,iBAAS,OAAO,UAAU,EAAE,SAAS,EAAE,EAAE,UAAU,GAAG,IAAG,CAAE;AAAA,MAC5D;AAAA,IACD,CAAC;AAAA,EACF;AAAA,EACA,kBAAkB,UAAU,IAAIA,WAAU,SAAS;AAClD,YAAQ,QAAQ,YAAU;AACzB,YAAM,aAAa,OAAO;AAC1B,UAAI,CAAC,SAAS,QAAQ,UAAU,KAAK,CAAC,OAAO,oBAAqB;AAElE,UAAI,cAAc,IAAI,OAAO,UAAU,IAAI,SAAS,OAAO;AAC3D,kBAAY,WAAW;AACvB,kBAAY,UAAU,SAAS;AAC/B,eAAS,UAAU,IAAI;AAGvB,aAAO,OAAOA,WAAU,YAAY,QAAQ;AAAA,IAC7C,CAAC;AAED,aAAS,UAAU,SAAS,SAAS;AACpC,UAAI,CAAC,SAAS,QAAQ,eAAe,MAAM,EAAG;AAC9C,UAAI,WAAW,KAAK,aAAa,UAAU,QAAQ,SAAS,QAAQ,MAAM,CAAC;AAC3E,UAAI,OAAO,aAAc,aAAa;AACrC,iBAAS,QAAQ,MAAM,IAAI;AAAA,MAC5B;AAAA,IACD;AAAA,EACD;AAAA,EACA,mBAAmB,MAAM,UAAU;AAClC,QAAI,kBAAkB,CAAA;AACtB,YAAQ,QAAQ,YAAU;AACzB,UAAI,OAAO,OAAO,oBAAqB,WAAY;AACnD,aAAO,OAAO,iBAAiB,OAAO,gBAAgB,KAAK,SAAS,OAAO,UAAU,GAAG,IAAI,CAAC;AAAA,IAC9F,CAAC;AAED,WAAO;AAAA,EACR;AAAA,EACA,aAAa,UAAU,MAAM,OAAO;AACnC,QAAI;AACJ,YAAQ,QAAQ,YAAU;AAEzB,UAAI,CAAC,SAAS,OAAO,UAAU,EAAG;AAGlC,UAAI,OAAO,mBAAmB,OAAO,OAAO,gBAAgB,IAAI,MAAO,YAAY;AAClF,wBAAgB,OAAO,gBAAgB,IAAI,EAAE,KAAK,SAAS,OAAO,UAAU,GAAG,KAAK;AAAA,MACrF;AAAA,IACD,CAAC;AAED,WAAO;AAAA,EACR;AACD;"}