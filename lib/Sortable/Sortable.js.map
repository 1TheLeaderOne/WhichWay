{"version":3,"file":"Sortable.js","sources":["../../../../../../packages/extension/WhichWay/lib/Sortable/Sortable.js"],"sourcesContent":["/**!\r\n * Sortable\r\n * @author\tRubaXa   <trash@rubaxa.org>\r\n * @author\towenm    <owen23355@gmail.com>\r\n * @license MIT\r\n */\r\nimport { IE11OrLess, Edge, FireFox, Safari, IOS, ChromeForAndroid } from './BrowserInfo.js';\r\n\r\nimport AnimationStateManager from './Animation.js';\r\n\r\nimport PluginManager from './PluginManager.js';\r\n\r\nimport dispatchEvent from './EventDispatcher.js';\r\n\r\nimport {\r\n\ton,\r\n\toff,\r\n\tclosest,\r\n\ttoggleClass,\r\n\tcss,\r\n\tmatrix,\r\n\tfind,\r\n\tgetWindowScrollingElement,\r\n\tgetRect,\r\n\tisScrolledPast,\r\n\tgetChild,\r\n\tlastChild,\r\n\tindex,\r\n\tgetRelativeScrollOffset,\r\n\textend,\r\n\tthrottle,\r\n\tscrollBy,\r\n\tclone,\r\n\texpando,\r\n\tgetChildContainingRectFromElement,\r\n\tgetParentOrHost\r\n} from './utils.js';\r\n\r\n\r\nlet pluginEvent = function(eventName, sortable, { evt: originalEvent, ...data } = {}) {\r\n\tPluginManager.pluginEvent.bind(Sortable)(eventName, sortable, {\r\n\t\tdragEl,\r\n\t\tparentEl,\r\n\t\tghostEl,\r\n\t\trootEl,\r\n\t\tnextEl,\r\n\t\tlastDownEl,\r\n\t\tcloneEl,\r\n\t\tcloneHidden,\r\n\t\tdragStarted: moved,\r\n\t\tputSortable,\r\n\t\tactiveSortable: Sortable.active,\r\n\t\toriginalEvent,\r\n\r\n\t\toldIndex,\r\n\t\toldDraggableIndex,\r\n\t\tnewIndex,\r\n\t\tnewDraggableIndex,\r\n\r\n\t\thideGhostForTarget: _hideGhostForTarget,\r\n\t\tunhideGhostForTarget: _unhideGhostForTarget,\r\n\r\n\r\n\t\tcloneNowHidden() {\r\n\t\t\tcloneHidden = true;\r\n\t\t},\r\n\t\tcloneNowShown() {\r\n\t\t\tcloneHidden = false;\r\n\t\t},\r\n\r\n\t\tdispatchSortableEvent(name) {\r\n\t\t\t_dispatchEvent({ sortable, name, originalEvent });\r\n\t\t},\r\n\r\n\t\t...data\r\n\t});\r\n};\r\n\r\nfunction _dispatchEvent(info) {\r\n\tdispatchEvent({\r\n\t\tputSortable,\r\n\t\tcloneEl,\r\n\t\ttargetEl: dragEl,\r\n\t\trootEl,\r\n\t\toldIndex,\r\n\t\toldDraggableIndex,\r\n\t\tnewIndex,\r\n\t\tnewDraggableIndex,\r\n\t\t...info\r\n\t});\r\n}\r\n\r\n\r\nlet dragEl,\r\n\tparentEl,\r\n\tghostEl,\r\n\trootEl,\r\n\tnextEl,\r\n\tlastDownEl,\r\n\r\n\tcloneEl,\r\n\tcloneHidden,\r\n\r\n\toldIndex,\r\n\tnewIndex,\r\n\toldDraggableIndex,\r\n\tnewDraggableIndex,\r\n\r\n\tactiveGroup,\r\n\tputSortable,\r\n\r\n\tawaitingDragStarted = false,\r\n\tignoreNextClick = false,\r\n\tsortables = [],\r\n\r\n\ttapEvt,\r\n\ttouchEvt,\r\n\tlastDx,\r\n\tlastDy,\r\n\ttapDistanceLeft,\r\n\ttapDistanceTop,\r\n\r\n\tmoved,\r\n\r\n\tlastTarget,\r\n\tlastDirection,\r\n\tpastFirstInvertThresh = false,\r\n\tisCircumstantialInvert = false,\r\n\r\n\ttargetMoveDistance,\r\n\r\n\t// For positioning ghost absolutely\r\n\tghostRelativeParent,\r\n\tghostRelativeParentInitialScroll = [], // (left, top)\r\n\r\n\t_silent = false,\r\n\tsavedInputChecked = [];\r\n\r\n\t/** @const */\r\n\tconst documentExists = typeof document !== 'undefined',\r\n\r\n\tPositionGhostAbsolutely = IOS,\r\n\r\n\tCSSFloatProperty = Edge || IE11OrLess ? 'cssFloat' : 'float',\r\n\r\n\t// This will not pass for IE9, because IE9 DnD only works on anchors\r\n\tsupportDraggable = documentExists && !ChromeForAndroid && !IOS && ('draggable' in document.createElement('div')),\r\n\r\n\tsupportCssPointerEvents = (function() {\r\n\t\tif (!documentExists) return;\r\n\t\t// false when <= IE11\r\n\t\tif (IE11OrLess) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tlet el = document.createElement('x');\r\n\t\tel.style.cssText = 'pointer-events:auto';\r\n\t\treturn el.style.pointerEvents === 'auto';\r\n\t})(),\r\n\r\n\t_detectDirection = function(el, options) {\r\n\t\tlet elCSS = css(el),\r\n\t\t\telWidth = parseInt(elCSS.width)\r\n\t\t\t\t- parseInt(elCSS.paddingLeft)\r\n\t\t\t\t- parseInt(elCSS.paddingRight)\r\n\t\t\t\t- parseInt(elCSS.borderLeftWidth)\r\n\t\t\t\t- parseInt(elCSS.borderRightWidth),\r\n\t\t\tchild1 = getChild(el, 0, options),\r\n\t\t\tchild2 = getChild(el, 1, options),\r\n\t\t\tfirstChildCSS = child1 && css(child1),\r\n\t\t\tsecondChildCSS = child2 && css(child2),\r\n\t\t\tfirstChildWidth = firstChildCSS && parseInt(firstChildCSS.marginLeft) + parseInt(firstChildCSS.marginRight) + getRect(child1).width,\r\n\t\t\tsecondChildWidth = secondChildCSS && parseInt(secondChildCSS.marginLeft) + parseInt(secondChildCSS.marginRight) + getRect(child2).width;\r\n\r\n\t\tif (elCSS.display === 'flex') {\r\n\t\t\treturn elCSS.flexDirection === 'column' || elCSS.flexDirection === 'column-reverse'\r\n\t\t\t? 'vertical' : 'horizontal';\r\n\t\t}\r\n\r\n\t\tif (elCSS.display === 'grid') {\r\n\t\t\treturn elCSS.gridTemplateColumns.split(' ').length <= 1 ? 'vertical' : 'horizontal';\r\n\t\t}\r\n\r\n\t\tif (child1 && firstChildCSS.float && firstChildCSS.float !== 'none') {\r\n\t\t\tlet touchingSideChild2 = firstChildCSS.float === 'left' ? 'left' : 'right';\r\n\r\n\t\t\treturn child2 && (secondChildCSS.clear === 'both' || secondChildCSS.clear === touchingSideChild2) ?\r\n\t\t\t\t'vertical' : 'horizontal';\r\n\t\t}\r\n\r\n\t\treturn (child1 &&\r\n\t\t\t(\r\n\t\t\t\tfirstChildCSS.display === 'block' ||\r\n\t\t\t\tfirstChildCSS.display === 'flex' ||\r\n\t\t\t\tfirstChildCSS.display === 'table' ||\r\n\t\t\t\tfirstChildCSS.display === 'grid' ||\r\n\t\t\t\tfirstChildWidth >= elWidth &&\r\n\t\t\t\telCSS[CSSFloatProperty] === 'none' ||\r\n\t\t\t\tchild2 &&\r\n\t\t\t\telCSS[CSSFloatProperty] === 'none' &&\r\n\t\t\t\tfirstChildWidth + secondChildWidth > elWidth\r\n\t\t\t) ?\r\n\t\t\t'vertical' : 'horizontal'\r\n\t\t);\r\n\t},\r\n\r\n\t_dragElInRowColumn = function(dragRect, targetRect, vertical) {\r\n\t\tlet dragElS1Opp = vertical ? dragRect.left : dragRect.top,\r\n\t\t\tdragElS2Opp = vertical ? dragRect.right : dragRect.bottom,\r\n\t\t\tdragElOppLength = vertical ? dragRect.width : dragRect.height,\r\n\t\t\ttargetS1Opp = vertical ? targetRect.left : targetRect.top,\r\n\t\t\ttargetS2Opp = vertical ? targetRect.right : targetRect.bottom,\r\n\t\t\ttargetOppLength = vertical ? targetRect.width : targetRect.height;\r\n\r\n\t\treturn (\r\n\t\t\tdragElS1Opp === targetS1Opp ||\r\n\t\t\tdragElS2Opp === targetS2Opp ||\r\n\t\t\t(dragElS1Opp + dragElOppLength / 2) === (targetS1Opp + targetOppLength / 2)\r\n\t\t);\r\n\t},\r\n\r\n\t/**\r\n\t * Detects first nearest empty sortable to X and Y position using emptyInsertThreshold.\r\n\t * @param  {Number} x      X position\r\n\t * @param  {Number} y      Y position\r\n\t * @return {HTMLElement}   Element of the first found nearest Sortable\r\n\t */\r\n\t_detectNearestEmptySortable = function(x, y) {\r\n\t\tlet ret;\r\n\t\tsortables.some((sortable) => {\r\n\t\t\tconst threshold = sortable[expando].options.emptyInsertThreshold;\r\n\t\t\tif (!threshold || lastChild(sortable)) return;\r\n\r\n\t\t\tconst rect = getRect(sortable),\r\n\t\t\t\tinsideHorizontally = x >= (rect.left - threshold) && x <= (rect.right + threshold),\r\n\t\t\t\tinsideVertically = y >= (rect.top - threshold) && y <= (rect.bottom + threshold);\r\n\r\n\t\t\tif (insideHorizontally && insideVertically) {\r\n\t\t\t\treturn (ret = sortable);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn ret;\r\n\t},\r\n\r\n\t_prepareGroup = function (options) {\r\n\t\tfunction toFn(value, pull) {\r\n\t\t\treturn function(to, from, dragEl, evt) {\r\n\t\t\t\tlet sameGroup = to.options.group.name &&\r\n\t\t\t\t\t\t\t\tfrom.options.group.name &&\r\n\t\t\t\t\t\t\t\tto.options.group.name === from.options.group.name;\r\n\r\n\t\t\t\tif (value == null && (pull || sameGroup)) {\r\n\t\t\t\t\t// Default pull value\r\n\t\t\t\t\t// Default pull and put value if same group\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t} else if (value == null || value === false) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else if (pull && value === 'clone') {\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t} else if (typeof value === 'function') {\r\n\t\t\t\t\treturn toFn(value(to, from, dragEl, evt), pull)(to, from, dragEl, evt);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet otherGroup = (pull ? to : from).options.group.name;\r\n\r\n\t\t\t\t\treturn (value === true ||\r\n\t\t\t\t\t(typeof value === 'string' && value === otherGroup) ||\r\n\t\t\t\t\t(value.join && value.indexOf(otherGroup) > -1));\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tlet group = {};\r\n\t\tlet originalGroup = options.group;\r\n\r\n\t\tif (!originalGroup || typeof originalGroup != 'object') {\r\n\t\t\toriginalGroup = {name: originalGroup};\r\n\t\t}\r\n\r\n\t\tgroup.name = originalGroup.name;\r\n\t\tgroup.checkPull = toFn(originalGroup.pull, true);\r\n\t\tgroup.checkPut = toFn(originalGroup.put);\r\n\t\tgroup.revertClone = originalGroup.revertClone;\r\n\r\n\t\toptions.group = group;\r\n\t},\r\n\r\n\t_hideGhostForTarget = function() {\r\n\t\tif (!supportCssPointerEvents && ghostEl) {\r\n\t\t\tcss(ghostEl, 'display', 'none');\r\n\t\t}\r\n\t},\r\n\r\n\t_unhideGhostForTarget = function() {\r\n\t\tif (!supportCssPointerEvents && ghostEl) {\r\n\t\t\tcss(ghostEl, 'display', '');\r\n\t\t}\r\n\t};\r\n\r\n\r\n// #1184 fix - Prevent click event on fallback if dragged but item not changed position\r\nif (documentExists && !ChromeForAndroid) {\r\n\tdocument.addEventListener('click', function(evt) {\r\n\t\tif (ignoreNextClick) {\r\n\t\t\tevt.preventDefault();\r\n\t\t\tevt.stopPropagation && evt.stopPropagation();\r\n\t\t\tevt.stopImmediatePropagation && evt.stopImmediatePropagation();\r\n\t\t\tignoreNextClick = false;\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}, true);\r\n}\r\n\r\nlet nearestEmptyInsertDetectEvent = function(evt) {\r\n\tif (dragEl) {\r\n\t\tevt = evt.touches ? evt.touches[0] : evt;\r\n\t\tlet nearest = _detectNearestEmptySortable(evt.clientX, evt.clientY);\r\n\r\n\t\tif (nearest) {\r\n\t\t\t// Create imitation event\r\n\t\t\tlet event = {};\r\n\t\t\tfor (let i in evt) {\r\n\t\t\t\tif (evt.hasOwnProperty(i)) {\r\n\t\t\t\t\tevent[i] = evt[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tevent.target = event.rootEl = nearest;\r\n\t\t\tevent.preventDefault = void 0;\r\n\t\t\tevent.stopPropagation = void 0;\r\n\t\t\tnearest[expando]._onDragOver(event);\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\nlet _checkOutsideTargetEl = function(evt) {\r\n\tif (dragEl) {\r\n\t\tdragEl.parentNode[expando]._isOutsideThisEl(evt.target);\r\n\t}\r\n};\r\n\r\n\r\n/**\r\n * @class  Sortable\r\n * @param  {HTMLElement}  el\r\n * @param  {Object}       [options]\r\n */\r\nfunction Sortable(el, options) {\r\n\tif (!(el && el.nodeType && el.nodeType === 1)) {\r\n\t\tthrow `Sortable: \\`el\\` must be an HTMLElement, not ${ {}.toString.call(el) }`;\r\n\t}\r\n\r\n\tthis.el = el; // root element\r\n\tthis.options = options = Object.assign({}, options);\r\n\r\n\r\n\t// Export instance\r\n\tel[expando] = this;\r\n\r\n\tlet defaults = {\r\n\t\tgroup: null,\r\n\t\tsort: true,\r\n\t\tdisabled: false,\r\n\t\tstore: null,\r\n\t\thandle: null,\r\n\t\tdraggable: /^[uo]l$/i.test(el.nodeName) ? '>li' : '>*',\r\n\t\tswapThreshold: 1, // percentage; 0 <= x <= 1\r\n\t\tinvertSwap: false, // invert always\r\n\t\tinvertedSwapThreshold: null, // will be set to same as swapThreshold if default\r\n\t\tremoveCloneOnHide: true,\r\n\t\tdirection: function() {\r\n\t\t\treturn _detectDirection(el, this.options);\r\n\t\t},\r\n\t\tghostClass: 'sortable-ghost',\r\n\t\tchosenClass: 'sortable-chosen',\r\n\t\tdragClass: 'sortable-drag',\r\n\t\tignore: 'a, img',\r\n\t\tfilter: null,\r\n\t\tpreventOnFilter: true,\r\n\t\tanimation: 0,\r\n\t\teasing: null,\r\n\t\tsetData: function (dataTransfer, dragEl) {\r\n\t\t\tdataTransfer.setData('Text', dragEl.textContent);\r\n\t\t},\r\n\t\tdropBubble: false,\r\n\t\tdragoverBubble: false,\r\n\t\tdataIdAttr: 'data-id',\r\n\t\tdelay: 0,\r\n\t\tdelayOnTouchOnly: false,\r\n\t\ttouchStartThreshold: (Number.parseInt ? Number : window).parseInt(window.devicePixelRatio, 10) || 1,\r\n\t\tforceFallback: false,\r\n\t\tfallbackClass: 'sortable-fallback',\r\n\t\tfallbackOnBody: false,\r\n\t\tfallbackTolerance: 0,\r\n\t\tfallbackOffset: {x: 0, y: 0},\r\n\t\t// Disabled on Safari: #1571; Enabled on Safari IOS: #2244\r\n\t\tsupportPointer: Sortable.supportPointer !== false && ('PointerEvent' in window) && (!Safari || IOS),\r\n\t\temptyInsertThreshold: 5\r\n\t};\r\n\r\n\tPluginManager.initializePlugins(this, el, defaults);\r\n\r\n\t// Set default options\r\n\tfor (let name in defaults) {\r\n\t\t!(name in options) && (options[name] = defaults[name]);\r\n\t}\r\n\r\n\t_prepareGroup(options);\r\n\r\n\t// Bind all private methods\r\n\tfor (let fn in this) {\r\n\t\tif (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\r\n\t\t\tthis[fn] = this[fn].bind(this);\r\n\t\t}\r\n\t}\r\n\r\n\t// Setup drag mode\r\n\tthis.nativeDraggable = options.forceFallback ? false : supportDraggable;\r\n\r\n\tif (this.nativeDraggable) {\r\n\t\t// Touch start threshold cannot be greater than the native dragstart threshold\r\n\t\tthis.options.touchStartThreshold = 1;\r\n\t}\r\n\r\n\t// Bind events\r\n\tif (options.supportPointer) {\r\n\t\ton(el, 'pointerdown', this._onTapStart);\r\n\t} else {\r\n\t\ton(el, 'mousedown', this._onTapStart);\r\n\t\ton(el, 'touchstart', this._onTapStart);\r\n\t}\r\n\r\n\tif (this.nativeDraggable) {\r\n\t\ton(el, 'dragover', this);\r\n\t\ton(el, 'dragenter', this);\r\n\t}\r\n\r\n\tsortables.push(this.el);\r\n\r\n\t// Restore sorting\r\n\toptions.store && options.store.get && this.sort(options.store.get(this) || []);\r\n\r\n\t// Add animation state manager\r\n\tObject.assign(this, AnimationStateManager());\r\n}\r\n\r\nSortable.prototype = /** @lends Sortable.prototype */ {\r\n\tconstructor: Sortable,\r\n\r\n\t_isOutsideThisEl: function(target) {\r\n\t\tif (!this.el.contains(target) && target !== this.el) {\r\n\t\t\tlastTarget = null;\r\n\t\t}\r\n\t},\r\n\r\n\t_getDirection: function(evt, target) {\r\n\t\treturn (typeof this.options.direction === 'function') ? this.options.direction.call(this, evt, target, dragEl) : this.options.direction;\r\n\t},\r\n\r\n\t_onTapStart: function (/** Event|TouchEvent */evt) {\r\n\t\tif (!evt.cancelable) return;\r\n\t\tlet _this = this,\r\n\t\t\tel = this.el,\r\n\t\t\toptions = this.options,\r\n\t\t\tpreventOnFilter = options.preventOnFilter,\r\n\t\t\ttype = evt.type,\r\n\t\t\ttouch = (evt.touches && evt.touches[0]) || (evt.pointerType && evt.pointerType === 'touch' && evt),\r\n\t\t\ttarget = (touch || evt).target,\r\n\t\t\toriginalTarget = evt.target.shadowRoot && ((evt.path && evt.path[0]) || (evt.composedPath && evt.composedPath()[0])) || target,\r\n\t\t\tfilter = options.filter;\r\n\r\n\t\t_saveInputCheckedState(el);\r\n\r\n\r\n\t\t// Don't trigger start event when an element is been dragged, otherwise the evt.oldindex always wrong when set option.group.\r\n\t\tif (dragEl) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (/mousedown|pointerdown/.test(type) && evt.button !== 0 || options.disabled) {\r\n\t\t\treturn; // only left button and enabled\r\n\t\t}\r\n\r\n\t\t// cancel dnd if original target is content editable\r\n\t\tif (originalTarget.isContentEditable) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Safari ignores further event handling after mousedown\r\n\t\tif (!this.nativeDraggable && Safari && target && target.tagName.toUpperCase() === 'SELECT') {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttarget = closest(target, options.draggable, el, false);\r\n\r\n\r\n\t\tif (target && target.animated) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (lastDownEl === target) {\r\n\t\t\t// Ignoring duplicate `down`\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Get the index of the dragged element within its parent\r\n\t\toldIndex = index(target);\r\n\t\toldDraggableIndex = index(target, options.draggable);\r\n\r\n\t\t// Check filter\r\n\t\tif (typeof filter === 'function') {\r\n\t\t\tif (filter.call(this, evt, target, this)) {\r\n\t\t\t\t_dispatchEvent({\r\n\t\t\t\t\tsortable: _this,\r\n\t\t\t\t\trootEl: originalTarget,\r\n\t\t\t\t\tname: 'filter',\r\n\t\t\t\t\ttargetEl: target,\r\n\t\t\t\t\ttoEl: el,\r\n\t\t\t\t\tfromEl: el\r\n\t\t\t\t});\r\n\t\t\t\tpluginEvent('filter', _this, { evt });\r\n\t\t\t\tpreventOnFilter && evt.preventDefault();\r\n\t\t\t\treturn; // cancel dnd\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (filter) {\r\n\t\t\tfilter = filter.split(',').some(function (criteria) {\r\n\t\t\t\tcriteria = closest(originalTarget, criteria.trim(), el, false);\r\n\r\n\t\t\t\tif (criteria) {\r\n\t\t\t\t\t_dispatchEvent({\r\n\t\t\t\t\t\tsortable: _this,\r\n\t\t\t\t\t\trootEl: criteria,\r\n\t\t\t\t\t\tname: 'filter',\r\n\t\t\t\t\t\ttargetEl: target,\r\n\t\t\t\t\t\tfromEl: el,\r\n\t\t\t\t\t\ttoEl: el\r\n\t\t\t\t\t});\r\n\t\t\t\t\tpluginEvent('filter', _this, { evt });\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (filter) {\r\n\t\t\t\tpreventOnFilter && evt.preventDefault();\r\n\t\t\t\treturn; // cancel dnd\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (options.handle && !closest(originalTarget, options.handle, el, false)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Prepare `dragstart`\r\n\t\tthis._prepareDragStart(evt, touch, target);\r\n\t},\r\n\r\n\t_prepareDragStart: function (/** Event */evt, /** Touch */touch, /** HTMLElement */target) {\r\n\t\tlet _this = this,\r\n\t\t\tel = _this.el,\r\n\t\t\toptions = _this.options,\r\n\t\t\townerDocument = el.ownerDocument,\r\n\t\t\tdragStartFn;\r\n\r\n\t\tif (target && !dragEl && (target.parentNode === el)) {\r\n\t\t\tlet dragRect = getRect(target);\r\n\t\t\trootEl = el;\r\n\t\t\tdragEl = target;\r\n\t\t\tparentEl = dragEl.parentNode;\r\n\t\t\tnextEl = dragEl.nextSibling;\r\n\t\t\tlastDownEl = target;\r\n\t\t\tactiveGroup = options.group;\r\n\r\n\t\t\tSortable.dragged = dragEl;\r\n\r\n\t\t\ttapEvt = {\r\n\t\t\t\ttarget: dragEl,\r\n\t\t\t\tclientX: (touch || evt).clientX,\r\n\t\t\t\tclientY: (touch || evt).clientY\r\n\t\t\t};\r\n\r\n\t\t\ttapDistanceLeft = tapEvt.clientX - dragRect.left;\r\n\t\t\ttapDistanceTop = tapEvt.clientY - dragRect.top;\r\n\r\n\t\t\tthis._lastX = (touch || evt).clientX;\r\n\t\t\tthis._lastY = (touch || evt).clientY;\r\n\r\n\t\t\tdragEl.style['will-change'] = 'all';\r\n\r\n\t\t\tdragStartFn = function () {\r\n\t\t\t\tpluginEvent('delayEnded', _this, { evt });\r\n\t\t\t\tif (Sortable.eventCanceled) {\r\n\t\t\t\t\t_this._onDrop();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// Delayed drag has been triggered\r\n\t\t\t\t// we can re-enable the events: touchmove/mousemove\r\n\t\t\t\t_this._disableDelayedDragEvents();\r\n\r\n\t\t\t\tif (!FireFox && _this.nativeDraggable) {\r\n\t\t\t\t\tdragEl.draggable = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Bind the events: dragstart/dragend\r\n\t\t\t\t_this._triggerDragStart(evt, touch);\r\n\r\n\t\t\t\t// Drag start event\r\n\t\t\t\t_dispatchEvent({\r\n\t\t\t\t\tsortable: _this,\r\n\t\t\t\t\tname: 'choose',\r\n\t\t\t\t\toriginalEvent: evt\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Chosen item\r\n\t\t\t\ttoggleClass(dragEl, options.chosenClass, true);\r\n\t\t\t};\r\n\r\n\t\t\t// Disable \"draggable\"\r\n\t\t\toptions.ignore.split(',').forEach(function (criteria) {\r\n\t\t\t\tfind(dragEl, criteria.trim(), _disableDraggable);\r\n\t\t\t});\r\n\r\n\t\t\ton(ownerDocument, 'dragover', nearestEmptyInsertDetectEvent);\r\n\t\t\ton(ownerDocument, 'mousemove', nearestEmptyInsertDetectEvent);\r\n\t\t\ton(ownerDocument, 'touchmove', nearestEmptyInsertDetectEvent);\r\n\r\n\t\t\tif (options.supportPointer) {\r\n\t\t\t\ton(ownerDocument, 'pointerup', _this._onDrop);\r\n\t\t\t\t// Native D&D triggers pointercancel\r\n\t\t\t\t!this.nativeDraggable && on(ownerDocument, 'pointercancel', _this._onDrop);\r\n\t\t\t} else {\r\n\t\t\t\ton(ownerDocument, 'mouseup', _this._onDrop);\r\n\t\t\t\ton(ownerDocument, 'touchend', _this._onDrop);\r\n\t\t\t\ton(ownerDocument, 'touchcancel', _this._onDrop);\r\n\t\t\t}\r\n\r\n\t\t\t// Make dragEl draggable (must be before delay for FireFox)\r\n\t\t\tif (FireFox && this.nativeDraggable) {\r\n\t\t\t\tthis.options.touchStartThreshold = 4;\r\n\t\t\t\tdragEl.draggable = true;\r\n\t\t\t}\r\n\r\n\t\t\tpluginEvent('delayStart', this, { evt });\r\n\r\n\t\t\t// Delay is impossible for native DnD in Edge or IE\r\n\t\t\tif (options.delay && (!options.delayOnTouchOnly || touch) && (!this.nativeDraggable || !(Edge || IE11OrLess))) {\r\n\t\t\t\tif (Sortable.eventCanceled) {\r\n\t\t\t\t\tthis._onDrop();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// If the user moves the pointer or let go the click or touch\r\n\t\t\t\t// before the delay has been reached:\r\n\t\t\t\t// disable the delayed drag\r\n\t\t\t\tif (options.supportPointer) {\r\n\t\t\t\t\ton(ownerDocument, 'pointerup', _this._disableDelayedDrag);\r\n\t\t\t\t\ton(ownerDocument, 'pointercancel', _this._disableDelayedDrag);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ton(ownerDocument, 'mouseup', _this._disableDelayedDrag);\r\n\t\t\t\t\ton(ownerDocument, 'touchend', _this._disableDelayedDrag);\r\n\t\t\t\t\ton(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\r\n\t\t\t\t}\r\n\t\t\t\ton(ownerDocument, 'mousemove', _this._delayedDragTouchMoveHandler);\r\n\t\t\t\ton(ownerDocument, 'touchmove', _this._delayedDragTouchMoveHandler);\r\n\t\t\t\toptions.supportPointer && on(ownerDocument, 'pointermove', _this._delayedDragTouchMoveHandler);\r\n\r\n\t\t\t\t_this._dragStartTimer = setTimeout(dragStartFn, options.delay);\r\n\t\t\t} else {\r\n\t\t\t\tdragStartFn();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_delayedDragTouchMoveHandler: function (/** TouchEvent|PointerEvent **/e) {\r\n\t\tlet touch = e.touches ? e.touches[0] : e;\r\n\t\tif (Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY))\r\n\t\t\t\t>= Math.floor(this.options.touchStartThreshold / (this.nativeDraggable && window.devicePixelRatio || 1))\r\n\t\t) {\r\n\t\t\tthis._disableDelayedDrag();\r\n\t\t}\r\n\t},\r\n\r\n\t_disableDelayedDrag: function () {\r\n\t\tdragEl && _disableDraggable(dragEl);\r\n\t\tclearTimeout(this._dragStartTimer);\r\n\r\n\t\tthis._disableDelayedDragEvents();\r\n\t},\r\n\r\n\t_disableDelayedDragEvents: function () {\r\n\t\tlet ownerDocument = this.el.ownerDocument;\r\n\t\toff(ownerDocument, 'mouseup', this._disableDelayedDrag);\r\n\t\toff(ownerDocument, 'touchend', this._disableDelayedDrag);\r\n\t\toff(ownerDocument, 'touchcancel', this._disableDelayedDrag);\r\n\t\toff(ownerDocument, 'pointerup', this._disableDelayedDrag);\r\n\t\toff(ownerDocument, 'pointercancel', this._disableDelayedDrag);\r\n\t\toff(ownerDocument, 'mousemove', this._delayedDragTouchMoveHandler);\r\n\t\toff(ownerDocument, 'touchmove', this._delayedDragTouchMoveHandler);\r\n\t\toff(ownerDocument, 'pointermove', this._delayedDragTouchMoveHandler);\r\n\t},\r\n\r\n\t_triggerDragStart: function (/** Event */evt, /** Touch */touch) {\r\n\t\ttouch = touch || (evt.pointerType == 'touch' && evt);\r\n\r\n\t\tif (!this.nativeDraggable || touch) {\r\n\t\t\tif (this.options.supportPointer) {\r\n\t\t\t\ton(document, 'pointermove', this._onTouchMove);\r\n\t\t\t} else if (touch) {\r\n\t\t\t\ton(document, 'touchmove', this._onTouchMove);\r\n\t\t\t} else {\r\n\t\t\t\ton(document, 'mousemove', this._onTouchMove);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\ton(dragEl, 'dragend', this);\r\n\t\t\ton(rootEl, 'dragstart', this._onDragStart);\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\t\r\n\t\t\tif (document.selection) {\r\n\t\t\t\t_nextTick(() => {\r\n\t\t\t\t\tdocument.selection.empty();\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\twindow.getSelection().removeAllRanges();\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t}\r\n\t},\r\n\r\n\t_dragStarted: function (fallback, evt) {\r\n\t\tlet _this = this;\r\n\t\tawaitingDragStarted = false;\r\n\t\tif (rootEl && dragEl) {\r\n\t\t\tpluginEvent('dragStarted', this, { evt });\r\n\r\n\t\t\tif (this.nativeDraggable) {\r\n\t\t\t\ton(document, 'dragover', _checkOutsideTargetEl);\r\n\t\t\t}\r\n\t\t\tlet options = this.options;\r\n\r\n\t\t\t// Apply effect\r\n\t\t\t!fallback && toggleClass(dragEl, options.dragClass, false);\r\n\t\t\ttoggleClass(dragEl, options.ghostClass, true);\r\n\r\n\t\t\tSortable.active = this;\r\n\r\n\t\t\tfallback && this._appendGhost();\r\n\r\n\t\t\t// Drag start event\r\n\t\t\t_dispatchEvent({\r\n\t\t\t\tsortable: this,\r\n\t\t\t\tname: 'start',\r\n\t\t\t\toriginalEvent: evt\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis._nulling();\r\n\t\t}\r\n\t},\r\n\r\n\t_emulateDragOver: function () {\r\n\t\tif (touchEvt) {\r\n\t\t\tthis._lastX = touchEvt.clientX;\r\n\t\t\tthis._lastY = touchEvt.clientY;\r\n\r\n\t\t\t_hideGhostForTarget();\r\n\r\n\t\t\tlet target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\r\n\t\t\tlet parent = target;\r\n\r\n\t\t\twhile (target && target.shadowRoot) {\r\n\t\t\t\ttarget = target.shadowRoot.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\r\n\t\t\t\tif (target === parent) break;\r\n\t\t\t\tparent = target;\r\n\t\t\t}\r\n\r\n\t\t\tdragEl.parentNode[expando]._isOutsideThisEl(target);\r\n\r\n\t\t\tif (parent) {\r\n\t\t\t\tdo {\r\n\t\t\t\t\tif (parent[expando]) {\r\n\t\t\t\t\t\tlet inserted;\r\n\r\n\t\t\t\t\t\tinserted = parent[expando]._onDragOver({\r\n\t\t\t\t\t\t\tclientX: touchEvt.clientX,\r\n\t\t\t\t\t\t\tclientY: touchEvt.clientY,\r\n\t\t\t\t\t\t\ttarget: target,\r\n\t\t\t\t\t\t\trootEl: parent\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif (inserted && !this.options.dragoverBubble) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttarget = parent; // store last element\r\n\t\t\t\t}\r\n\t\t\t\t/* jshint boss:true */\r\n\t\t\t\twhile (parent = getParentOrHost(parent));\r\n\t\t\t}\r\n\r\n\t\t\t_unhideGhostForTarget();\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t_onTouchMove: function (/**TouchEvent*/evt) {\r\n\t\tif (tapEvt) {\r\n\t\t\tlet\toptions = this.options,\r\n\t\t\t\tfallbackTolerance = options.fallbackTolerance,\r\n\t\t\t\tfallbackOffset = options.fallbackOffset,\r\n\t\t\t\ttouch = evt.touches ? evt.touches[0] : evt,\r\n\t\t\t\tghostMatrix = ghostEl && matrix(ghostEl, true),\r\n\t\t\t\tscaleX = ghostEl && ghostMatrix && ghostMatrix.a,\r\n\t\t\t\tscaleY = ghostEl && ghostMatrix && ghostMatrix.d,\r\n\t\t\t\trelativeScrollOffset = PositionGhostAbsolutely && ghostRelativeParent && getRelativeScrollOffset(ghostRelativeParent),\r\n\t\t\t\tdx = ((touch.clientX - tapEvt.clientX)\r\n\t\t\t\t\t\t+ fallbackOffset.x) / (scaleX || 1)\r\n\t\t\t\t\t\t+ (relativeScrollOffset ? (relativeScrollOffset[0] - ghostRelativeParentInitialScroll[0]) : 0) / (scaleX || 1),\r\n\t\t\t\tdy = ((touch.clientY - tapEvt.clientY)\r\n\t\t\t\t\t\t+ fallbackOffset.y) / (scaleY || 1)\r\n\t\t\t\t\t\t+ (relativeScrollOffset ? (relativeScrollOffset[1] - ghostRelativeParentInitialScroll[1]) : 0) / (scaleY || 1);\r\n\r\n\t\t\t// only set the status to dragging, when we are actually dragging\r\n\t\t\tif (!Sortable.active && !awaitingDragStarted) {\r\n\t\t\t\tif (fallbackTolerance &&\r\n\t\t\t\t\tMath.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) < fallbackTolerance\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis._onDragStart(evt, true);\r\n\t\t\t}\r\n\r\n\t\t\tif (ghostEl) {\r\n\t\t\t\tif (ghostMatrix) {\r\n\t\t\t\t\tghostMatrix.e += dx - (lastDx || 0);\r\n\t\t\t\t\tghostMatrix.f += dy - (lastDy || 0);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tghostMatrix = {\r\n\t\t\t\t\t\ta: 1,\r\n\t\t\t\t\t\tb: 0,\r\n\t\t\t\t\t\tc: 0,\r\n\t\t\t\t\t\td: 1,\r\n\t\t\t\t\t\te: dx,\r\n\t\t\t\t\t\tf: dy\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet cssMatrix = `matrix(${ghostMatrix.a},${ghostMatrix.b},${ghostMatrix.c},${ghostMatrix.d},${ghostMatrix.e},${ghostMatrix.f})`;\r\n\r\n\t\t\t\tcss(ghostEl, 'webkitTransform', cssMatrix);\r\n\t\t\t\tcss(ghostEl, 'mozTransform', cssMatrix);\r\n\t\t\t\tcss(ghostEl, 'msTransform', cssMatrix);\r\n\t\t\t\tcss(ghostEl, 'transform', cssMatrix);\r\n\r\n\t\t\t\tlastDx = dx;\r\n\t\t\t\tlastDy = dy;\r\n\r\n\t\t\t\ttouchEvt = touch;\r\n\t\t\t}\r\n\r\n\t\t\tevt.cancelable && evt.preventDefault();\r\n\t\t}\r\n\t},\r\n\r\n\t_appendGhost: function () {\r\n\t\t// Bug if using scale(): https://stackoverflow.com/questions/2637058\r\n\t\t// Not being adjusted for\r\n\t\tif (!ghostEl) {\r\n\t\t\tlet container = this.options.fallbackOnBody ? document.body : rootEl,\r\n\t\t\t\trect = getRect(dragEl, true, PositionGhostAbsolutely, true, container),\r\n\t\t\t\toptions = this.options;\r\n\r\n\t\t\t// Position absolutely\r\n\t\t\tif (PositionGhostAbsolutely) {\r\n\t\t\t\t// Get relatively positioned parent\r\n\t\t\t\tghostRelativeParent = container;\r\n\r\n\t\t\t\twhile (\r\n\t\t\t\t\tcss(ghostRelativeParent, 'position') === 'static' &&\r\n\t\t\t\t\tcss(ghostRelativeParent, 'transform') === 'none' &&\r\n\t\t\t\t\tghostRelativeParent !== document\r\n\t\t\t\t) {\r\n\t\t\t\t\tghostRelativeParent = ghostRelativeParent.parentNode;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (ghostRelativeParent !== document.body && ghostRelativeParent !== document.documentElement) {\r\n\t\t\t\t\tif (ghostRelativeParent === document) ghostRelativeParent = getWindowScrollingElement();\r\n\r\n\t\t\t\t\trect.top += ghostRelativeParent.scrollTop;\r\n\t\t\t\t\trect.left += ghostRelativeParent.scrollLeft;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tghostRelativeParent = getWindowScrollingElement();\r\n\t\t\t\t}\r\n\t\t\t\tghostRelativeParentInitialScroll = getRelativeScrollOffset(ghostRelativeParent);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tghostEl = dragEl.cloneNode(true);\r\n\r\n\t\t\ttoggleClass(ghostEl, options.ghostClass, false);\r\n\t\t\ttoggleClass(ghostEl, options.fallbackClass, true);\r\n\t\t\ttoggleClass(ghostEl, options.dragClass, true);\r\n\r\n\t\t\tcss(ghostEl, 'transition', '');\r\n\t\t\tcss(ghostEl, 'transform', '');\r\n\r\n\t\t\tcss(ghostEl, 'box-sizing', 'border-box');\r\n\t\t\tcss(ghostEl, 'margin', 0);\r\n\t\t\tcss(ghostEl, 'top', rect.top);\r\n\t\t\tcss(ghostEl, 'left', rect.left);\r\n\t\t\tcss(ghostEl, 'width', rect.width);\r\n\t\t\tcss(ghostEl, 'height', rect.height);\r\n\t\t\tcss(ghostEl, 'opacity', '0.8');\r\n\t\t\tcss(ghostEl, 'position', (PositionGhostAbsolutely ? 'absolute' : 'fixed'));\r\n\t\t\tcss(ghostEl, 'zIndex', '100000');\r\n\t\t\tcss(ghostEl, 'pointerEvents', 'none');\r\n\r\n\r\n\t\t\tSortable.ghost = ghostEl;\r\n\r\n\t\t\tcontainer.appendChild(ghostEl);\r\n\r\n\t\t\t// Set transform-origin\r\n\t\t\tcss(ghostEl, 'transform-origin', (tapDistanceLeft / parseInt(ghostEl.style.width) * 100) + '% ' + (tapDistanceTop / parseInt(ghostEl.style.height) * 100) + '%');\r\n\t\t}\r\n\t},\r\n\r\n\t_onDragStart: function (/**Event*/evt, /**boolean*/fallback) {\r\n\t\tlet _this = this;\r\n\t\tlet dataTransfer = evt.dataTransfer;\r\n\t\tlet options = _this.options;\r\n\r\n\t\tpluginEvent('dragStart', this, { evt });\r\n\t\tif (Sortable.eventCanceled) {\r\n\t\t\tthis._onDrop();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tpluginEvent('setupClone', this);\r\n\t\tif (!Sortable.eventCanceled) {\r\n\t\t\tcloneEl = clone(dragEl);\r\n\t\t\tcloneEl.removeAttribute(\"id\");\r\n\t\t\tcloneEl.draggable = false;\r\n\t\t\tcloneEl.style['will-change'] = '';\r\n\r\n\t\t\tthis._hideClone();\r\n\r\n\t\t\ttoggleClass(cloneEl, this.options.chosenClass, false);\r\n\t\t\tSortable.clone = cloneEl;\r\n\t\t}\r\n\r\n\r\n\t\t// #1143: IFrame support workaround\r\n\t\t_this.cloneId = _nextTick(function() {\r\n\t\t\tpluginEvent('clone', _this);\r\n\t\t\tif (Sortable.eventCanceled) return;\r\n\r\n\t\t\tif (!_this.options.removeCloneOnHide) {\r\n\t\t\t\trootEl.insertBefore(cloneEl, dragEl);\r\n\t\t\t}\r\n\t\t\t_this._hideClone();\r\n\r\n\t\t\t_dispatchEvent({\r\n\t\t\t\tsortable: _this,\r\n\t\t\t\tname: 'clone'\r\n\t\t\t});\r\n\t\t});\r\n\r\n\r\n\t\t!fallback && toggleClass(dragEl, options.dragClass, true);\r\n\r\n\t\t// Set proper drop events\r\n\t\tif (fallback) {\r\n\t\t\tignoreNextClick = true;\r\n\t\t\t_this._loopId = setInterval(_this._emulateDragOver, 50);\r\n\t\t} else {\r\n\t\t\t// Undo what was set in _prepareDragStart before drag started\r\n\t\t\toff(document, 'mouseup', _this._onDrop);\r\n\t\t\toff(document, 'touchend', _this._onDrop);\r\n\t\t\toff(document, 'touchcancel', _this._onDrop);\r\n\r\n\t\t\tif (dataTransfer) {\r\n\t\t\t\tdataTransfer.effectAllowed = 'move';\r\n\t\t\t\toptions.setData && options.setData.call(_this, dataTransfer, dragEl);\r\n\t\t\t}\r\n\r\n\t\t\ton(document, 'drop', _this);\r\n\r\n\t\t\t// #1276 fix:\r\n\t\t\tcss(dragEl, 'transform', 'translateZ(0)');\r\n\t\t}\r\n\r\n\t\tawaitingDragStarted = true;\r\n\r\n\t\t_this._dragStartId = _nextTick(_this._dragStarted.bind(_this, fallback, evt));\r\n\t\ton(document, 'selectstart', _this);\r\n\r\n\t\tmoved = true;\r\n\r\n\t\twindow.getSelection().removeAllRanges();\r\n\r\n\t\tif (Safari) {\r\n\t\t\tcss(document.body, 'user-select', 'none');\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Returns true - if no further action is needed (either inserted or another condition)\r\n\t_onDragOver: function (/**Event*/evt) {\r\n\t\tlet el = this.el,\r\n\t\t\ttarget = evt.target,\r\n\t\t\tdragRect,\r\n\t\t\ttargetRect,\r\n\t\t\trevert,\r\n\t\t\toptions = this.options,\r\n\t\t\tgroup = options.group,\r\n\t\t\tactiveSortable = Sortable.active,\r\n\t\t\tisOwner = (activeGroup === group),\r\n\t\t\tcanSort = options.sort,\r\n\t\t\tfromSortable = (putSortable || activeSortable),\r\n\t\t\tvertical,\r\n\t\t\t_this = this,\r\n\t\t\tcompletedFired = false;\r\n\r\n\t\tif (_silent) return;\r\n\r\n\t\tfunction dragOverEvent(name, extra) {\r\n\t\t\tpluginEvent(name, _this, {\r\n\t\t\t\tevt,\r\n\t\t\t\tisOwner,\r\n\t\t\t\taxis: vertical ? 'vertical' : 'horizontal',\r\n\t\t\t\trevert,\r\n\t\t\t\tdragRect,\r\n\t\t\t\ttargetRect,\r\n\t\t\t\tcanSort,\r\n\t\t\t\tfromSortable,\r\n\t\t\t\ttarget,\r\n\t\t\t\tcompleted,\r\n\t\t\t\tonMove(target, after) {\r\n\t\t\t\t\treturn onMove(rootEl, el, dragEl, dragRect, target, getRect(target), evt, after);\r\n\t\t\t\t},\r\n\t\t\t\tchanged,\r\n\t\t\t\t...extra\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// Capture animation state\r\n\t\tfunction capture() {\r\n\t\t\tdragOverEvent('dragOverAnimationCapture');\r\n\r\n\t\t\t_this.captureAnimationState();\r\n\t\t\tif (_this !== fromSortable) {\r\n\t\t\t\tfromSortable.captureAnimationState();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Return invocation when dragEl is inserted (or completed)\r\n\t\tfunction completed(insertion) {\r\n\t\t\tdragOverEvent('dragOverCompleted', { insertion });\r\n\r\n\t\t\tif (insertion) {\r\n\t\t\t\t// Clones must be hidden before folding animation to capture dragRectAbsolute properly\r\n\t\t\t\tif (isOwner) {\r\n\t\t\t\t\tactiveSortable._hideClone();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tactiveSortable._showClone(_this);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (_this !== fromSortable) {\r\n\t\t\t\t\t// Set ghost class to new sortable's ghost class\r\n\t\t\t\t\ttoggleClass(dragEl, putSortable ? putSortable.options.ghostClass : activeSortable.options.ghostClass, false);\r\n\t\t\t\t\ttoggleClass(dragEl, options.ghostClass, true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (putSortable !== _this && _this !== Sortable.active) {\r\n\t\t\t\t\tputSortable = _this;\r\n\t\t\t\t} else if (_this === Sortable.active && putSortable) {\r\n\t\t\t\t\tputSortable = null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Animation\r\n\t\t\t\tif (fromSortable === _this) {\r\n\t\t\t\t\t_this._ignoreWhileAnimating = target;\r\n\t\t\t\t}\r\n\t\t\t\t_this.animateAll(function() {\r\n\t\t\t\t\tdragOverEvent('dragOverAnimationComplete');\r\n\t\t\t\t\t_this._ignoreWhileAnimating = null;\r\n\t\t\t\t});\r\n\t\t\t\tif (_this !== fromSortable) {\r\n\t\t\t\t\tfromSortable.animateAll();\r\n\t\t\t\t\tfromSortable._ignoreWhileAnimating = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t// Null lastTarget if it is not inside a previously swapped element\r\n\t\t\tif ((target === dragEl && !dragEl.animated) || (target === el && !target.animated)) {\r\n\t\t\t\tlastTarget = null;\r\n\t\t\t}\r\n\r\n\t\t\t// no bubbling and not fallback\r\n\t\t\tif (!options.dragoverBubble && !evt.rootEl && target !== document) {\r\n\t\t\t\tdragEl.parentNode[expando]._isOutsideThisEl(evt.target);\r\n\r\n\t\t\t\t// Do not detect for empty insert if already inserted\r\n\t\t\t\t!insertion && nearestEmptyInsertDetectEvent(evt);\r\n\t\t\t}\r\n\r\n\t\t\t!options.dragoverBubble && evt.stopPropagation && evt.stopPropagation();\r\n\r\n\t\t\treturn (completedFired = true);\r\n\t\t}\r\n\r\n\t\t// Call when dragEl has been inserted\r\n\t\tfunction changed() {\r\n\t\t\tnewIndex = index(dragEl);\r\n\t\t\tnewDraggableIndex = index(dragEl, options.draggable);\r\n\t\t\t_dispatchEvent({\r\n\t\t\t\tsortable: _this,\r\n\t\t\t\tname: 'change',\r\n\t\t\t\ttoEl: el,\r\n\t\t\t\tnewIndex,\r\n\t\t\t\tnewDraggableIndex,\r\n\t\t\t\toriginalEvent: evt\r\n\t\t\t});\r\n\t\t}\r\n\r\n\r\n\t\tif (evt.preventDefault !== void 0) {\r\n\t\t\tevt.cancelable && evt.preventDefault();\r\n\t\t}\r\n\r\n\r\n\t\ttarget = closest(target, options.draggable, el, true);\r\n\r\n\t\tdragOverEvent('dragOver');\r\n\t\tif (Sortable.eventCanceled) return completedFired;\r\n\r\n\t\tif (\r\n\t\t\tdragEl.contains(evt.target) ||\r\n\t\t\ttarget.animated && target.animatingX && target.animatingY ||\r\n\t\t\t_this._ignoreWhileAnimating === target\r\n\t\t) {\r\n\t\t\treturn completed(false);\r\n\t\t}\r\n\r\n\t\tignoreNextClick = false;\r\n\r\n\t\tif (activeSortable && !options.disabled &&\r\n\t\t\t(isOwner\r\n\t\t\t\t? canSort || (revert = parentEl !== rootEl) // Reverting item into the original list\r\n\t\t\t\t: (\r\n\t\t\t\t\tputSortable === this ||\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\t(this.lastPutMode = activeGroup.checkPull(this, activeSortable, dragEl, evt)) &&\r\n\t\t\t\t\t\tgroup.checkPut(this, activeSortable, dragEl, evt)\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t) {\r\n\t\t\tvertical = this._getDirection(evt, target) === 'vertical';\r\n\r\n\t\t\tdragRect = getRect(dragEl);\r\n\r\n\t\t\tdragOverEvent('dragOverValid');\r\n\t\t\tif (Sortable.eventCanceled) return completedFired;\r\n\r\n\t\t\tif (revert) {\r\n\t\t\t\tparentEl = rootEl; // actualization\r\n\t\t\t\tcapture();\r\n\r\n\t\t\t\tthis._hideClone();\r\n\r\n\t\t\t\tdragOverEvent('revert');\r\n\r\n\t\t\t\tif (!Sortable.eventCanceled) {\r\n\t\t\t\t\tif (nextEl) {\r\n\t\t\t\t\t\trootEl.insertBefore(dragEl, nextEl);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\trootEl.appendChild(dragEl);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn completed(true);\r\n\t\t\t}\r\n\r\n\t\t\tlet elLastChild = lastChild(el, options.draggable);\r\n\r\n\t\t\tif (!elLastChild || _ghostIsLast(evt, vertical, this) && !elLastChild.animated) {\r\n\t\t\t\t// Insert to end of list\r\n\r\n\t\t\t\t// If already at end of list: Do not insert\r\n\t\t\t\tif (elLastChild === dragEl) {\r\n\t\t\t\t\treturn completed(false);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// if there is a last element, it is the target\r\n\t\t\t\tif (elLastChild && el === evt.target) {\r\n\t\t\t\t\ttarget = elLastChild;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (target) {\r\n\t\t\t\t\ttargetRect = getRect(target);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, !!target) !== false) {\r\n\t\t\t\t\tcapture();\r\n\t\t\t\t\tif (elLastChild && elLastChild.nextSibling) { // the last draggable element is not the last node\r\n\t\t\t\t\t\tel.insertBefore(dragEl, elLastChild.nextSibling);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tel.appendChild(dragEl);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tparentEl = el; // actualization\r\n\r\n\t\t\t\t\tchanged();\r\n\t\t\t\t\treturn completed(true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (elLastChild && _ghostIsFirst(evt, vertical, this)) {\r\n\t\t\t\t// Insert to start of list\r\n\t\t\t\tlet firstChild = getChild(el, 0, options, true);\r\n\t\t\t\tif (firstChild === dragEl) {\r\n\t\t\t\t\treturn completed(false);\r\n\t\t\t\t}\r\n\t\t\t\ttarget = firstChild;\r\n\t\t\t\ttargetRect = getRect(target);\r\n\r\n\t\t\t\tif (onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, false) !== false) {\r\n\t\t\t\t\tcapture();\r\n\t\t\t\t\tel.insertBefore(dragEl, firstChild);\r\n\t\t\t\t\tparentEl = el; // actualization\r\n\r\n\t\t\t\t\tchanged();\r\n\t\t\t\t\treturn completed(true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (target.parentNode === el) {\r\n\t\t\t\ttargetRect = getRect(target);\r\n\t\t\t\tlet direction = 0,\r\n\t\t\t\t\ttargetBeforeFirstSwap,\r\n\t\t\t\t\tdifferentLevel = dragEl.parentNode !== el,\r\n\t\t\t\t\tdifferentRowCol = !_dragElInRowColumn(dragEl.animated && dragEl.toRect || dragRect, target.animated && target.toRect || targetRect, vertical),\r\n\t\t\t\t\tside1 = vertical ? 'top' : 'left',\r\n\t\t\t\t\tscrolledPastTop = isScrolledPast(target, 'top', 'top') || isScrolledPast(dragEl, 'top', 'top'),\r\n\t\t\t\t\tscrollBefore = scrolledPastTop ? scrolledPastTop.scrollTop : void 0;\r\n\r\n\r\n\t\t\t\tif (lastTarget !== target) {\r\n\t\t\t\t\ttargetBeforeFirstSwap = targetRect[side1];\r\n\t\t\t\t\tpastFirstInvertThresh = false;\r\n\t\t\t\t\tisCircumstantialInvert = (!differentRowCol && options.invertSwap) || differentLevel;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdirection = _getSwapDirection(\r\n\t\t\t\t\tevt, target, targetRect, vertical,\r\n\t\t\t\t\tdifferentRowCol ? 1 : options.swapThreshold,\r\n\t\t\t\t\toptions.invertedSwapThreshold == null ? options.swapThreshold : options.invertedSwapThreshold,\r\n\t\t\t\t\tisCircumstantialInvert,\r\n\t\t\t\t\tlastTarget === target\r\n\t\t\t\t);\r\n\r\n\t\t\t\tlet sibling;\r\n\r\n\t\t\t\tif (direction !== 0) {\r\n\t\t\t\t\t// Check if target is beside dragEl in respective direction (ignoring hidden elements)\r\n\t\t\t\t\tlet dragIndex = index(dragEl);\r\n\r\n\t\t\t\t\tdo {\r\n\t\t\t\t\t\tdragIndex -= direction;\r\n\t\t\t\t\t\tsibling = parentEl.children[dragIndex];\r\n\t\t\t\t\t} while (sibling && (css(sibling, 'display') === 'none' || sibling === ghostEl));\r\n\t\t\t\t}\r\n\t\t\t\t// If dragEl is already beside target: Do not insert\r\n\t\t\t\tif (\r\n\t\t\t\t\tdirection === 0 ||\r\n\t\t\t\t\tsibling === target\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn completed(false);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlastTarget = target;\r\n\r\n\t\t\t\tlastDirection = direction;\r\n\r\n\t\t\t\tlet nextSibling = target.nextElementSibling,\r\n\t\t\t\t\tafter = false;\r\n\r\n\t\t\t\tafter = direction === 1;\r\n\r\n\t\t\t\tlet moveVector = onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, after);\r\n\r\n\t\t\t\tif (moveVector !== false) {\r\n\t\t\t\t\tif (moveVector === 1 || moveVector === -1) {\r\n\t\t\t\t\t\tafter = (moveVector === 1);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_silent = true;\r\n\t\t\t\t\tsetTimeout(_unsilent, 30);\r\n\r\n\t\t\t\t\tcapture();\r\n\r\n\t\t\t\t\tif (after && !nextSibling) {\r\n\t\t\t\t\t\tel.appendChild(dragEl);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttarget.parentNode.insertBefore(dragEl, after ? nextSibling : target);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Undo chrome's scroll adjustment (has no effect on other browsers)\r\n\t\t\t\t\tif (scrolledPastTop) {\r\n\t\t\t\t\t\tscrollBy(scrolledPastTop, 0, scrollBefore - scrolledPastTop.scrollTop);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tparentEl = dragEl.parentNode; // actualization\r\n\r\n\t\t\t\t\t// must be done before animation\r\n\t\t\t\t\tif (targetBeforeFirstSwap !== undefined && !isCircumstantialInvert) {\r\n\t\t\t\t\t\ttargetMoveDistance = Math.abs(targetBeforeFirstSwap - getRect(target)[side1]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tchanged();\r\n\r\n\t\t\t\t\treturn completed(true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (el.contains(dragEl)) {\r\n\t\t\t\treturn completed(false);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n\r\n\t_ignoreWhileAnimating: null,\r\n\r\n\t_offMoveEvents: function() {\r\n\t\toff(document, 'mousemove', this._onTouchMove);\r\n\t\toff(document, 'touchmove', this._onTouchMove);\r\n\t\toff(document, 'pointermove', this._onTouchMove);\r\n\t\toff(document, 'dragover', nearestEmptyInsertDetectEvent);\r\n\t\toff(document, 'mousemove', nearestEmptyInsertDetectEvent);\r\n\t\toff(document, 'touchmove', nearestEmptyInsertDetectEvent);\r\n\t},\r\n\r\n\t_offUpEvents: function () {\r\n\t\tlet ownerDocument = this.el.ownerDocument;\r\n\r\n\t\toff(ownerDocument, 'mouseup', this._onDrop);\r\n\t\toff(ownerDocument, 'touchend', this._onDrop);\r\n\t\toff(ownerDocument, 'pointerup', this._onDrop);\r\n\t\toff(ownerDocument, 'pointercancel', this._onDrop);\r\n\t\toff(ownerDocument, 'touchcancel', this._onDrop);\r\n\t\toff(document, 'selectstart', this);\r\n\t},\r\n\r\n\t_onDrop: function (/**Event*/evt) {\r\n\t\tlet el = this.el,\r\n\t\t\toptions = this.options;\r\n\r\n\t\t// Get the index of the dragged element within its parent\r\n\t\tnewIndex = index(dragEl);\r\n\t\tnewDraggableIndex = index(dragEl, options.draggable);\r\n\r\n\t\tpluginEvent('drop', this, {\r\n\t\t\tevt\r\n\t\t});\r\n\r\n\t\tparentEl = dragEl && dragEl.parentNode;\r\n\r\n\t\t// Get again after plugin event\r\n\t\tnewIndex = index(dragEl);\r\n\t\tnewDraggableIndex = index(dragEl, options.draggable);\r\n\r\n\t\tif (Sortable.eventCanceled) {\r\n\t\t\tthis._nulling();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tawaitingDragStarted = false;\r\n\t\tisCircumstantialInvert = false;\r\n\t\tpastFirstInvertThresh = false;\r\n\r\n\t\tclearInterval(this._loopId);\r\n\r\n\t\tclearTimeout(this._dragStartTimer);\r\n\r\n\t\t_cancelNextTick(this.cloneId);\r\n\t\t_cancelNextTick(this._dragStartId);\r\n\r\n\t\t// Unbind events\r\n\t\tif (this.nativeDraggable) {\r\n\t\t\toff(document, 'drop', this);\r\n\t\t\toff(el, 'dragstart', this._onDragStart);\r\n\t\t}\r\n\t\tthis._offMoveEvents();\r\n\t\tthis._offUpEvents();\r\n\r\n\r\n\t\tif (Safari) {\r\n\t\t\tcss(document.body, 'user-select', '');\r\n\t\t}\r\n\r\n\t\tcss(dragEl, 'transform', '');\r\n\r\n\t\tif (evt) {\r\n\t\t\tif (moved) {\r\n\t\t\t\tevt.cancelable && evt.preventDefault();\r\n\t\t\t\t!options.dropBubble && evt.stopPropagation();\r\n\t\t\t}\r\n\r\n\t\t\tghostEl && ghostEl.parentNode && ghostEl.parentNode.removeChild(ghostEl);\r\n\r\n\t\t\tif (rootEl === parentEl || (putSortable && putSortable.lastPutMode !== 'clone')) {\r\n\t\t\t\t// Remove clone(s)\r\n\t\t\t\tcloneEl && cloneEl.parentNode && cloneEl.parentNode.removeChild(cloneEl);\r\n\t\t\t}\r\n\r\n\t\t\tif (dragEl) {\r\n\t\t\t\tif (this.nativeDraggable) {\r\n\t\t\t\t\toff(dragEl, 'dragend', this);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_disableDraggable(dragEl);\r\n\t\t\t\tdragEl.style['will-change'] = '';\r\n\r\n\t\t\t\t// Remove classes\r\n\t\t\t\t// ghostClass is added in dragStarted\r\n\t\t\t\tif (moved && !awaitingDragStarted) {\r\n\t\t\t\t\ttoggleClass(dragEl, putSortable ? putSortable.options.ghostClass : this.options.ghostClass, false);\r\n\t\t\t\t}\r\n\t\t\t\ttoggleClass(dragEl, this.options.chosenClass, false);\r\n\r\n\t\t\t\t// Drag stop event\r\n\t\t\t\t_dispatchEvent({\r\n\t\t\t\t\tsortable: this,\r\n\t\t\t\t\tname: 'unchoose',\r\n\t\t\t\t\ttoEl: parentEl,\r\n\t\t\t\t\tnewIndex: null,\r\n\t\t\t\t\tnewDraggableIndex: null,\r\n\t\t\t\t\toriginalEvent: evt\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t\tif (rootEl !== parentEl) {\r\n\r\n\t\t\t\t\tif (newIndex >= 0) {\r\n\t\t\t\t\t\t// Add event\r\n\t\t\t\t\t\t_dispatchEvent({\r\n\t\t\t\t\t\t\trootEl: parentEl,\r\n\t\t\t\t\t\t\tname: 'add',\r\n\t\t\t\t\t\t\ttoEl: parentEl,\r\n\t\t\t\t\t\t\tfromEl: rootEl,\r\n\t\t\t\t\t\t\toriginalEvent: evt\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// Remove event\r\n\t\t\t\t\t\t_dispatchEvent({\r\n\t\t\t\t\t\t\tsortable: this,\r\n\t\t\t\t\t\t\tname: 'remove',\r\n\t\t\t\t\t\t\ttoEl: parentEl,\r\n\t\t\t\t\t\t\toriginalEvent: evt\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// drag from one list and drop into another\r\n\t\t\t\t\t\t_dispatchEvent({\r\n\t\t\t\t\t\t\trootEl: parentEl,\r\n\t\t\t\t\t\t\tname: 'sort',\r\n\t\t\t\t\t\t\ttoEl: parentEl,\r\n\t\t\t\t\t\t\tfromEl: rootEl,\r\n\t\t\t\t\t\t\toriginalEvent: evt\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t_dispatchEvent({\r\n\t\t\t\t\t\t\tsortable: this,\r\n\t\t\t\t\t\t\tname: 'sort',\r\n\t\t\t\t\t\t\ttoEl: parentEl,\r\n\t\t\t\t\t\t\toriginalEvent: evt\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tputSortable && putSortable.save();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (newIndex !== oldIndex) {\r\n\t\t\t\t\t\tif (newIndex >= 0) {\r\n\t\t\t\t\t\t\t// drag & drop within the same list\r\n\t\t\t\t\t\t\t_dispatchEvent({\r\n\t\t\t\t\t\t\t\tsortable: this,\r\n\t\t\t\t\t\t\t\tname: 'update',\r\n\t\t\t\t\t\t\t\ttoEl: parentEl,\r\n\t\t\t\t\t\t\t\toriginalEvent: evt\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t_dispatchEvent({\r\n\t\t\t\t\t\t\t\tsortable: this,\r\n\t\t\t\t\t\t\t\tname: 'sort',\r\n\t\t\t\t\t\t\t\ttoEl: parentEl,\r\n\t\t\t\t\t\t\t\toriginalEvent: evt\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (Sortable.active) {\r\n\t\t\t\t\t/* jshint eqnull:true */\r\n\t\t\t\t\tif (newIndex == null || newIndex === -1) {\r\n\t\t\t\t\t\tnewIndex = oldIndex;\r\n\t\t\t\t\t\tnewDraggableIndex = oldDraggableIndex;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_dispatchEvent({\r\n\t\t\t\t\t\tsortable: this,\r\n\t\t\t\t\t\tname: 'end',\r\n\t\t\t\t\t\ttoEl: parentEl,\r\n\t\t\t\t\t\toriginalEvent: evt\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// Save sorting\r\n\t\t\t\t\tthis.save();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tthis._nulling();\r\n\t},\r\n\r\n\t_nulling: function() {\r\n\t\tpluginEvent('nulling', this);\r\n\r\n\t\trootEl =\r\n\t\tdragEl =\r\n\t\tparentEl =\r\n\t\tghostEl =\r\n\t\tnextEl =\r\n\t\tcloneEl =\r\n\t\tlastDownEl =\r\n\t\tcloneHidden =\r\n\r\n\t\ttapEvt =\r\n\t\ttouchEvt =\r\n\r\n\t\tmoved =\r\n\t\tnewIndex =\r\n\t\tnewDraggableIndex =\r\n\t\toldIndex =\r\n\t\toldDraggableIndex =\r\n\r\n\t\tlastTarget =\r\n\t\tlastDirection =\r\n\r\n\t\tputSortable =\r\n\t\tactiveGroup =\r\n\t\tSortable.dragged =\r\n\t\tSortable.ghost =\r\n\t\tSortable.clone =\r\n\t\tSortable.active = null;\r\n\r\n\t\tsavedInputChecked.forEach(function (el) {\r\n\t\t\tel.checked = true;\r\n\t\t});\r\n\r\n\t\tsavedInputChecked.length =\r\n\t\tlastDx =\r\n\t\tlastDy = 0;\r\n\t},\r\n\r\n\thandleEvent: function (/**Event*/evt) {\r\n\t\tswitch (evt.type) {\r\n\t\t\tcase 'drop':\r\n\t\t\tcase 'dragend':\r\n\t\t\t\tthis._onDrop(evt);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'dragenter':\r\n\t\t\tcase 'dragover':\r\n\t\t\t\tif (dragEl) {\r\n\t\t\t\t\tthis._onDragOver(evt);\r\n\t\t\t\t\t_globalDragOver(evt);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'selectstart':\r\n\t\t\t\tevt.preventDefault();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t/**\r\n\t * Serializes the item into an array of string.\r\n\t * @returns {String[]}\r\n\t */\r\n\ttoArray: function () {\r\n\t\tlet order = [],\r\n\t\t\tel,\r\n\t\t\tchildren = this.el.children,\r\n\t\t\ti = 0,\r\n\t\t\tn = children.length,\r\n\t\t\toptions = this.options;\r\n\r\n\t\tfor (; i < n; i++) {\r\n\t\t\tel = children[i];\r\n\t\t\tif (closest(el, options.draggable, this.el, false)) {\r\n\t\t\t\torder.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn order;\r\n\t},\r\n\r\n\r\n\t/**\r\n\t * Sorts the elements according to the array.\r\n\t * @param  {String[]}  order  order of the items\r\n\t */\r\n\tsort: function (order, useAnimation) {\r\n\t\tlet items = {}, rootEl = this.el;\r\n\r\n\t\tthis.toArray().forEach(function (id, i) {\r\n\t\t\tlet el = rootEl.children[i];\r\n\r\n\t\t\tif (closest(el, this.options.draggable, rootEl, false)) {\r\n\t\t\t\titems[id] = el;\r\n\t\t\t}\r\n\t\t}, this);\r\n\r\n\t\tuseAnimation && this.captureAnimationState();\r\n\t\torder.forEach(function (id) {\r\n\t\t\tif (items[id]) {\r\n\t\t\t\trootEl.removeChild(items[id]);\r\n\t\t\t\trootEl.appendChild(items[id]);\r\n\t\t\t}\r\n\t\t});\r\n\t\tuseAnimation && this.animateAll();\r\n\t},\r\n\r\n\r\n\t/**\r\n\t * Save the current sorting\r\n\t */\r\n\tsave: function () {\r\n\t\tlet store = this.options.store;\r\n\t\tstore && store.set && store.set(this);\r\n\t},\r\n\r\n\r\n\t/**\r\n\t * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\r\n\t * @param   {HTMLElement}  el\r\n\t * @param   {String}       [selector]  default: `options.draggable`\r\n\t * @returns {HTMLElement|null}\r\n\t */\r\n\tclosest: function (el, selector) {\r\n\t\treturn closest(el, selector || this.options.draggable, this.el, false);\r\n\t},\r\n\r\n\r\n\t/**\r\n\t * Set/get option\r\n\t * @param   {string} name\r\n\t * @param   {*}      [value]\r\n\t * @returns {*}\r\n\t */\r\n\toption: function (name, value) {\r\n\t\tlet options = this.options;\r\n\r\n\t\tif (value === void 0) {\r\n\t\t\treturn options[name];\r\n\t\t} else {\r\n\t\t\tlet modifiedValue = PluginManager.modifyOption(this, name, value);\r\n\t\t\tif (typeof modifiedValue !== 'undefined') {\r\n\t\t\t\toptions[name] = modifiedValue;\r\n\t\t\t} else {\r\n\t\t\t\toptions[name] = value;\r\n\t\t\t}\r\n\r\n\t\t\tif (name === 'group') {\r\n\t\t\t\t_prepareGroup(options);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t/**\r\n\t * Destroy\r\n\t */\r\n\tdestroy: function () {\r\n\t\tpluginEvent('destroy', this);\r\n\t\tlet el = this.el;\r\n\r\n\t\tel[expando] = null;\r\n\r\n\t\toff(el, 'mousedown', this._onTapStart);\r\n\t\toff(el, 'touchstart', this._onTapStart);\r\n\t\toff(el, 'pointerdown', this._onTapStart);\r\n\r\n\t\tif (this.nativeDraggable) {\r\n\t\t\toff(el, 'dragover', this);\r\n\t\t\toff(el, 'dragenter', this);\r\n\t\t}\r\n\t\t// Remove draggable attributes\r\n\t\tArray.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\r\n\t\t\tel.removeAttribute('draggable');\r\n\t\t});\r\n\r\n\t\tthis._onDrop();\r\n\r\n\t\tthis._disableDelayedDragEvents();\r\n\r\n\t\tsortables.splice(sortables.indexOf(this.el), 1);\r\n\r\n\t\tthis.el = el = null;\r\n\t},\r\n\r\n\t_hideClone: function() {\r\n\t\tif (!cloneHidden) {\r\n\t\t\tpluginEvent('hideClone', this);\r\n\t\t\tif (Sortable.eventCanceled) return;\r\n\r\n\r\n\t\t\tcss(cloneEl, 'display', 'none');\r\n\t\t\tif (this.options.removeCloneOnHide && cloneEl.parentNode) {\r\n\t\t\t\tcloneEl.parentNode.removeChild(cloneEl);\r\n\t\t\t}\r\n\t\t\tcloneHidden = true;\r\n\t\t}\r\n\t},\r\n\r\n\t_showClone: function(putSortable) {\r\n\t\tif (putSortable.lastPutMode !== 'clone') {\r\n\t\t\tthis._hideClone();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\r\n\t\tif (cloneHidden) {\r\n\t\t\tpluginEvent('showClone', this);\r\n\t\t\tif (Sortable.eventCanceled) return;\r\n\r\n\t\t\t// show clone at dragEl or original position\r\n\t\t\tif (dragEl.parentNode == rootEl && !this.options.group.revertClone) {\r\n\t\t\t\trootEl.insertBefore(cloneEl, dragEl);\r\n\t\t\t} else if (nextEl) {\r\n\t\t\t\trootEl.insertBefore(cloneEl, nextEl);\r\n\t\t\t} else {\r\n\t\t\t\trootEl.appendChild(cloneEl);\r\n\t\t\t}\r\n\r\n\t\t\tif (this.options.group.revertClone) {\r\n\t\t\t\tthis.animate(dragEl, cloneEl);\r\n\t\t\t}\r\n\r\n\t\t\tcss(cloneEl, 'display', '');\r\n\t\t\tcloneHidden = false;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nfunction _globalDragOver(/**Event*/evt) {\r\n\tif (evt.dataTransfer) {\r\n\t\tevt.dataTransfer.dropEffect = 'move';\r\n\t}\r\n\tevt.cancelable && evt.preventDefault();\r\n}\r\n\r\nfunction onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect, originalEvent, willInsertAfter) {\r\n\tlet evt,\r\n\t\tsortable = fromEl[expando],\r\n\t\tonMoveFn = sortable.options.onMove,\r\n\t\tretVal;\r\n\t// Support for new CustomEvent feature\r\n\tif (window.CustomEvent && !IE11OrLess && !Edge) {\r\n\t\tevt = new CustomEvent('move', {\r\n\t\t\tbubbles: true,\r\n\t\t\tcancelable: true\r\n\t\t});\r\n\t} else {\r\n\t\tevt = document.createEvent('Event');\r\n\t\tevt.initEvent('move', true, true);\r\n\t}\r\n\r\n\tevt.to = toEl;\r\n\tevt.from = fromEl;\r\n\tevt.dragged = dragEl;\r\n\tevt.draggedRect = dragRect;\r\n\tevt.related = targetEl || toEl;\r\n\tevt.relatedRect = targetRect || getRect(toEl);\r\n\tevt.willInsertAfter = willInsertAfter;\r\n\r\n\tevt.originalEvent = originalEvent;\r\n\r\n\tfromEl.dispatchEvent(evt);\r\n\r\n\tif (onMoveFn) {\r\n\t\tretVal = onMoveFn.call(sortable, evt, originalEvent);\r\n\t}\r\n\r\n\treturn retVal;\r\n}\r\n\r\nfunction _disableDraggable(el) {\r\n\tel.draggable = false;\r\n}\r\n\r\nfunction _unsilent() {\r\n\t_silent = false;\r\n}\r\n\r\nfunction _ghostIsFirst(evt, vertical, sortable) {\r\n\tlet firstElRect = getRect(getChild(sortable.el, 0, sortable.options, true));\r\n\tconst childContainingRect = getChildContainingRectFromElement(sortable.el, sortable.options, ghostEl);\r\n\tconst spacer = 10;\r\n\r\n\treturn vertical ?\r\n\t\t(evt.clientX < childContainingRect.left - spacer || evt.clientY < firstElRect.top && evt.clientX < firstElRect.right) :\r\n\t\t(evt.clientY < childContainingRect.top - spacer || evt.clientY < firstElRect.bottom && evt.clientX < firstElRect.left)\r\n}\r\n\r\nfunction _ghostIsLast(evt, vertical, sortable) {\r\n\tconst lastElRect = getRect(lastChild(sortable.el, sortable.options.draggable));\r\n\tconst childContainingRect = getChildContainingRectFromElement(sortable.el, sortable.options, ghostEl);\r\n\tconst spacer = 10;\r\n\r\n\treturn vertical ?\r\n\t\t(evt.clientX > childContainingRect.right + spacer || evt.clientY > lastElRect.bottom && evt.clientX > lastElRect.left) :\r\n\t\t(evt.clientY > childContainingRect.bottom + spacer || evt.clientX > lastElRect.right && evt.clientY > lastElRect.top);\r\n}\r\n\r\nfunction _getSwapDirection(evt, target, targetRect, vertical, swapThreshold, invertedSwapThreshold, invertSwap, isLastTarget) {\r\n\tlet mouseOnAxis = vertical ? evt.clientY : evt.clientX,\r\n\t\ttargetLength = vertical ? targetRect.height : targetRect.width,\r\n\t\ttargetS1 = vertical ? targetRect.top : targetRect.left,\r\n\t\ttargetS2 = vertical ? targetRect.bottom : targetRect.right,\r\n\t\tinvert = false;\r\n\r\n\r\n\tif (!invertSwap) {\r\n\t\t// Never invert or create dragEl shadow when target movemenet causes mouse to move past the end of regular swapThreshold\r\n\t\tif (isLastTarget && targetMoveDistance < targetLength * swapThreshold) { // multiplied only by swapThreshold because mouse will already be inside target by (1 - threshold) * targetLength / 2\r\n\t\t\t// check if past first invert threshold on side opposite of lastDirection\r\n\t\t\tif (!pastFirstInvertThresh &&\r\n\t\t\t\t(lastDirection === 1 ?\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\tmouseOnAxis > targetS1 + targetLength * invertedSwapThreshold / 2\r\n\t\t\t\t\t) :\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\tmouseOnAxis < targetS2 - targetLength * invertedSwapThreshold / 2\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t\t{\r\n\t\t\t\t// past first invert threshold, do not restrict inverted threshold to dragEl shadow\r\n\t\t\t\tpastFirstInvertThresh = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (!pastFirstInvertThresh) {\r\n\t\t\t\t// dragEl shadow (target move distance shadow)\r\n\t\t\t\tif (\r\n\t\t\t\t\tlastDirection === 1 ?\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\tmouseOnAxis < targetS1 + targetMoveDistance // over dragEl shadow\r\n\t\t\t\t\t) :\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\tmouseOnAxis > targetS2 - targetMoveDistance\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn -lastDirection;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tinvert = true;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// Regular\r\n\t\t\tif (\r\n\t\t\t\tmouseOnAxis > targetS1 + (targetLength * (1 - swapThreshold) / 2) &&\r\n\t\t\t\tmouseOnAxis < targetS2 - (targetLength * (1 - swapThreshold) / 2)\r\n\t\t\t) {\r\n\t\t\t\treturn _getInsertDirection(target);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinvert = invert || invertSwap;\r\n\r\n\tif (invert) {\r\n\t\t// Invert of regular\r\n\t\tif (\r\n\t\t\tmouseOnAxis < targetS1 + (targetLength * invertedSwapThreshold / 2) ||\r\n\t\t\tmouseOnAxis > targetS2 - (targetLength * invertedSwapThreshold / 2)\r\n\t\t)\r\n\t\t{\r\n\t\t\treturn ((mouseOnAxis > targetS1 + targetLength / 2) ? 1 : -1);\r\n\t\t}\r\n\t}\r\n\r\n\treturn 0;\r\n}\r\n\r\n/**\r\n * Gets the direction dragEl must be swapped relative to target in order to make it\r\n * seem that dragEl has been \"inserted\" into that element's position\r\n * @param  {HTMLElement} target       The target whose position dragEl is being inserted at\r\n * @return {Number}                   Direction dragEl must be swapped\r\n */\r\nfunction _getInsertDirection(target) {\r\n\tif (index(dragEl) < index(target)) {\r\n\t\treturn 1;\r\n\t} else {\r\n\t\treturn -1;\r\n\t}\r\n}\r\n\r\n\r\n/**\r\n * Generate id\r\n * @param   {HTMLElement} el\r\n * @returns {String}\r\n * @private\r\n */\r\nfunction _generateId(el) {\r\n\tlet str = el.tagName + el.className + el.src + el.href + el.textContent,\r\n\t\ti = str.length,\r\n\t\tsum = 0;\r\n\r\n\twhile (i--) {\r\n\t\tsum += str.charCodeAt(i);\r\n\t}\r\n\r\n\treturn sum.toString(36);\r\n}\r\n\r\nfunction _saveInputCheckedState(root) {\r\n\tsavedInputChecked.length = 0;\r\n\r\n\tlet inputs = root.getElementsByTagName('input');\r\n\tlet idx = inputs.length;\r\n\r\n\twhile (idx--) {\r\n\t\tlet el = inputs[idx];\r\n\t\tel.checked && savedInputChecked.push(el);\r\n\t}\r\n}\r\n\r\nfunction _nextTick(fn) {\r\n\treturn setTimeout(fn, 0);\r\n}\r\n\r\nfunction _cancelNextTick(id) {\r\n\treturn clearTimeout(id);\r\n}\r\n\r\n// Fixed #973:\r\nif (documentExists) {\r\n\ton(document, 'touchmove', function(evt) {\r\n\t\tif ((Sortable.active || awaitingDragStarted) && evt.cancelable) {\r\n\t\t\tevt.preventDefault();\r\n\t\t}\r\n\t});\r\n}\r\n\r\n\r\n// Export utils\r\nSortable.utils = {\r\n\ton,\r\n\toff,\r\n\tcss,\r\n\tfind,\r\n\tis: function (el, selector) {\r\n\t\treturn !!closest(el, selector, el, false);\r\n\t},\r\n\textend,\r\n\tthrottle,\r\n\tclosest,\r\n\ttoggleClass,\r\n\tclone,\r\n\tindex,\r\n\tnextTick: _nextTick,\r\n\tcancelNextTick: _cancelNextTick,\r\n\tdetectDirection: _detectDirection,\r\n\tgetChild,\r\n\texpando\r\n};\r\n\r\n\r\n/**\r\n * Get the Sortable instance of an element\r\n * @param  {HTMLElement} element The element\r\n * @return {Sortable|undefined}         The instance of Sortable\r\n */\r\nSortable.get = function(element) {\r\n\treturn element[expando];\r\n};\r\n\r\n/**\r\n * Mount a plugin to Sortable\r\n * @param  {...SortablePlugin|SortablePlugin[]} plugins       Plugins being mounted\r\n */\r\nSortable.mount = function(...plugins) {\r\n\tif (plugins[0].constructor === Array) plugins = plugins[0];\r\n\r\n\tplugins.forEach((plugin) => {\r\n\t\tif (!plugin.prototype || !plugin.prototype.constructor) {\r\n\t\t\tthrow `Sortable: Mounted plugin must be a constructor function, not ${ {}.toString.call(plugin) }`;\r\n\t\t}\r\n\t\tif (plugin.utils) Sortable.utils = { ...Sortable.utils, ...plugin.utils };\r\n\r\n\t\tPluginManager.mount(plugin);\r\n\t});\r\n};\r\n\r\n\r\n\r\n/**\r\n * Create sortable instance\r\n * @param {HTMLElement}  el\r\n * @param {Object}      [options]\r\n */\r\nSortable.create = function (el, options) {\r\n\treturn new Sortable(el, options);\r\n};\r\n\r\n\r\n// Export\r\nSortable.version = \"1.15.6\";\r\n\r\n\r\nexport default Sortable;\r\n"],"names":["dragEl","target","rootEl","el","putSortable"],"mappings":"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"}