{"version":3,"file":"utils.js","sources":["../../../../../../packages/extension/WhichWay/lib/Sortable/utils.js"],"sourcesContent":["import { IE11OrLess } from './BrowserInfo.js';\r\nimport Sortable from './Sortable.js';\r\n\r\nconst captureMode = {\r\n\tcapture: false,\r\n\tpassive: false\r\n};\r\n\r\nfunction on(el, event, fn) {\r\n\tel.addEventListener(event, fn, !IE11OrLess && captureMode);\r\n}\r\n\r\n\r\nfunction off(el, event, fn) {\r\n\tel.removeEventListener(event, fn, !IE11OrLess && captureMode);\r\n}\r\n\r\nfunction matches(/**HTMLElement*/el, /**String*/selector) {\r\n\tif (!selector) return;\r\n\r\n\tselector[0] === '>' && (selector = selector.substring(1));\r\n\r\n\tif (el) {\r\n\t\ttry {\r\n\t\t\tif (el.matches) {\r\n\t\t\t\treturn el.matches(selector);\r\n\t\t\t} else if (el.msMatchesSelector) {\r\n\t\t\t\treturn el.msMatchesSelector(selector);\r\n\t\t\t} else if (el.webkitMatchesSelector) {\r\n\t\t\t\treturn el.webkitMatchesSelector(selector);\r\n\t\t\t}\r\n\t\t} catch(_) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\treturn false;\r\n}\r\n\r\nfunction getParentOrHost(el) {\r\n\treturn (el.host && el !== document && el.host.nodeType)\r\n\t\t? el.host\r\n\t\t: el.parentNode;\r\n}\r\n\r\nfunction closest(/**HTMLElement*/el, /**String*/selector, /**HTMLElement*/ctx, includeCTX) {\r\n\tif (el) {\r\n\t\tctx = ctx || document;\r\n\r\n\t\tdo {\r\n\t\t\tif (\r\n\t\t\t\tselector != null &&\r\n\t\t\t\t(\r\n\t\t\t\t\tselector[0] === '>' ?\r\n\t\t\t\t\tel.parentNode === ctx && matches(el, selector) :\r\n\t\t\t\t\tmatches(el, selector)\r\n\t\t\t\t) ||\r\n\t\t\t\tincludeCTX && el === ctx\r\n\t\t\t) {\r\n\t\t\t\treturn el;\r\n\t\t\t}\r\n\r\n\t\t\tif (el === ctx) break;\r\n\t\t\t/* jshint boss:true */\r\n\t\t} while (el = getParentOrHost(el));\r\n\t}\r\n\r\n\treturn null;\r\n}\r\n\r\nconst R_SPACE = /\\s+/g;\r\n\r\nfunction toggleClass(el, name, state) {\r\n\tif (el && name) {\r\n\t\tif (el.classList) {\r\n\t\t\tel.classList[state ? 'add' : 'remove'](name);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tlet className = (' ' + el.className + ' ').replace(R_SPACE, ' ').replace(' ' + name + ' ', ' ');\r\n\t\t\tel.className = (className + (state ? ' ' + name : '')).replace(R_SPACE, ' ');\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\nfunction css(el, prop, val) {\r\n\tlet style = el && el.style;\r\n\r\n\tif (style) {\r\n\t\tif (val === void 0) {\r\n\t\t\tif (document.defaultView && document.defaultView.getComputedStyle) {\r\n\t\t\t\tval = document.defaultView.getComputedStyle(el, '');\r\n\t\t\t}\r\n\t\t\telse if (el.currentStyle) {\r\n\t\t\t\tval = el.currentStyle;\r\n\t\t\t}\r\n\r\n\t\t\treturn prop === void 0 ? val : val[prop];\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (!(prop in style) && prop.indexOf('webkit') === -1) {\r\n\t\t\t\tprop = '-webkit-' + prop;\r\n\t\t\t}\r\n\r\n\t\t\tstyle[prop] = val + (typeof val === 'string' ? '' : 'px');\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction matrix(el, selfOnly) {\r\n\tlet appliedTransforms = '';\r\n\tif (typeof(el) === 'string') {\r\n\t\tappliedTransforms = el;\r\n\t} else {\r\n\t\tdo {\r\n\t\t\tlet transform = css(el, 'transform');\r\n\r\n\t\t\tif (transform && transform !== 'none') {\r\n\t\t\t\tappliedTransforms = transform + ' ' + appliedTransforms;\r\n\t\t\t}\r\n\t\t\t/* jshint boss:true */\r\n\t\t} while (!selfOnly && (el = el.parentNode));\r\n\t}\r\n\r\n\tconst matrixFn = window.DOMMatrix || window.WebKitCSSMatrix || window.CSSMatrix || window.MSCSSMatrix;\r\n\t/*jshint -W056 */\r\n\treturn matrixFn && (new matrixFn(appliedTransforms));\r\n}\r\n\r\n\r\nfunction find(ctx, tagName, iterator) {\r\n\tif (ctx) {\r\n\t\tlet list = ctx.getElementsByTagName(tagName), i = 0, n = list.length;\r\n\r\n\t\tif (iterator) {\r\n\t\t\tfor (; i < n; i++) {\r\n\t\t\t\titerator(list[i], i);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn list;\r\n\t}\r\n\r\n\treturn [];\r\n}\r\n\r\n\r\n\r\nfunction getWindowScrollingElement() {\r\n\tlet scrollingElement = document.scrollingElement;\r\n\r\n\tif (scrollingElement) {\r\n\t\treturn scrollingElement\r\n\t} else {\r\n\t\treturn document.documentElement\r\n\t}\r\n}\r\n\r\n\r\n/**\r\n * Returns the \"bounding client rect\" of given element\r\n * @param  {HTMLElement} el                       The element whose boundingClientRect is wanted\r\n * @param  {[Boolean]} relativeToContainingBlock  Whether the rect should be relative to the containing block of (including) the container\r\n * @param  {[Boolean]} relativeToNonStaticParent  Whether the rect should be relative to the relative parent of (including) the contaienr\r\n * @param  {[Boolean]} undoScale                  Whether the container's scale() should be undone\r\n * @param  {[HTMLElement]} container              The parent the element will be placed in\r\n * @return {Object}                               The boundingClientRect of el, with specified adjustments\r\n */\r\nfunction getRect(el, relativeToContainingBlock, relativeToNonStaticParent, undoScale, container) {\r\n\tif (!el.getBoundingClientRect && el !== window) return;\r\n\r\n\tlet elRect,\r\n\t\ttop,\r\n\t\tleft,\r\n\t\tbottom,\r\n\t\tright,\r\n\t\theight,\r\n\t\twidth;\r\n\r\n\tif (el !== window && el.parentNode && el !== getWindowScrollingElement()) {\r\n\t\telRect = el.getBoundingClientRect();\r\n\t\ttop = elRect.top;\r\n\t\tleft = elRect.left;\r\n\t\tbottom = elRect.bottom;\r\n\t\tright = elRect.right;\r\n\t\theight = elRect.height;\r\n\t\twidth = elRect.width;\r\n\t} else {\r\n\t\ttop = 0;\r\n\t\tleft = 0;\r\n\t\tbottom = window.innerHeight;\r\n\t\tright = window.innerWidth;\r\n\t\theight = window.innerHeight;\r\n\t\twidth = window.innerWidth;\r\n\t}\r\n\r\n\tif ((relativeToContainingBlock || relativeToNonStaticParent) && el !== window) {\r\n\t\t// Adjust for translate()\r\n\t\tcontainer = container || el.parentNode;\r\n\r\n\t\t// solves #1123 (see: https://stackoverflow.com/a/37953806/6088312)\r\n\t\t// Not needed on <= IE11\r\n\t\tif (!IE11OrLess) {\r\n\t\t\tdo {\r\n\t\t\t\tif (\r\n\t\t\t\t\tcontainer &&\r\n\t\t\t\t\tcontainer.getBoundingClientRect &&\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\tcss(container, 'transform') !== 'none' ||\r\n\t\t\t\t\t\trelativeToNonStaticParent &&\r\n\t\t\t\t\t\tcss(container, 'position') !== 'static'\r\n\t\t\t\t\t)\r\n\t\t\t\t) {\r\n\t\t\t\t\tlet containerRect = container.getBoundingClientRect();\r\n\r\n\t\t\t\t\t// Set relative to edges of padding box of container\r\n\t\t\t\t\ttop -= containerRect.top + parseInt(css(container, 'border-top-width'));\r\n\t\t\t\t\tleft -= containerRect.left + parseInt(css(container, 'border-left-width'));\r\n\t\t\t\t\tbottom = top + elRect.height;\r\n\t\t\t\t\tright = left + elRect.width;\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\t/* jshint boss:true */\r\n\t\t\t} while (container = container.parentNode);\r\n\t\t}\r\n\t}\r\n\r\n\tif (undoScale && el !== window) {\r\n\t\t// Adjust for scale()\r\n\t\tlet elMatrix = matrix(container || el),\r\n\t\t\tscaleX = elMatrix && elMatrix.a,\r\n\t\t\tscaleY = elMatrix && elMatrix.d;\r\n\r\n\t\tif (elMatrix) {\r\n\t\t\ttop /= scaleY;\r\n\t\t\tleft /= scaleX;\r\n\r\n\t\t\twidth /= scaleX;\r\n\t\t\theight /= scaleY;\r\n\r\n\t\t\tbottom = top + height;\r\n\t\t\tright = left + width;\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\ttop: top,\r\n\t\tleft: left,\r\n\t\tbottom: bottom,\r\n\t\tright: right,\r\n\t\twidth: width,\r\n\t\theight: height\r\n\t};\r\n}\r\n\r\n/**\r\n * Returns the content rect of the element (bounding rect minus border and padding)\r\n * @param {HTMLElement} el \r\n */\r\nfunction getContentRect(el) {\r\n\tlet rect = getRect(el);\r\n\tconst paddingLeft = parseInt(css(el, 'padding-left')),\r\n\t\tpaddingTop = parseInt(css(el, 'padding-top')),\r\n\t\tpaddingRight = parseInt(css(el, 'padding-right')),\r\n\t\tpaddingBottom = parseInt(css(el, 'padding-bottom'));\r\n\trect.top += paddingTop + parseInt(css(el, 'border-top-width'));\r\n\trect.left += paddingLeft + parseInt(css(el, 'border-left-width'));\r\n\t// Client Width/Height includes padding only\r\n\trect.width = el.clientWidth - paddingLeft - paddingRight;\r\n\trect.height = el.clientHeight - paddingTop - paddingBottom;\r\n\trect.bottom = rect.top + rect.height;\r\n\trect.right = rect.left + rect.width;\r\n\treturn rect;\r\n}\r\n\r\n/**\r\n * Checks if a side of an element is scrolled past a side of its parents\r\n * @param  {HTMLElement}  el           The element who's side being scrolled out of view is in question\r\n * @param  {String}       elSide       Side of the element in question ('top', 'left', 'right', 'bottom')\r\n * @param  {String}       parentSide   Side of the parent in question ('top', 'left', 'right', 'bottom')\r\n * @return {HTMLElement}               The parent scroll element that the el's side is scrolled past, or null if there is no such element\r\n */\r\nfunction isScrolledPast(el, elSide, parentSide) {\r\n\tlet parent = getParentAutoScrollElement(el, true),\r\n\t\telSideVal = getRect(el)[elSide];\r\n\r\n\t/* jshint boss:true */\r\n\twhile (parent) {\r\n\t\tlet parentSideVal = getRect(parent)[parentSide],\r\n\t\t\tvisible;\r\n\r\n\t\tif (parentSide === 'top' || parentSide === 'left') {\r\n\t\t\tvisible = elSideVal >= parentSideVal;\r\n\t\t} else {\r\n\t\t\tvisible = elSideVal <= parentSideVal;\r\n\t\t}\r\n\r\n\t\tif (!visible) return parent;\r\n\r\n\t\tif (parent === getWindowScrollingElement()) break;\r\n\r\n\t\tparent = getParentAutoScrollElement(parent, false);\r\n\t}\r\n\r\n\treturn false;\r\n}\r\n\r\n\r\n\r\n/**\r\n * Gets nth child of el, ignoring hidden children, sortable's elements (does not ignore clone if it's visible)\r\n * and non-draggable elements\r\n * @param  {HTMLElement} el       The parent element\r\n * @param  {Number} childNum      The index of the child\r\n * @param  {Object} options       Parent Sortable's options\r\n * @return {HTMLElement}          The child at index childNum, or null if not found\r\n */\r\nfunction getChild(el, childNum, options, includeDragEl) {\r\n\tlet currentChild = 0,\r\n\t\ti = 0,\r\n\t\tchildren = el.children;\r\n\r\n\twhile (i < children.length) {\r\n\t\tif (\r\n\t\t\tchildren[i].style.display !== 'none' &&\r\n\t\t\tchildren[i] !== Sortable.ghost &&\r\n\t\t\t(includeDragEl || children[i] !== Sortable.dragged) &&\r\n\t\t\tclosest(children[i], options.draggable, el, false)\r\n\t\t) {\r\n\t\t\tif (currentChild === childNum) {\r\n\t\t\t\treturn children[i];\r\n\t\t\t}\r\n\t\t\tcurrentChild++;\r\n\t\t}\r\n\r\n\t\ti++;\r\n\t}\r\n\treturn null;\r\n}\r\n\r\n/**\r\n * Gets the last child in the el, ignoring ghostEl or invisible elements (clones)\r\n * @param  {HTMLElement} el       Parent element\r\n * @param  {selector} selector    Any other elements that should be ignored\r\n * @return {HTMLElement}          The last child, ignoring ghostEl\r\n */\r\nfunction lastChild(el, selector) {\r\n\tlet last = el.lastElementChild;\r\n\r\n\twhile (\r\n\t\tlast &&\r\n\t\t(\r\n\t\t\tlast === Sortable.ghost ||\r\n\t\t\tcss(last, 'display') === 'none' ||\r\n\t\t\tselector && !matches(last, selector)\r\n\t\t)\r\n\t) {\r\n\t\tlast = last.previousElementSibling;\r\n\t}\r\n\r\n\treturn last || null;\r\n}\r\n\r\n\r\n/**\r\n * Returns the index of an element within its parent for a selected set of\r\n * elements\r\n * @param  {HTMLElement} el\r\n * @param  {selector} selector\r\n * @return {number}\r\n */\r\nfunction index(el, selector) {\r\n\tlet index = 0;\r\n\r\n\tif (!el || !el.parentNode) {\r\n\t\treturn -1;\r\n\t}\r\n\r\n\t/* jshint boss:true */\r\n\twhile (el = el.previousElementSibling) {\r\n\t\tif ((el.nodeName.toUpperCase() !== 'TEMPLATE') && el !== Sortable.clone && (!selector || matches(el, selector))) {\r\n\t\t\tindex++;\r\n\t\t}\r\n\t}\r\n\r\n\treturn index;\r\n}\r\n\r\n/**\r\n * Returns the scroll offset of the given element, added with all the scroll offsets of parent elements.\r\n * The value is returned in real pixels.\r\n * @param  {HTMLElement} el\r\n * @return {Array}             Offsets in the format of [left, top]\r\n */\r\nfunction getRelativeScrollOffset(el) {\r\n\tlet offsetLeft = 0,\r\n\t\toffsetTop = 0,\r\n\t\twinScroller = getWindowScrollingElement();\r\n\r\n\tif (el) {\r\n\t\tdo {\r\n\t\t\tlet elMatrix = matrix(el),\r\n\t\t\t\tscaleX = elMatrix.a,\r\n\t\t\t\tscaleY = elMatrix.d;\r\n\r\n\t\t\toffsetLeft += el.scrollLeft * scaleX;\r\n\t\t\toffsetTop += el.scrollTop * scaleY;\r\n\t\t} while (el !== winScroller && (el = el.parentNode));\r\n\t}\r\n\r\n\treturn [offsetLeft, offsetTop];\r\n}\r\n\r\n/**\r\n * Returns the index of the object within the given array\r\n * @param  {Array} arr   Array that may or may not hold the object\r\n * @param  {Object} obj  An object that has a key-value pair unique to and identical to a key-value pair in the object you want to find\r\n * @return {Number}      The index of the object in the array, or -1\r\n */\r\nfunction indexOfObject(arr, obj) {\r\n\tfor (let i in arr) {\r\n\t\tif (!arr.hasOwnProperty(i)) continue;\r\n\t\tfor (let key in obj) {\r\n\t\t\tif (obj.hasOwnProperty(key) && obj[key] === arr[i][key]) return Number(i);\r\n\t\t}\r\n\t}\r\n\treturn -1;\r\n}\r\n\r\n\r\nfunction getParentAutoScrollElement(el, includeSelf) {\r\n\t// skip to window\r\n\tif (!el || !el.getBoundingClientRect) return getWindowScrollingElement();\r\n\r\n\tlet elem = el;\r\n\tlet gotSelf = false;\r\n\tdo {\r\n\t\t// we don't need to get elem css if it isn't even overflowing in the first place (performance)\r\n\t\tif (elem.clientWidth < elem.scrollWidth || elem.clientHeight < elem.scrollHeight) {\r\n\t\t\tlet elemCSS = css(elem);\r\n\t\t\tif (\r\n\t\t\t\telem.clientWidth < elem.scrollWidth && (elemCSS.overflowX == 'auto' || elemCSS.overflowX == 'scroll') ||\r\n\t\t\t\telem.clientHeight < elem.scrollHeight && (elemCSS.overflowY == 'auto' || elemCSS.overflowY == 'scroll')\r\n\t\t\t) {\r\n\t\t\t\tif (!elem.getBoundingClientRect || elem === document.body) return getWindowScrollingElement();\r\n\r\n\t\t\t\tif (gotSelf || includeSelf) return elem;\r\n\t\t\t\tgotSelf = true;\r\n\t\t\t}\r\n\t\t}\r\n\t/* jshint boss:true */\r\n\t} while (elem = elem.parentNode);\r\n\r\n\treturn getWindowScrollingElement();\r\n}\r\n\r\nfunction extend(dst, src) {\r\n\tif (dst && src) {\r\n\t\tfor (let key in src) {\r\n\t\t\tif (src.hasOwnProperty(key)) {\r\n\t\t\t\tdst[key] = src[key];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn dst;\r\n}\r\n\r\n\r\nfunction isRectEqual(rect1, rect2) {\r\n\treturn Math.round(rect1.top) === Math.round(rect2.top) &&\r\n\t\tMath.round(rect1.left) === Math.round(rect2.left) &&\r\n\t\tMath.round(rect1.height) === Math.round(rect2.height) &&\r\n\t\tMath.round(rect1.width) === Math.round(rect2.width);\r\n}\r\n\r\n\r\nlet _throttleTimeout;\r\nfunction throttle(callback, ms) {\r\n\treturn function () {\r\n\t\tif (!_throttleTimeout) {\r\n\t\t\tlet args = arguments,\r\n\t\t\t\t_this = this;\r\n\r\n\t\t\tif (args.length === 1) {\r\n\t\t\t\tcallback.call(_this, args[0]);\r\n\t\t\t} else {\r\n\t\t\t\tcallback.apply(_this, args);\r\n\t\t\t}\r\n\r\n\t\t\t_throttleTimeout = setTimeout(function () {\r\n\t\t\t\t_throttleTimeout = void 0;\r\n\t\t\t}, ms);\r\n\t\t}\r\n\t};\r\n}\r\n\r\n\r\nfunction cancelThrottle() {\r\n\tclearTimeout(_throttleTimeout);\r\n\t_throttleTimeout = void 0;\r\n}\r\n\r\n\r\nfunction scrollBy(el, x, y) {\r\n\tel.scrollLeft += x;\r\n\tel.scrollTop += y;\r\n}\r\n\r\n\r\nfunction clone(el) {\r\n\tlet Polymer = window.Polymer;\r\n\tlet $ = window.jQuery || window.Zepto;\r\n\r\n\tif (Polymer && Polymer.dom) {\r\n\t\treturn Polymer.dom(el).cloneNode(true);\r\n\t}\r\n\telse if ($) {\r\n\t\treturn $(el).clone(true)[0];\r\n\t}\r\n\telse {\r\n\t\treturn el.cloneNode(true);\r\n\t}\r\n}\r\n\r\n\r\nfunction setRect(el, rect) {\r\n\tcss(el, 'position', 'absolute');\r\n\tcss(el, 'top', rect.top);\r\n\tcss(el, 'left', rect.left);\r\n\tcss(el, 'width', rect.width);\r\n\tcss(el, 'height', rect.height);\r\n}\r\n\r\nfunction unsetRect(el) {\r\n\tcss(el, 'position', '');\r\n\tcss(el, 'top', '');\r\n\tcss(el, 'left', '');\r\n\tcss(el, 'width', '');\r\n\tcss(el, 'height', '');\r\n}\r\n\r\nfunction getChildContainingRectFromElement(container, options, ghostEl) {\r\n    const rect = {};\r\n\r\n\tArray.from(container.children).forEach(child => {\r\n\t\tif (!closest(child, options.draggable, container, false) || child.animated || child === ghostEl) return;\r\n\t\tconst childRect = getRect(child);\r\n\t\trect.left = Math.min(rect.left ?? Infinity, childRect.left);\r\n\t\trect.top = Math.min(rect.top ?? Infinity, childRect.top);\r\n\t\trect.right = Math.max(rect.right ?? -Infinity, childRect.right);\r\n\t\trect.bottom = Math.max(rect.bottom ?? -Infinity, childRect.bottom);\r\n\t});\r\n\trect.width = rect.right - rect.left;\r\n\trect.height = rect.bottom - rect.top;\r\n\trect.x = rect.left;\r\n\trect.y = rect.top;\r\n    return rect;\r\n}\r\n\r\nconst expando = 'Sortable' + (new Date).getTime();\r\n\r\n\r\nexport {\r\n\ton,\r\n\toff,\r\n\tmatches,\r\n\tgetParentOrHost,\r\n\tclosest,\r\n\ttoggleClass,\r\n\tcss,\r\n\tmatrix,\r\n\tfind,\r\n\tgetWindowScrollingElement,\r\n\tgetRect,\r\n\tisScrolledPast,\r\n\tgetChild,\r\n\tlastChild,\r\n\tindex,\r\n\tgetRelativeScrollOffset,\r\n\tindexOfObject,\r\n\tgetParentAutoScrollElement,\r\n\textend,\r\n\tisRectEqual,\r\n\tthrottle,\r\n\tcancelThrottle,\r\n\tscrollBy,\r\n\tclone,\r\n\tsetRect,\r\n\tunsetRect,\r\n\tgetContentRect,\r\n\tgetChildContainingRectFromElement,\r\n\texpando\r\n};\r\n"],"names":["index"],"mappings":"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"}