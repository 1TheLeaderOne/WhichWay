{"version":3,"file":"utils.js","sources":["../../../../../../packages/extension/WhichWay/lib/Sortable/utils.js"],"sourcesContent":["import { IE11OrLess } from './BrowserInfo.js';\nimport Sortable from './Sortable.js';\n\nconst captureMode = {\n\tcapture: false,\n\tpassive: false\n};\n\nfunction on(el, event, fn) {\n\tel.addEventListener(event, fn, !IE11OrLess && captureMode);\n}\n\n\nfunction off(el, event, fn) {\n\tel.removeEventListener(event, fn, !IE11OrLess && captureMode);\n}\n\nfunction matches(/**HTMLElement*/el, /**String*/selector) {\n\tif (!selector) return;\n\n\tselector[0] === '>' && (selector = selector.substring(1));\n\n\tif (el) {\n\t\ttry {\n\t\t\tif (el.matches) {\n\t\t\t\treturn el.matches(selector);\n\t\t\t} else if (el.msMatchesSelector) {\n\t\t\t\treturn el.msMatchesSelector(selector);\n\t\t\t} else if (el.webkitMatchesSelector) {\n\t\t\t\treturn el.webkitMatchesSelector(selector);\n\t\t\t}\n\t\t} catch(_) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn false;\n}\n\nfunction getParentOrHost(el) {\n\treturn (el.host && el !== document && el.host.nodeType)\n\t\t? el.host\n\t\t: el.parentNode;\n}\n\nfunction closest(/**HTMLElement*/el, /**String*/selector, /**HTMLElement*/ctx, includeCTX) {\n\tif (el) {\n\t\tctx = ctx || document;\n\n\t\tdo {\n\t\t\tif (\n\t\t\t\tselector != null &&\n\t\t\t\t(\n\t\t\t\t\tselector[0] === '>' ?\n\t\t\t\t\tel.parentNode === ctx && matches(el, selector) :\n\t\t\t\t\tmatches(el, selector)\n\t\t\t\t) ||\n\t\t\t\tincludeCTX && el === ctx\n\t\t\t) {\n\t\t\t\treturn el;\n\t\t\t}\n\n\t\t\tif (el === ctx) break;\n\t\t\t/* jshint boss:true */\n\t\t} while (el = getParentOrHost(el));\n\t}\n\n\treturn null;\n}\n\nconst R_SPACE = /\\s+/g;\n\nfunction toggleClass(el, name, state) {\n\tif (el && name) {\n\t\tif (el.classList) {\n\t\t\tel.classList[state ? 'add' : 'remove'](name);\n\t\t}\n\t\telse {\n\t\t\tlet className = (' ' + el.className + ' ').replace(R_SPACE, ' ').replace(' ' + name + ' ', ' ');\n\t\t\tel.className = (className + (state ? ' ' + name : '')).replace(R_SPACE, ' ');\n\t\t}\n\t}\n}\n\n\nfunction css(el, prop, val) {\n\tlet style = el && el.style;\n\n\tif (style) {\n\t\tif (val === void 0) {\n\t\t\tif (document.defaultView && document.defaultView.getComputedStyle) {\n\t\t\t\tval = document.defaultView.getComputedStyle(el, '');\n\t\t\t}\n\t\t\telse if (el.currentStyle) {\n\t\t\t\tval = el.currentStyle;\n\t\t\t}\n\n\t\t\treturn prop === void 0 ? val : val[prop];\n\t\t}\n\t\telse {\n\t\t\tif (!(prop in style) && prop.indexOf('webkit') === -1) {\n\t\t\t\tprop = '-webkit-' + prop;\n\t\t\t}\n\n\t\t\tstyle[prop] = val + (typeof val === 'string' ? '' : 'px');\n\t\t}\n\t}\n}\n\nfunction matrix(el, selfOnly) {\n\tlet appliedTransforms = '';\n\tif (typeof(el) === 'string') {\n\t\tappliedTransforms = el;\n\t} else {\n\t\tdo {\n\t\t\tlet transform = css(el, 'transform');\n\n\t\t\tif (transform && transform !== 'none') {\n\t\t\t\tappliedTransforms = transform + ' ' + appliedTransforms;\n\t\t\t}\n\t\t\t/* jshint boss:true */\n\t\t} while (!selfOnly && (el = el.parentNode));\n\t}\n\n\tconst matrixFn = window.DOMMatrix || window.WebKitCSSMatrix || window.CSSMatrix || window.MSCSSMatrix;\n\t/*jshint -W056 */\n\treturn matrixFn && (new matrixFn(appliedTransforms));\n}\n\n\nfunction find(ctx, tagName, iterator) {\n\tif (ctx) {\n\t\tlet list = ctx.getElementsByTagName(tagName), i = 0, n = list.length;\n\n\t\tif (iterator) {\n\t\t\tfor (; i < n; i++) {\n\t\t\t\titerator(list[i], i);\n\t\t\t}\n\t\t}\n\n\t\treturn list;\n\t}\n\n\treturn [];\n}\n\n\n\nfunction getWindowScrollingElement() {\n\tlet scrollingElement = document.scrollingElement;\n\n\tif (scrollingElement) {\n\t\treturn scrollingElement\n\t} else {\n\t\treturn document.documentElement\n\t}\n}\n\n\n/**\n * Returns the \"bounding client rect\" of given element\n * @param  {HTMLElement} el                       The element whose boundingClientRect is wanted\n * @param  {[Boolean]} relativeToContainingBlock  Whether the rect should be relative to the containing block of (including) the container\n * @param  {[Boolean]} relativeToNonStaticParent  Whether the rect should be relative to the relative parent of (including) the contaienr\n * @param  {[Boolean]} undoScale                  Whether the container's scale() should be undone\n * @param  {[HTMLElement]} container              The parent the element will be placed in\n * @return {Object}                               The boundingClientRect of el, with specified adjustments\n */\nfunction getRect(el, relativeToContainingBlock, relativeToNonStaticParent, undoScale, container) {\n\tif (!el.getBoundingClientRect && el !== window) return;\n\n\tlet elRect,\n\t\ttop,\n\t\tleft,\n\t\tbottom,\n\t\tright,\n\t\theight,\n\t\twidth;\n\n\tif (el !== window && el.parentNode && el !== getWindowScrollingElement()) {\n\t\telRect = el.getBoundingClientRect();\n\t\ttop = elRect.top;\n\t\tleft = elRect.left;\n\t\tbottom = elRect.bottom;\n\t\tright = elRect.right;\n\t\theight = elRect.height;\n\t\twidth = elRect.width;\n\t} else {\n\t\ttop = 0;\n\t\tleft = 0;\n\t\tbottom = window.innerHeight;\n\t\tright = window.innerWidth;\n\t\theight = window.innerHeight;\n\t\twidth = window.innerWidth;\n\t}\n\n\tif ((relativeToContainingBlock || relativeToNonStaticParent) && el !== window) {\n\t\t// Adjust for translate()\n\t\tcontainer = container || el.parentNode;\n\n\t\t// solves #1123 (see: https://stackoverflow.com/a/37953806/6088312)\n\t\t// Not needed on <= IE11\n\t\tif (!IE11OrLess) {\n\t\t\tdo {\n\t\t\t\tif (\n\t\t\t\t\tcontainer &&\n\t\t\t\t\tcontainer.getBoundingClientRect &&\n\t\t\t\t\t(\n\t\t\t\t\t\tcss(container, 'transform') !== 'none' ||\n\t\t\t\t\t\trelativeToNonStaticParent &&\n\t\t\t\t\t\tcss(container, 'position') !== 'static'\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tlet containerRect = container.getBoundingClientRect();\n\n\t\t\t\t\t// Set relative to edges of padding box of container\n\t\t\t\t\ttop -= containerRect.top + parseInt(css(container, 'border-top-width'));\n\t\t\t\t\tleft -= containerRect.left + parseInt(css(container, 'border-left-width'));\n\t\t\t\t\tbottom = top + elRect.height;\n\t\t\t\t\tright = left + elRect.width;\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t/* jshint boss:true */\n\t\t\t} while (container = container.parentNode);\n\t\t}\n\t}\n\n\tif (undoScale && el !== window) {\n\t\t// Adjust for scale()\n\t\tlet elMatrix = matrix(container || el),\n\t\t\tscaleX = elMatrix && elMatrix.a,\n\t\t\tscaleY = elMatrix && elMatrix.d;\n\n\t\tif (elMatrix) {\n\t\t\ttop /= scaleY;\n\t\t\tleft /= scaleX;\n\n\t\t\twidth /= scaleX;\n\t\t\theight /= scaleY;\n\n\t\t\tbottom = top + height;\n\t\t\tright = left + width;\n\t\t}\n\t}\n\n\treturn {\n\t\ttop: top,\n\t\tleft: left,\n\t\tbottom: bottom,\n\t\tright: right,\n\t\twidth: width,\n\t\theight: height\n\t};\n}\n\n/**\n * Returns the content rect of the element (bounding rect minus border and padding)\n * @param {HTMLElement} el \n */\nfunction getContentRect(el) {\n\tlet rect = getRect(el);\n\tconst paddingLeft = parseInt(css(el, 'padding-left')),\n\t\tpaddingTop = parseInt(css(el, 'padding-top')),\n\t\tpaddingRight = parseInt(css(el, 'padding-right')),\n\t\tpaddingBottom = parseInt(css(el, 'padding-bottom'));\n\trect.top += paddingTop + parseInt(css(el, 'border-top-width'));\n\trect.left += paddingLeft + parseInt(css(el, 'border-left-width'));\n\t// Client Width/Height includes padding only\n\trect.width = el.clientWidth - paddingLeft - paddingRight;\n\trect.height = el.clientHeight - paddingTop - paddingBottom;\n\trect.bottom = rect.top + rect.height;\n\trect.right = rect.left + rect.width;\n\treturn rect;\n}\n\n/**\n * Checks if a side of an element is scrolled past a side of its parents\n * @param  {HTMLElement}  el           The element who's side being scrolled out of view is in question\n * @param  {String}       elSide       Side of the element in question ('top', 'left', 'right', 'bottom')\n * @param  {String}       parentSide   Side of the parent in question ('top', 'left', 'right', 'bottom')\n * @return {HTMLElement}               The parent scroll element that the el's side is scrolled past, or null if there is no such element\n */\nfunction isScrolledPast(el, elSide, parentSide) {\n\tlet parent = getParentAutoScrollElement(el, true),\n\t\telSideVal = getRect(el)[elSide];\n\n\t/* jshint boss:true */\n\twhile (parent) {\n\t\tlet parentSideVal = getRect(parent)[parentSide],\n\t\t\tvisible;\n\n\t\tif (parentSide === 'top' || parentSide === 'left') {\n\t\t\tvisible = elSideVal >= parentSideVal;\n\t\t} else {\n\t\t\tvisible = elSideVal <= parentSideVal;\n\t\t}\n\n\t\tif (!visible) return parent;\n\n\t\tif (parent === getWindowScrollingElement()) break;\n\n\t\tparent = getParentAutoScrollElement(parent, false);\n\t}\n\n\treturn false;\n}\n\n\n\n/**\n * Gets nth child of el, ignoring hidden children, sortable's elements (does not ignore clone if it's visible)\n * and non-draggable elements\n * @param  {HTMLElement} el       The parent element\n * @param  {Number} childNum      The index of the child\n * @param  {Object} options       Parent Sortable's options\n * @return {HTMLElement}          The child at index childNum, or null if not found\n */\nfunction getChild(el, childNum, options, includeDragEl) {\n\tlet currentChild = 0,\n\t\ti = 0,\n\t\tchildren = el.children;\n\n\twhile (i < children.length) {\n\t\tif (\n\t\t\tchildren[i].style.display !== 'none' &&\n\t\t\tchildren[i] !== Sortable.ghost &&\n\t\t\t(includeDragEl || children[i] !== Sortable.dragged) &&\n\t\t\tclosest(children[i], options.draggable, el, false)\n\t\t) {\n\t\t\tif (currentChild === childNum) {\n\t\t\t\treturn children[i];\n\t\t\t}\n\t\t\tcurrentChild++;\n\t\t}\n\n\t\ti++;\n\t}\n\treturn null;\n}\n\n/**\n * Gets the last child in the el, ignoring ghostEl or invisible elements (clones)\n * @param  {HTMLElement} el       Parent element\n * @param  {selector} selector    Any other elements that should be ignored\n * @return {HTMLElement}          The last child, ignoring ghostEl\n */\nfunction lastChild(el, selector) {\n\tlet last = el.lastElementChild;\n\n\twhile (\n\t\tlast &&\n\t\t(\n\t\t\tlast === Sortable.ghost ||\n\t\t\tcss(last, 'display') === 'none' ||\n\t\t\tselector && !matches(last, selector)\n\t\t)\n\t) {\n\t\tlast = last.previousElementSibling;\n\t}\n\n\treturn last || null;\n}\n\n\n/**\n * Returns the index of an element within its parent for a selected set of\n * elements\n * @param  {HTMLElement} el\n * @param  {selector} selector\n * @return {number}\n */\nfunction index(el, selector) {\n\tlet index = 0;\n\n\tif (!el || !el.parentNode) {\n\t\treturn -1;\n\t}\n\n\t/* jshint boss:true */\n\twhile (el = el.previousElementSibling) {\n\t\tif ((el.nodeName.toUpperCase() !== 'TEMPLATE') && el !== Sortable.clone && (!selector || matches(el, selector))) {\n\t\t\tindex++;\n\t\t}\n\t}\n\n\treturn index;\n}\n\n/**\n * Returns the scroll offset of the given element, added with all the scroll offsets of parent elements.\n * The value is returned in real pixels.\n * @param  {HTMLElement} el\n * @return {Array}             Offsets in the format of [left, top]\n */\nfunction getRelativeScrollOffset(el) {\n\tlet offsetLeft = 0,\n\t\toffsetTop = 0,\n\t\twinScroller = getWindowScrollingElement();\n\n\tif (el) {\n\t\tdo {\n\t\t\tlet elMatrix = matrix(el),\n\t\t\t\tscaleX = elMatrix.a,\n\t\t\t\tscaleY = elMatrix.d;\n\n\t\t\toffsetLeft += el.scrollLeft * scaleX;\n\t\t\toffsetTop += el.scrollTop * scaleY;\n\t\t} while (el !== winScroller && (el = el.parentNode));\n\t}\n\n\treturn [offsetLeft, offsetTop];\n}\n\n/**\n * Returns the index of the object within the given array\n * @param  {Array} arr   Array that may or may not hold the object\n * @param  {Object} obj  An object that has a key-value pair unique to and identical to a key-value pair in the object you want to find\n * @return {Number}      The index of the object in the array, or -1\n */\nfunction indexOfObject(arr, obj) {\n\tfor (let i in arr) {\n\t\tif (!arr.hasOwnProperty(i)) continue;\n\t\tfor (let key in obj) {\n\t\t\tif (obj.hasOwnProperty(key) && obj[key] === arr[i][key]) return Number(i);\n\t\t}\n\t}\n\treturn -1;\n}\n\n\nfunction getParentAutoScrollElement(el, includeSelf) {\n\t// skip to window\n\tif (!el || !el.getBoundingClientRect) return getWindowScrollingElement();\n\n\tlet elem = el;\n\tlet gotSelf = false;\n\tdo {\n\t\t// we don't need to get elem css if it isn't even overflowing in the first place (performance)\n\t\tif (elem.clientWidth < elem.scrollWidth || elem.clientHeight < elem.scrollHeight) {\n\t\t\tlet elemCSS = css(elem);\n\t\t\tif (\n\t\t\t\telem.clientWidth < elem.scrollWidth && (elemCSS.overflowX == 'auto' || elemCSS.overflowX == 'scroll') ||\n\t\t\t\telem.clientHeight < elem.scrollHeight && (elemCSS.overflowY == 'auto' || elemCSS.overflowY == 'scroll')\n\t\t\t) {\n\t\t\t\tif (!elem.getBoundingClientRect || elem === document.body) return getWindowScrollingElement();\n\n\t\t\t\tif (gotSelf || includeSelf) return elem;\n\t\t\t\tgotSelf = true;\n\t\t\t}\n\t\t}\n\t/* jshint boss:true */\n\t} while (elem = elem.parentNode);\n\n\treturn getWindowScrollingElement();\n}\n\nfunction extend(dst, src) {\n\tif (dst && src) {\n\t\tfor (let key in src) {\n\t\t\tif (src.hasOwnProperty(key)) {\n\t\t\t\tdst[key] = src[key];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dst;\n}\n\n\nfunction isRectEqual(rect1, rect2) {\n\treturn Math.round(rect1.top) === Math.round(rect2.top) &&\n\t\tMath.round(rect1.left) === Math.round(rect2.left) &&\n\t\tMath.round(rect1.height) === Math.round(rect2.height) &&\n\t\tMath.round(rect1.width) === Math.round(rect2.width);\n}\n\n\nlet _throttleTimeout;\nfunction throttle(callback, ms) {\n\treturn function () {\n\t\tif (!_throttleTimeout) {\n\t\t\tlet args = arguments,\n\t\t\t\t_this = this;\n\n\t\t\tif (args.length === 1) {\n\t\t\t\tcallback.call(_this, args[0]);\n\t\t\t} else {\n\t\t\t\tcallback.apply(_this, args);\n\t\t\t}\n\n\t\t\t_throttleTimeout = setTimeout(function () {\n\t\t\t\t_throttleTimeout = void 0;\n\t\t\t}, ms);\n\t\t}\n\t};\n}\n\n\nfunction cancelThrottle() {\n\tclearTimeout(_throttleTimeout);\n\t_throttleTimeout = void 0;\n}\n\n\nfunction scrollBy(el, x, y) {\n\tel.scrollLeft += x;\n\tel.scrollTop += y;\n}\n\n\nfunction clone(el) {\n\tlet Polymer = window.Polymer;\n\tlet $ = window.jQuery || window.Zepto;\n\n\tif (Polymer && Polymer.dom) {\n\t\treturn Polymer.dom(el).cloneNode(true);\n\t}\n\telse if ($) {\n\t\treturn $(el).clone(true)[0];\n\t}\n\telse {\n\t\treturn el.cloneNode(true);\n\t}\n}\n\n\nfunction setRect(el, rect) {\n\tcss(el, 'position', 'absolute');\n\tcss(el, 'top', rect.top);\n\tcss(el, 'left', rect.left);\n\tcss(el, 'width', rect.width);\n\tcss(el, 'height', rect.height);\n}\n\nfunction unsetRect(el) {\n\tcss(el, 'position', '');\n\tcss(el, 'top', '');\n\tcss(el, 'left', '');\n\tcss(el, 'width', '');\n\tcss(el, 'height', '');\n}\n\nfunction getChildContainingRectFromElement(container, options, ghostEl) {\n    const rect = {};\n\n\tArray.from(container.children).forEach(child => {\n\t\tif (!closest(child, options.draggable, container, false) || child.animated || child === ghostEl) return;\n\t\tconst childRect = getRect(child);\n\t\trect.left = Math.min(rect.left ?? Infinity, childRect.left);\n\t\trect.top = Math.min(rect.top ?? Infinity, childRect.top);\n\t\trect.right = Math.max(rect.right ?? -Infinity, childRect.right);\n\t\trect.bottom = Math.max(rect.bottom ?? -Infinity, childRect.bottom);\n\t});\n\trect.width = rect.right - rect.left;\n\trect.height = rect.bottom - rect.top;\n\trect.x = rect.left;\n\trect.y = rect.top;\n    return rect;\n}\n\nconst expando = 'Sortable' + (new Date).getTime();\n\n\nexport {\n\ton,\n\toff,\n\tmatches,\n\tgetParentOrHost,\n\tclosest,\n\ttoggleClass,\n\tcss,\n\tmatrix,\n\tfind,\n\tgetWindowScrollingElement,\n\tgetRect,\n\tisScrolledPast,\n\tgetChild,\n\tlastChild,\n\tindex,\n\tgetRelativeScrollOffset,\n\tindexOfObject,\n\tgetParentAutoScrollElement,\n\textend,\n\tisRectEqual,\n\tthrottle,\n\tcancelThrottle,\n\tscrollBy,\n\tclone,\n\tsetRect,\n\tunsetRect,\n\tgetContentRect,\n\tgetChildContainingRectFromElement,\n\texpando\n};\n"],"names":["index"],"mappings":";;AAGA,MAAM,cAAc;AAAA,EACnB,SAAS;AAAA,EACT,SAAS;AACV;AAEA,SAAS,GAAG,IAAI,OAAO,IAAI;AAC1B,KAAG,iBAAiB,OAAO,IAAI,CAAC,cAAc,WAAW;AAC1D;AAGA,SAAS,IAAI,IAAI,OAAO,IAAI;AAC3B,KAAG,oBAAoB,OAAO,IAAI,CAAC,cAAc,WAAW;AAC7D;AAEA,SAAS,QAAwB,IAAe,UAAU;AACzD,MAAI,CAAC,SAAU;AAEf,WAAS,CAAC,MAAM,QAAQ,WAAW,SAAS,UAAU,CAAC;AAEvD,MAAI,IAAI;AACP,QAAI;AACH,UAAI,GAAG,SAAS;AACf,eAAO,GAAG,QAAQ,QAAQ;AAAA,MAC3B,WAAW,GAAG,mBAAmB;AAChC,eAAO,GAAG,kBAAkB,QAAQ;AAAA,MACrC,WAAW,GAAG,uBAAuB;AACpC,eAAO,GAAG,sBAAsB,QAAQ;AAAA,MACzC;AAAA,IACD,SAAQ,GAAG;AACV,aAAO;AAAA,IACR;AAAA,EACD;AAEA,SAAO;AACR;AAEA,SAAS,gBAAgB,IAAI;AAC5B,SAAQ,GAAG,QAAQ,OAAO,YAAY,GAAG,KAAK,WAC3C,GAAG,OACH,GAAG;AACP;AAEA,SAAS,QAAwB,IAAe,UAA0B,KAAK,YAAY;AAC1F,MAAI,IAAI;AACP,UAAM,OAAO;AAEb,OAAG;AACF,UACC,YAAY,SAEX,SAAS,CAAC,MAAM,MAChB,GAAG,eAAe,OAAO,QAAQ,IAAI,QAAQ,IAC7C,QAAQ,IAAI,QAAQ,MAErB,cAAc,OAAO,KACpB;AACD,eAAO;AAAA,MACR;AAEA,UAAI,OAAO,IAAK;AAAA,IAEjB,SAAS,KAAK,gBAAgB,EAAE;AAAA,EACjC;AAEA,SAAO;AACR;AAEA,MAAM,UAAU;AAEhB,SAAS,YAAY,IAAI,MAAM,OAAO;AACrC,MAAI,MAAM,MAAM;AACf,QAAI,GAAG,WAAW;AACjB,SAAG,UAAU,QAAQ,QAAQ,QAAQ,EAAE,IAAI;AAAA,IAC5C,OACK;AACJ,UAAI,aAAa,MAAM,GAAG,YAAY,KAAK,QAAQ,SAAS,GAAG,EAAE,QAAQ,MAAM,OAAO,KAAK,GAAG;AAC9F,SAAG,aAAa,aAAa,QAAQ,MAAM,OAAO,KAAK,QAAQ,SAAS,GAAG;AAAA,IAC5E;AAAA,EACD;AACD;AAGA,SAAS,IAAI,IAAI,MAAM,KAAK;AAC3B,MAAI,QAAQ,MAAM,GAAG;AAErB,MAAI,OAAO;AACV,QAAI,QAAQ,QAAQ;AACnB,UAAI,SAAS,eAAe,SAAS,YAAY,kBAAkB;AAClE,cAAM,SAAS,YAAY,iBAAiB,IAAI,EAAE;AAAA,MACnD,WACS,GAAG,cAAc;AACzB,cAAM,GAAG;AAAA,MACV;AAEA,aAAO,SAAS,SAAS,MAAM,IAAI,IAAI;AAAA,IACxC,OACK;AACJ,UAAI,EAAE,QAAQ,UAAU,KAAK,QAAQ,QAAQ,MAAM,IAAI;AACtD,eAAO,aAAa;AAAA,MACrB;AAEA,YAAM,IAAI,IAAI,OAAO,OAAO,QAAQ,WAAW,KAAK;AAAA,IACrD;AAAA,EACD;AACD;AAEA,SAAS,OAAO,IAAI,UAAU;AAC7B,MAAI,oBAAoB;AACxB,MAAI,OAAO,OAAQ,UAAU;AAC5B,wBAAoB;AAAA,EACrB,OAAO;AACN,OAAG;AACF,UAAI,YAAY,IAAI,IAAI,WAAW;AAEnC,UAAI,aAAa,cAAc,QAAQ;AACtC,4BAAoB,YAAY,MAAM;AAAA,MACvC;AAAA,IAED,SAAS,CAAC,aAAa,KAAK,GAAG;AAAA,EAChC;AAEA,QAAM,WAAW,OAAO,aAAa,OAAO,mBAAmB,OAAO,aAAa,OAAO;AAE1F,SAAO,YAAa,IAAI,SAAS,iBAAiB;AACnD;AAGA,SAAS,KAAK,KAAK,SAAS,UAAU;AACrC,MAAI,KAAK;AACR,QAAI,OAAO,IAAI,qBAAqB,OAAO,GAAG,IAAI,GAAG,IAAI,KAAK;AAE9D,QAAI,UAAU;AACb,aAAO,IAAI,GAAG,KAAK;AAClB,iBAAS,KAAK,CAAC,GAAG,CAAC;AAAA,MACpB;AAAA,IACD;AAEA,WAAO;AAAA,EACR;AAEA,SAAO,CAAA;AACR;AAIA,SAAS,4BAA4B;AACpC,MAAI,mBAAmB,SAAS;AAEhC,MAAI,kBAAkB;AACrB,WAAO;AAAA,EACR,OAAO;AACN,WAAO,SAAS;AAAA,EACjB;AACD;AAYA,SAAS,QAAQ,IAAI,2BAA2B,2BAA2B,WAAW,WAAW;AAChG,MAAI,CAAC,GAAG,yBAAyB,OAAO,OAAQ;AAEhD,MAAI,QACH,KACA,MACA,QACA,OACA,QACA;AAED,MAAI,OAAO,UAAU,GAAG,cAAc,OAAO,6BAA6B;AACzE,aAAS,GAAG,sBAAqB;AACjC,UAAM,OAAO;AACb,WAAO,OAAO;AACd,aAAS,OAAO;AAChB,YAAQ,OAAO;AACf,aAAS,OAAO;AAChB,YAAQ,OAAO;AAAA,EAChB,OAAO;AACN,UAAM;AACN,WAAO;AACP,aAAS,OAAO;AAChB,YAAQ,OAAO;AACf,aAAS,OAAO;AAChB,YAAQ,OAAO;AAAA,EAChB;AAEA,OAAK,6BAA6B,8BAA8B,OAAO,QAAQ;AAE9E,gBAAY,aAAa,GAAG;AAI5B,QAAI,CAAC,YAAY;AAChB,SAAG;AACF,YACC,aACA,UAAU,0BAET,IAAI,WAAW,WAAW,MAAM,UAChC,6BACA,IAAI,WAAW,UAAU,MAAM,WAE/B;AACD,cAAI,gBAAgB,UAAU,sBAAqB;AAGnD,iBAAO,cAAc,MAAM,SAAS,IAAI,WAAW,kBAAkB,CAAC;AACtE,kBAAQ,cAAc,OAAO,SAAS,IAAI,WAAW,mBAAmB,CAAC;AACzE,mBAAS,MAAM,OAAO;AACtB,kBAAQ,OAAO,OAAO;AAEtB;AAAA,QACD;AAAA,MAED,SAAS,YAAY,UAAU;AAAA,IAChC;AAAA,EACD;AAEA,MAAI,aAAa,OAAO,QAAQ;AAE/B,QAAI,WAAW,OAAO,aAAa,EAAE,GACpC,SAAS,YAAY,SAAS,GAC9B,SAAS,YAAY,SAAS;AAE/B,QAAI,UAAU;AACb,aAAO;AACP,cAAQ;AAER,eAAS;AACT,gBAAU;AAEV,eAAS,MAAM;AACf,cAAQ,OAAO;AAAA,IAChB;AAAA,EACD;AAEA,SAAO;AAAA,IACN;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACA;AA6BA,SAAS,eAAe,IAAI,QAAQ,YAAY;AAC/C,MAAI,SAAS,2BAA2B,IAAI,IAAI,GAC/C,YAAY,QAAQ,EAAE,EAAE,MAAM;AAG/B,SAAO,QAAQ;AACd,QAAI,gBAAgB,QAAQ,MAAM,EAAE,UAAU,GAC7C;AAEkD;AAClD,gBAAU,aAAa;AAAA,IACxB;AAIA,QAAI,CAAC,QAAS,QAAO;AAErB,QAAI,WAAW,4BAA6B;AAE5C,aAAS,2BAA2B,QAAQ,KAAK;AAAA,EAClD;AAEA,SAAO;AACR;AAYA,SAAS,SAAS,IAAI,UAAU,SAAS,eAAe;AACvD,MAAI,eAAe,GAClB,IAAI,GACJ,WAAW,GAAG;AAEf,SAAO,IAAI,SAAS,QAAQ;AAC3B,QACC,SAAS,CAAC,EAAE,MAAM,YAAY,UAC9B,SAAS,CAAC,MAAM,SAAS,UACxB,iBAAiB,SAAS,CAAC,MAAM,SAAS,YAC3C,QAAQ,SAAS,CAAC,GAAG,QAAQ,WAAW,IAAI,KAAK,GAChD;AACD,UAAI,iBAAiB,UAAU;AAC9B,eAAO,SAAS,CAAC;AAAA,MAClB;AACA;AAAA,IACD;AAEA;AAAA,EACD;AACA,SAAO;AACR;AAQA,SAAS,UAAU,IAAI,UAAU;AAChC,MAAI,OAAO,GAAG;AAEd,SACC,SAEC,SAAS,SAAS,SAClB,IAAI,MAAM,SAAS,MAAM,UACzB,YAAY,CAAC,QAAQ,MAAM,QAAQ,IAEnC;AACD,WAAO,KAAK;AAAA,EACb;AAEA,SAAO,QAAQ;AAChB;AAUA,SAAS,MAAM,IAAI,UAAU;AAC5B,MAAIA,SAAQ;AAEZ,MAAI,CAAC,MAAM,CAAC,GAAG,YAAY;AAC1B,WAAO;AAAA,EACR;AAGA,SAAO,KAAK,GAAG,wBAAwB;AACtC,QAAK,GAAG,SAAS,YAAW,MAAO,cAAe,OAAO,SAAS,UAAU,CAAC,YAAY,QAAQ,IAAI,QAAQ,IAAI;AAChH,MAAAA;AAAA,IACD;AAAA,EACD;AAEA,SAAOA;AACR;AAQA,SAAS,wBAAwB,IAAI;AACpC,MAAI,aAAa,GAChB,YAAY,GACZ,cAAc,0BAAyB;AAExC,MAAI,IAAI;AACP,OAAG;AACF,UAAI,WAAW,OAAO,EAAE,GACvB,SAAS,SAAS,GAClB,SAAS,SAAS;AAEnB,oBAAc,GAAG,aAAa;AAC9B,mBAAa,GAAG,YAAY;AAAA,IAC7B,SAAS,OAAO,gBAAgB,KAAK,GAAG;AAAA,EACzC;AAEA,SAAO,CAAC,YAAY,SAAS;AAC9B;AAQA,SAAS,cAAc,KAAK,KAAK;AAChC,WAAS,KAAK,KAAK;AAClB,QAAI,CAAC,IAAI,eAAe,CAAC,EAAG;AAC5B,aAAS,OAAO,KAAK;AACpB,UAAI,IAAI,eAAe,GAAG,KAAK,IAAI,GAAG,MAAM,IAAI,CAAC,EAAE,GAAG,EAAG,QAAO,OAAO,CAAC;AAAA,IACzE;AAAA,EACD;AACA,SAAO;AACR;AAGA,SAAS,2BAA2B,IAAI,aAAa;AAEpD,MAAI,CAAC,MAAM,CAAC,GAAG,sBAAuB,QAAO,0BAAyB;AAEtE,MAAI,OAAO;AACX,MAAI,UAAU;AACd,KAAG;AAEF,QAAI,KAAK,cAAc,KAAK,eAAe,KAAK,eAAe,KAAK,cAAc;AACjF,UAAI,UAAU,IAAI,IAAI;AACtB,UACC,KAAK,cAAc,KAAK,gBAAgB,QAAQ,aAAa,UAAU,QAAQ,aAAa,aAC5F,KAAK,eAAe,KAAK,iBAAiB,QAAQ,aAAa,UAAU,QAAQ,aAAa,WAC7F;AACD,YAAI,CAAC,KAAK,yBAAyB,SAAS,SAAS,KAAM,QAAO,0BAAyB;AAE3F,YAAI,WAAW,YAAa,QAAO;AACnC,kBAAU;AAAA,MACX;AAAA,IACD;AAAA,EAED,SAAS,OAAO,KAAK;AAErB,SAAO,0BAAyB;AACjC;AAEA,SAAS,OAAO,KAAK,KAAK;AACzB,MAAI,OAAO,KAAK;AACf,aAAS,OAAO,KAAK;AACpB,UAAI,IAAI,eAAe,GAAG,GAAG;AAC5B,YAAI,GAAG,IAAI,IAAI,GAAG;AAAA,MACnB;AAAA,IACD;AAAA,EACD;AAEA,SAAO;AACR;AAGA,SAAS,YAAY,OAAO,OAAO;AAClC,SAAO,KAAK,MAAM,MAAM,GAAG,MAAM,KAAK,MAAM,MAAM,GAAG,KACpD,KAAK,MAAM,MAAM,IAAI,MAAM,KAAK,MAAM,MAAM,IAAI,KAChD,KAAK,MAAM,MAAM,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,KACpD,KAAK,MAAM,MAAM,KAAK,MAAM,KAAK,MAAM,MAAM,KAAK;AACpD;AAGA,IAAI;AACJ,SAAS,SAAS,UAAU,IAAI;AAC/B,SAAO,WAAY;AAClB,QAAI,CAAC,kBAAkB;AACtB,UAAI,OAAO,WACV,QAAQ;AAET,UAAI,KAAK,WAAW,GAAG;AACtB,iBAAS,KAAK,OAAO,KAAK,CAAC,CAAC;AAAA,MAC7B,OAAO;AACN,iBAAS,MAAM,OAAO,IAAI;AAAA,MAC3B;AAEA,yBAAmB,WAAW,WAAY;AACzC,2BAAmB;AAAA,MACpB,GAAG,EAAE;AAAA,IACN;AAAA,EACD;AACD;AASA,SAAS,SAAS,IAAI,GAAG,GAAG;AAC3B,KAAG,cAAc;AACjB,KAAG,aAAa;AACjB;AAGA,SAAS,MAAM,IAAI;AAClB,MAAI,UAAU,OAAO;AACrB,MAAI,IAAI,OAAO,UAAU,OAAO;AAEhC,MAAI,WAAW,QAAQ,KAAK;AAC3B,WAAO,QAAQ,IAAI,EAAE,EAAE,UAAU,IAAI;AAAA,EACtC,WACS,GAAG;AACX,WAAO,EAAE,EAAE,EAAE,MAAM,IAAI,EAAE,CAAC;AAAA,EAC3B,OACK;AACJ,WAAO,GAAG,UAAU,IAAI;AAAA,EACzB;AACD;AAmBA,SAAS,kCAAkC,WAAW,SAAS,SAAS;AACpE,QAAM,OAAO,CAAA;AAEhB,QAAM,KAAK,UAAU,QAAQ,EAAE,QAAQ,WAAS;AAC/C,QAAI,CAAC,QAAQ,OAAO,QAAQ,WAAW,WAAW,KAAK,KAAK,MAAM,YAAY,UAAU,QAAS;AACjG,UAAM,YAAY,QAAQ,KAAK;AAC/B,SAAK,OAAO,KAAK,IAAI,KAAK,QAAQ,UAAU,UAAU,IAAI;AAC1D,SAAK,MAAM,KAAK,IAAI,KAAK,OAAO,UAAU,UAAU,GAAG;AACvD,SAAK,QAAQ,KAAK,IAAI,KAAK,SAAS,WAAW,UAAU,KAAK;AAC9D,SAAK,SAAS,KAAK,IAAI,KAAK,UAAU,WAAW,UAAU,MAAM;AAAA,EAClE,CAAC;AACD,OAAK,QAAQ,KAAK,QAAQ,KAAK;AAC/B,OAAK,SAAS,KAAK,SAAS,KAAK;AACjC,OAAK,IAAI,KAAK;AACd,OAAK,IAAI,KAAK;AACX,SAAO;AACX;AAEK,MAAC,UAAU,cAAc,oBAAI,QAAM,QAAO;"}